var bve=Object.defineProperty;var Cve=(i,e,t)=>e in i?bve(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var fv=(i,e,t)=>(Cve(i,typeof e!="symbol"?e+"":e,t),t);function Ore(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function wve(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var o=Function.bind.apply(e,r);return new o}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var Mre={exports:{}},D5={},Rre={exports:{}},qi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jO=Symbol.for("react.element"),yve=Symbol.for("react.portal"),Sve=Symbol.for("react.fragment"),Lve=Symbol.for("react.strict_mode"),Eve=Symbol.for("react.profiler"),xve=Symbol.for("react.provider"),Dve=Symbol.for("react.context"),Ive=Symbol.for("react.forward_ref"),kve=Symbol.for("react.suspense"),Tve=Symbol.for("react.memo"),Nve=Symbol.for("react.lazy"),LZ=Symbol.iterator;function Ave(i){return i===null||typeof i!="object"?null:(i=LZ&&i[LZ]||i["@@iterator"],typeof i=="function"?i:null)}var Pre={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fre=Object.assign,Bre={};function DS(i,e,t){this.props=i,this.context=e,this.refs=Bre,this.updater=t||Pre}DS.prototype.isReactComponent={};DS.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};DS.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Wre(){}Wre.prototype=DS.prototype;function Sj(i,e,t){this.props=i,this.context=e,this.refs=Bre,this.updater=t||Pre}var Lj=Sj.prototype=new Wre;Lj.constructor=Sj;Fre(Lj,DS.prototype);Lj.isPureReactComponent=!0;var EZ=Array.isArray,Vre=Object.prototype.hasOwnProperty,Ej={current:null},Hre={key:!0,ref:!0,__self:!0,__source:!0};function $re(i,e,t){var n,r={},o=null,s=null;if(e!=null)for(n in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Vre.call(e,n)&&!Hre.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];r.children=u}if(i&&i.defaultProps)for(n in a=i.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:jO,type:i,key:o,ref:s,props:r,_owner:Ej.current}}function Ove(i,e){return{$$typeof:jO,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function xj(i){return typeof i=="object"&&i!==null&&i.$$typeof===jO}function Mve(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var xZ=/\/+/g;function E7(i,e){return typeof i=="object"&&i!==null&&i.key!=null?Mve(""+i.key):e.toString(36)}function IP(i,e,t,n,r){var o=typeof i;(o==="undefined"||o==="boolean")&&(i=null);var s=!1;if(i===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(i.$$typeof){case jO:case yve:s=!0}}if(s)return s=i,r=r(s),i=n===""?"."+E7(s,0):n,EZ(r)?(t="",i!=null&&(t=i.replace(xZ,"$&/")+"/"),IP(r,e,t,"",function(d){return d})):r!=null&&(xj(r)&&(r=Ove(r,t+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(xZ,"$&/")+"/")+i)),e.push(r)),1;if(s=0,n=n===""?".":n+":",EZ(i))for(var a=0;a<i.length;a++){o=i[a];var u=n+E7(o,a);s+=IP(o,e,t,u,r)}else if(u=Ave(i),typeof u=="function")for(i=u.call(i),a=0;!(o=i.next()).done;)o=o.value,u=n+E7(o,a++),s+=IP(o,e,t,u,r);else if(o==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function qM(i,e,t){if(i==null)return i;var n=[],r=0;return IP(i,n,"","",function(o){return e.call(t,o,r++)}),n}function Rve(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var Tl={current:null},kP={transition:null},Pve={ReactCurrentDispatcher:Tl,ReactCurrentBatchConfig:kP,ReactCurrentOwner:Ej};qi.Children={map:qM,forEach:function(i,e,t){qM(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return qM(i,function(){e++}),e},toArray:function(i){return qM(i,function(e){return e})||[]},only:function(i){if(!xj(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};qi.Component=DS;qi.Fragment=Sve;qi.Profiler=Eve;qi.PureComponent=Sj;qi.StrictMode=Lve;qi.Suspense=kve;qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pve;qi.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=Fre({},i.props),r=i.key,o=i.ref,s=i._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ej.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(u in e)Vre.call(e,u)&&!Hre.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];n.children=a}return{$$typeof:jO,type:i.type,key:r,ref:o,props:n,_owner:s}};qi.createContext=function(i){return i={$$typeof:Dve,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:xve,_context:i},i.Consumer=i};qi.createElement=$re;qi.createFactory=function(i){var e=$re.bind(null,i);return e.type=i,e};qi.createRef=function(){return{current:null}};qi.forwardRef=function(i){return{$$typeof:Ive,render:i}};qi.isValidElement=xj;qi.lazy=function(i){return{$$typeof:Nve,_payload:{_status:-1,_result:i},_init:Rve}};qi.memo=function(i,e){return{$$typeof:Tve,type:i,compare:e===void 0?null:e}};qi.startTransition=function(i){var e=kP.transition;kP.transition={};try{i()}finally{kP.transition=e}};qi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qi.useCallback=function(i,e){return Tl.current.useCallback(i,e)};qi.useContext=function(i){return Tl.current.useContext(i)};qi.useDebugValue=function(){};qi.useDeferredValue=function(i){return Tl.current.useDeferredValue(i)};qi.useEffect=function(i,e){return Tl.current.useEffect(i,e)};qi.useId=function(){return Tl.current.useId()};qi.useImperativeHandle=function(i,e,t){return Tl.current.useImperativeHandle(i,e,t)};qi.useInsertionEffect=function(i,e){return Tl.current.useInsertionEffect(i,e)};qi.useLayoutEffect=function(i,e){return Tl.current.useLayoutEffect(i,e)};qi.useMemo=function(i,e){return Tl.current.useMemo(i,e)};qi.useReducer=function(i,e,t){return Tl.current.useReducer(i,e,t)};qi.useRef=function(i){return Tl.current.useRef(i)};qi.useState=function(i){return Tl.current.useState(i)};qi.useSyncExternalStore=function(i,e,t){return Tl.current.useSyncExternalStore(i,e,t)};qi.useTransition=function(){return Tl.current.useTransition()};qi.version="18.2.0";Rre.exports=qi;var he=Rre.exports;const re=Vp(he),Fve=Ore({__proto__:null,default:re},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bve=he,Wve=Symbol.for("react.element"),Vve=Symbol.for("react.fragment"),Hve=Object.prototype.hasOwnProperty,$ve=Bve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zve={key:!0,ref:!0,__self:!0,__source:!0};function zre(i,e,t){var n,r={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(n in e)Hve.call(e,n)&&!zve.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Wve,type:i,key:o,ref:s,props:r,_owner:$ve.current}}D5.Fragment=Vve;D5.jsx=zre;D5.jsxs=zre;Mre.exports=D5;var Fc=Mre.exports,VW={},Ure={exports:{}},_c={},jre={exports:{}},Kre={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Z,z){var O=Z.length;Z.push(z);e:for(;0<O;){var Y=O-1>>>1,fe=Z[Y];if(0<r(fe,z))Z[Y]=z,Z[O]=fe,O=Y;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var z=Z[0],O=Z.pop();if(O!==z){Z[0]=O;e:for(var Y=0,fe=Z.length,ne=fe>>>1;Y<ne;){var we=2*(Y+1)-1,Ie=Z[we],je=we+1,dt=Z[je];if(0>r(Ie,O))je<fe&&0>r(dt,Ie)?(Z[Y]=dt,Z[je]=O,Y=je):(Z[Y]=Ie,Z[we]=O,Y=we);else if(je<fe&&0>r(dt,O))Z[Y]=dt,Z[je]=O,Y=je;else break e}}return z}function r(Z,z){var O=Z.sortIndex-z.sortIndex;return O!==0?O:Z.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();i.unstable_now=function(){return s.now()-a}}var u=[],d=[],h=1,f=null,p=3,m=!1,v=!1,b=!1,L=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Z){for(var z=t(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=Z)n(d),z.sortIndex=z.expirationTime,e(u,z);else break;z=t(d)}}function A(Z){if(b=!1,E(Z),!v)if(t(u)!==null)v=!0,U(N);else{var z=t(d);z!==null&&G(A,z.startTime-Z)}}function N(Z,z){v=!1,b&&(b=!1,S(M),M=-1),m=!0;var O=p;try{for(E(z),f=t(u);f!==null&&(!(f.expirationTime>z)||Z&&!$());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var fe=Y(f.expirationTime<=z);z=i.unstable_now(),typeof fe=="function"?f.callback=fe:f===t(u)&&n(u),E(z)}else n(u);f=t(u)}if(f!==null)var ne=!0;else{var we=t(d);we!==null&&G(A,we.startTime-z),ne=!1}return ne}finally{f=null,p=O,m=!1}}var V=!1,R=null,M=-1,K=5,X=-1;function $(){return!(i.unstable_now()-X<K)}function D(){if(R!==null){var Z=i.unstable_now();X=Z;var z=!0;try{z=R(!0,Z)}finally{z?T():(V=!1,R=null)}}else V=!1}var T;if(typeof y=="function")T=function(){y(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=D,T=function(){B.postMessage(null)}}else T=function(){L(D,0)};function U(Z){R=Z,V||(V=!0,T())}function G(Z,z){M=L(function(){Z(i.unstable_now())},z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){v||m||(v=!0,U(N))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_getFirstCallbackNode=function(){return t(u)},i.unstable_next=function(Z){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var O=p;p=z;try{return Z()}finally{p=O}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,z){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var O=p;p=Z;try{return z()}finally{p=O}},i.unstable_scheduleCallback=function(Z,z,O){var Y=i.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?Y+O:Y):O=Y,Z){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=O+fe,Z={id:h++,callback:z,priorityLevel:Z,startTime:O,expirationTime:fe,sortIndex:-1},O>Y?(Z.sortIndex=O,e(d,Z),t(u)===null&&Z===t(d)&&(b?(S(M),M=-1):b=!0,G(A,O-Y))):(Z.sortIndex=fe,e(u,Z),v||m||(v=!0,U(N))),Z},i.unstable_shouldYield=$,i.unstable_wrapCallback=function(Z){var z=p;return function(){var O=p;p=z;try{return Z.apply(this,arguments)}finally{p=O}}}})(Kre);jre.exports=Kre;var Uve=jre.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gre=he,uc=Uve;function Lt(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qre=new Set,Q2={};function dC(i,e){Iy(i,e),Iy(i+"Capture",e)}function Iy(i,e){for(Q2[i]=e,i=0;i<e.length;i++)qre.add(e[i])}var xp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),HW=Object.prototype.hasOwnProperty,jve=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DZ={},IZ={};function Kve(i){return HW.call(IZ,i)?!0:HW.call(DZ,i)?!1:jve.test(i)?IZ[i]=!0:(DZ[i]=!0,!1)}function Gve(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qve(i,e,t,n){if(e===null||typeof e>"u"||Gve(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nl(i,e,t,n,r,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ta={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Ta[i]=new Nl(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Ta[e]=new Nl(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Ta[i]=new Nl(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Ta[i]=new Nl(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Ta[i]=new Nl(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Ta[i]=new Nl(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Ta[i]=new Nl(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Ta[i]=new Nl(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Ta[i]=new Nl(i,5,!1,i.toLowerCase(),null,!1,!1)});var Dj=/[\-:]([a-z])/g;function Ij(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(Dj,Ij);Ta[e]=new Nl(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(Dj,Ij);Ta[e]=new Nl(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(Dj,Ij);Ta[e]=new Nl(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Ta[i]=new Nl(i,1,!1,i.toLowerCase(),null,!1,!1)});Ta.xlinkHref=new Nl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Ta[i]=new Nl(i,1,!1,i.toLowerCase(),null,!0,!0)});function kj(i,e,t,n){var r=Ta.hasOwnProperty(e)?Ta[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qve(e,t,r,n)&&(t=null),n||r===null?Kve(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Hp=Gre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,YM=Symbol.for("react.element"),vw=Symbol.for("react.portal"),bw=Symbol.for("react.fragment"),Tj=Symbol.for("react.strict_mode"),$W=Symbol.for("react.profiler"),Yre=Symbol.for("react.provider"),Zre=Symbol.for("react.context"),Nj=Symbol.for("react.forward_ref"),zW=Symbol.for("react.suspense"),UW=Symbol.for("react.suspense_list"),Aj=Symbol.for("react.memo"),xv=Symbol.for("react.lazy"),Xre=Symbol.for("react.offscreen"),kZ=Symbol.iterator;function gN(i){return i===null||typeof i!="object"?null:(i=kZ&&i[kZ]||i["@@iterator"],typeof i=="function"?i:null)}var zo=Object.assign,x7;function zN(i){if(x7===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);x7=e&&e[1]||""}return`
`+x7+i}var D7=!1;function I7(i,e){if(!i||D7)return"";D7=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(i,[],e)}else{try{e.call()}catch(d){n=d}i.call(e.prototype)}else{try{throw Error()}catch(d){n=d}i()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),o=n.stack.split(`
`),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||r[s]!==o[a]){var u=`
`+r[s].replace(" at new "," at ");return i.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",i.displayName)),u}while(1<=s&&0<=a);break}}}finally{D7=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?zN(i):""}function Yve(i){switch(i.tag){case 5:return zN(i.type);case 16:return zN("Lazy");case 13:return zN("Suspense");case 19:return zN("SuspenseList");case 0:case 2:case 15:return i=I7(i.type,!1),i;case 11:return i=I7(i.type.render,!1),i;case 1:return i=I7(i.type,!0),i;default:return""}}function jW(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case bw:return"Fragment";case vw:return"Portal";case $W:return"Profiler";case Tj:return"StrictMode";case zW:return"Suspense";case UW:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Zre:return(i.displayName||"Context")+".Consumer";case Yre:return(i._context.displayName||"Context")+".Provider";case Nj:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Aj:return e=i.displayName||null,e!==null?e:jW(i.type)||"Memo";case xv:e=i._payload,i=i._init;try{return jW(i(e))}catch{}}return null}function Zve(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jW(e);case 8:return e===Tj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function h0(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Qre(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xve(i){var e=Qre(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,o=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,o.call(this,s)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function ZM(i){i._valueTracker||(i._valueTracker=Xve(i))}function Jre(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=Qre(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function R4(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function KW(i,e){var t=e.checked;return zo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function TZ(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=h0(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eoe(i,e){e=e.checked,e!=null&&kj(i,"checked",e,!1)}function GW(i,e){eoe(i,e);var t=h0(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?qW(i,e.type,t):e.hasOwnProperty("defaultValue")&&qW(i,e.type,h0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function NZ(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function qW(i,e,t){(e!=="number"||R4(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var UN=Array.isArray;function Gw(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+h0(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function YW(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Lt(91));return zo({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function AZ(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Lt(92));if(UN(t)){if(1<t.length)throw Error(Lt(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:h0(t)}}function toe(i,e){var t=h0(e.value),n=h0(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function OZ(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function noe(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ZW(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?noe(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var XM,ioe=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(XM=XM||document.createElement("div"),XM.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=XM.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function J2(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var f2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qve=["Webkit","ms","Moz","O"];Object.keys(f2).forEach(function(i){Qve.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),f2[e]=f2[i]})});function roe(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||f2.hasOwnProperty(i)&&f2[i]?(""+e).trim():e+"px"}function ooe(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=roe(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var Jve=zo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XW(i,e){if(e){if(Jve[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Lt(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Lt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Lt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Lt(62))}}function QW(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JW=null;function Oj(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var eV=null,qw=null,Yw=null;function MZ(i){if(i=qO(i)){if(typeof eV!="function")throw Error(Lt(280));var e=i.stateNode;e&&(e=A5(e),eV(i.stateNode,i.type,e))}}function soe(i){qw?Yw?Yw.push(i):Yw=[i]:qw=i}function aoe(){if(qw){var i=qw,e=Yw;if(Yw=qw=null,MZ(i),e)for(i=0;i<e.length;i++)MZ(e[i])}}function loe(i,e){return i(e)}function uoe(){}var k7=!1;function coe(i,e,t){if(k7)return i(e,t);k7=!0;try{return loe(i,e,t)}finally{k7=!1,(qw!==null||Yw!==null)&&(uoe(),aoe())}}function eA(i,e){var t=i.stateNode;if(t===null)return null;var n=A5(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Lt(231,e,typeof t));return t}var tV=!1;if(xp)try{var pN={};Object.defineProperty(pN,"passive",{get:function(){tV=!0}}),window.addEventListener("test",pN,pN),window.removeEventListener("test",pN,pN)}catch{tV=!1}function e0e(i,e,t,n,r,o,s,a,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var g2=!1,P4=null,F4=!1,nV=null,t0e={onError:function(i){g2=!0,P4=i}};function n0e(i,e,t,n,r,o,s,a,u){g2=!1,P4=null,e0e.apply(t0e,arguments)}function i0e(i,e,t,n,r,o,s,a,u){if(n0e.apply(this,arguments),g2){if(g2){var d=P4;g2=!1,P4=null}else throw Error(Lt(198));F4||(F4=!0,nV=d)}}function hC(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function doe(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function RZ(i){if(hC(i)!==i)throw Error(Lt(188))}function r0e(i){var e=i.alternate;if(!e){if(e=hC(i),e===null)throw Error(Lt(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var o=r.alternate;if(o===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===t)return RZ(r),i;if(o===n)return RZ(r),e;o=o.sibling}throw Error(Lt(188))}if(t.return!==n.return)t=r,n=o;else{for(var s=!1,a=r.child;a;){if(a===t){s=!0,t=r,n=o;break}if(a===n){s=!0,n=r,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,n=r;break}if(a===n){s=!0,n=o,t=r;break}a=a.sibling}if(!s)throw Error(Lt(189))}}if(t.alternate!==n)throw Error(Lt(190))}if(t.tag!==3)throw Error(Lt(188));return t.stateNode.current===t?i:e}function hoe(i){return i=r0e(i),i!==null?foe(i):null}function foe(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=foe(i);if(e!==null)return e;i=i.sibling}return null}var goe=uc.unstable_scheduleCallback,PZ=uc.unstable_cancelCallback,o0e=uc.unstable_shouldYield,s0e=uc.unstable_requestPaint,as=uc.unstable_now,a0e=uc.unstable_getCurrentPriorityLevel,Mj=uc.unstable_ImmediatePriority,poe=uc.unstable_UserBlockingPriority,B4=uc.unstable_NormalPriority,l0e=uc.unstable_LowPriority,moe=uc.unstable_IdlePriority,I5=null,Xf=null;function u0e(i){if(Xf&&typeof Xf.onCommitFiberRoot=="function")try{Xf.onCommitFiberRoot(I5,i,void 0,(i.current.flags&128)===128)}catch{}}var zh=Math.clz32?Math.clz32:h0e,c0e=Math.log,d0e=Math.LN2;function h0e(i){return i>>>=0,i===0?32:31-(c0e(i)/d0e|0)|0}var QM=64,JM=4194304;function jN(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function W4(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,o=i.pingedLanes,s=t&268435455;if(s!==0){var a=s&~r;a!==0?n=jN(a):(o&=s,o!==0&&(n=jN(o)))}else s=t&~r,s!==0?n=jN(s):o!==0&&(n=jN(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-zh(e),r=1<<t,n|=i[t],e&=~r;return n}function f0e(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g0e(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,o=i.pendingLanes;0<o;){var s=31-zh(o),a=1<<s,u=r[s];u===-1?(!(a&t)||a&n)&&(r[s]=f0e(a,e)):u<=e&&(i.expiredLanes|=a),o&=~a}}function iV(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function _oe(){var i=QM;return QM<<=1,!(QM&4194240)&&(QM=64),i}function T7(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function KO(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-zh(e),i[e]=t}function p0e(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-zh(t),o=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~o}}function Rj(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-zh(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var Vr=0;function voe(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var boe,Pj,Coe,woe,yoe,rV=!1,eR=[],Gv=null,qv=null,Yv=null,tA=new Map,nA=new Map,Nv=[],m0e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FZ(i,e){switch(i){case"focusin":case"focusout":Gv=null;break;case"dragenter":case"dragleave":qv=null;break;case"mouseover":case"mouseout":Yv=null;break;case"pointerover":case"pointerout":tA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nA.delete(e.pointerId)}}function mN(i,e,t,n,r,o){return i===null||i.nativeEvent!==o?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:o,targetContainers:[r]},e!==null&&(e=qO(e),e!==null&&Pj(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function _0e(i,e,t,n,r){switch(e){case"focusin":return Gv=mN(Gv,i,e,t,n,r),!0;case"dragenter":return qv=mN(qv,i,e,t,n,r),!0;case"mouseover":return Yv=mN(Yv,i,e,t,n,r),!0;case"pointerover":var o=r.pointerId;return tA.set(o,mN(tA.get(o)||null,i,e,t,n,r)),!0;case"gotpointercapture":return o=r.pointerId,nA.set(o,mN(nA.get(o)||null,i,e,t,n,r)),!0}return!1}function Soe(i){var e=N1(i.target);if(e!==null){var t=hC(e);if(t!==null){if(e=t.tag,e===13){if(e=doe(t),e!==null){i.blockedOn=e,yoe(i.priority,function(){Coe(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function TP(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=oV(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);JW=n,t.target.dispatchEvent(n),JW=null}else return e=qO(t),e!==null&&Pj(e),i.blockedOn=t,!1;e.shift()}return!0}function BZ(i,e,t){TP(i)&&t.delete(e)}function v0e(){rV=!1,Gv!==null&&TP(Gv)&&(Gv=null),qv!==null&&TP(qv)&&(qv=null),Yv!==null&&TP(Yv)&&(Yv=null),tA.forEach(BZ),nA.forEach(BZ)}function _N(i,e){i.blockedOn===e&&(i.blockedOn=null,rV||(rV=!0,uc.unstable_scheduleCallback(uc.unstable_NormalPriority,v0e)))}function iA(i){function e(r){return _N(r,i)}if(0<eR.length){_N(eR[0],i);for(var t=1;t<eR.length;t++){var n=eR[t];n.blockedOn===i&&(n.blockedOn=null)}}for(Gv!==null&&_N(Gv,i),qv!==null&&_N(qv,i),Yv!==null&&_N(Yv,i),tA.forEach(e),nA.forEach(e),t=0;t<Nv.length;t++)n=Nv[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Nv.length&&(t=Nv[0],t.blockedOn===null);)Soe(t),t.blockedOn===null&&Nv.shift()}var Zw=Hp.ReactCurrentBatchConfig,V4=!0;function b0e(i,e,t,n){var r=Vr,o=Zw.transition;Zw.transition=null;try{Vr=1,Fj(i,e,t,n)}finally{Vr=r,Zw.transition=o}}function C0e(i,e,t,n){var r=Vr,o=Zw.transition;Zw.transition=null;try{Vr=4,Fj(i,e,t,n)}finally{Vr=r,Zw.transition=o}}function Fj(i,e,t,n){if(V4){var r=oV(i,e,t,n);if(r===null)V7(i,e,n,H4,t),FZ(i,n);else if(_0e(r,i,e,t,n))n.stopPropagation();else if(FZ(i,n),e&4&&-1<m0e.indexOf(i)){for(;r!==null;){var o=qO(r);if(o!==null&&boe(o),o=oV(i,e,t,n),o===null&&V7(i,e,n,H4,t),o===r)break;r=o}r!==null&&n.stopPropagation()}else V7(i,e,n,null,t)}}var H4=null;function oV(i,e,t,n){if(H4=null,i=Oj(n),i=N1(i),i!==null)if(e=hC(i),e===null)i=null;else if(t=e.tag,t===13){if(i=doe(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return H4=i,null}function Loe(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0e()){case Mj:return 1;case poe:return 4;case B4:case l0e:return 16;case moe:return 536870912;default:return 16}default:return 16}}var Pv=null,Bj=null,NP=null;function Eoe(){if(NP)return NP;var i,e=Bj,t=e.length,n,r="value"in Pv?Pv.value:Pv.textContent,o=r.length;for(i=0;i<t&&e[i]===r[i];i++);var s=t-i;for(n=1;n<=s&&e[t-n]===r[o-n];n++);return NP=r.slice(i,1<n?1-n:void 0)}function AP(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function tR(){return!0}function WZ(){return!1}function vc(i){function e(t,n,r,o,s){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?tR:WZ,this.isPropagationStopped=WZ,this}return zo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tR)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tR)},persist:function(){},isPersistent:tR}),e}var IS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wj=vc(IS),GO=zo({},IS,{view:0,detail:0}),w0e=vc(GO),N7,A7,vN,k5=zo({},GO,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vj,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vN&&(vN&&i.type==="mousemove"?(N7=i.screenX-vN.screenX,A7=i.screenY-vN.screenY):A7=N7=0,vN=i),N7)},movementY:function(i){return"movementY"in i?i.movementY:A7}}),VZ=vc(k5),y0e=zo({},k5,{dataTransfer:0}),S0e=vc(y0e),L0e=zo({},GO,{relatedTarget:0}),O7=vc(L0e),E0e=zo({},IS,{animationName:0,elapsedTime:0,pseudoElement:0}),x0e=vc(E0e),D0e=zo({},IS,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),I0e=vc(D0e),k0e=zo({},IS,{data:0}),HZ=vc(k0e),T0e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N0e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A0e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O0e(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=A0e[i])?!!e[i]:!1}function Vj(){return O0e}var M0e=zo({},GO,{key:function(i){if(i.key){var e=T0e[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=AP(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?N0e[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vj,charCode:function(i){return i.type==="keypress"?AP(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?AP(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),R0e=vc(M0e),P0e=zo({},k5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$Z=vc(P0e),F0e=zo({},GO,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vj}),B0e=vc(F0e),W0e=zo({},IS,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0e=vc(W0e),H0e=zo({},k5,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$0e=vc(H0e),z0e=[9,13,27,32],Hj=xp&&"CompositionEvent"in window,p2=null;xp&&"documentMode"in document&&(p2=document.documentMode);var U0e=xp&&"TextEvent"in window&&!p2,xoe=xp&&(!Hj||p2&&8<p2&&11>=p2),zZ=String.fromCharCode(32),UZ=!1;function Doe(i,e){switch(i){case"keyup":return z0e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ioe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Cw=!1;function j0e(i,e){switch(i){case"compositionend":return Ioe(e);case"keypress":return e.which!==32?null:(UZ=!0,zZ);case"textInput":return i=e.data,i===zZ&&UZ?null:i;default:return null}}function K0e(i,e){if(Cw)return i==="compositionend"||!Hj&&Doe(i,e)?(i=Eoe(),NP=Bj=Pv=null,Cw=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xoe&&e.locale!=="ko"?null:e.data;default:return null}}var G0e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jZ(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!G0e[i.type]:e==="textarea"}function koe(i,e,t,n){soe(n),e=$4(e,"onChange"),0<e.length&&(t=new Wj("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var m2=null,rA=null;function q0e(i){Voe(i,0)}function T5(i){var e=Sw(i);if(Jre(e))return i}function Y0e(i,e){if(i==="change")return e}var Toe=!1;if(xp){var M7;if(xp){var R7="oninput"in document;if(!R7){var KZ=document.createElement("div");KZ.setAttribute("oninput","return;"),R7=typeof KZ.oninput=="function"}M7=R7}else M7=!1;Toe=M7&&(!document.documentMode||9<document.documentMode)}function GZ(){m2&&(m2.detachEvent("onpropertychange",Noe),rA=m2=null)}function Noe(i){if(i.propertyName==="value"&&T5(rA)){var e=[];koe(e,rA,i,Oj(i)),coe(q0e,e)}}function Z0e(i,e,t){i==="focusin"?(GZ(),m2=e,rA=t,m2.attachEvent("onpropertychange",Noe)):i==="focusout"&&GZ()}function X0e(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return T5(rA)}function Q0e(i,e){if(i==="click")return T5(e)}function J0e(i,e){if(i==="input"||i==="change")return T5(e)}function e1e(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var ef=typeof Object.is=="function"?Object.is:e1e;function oA(i,e){if(ef(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!HW.call(e,r)||!ef(i[r],e[r]))return!1}return!0}function qZ(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function YZ(i,e){var t=qZ(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=qZ(t)}}function Aoe(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Aoe(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Ooe(){for(var i=window,e=R4();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=R4(i.document)}return e}function $j(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function t1e(i){var e=Ooe(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&Aoe(t.ownerDocument.documentElement,t)){if(n!==null&&$j(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,o=Math.min(n.start,r);n=n.end===void 0?o:Math.min(n.end,r),!i.extend&&o>n&&(r=n,n=o,o=r),r=YZ(t,o);var s=YZ(t,n);r&&s&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==s.node||i.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),o>n?(i.addRange(e),i.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var n1e=xp&&"documentMode"in document&&11>=document.documentMode,ww=null,sV=null,_2=null,aV=!1;function ZZ(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;aV||ww==null||ww!==R4(n)||(n=ww,"selectionStart"in n&&$j(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_2&&oA(_2,n)||(_2=n,n=$4(sV,"onSelect"),0<n.length&&(e=new Wj("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=ww)))}function nR(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var yw={animationend:nR("Animation","AnimationEnd"),animationiteration:nR("Animation","AnimationIteration"),animationstart:nR("Animation","AnimationStart"),transitionend:nR("Transition","TransitionEnd")},P7={},Moe={};xp&&(Moe=document.createElement("div").style,"AnimationEvent"in window||(delete yw.animationend.animation,delete yw.animationiteration.animation,delete yw.animationstart.animation),"TransitionEvent"in window||delete yw.transitionend.transition);function N5(i){if(P7[i])return P7[i];if(!yw[i])return i;var e=yw[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in Moe)return P7[i]=e[t];return i}var Roe=N5("animationend"),Poe=N5("animationiteration"),Foe=N5("animationstart"),Boe=N5("transitionend"),Woe=new Map,XZ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function P0(i,e){Woe.set(i,e),dC(e,[i])}for(var F7=0;F7<XZ.length;F7++){var B7=XZ[F7],i1e=B7.toLowerCase(),r1e=B7[0].toUpperCase()+B7.slice(1);P0(i1e,"on"+r1e)}P0(Roe,"onAnimationEnd");P0(Poe,"onAnimationIteration");P0(Foe,"onAnimationStart");P0("dblclick","onDoubleClick");P0("focusin","onFocus");P0("focusout","onBlur");P0(Boe,"onTransitionEnd");Iy("onMouseEnter",["mouseout","mouseover"]);Iy("onMouseLeave",["mouseout","mouseover"]);Iy("onPointerEnter",["pointerout","pointerover"]);Iy("onPointerLeave",["pointerout","pointerover"]);dC("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dC("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dC("onBeforeInput",["compositionend","keypress","textInput","paste"]);dC("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dC("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dC("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var KN="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o1e=new Set("cancel close invalid load scroll toggle".split(" ").concat(KN));function QZ(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,i0e(n,e,void 0,i),i.currentTarget=null}function Voe(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==o&&r.isPropagationStopped())break e;QZ(r,a,d),o=u}else for(s=0;s<n.length;s++){if(a=n[s],u=a.instance,d=a.currentTarget,a=a.listener,u!==o&&r.isPropagationStopped())break e;QZ(r,a,d),o=u}}}if(F4)throw i=nV,F4=!1,nV=null,i}function po(i,e){var t=e[hV];t===void 0&&(t=e[hV]=new Set);var n=i+"__bubble";t.has(n)||(Hoe(e,i,2,!1),t.add(n))}function W7(i,e,t){var n=0;e&&(n|=4),Hoe(t,i,n,e)}var iR="_reactListening"+Math.random().toString(36).slice(2);function sA(i){if(!i[iR]){i[iR]=!0,qre.forEach(function(t){t!=="selectionchange"&&(o1e.has(t)||W7(t,!1,i),W7(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[iR]||(e[iR]=!0,W7("selectionchange",!1,e))}}function Hoe(i,e,t,n){switch(Loe(e)){case 1:var r=b0e;break;case 4:r=C0e;break;default:r=Fj}t=r.bind(null,e,t,i),r=void 0,!tV||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function V7(i,e,t,n,r){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(s===4)for(s=n.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;s=s.return}for(;a!==null;){if(s=N1(a),s===null)return;if(u=s.tag,u===5||u===6){n=o=s;continue e}a=a.parentNode}}n=n.return}coe(function(){var d=o,h=Oj(t),f=[];e:{var p=Woe.get(i);if(p!==void 0){var m=Wj,v=i;switch(i){case"keypress":if(AP(t)===0)break e;case"keydown":case"keyup":m=R0e;break;case"focusin":v="focus",m=O7;break;case"focusout":v="blur",m=O7;break;case"beforeblur":case"afterblur":m=O7;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=VZ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=S0e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=B0e;break;case Roe:case Poe:case Foe:m=x0e;break;case Boe:m=V0e;break;case"scroll":m=w0e;break;case"wheel":m=$0e;break;case"copy":case"cut":case"paste":m=I0e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=$Z}var b=(e&4)!==0,L=!b&&i==="scroll",S=b?p!==null?p+"Capture":null:p;b=[];for(var y=d,E;y!==null;){E=y;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,S!==null&&(A=eA(y,S),A!=null&&b.push(aA(y,A,E)))),L)break;y=y.return}0<b.length&&(p=new m(p,v,null,t,h),f.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=i==="mouseover"||i==="pointerover",m=i==="mouseout"||i==="pointerout",p&&t!==JW&&(v=t.relatedTarget||t.fromElement)&&(N1(v)||v[Dp]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=d,v=v?N1(v):null,v!==null&&(L=hC(v),v!==L||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(b=VZ,A="onMouseLeave",S="onMouseEnter",y="mouse",(i==="pointerout"||i==="pointerover")&&(b=$Z,A="onPointerLeave",S="onPointerEnter",y="pointer"),L=m==null?p:Sw(m),E=v==null?p:Sw(v),p=new b(A,y+"leave",m,t,h),p.target=L,p.relatedTarget=E,A=null,N1(h)===d&&(b=new b(S,y+"enter",v,t,h),b.target=E,b.relatedTarget=L,A=b),L=A,m&&v)t:{for(b=m,S=v,y=0,E=b;E;E=VC(E))y++;for(E=0,A=S;A;A=VC(A))E++;for(;0<y-E;)b=VC(b),y--;for(;0<E-y;)S=VC(S),E--;for(;y--;){if(b===S||S!==null&&b===S.alternate)break t;b=VC(b),S=VC(S)}b=null}else b=null;m!==null&&JZ(f,p,m,b,!1),v!==null&&L!==null&&JZ(f,L,v,b,!0)}}e:{if(p=d?Sw(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=Y0e;else if(jZ(p))if(Toe)N=J0e;else{N=X0e;var V=Z0e}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=Q0e);if(N&&(N=N(i,d))){koe(f,N,t,h);break e}V&&V(i,p,d),i==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&qW(p,"number",p.value)}switch(V=d?Sw(d):window,i){case"focusin":(jZ(V)||V.contentEditable==="true")&&(ww=V,sV=d,_2=null);break;case"focusout":_2=sV=ww=null;break;case"mousedown":aV=!0;break;case"contextmenu":case"mouseup":case"dragend":aV=!1,ZZ(f,t,h);break;case"selectionchange":if(n1e)break;case"keydown":case"keyup":ZZ(f,t,h)}var R;if(Hj)e:{switch(i){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Cw?Doe(i,t)&&(M="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(xoe&&t.locale!=="ko"&&(Cw||M!=="onCompositionStart"?M==="onCompositionEnd"&&Cw&&(R=Eoe()):(Pv=h,Bj="value"in Pv?Pv.value:Pv.textContent,Cw=!0)),V=$4(d,M),0<V.length&&(M=new HZ(M,i,null,t,h),f.push({event:M,listeners:V}),R?M.data=R:(R=Ioe(t),R!==null&&(M.data=R)))),(R=U0e?j0e(i,t):K0e(i,t))&&(d=$4(d,"onBeforeInput"),0<d.length&&(h=new HZ("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=R))}Voe(f,e)})}function aA(i,e,t){return{instance:i,listener:e,currentTarget:t}}function $4(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=eA(i,t),o!=null&&n.unshift(aA(i,o,r)),o=eA(i,e),o!=null&&n.push(aA(i,o,r))),i=i.return}return n}function VC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function JZ(i,e,t,n,r){for(var o=e._reactName,s=[];t!==null&&t!==n;){var a=t,u=a.alternate,d=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&d!==null&&(a=d,r?(u=eA(t,o),u!=null&&s.unshift(aA(t,u,a))):r||(u=eA(t,o),u!=null&&s.push(aA(t,u,a)))),t=t.return}s.length!==0&&i.push({event:e,listeners:s})}var s1e=/\r\n?/g,a1e=/\u0000|\uFFFD/g;function eX(i){return(typeof i=="string"?i:""+i).replace(s1e,`
`).replace(a1e,"")}function rR(i,e,t){if(e=eX(e),eX(i)!==e&&t)throw Error(Lt(425))}function z4(){}var lV=null,uV=null;function cV(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dV=typeof setTimeout=="function"?setTimeout:void 0,l1e=typeof clearTimeout=="function"?clearTimeout:void 0,tX=typeof Promise=="function"?Promise:void 0,u1e=typeof queueMicrotask=="function"?queueMicrotask:typeof tX<"u"?function(i){return tX.resolve(null).then(i).catch(c1e)}:dV;function c1e(i){setTimeout(function(){throw i})}function H7(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),iA(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);iA(e)}function Zv(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function nX(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var kS=Math.random().toString(36).slice(2),Mf="__reactFiber$"+kS,lA="__reactProps$"+kS,Dp="__reactContainer$"+kS,hV="__reactEvents$"+kS,d1e="__reactListeners$"+kS,h1e="__reactHandles$"+kS;function N1(i){var e=i[Mf];if(e)return e;for(var t=i.parentNode;t;){if(e=t[Dp]||t[Mf]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=nX(i);i!==null;){if(t=i[Mf])return t;i=nX(i)}return e}i=t,t=i.parentNode}return null}function qO(i){return i=i[Mf]||i[Dp],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Sw(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Lt(33))}function A5(i){return i[lA]||null}var fV=[],Lw=-1;function F0(i){return{current:i}}function So(i){0>Lw||(i.current=fV[Lw],fV[Lw]=null,Lw--)}function co(i,e){Lw++,fV[Lw]=i.current,i.current=e}var f0={},qa=F0(f0),Ou=F0(!1),hb=f0;function ky(i,e){var t=i.type.contextTypes;if(!t)return f0;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in t)r[o]=e[o];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function Mu(i){return i=i.childContextTypes,i!=null}function U4(){So(Ou),So(qa)}function iX(i,e,t){if(qa.current!==f0)throw Error(Lt(168));co(qa,e),co(Ou,t)}function $oe(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Lt(108,Zve(i)||"Unknown",r));return zo({},t,n)}function j4(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||f0,hb=qa.current,co(qa,i),co(Ou,Ou.current),!0}function rX(i,e,t){var n=i.stateNode;if(!n)throw Error(Lt(169));t?(i=$oe(i,e,hb),n.__reactInternalMemoizedMergedChildContext=i,So(Ou),So(qa),co(qa,i)):So(Ou),co(Ou,t)}var Xg=null,O5=!1,$7=!1;function zoe(i){Xg===null?Xg=[i]:Xg.push(i)}function f1e(i){O5=!0,zoe(i)}function B0(){if(!$7&&Xg!==null){$7=!0;var i=0,e=Vr;try{var t=Xg;for(Vr=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Xg=null,O5=!1}catch(r){throw Xg!==null&&(Xg=Xg.slice(i+1)),goe(Mj,B0),r}finally{Vr=e,$7=!1}}return null}var Ew=[],xw=0,K4=null,G4=0,Bc=[],Wc=0,fb=null,lp=1,up="";function l1(i,e){Ew[xw++]=G4,Ew[xw++]=K4,K4=i,G4=e}function Uoe(i,e,t){Bc[Wc++]=lp,Bc[Wc++]=up,Bc[Wc++]=fb,fb=i;var n=lp;i=up;var r=32-zh(n)-1;n&=~(1<<r),t+=1;var o=32-zh(e)+r;if(30<o){var s=r-r%5;o=(n&(1<<s)-1).toString(32),n>>=s,r-=s,lp=1<<32-zh(e)+r|t<<r|n,up=o+i}else lp=1<<o|t<<r|n,up=i}function zj(i){i.return!==null&&(l1(i,1),Uoe(i,1,0))}function Uj(i){for(;i===K4;)K4=Ew[--xw],Ew[xw]=null,G4=Ew[--xw],Ew[xw]=null;for(;i===fb;)fb=Bc[--Wc],Bc[Wc]=null,up=Bc[--Wc],Bc[Wc]=null,lp=Bc[--Wc],Bc[Wc]=null}var ic=null,Qu=null,xo=!1,Th=null;function joe(i,e){var t=Gc(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function oX(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,ic=i,Qu=Zv(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,ic=i,Qu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=fb!==null?{id:lp,overflow:up}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Gc(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,ic=i,Qu=null,!0):!1;default:return!1}}function gV(i){return(i.mode&1)!==0&&(i.flags&128)===0}function pV(i){if(xo){var e=Qu;if(e){var t=e;if(!oX(i,e)){if(gV(i))throw Error(Lt(418));e=Zv(t.nextSibling);var n=ic;e&&oX(i,e)?joe(n,t):(i.flags=i.flags&-4097|2,xo=!1,ic=i)}}else{if(gV(i))throw Error(Lt(418));i.flags=i.flags&-4097|2,xo=!1,ic=i}}}function sX(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ic=i}function oR(i){if(i!==ic)return!1;if(!xo)return sX(i),xo=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!cV(i.type,i.memoizedProps)),e&&(e=Qu)){if(gV(i))throw Koe(),Error(Lt(418));for(;e;)joe(i,e),e=Zv(e.nextSibling)}if(sX(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Lt(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Qu=Zv(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Qu=null}}else Qu=ic?Zv(i.stateNode.nextSibling):null;return!0}function Koe(){for(var i=Qu;i;)i=Zv(i.nextSibling)}function Ty(){Qu=ic=null,xo=!1}function jj(i){Th===null?Th=[i]:Th.push(i)}var g1e=Hp.ReactCurrentBatchConfig;function Ch(i,e){if(i&&i.defaultProps){e=zo({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}var q4=F0(null),Y4=null,Dw=null,Kj=null;function Gj(){Kj=Dw=Y4=null}function qj(i){var e=q4.current;So(q4),i._currentValue=e}function mV(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function Xw(i,e){Y4=i,Kj=Dw=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(ku=!0),i.firstContext=null)}function nd(i){var e=i._currentValue;if(Kj!==i)if(i={context:i,memoizedValue:e,next:null},Dw===null){if(Y4===null)throw Error(Lt(308));Dw=i,Y4.dependencies={lanes:0,firstContext:i}}else Dw=Dw.next=i;return e}var A1=null;function Yj(i){A1===null?A1=[i]:A1.push(i)}function Goe(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,Yj(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ip(i,n)}function Ip(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Dv=!1;function Zj(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qoe(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function gp(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Xv(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,gr&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Ip(i,t)}return r=n.interleaved,r===null?(e.next=e,Yj(n)):(e.next=r.next,r.next=e),n.interleaved=e,Ip(i,t)}function OP(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Rj(i,t)}}function aX(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?r=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?r=o=e:o=o.next=e}else r=o=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Z4(i,e,t,n){var r=i.updateQueue;Dv=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var u=a,d=u.next;u.next=null,s===null?o=d:s.next=d,s=u;var h=i.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=u))}if(o!==null){var f=r.baseState;s=0,h=d=u=null,a=o;do{var p=a.lane,m=a.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=i,b=a;switch(p=e,m=t,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=zo({},f,p);break e;case 2:Dv=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=m,u=f):h=h.next=m,s|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(u=f),r.baseState=u,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);pb|=s,i.lanes=s,i.memoizedState=f}}function lX(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(Lt(191,r));r.call(n)}}}var Yoe=new Gre.Component().refs;function _V(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:zo({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var M5={isMounted:function(i){return(i=i._reactInternals)?hC(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=_l(),r=Jv(i),o=gp(n,r);o.payload=e,t!=null&&(o.callback=t),e=Xv(i,o,r),e!==null&&(Uh(e,i,r,n),OP(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=_l(),r=Jv(i),o=gp(n,r);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Xv(i,o,r),e!==null&&(Uh(e,i,r,n),OP(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=_l(),n=Jv(i),r=gp(t,n);r.tag=2,e!=null&&(r.callback=e),e=Xv(i,r,n),e!==null&&(Uh(e,i,n,t),OP(e,i,n))}};function uX(i,e,t,n,r,o,s){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,o,s):e.prototype&&e.prototype.isPureReactComponent?!oA(t,n)||!oA(r,o):!0}function Zoe(i,e,t){var n=!1,r=f0,o=e.contextType;return typeof o=="object"&&o!==null?o=nd(o):(r=Mu(e)?hb:qa.current,n=e.contextTypes,o=(n=n!=null)?ky(i,r):f0),e=new e(t,o),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=M5,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=o),e}function cX(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&M5.enqueueReplaceState(e,e.state,null)}function vV(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs=Yoe,Zj(i);var o=e.contextType;typeof o=="object"&&o!==null?r.context=nd(o):(o=Mu(e)?hb:qa.current,r.context=ky(i,o)),r.state=i.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(_V(i,e,o,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&M5.enqueueReplaceState(r,r.state,null),Z4(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function bN(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Lt(309));var n=t.stateNode}if(!n)throw Error(Lt(147,i));var r=n,o=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=r.refs;a===Yoe&&(a=r.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof i!="string")throw Error(Lt(284));if(!t._owner)throw Error(Lt(290,i))}return i}function sR(i,e){throw i=Object.prototype.toString.call(e),Error(Lt(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function dX(i){var e=i._init;return e(i._payload)}function Xoe(i){function e(S,y){if(i){var E=S.deletions;E===null?(S.deletions=[y],S.flags|=16):E.push(y)}}function t(S,y){if(!i)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function n(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function r(S,y){return S=e0(S,y),S.index=0,S.sibling=null,S}function o(S,y,E){return S.index=E,i?(E=S.alternate,E!==null?(E=E.index,E<y?(S.flags|=2,y):E):(S.flags|=2,y)):(S.flags|=1048576,y)}function s(S){return i&&S.alternate===null&&(S.flags|=2),S}function a(S,y,E,A){return y===null||y.tag!==6?(y=Y7(E,S.mode,A),y.return=S,y):(y=r(y,E),y.return=S,y)}function u(S,y,E,A){var N=E.type;return N===bw?h(S,y,E.props.children,A,E.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xv&&dX(N)===y.type)?(A=r(y,E.props),A.ref=bN(S,y,E),A.return=S,A):(A=WP(E.type,E.key,E.props,null,S.mode,A),A.ref=bN(S,y,E),A.return=S,A)}function d(S,y,E,A){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Z7(E,S.mode,A),y.return=S,y):(y=r(y,E.children||[]),y.return=S,y)}function h(S,y,E,A,N){return y===null||y.tag!==7?(y=K1(E,S.mode,A,N),y.return=S,y):(y=r(y,E),y.return=S,y)}function f(S,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Y7(""+y,S.mode,E),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case YM:return E=WP(y.type,y.key,y.props,null,S.mode,E),E.ref=bN(S,null,y),E.return=S,E;case vw:return y=Z7(y,S.mode,E),y.return=S,y;case xv:var A=y._init;return f(S,A(y._payload),E)}if(UN(y)||gN(y))return y=K1(y,S.mode,E,null),y.return=S,y;sR(S,y)}return null}function p(S,y,E,A){var N=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:a(S,y,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case YM:return E.key===N?u(S,y,E,A):null;case vw:return E.key===N?d(S,y,E,A):null;case xv:return N=E._init,p(S,y,N(E._payload),A)}if(UN(E)||gN(E))return N!==null?null:h(S,y,E,A,null);sR(S,E)}return null}function m(S,y,E,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(E)||null,a(y,S,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case YM:return S=S.get(A.key===null?E:A.key)||null,u(y,S,A,N);case vw:return S=S.get(A.key===null?E:A.key)||null,d(y,S,A,N);case xv:var V=A._init;return m(S,y,E,V(A._payload),N)}if(UN(A)||gN(A))return S=S.get(E)||null,h(y,S,A,N,null);sR(y,A)}return null}function v(S,y,E,A){for(var N=null,V=null,R=y,M=y=0,K=null;R!==null&&M<E.length;M++){R.index>M?(K=R,R=null):K=R.sibling;var X=p(S,R,E[M],A);if(X===null){R===null&&(R=K);break}i&&R&&X.alternate===null&&e(S,R),y=o(X,y,M),V===null?N=X:V.sibling=X,V=X,R=K}if(M===E.length)return t(S,R),xo&&l1(S,M),N;if(R===null){for(;M<E.length;M++)R=f(S,E[M],A),R!==null&&(y=o(R,y,M),V===null?N=R:V.sibling=R,V=R);return xo&&l1(S,M),N}for(R=n(S,R);M<E.length;M++)K=m(R,S,M,E[M],A),K!==null&&(i&&K.alternate!==null&&R.delete(K.key===null?M:K.key),y=o(K,y,M),V===null?N=K:V.sibling=K,V=K);return i&&R.forEach(function($){return e(S,$)}),xo&&l1(S,M),N}function b(S,y,E,A){var N=gN(E);if(typeof N!="function")throw Error(Lt(150));if(E=N.call(E),E==null)throw Error(Lt(151));for(var V=N=null,R=y,M=y=0,K=null,X=E.next();R!==null&&!X.done;M++,X=E.next()){R.index>M?(K=R,R=null):K=R.sibling;var $=p(S,R,X.value,A);if($===null){R===null&&(R=K);break}i&&R&&$.alternate===null&&e(S,R),y=o($,y,M),V===null?N=$:V.sibling=$,V=$,R=K}if(X.done)return t(S,R),xo&&l1(S,M),N;if(R===null){for(;!X.done;M++,X=E.next())X=f(S,X.value,A),X!==null&&(y=o(X,y,M),V===null?N=X:V.sibling=X,V=X);return xo&&l1(S,M),N}for(R=n(S,R);!X.done;M++,X=E.next())X=m(R,S,M,X.value,A),X!==null&&(i&&X.alternate!==null&&R.delete(X.key===null?M:X.key),y=o(X,y,M),V===null?N=X:V.sibling=X,V=X);return i&&R.forEach(function(D){return e(S,D)}),xo&&l1(S,M),N}function L(S,y,E,A){if(typeof E=="object"&&E!==null&&E.type===bw&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case YM:e:{for(var N=E.key,V=y;V!==null;){if(V.key===N){if(N=E.type,N===bw){if(V.tag===7){t(S,V.sibling),y=r(V,E.props.children),y.return=S,S=y;break e}}else if(V.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===xv&&dX(N)===V.type){t(S,V.sibling),y=r(V,E.props),y.ref=bN(S,V,E),y.return=S,S=y;break e}t(S,V);break}else e(S,V);V=V.sibling}E.type===bw?(y=K1(E.props.children,S.mode,A,E.key),y.return=S,S=y):(A=WP(E.type,E.key,E.props,null,S.mode,A),A.ref=bN(S,y,E),A.return=S,S=A)}return s(S);case vw:e:{for(V=E.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){t(S,y.sibling),y=r(y,E.children||[]),y.return=S,S=y;break e}else{t(S,y);break}else e(S,y);y=y.sibling}y=Z7(E,S.mode,A),y.return=S,S=y}return s(S);case xv:return V=E._init,L(S,y,V(E._payload),A)}if(UN(E))return v(S,y,E,A);if(gN(E))return b(S,y,E,A);sR(S,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(t(S,y.sibling),y=r(y,E),y.return=S,S=y):(t(S,y),y=Y7(E,S.mode,A),y.return=S,S=y),s(S)):t(S,y)}return L}var Ny=Xoe(!0),Qoe=Xoe(!1),YO={},Qf=F0(YO),uA=F0(YO),cA=F0(YO);function O1(i){if(i===YO)throw Error(Lt(174));return i}function Xj(i,e){switch(co(cA,e),co(uA,i),co(Qf,YO),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ZW(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=ZW(e,i)}So(Qf),co(Qf,e)}function Ay(){So(Qf),So(uA),So(cA)}function Joe(i){O1(cA.current);var e=O1(Qf.current),t=ZW(e,i.type);e!==t&&(co(uA,i),co(Qf,t))}function Qj(i){uA.current===i&&(So(Qf),So(uA))}var Wo=F0(0);function X4(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var z7=[];function Jj(){for(var i=0;i<z7.length;i++)z7[i]._workInProgressVersionPrimary=null;z7.length=0}var MP=Hp.ReactCurrentDispatcher,U7=Hp.ReactCurrentBatchConfig,gb=0,Ho=null,$s=null,Xs=null,Q4=!1,v2=!1,dA=0,p1e=0;function Ba(){throw Error(Lt(321))}function eK(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!ef(i[t],e[t]))return!1;return!0}function tK(i,e,t,n,r,o){if(gb=o,Ho=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,MP.current=i===null||i.memoizedState===null?b1e:C1e,i=t(n,r),v2){o=0;do{if(v2=!1,dA=0,25<=o)throw Error(Lt(301));o+=1,Xs=$s=null,e.updateQueue=null,MP.current=w1e,i=t(n,r)}while(v2)}if(MP.current=J4,e=$s!==null&&$s.next!==null,gb=0,Xs=$s=Ho=null,Q4=!1,e)throw Error(Lt(300));return i}function nK(){var i=dA!==0;return dA=0,i}function Sf(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Ho.memoizedState=Xs=i:Xs=Xs.next=i,Xs}function id(){if($s===null){var i=Ho.alternate;i=i!==null?i.memoizedState:null}else i=$s.next;var e=Xs===null?Ho.memoizedState:Xs.next;if(e!==null)Xs=e,$s=i;else{if(i===null)throw Error(Lt(310));$s=i,i={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},Xs===null?Ho.memoizedState=Xs=i:Xs=Xs.next=i}return Xs}function hA(i,e){return typeof e=="function"?e(i):e}function j7(i){var e=id(),t=e.queue;if(t===null)throw Error(Lt(311));t.lastRenderedReducer=i;var n=$s,r=n.baseQueue,o=t.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}n.baseQueue=r=o,t.pending=null}if(r!==null){o=r.next,n=n.baseState;var a=s=null,u=null,d=o;do{var h=d.lane;if((gb&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:i(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=f,s=n):u=u.next=f,Ho.lanes|=h,pb|=h}d=d.next}while(d!==null&&d!==o);u===null?s=n:u.next=a,ef(n,e.memoizedState)||(ku=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=u,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do o=r.lane,Ho.lanes|=o,pb|=o,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function K7(i){var e=id(),t=e.queue;if(t===null)throw Error(Lt(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,o=e.memoizedState;if(r!==null){t.pending=null;var s=r=r.next;do o=i(o,s.action),s=s.next;while(s!==r);ef(o,e.memoizedState)||(ku=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,n]}function ese(){}function tse(i,e){var t=Ho,n=id(),r=e(),o=!ef(n.memoizedState,r);if(o&&(n.memoizedState=r,ku=!0),n=n.queue,iK(rse.bind(null,t,n,i),[i]),n.getSnapshot!==e||o||Xs!==null&&Xs.memoizedState.tag&1){if(t.flags|=2048,fA(9,ise.bind(null,t,n,r,e),void 0,null),ra===null)throw Error(Lt(349));gb&30||nse(t,e,r)}return r}function nse(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Ho.updateQueue,e===null?(e={lastEffect:null,stores:null},Ho.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function ise(i,e,t,n){e.value=t,e.getSnapshot=n,ose(e)&&sse(i)}function rse(i,e,t){return t(function(){ose(e)&&sse(i)})}function ose(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!ef(i,t)}catch{return!0}}function sse(i){var e=Ip(i,1);e!==null&&Uh(e,i,1,-1)}function hX(i){var e=Sf();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hA,lastRenderedState:i},e.queue=i,i=i.dispatch=v1e.bind(null,Ho,i),[e.memoizedState,i]}function fA(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Ho.updateQueue,e===null?(e={lastEffect:null,stores:null},Ho.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function ase(){return id().memoizedState}function RP(i,e,t,n){var r=Sf();Ho.flags|=i,r.memoizedState=fA(1|e,t,void 0,n===void 0?null:n)}function R5(i,e,t,n){var r=id();n=n===void 0?null:n;var o=void 0;if($s!==null){var s=$s.memoizedState;if(o=s.destroy,n!==null&&eK(n,s.deps)){r.memoizedState=fA(e,t,o,n);return}}Ho.flags|=i,r.memoizedState=fA(1|e,t,o,n)}function fX(i,e){return RP(8390656,8,i,e)}function iK(i,e){return R5(2048,8,i,e)}function lse(i,e){return R5(4,2,i,e)}function use(i,e){return R5(4,4,i,e)}function cse(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function dse(i,e,t){return t=t!=null?t.concat([i]):null,R5(4,4,cse.bind(null,e,i),t)}function rK(){}function hse(i,e){var t=id();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&eK(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function fse(i,e){var t=id();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&eK(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function gse(i,e,t){return gb&21?(ef(t,e)||(t=_oe(),Ho.lanes|=t,pb|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,ku=!0),i.memoizedState=t)}function m1e(i,e){var t=Vr;Vr=t!==0&&4>t?t:4,i(!0);var n=U7.transition;U7.transition={};try{i(!1),e()}finally{Vr=t,U7.transition=n}}function pse(){return id().memoizedState}function _1e(i,e,t){var n=Jv(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},mse(i))_se(e,t);else if(t=Goe(i,e,t,n),t!==null){var r=_l();Uh(t,i,n,r),vse(t,e,n)}}function v1e(i,e,t){var n=Jv(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(mse(i))_se(e,r);else{var o=i.alternate;if(i.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(r.hasEagerState=!0,r.eagerState=a,ef(a,s)){var u=e.interleaved;u===null?(r.next=r,Yj(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}t=Goe(i,e,r,n),t!==null&&(r=_l(),Uh(t,i,n,r),vse(t,e,n))}}function mse(i){var e=i.alternate;return i===Ho||e!==null&&e===Ho}function _se(i,e){v2=Q4=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function vse(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Rj(i,t)}}var J4={readContext:nd,useCallback:Ba,useContext:Ba,useEffect:Ba,useImperativeHandle:Ba,useInsertionEffect:Ba,useLayoutEffect:Ba,useMemo:Ba,useReducer:Ba,useRef:Ba,useState:Ba,useDebugValue:Ba,useDeferredValue:Ba,useTransition:Ba,useMutableSource:Ba,useSyncExternalStore:Ba,useId:Ba,unstable_isNewReconciler:!1},b1e={readContext:nd,useCallback:function(i,e){return Sf().memoizedState=[i,e===void 0?null:e],i},useContext:nd,useEffect:fX,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,RP(4194308,4,cse.bind(null,e,i),t)},useLayoutEffect:function(i,e){return RP(4194308,4,i,e)},useInsertionEffect:function(i,e){return RP(4,2,i,e)},useMemo:function(i,e){var t=Sf();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=Sf();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=_1e.bind(null,Ho,i),[n.memoizedState,i]},useRef:function(i){var e=Sf();return i={current:i},e.memoizedState=i},useState:hX,useDebugValue:rK,useDeferredValue:function(i){return Sf().memoizedState=i},useTransition:function(){var i=hX(!1),e=i[0];return i=m1e.bind(null,i[1]),Sf().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Ho,r=Sf();if(xo){if(t===void 0)throw Error(Lt(407));t=t()}else{if(t=e(),ra===null)throw Error(Lt(349));gb&30||nse(n,e,t)}r.memoizedState=t;var o={value:t,getSnapshot:e};return r.queue=o,fX(rse.bind(null,n,o,i),[i]),n.flags|=2048,fA(9,ise.bind(null,n,o,t,e),void 0,null),t},useId:function(){var i=Sf(),e=ra.identifierPrefix;if(xo){var t=up,n=lp;t=(n&~(1<<32-zh(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=dA++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=p1e++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},C1e={readContext:nd,useCallback:hse,useContext:nd,useEffect:iK,useImperativeHandle:dse,useInsertionEffect:lse,useLayoutEffect:use,useMemo:fse,useReducer:j7,useRef:ase,useState:function(){return j7(hA)},useDebugValue:rK,useDeferredValue:function(i){var e=id();return gse(e,$s.memoizedState,i)},useTransition:function(){var i=j7(hA)[0],e=id().memoizedState;return[i,e]},useMutableSource:ese,useSyncExternalStore:tse,useId:pse,unstable_isNewReconciler:!1},w1e={readContext:nd,useCallback:hse,useContext:nd,useEffect:iK,useImperativeHandle:dse,useInsertionEffect:lse,useLayoutEffect:use,useMemo:fse,useReducer:K7,useRef:ase,useState:function(){return K7(hA)},useDebugValue:rK,useDeferredValue:function(i){var e=id();return $s===null?e.memoizedState=i:gse(e,$s.memoizedState,i)},useTransition:function(){var i=K7(hA)[0],e=id().memoizedState;return[i,e]},useMutableSource:ese,useSyncExternalStore:tse,useId:pse,unstable_isNewReconciler:!1};function Oy(i,e){try{var t="",n=e;do t+=Yve(n),n=n.return;while(n);var r=t}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:i,source:e,stack:r,digest:null}}function G7(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function bV(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var y1e=typeof WeakMap=="function"?WeakMap:Map;function bse(i,e,t){t=gp(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){tF||(tF=!0,kV=n),bV(i,e)},t}function Cse(i,e,t){t=gp(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){bV(i,e)}}var o=i.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){bV(i,e),typeof n!="function"&&(Qv===null?Qv=new Set([this]):Qv.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function gX(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new y1e;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=P1e.bind(null,i,e,t),e.then(i,i))}function pX(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function mX(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=gp(-1,1),e.tag=2,Xv(t,e,1))),t.lanes|=1),i)}var S1e=Hp.ReactCurrentOwner,ku=!1;function cl(i,e,t,n){e.child=i===null?Qoe(e,null,t,n):Ny(e,i.child,t,n)}function _X(i,e,t,n,r){t=t.render;var o=e.ref;return Xw(e,r),n=tK(i,e,t,n,o,r),t=nK(),i!==null&&!ku?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,kp(i,e,r)):(xo&&t&&zj(e),e.flags|=1,cl(i,e,n,r),e.child)}function vX(i,e,t,n,r){if(i===null){var o=t.type;return typeof o=="function"&&!hK(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,wse(i,e,o,n,r)):(i=WP(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(o=i.child,!(i.lanes&r)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:oA,t(s,n)&&i.ref===e.ref)return kp(i,e,r)}return e.flags|=1,i=e0(o,n),i.ref=e.ref,i.return=e,e.child=i}function wse(i,e,t,n,r){if(i!==null){var o=i.memoizedProps;if(oA(o,n)&&i.ref===e.ref)if(ku=!1,e.pendingProps=n=o,(i.lanes&r)!==0)i.flags&131072&&(ku=!0);else return e.lanes=i.lanes,kp(i,e,r)}return CV(i,e,t,n,r)}function yse(i,e,t){var n=e.pendingProps,r=n.children,o=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},co(kw,Ku),Ku|=t;else{if(!(t&1073741824))return i=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,co(kw,Ku),Ku|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:t,co(kw,Ku),Ku|=n}else o!==null?(n=o.baseLanes|t,e.memoizedState=null):n=t,co(kw,Ku),Ku|=n;return cl(i,e,r,t),e.child}function Sse(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function CV(i,e,t,n,r){var o=Mu(t)?hb:qa.current;return o=ky(e,o),Xw(e,r),t=tK(i,e,t,n,o,r),n=nK(),i!==null&&!ku?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,kp(i,e,r)):(xo&&n&&zj(e),e.flags|=1,cl(i,e,t,r),e.child)}function bX(i,e,t,n,r){if(Mu(t)){var o=!0;j4(e)}else o=!1;if(Xw(e,r),e.stateNode===null)PP(i,e),Zoe(e,t,n),vV(e,t,n,r),n=!0;else if(i===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,d=t.contextType;typeof d=="object"&&d!==null?d=nd(d):(d=Mu(t)?hb:qa.current,d=ky(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==n||u!==d)&&cX(e,s,n,d),Dv=!1;var p=e.memoizedState;s.state=p,Z4(e,n,s,r),u=e.memoizedState,a!==n||p!==u||Ou.current||Dv?(typeof h=="function"&&(_V(e,t,h,n),u=e.memoizedState),(a=Dv||uX(e,t,a,n,p,u,d))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=d,n=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,qoe(i,e),a=e.memoizedProps,d=e.type===e.elementType?a:Ch(e.type,a),s.props=d,f=e.pendingProps,p=s.context,u=t.contextType,typeof u=="object"&&u!==null?u=nd(u):(u=Mu(t)?hb:qa.current,u=ky(e,u));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||p!==u)&&cX(e,s,n,u),Dv=!1,p=e.memoizedState,s.state=p,Z4(e,n,s,r);var v=e.memoizedState;a!==f||p!==v||Ou.current||Dv?(typeof m=="function"&&(_V(e,t,m,n),v=e.memoizedState),(d=Dv||uX(e,t,d,n,p,v,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),s.props=n,s.state=v,s.context=u,n=d):(typeof s.componentDidUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&p===i.memoizedState||(e.flags|=1024),n=!1)}return wV(i,e,t,n,o,r)}function wV(i,e,t,n,r,o){Sse(i,e);var s=(e.flags&128)!==0;if(!n&&!s)return r&&rX(e,t,!1),kp(i,e,o);n=e.stateNode,S1e.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&s?(e.child=Ny(e,i.child,null,o),e.child=Ny(e,null,a,o)):cl(i,e,a,o),e.memoizedState=n.state,r&&rX(e,t,!0),e.child}function Lse(i){var e=i.stateNode;e.pendingContext?iX(i,e.pendingContext,e.pendingContext!==e.context):e.context&&iX(i,e.context,!1),Xj(i,e.containerInfo)}function CX(i,e,t,n,r){return Ty(),jj(r),e.flags|=256,cl(i,e,t,n),e.child}var yV={dehydrated:null,treeContext:null,retryLane:0};function SV(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ese(i,e,t){var n=e.pendingProps,r=Wo.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=i!==null&&i.memoizedState===null?!1:(r&2)!==0),a?(o=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),co(Wo,r&1),i===null)return pV(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=n.children,i=n.fallback,o?(n=e.mode,o=e.child,s={mode:"hidden",children:s},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=B5(s,n,0,null),i=K1(i,n,t,null),o.return=e,i.return=e,o.sibling=i,e.child=o,e.child.memoizedState=SV(t),e.memoizedState=yV,i):oK(e,s));if(r=i.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return L1e(i,e,s,n,a,r,t);if(o){o=n.fallback,s=e.mode,r=i.child,a=r.sibling;var u={mode:"hidden",children:n.children};return!(s&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=e0(r,u),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=e0(a,o):(o=K1(o,s,t,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,s=i.child.memoizedState,s=s===null?SV(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=i.childLanes&~t,e.memoizedState=yV,n}return o=i.child,i=o.sibling,n=e0(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function oK(i,e){return e=B5({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function aR(i,e,t,n){return n!==null&&jj(n),Ny(e,i.child,null,t),i=oK(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function L1e(i,e,t,n,r,o,s){if(t)return e.flags&256?(e.flags&=-257,n=G7(Error(Lt(422))),aR(i,e,s,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(o=n.fallback,r=e.mode,n=B5({mode:"visible",children:n.children},r,0,null),o=K1(o,r,s,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Ny(e,i.child,null,s),e.child.memoizedState=SV(s),e.memoizedState=yV,o);if(!(e.mode&1))return aR(i,e,s,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,o=Error(Lt(419)),n=G7(o,n,void 0),aR(i,e,s,n)}if(a=(s&i.childLanes)!==0,ku||a){if(n=ra,n!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ip(i,r),Uh(n,i,r,-1))}return dK(),n=G7(Error(Lt(421))),aR(i,e,s,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=F1e.bind(null,i),r._reactRetry=e,null):(i=o.treeContext,Qu=Zv(r.nextSibling),ic=e,xo=!0,Th=null,i!==null&&(Bc[Wc++]=lp,Bc[Wc++]=up,Bc[Wc++]=fb,lp=i.id,up=i.overflow,fb=e),e=oK(e,n.children),e.flags|=4096,e)}function wX(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),mV(i.return,e,t)}function q7(i,e,t,n,r){var o=i.memoizedState;o===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=t,o.tailMode=r)}function xse(i,e,t){var n=e.pendingProps,r=n.revealOrder,o=n.tail;if(cl(i,e,n.children,t),n=Wo.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wX(i,t,e);else if(i.tag===19)wX(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(co(Wo,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&X4(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),q7(e,!1,r,t,o);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&X4(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}q7(e,!0,t,null,o);break;case"together":q7(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function PP(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function kp(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),pb|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Lt(153));if(e.child!==null){for(i=e.child,t=e0(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=e0(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function E1e(i,e,t){switch(e.tag){case 3:Lse(e),Ty();break;case 5:Joe(e);break;case 1:Mu(e.type)&&j4(e);break;case 4:Xj(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;co(q4,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(co(Wo,Wo.current&1),e.flags|=128,null):t&e.child.childLanes?Ese(i,e,t):(co(Wo,Wo.current&1),i=kp(i,e,t),i!==null?i.sibling:null);co(Wo,Wo.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return xse(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),co(Wo,Wo.current),n)break;return null;case 22:case 23:return e.lanes=0,yse(i,e,t)}return kp(i,e,t)}var Dse,LV,Ise,kse;Dse=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};LV=function(){};Ise=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,O1(Qf.current);var o=null;switch(t){case"input":r=KW(i,r),n=KW(i,n),o=[];break;case"select":r=zo({},r,{value:void 0}),n=zo({},n,{value:void 0}),o=[];break;case"textarea":r=YW(i,r),n=YW(i,n),o=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=z4)}XW(t,n);var s;t=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var a=r[d];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Q2.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var u=n[d];if(a=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(t||(t={}),t[s]=u[s])}else t||(o||(o=[]),o.push(d,t)),t=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Q2.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&po("scroll",i),o||a===u||(o=[])):(o=o||[]).push(d,u))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};kse=function(i,e,t,n){t!==n&&(e.flags|=4)};function CN(i,e){if(!xo)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Wa(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function x1e(i,e,t){var n=e.pendingProps;switch(Uj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(e),null;case 1:return Mu(e.type)&&U4(),Wa(e),null;case 3:return n=e.stateNode,Ay(),So(Ou),So(qa),Jj(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(oR(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Th!==null&&(AV(Th),Th=null))),LV(i,e),Wa(e),null;case 5:Qj(e);var r=O1(cA.current);if(t=e.type,i!==null&&e.stateNode!=null)Ise(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Lt(166));return Wa(e),null}if(i=O1(Qf.current),oR(e)){n=e.stateNode,t=e.type;var o=e.memoizedProps;switch(n[Mf]=e,n[lA]=o,i=(e.mode&1)!==0,t){case"dialog":po("cancel",n),po("close",n);break;case"iframe":case"object":case"embed":po("load",n);break;case"video":case"audio":for(r=0;r<KN.length;r++)po(KN[r],n);break;case"source":po("error",n);break;case"img":case"image":case"link":po("error",n),po("load",n);break;case"details":po("toggle",n);break;case"input":TZ(n,o),po("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},po("invalid",n);break;case"textarea":AZ(n,o),po("invalid",n)}XW(t,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?n.textContent!==a&&(o.suppressHydrationWarning!==!0&&rR(n.textContent,a,i),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&rR(n.textContent,a,i),r=["children",""+a]):Q2.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&po("scroll",n)}switch(t){case"input":ZM(n),NZ(n,o,!0);break;case"textarea":ZM(n),OZ(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=z4)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=noe(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=s.createElement(t,{is:n.is}):(i=s.createElement(t),t==="select"&&(s=i,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):i=s.createElementNS(i,t),i[Mf]=e,i[lA]=n,Dse(i,e,!1,!1),e.stateNode=i;e:{switch(s=QW(t,n),t){case"dialog":po("cancel",i),po("close",i),r=n;break;case"iframe":case"object":case"embed":po("load",i),r=n;break;case"video":case"audio":for(r=0;r<KN.length;r++)po(KN[r],i);r=n;break;case"source":po("error",i),r=n;break;case"img":case"image":case"link":po("error",i),po("load",i),r=n;break;case"details":po("toggle",i),r=n;break;case"input":TZ(i,n),r=KW(i,n),po("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=zo({},n,{value:void 0}),po("invalid",i);break;case"textarea":AZ(i,n),r=YW(i,n),po("invalid",i);break;default:r=n}XW(t,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?ooe(i,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ioe(i,u)):o==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&J2(i,u):typeof u=="number"&&J2(i,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Q2.hasOwnProperty(o)?u!=null&&o==="onScroll"&&po("scroll",i):u!=null&&kj(i,o,u,s))}switch(t){case"input":ZM(i),NZ(i,n,!1);break;case"textarea":ZM(i),OZ(i);break;case"option":n.value!=null&&i.setAttribute("value",""+h0(n.value));break;case"select":i.multiple=!!n.multiple,o=n.value,o!=null?Gw(i,!!n.multiple,o,!1):n.defaultValue!=null&&Gw(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=z4)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wa(e),null;case 6:if(i&&e.stateNode!=null)kse(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Lt(166));if(t=O1(cA.current),O1(Qf.current),oR(e)){if(n=e.stateNode,t=e.memoizedProps,n[Mf]=e,(o=n.nodeValue!==t)&&(i=ic,i!==null))switch(i.tag){case 3:rR(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&rR(n.nodeValue,t,(i.mode&1)!==0)}o&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Mf]=e,e.stateNode=n}return Wa(e),null;case 13:if(So(Wo),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(xo&&Qu!==null&&e.mode&1&&!(e.flags&128))Koe(),Ty(),e.flags|=98560,o=!1;else if(o=oR(e),n!==null&&n.dehydrated!==null){if(i===null){if(!o)throw Error(Lt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Lt(317));o[Mf]=e}else Ty(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wa(e),o=!1}else Th!==null&&(AV(Th),Th=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||Wo.current&1?zs===0&&(zs=3):dK())),e.updateQueue!==null&&(e.flags|=4),Wa(e),null);case 4:return Ay(),LV(i,e),i===null&&sA(e.stateNode.containerInfo),Wa(e),null;case 10:return qj(e.type._context),Wa(e),null;case 17:return Mu(e.type)&&U4(),Wa(e),null;case 19:if(So(Wo),o=e.memoizedState,o===null)return Wa(e),null;if(n=(e.flags&128)!==0,s=o.rendering,s===null)if(n)CN(o,!1);else{if(zs!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(s=X4(i),s!==null){for(e.flags|=128,CN(o,!1),n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)o=t,i=n,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=i,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return co(Wo,Wo.current&1|2),e.child}i=i.sibling}o.tail!==null&&as()>My&&(e.flags|=128,n=!0,CN(o,!1),e.lanes=4194304)}else{if(!n)if(i=X4(s),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),CN(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!xo)return Wa(e),null}else 2*as()-o.renderingStartTime>My&&t!==1073741824&&(e.flags|=128,n=!0,CN(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=as(),e.sibling=null,t=Wo.current,co(Wo,n?t&1|2:t&1),e):(Wa(e),null);case 22:case 23:return cK(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ku&1073741824&&(Wa(e),e.subtreeFlags&6&&(e.flags|=8192)):Wa(e),null;case 24:return null;case 25:return null}throw Error(Lt(156,e.tag))}function D1e(i,e){switch(Uj(e),e.tag){case 1:return Mu(e.type)&&U4(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Ay(),So(Ou),So(qa),Jj(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Qj(e),null;case 13:if(So(Wo),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Lt(340));Ty()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return So(Wo),null;case 4:return Ay(),null;case 10:return qj(e.type._context),null;case 22:case 23:return cK(),null;case 24:return null;default:return null}}var lR=!1,$a=!1,I1e=typeof WeakSet=="function"?WeakSet:Set,cn=null;function Iw(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Qo(i,e,n)}else t.current=null}function EV(i,e,t){try{t()}catch(n){Qo(i,e,n)}}var yX=!1;function k1e(i,e){if(lV=V4,i=Ooe(),$j(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,u=-1,d=0,h=0,f=i,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=s+r),f!==o||n!==0&&f.nodeType!==3||(u=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===i)break t;if(p===t&&++d===r&&(a=s),p===o&&++h===n&&(u=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(uV={focusedElem:i,selectionRange:t},V4=!1,cn=e;cn!==null;)if(e=cn,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,cn=i;else for(;cn!==null;){e=cn;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,L=v.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ch(e.type,b),L);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Lt(163))}}catch(A){Qo(e,e.return,A)}if(i=e.sibling,i!==null){i.return=e.return,cn=i;break}cn=e.return}return v=yX,yX=!1,v}function b2(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var o=r.destroy;r.destroy=void 0,o!==void 0&&EV(e,t,o)}r=r.next}while(r!==n)}}function P5(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function xV(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function Tse(i){var e=i.alternate;e!==null&&(i.alternate=null,Tse(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Mf],delete e[lA],delete e[hV],delete e[d1e],delete e[h1e])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Nse(i){return i.tag===5||i.tag===3||i.tag===4}function SX(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Nse(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function DV(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=z4));else if(n!==4&&(i=i.child,i!==null))for(DV(i,e,t),i=i.sibling;i!==null;)DV(i,e,t),i=i.sibling}function IV(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(IV(i,e,t),i=i.sibling;i!==null;)IV(i,e,t),i=i.sibling}var Ea=null,Lh=!1;function gv(i,e,t){for(t=t.child;t!==null;)Ase(i,e,t),t=t.sibling}function Ase(i,e,t){if(Xf&&typeof Xf.onCommitFiberUnmount=="function")try{Xf.onCommitFiberUnmount(I5,t)}catch{}switch(t.tag){case 5:$a||Iw(t,e);case 6:var n=Ea,r=Lh;Ea=null,gv(i,e,t),Ea=n,Lh=r,Ea!==null&&(Lh?(i=Ea,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):Ea.removeChild(t.stateNode));break;case 18:Ea!==null&&(Lh?(i=Ea,t=t.stateNode,i.nodeType===8?H7(i.parentNode,t):i.nodeType===1&&H7(i,t),iA(i)):H7(Ea,t.stateNode));break;case 4:n=Ea,r=Lh,Ea=t.stateNode.containerInfo,Lh=!0,gv(i,e,t),Ea=n,Lh=r;break;case 0:case 11:case 14:case 15:if(!$a&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&EV(t,e,s),r=r.next}while(r!==n)}gv(i,e,t);break;case 1:if(!$a&&(Iw(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Qo(t,e,a)}gv(i,e,t);break;case 21:gv(i,e,t);break;case 22:t.mode&1?($a=(n=$a)||t.memoizedState!==null,gv(i,e,t),$a=n):gv(i,e,t);break;default:gv(i,e,t)}}function LX(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new I1e),e.forEach(function(n){var r=B1e.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function mh(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var o=i,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Ea=a.stateNode,Lh=!1;break e;case 3:Ea=a.stateNode.containerInfo,Lh=!0;break e;case 4:Ea=a.stateNode.containerInfo,Lh=!0;break e}a=a.return}if(Ea===null)throw Error(Lt(160));Ase(o,s,r),Ea=null,Lh=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(d){Qo(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ose(e,i),e=e.sibling}function Ose(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(mh(e,i),ff(i),n&4){try{b2(3,i,i.return),P5(3,i)}catch(b){Qo(i,i.return,b)}try{b2(5,i,i.return)}catch(b){Qo(i,i.return,b)}}break;case 1:mh(e,i),ff(i),n&512&&t!==null&&Iw(t,t.return);break;case 5:if(mh(e,i),ff(i),n&512&&t!==null&&Iw(t,t.return),i.flags&32){var r=i.stateNode;try{J2(r,"")}catch(b){Qo(i,i.return,b)}}if(n&4&&(r=i.stateNode,r!=null)){var o=i.memoizedProps,s=t!==null?t.memoizedProps:o,a=i.type,u=i.updateQueue;if(i.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&eoe(r,o),QW(a,s);var d=QW(a,o);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];h==="style"?ooe(r,f):h==="dangerouslySetInnerHTML"?ioe(r,f):h==="children"?J2(r,f):kj(r,h,f,d)}switch(a){case"input":GW(r,o);break;case"textarea":toe(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Gw(r,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Gw(r,!!o.multiple,o.defaultValue,!0):Gw(r,!!o.multiple,o.multiple?[]:"",!1))}r[lA]=o}catch(b){Qo(i,i.return,b)}}break;case 6:if(mh(e,i),ff(i),n&4){if(i.stateNode===null)throw Error(Lt(162));r=i.stateNode,o=i.memoizedProps;try{r.nodeValue=o}catch(b){Qo(i,i.return,b)}}break;case 3:if(mh(e,i),ff(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{iA(e.containerInfo)}catch(b){Qo(i,i.return,b)}break;case 4:mh(e,i),ff(i);break;case 13:mh(e,i),ff(i),r=i.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(lK=as())),n&4&&LX(i);break;case 22:if(h=t!==null&&t.memoizedState!==null,i.mode&1?($a=(d=$a)||h,mh(e,i),$a=d):mh(e,i),ff(i),n&8192){if(d=i.memoizedState!==null,(i.stateNode.isHidden=d)&&!h&&i.mode&1)for(cn=i,h=i.child;h!==null;){for(f=cn=h;cn!==null;){switch(p=cn,m=p.child,p.tag){case 0:case 11:case 14:case 15:b2(4,p,p.return);break;case 1:Iw(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,t=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){Qo(n,t,b)}}break;case 5:Iw(p,p.return);break;case 22:if(p.memoizedState!==null){xX(f);continue}}m!==null?(m.return=p,cn=m):xX(f)}h=h.sibling}e:for(h=null,f=i;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=roe("display",s))}catch(b){Qo(i,i.return,b)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Qo(i,i.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===i)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mh(e,i),ff(i),n&4&&LX(i);break;case 21:break;default:mh(e,i),ff(i)}}function ff(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(Nse(t)){var n=t;break e}t=t.return}throw Error(Lt(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(J2(r,""),n.flags&=-33);var o=SX(i);IV(i,o,r);break;case 3:case 4:var s=n.stateNode.containerInfo,a=SX(i);DV(i,a,s);break;default:throw Error(Lt(161))}}catch(u){Qo(i,i.return,u)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function T1e(i,e,t){cn=i,Mse(i)}function Mse(i,e,t){for(var n=(i.mode&1)!==0;cn!==null;){var r=cn,o=r.child;if(r.tag===22&&n){var s=r.memoizedState!==null||lR;if(!s){var a=r.alternate,u=a!==null&&a.memoizedState!==null||$a;a=lR;var d=$a;if(lR=s,($a=u)&&!d)for(cn=r;cn!==null;)s=cn,u=s.child,s.tag===22&&s.memoizedState!==null?DX(r):u!==null?(u.return=s,cn=u):DX(r);for(;o!==null;)cn=o,Mse(o),o=o.sibling;cn=r,lR=a,$a=d}EX(i)}else r.subtreeFlags&8772&&o!==null?(o.return=r,cn=o):EX(i)}}function EX(i){for(;cn!==null;){var e=cn;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$a||P5(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!$a)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Ch(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&lX(e,o,n);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}lX(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&iA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Lt(163))}$a||e.flags&512&&xV(e)}catch(p){Qo(e,e.return,p)}}if(e===i){cn=null;break}if(t=e.sibling,t!==null){t.return=e.return,cn=t;break}cn=e.return}}function xX(i){for(;cn!==null;){var e=cn;if(e===i){cn=null;break}var t=e.sibling;if(t!==null){t.return=e.return,cn=t;break}cn=e.return}}function DX(i){for(;cn!==null;){var e=cn;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{P5(4,e)}catch(u){Qo(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(u){Qo(e,r,u)}}var o=e.return;try{xV(e)}catch(u){Qo(e,o,u)}break;case 5:var s=e.return;try{xV(e)}catch(u){Qo(e,s,u)}}}catch(u){Qo(e,e.return,u)}if(e===i){cn=null;break}var a=e.sibling;if(a!==null){a.return=e.return,cn=a;break}cn=e.return}}var N1e=Math.ceil,eF=Hp.ReactCurrentDispatcher,sK=Hp.ReactCurrentOwner,Xc=Hp.ReactCurrentBatchConfig,gr=0,ra=null,Is=null,Ia=0,Ku=0,kw=F0(0),zs=0,gA=null,pb=0,F5=0,aK=0,C2=null,Lu=null,lK=0,My=1/0,Ug=null,tF=!1,kV=null,Qv=null,uR=!1,Fv=null,nF=0,w2=0,TV=null,FP=-1,BP=0;function _l(){return gr&6?as():FP!==-1?FP:FP=as()}function Jv(i){return i.mode&1?gr&2&&Ia!==0?Ia&-Ia:g1e.transition!==null?(BP===0&&(BP=_oe()),BP):(i=Vr,i!==0||(i=window.event,i=i===void 0?16:Loe(i.type)),i):1}function Uh(i,e,t,n){if(50<w2)throw w2=0,TV=null,Error(Lt(185));KO(i,t,n),(!(gr&2)||i!==ra)&&(i===ra&&(!(gr&2)&&(F5|=t),zs===4&&Av(i,Ia)),Ru(i,n),t===1&&gr===0&&!(e.mode&1)&&(My=as()+500,O5&&B0()))}function Ru(i,e){var t=i.callbackNode;g0e(i,e);var n=W4(i,i===ra?Ia:0);if(n===0)t!==null&&PZ(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&PZ(t),e===1)i.tag===0?f1e(IX.bind(null,i)):zoe(IX.bind(null,i)),u1e(function(){!(gr&6)&&B0()}),t=null;else{switch(voe(n)){case 1:t=Mj;break;case 4:t=poe;break;case 16:t=B4;break;case 536870912:t=moe;break;default:t=B4}t=$se(t,Rse.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function Rse(i,e){if(FP=-1,BP=0,gr&6)throw Error(Lt(327));var t=i.callbackNode;if(Qw()&&i.callbackNode!==t)return null;var n=W4(i,i===ra?Ia:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=iF(i,n);else{e=n;var r=gr;gr|=2;var o=Fse();(ra!==i||Ia!==e)&&(Ug=null,My=as()+500,j1(i,e));do try{M1e();break}catch(a){Pse(i,a)}while(1);Gj(),eF.current=o,gr=r,Is!==null?e=0:(ra=null,Ia=0,e=zs)}if(e!==0){if(e===2&&(r=iV(i),r!==0&&(n=r,e=NV(i,r))),e===1)throw t=gA,j1(i,0),Av(i,n),Ru(i,as()),t;if(e===6)Av(i,n);else{if(r=i.current.alternate,!(n&30)&&!A1e(r)&&(e=iF(i,n),e===2&&(o=iV(i),o!==0&&(n=o,e=NV(i,o))),e===1))throw t=gA,j1(i,0),Av(i,n),Ru(i,as()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(Lt(345));case 2:u1(i,Lu,Ug);break;case 3:if(Av(i,n),(n&130023424)===n&&(e=lK+500-as(),10<e)){if(W4(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){_l(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=dV(u1.bind(null,i,Lu,Ug),e);break}u1(i,Lu,Ug);break;case 4:if(Av(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var s=31-zh(n);o=1<<s,s=e[s],s>r&&(r=s),n&=~o}if(n=r,n=as()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*N1e(n/1960))-n,10<n){i.timeoutHandle=dV(u1.bind(null,i,Lu,Ug),n);break}u1(i,Lu,Ug);break;case 5:u1(i,Lu,Ug);break;default:throw Error(Lt(329))}}}return Ru(i,as()),i.callbackNode===t?Rse.bind(null,i):null}function NV(i,e){var t=C2;return i.current.memoizedState.isDehydrated&&(j1(i,e).flags|=256),i=iF(i,e),i!==2&&(e=Lu,Lu=t,e!==null&&AV(e)),i}function AV(i){Lu===null?Lu=i:Lu.push.apply(Lu,i)}function A1e(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],o=r.getSnapshot;r=r.value;try{if(!ef(o(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Av(i,e){for(e&=~aK,e&=~F5,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-zh(e),n=1<<t;i[t]=-1,e&=~n}}function IX(i){if(gr&6)throw Error(Lt(327));Qw();var e=W4(i,0);if(!(e&1))return Ru(i,as()),null;var t=iF(i,e);if(i.tag!==0&&t===2){var n=iV(i);n!==0&&(e=n,t=NV(i,n))}if(t===1)throw t=gA,j1(i,0),Av(i,e),Ru(i,as()),t;if(t===6)throw Error(Lt(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,u1(i,Lu,Ug),Ru(i,as()),null}function uK(i,e){var t=gr;gr|=1;try{return i(e)}finally{gr=t,gr===0&&(My=as()+500,O5&&B0())}}function mb(i){Fv!==null&&Fv.tag===0&&!(gr&6)&&Qw();var e=gr;gr|=1;var t=Xc.transition,n=Vr;try{if(Xc.transition=null,Vr=1,i)return i()}finally{Vr=n,Xc.transition=t,gr=e,!(gr&6)&&B0()}}function cK(){Ku=kw.current,So(kw)}function j1(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,l1e(t)),Is!==null)for(t=Is.return;t!==null;){var n=t;switch(Uj(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&U4();break;case 3:Ay(),So(Ou),So(qa),Jj();break;case 5:Qj(n);break;case 4:Ay();break;case 13:So(Wo);break;case 19:So(Wo);break;case 10:qj(n.type._context);break;case 22:case 23:cK()}t=t.return}if(ra=i,Is=i=e0(i.current,null),Ia=Ku=e,zs=0,gA=null,aK=F5=pb=0,Lu=C2=null,A1!==null){for(e=0;e<A1.length;e++)if(t=A1[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,o=t.pending;if(o!==null){var s=o.next;o.next=r,n.next=s}t.pending=n}A1=null}return i}function Pse(i,e){do{var t=Is;try{if(Gj(),MP.current=J4,Q4){for(var n=Ho.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Q4=!1}if(gb=0,Xs=$s=Ho=null,v2=!1,dA=0,sK.current=null,t===null||t.return===null){zs=1,gA=e,Is=null;break}e:{var o=i,s=t.return,a=t,u=e;if(e=Ia,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=pX(s);if(m!==null){m.flags&=-257,mX(m,s,a,o,e),m.mode&1&&gX(o,d,e),e=m,u=d;var v=e.updateQueue;if(v===null){var b=new Set;b.add(u),e.updateQueue=b}else v.add(u);break e}else{if(!(e&1)){gX(o,d,e),dK();break e}u=Error(Lt(426))}}else if(xo&&a.mode&1){var L=pX(s);if(L!==null){!(L.flags&65536)&&(L.flags|=256),mX(L,s,a,o,e),jj(Oy(u,a));break e}}o=u=Oy(u,a),zs!==4&&(zs=2),C2===null?C2=[o]:C2.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=bse(o,u,e);aX(o,S);break e;case 1:a=u;var y=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Qv===null||!Qv.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var A=Cse(o,a,e);aX(o,A);break e}}o=o.return}while(o!==null)}Wse(t)}catch(N){e=N,Is===t&&t!==null&&(Is=t=t.return);continue}break}while(1)}function Fse(){var i=eF.current;return eF.current=J4,i===null?J4:i}function dK(){(zs===0||zs===3||zs===2)&&(zs=4),ra===null||!(pb&268435455)&&!(F5&268435455)||Av(ra,Ia)}function iF(i,e){var t=gr;gr|=2;var n=Fse();(ra!==i||Ia!==e)&&(Ug=null,j1(i,e));do try{O1e();break}catch(r){Pse(i,r)}while(1);if(Gj(),gr=t,eF.current=n,Is!==null)throw Error(Lt(261));return ra=null,Ia=0,zs}function O1e(){for(;Is!==null;)Bse(Is)}function M1e(){for(;Is!==null&&!o0e();)Bse(Is)}function Bse(i){var e=Hse(i.alternate,i,Ku);i.memoizedProps=i.pendingProps,e===null?Wse(i):Is=e,sK.current=null}function Wse(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=D1e(t,e),t!==null){t.flags&=32767,Is=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{zs=6,Is=null;return}}else if(t=x1e(t,e,Ku),t!==null){Is=t;return}if(e=e.sibling,e!==null){Is=e;return}Is=e=i}while(e!==null);zs===0&&(zs=5)}function u1(i,e,t){var n=Vr,r=Xc.transition;try{Xc.transition=null,Vr=1,R1e(i,e,t,n)}finally{Xc.transition=r,Vr=n}return null}function R1e(i,e,t,n){do Qw();while(Fv!==null);if(gr&6)throw Error(Lt(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Lt(177));i.callbackNode=null,i.callbackPriority=0;var o=t.lanes|t.childLanes;if(p0e(i,o),i===ra&&(Is=ra=null,Ia=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uR||(uR=!0,$se(B4,function(){return Qw(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Xc.transition,Xc.transition=null;var s=Vr;Vr=1;var a=gr;gr|=4,sK.current=null,k1e(i,t),Ose(t,i),t1e(uV),V4=!!lV,uV=lV=null,i.current=t,T1e(t),s0e(),gr=a,Vr=s,Xc.transition=o}else i.current=t;if(uR&&(uR=!1,Fv=i,nF=r),o=i.pendingLanes,o===0&&(Qv=null),u0e(t.stateNode),Ru(i,as()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(tF)throw tF=!1,i=kV,kV=null,i;return nF&1&&i.tag!==0&&Qw(),o=i.pendingLanes,o&1?i===TV?w2++:(w2=0,TV=i):w2=0,B0(),null}function Qw(){if(Fv!==null){var i=voe(nF),e=Xc.transition,t=Vr;try{if(Xc.transition=null,Vr=16>i?16:i,Fv===null)var n=!1;else{if(i=Fv,Fv=null,nF=0,gr&6)throw Error(Lt(331));var r=gr;for(gr|=4,cn=i.current;cn!==null;){var o=cn,s=o.child;if(cn.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(cn=d;cn!==null;){var h=cn;switch(h.tag){case 0:case 11:case 15:b2(8,h,o)}var f=h.child;if(f!==null)f.return=h,cn=f;else for(;cn!==null;){h=cn;var p=h.sibling,m=h.return;if(Tse(h),h===d){cn=null;break}if(p!==null){p.return=m,cn=p;break}cn=m}}}var v=o.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var L=b.sibling;b.sibling=null,b=L}while(b!==null)}}cn=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,cn=s;else e:for(;cn!==null;){if(o=cn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:b2(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,cn=S;break e}cn=o.return}}var y=i.current;for(cn=y;cn!==null;){s=cn;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,cn=E;else e:for(s=y;cn!==null;){if(a=cn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:P5(9,a)}}catch(N){Qo(a,a.return,N)}if(a===s){cn=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,cn=A;break e}cn=a.return}}if(gr=r,B0(),Xf&&typeof Xf.onPostCommitFiberRoot=="function")try{Xf.onPostCommitFiberRoot(I5,i)}catch{}n=!0}return n}finally{Vr=t,Xc.transition=e}}return!1}function kX(i,e,t){e=Oy(t,e),e=bse(i,e,1),i=Xv(i,e,1),e=_l(),i!==null&&(KO(i,1,e),Ru(i,e))}function Qo(i,e,t){if(i.tag===3)kX(i,i,t);else for(;e!==null;){if(e.tag===3){kX(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qv===null||!Qv.has(n))){i=Oy(t,i),i=Cse(e,i,1),e=Xv(e,i,1),i=_l(),e!==null&&(KO(e,1,i),Ru(e,i));break}}e=e.return}}function P1e(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=_l(),i.pingedLanes|=i.suspendedLanes&t,ra===i&&(Ia&t)===t&&(zs===4||zs===3&&(Ia&130023424)===Ia&&500>as()-lK?j1(i,0):aK|=t),Ru(i,e)}function Vse(i,e){e===0&&(i.mode&1?(e=JM,JM<<=1,!(JM&130023424)&&(JM=4194304)):e=1);var t=_l();i=Ip(i,e),i!==null&&(KO(i,e,t),Ru(i,t))}function F1e(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),Vse(i,t)}function B1e(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Lt(314))}n!==null&&n.delete(e),Vse(i,t)}var Hse;Hse=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Ou.current)ku=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return ku=!1,E1e(i,e,t);ku=!!(i.flags&131072)}else ku=!1,xo&&e.flags&1048576&&Uoe(e,G4,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;PP(i,e),i=e.pendingProps;var r=ky(e,qa.current);Xw(e,t),r=tK(null,e,n,i,r,t);var o=nK();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mu(n)?(o=!0,j4(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Zj(e),r.updater=M5,e.stateNode=r,r._reactInternals=e,vV(e,n,i,t),e=wV(null,e,n,!0,o,t)):(e.tag=0,xo&&o&&zj(e),cl(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(PP(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=V1e(n),i=Ch(n,i),r){case 0:e=CV(null,e,n,i,t);break e;case 1:e=bX(null,e,n,i,t);break e;case 11:e=_X(null,e,n,i,t);break e;case 14:e=vX(null,e,n,Ch(n.type,i),t);break e}throw Error(Lt(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ch(n,r),CV(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ch(n,r),bX(i,e,n,r,t);case 3:e:{if(Lse(e),i===null)throw Error(Lt(387));n=e.pendingProps,o=e.memoizedState,r=o.element,qoe(i,e),Z4(e,n,null,t);var s=e.memoizedState;if(n=s.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Oy(Error(Lt(423)),e),e=CX(i,e,n,t,r);break e}else if(n!==r){r=Oy(Error(Lt(424)),e),e=CX(i,e,n,t,r);break e}else for(Qu=Zv(e.stateNode.containerInfo.firstChild),ic=e,xo=!0,Th=null,t=Qoe(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ty(),n===r){e=kp(i,e,t);break e}cl(i,e,n,t)}e=e.child}return e;case 5:return Joe(e),i===null&&pV(e),n=e.type,r=e.pendingProps,o=i!==null?i.memoizedProps:null,s=r.children,cV(n,r)?s=null:o!==null&&cV(n,o)&&(e.flags|=32),Sse(i,e),cl(i,e,s,t),e.child;case 6:return i===null&&pV(e),null;case 13:return Ese(i,e,t);case 4:return Xj(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Ny(e,null,n,t):cl(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ch(n,r),_X(i,e,n,r,t);case 7:return cl(i,e,e.pendingProps,t),e.child;case 8:return cl(i,e,e.pendingProps.children,t),e.child;case 12:return cl(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,o=e.memoizedProps,s=r.value,co(q4,n._currentValue),n._currentValue=s,o!==null)if(ef(o.value,s)){if(o.children===r.children&&!Ou.current){e=kp(i,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=gp(-1,t&-t),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}o.lanes|=t,u=o.alternate,u!==null&&(u.lanes|=t),mV(o.return,t,e),a.lanes|=t;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Lt(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),mV(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}cl(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Xw(e,t),r=nd(r),n=n(r),e.flags|=1,cl(i,e,n,t),e.child;case 14:return n=e.type,r=Ch(n,e.pendingProps),r=Ch(n.type,r),vX(i,e,n,r,t);case 15:return wse(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ch(n,r),PP(i,e),e.tag=1,Mu(n)?(i=!0,j4(e)):i=!1,Xw(e,t),Zoe(e,n,r),vV(e,n,r,t),wV(null,e,n,!0,i,t);case 19:return xse(i,e,t);case 22:return yse(i,e,t)}throw Error(Lt(156,e.tag))};function $se(i,e){return goe(i,e)}function W1e(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gc(i,e,t,n){return new W1e(i,e,t,n)}function hK(i){return i=i.prototype,!(!i||!i.isReactComponent)}function V1e(i){if(typeof i=="function")return hK(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Nj)return 11;if(i===Aj)return 14}return 2}function e0(i,e){var t=i.alternate;return t===null?(t=Gc(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function WP(i,e,t,n,r,o){var s=2;if(n=i,typeof i=="function")hK(i)&&(s=1);else if(typeof i=="string")s=5;else e:switch(i){case bw:return K1(t.children,r,o,e);case Tj:s=8,r|=8;break;case $W:return i=Gc(12,t,e,r|2),i.elementType=$W,i.lanes=o,i;case zW:return i=Gc(13,t,e,r),i.elementType=zW,i.lanes=o,i;case UW:return i=Gc(19,t,e,r),i.elementType=UW,i.lanes=o,i;case Xre:return B5(t,r,o,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Yre:s=10;break e;case Zre:s=9;break e;case Nj:s=11;break e;case Aj:s=14;break e;case xv:s=16,n=null;break e}throw Error(Lt(130,i==null?i:typeof i,""))}return e=Gc(s,t,e,r),e.elementType=i,e.type=n,e.lanes=o,e}function K1(i,e,t,n){return i=Gc(7,i,n,e),i.lanes=t,i}function B5(i,e,t,n){return i=Gc(22,i,n,e),i.elementType=Xre,i.lanes=t,i.stateNode={isHidden:!1},i}function Y7(i,e,t){return i=Gc(6,i,null,e),i.lanes=t,i}function Z7(i,e,t){return e=Gc(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function H1e(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T7(0),this.expirationTimes=T7(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T7(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fK(i,e,t,n,r,o,s,a,u){return i=new H1e(i,e,t,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Gc(3,null,null,e),i.current=o,o.stateNode=i,o.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zj(o),i}function $1e(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vw,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function zse(i){if(!i)return f0;i=i._reactInternals;e:{if(hC(i)!==i||i.tag!==1)throw Error(Lt(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mu(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Lt(171))}if(i.tag===1){var t=i.type;if(Mu(t))return $oe(i,t,e)}return e}function Use(i,e,t,n,r,o,s,a,u){return i=fK(t,n,!0,i,r,o,s,a,u),i.context=zse(null),t=i.current,n=_l(),r=Jv(t),o=gp(n,r),o.callback=e??null,Xv(t,o,r),i.current.lanes=r,KO(i,r,n),Ru(i,n),i}function W5(i,e,t,n){var r=e.current,o=_l(),s=Jv(r);return t=zse(t),e.context===null?e.context=t:e.pendingContext=t,e=gp(o,s),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Xv(r,e,s),i!==null&&(Uh(i,r,s,o),OP(i,r,s)),s}function rF(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function TX(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function gK(i,e){TX(i,e),(i=i.alternate)&&TX(i,e)}function z1e(){return null}var jse=typeof reportError=="function"?reportError:function(i){console.error(i)};function pK(i){this._internalRoot=i}V5.prototype.render=pK.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Lt(409));W5(i,e,null,null)};V5.prototype.unmount=pK.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;mb(function(){W5(null,i,null,null)}),e[Dp]=null}};function V5(i){this._internalRoot=i}V5.prototype.unstable_scheduleHydration=function(i){if(i){var e=woe();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Nv.length&&e!==0&&e<Nv[t].priority;t++);Nv.splice(t,0,i),t===0&&Soe(i)}};function mK(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function H5(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function NX(){}function U1e(i,e,t,n,r){if(r){if(typeof n=="function"){var o=n;n=function(){var d=rF(s);o.call(d)}}var s=Use(e,n,i,0,null,!1,!1,"",NX);return i._reactRootContainer=s,i[Dp]=s.current,sA(i.nodeType===8?i.parentNode:i),mb(),s}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var d=rF(u);a.call(d)}}var u=fK(i,0,!1,null,null,!1,!1,"",NX);return i._reactRootContainer=u,i[Dp]=u.current,sA(i.nodeType===8?i.parentNode:i),mb(function(){W5(e,u,t,n)}),u}function $5(i,e,t,n,r){var o=t._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var a=r;r=function(){var u=rF(s);a.call(u)}}W5(e,s,i,r)}else s=U1e(t,e,i,r,n);return rF(s)}boe=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=jN(e.pendingLanes);t!==0&&(Rj(e,t|1),Ru(e,as()),!(gr&6)&&(My=as()+500,B0()))}break;case 13:mb(function(){var n=Ip(i,1);if(n!==null){var r=_l();Uh(n,i,1,r)}}),gK(i,1)}};Pj=function(i){if(i.tag===13){var e=Ip(i,134217728);if(e!==null){var t=_l();Uh(e,i,134217728,t)}gK(i,134217728)}};Coe=function(i){if(i.tag===13){var e=Jv(i),t=Ip(i,e);if(t!==null){var n=_l();Uh(t,i,e,n)}gK(i,e)}};woe=function(){return Vr};yoe=function(i,e){var t=Vr;try{return Vr=i,e()}finally{Vr=t}};eV=function(i,e,t){switch(e){case"input":if(GW(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=A5(n);if(!r)throw Error(Lt(90));Jre(n),GW(n,r)}}}break;case"textarea":toe(i,t);break;case"select":e=t.value,e!=null&&Gw(i,!!t.multiple,e,!1)}};loe=uK;uoe=mb;var j1e={usingClientEntryPoint:!1,Events:[qO,Sw,A5,soe,aoe,uK]},wN={findFiberByHostInstance:N1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},K1e={bundleType:wN.bundleType,version:wN.version,rendererPackageName:wN.rendererPackageName,rendererConfig:wN.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hp.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=hoe(i),i===null?null:i.stateNode},findFiberByHostInstance:wN.findFiberByHostInstance||z1e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cR.isDisabled&&cR.supportsFiber)try{I5=cR.inject(K1e),Xf=cR}catch{}}_c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j1e;_c.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mK(e))throw Error(Lt(200));return $1e(i,e,null,t)};_c.createRoot=function(i,e){if(!mK(i))throw Error(Lt(299));var t=!1,n="",r=jse;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=fK(i,1,!1,null,null,t,!1,n,r),i[Dp]=e.current,sA(i.nodeType===8?i.parentNode:i),new pK(e)};_c.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Lt(188)):(i=Object.keys(i).join(","),Error(Lt(268,i)));return i=hoe(e),i=i===null?null:i.stateNode,i};_c.flushSync=function(i){return mb(i)};_c.hydrate=function(i,e,t){if(!H5(e))throw Error(Lt(200));return $5(null,i,e,!0,t)};_c.hydrateRoot=function(i,e,t){if(!mK(i))throw Error(Lt(405));var n=t!=null&&t.hydratedSources||null,r=!1,o="",s=jse;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=Use(e,null,i,1,t??null,r,!1,o,s),i[Dp]=e.current,sA(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new V5(e)};_c.render=function(i,e,t){if(!H5(e))throw Error(Lt(200));return $5(null,i,e,!1,t)};_c.unmountComponentAtNode=function(i){if(!H5(i))throw Error(Lt(40));return i._reactRootContainer?(mb(function(){$5(null,null,i,!1,function(){i._reactRootContainer=null,i[Dp]=null})}),!0):!1};_c.unstable_batchedUpdates=uK;_c.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!H5(t))throw Error(Lt(200));if(i==null||i._reactInternals===void 0)throw Error(Lt(38));return $5(i,e,t,!1,n)};_c.version="18.2.0-next-9e3b772b8-20220608";function Kse(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kse)}catch(i){console.error(i)}}Kse(),Ure.exports=_c;var z5=Ure.exports;const Ry=Vp(z5),G1e=Ore({__proto__:null,default:Ry},[z5]);var AX=z5;VW.createRoot=AX.createRoot,VW.hydrateRoot=AX.hydrateRoot;/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var OX;(function(i){(function(e){var t=typeof ea=="object"?ea:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=r(i);typeof t.Reflect>"u"?t.Reflect=i:n=r(t.Reflect,n),e(n);function r(o,s){return function(a,u){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:u}),s&&s(a,u)}}})(function(e){var t=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",r=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,u=!s&&!a,d={create:s?function(){return mi(Object.create(null))}:a?function(){return mi({__proto__:null})}:function(){return mi({})},has:u?function(Te,Fe){return t.call(Te,Fe)}:function(Te,Fe){return Fe in Te},get:u?function(Te,Fe){return t.call(Te,Fe)?Te[Fe]:void 0}:function(Te,Fe){return Te[Fe]}},h=Object.getPrototypeOf(Function),f=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",p=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Mn(),m=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Pt(),v=!f&&typeof WeakMap=="function"?WeakMap:pn(),b=new v;function L(Te,Fe,pt,at){if(Y(pt)){if(!st(Te))throw new TypeError;if(!tt(Fe))throw new TypeError;return X(Te,Fe)}else{if(!st(Te))throw new TypeError;if(!we(Fe))throw new TypeError;if(!we(at)&&!Y(at)&&!fe(at))throw new TypeError;return fe(at)&&(at=void 0),pt=Me(pt),$(Te,Fe,pt,at)}}e("decorate",L);function S(Te,Fe){function pt(at,Ct){if(!we(at))throw new TypeError;if(!Y(Ct)&&!tn(Ct))throw new TypeError;G(Te,Fe,at,Ct)}return pt}e("metadata",S);function y(Te,Fe,pt,at){if(!we(pt))throw new TypeError;return Y(at)||(at=Me(at)),G(Te,Fe,pt,at)}e("defineMetadata",y);function E(Te,Fe,pt){if(!we(Fe))throw new TypeError;return Y(pt)||(pt=Me(pt)),T(Te,Fe,pt)}e("hasMetadata",E);function A(Te,Fe,pt){if(!we(Fe))throw new TypeError;return Y(pt)||(pt=Me(pt)),F(Te,Fe,pt)}e("hasOwnMetadata",A);function N(Te,Fe,pt){if(!we(Fe))throw new TypeError;return Y(pt)||(pt=Me(pt)),B(Te,Fe,pt)}e("getMetadata",N);function V(Te,Fe,pt){if(!we(Fe))throw new TypeError;return Y(pt)||(pt=Me(pt)),U(Te,Fe,pt)}e("getOwnMetadata",V);function R(Te,Fe){if(!we(Te))throw new TypeError;return Y(Fe)||(Fe=Me(Fe)),Z(Te,Fe)}e("getMetadataKeys",R);function M(Te,Fe){if(!we(Te))throw new TypeError;return Y(Fe)||(Fe=Me(Fe)),z(Te,Fe)}e("getOwnMetadataKeys",M);function K(Te,Fe,pt){if(!we(Fe))throw new TypeError;Y(pt)||(pt=Me(pt));var at=D(Fe,pt,!1);if(Y(at)||!at.delete(Te))return!1;if(at.size>0)return!0;var Ct=b.get(Fe);return Ct.delete(pt),Ct.size>0||b.delete(Fe),!0}e("deleteMetadata",K);function X(Te,Fe){for(var pt=Te.length-1;pt>=0;--pt){var at=Te[pt],Ct=at(Fe);if(!Y(Ct)&&!fe(Ct)){if(!tt(Ct))throw new TypeError;Fe=Ct}}return Fe}function $(Te,Fe,pt,at){for(var Ct=Te.length-1;Ct>=0;--Ct){var wi=Te[Ct],Vt=wi(Fe,pt,at);if(!Y(Vt)&&!fe(Vt)){if(!we(Vt))throw new TypeError;at=Vt}}return at}function D(Te,Fe,pt){var at=b.get(Te);if(Y(at)){if(!pt)return;at=new p,b.set(Te,at)}var Ct=at.get(Fe);if(Y(Ct)){if(!pt)return;Ct=new p,at.set(Fe,Ct)}return Ct}function T(Te,Fe,pt){var at=F(Te,Fe,pt);if(at)return!0;var Ct=Ln(Fe);return fe(Ct)?!1:T(Te,Ct,pt)}function F(Te,Fe,pt){var at=D(Fe,pt,!1);return Y(at)?!1:dt(at.has(Te))}function B(Te,Fe,pt){var at=F(Te,Fe,pt);if(at)return U(Te,Fe,pt);var Ct=Ln(Fe);if(!fe(Ct))return B(Te,Ct,pt)}function U(Te,Fe,pt){var at=D(Fe,pt,!1);if(!Y(at))return at.get(Te)}function G(Te,Fe,pt,at){var Ct=D(pt,at,!0);Ct.set(Te,Fe)}function Z(Te,Fe){var pt=z(Te,Fe),at=Ln(Te);if(at===null)return pt;var Ct=Z(at,Fe);if(Ct.length<=0)return pt;if(pt.length<=0)return Ct;for(var wi=new m,Vt=[],kt=0,Kt=pt;kt<Kt.length;kt++){var Gt=Kt[kt],Bt=wi.has(Gt);Bt||(wi.add(Gt),Vt.push(Gt))}for(var fr=0,ti=Ct;fr<ti.length;fr++){var Gt=ti[fr],Bt=wi.has(Gt);Bt||(wi.add(Gt),Vt.push(Gt))}return Vt}function z(Te,Fe){var pt=[],at=D(Te,Fe,!1);if(Y(at))return pt;for(var Ct=at.keys(),wi=nn(Ct),Vt=0;;){var kt=Tn(wi);if(!kt)return pt.length=Vt,pt;var Kt=On(kt);try{pt[Vt]=Kt}catch(Gt){try{ei(wi)}finally{throw Gt}}Vt++}}function O(Te){if(Te===null)return 1;switch(typeof Te){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Te===null?1:6;default:return 6}}function Y(Te){return Te===void 0}function fe(Te){return Te===null}function ne(Te){return typeof Te=="symbol"}function we(Te){return typeof Te=="object"?Te!==null:typeof Te=="function"}function Ie(Te,Fe){switch(O(Te)){case 0:return Te;case 1:return Te;case 2:return Te;case 3:return Te;case 4:return Te;case 5:return Te}var pt=Fe===3?"string":Fe===5?"number":"default",at=Zt(Te,r);if(at!==void 0){var Ct=at.call(Te,pt);if(we(Ct))throw new TypeError;return Ct}return je(Te,pt==="default"?"number":pt)}function je(Te,Fe){if(Fe==="string"){var pt=Te.toString;if(bt(pt)){var at=pt.call(Te);if(!we(at))return at}var Ct=Te.valueOf;if(bt(Ct)){var at=Ct.call(Te);if(!we(at))return at}}else{var Ct=Te.valueOf;if(bt(Ct)){var at=Ct.call(Te);if(!we(at))return at}var wi=Te.toString;if(bt(wi)){var at=wi.call(Te);if(!we(at))return at}}throw new TypeError}function dt(Te){return!!Te}function At(Te){return""+Te}function Me(Te){var Fe=Ie(Te,3);return ne(Fe)?Fe:At(Fe)}function st(Te){return Array.isArray?Array.isArray(Te):Te instanceof Object?Te instanceof Array:Object.prototype.toString.call(Te)==="[object Array]"}function bt(Te){return typeof Te=="function"}function tt(Te){return typeof Te=="function"}function tn(Te){switch(O(Te)){case 3:return!0;case 4:return!0;default:return!1}}function Zt(Te,Fe){var pt=Te[Fe];if(pt!=null){if(!bt(pt))throw new TypeError;return pt}}function nn(Te){var Fe=Zt(Te,o);if(!bt(Fe))throw new TypeError;var pt=Fe.call(Te);if(!we(pt))throw new TypeError;return pt}function On(Te){return Te.value}function Tn(Te){var Fe=Te.next();return Fe.done?!1:Fe}function ei(Te){var Fe=Te.return;Fe&&Fe.call(Te)}function Ln(Te){var Fe=Object.getPrototypeOf(Te);if(typeof Te!="function"||Te===h||Fe!==h)return Fe;var pt=Te.prototype,at=pt&&Object.getPrototypeOf(pt);if(at==null||at===Object.prototype)return Fe;var Ct=at.constructor;return typeof Ct!="function"||Ct===Te?Fe:Ct}function Mn(){var Te={},Fe=[],pt=function(){function Vt(kt,Kt,Gt){this._index=0,this._keys=kt,this._values=Kt,this._selector=Gt}return Vt.prototype["@@iterator"]=function(){return this},Vt.prototype[o]=function(){return this},Vt.prototype.next=function(){var kt=this._index;if(kt>=0&&kt<this._keys.length){var Kt=this._selector(this._keys[kt],this._values[kt]);return kt+1>=this._keys.length?(this._index=-1,this._keys=Fe,this._values=Fe):this._index++,{value:Kt,done:!1}}return{value:void 0,done:!0}},Vt.prototype.throw=function(kt){throw this._index>=0&&(this._index=-1,this._keys=Fe,this._values=Fe),kt},Vt.prototype.return=function(kt){return this._index>=0&&(this._index=-1,this._keys=Fe,this._values=Fe),{value:kt,done:!0}},Vt}();return function(){function Vt(){this._keys=[],this._values=[],this._cacheKey=Te,this._cacheIndex=-2}return Object.defineProperty(Vt.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Vt.prototype.has=function(kt){return this._find(kt,!1)>=0},Vt.prototype.get=function(kt){var Kt=this._find(kt,!1);return Kt>=0?this._values[Kt]:void 0},Vt.prototype.set=function(kt,Kt){var Gt=this._find(kt,!0);return this._values[Gt]=Kt,this},Vt.prototype.delete=function(kt){var Kt=this._find(kt,!1);if(Kt>=0){for(var Gt=this._keys.length,Bt=Kt+1;Bt<Gt;Bt++)this._keys[Bt-1]=this._keys[Bt],this._values[Bt-1]=this._values[Bt];return this._keys.length--,this._values.length--,kt===this._cacheKey&&(this._cacheKey=Te,this._cacheIndex=-2),!0}return!1},Vt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Te,this._cacheIndex=-2},Vt.prototype.keys=function(){return new pt(this._keys,this._values,at)},Vt.prototype.values=function(){return new pt(this._keys,this._values,Ct)},Vt.prototype.entries=function(){return new pt(this._keys,this._values,wi)},Vt.prototype["@@iterator"]=function(){return this.entries()},Vt.prototype[o]=function(){return this.entries()},Vt.prototype._find=function(kt,Kt){return this._cacheKey!==kt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=kt)),this._cacheIndex<0&&Kt&&(this._cacheIndex=this._keys.length,this._keys.push(kt),this._values.push(void 0)),this._cacheIndex},Vt}();function at(Vt,kt){return Vt}function Ct(Vt,kt){return kt}function wi(Vt,kt){return[Vt,kt]}}function Pt(){return function(){function Te(){this._map=new p}return Object.defineProperty(Te.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Te.prototype.has=function(Fe){return this._map.has(Fe)},Te.prototype.add=function(Fe){return this._map.set(Fe,Fe),this},Te.prototype.delete=function(Fe){return this._map.delete(Fe)},Te.prototype.clear=function(){this._map.clear()},Te.prototype.keys=function(){return this._map.keys()},Te.prototype.values=function(){return this._map.values()},Te.prototype.entries=function(){return this._map.entries()},Te.prototype["@@iterator"]=function(){return this.keys()},Te.prototype[o]=function(){return this.keys()},Te}()}function pn(){var Te=16,Fe=d.create(),pt=at();return function(){function Kt(){this._key=at()}return Kt.prototype.has=function(Gt){var Bt=Ct(Gt,!1);return Bt!==void 0?d.has(Bt,this._key):!1},Kt.prototype.get=function(Gt){var Bt=Ct(Gt,!1);return Bt!==void 0?d.get(Bt,this._key):void 0},Kt.prototype.set=function(Gt,Bt){var fr=Ct(Gt,!0);return fr[this._key]=Bt,this},Kt.prototype.delete=function(Gt){var Bt=Ct(Gt,!1);return Bt!==void 0?delete Bt[this._key]:!1},Kt.prototype.clear=function(){this._key=at()},Kt}();function at(){var Kt;do Kt="@@WeakMap@@"+kt();while(d.has(Fe,Kt));return Fe[Kt]=!0,Kt}function Ct(Kt,Gt){if(!t.call(Kt,pt)){if(!Gt)return;Object.defineProperty(Kt,pt,{value:d.create()})}return Kt[pt]}function wi(Kt,Gt){for(var Bt=0;Bt<Gt;++Bt)Kt[Bt]=Math.random()*255|0;return Kt}function Vt(Kt){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Kt)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Kt)):wi(new Uint8Array(Kt),Kt):wi(new Array(Kt),Kt)}function kt(){var Kt=Vt(Te);Kt[6]=Kt[6]&79|64,Kt[8]=Kt[8]&191|128;for(var Gt="",Bt=0;Bt<Te;++Bt){var fr=Kt[Bt];(Bt===4||Bt===6||Bt===8)&&(Gt+="-"),fr<16&&(Gt+="0"),Gt+=fr.toString(16).toLowerCase()}return Gt}}function mi(Te){return Te.__=void 0,delete Te.__,Te}})})(OX||(OX={}));var OV;(function(i){i[i.Transient=0]="Transient",i[i.Singleton=1]="Singleton",i[i.ResolutionScoped=2]="ResolutionScoped",i[i.ContainerScoped=3]="ContainerScoped"})(OV||(OV={}));const bu=OV;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var MV=function(i,e){return MV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])},MV(i,e)};function _K(i,e){MV(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function dR(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oF(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o}function _1(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(oF(arguments[e]));return i}var q1e="injectionTokens";function Y1e(i){var e=Reflect.getMetadata("design:paramtypes",i)||[],t=Reflect.getOwnMetadata(q1e,i)||{};return Object.keys(t).forEach(function(n){e[+n]=t[n]}),e}function Gse(i){return!!i.useClass}function RV(i){return!!i.useFactory}var qse=function(){function i(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return i.prototype.createProxy=function(e){var t=this,n={},r=!1,o,s=function(){return r||(o=e(t.wrap()),r=!0),o};return new Proxy(n,this.createHandler(s))},i.prototype.createHandler=function(e){var t={},n=function(r){t[r]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];o[0]=e();var a=Reflect[r];return a.apply(void 0,_1(o))}};return this.reflectMethods.forEach(n),t},i}();function HC(i){return typeof i=="string"||typeof i=="symbol"}function Z1e(i){return typeof i=="object"&&"token"in i&&"multiple"in i}function MX(i){return typeof i=="object"&&"token"in i&&"transform"in i}function X1e(i){return typeof i=="function"||i instanceof qse}function VP(i){return!!i.useToken}function HP(i){return i.useValue!=null}function Q1e(i){return Gse(i)||HP(i)||VP(i)||RV(i)}var vK=function(){function i(){this._registryMap=new Map}return i.prototype.entries=function(){return this._registryMap.entries()},i.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},i.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},i.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},i.prototype.setAll=function(e,t){this._registryMap.set(e,t)},i.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},i.prototype.clear=function(){this._registryMap.clear()},i.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},i}(),J1e=function(i){_K(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(vK),RX=function(){function i(){this.scopedResolutions=new Map}return i}();function ebe(i,e){if(i===null)return"at position #"+e;var t=i.split(",")[e].trim();return'"'+t+'" at position #'+e}function tbe(i,e,t){return t===void 0&&(t="    "),_1([i],e.message.split(`
`).map(function(n){return t+n})).join(`
`)}function nbe(i,e,t){var n=oF(i.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=n[1],o=r===void 0?null:r,s=ebe(o,e);return tbe("Cannot inject the dependency "+s+' of "'+i.name+'" constructor. Reason:',t)}var ibe=function(i){_K(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(vK),rbe=function(i){_K(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e}(vK),obe=function(){function i(){this.preResolution=new ibe,this.postResolution=new rbe}return i}(),Yse=new Map,sbe=function(){function i(e){this.parent=e,this._registry=new J1e,this.interceptors=new obe}return i.prototype.register=function(e,t,n){n===void 0&&(n={lifecycle:bu.Transient});var r;if(Q1e(t)?r=t:r={useClass:t},VP(r))for(var o=[e],s=r;s!=null;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+_1(o,[a]).join(" -> "));o.push(a);var u=this._registry.get(a);u&&VP(u.provider)?s=u.provider:s=null}if((n.lifecycle===bu.Singleton||n.lifecycle==bu.ContainerScoped||n.lifecycle==bu.ResolutionScoped)&&(HP(r)||RV(r)))throw new Error('Cannot use lifecycle "'+bu[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:n}),this},i.prototype.registerType=function(e,t){return HC(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},i.prototype.registerInstance=function(e,t){return this.register(e,{useValue:t})},i.prototype.registerSingleton=function(e,t){if(HC(e)){if(HC(t))return this.register(e,{useToken:t},{lifecycle:bu.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:bu.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!HC(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:bu.Singleton})},i.prototype.resolve=function(e,t){t===void 0&&(t=new RX);var n=this.getRegistration(e);if(!n&&HC(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(X1e(e)){var r=this.construct(e,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},i.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var s=dR(this.interceptors.preResolution.getAll(e)),a=s.next();!a.done;a=s.next()){var u=a.value;u.options.frequency!="Once"&&o.push(u),u.callback(e,t)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},i.prototype.executePostResolutionInterceptor=function(e,t,n){var r,o;if(this.interceptors.postResolution.has(e)){var s=[];try{for(var a=dR(this.interceptors.postResolution.getAll(e)),u=a.next();!u.done;u=a.next()){var d=u.value;d.options.frequency!="Once"&&s.push(d),d.callback(e,t,n)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,s)}},i.prototype.resolveRegistration=function(e,t){if(e.options.lifecycle===bu.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n=e.options.lifecycle===bu.Singleton,r=e.options.lifecycle===bu.ContainerScoped,o=n||r,s;return HP(e.provider)?s=e.provider.useValue:VP(e.provider)?s=o?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Gse(e.provider)?s=o?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):RV(e.provider)?s=e.provider.useFactory(this):s=this.construct(e.provider,t),e.options.lifecycle===bu.ResolutionScoped&&t.scopedResolutions.set(e,s),s},i.prototype.resolveAll=function(e,t){var n=this;t===void 0&&(t=new RX);var r=this.getAllRegistrations(e);if(!r&&HC(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var o=r.map(function(a){return n.resolveRegistration(a,t)});return this.executePostResolutionInterceptor(e,o,"All"),o}var s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s},i.prototype.isRegistered=function(e,t){return t===void 0&&(t=!1),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},i.prototype.reset=function(){this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},i.prototype.clearInstances=function(){var e,t;try{for(var n=dR(this._registry.entries()),r=n.next();!r.done;r=n.next()){var o=oF(r.value,2),s=o[0],a=o[1];this._registry.setAll(s,a.filter(function(u){return!HP(u.provider)}).map(function(u){return u.instance=void 0,u}))}}catch(u){e={error:u}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},i.prototype.createChildContainer=function(){var e,t,n=new i(this);try{for(var r=dR(this._registry.entries()),o=r.next();!o.done;o=r.next()){var s=oF(o.value,2),a=s[0],u=s[1];u.some(function(d){var h=d.options;return h.lifecycle===bu.ContainerScoped})&&n._registry.setAll(a,u.map(function(d){return d.options.lifecycle===bu.ContainerScoped?{provider:d.provider,options:d.options}:d}))}}catch(d){e={error:d}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},i.prototype.beforeResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},i.prototype.afterResolution=function(e,t,n){n===void 0&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},i.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},i.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},i.prototype.construct=function(e,t){var n=this;if(e instanceof qse)return e.createProxy(function(s){return n.resolve(s,t)});var r=Yse.get(e);if(!r||r.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(this.resolveParams(t,e));return new(e.bind.apply(e,_1([void 0],o)))},i.prototype.resolveParams=function(e,t){var n=this;return function(r,o){var s,a,u;try{return Z1e(r)?MX(r)?r.multiple?(s=n.resolve(r.transform)).transform.apply(s,_1([n.resolveAll(r.token)],r.transformArgs)):(a=n.resolve(r.transform)).transform.apply(a,_1([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):MX(r)?(u=n.resolve(r.transform,e)).transform.apply(u,_1([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(d){throw new Error(nbe(t,o,d))}}},i}(),Ue=new sbe;function abe(){return function(i){Yse.set(i,Y1e(i))}}function ji(){return function(i){abe()(i),Ue.registerSingleton(i)}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);class U5{constructor(){this._events=new Map}count(e){return(this._events.get(e)||[]).length}emit(e,...t){const n=this._events.get(e);if(n&&n.length>0){let r=!0;for(let o=n.length-1;o>=0;o--)r&&n[o].call({stopDelivery:()=>r=!1},...t)}}subscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.assignEvent(n,t)}):this.assignEvent(e,t)}unsubscribe(e,t){Array.isArray(e)?e.forEach(n=>{this.deleteEvent(n,t)}):this.deleteEvent(e,t)}deleteEvent(e,t){if(t){const n=this._events.get(e);n&&n.splice(n.indexOf(t),1)}else this._events.delete(e)}assignEvent(e,t){const n=this._events.get(e);n?n.push(t):this._events.set(e,[t])}}const M1=new U5;class TS{subscribe(e,t){M1.subscribe(e,t)}emit(e,...t){M1.emit(e,...t)}count(e){return M1.count(e)}unsubscribe(e,t){M1.unsubscribe(e,t)}}function lbe(i){return function(e,t,n){const r=n.value;return typeof r=="function"&&(n.value=function(...o){try{const s=r.apply(this,o);return M1.emit(i,o),s}catch(s){throw s}}),n}}function ube(i){return function(e,t,n){const r=n.value;return typeof r=="function"&&M1.subscribe(i,r),n}}const cbe=Object.freeze(Object.defineProperty({__proto__:null,EventBus:M1,EventEmitter:U5,GlobalEvent:TS,emit:lbe,subscribe:ube},Symbol.toStringTag,{value:"Module"}));var sF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */sF.exports;(function(i,e){(function(){var t,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,L=1,S=2,y=4,E=8,A=16,N=32,V=64,R=128,M=256,K=512,X=30,$="...",D=800,T=16,F=1,B=2,U=3,G=1/0,Z=9007199254740991,z=17976931348623157e292,O=0/0,Y=4294967295,fe=Y-1,ne=Y>>>1,we=[["ary",R],["bind",L],["bindKey",S],["curry",E],["curryRight",A],["flip",K],["partial",N],["partialRight",V],["rearg",M]],Ie="[object Arguments]",je="[object Array]",dt="[object AsyncFunction]",At="[object Boolean]",Me="[object Date]",st="[object DOMException]",bt="[object Error]",tt="[object Function]",tn="[object GeneratorFunction]",Zt="[object Map]",nn="[object Number]",On="[object Null]",Tn="[object Object]",ei="[object Promise]",Ln="[object Proxy]",Mn="[object RegExp]",Pt="[object Set]",pn="[object String]",mi="[object Symbol]",Te="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",Ct="[object DataView]",wi="[object Float32Array]",Vt="[object Float64Array]",kt="[object Int8Array]",Kt="[object Int16Array]",Gt="[object Int32Array]",Bt="[object Uint8Array]",fr="[object Uint8ClampedArray]",ti="[object Uint16Array]",Ve="[object Uint32Array]",Pa=/\b__p \+= '';/g,$n=/\b(__p \+=) '' \+/g,ni=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,ir=RegExp(Gs.source),ol=RegExp(vn.source),Ki=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,is=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(se.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,k=/\\(\\)?/g,W=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,De=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,Tt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",zn=Ot+wt+si,rr="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Fa="\\xac\\xb1\\xd7\\xf7",sl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Og="\\u2000-\\u206f",fL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jp="A-Z\\xc0-\\xd6\\xd8-\\xde",Kp="\\ufe0e\\ufe0f",Gp=Fa+sl+Og+fL,sd="['’]",gL="["+Ft+"]",qp="["+Gp+"]",Ol="["+zn+"]",Yp="\\d+",pL="["+rr+"]",Zp="["+$i+"]",Xp="[^"+Ft+Gp+Yp+rr+$i+jp+"]",ad="\\ud83c[\\udffb-\\udfff]",mL="(?:"+Ol+"|"+ad+")",Qp="[^"+Ft+"]",ld="(?:\\ud83c[\\udde6-\\uddff]){2}",ud="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+jp+"]",Jp="\\u200d",em="(?:"+Zp+"|"+Xp+")",_L="(?:"+hs+"|"+Xp+")",tm="(?:"+sd+"(?:d|ll|m|re|s|t|ve))?",nm="(?:"+sd+"(?:D|LL|M|RE|S|T|VE))?",im=mL+"?",rm="["+Kp+"]?",vL="(?:"+Jp+"(?:"+[Qp,ld,ud].join("|")+")"+rm+im+")*",bL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",om=rm+im+vL,wL="(?:"+[pL,ld,ud].join("|")+")"+om,yL="(?:"+[Qp+Ol+"?",Ol,ld,ud,gL].join("|")+")",SL=RegExp(sd,"g"),LL=RegExp(Ol,"g"),cd=RegExp(ad+"(?="+ad+")|"+yL+om,"g"),EL=RegExp([hs+"?"+Zp+"+"+tm+"(?="+[qp,hs,"$"].join("|")+")",_L+"+"+nm+"(?="+[qp,hs+em,"$"].join("|")+")",hs+"?"+em+"+"+tm,hs+"+"+nm,CL,bL,Yp,wL].join("|"),"g"),xL=RegExp("["+Jp+Ft+zn+Kp+"]"),DL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,IL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kL=-1,jt={};jt[wi]=jt[Vt]=jt[kt]=jt[Kt]=jt[Gt]=jt[Bt]=jt[fr]=jt[ti]=jt[Ve]=!0,jt[Ie]=jt[je]=jt[at]=jt[At]=jt[Ct]=jt[Me]=jt[bt]=jt[tt]=jt[Zt]=jt[nn]=jt[Tn]=jt[Mn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[Ie]=$t[je]=$t[at]=$t[Ct]=$t[At]=$t[Me]=$t[wi]=$t[Vt]=$t[kt]=$t[Kt]=$t[Gt]=$t[Zt]=$t[nn]=$t[Tn]=$t[Mn]=$t[Pt]=$t[pn]=$t[mi]=$t[Bt]=$t[fr]=$t[ti]=$t[Ve]=!0,$t[bt]=$t[tt]=$t[Fe]=!1;var TL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},NL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OL={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ML=parseFloat,RL=parseInt,sm=typeof ea=="object"&&ea&&ea.Object===Object&&ea,PL=typeof self=="object"&&self&&self.Object===Object&&self,xn=sm||PL||Function("return this")(),dd=e&&!e.nodeType&&e,To=dd&&!0&&i&&!i.nodeType&&i,am=To&&To.exports===dd,hd=am&&sm.process,Ai=function(){try{var j=To&&To.require&&To.require("util").types;return j||hd&&hd.binding&&hd.binding("util")}catch{}}(),lm=Ai&&Ai.isArrayBuffer,um=Ai&&Ai.isDate,cm=Ai&&Ai.isMap,dm=Ai&&Ai.isRegExp,hm=Ai&&Ai.isSet,fm=Ai&&Ai.isTypedArray;function yi(j,oe,ee){switch(ee.length){case 0:return j.call(oe);case 1:return j.call(oe,ee[0]);case 2:return j.call(oe,ee[0],ee[1]);case 3:return j.call(oe,ee[0],ee[1],ee[2])}return j.apply(oe,ee)}function FL(j,oe,ee,xe){for(var Xe=-1,St=j==null?0:j.length;++Xe<St;){var bn=j[Xe];oe(xe,bn,ee(bn),j)}return xe}function Oi(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe&&oe(j[ee],ee,j)!==!1;);return j}function BL(j,oe){for(var ee=j==null?0:j.length;ee--&&oe(j[ee],ee,j)!==!1;);return j}function gm(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe;)if(!oe(j[ee],ee,j))return!1;return!0}function Qr(j,oe){for(var ee=-1,xe=j==null?0:j.length,Xe=0,St=[];++ee<xe;){var bn=j[ee];oe(bn,ee,j)&&(St[Xe++]=bn)}return St}function Ml(j,oe){var ee=j==null?0:j.length;return!!ee&&fs(j,oe,0)>-1}function fd(j,oe,ee){for(var xe=-1,Xe=j==null?0:j.length;++xe<Xe;)if(ee(oe,j[xe]))return!0;return!1}function Jt(j,oe){for(var ee=-1,xe=j==null?0:j.length,Xe=Array(xe);++ee<xe;)Xe[ee]=oe(j[ee],ee,j);return Xe}function Jr(j,oe){for(var ee=-1,xe=oe.length,Xe=j.length;++ee<xe;)j[Xe+ee]=oe[ee];return j}function gd(j,oe,ee,xe){var Xe=-1,St=j==null?0:j.length;for(xe&&St&&(ee=j[++Xe]);++Xe<St;)ee=oe(ee,j[Xe],Xe,j);return ee}function WL(j,oe,ee,xe){var Xe=j==null?0:j.length;for(xe&&Xe&&(ee=j[--Xe]);Xe--;)ee=oe(ee,j[Xe],Xe,j);return ee}function pd(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe;)if(oe(j[ee],ee,j))return!0;return!1}var VL=md("length");function HL(j){return j.split("")}function $L(j){return j.match(ct)||[]}function pm(j,oe,ee){var xe;return ee(j,function(Xe,St,bn){if(oe(Xe,St,bn))return xe=St,!1}),xe}function Rl(j,oe,ee,xe){for(var Xe=j.length,St=ee+(xe?1:-1);xe?St--:++St<Xe;)if(oe(j[St],St,j))return St;return-1}function fs(j,oe,ee){return oe===oe?eE(j,oe,ee):Rl(j,mm,ee)}function zL(j,oe,ee,xe){for(var Xe=ee-1,St=j.length;++Xe<St;)if(xe(j[Xe],oe))return Xe;return-1}function mm(j){return j!==j}function _m(j,oe){var ee=j==null?0:j.length;return ee?vd(j,oe)/ee:O}function md(j){return function(oe){return oe==null?t:oe[j]}}function _d(j){return function(oe){return j==null?t:j[oe]}}function vm(j,oe,ee,xe,Xe){return Xe(j,function(St,bn,Wt){ee=xe?(xe=!1,St):oe(ee,St,bn,Wt)}),ee}function UL(j,oe){var ee=j.length;for(j.sort(oe);ee--;)j[ee]=j[ee].value;return j}function vd(j,oe){for(var ee,xe=-1,Xe=j.length;++xe<Xe;){var St=oe(j[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function bd(j,oe){for(var ee=-1,xe=Array(j);++ee<j;)xe[ee]=oe(ee);return xe}function jL(j,oe){return Jt(oe,function(ee){return[ee,j[ee]]})}function bm(j){return j&&j.slice(0,Sm(j)+1).replace(pe,"")}function Si(j){return function(oe){return j(oe)}}function Cd(j,oe){return Jt(oe,function(ee){return j[ee]})}function ua(j,oe){return j.has(oe)}function Cm(j,oe){for(var ee=-1,xe=j.length;++ee<xe&&fs(oe,j[ee],0)>-1;);return ee}function wm(j,oe){for(var ee=j.length;ee--&&fs(oe,j[ee],0)>-1;);return ee}function KL(j,oe){for(var ee=j.length,xe=0;ee--;)j[ee]===oe&&++xe;return xe}var GL=_d(TL),qL=_d(NL);function YL(j){return"\\"+OL[j]}function ZL(j,oe){return j==null?t:j[oe]}function gs(j){return xL.test(j)}function XL(j){return DL.test(j)}function QL(j){for(var oe,ee=[];!(oe=j.next()).done;)ee.push(oe.value);return ee}function wd(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe,Xe){ee[++oe]=[Xe,xe]}),ee}function ym(j,oe){return function(ee){return j(oe(ee))}}function eo(j,oe){for(var ee=-1,xe=j.length,Xe=0,St=[];++ee<xe;){var bn=j[ee];(bn===oe||bn===h)&&(j[ee]=h,St[Xe++]=ee)}return St}function Pl(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe){ee[++oe]=xe}),ee}function JL(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe){ee[++oe]=[xe,xe]}),ee}function eE(j,oe,ee){for(var xe=ee-1,Xe=j.length;++xe<Xe;)if(j[xe]===oe)return xe;return-1}function tE(j,oe,ee){for(var xe=ee+1;xe--;)if(j[xe]===oe)return xe;return xe}function ps(j){return gs(j)?iE(j):VL(j)}function Yi(j){return gs(j)?rE(j):HL(j)}function Sm(j){for(var oe=j.length;oe--&&J.test(j.charAt(oe)););return oe}var nE=_d(AL);function iE(j){for(var oe=cd.lastIndex=0;cd.test(j);)++oe;return oe}function rE(j){return j.match(cd)||[]}function oE(j){return j.match(EL)||[]}var sE=function j(oe){oe=oe==null?xn:ms.defaults(xn.Object(),oe,ms.pick(xn,IL));var ee=oe.Array,xe=oe.Date,Xe=oe.Error,St=oe.Function,bn=oe.Math,Wt=oe.Object,yd=oe.RegExp,aE=oe.String,Mi=oe.TypeError,Fl=ee.prototype,lE=St.prototype,_s=Wt.prototype,Bl=oe["__core-js_shared__"],Wl=lE.toString,Nt=_s.hasOwnProperty,uE=0,Lm=function(){var l=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vl=_s.toString,cE=Wl.call(Wt),dE=xn._,hE=yd("^"+Wl.call(Nt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=am?oe.Buffer:t,to=oe.Symbol,$l=oe.Uint8Array,Em=Hl?Hl.allocUnsafe:t,zl=ym(Wt.getPrototypeOf,Wt),xm=Wt.create,Dm=_s.propertyIsEnumerable,Ul=Fl.splice,Im=to?to.isConcatSpreadable:t,ca=to?to.iterator:t,No=to?to.toStringTag:t,jl=function(){try{var l=Po(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),fE=oe.clearTimeout!==xn.clearTimeout&&oe.clearTimeout,gE=xe&&xe.now!==xn.Date.now&&xe.now,pE=oe.setTimeout!==xn.setTimeout&&oe.setTimeout,Kl=bn.ceil,Gl=bn.floor,Sd=Wt.getOwnPropertySymbols,mE=Hl?Hl.isBuffer:t,km=oe.isFinite,_E=Fl.join,vE=ym(Wt.keys,Wt),Cn=bn.max,Rn=bn.min,bE=xe.now,CE=oe.parseInt,Tm=bn.random,wE=Fl.reverse,Ld=Po(oe,"DataView"),da=Po(oe,"Map"),Ed=Po(oe,"Promise"),vs=Po(oe,"Set"),ha=Po(oe,"WeakMap"),fa=Po(Wt,"create"),ql=ha&&new ha,bs={},yE=Fo(Ld),SE=Fo(da),LE=Fo(Ed),EE=Fo(vs),xE=Fo(ha),Yl=to?to.prototype:t,ga=Yl?Yl.valueOf:t,Nm=Yl?Yl.toString:t;function x(l){if(an(l)&&!et(l)&&!(l instanceof mt)){if(l instanceof Ri)return l;if(Nt.call(l,"__wrapped__"))return A_(l)}return new Ri(l)}var Cs=function(){function l(){}return function(c){if(!rn(c))return{};if(xm)return xm(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Zl(){}function Ri(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:Ki,evaluate:Ye,interpolate:is,variable:"",imports:{_:x}},x.prototype=Zl.prototype,x.prototype.constructor=x,Ri.prototype=Cs(Zl.prototype),Ri.prototype.constructor=Ri;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function DE(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function IE(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function kE(){var l=this.__wrapped__.value(),c=this.__dir__,g=et(l),_=c<0,w=g?l.length:0,I=Hx(0,w,this.__views__),P=I.start,H=I.end,q=H-P,ue=_?H:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=Rn(q,this.__takeCount__);if(!g||!_&&w==q&&Ne==q)return t_(l,this.__actions__);var $e=[];e:for(;q--&&Se<Ne;){ue+=c;for(var lt=-1,ze=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Xn=vt(ze);if(xi==B)ze=Xn;else if(!Xn){if(xi==F)continue e;break e}}$e[Se++]=ze}return $e}mt.prototype=Cs(Zl.prototype),mt.prototype.constructor=mt;function Ao(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function TE(){this.__data__=fa?fa(null):{},this.size=0}function NE(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function AE(l){var c=this.__data__;if(fa){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function OE(l){var c=this.__data__;return fa?c[l]!==t:Nt.call(c,l)}function ME(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=fa&&c===t?u:c,this}Ao.prototype.clear=TE,Ao.prototype.delete=NE,Ao.prototype.get=AE,Ao.prototype.has=OE,Ao.prototype.set=ME;function Tr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function RE(){this.__data__=[],this.size=0}function PE(l){var c=this.__data__,g=Xl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():Ul.call(c,g,1),--this.size,!0}function FE(l){var c=this.__data__,g=Xl(c,l);return g<0?t:c[g][1]}function BE(l){return Xl(this.__data__,l)>-1}function WE(l,c){var g=this.__data__,_=Xl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}Tr.prototype.clear=RE,Tr.prototype.delete=PE,Tr.prototype.get=FE,Tr.prototype.has=BE,Tr.prototype.set=WE;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function VE(){this.size=0,this.__data__={hash:new Ao,map:new(da||Tr),string:new Ao}}function HE(l){var c=uu(this,l).delete(l);return this.size-=c?1:0,c}function $E(l){return uu(this,l).get(l)}function zE(l){return uu(this,l).has(l)}function UE(l,c){var g=uu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=VE,Nr.prototype.delete=HE,Nr.prototype.get=$E,Nr.prototype.has=zE,Nr.prototype.set=UE;function Oo(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function jE(l){return this.__data__.set(l,u),this}function KE(l){return this.__data__.has(l)}Oo.prototype.add=Oo.prototype.push=jE,Oo.prototype.has=KE;function Zi(l){var c=this.__data__=new Tr(l);this.size=c.size}function GE(){this.__data__=new Tr,this.size=0}function qE(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function YE(l){return this.__data__.get(l)}function ZE(l){return this.__data__.has(l)}function XE(l,c){var g=this.__data__;if(g instanceof Tr){var _=g.__data__;if(!da||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Zi.prototype.clear=GE,Zi.prototype.delete=qE,Zi.prototype.get=YE,Zi.prototype.has=ZE,Zi.prototype.set=XE;function Am(l,c){var g=et(l),_=!g&&Bo(l),w=!g&&!_&&so(l),I=!g&&!_&&!w&&Ls(l),P=g||_||w||I,H=P?bd(l.length,aE):[],q=H.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||w&&(ue=="offset"||ue=="parent")||I&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Rr(ue,q)))&&H.push(ue);return H}function Om(l){var c=l.length;return c?l[Pd(0,c-1)]:t}function QE(l,c){return cu(ai(l),Mo(c,0,l.length))}function JE(l){return cu(ai(l))}function xd(l,c,g){(g!==t&&!Xi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function pa(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Xi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Xl(l,c){for(var g=l.length;g--;)if(Xi(l[g][0],c))return g;return-1}function ex(l,c,g,_){return no(l,function(w,I,P){c(_,w,g(w),P)}),_}function Mm(l,c){return l&&_r(c,yn(c),l)}function tx(l,c){return l&&_r(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&jl?jl(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function Dd(l,c){for(var g=-1,_=c.length,w=ee(_),I=l==null;++g<_;)w[g]=I?t:ah(l,c[g]);return w}function Mo(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,w,I){var P,H=c&f,q=c&p,ue=c&m;if(g&&(P=w?g(l,_,w,I):g(l)),P!==t)return P;if(!rn(l))return l;var ce=et(l);if(ce){if(P=zx(l),!H)return ai(l,P)}else{var ge=Pn(l),Se=ge==tt||ge==tn;if(so(l))return r_(l,H);if(ge==Tn||ge==Ie||Se&&!w){if(P=q||Se?{}:S_(l),!H)return q?Ax(l,tx(P,l)):Nx(l,Mm(P,l))}else{if(!$t[ge])return w?l:{};P=Ux(l,ge,H)}}I||(I=new Zi);var Ne=I.get(l);if(Ne)return Ne;I.set(l,P),Q_(l)?l.forEach(function(ze){P.add(Pi(ze,c,g,ze,l,I))}):Z_(l)&&l.forEach(function(ze,ht){P.set(ht,Pi(ze,c,g,ht,l,I))});var $e=ue?q?Gd:Kd:q?ui:yn,lt=ce?t:$e(l);return Oi(lt||l,function(ze,ht){lt&&(ht=ze,ze=l[ht]),pa(P,ht,Pi(ze,c,g,ht,l,I))}),P}function nx(l){var c=yn(l);return function(g){return Rm(g,l,c)}}function Rm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var w=g[_],I=c[w],P=l[w];if(P===t&&!(w in l)||!I(P))return!1}return!0}function Pm(l,c,g){if(typeof l!="function")throw new Mi(s);return ya(function(){l.apply(t,g)},c)}function ma(l,c,g,_){var w=-1,I=Ml,P=!0,H=l.length,q=[],ue=c.length;if(!H)return q;g&&(c=Jt(c,Si(g))),_?(I=fd,P=!1):c.length>=r&&(I=ua,P=!1,c=new Oo(c));e:for(;++w<H;){var ce=l[w],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;q.push(ce)}else I(c,ge,_)||q.push(ce)}return q}var no=u_(mr),Fm=u_(kd,!0);function ix(l,c){var g=!0;return no(l,function(_,w,I){return g=!!c(_,w,I),g}),g}function Ql(l,c,g){for(var _=-1,w=l.length;++_<w;){var I=l[_],P=c(I);if(P!=null&&(H===t?P===P&&!Ei(P):g(P,H)))var H=P,q=I}return q}function rx(l,c,g,_){var w=l.length;for(g=rt(g),g<0&&(g=-g>w?0:w+g),_=_===t||_>w?w:rt(_),_<0&&(_+=w),_=g>_?0:ev(_);g<_;)l[g++]=c;return l}function Bm(l,c){var g=[];return no(l,function(_,w,I){c(_,w,I)&&g.push(_)}),g}function Dn(l,c,g,_,w){var I=-1,P=l.length;for(g||(g=Kx),w||(w=[]);++I<P;){var H=l[I];c>0&&g(H)?c>1?Dn(H,c-1,g,_,w):Jr(w,H):_||(w[w.length]=H)}return w}var Id=c_(),Wm=c_(!0);function mr(l,c){return l&&Id(l,c,yn)}function kd(l,c){return l&&Wm(l,c,yn)}function Jl(l,c){return Qr(c,function(g){return Pr(l[g])})}function Ro(l,c){c=ro(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[vr(c[g++])];return g&&g==_?l:t}function Vm(l,c,g){var _=c(l);return et(l)?_:Jr(_,g(l))}function Yn(l){return l==null?l===t?Te:On:No&&No in Wt(l)?Vx(l):Jx(l)}function Td(l,c){return l>c}function ox(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ax(l,c,g){return l>=Rn(c,g)&&l<Cn(c,g)}function Nd(l,c,g){for(var _=g?fd:Ml,w=l[0].length,I=l.length,P=I,H=ee(I),q=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),q=Rn(ce.length,q),H[P]=!g&&(c||w>=120&&ce.length>=120)?new Oo(P&&ce):t}ce=l[0];var ge=-1,Se=H[0];e:for(;++ge<w&&ue.length<q;){var Ne=ce[ge],$e=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ua(Se,$e):_(ue,$e,g))){for(P=I;--P;){var lt=H[P];if(!(lt?ua(lt,$e):_(l[P],$e,g)))continue e}Se&&Se.push($e),ue.push(Ne)}}return ue}function lx(l,c,g,_){return mr(l,function(w,I,P){c(_,g(w),I,P)}),_}function _a(l,c,g){c=ro(c,l),l=D_(l,c);var _=l==null?l:l[vr(Bi(c))];return _==null?t:yi(_,l,g)}function Hm(l){return an(l)&&Yn(l)==Ie}function ux(l){return an(l)&&Yn(l)==at}function cx(l){return an(l)&&Yn(l)==Me}function va(l,c,g,_,w){return l===c?!0:l==null||c==null||!an(l)&&!an(c)?l!==l&&c!==c:dx(l,c,g,_,va,w)}function dx(l,c,g,_,w,I){var P=et(l),H=et(c),q=P?je:Pn(l),ue=H?je:Pn(c);q=q==Ie?Tn:q,ue=ue==Ie?Tn:ue;var ce=q==Tn,ge=ue==Tn,Se=q==ue;if(Se&&so(l)){if(!so(c))return!1;P=!0,ce=!1}if(Se&&!ce)return I||(I=new Zi),P||Ls(l)?C_(l,c,g,_,w,I):Bx(l,c,q,g,_,w,I);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),$e=ge&&Nt.call(c,"__wrapped__");if(Ne||$e){var lt=Ne?l.value():l,ze=$e?c.value():c;return I||(I=new Zi),w(lt,ze,g,_,I)}}return Se?(I||(I=new Zi),Wx(l,c,g,_,w,I)):!1}function hx(l){return an(l)&&Pn(l)==Zt}function Ad(l,c,g,_){var w=g.length,I=w,P=!_;if(l==null)return!I;for(l=Wt(l);w--;){var H=g[w];if(P&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++w<I;){H=g[w];var q=H[0],ue=l[q],ce=H[1];if(P&&H[2]){if(ue===t&&!(q in l))return!1}else{var ge=new Zi;if(_)var Se=_(ue,ce,q,l,c,ge);if(!(Se===t?va(ce,ue,v|b,_,ge):Se))return!1}}return!0}function $m(l){if(!rn(l)||qx(l))return!1;var c=Pr(l)?hE:le;return c.test(Fo(l))}function fx(l){return an(l)&&Yn(l)==Mn}function gx(l){return an(l)&&Pn(l)==Pt}function px(l){return an(l)&&mu(l.length)&&!!jt[Yn(l)]}function zm(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?et(l)?Km(l[0],l[1]):jm(l):dv(l)}function Od(l){if(!wa(l))return vE(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function mx(l){if(!rn(l))return Qx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Md(l,c){return l<c}function Um(l,c){var g=-1,_=li(l)?ee(l.length):[];return no(l,function(w,I,P){_[++g]=c(w,I,P)}),_}function jm(l){var c=Yd(l);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(g){return g===l||Ad(g,l,c)}}function Km(l,c){return Xd(l)&&L_(c)?E_(vr(l),c):function(g){var _=ah(g,l);return _===t&&_===c?lh(g,l):va(c,_,v|b)}}function eu(l,c,g,_,w){l!==c&&Id(c,function(I,P){if(w||(w=new Zi),rn(I))_x(l,c,P,g,eu,_,w);else{var H=_?_(Jd(l,P),I,P+"",l,c,w):t;H===t&&(H=I),xd(l,P,H)}},ui)}function _x(l,c,g,_,w,I,P){var H=Jd(l,g),q=Jd(c,g),ue=P.get(q);if(ue){xd(l,g,ue);return}var ce=I?I(H,q,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=et(q),Ne=!Se&&so(q),$e=!Se&&!Ne&&Ls(q);ce=q,Se||Ne||$e?et(H)?ce=H:hn(H)?ce=ai(H):Ne?(ge=!1,ce=r_(q,!0)):$e?(ge=!1,ce=o_(q,!0)):ce=[]:Sa(q)||Bo(q)?(ce=H,Bo(H)?ce=tv(H):(!rn(H)||Pr(H))&&(ce=S_(q))):ge=!1}ge&&(P.set(q,ce),w(ce,q,_,I,P),P.delete(q)),xd(l,g,ce)}function Gm(l,c){var g=l.length;if(g)return c+=c<0?g:0,Rr(c,g)?l[c]:t}function qm(l,c,g){c.length?c=Jt(c,function(I){return et(I)?function(P){return Ro(P,I.length===1?I[0]:I)}:I}):c=[ci];var _=-1;c=Jt(c,Si(We()));var w=Um(l,function(I,P,H){var q=Jt(c,function(ue){return ue(I)});return{criteria:q,index:++_,value:I}});return UL(w,function(I,P){return Tx(I,P,g)})}function vx(l,c){return Ym(l,c,function(g,_){return lh(l,_)})}function Ym(l,c,g){for(var _=-1,w=c.length,I={};++_<w;){var P=c[_],H=Ro(l,P);g(H,P)&&ba(I,ro(P,l),H)}return I}function bx(l){return function(c){return Ro(c,l)}}function Rd(l,c,g,_){var w=_?zL:fs,I=-1,P=c.length,H=l;for(l===c&&(c=ai(c)),g&&(H=Jt(l,Si(g)));++I<P;)for(var q=0,ue=c[I],ce=g?g(ue):ue;(q=w(H,ce,q,_))>-1;)H!==l&&Ul.call(H,q,1),Ul.call(l,q,1);return l}function Zm(l,c){for(var g=l?c.length:0,_=g-1;g--;){var w=c[g];if(g==_||w!==I){var I=w;Rr(w)?Ul.call(l,w,1):Wd(l,w)}}return l}function Pd(l,c){return l+Gl(Tm()*(c-l+1))}function Cx(l,c,g,_){for(var w=-1,I=Cn(Kl((c-l)/(g||1)),0),P=ee(I);I--;)P[_?I:++w]=l,l+=g;return P}function Fd(l,c){var g="";if(!l||c<1||c>Z)return g;do c%2&&(g+=l),c=Gl(c/2),c&&(l+=l);while(c);return g}function ut(l,c){return eh(x_(l,c,ci),l+"")}function wx(l){return Om(Es(l))}function yx(l,c){var g=Es(l);return cu(g,Mo(c,0,g.length))}function ba(l,c,g,_){if(!rn(l))return l;c=ro(c,l);for(var w=-1,I=c.length,P=I-1,H=l;H!=null&&++w<I;){var q=vr(c[w]),ue=g;if(q==="__proto__"||q==="constructor"||q==="prototype")return l;if(w!=P){var ce=H[q];ue=_?_(ce,q,H):t,ue===t&&(ue=rn(ce)?ce:Rr(c[w+1])?[]:{})}pa(H,q,ue),H=H[q]}return l}var Xm=ql?function(l,c){return ql.set(l,c),l}:ci,Sx=jl?function(l,c){return jl(l,"toString",{configurable:!0,enumerable:!1,value:ch(c),writable:!0})}:ci;function Lx(l){return cu(Es(l))}function Fi(l,c,g){var _=-1,w=l.length;c<0&&(c=-c>w?0:w+c),g=g>w?w:g,g<0&&(g+=w),w=c>g?0:g-c>>>0,c>>>=0;for(var I=ee(w);++_<w;)I[_]=l[_+c];return I}function Ex(l,c){var g;return no(l,function(_,w,I){return g=c(_,w,I),!g}),!!g}function tu(l,c,g){var _=0,w=l==null?_:l.length;if(typeof c=="number"&&c===c&&w<=ne){for(;_<w;){var I=_+w>>>1,P=l[I];P!==null&&!Ei(P)&&(g?P<=c:P<c)?_=I+1:w=I}return w}return Bd(l,c,ci,g)}function Bd(l,c,g,_){var w=0,I=l==null?0:l.length;if(I===0)return 0;c=g(c);for(var P=c!==c,H=c===null,q=Ei(c),ue=c===t;w<I;){var ce=Gl((w+I)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,$e=ge===ge,lt=Ei(ge);if(P)var ze=_||$e;else ue?ze=$e&&(_||Se):H?ze=$e&&Se&&(_||!Ne):q?ze=$e&&Se&&!Ne&&(_||!lt):Ne||lt?ze=!1:ze=_?ge<=c:ge<c;ze?w=ce+1:I=ce}return Rn(I,fe)}function Qm(l,c){for(var g=-1,_=l.length,w=0,I=[];++g<_;){var P=l[g],H=c?c(P):P;if(!g||!Xi(H,q)){var q=H;I[w++]=P===0?0:P}}return I}function Jm(l){return typeof l=="number"?l:Ei(l)?O:+l}function Li(l){if(typeof l=="string")return l;if(et(l))return Jt(l,Li)+"";if(Ei(l))return Nm?Nm.call(l):"";var c=l+"";return c=="0"&&1/l==-G?"-0":c}function io(l,c,g){var _=-1,w=Ml,I=l.length,P=!0,H=[],q=H;if(g)P=!1,w=fd;else if(I>=r){var ue=c?null:Px(l);if(ue)return Pl(ue);P=!1,w=ua,q=new Oo}else q=c?[]:H;e:for(;++_<I;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=q.length;Se--;)if(q[Se]===ge)continue e;c&&q.push(ge),H.push(ce)}else w(q,ge,g)||(q!==H&&q.push(ge),H.push(ce))}return H}function Wd(l,c){return c=ro(c,l),l=D_(l,c),l==null||delete l[vr(Bi(c))]}function e_(l,c,g,_){return ba(l,c,g(Ro(l,c)),_)}function nu(l,c,g,_){for(var w=l.length,I=_?w:-1;(_?I--:++I<w)&&c(l[I],I,l););return g?Fi(l,_?0:I,_?I+1:w):Fi(l,_?I+1:0,_?w:I)}function t_(l,c){var g=l;return g instanceof mt&&(g=g.value()),gd(c,function(_,w){return w.func.apply(w.thisArg,Jr([_],w.args))},g)}function Vd(l,c,g){var _=l.length;if(_<2)return _?io(l[0]):[];for(var w=-1,I=ee(_);++w<_;)for(var P=l[w],H=-1;++H<_;)H!=w&&(I[w]=ma(I[w]||P,l[H],c,g));return io(Dn(I,1),c,g)}function n_(l,c,g){for(var _=-1,w=l.length,I=c.length,P={};++_<w;){var H=_<I?c[_]:t;g(P,l[_],H)}return P}function Hd(l){return hn(l)?l:[]}function $d(l){return typeof l=="function"?l:ci}function ro(l,c){return et(l)?l:Xd(l,c)?[l]:N_(xt(l))}var xx=ut;function oo(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var i_=fE||function(l){return xn.clearTimeout(l)};function r_(l,c){if(c)return l.slice();var g=l.length,_=Em?Em(g):new l.constructor(g);return l.copy(_),_}function zd(l){var c=new l.constructor(l.byteLength);return new $l(c).set(new $l(l)),c}function Dx(l,c){var g=c?zd(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Ix(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function kx(l){return ga?Wt(ga.call(l)):{}}function o_(l,c){var g=c?zd(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function s_(l,c){if(l!==c){var g=l!==t,_=l===null,w=l===l,I=Ei(l),P=c!==t,H=c===null,q=c===c,ue=Ei(c);if(!H&&!ue&&!I&&l>c||I&&P&&q&&!H&&!ue||_&&P&&q||!g&&q||!w)return 1;if(!_&&!I&&!ue&&l<c||ue&&g&&w&&!_&&!I||H&&g&&w||!P&&w||!q)return-1}return 0}function Tx(l,c,g){for(var _=-1,w=l.criteria,I=c.criteria,P=w.length,H=g.length;++_<P;){var q=s_(w[_],I[_]);if(q){if(_>=H)return q;var ue=g[_];return q*(ue=="desc"?-1:1)}}return l.index-c.index}function a_(l,c,g,_){for(var w=-1,I=l.length,P=g.length,H=-1,q=c.length,ue=Cn(I-P,0),ce=ee(q+ue),ge=!_;++H<q;)ce[H]=c[H];for(;++w<P;)(ge||w<I)&&(ce[g[w]]=l[w]);for(;ue--;)ce[H++]=l[w++];return ce}function l_(l,c,g,_){for(var w=-1,I=l.length,P=-1,H=g.length,q=-1,ue=c.length,ce=Cn(I-H,0),ge=ee(ce+ue),Se=!_;++w<ce;)ge[w]=l[w];for(var Ne=w;++q<ue;)ge[Ne+q]=c[q];for(;++P<H;)(Se||w<I)&&(ge[Ne+g[P]]=l[w++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function _r(l,c,g,_){var w=!g;g||(g={});for(var I=-1,P=c.length;++I<P;){var H=c[I],q=_?_(g[H],l[H],H,g,l):t;q===t&&(q=l[H]),w?Ar(g,H,q):pa(g,H,q)}return g}function Nx(l,c){return _r(l,Zd(l),c)}function Ax(l,c){return _r(l,w_(l),c)}function iu(l,c){return function(g,_){var w=et(g)?FL:ex,I=c?c():{};return w(g,l,We(_,2),I)}}function ws(l){return ut(function(c,g){var _=-1,w=g.length,I=w>1?g[w-1]:t,P=w>2?g[2]:t;for(I=l.length>3&&typeof I=="function"?(w--,I):t,P&&Zn(g[0],g[1],P)&&(I=w<3?t:I,w=1),c=Wt(c);++_<w;){var H=g[_];H&&l(c,H,_,I)}return c})}function u_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var w=g.length,I=c?w:-1,P=Wt(g);(c?I--:++I<w)&&_(P[I],I,P)!==!1;);return g}}function c_(l){return function(c,g,_){for(var w=-1,I=Wt(c),P=_(c),H=P.length;H--;){var q=P[l?H:++w];if(g(I[q],q,I)===!1)break}return c}}function Ox(l,c,g){var _=c&L,w=Ca(l);function I(){var P=this&&this!==xn&&this instanceof I?w:l;return P.apply(_?g:this,arguments)}return I}function d_(l){return function(c){c=xt(c);var g=gs(c)?Yi(c):t,_=g?g[0]:c.charAt(0),w=g?oo(g,1).join(""):c.slice(1);return _[l]()+w}}function ys(l){return function(c){return gd(uv(lv(c).replace(SL,"")),l,"")}}function Ca(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Cs(l.prototype),_=l.apply(g,c);return rn(_)?_:g}}function Mx(l,c,g){var _=Ca(l);function w(){for(var I=arguments.length,P=ee(I),H=I,q=Ss(w);H--;)P[H]=arguments[H];var ue=I<3&&P[0]!==q&&P[I-1]!==q?[]:eo(P,q);if(I-=ue.length,I<g)return m_(l,c,ru,w.placeholder,t,P,ue,t,t,g-I);var ce=this&&this!==xn&&this instanceof w?_:l;return yi(ce,this,P)}return w}function h_(l){return function(c,g,_){var w=Wt(c);if(!li(c)){var I=We(g,3);c=yn(c),g=function(H){return I(w[H],H,w)}}var P=l(c,g,_);return P>-1?w[I?c[P]:P]:t}}function f_(l){return Mr(function(c){var g=c.length,_=g,w=Ri.prototype.thru;for(l&&c.reverse();_--;){var I=c[_];if(typeof I!="function")throw new Mi(s);if(w&&!P&&lu(I)=="wrapper")var P=new Ri([],!0)}for(_=P?_:g;++_<g;){I=c[_];var H=lu(I),q=H=="wrapper"?qd(I):t;q&&Qd(q[0])&&q[1]==(R|E|N|M)&&!q[4].length&&q[9]==1?P=P[lu(q[0])].apply(P,q[3]):P=I.length==1&&Qd(I)?P[H]():P.thru(I)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&et(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function ru(l,c,g,_,w,I,P,H,q,ue){var ce=c&R,ge=c&L,Se=c&S,Ne=c&(E|A),$e=c&K,lt=Se?t:Ca(l);function ze(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Xn=Ss(ze),Di=KL(vt,Xn);if(_&&(vt=a_(vt,_,w,Ne)),I&&(vt=l_(vt,I,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=eo(vt,Xn);return m_(l,c,ru,ze.placeholder,g,vt,fn,H,q,ue-ht)}var Qi=ge?g:this,Br=Se?Qi[l]:l;return ht=vt.length,H?vt=eD(vt,H):$e&&ht>1&&vt.reverse(),ce&&q<ht&&(vt.length=q),this&&this!==xn&&this instanceof ze&&(Br=lt||Ca(Br)),Br.apply(Qi,vt)}return ze}function g_(l,c){return function(g,_){return lx(g,l,c(_),{})}}function ou(l,c){return function(g,_){var w;if(g===t&&_===t)return c;if(g!==t&&(w=g),_!==t){if(w===t)return _;typeof g=="string"||typeof _=="string"?(g=Li(g),_=Li(_)):(g=Jm(g),_=Jm(_)),w=l(g,_)}return w}}function Ud(l){return Mr(function(c){return c=Jt(c,Si(We())),ut(function(g){var _=this;return l(c,function(w){return yi(w,_,g)})})})}function su(l,c){c=c===t?" ":Li(c);var g=c.length;if(g<2)return g?Fd(c,l):c;var _=Fd(c,Kl(l/ps(c)));return gs(c)?oo(Yi(_),0,l).join(""):_.slice(0,l)}function Rx(l,c,g,_){var w=c&L,I=Ca(l);function P(){for(var H=-1,q=arguments.length,ue=-1,ce=_.length,ge=ee(ce+q),Se=this&&this!==xn&&this instanceof P?I:l;++ue<ce;)ge[ue]=_[ue];for(;q--;)ge[ue++]=arguments[++H];return yi(Se,w?g:this,ge)}return P}function p_(l){return function(c,g,_){return _&&typeof _!="number"&&Zn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),Cx(c,g,_,l)}}function au(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function m_(l,c,g,_,w,I,P,H,q,ue){var ce=c&E,ge=ce?P:t,Se=ce?t:P,Ne=ce?I:t,$e=ce?t:I;c|=ce?N:V,c&=~(ce?V:N),c&y||(c&=~(L|S));var lt=[l,c,w,Ne,ge,$e,Se,H,q,ue],ze=g.apply(t,lt);return Qd(l)&&I_(ze,lt),ze.placeholder=_,k_(ze,l,c)}function jd(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:Rn(rt(_),292),_&&km(g)){var w=(xt(g)+"e").split("e"),I=c(w[0]+"e"+(+w[1]+_));return w=(xt(I)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return c(g)}}var Px=vs&&1/Pl(new vs([,-0]))[1]==G?function(l){return new vs(l)}:fh;function __(l){return function(c){var g=Pn(c);return g==Zt?wd(c):g==Pt?JL(c):jL(c,l(c))}}function Or(l,c,g,_,w,I,P,H){var q=c&S;if(!q&&typeof l!="function")throw new Mi(s);var ue=_?_.length:0;if(ue||(c&=~(N|V),_=w=t),P=P===t?P:Cn(rt(P),0),H=H===t?H:rt(H),ue-=w?w.length:0,c&V){var ce=_,ge=w;_=w=t}var Se=q?t:qd(l),Ne=[l,c,g,_,w,ce,ge,I,P,H];if(Se&&Xx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],w=Ne[4],H=Ne[9]=Ne[9]===t?q?0:l.length:Cn(Ne[9]-ue,0),!H&&c&(E|A)&&(c&=~(E|A)),!c||c==L)var $e=Ox(l,c,g);else c==E||c==A?$e=Mx(l,c,H):(c==N||c==(L|N))&&!w.length?$e=Rx(l,c,g,_):$e=ru.apply(t,Ne);var lt=Se?Xm:I_;return k_(lt($e,Ne),l,c)}function v_(l,c,g,_){return l===t||Xi(l,_s[g])&&!Nt.call(_,g)?c:l}function b_(l,c,g,_,w,I){return rn(l)&&rn(c)&&(I.set(c,l),eu(l,c,t,b_,I),I.delete(c)),l}function Fx(l){return Sa(l)?t:l}function C_(l,c,g,_,w,I){var P=g&v,H=l.length,q=c.length;if(H!=q&&!(P&&q>H))return!1;var ue=I.get(l),ce=I.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new Oo:t;for(I.set(l,c),I.set(c,l);++ge<H;){var $e=l[ge],lt=c[ge];if(_)var ze=P?_(lt,$e,ge,c,l,I):_($e,lt,ge,l,c,I);if(ze!==t){if(ze)continue;Se=!1;break}if(Ne){if(!pd(c,function(ht,vt){if(!ua(Ne,vt)&&($e===ht||w($e,ht,g,_,I)))return Ne.push(vt)})){Se=!1;break}}else if(!($e===lt||w($e,lt,g,_,I))){Se=!1;break}}return I.delete(l),I.delete(c),Se}function Bx(l,c,g,_,w,I,P){switch(g){case Ct:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!I(new $l(l),new $l(c)));case At:case Me:case nn:return Xi(+l,+c);case bt:return l.name==c.name&&l.message==c.message;case Mn:case pn:return l==c+"";case Zt:var H=wd;case Pt:var q=_&v;if(H||(H=Pl),l.size!=c.size&&!q)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=C_(H(l),H(c),_,w,I,P);return P.delete(l),ce;case mi:if(ga)return ga.call(l)==ga.call(c)}return!1}function Wx(l,c,g,_,w,I){var P=g&v,H=Kd(l),q=H.length,ue=Kd(c),ce=ue.length;if(q!=ce&&!P)return!1;for(var ge=q;ge--;){var Se=H[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=I.get(l),$e=I.get(c);if(Ne&&$e)return Ne==c&&$e==l;var lt=!0;I.set(l,c),I.set(c,l);for(var ze=P;++ge<q;){Se=H[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,I):_(ht,vt,Se,l,c,I);if(!(xi===t?ht===vt||w(ht,vt,g,_,I):xi)){lt=!1;break}ze||(ze=Se=="constructor")}if(lt&&!ze){var Xn=l.constructor,Di=c.constructor;Xn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Xn=="function"&&Xn instanceof Xn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return I.delete(l),I.delete(c),lt}function Mr(l){return eh(x_(l,t,R_),l+"")}function Kd(l){return Vm(l,yn,Zd)}function Gd(l){return Vm(l,ui,w_)}var qd=ql?function(l){return ql.get(l)}:fh;function lu(l){for(var c=l.name+"",g=bs[c],_=Nt.call(bs,c)?g.length:0;_--;){var w=g[_],I=w.func;if(I==null||I==l)return w.name}return c}function Ss(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||dh;return l=l===dh?zm:l,arguments.length?l(arguments[0],arguments[1]):l}function uu(l,c){var g=l.__data__;return Gx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function Yd(l){for(var c=yn(l),g=c.length;g--;){var _=c[g],w=l[_];c[g]=[_,w,L_(w)]}return c}function Po(l,c){var g=ZL(l,c);return $m(g)?g:t}function Vx(l){var c=Nt.call(l,No),g=l[No];try{l[No]=t;var _=!0}catch{}var w=Vl.call(l);return _&&(c?l[No]=g:delete l[No]),w}var Zd=Sd?function(l){return l==null?[]:(l=Wt(l),Qr(Sd(l),function(c){return Dm.call(l,c)}))}:gh,w_=Sd?function(l){for(var c=[];l;)Jr(c,Zd(l)),l=zl(l);return c}:gh,Pn=Yn;(Ld&&Pn(new Ld(new ArrayBuffer(1)))!=Ct||da&&Pn(new da)!=Zt||Ed&&Pn(Ed.resolve())!=ei||vs&&Pn(new vs)!=Pt||ha&&Pn(new ha)!=Fe)&&(Pn=function(l){var c=Yn(l),g=c==Tn?l.constructor:t,_=g?Fo(g):"";if(_)switch(_){case yE:return Ct;case SE:return Zt;case LE:return ei;case EE:return Pt;case xE:return Fe}return c});function Hx(l,c,g){for(var _=-1,w=g.length;++_<w;){var I=g[_],P=I.size;switch(I.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=Rn(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function $x(l){var c=l.match(He);return c?c[1].split(Re):[]}function y_(l,c,g){c=ro(c,l);for(var _=-1,w=c.length,I=!1;++_<w;){var P=vr(c[_]);if(!(I=l!=null&&g(l,P)))break;l=l[P]}return I||++_!=w?I:(w=l==null?0:l.length,!!w&&mu(w)&&Rr(P,w)&&(et(l)||Bo(l)))}function zx(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function S_(l){return typeof l.constructor=="function"&&!wa(l)?Cs(zl(l)):{}}function Ux(l,c,g){var _=l.constructor;switch(c){case at:return zd(l);case At:case Me:return new _(+l);case Ct:return Dx(l,g);case wi:case Vt:case kt:case Kt:case Gt:case Bt:case fr:case ti:case Ve:return o_(l,g);case Zt:return new _;case nn:case pn:return new _(l);case Mn:return Ix(l);case Pt:return new _;case mi:return kx(l)}}function jx(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function Kx(l){return et(l)||Bo(l)||!!(Im&&l&&l[Im])}function Rr(l,c){var g=typeof l;return c=c??Z,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Zn(l,c,g){if(!rn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Rr(c,g.length):_=="string"&&c in g)?Xi(g[c],l):!1}function Xd(l,c){if(et(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Ei(l)?!0:Ee.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Gx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Qd(l){var c=lu(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=qd(g);return!!_&&l===_[0]}function qx(l){return!!Lm&&Lm in l}var Yx=Bl?Pr:ph;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_s;return l===g}function L_(l){return l===l&&!rn(l)}function E_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Zx(l){var c=gu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Xx(l,c){var g=l[1],_=c[1],w=g|_,I=w<(L|S|R),P=_==R&&g==E||_==R&&g==M&&l[7].length<=c[8]||_==(R|M)&&c[7].length<=c[8]&&g==E;if(!(I||P))return l;_&L&&(l[2]=c[2],w|=g&L?0:y);var H=c[3];if(H){var q=l[3];l[3]=q?a_(q,H,c[4]):H,l[4]=q?eo(l[3],h):c[4]}return H=c[5],H&&(q=l[5],l[5]=q?l_(q,H,c[6]):H,l[6]=q?eo(l[5],h):c[6]),H=c[7],H&&(l[7]=H),_&R&&(l[8]=l[8]==null?c[8]:Rn(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Qx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Jx(l){return Vl.call(l)}function x_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,w=-1,I=Cn(_.length-c,0),P=ee(I);++w<I;)P[w]=_[c+w];w=-1;for(var H=ee(c+1);++w<c;)H[w]=_[w];return H[c]=g(P),yi(l,this,H)}}function D_(l,c){return c.length<2?l:Ro(l,Fi(c,0,-1))}function eD(l,c){for(var g=l.length,_=Rn(c.length,g),w=ai(l);_--;){var I=c[_];l[_]=Rr(I,g)?w[I]:t}return l}function Jd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var I_=T_(Xm),ya=pE||function(l,c){return xn.setTimeout(l,c)},eh=T_(Sx);function k_(l,c,g){var _=c+"";return eh(l,jx(_,tD($x(_),g)))}function T_(l){var c=0,g=0;return function(){var _=bE(),w=T-(_-g);if(g=_,w>0){if(++c>=D)return arguments[0]}else c=0;return l.apply(t,arguments)}}function cu(l,c){var g=-1,_=l.length,w=_-1;for(c=c===t?_:c;++g<c;){var I=Pd(g,w),P=l[I];l[I]=l[g],l[g]=P}return l.length=c,l}var N_=Zx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,w,I){c.push(w?I.replace(k,"$1"):_||g)}),c});function vr(l){if(typeof l=="string"||Ei(l))return l;var c=l+"";return c=="0"&&1/l==-G?"-0":c}function Fo(l){if(l!=null){try{return Wl.call(l)}catch{}try{return l+""}catch{}}return""}function tD(l,c){return Oi(we,function(g){var _="_."+g[0];c&g[1]&&!Ml(l,_)&&l.push(_)}),l.sort()}function A_(l){if(l instanceof mt)return l.clone();var c=new Ri(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function nD(l,c,g){(g?Zn(l,c,g):c===t)?c=1:c=Cn(rt(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var w=0,I=0,P=ee(Kl(_/c));w<_;)P[I++]=Fi(l,w,w+=c);return P}function iD(l){for(var c=-1,g=l==null?0:l.length,_=0,w=[];++c<g;){var I=l[c];I&&(w[_++]=I)}return w}function rD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return Jr(et(g)?ai(g):[g],Dn(c,1))}var oD=ut(function(l,c){return hn(l)?ma(l,Dn(c,1,hn,!0)):[]}),sD=ut(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),We(g,2)):[]}),aD=ut(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),t,g):[]});function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),Fi(l,c<0?0:c,_)):[]}function uD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function cD(l,c){return l&&l.length?nu(l,We(c,3),!0,!0):[]}function dD(l,c){return l&&l.length?nu(l,We(c,3),!0):[]}function hD(l,c,g,_){var w=l==null?0:l.length;return w?(g&&typeof g!="number"&&Zn(l,c,g)&&(g=0,_=w),rx(l,c,g,_)):[]}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:rt(g);return w<0&&(w=Cn(_+w,0)),Rl(l,We(c,3),w)}function M_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return g!==t&&(w=rt(g),w=g<0?Cn(_+w,0):Rn(w,_-1)),Rl(l,We(c,3),w,!0)}function R_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function fD(l){var c=l==null?0:l.length;return c?Dn(l,G):[]}function gD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:rt(c),Dn(l,c)):[]}function pD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var w=l[c];_[w[0]]=w[1]}return _}function P_(l){return l&&l.length?l[0]:t}function mD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:rt(g);return w<0&&(w=Cn(_+w,0)),fs(l,c,w)}function _D(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var vD=ut(function(l){var c=Jt(l,Hd);return c.length&&c[0]===l[0]?Nd(c):[]}),bD=ut(function(l){var c=Bi(l),g=Jt(l,Hd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?Nd(g,We(c,2)):[]}),CD=ut(function(l){var c=Bi(l),g=Jt(l,Hd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?Nd(g,t,c):[]});function wD(l,c){return l==null?"":_E.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function yD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_;return g!==t&&(w=rt(g),w=w<0?Cn(_+w,0):Rn(w,_-1)),c===c?tE(l,c,w):Rl(l,mm,w,!0)}function SD(l,c){return l&&l.length?Gm(l,rt(c)):t}var LD=ut(F_);function F_(l,c){return l&&l.length&&c&&c.length?Rd(l,c):l}function ED(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,We(g,2)):l}function xD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,t,g):l}var DD=Mr(function(l,c){var g=l==null?0:l.length,_=Dd(l,c);return Zm(l,Jt(c,function(w){return Rr(w,g)?+w:w}).sort(s_)),_});function ID(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,w=[],I=l.length;for(c=We(c,3);++_<I;){var P=l[_];c(P,_,l)&&(g.push(P),w.push(_))}return Zm(l,w),g}function th(l){return l==null?l:wE.call(l)}function kD(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Zn(l,c,g)?(c=0,g=_):(c=c==null?0:rt(c),g=g===t?_:rt(g)),Fi(l,c,g)):[]}function TD(l,c){return tu(l,c)}function ND(l,c,g){return Bd(l,c,We(g,2))}function AD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c);if(_<g&&Xi(l[_],c))return _}return-1}function OD(l,c){return tu(l,c,!0)}function MD(l,c,g){return Bd(l,c,We(g,2),!0)}function RD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c,!0)-1;if(Xi(l[_],c))return _}return-1}function PD(l){return l&&l.length?Qm(l):[]}function FD(l,c){return l&&l.length?Qm(l,We(c,2)):[]}function BD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function WD(l,c,g){return l&&l.length?(c=g||c===t?1:rt(c),Fi(l,0,c<0?0:c)):[]}function VD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function HD(l,c){return l&&l.length?nu(l,We(c,3),!1,!0):[]}function $D(l,c){return l&&l.length?nu(l,We(c,3)):[]}var zD=ut(function(l){return io(Dn(l,1,hn,!0))}),UD=ut(function(l){var c=Bi(l);return hn(c)&&(c=t),io(Dn(l,1,hn,!0),We(c,2))}),jD=ut(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,io(Dn(l,1,hn,!0),t,c)});function KD(l){return l&&l.length?io(l):[]}function GD(l,c){return l&&l.length?io(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?io(l,t,c):[]}function nh(l){if(!(l&&l.length))return[];var c=0;return l=Qr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),bd(c,function(g){return Jt(l,md(g))})}function B_(l,c){if(!(l&&l.length))return[];var g=nh(l);return c==null?g:Jt(g,function(_){return yi(c,t,_)})}var YD=ut(function(l,c){return hn(l)?ma(l,c):[]}),ZD=ut(function(l){return Vd(Qr(l,hn))}),XD=ut(function(l){var c=Bi(l);return hn(c)&&(c=t),Vd(Qr(l,hn),We(c,2))}),QD=ut(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Vd(Qr(l,hn),t,c)}),JD=ut(nh);function eI(l,c){return n_(l||[],c||[],pa)}function tI(l,c){return n_(l||[],c||[],ba)}var nI=ut(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,B_(l,g)});function W_(l){var c=x(l);return c.__chain__=!0,c}function iI(l,c){return c(l),l}function du(l,c){return c(l)}var rI=Mr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,w=function(I){return Dd(I,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Rr(g)?this.thru(w):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:du,args:[w],thisArg:t}),new Ri(_,this.__chain__).thru(function(I){return c&&!I.length&&I.push(t),I}))});function oI(){return W_(this)}function sI(){return new Ri(this.value(),this.__chain__)}function aI(){this.__values__===t&&(this.__values__=J_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function lI(){return this}function uI(l){for(var c,g=this;g instanceof Zl;){var _=A_(g);_.__index__=0,_.__values__=t,c?w.__wrapped__=_:c=_;var w=_;g=g.__wrapped__}return w.__wrapped__=l,c}function cI(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:du,args:[th],thisArg:t}),new Ri(c,this.__chain__)}return this.thru(th)}function dI(){return t_(this.__wrapped__,this.__actions__)}var hI=iu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function fI(l,c,g){var _=et(l)?gm:ix;return g&&Zn(l,c,g)&&(c=t),_(l,We(c,3))}function gI(l,c){var g=et(l)?Qr:Bm;return g(l,We(c,3))}var pI=h_(O_),mI=h_(M_);function _I(l,c){return Dn(hu(l,c),1)}function vI(l,c){return Dn(hu(l,c),G)}function bI(l,c,g){return g=g===t?1:rt(g),Dn(hu(l,c),g)}function V_(l,c){var g=et(l)?Oi:no;return g(l,We(c,3))}function H_(l,c){var g=et(l)?BL:Fm;return g(l,We(c,3))}var CI=iu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function wI(l,c,g,_){l=li(l)?l:Es(l),g=g&&!_?rt(g):0;var w=l.length;return g<0&&(g=Cn(w+g,0)),_u(l)?g<=w&&l.indexOf(c,g)>-1:!!w&&fs(l,c,g)>-1}var yI=ut(function(l,c,g){var _=-1,w=typeof c=="function",I=li(l)?ee(l.length):[];return no(l,function(P){I[++_]=w?yi(c,P,g):_a(P,c,g)}),I}),SI=iu(function(l,c,g){Ar(l,g,c)});function hu(l,c){var g=et(l)?Jt:Um;return g(l,We(c,3))}function LI(l,c,g,_){return l==null?[]:(et(c)||(c=c==null?[]:[c]),g=_?t:g,et(g)||(g=g==null?[]:[g]),qm(l,c,g))}var EI=iu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function xI(l,c,g){var _=et(l)?gd:vm,w=arguments.length<3;return _(l,We(c,4),g,w,no)}function DI(l,c,g){var _=et(l)?WL:vm,w=arguments.length<3;return _(l,We(c,4),g,w,Fm)}function II(l,c){var g=et(l)?Qr:Bm;return g(l,pu(We(c,3)))}function kI(l){var c=et(l)?Om:wx;return c(l)}function TI(l,c,g){(g?Zn(l,c,g):c===t)?c=1:c=rt(c);var _=et(l)?QE:yx;return _(l,c)}function NI(l){var c=et(l)?JE:Lx;return c(l)}function AI(l){if(l==null)return 0;if(li(l))return _u(l)?ps(l):l.length;var c=Pn(l);return c==Zt||c==Pt?l.size:Od(l).length}function OI(l,c,g){var _=et(l)?pd:Ex;return g&&Zn(l,c,g)&&(c=t),_(l,We(c,3))}var MI=ut(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Zn(l,c[0],c[1])?c=[]:g>2&&Zn(c[0],c[1],c[2])&&(c=[c[0]]),qm(l,Dn(c,1),[])}),fu=gE||function(){return xn.Date.now()};function RI(l,c){if(typeof c!="function")throw new Mi(s);return l=rt(l),function(){if(--l<1)return c.apply(this,arguments)}}function $_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,R,t,t,t,t,c)}function z_(l,c){var g;if(typeof c!="function")throw new Mi(s);return l=rt(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var ih=ut(function(l,c,g){var _=L;if(g.length){var w=eo(g,Ss(ih));_|=N}return Or(l,_,c,g,w)}),U_=ut(function(l,c,g){var _=L|S;if(g.length){var w=eo(g,Ss(U_));_|=N}return Or(c,_,l,g,w)});function j_(l,c,g){c=g?t:c;var _=Or(l,E,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=K_.placeholder,_}function G_(l,c,g){var _,w,I,P,H,q,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Mi(s);c=Wi(c)||0,rn(g)&&(ce=!!g.leading,ge="maxWait"in g,I=ge?Cn(Wi(g.maxWait)||0,c):I,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Qi=_,Br=w;return _=w=t,ue=fn,P=l.apply(Br,Qi),P}function $e(fn){return ue=fn,H=ya(ht,c),ce?Ne(fn):P}function lt(fn){var Qi=fn-q,Br=fn-ue,hv=c-Qi;return ge?Rn(hv,I-Br):hv}function ze(fn){var Qi=fn-q,Br=fn-ue;return q===t||Qi>=c||Qi<0||ge&&Br>=I}function ht(){var fn=fu();if(ze(fn))return vt(fn);H=ya(ht,lt(fn))}function vt(fn){return H=t,Se&&_?Ne(fn):(_=w=t,P)}function xi(){H!==t&&i_(H),ue=0,_=q=w=H=t}function Xn(){return H===t?P:vt(fu())}function Di(){var fn=fu(),Qi=ze(fn);if(_=arguments,w=this,q=fn,Qi){if(H===t)return $e(q);if(ge)return i_(H),H=ya(ht,c),Ne(q)}return H===t&&(H=ya(ht,c)),P}return Di.cancel=xi,Di.flush=Xn,Di}var PI=ut(function(l,c){return Pm(l,1,c)}),FI=ut(function(l,c,g){return Pm(l,Wi(c)||0,g)});function BI(l){return Or(l,K)}function gu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Mi(s);var g=function(){var _=arguments,w=c?c.apply(this,_):_[0],I=g.cache;if(I.has(w))return I.get(w);var P=l.apply(this,_);return g.cache=I.set(w,P)||I,P};return g.cache=new(gu.Cache||Nr),g}gu.Cache=Nr;function pu(l){if(typeof l!="function")throw new Mi(s);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function WI(l){return z_(2,l)}var VI=xx(function(l,c){c=c.length==1&&et(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ut(function(_){for(var w=-1,I=Rn(_.length,g);++w<I;)_[w]=c[w].call(this,_[w]);return yi(l,this,_)})}),rh=ut(function(l,c){var g=eo(c,Ss(rh));return Or(l,N,t,c,g)}),q_=ut(function(l,c){var g=eo(c,Ss(q_));return Or(l,V,t,c,g)}),HI=Mr(function(l,c){return Or(l,M,t,t,t,c)});function $I(l,c){if(typeof l!="function")throw new Mi(s);return c=c===t?c:rt(c),ut(l,c)}function zI(l,c){if(typeof l!="function")throw new Mi(s);return c=c==null?0:Cn(rt(c),0),ut(function(g){var _=g[c],w=oo(g,0,c);return _&&Jr(w,_),yi(l,this,w)})}function UI(l,c,g){var _=!0,w=!0;if(typeof l!="function")throw new Mi(s);return rn(g)&&(_="leading"in g?!!g.leading:_,w="trailing"in g?!!g.trailing:w),G_(l,c,{leading:_,maxWait:c,trailing:w})}function jI(l){return $_(l,1)}function KI(l,c){return rh($d(c),l)}function GI(){if(!arguments.length)return[];var l=arguments[0];return et(l)?l:[l]}function qI(l){return Pi(l,m)}function YI(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function ZI(l){return Pi(l,f|m)}function XI(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function QI(l,c){return c==null||Rm(l,c,yn(c))}function Xi(l,c){return l===c||l!==l&&c!==c}var JI=au(Td),ek=au(function(l,c){return l>=c}),Bo=Hm(function(){return arguments}())?Hm:function(l){return an(l)&&Nt.call(l,"callee")&&!Dm.call(l,"callee")},et=ee.isArray,tk=lm?Si(lm):ux;function li(l){return l!=null&&mu(l.length)&&!Pr(l)}function hn(l){return an(l)&&li(l)}function nk(l){return l===!0||l===!1||an(l)&&Yn(l)==At}var so=mE||ph,ik=um?Si(um):cx;function rk(l){return an(l)&&l.nodeType===1&&!Sa(l)}function ok(l){if(l==null)return!0;if(li(l)&&(et(l)||typeof l=="string"||typeof l.splice=="function"||so(l)||Ls(l)||Bo(l)))return!l.length;var c=Pn(l);if(c==Zt||c==Pt)return!l.size;if(wa(l))return!Od(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sk(l,c){return va(l,c)}function ak(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?va(l,c,t,g):!!_}function oh(l){if(!an(l))return!1;var c=Yn(l);return c==bt||c==st||typeof l.message=="string"&&typeof l.name=="string"&&!Sa(l)}function lk(l){return typeof l=="number"&&km(l)}function Pr(l){if(!rn(l))return!1;var c=Yn(l);return c==tt||c==tn||c==dt||c==Ln}function Y_(l){return typeof l=="number"&&l==rt(l)}function mu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Z}function rn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function an(l){return l!=null&&typeof l=="object"}var Z_=cm?Si(cm):hx;function uk(l,c){return l===c||Ad(l,c,Yd(c))}function ck(l,c,g){return g=typeof g=="function"?g:t,Ad(l,c,Yd(c),g)}function dk(l){return X_(l)&&l!=+l}function hk(l){if(Yx(l))throw new Xe(o);return $m(l)}function fk(l){return l===null}function gk(l){return l==null}function X_(l){return typeof l=="number"||an(l)&&Yn(l)==nn}function Sa(l){if(!an(l)||Yn(l)!=Tn)return!1;var c=zl(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Wl.call(g)==cE}var sh=dm?Si(dm):fx;function pk(l){return Y_(l)&&l>=-Z&&l<=Z}var Q_=hm?Si(hm):gx;function _u(l){return typeof l=="string"||!et(l)&&an(l)&&Yn(l)==pn}function Ei(l){return typeof l=="symbol"||an(l)&&Yn(l)==mi}var Ls=fm?Si(fm):px;function mk(l){return l===t}function _k(l){return an(l)&&Pn(l)==Fe}function vk(l){return an(l)&&Yn(l)==pt}var bk=au(Md),Ck=au(function(l,c){return l<=c});function J_(l){if(!l)return[];if(li(l))return _u(l)?Yi(l):ai(l);if(ca&&l[ca])return QL(l[ca]());var c=Pn(l),g=c==Zt?wd:c==Pt?Pl:Es;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===G||l===-G){var c=l<0?-1:1;return c*z}return l===l?l:0}function rt(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function ev(l){return l?Mo(rt(l),0,Y):0}function Wi(l){if(typeof l=="number")return l;if(Ei(l))return O;if(rn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=rn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=bm(l);var g=me.test(l);return g||De.test(l)?RL(l.slice(2),g?2:8):ie.test(l)?O:+l}function tv(l){return _r(l,ui(l))}function wk(l){return l?Mo(rt(l),-Z,Z):l===0?l:0}function xt(l){return l==null?"":Li(l)}var yk=ws(function(l,c){if(wa(c)||li(c)){_r(c,yn(c),l);return}for(var g in c)Nt.call(c,g)&&pa(l,g,c[g])}),nv=ws(function(l,c){_r(c,ui(c),l)}),vu=ws(function(l,c,g,_){_r(c,ui(c),l,_)}),Sk=ws(function(l,c,g,_){_r(c,yn(c),l,_)}),Lk=Mr(Dd);function Ek(l,c){var g=Cs(l);return c==null?g:Mm(g,c)}var xk=ut(function(l,c){l=Wt(l);var g=-1,_=c.length,w=_>2?c[2]:t;for(w&&Zn(c[0],c[1],w)&&(_=1);++g<_;)for(var I=c[g],P=ui(I),H=-1,q=P.length;++H<q;){var ue=P[H],ce=l[ue];(ce===t||Xi(ce,_s[ue])&&!Nt.call(l,ue))&&(l[ue]=I[ue])}return l}),Dk=ut(function(l){return l.push(t,b_),yi(iv,t,l)});function Ik(l,c){return pm(l,We(c,3),mr)}function kk(l,c){return pm(l,We(c,3),kd)}function Tk(l,c){return l==null?l:Id(l,We(c,3),ui)}function Nk(l,c){return l==null?l:Wm(l,We(c,3),ui)}function Ak(l,c){return l&&mr(l,We(c,3))}function Ok(l,c){return l&&kd(l,We(c,3))}function Mk(l){return l==null?[]:Jl(l,yn(l))}function Rk(l){return l==null?[]:Jl(l,ui(l))}function ah(l,c,g){var _=l==null?t:Ro(l,c);return _===t?g:_}function Pk(l,c){return l!=null&&y_(l,c,ox)}function lh(l,c){return l!=null&&y_(l,c,sx)}var Fk=g_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),l[c]=g},ch(ci)),Bk=g_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),Wk=ut(_a);function yn(l){return li(l)?Am(l):Od(l)}function ui(l){return li(l)?Am(l,!0):mx(l)}function Vk(l,c){var g={};return c=We(c,3),mr(l,function(_,w,I){Ar(g,c(_,w,I),_)}),g}function Hk(l,c){var g={};return c=We(c,3),mr(l,function(_,w,I){Ar(g,w,c(_,w,I))}),g}var $k=ws(function(l,c,g){eu(l,c,g)}),iv=ws(function(l,c,g,_){eu(l,c,g,_)}),zk=Mr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(I){return I=ro(I,l),_||(_=I.length>1),I}),_r(l,Gd(l),g),_&&(g=Pi(g,f|p|m,Fx));for(var w=c.length;w--;)Wd(g,c[w]);return g});function Uk(l,c){return rv(l,pu(We(c)))}var jk=Mr(function(l,c){return l==null?{}:vx(l,c)});function rv(l,c){if(l==null)return{};var g=Jt(Gd(l),function(_){return[_]});return c=We(c),Ym(l,g,function(_,w){return c(_,w[0])})}function Kk(l,c,g){c=ro(c,l);var _=-1,w=c.length;for(w||(w=1,l=t);++_<w;){var I=l==null?t:l[vr(c[_])];I===t&&(_=w,I=g),l=Pr(I)?I.call(l):I}return l}function Gk(l,c,g){return l==null?l:ba(l,c,g)}function qk(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:ba(l,c,g,_)}var ov=__(yn),sv=__(ui);function Yk(l,c,g){var _=et(l),w=_||so(l)||Ls(l);if(c=We(c,4),g==null){var I=l&&l.constructor;w?g=_?new I:[]:rn(l)?g=Pr(I)?Cs(zl(l)):{}:g={}}return(w?Oi:mr)(l,function(P,H,q){return c(g,P,H,q)}),g}function Zk(l,c){return l==null?!0:Wd(l,c)}function Xk(l,c,g){return l==null?l:e_(l,c,$d(g))}function Qk(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:e_(l,c,$d(g),_)}function Es(l){return l==null?[]:Cd(l,yn(l))}function Jk(l){return l==null?[]:Cd(l,ui(l))}function eT(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Mo(Wi(l),c,g)}function tT(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ax(l,c,g)}function nT(l,c,g){if(g&&typeof g!="boolean"&&Zn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var w=Tm();return Rn(l+w*(c-l+ML("1e-"+((w+"").length-1))),c)}return Pd(l,c)}var iT=ys(function(l,c,g){return c=c.toLowerCase(),l+(g?av(c):c)});function av(l){return uh(xt(l).toLowerCase())}function lv(l){return l=xt(l),l&&l.replace(Ze,GL).replace(LL,"")}function rT(l,c,g){l=xt(l),c=Li(c);var _=l.length;g=g===t?_:Mo(rt(g),0,_);var w=g;return g-=c.length,g>=0&&l.slice(g,w)==c}function oT(l){return l=xt(l),l&&ol.test(l)?l.replace(vn,qL):l}function sT(l){return l=xt(l),l&&ae.test(l)?l.replace(se,"\\$&"):l}var aT=ys(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),lT=ys(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),uT=d_("toLowerCase");function cT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;if(!c||_>=c)return l;var w=(c-_)/2;return su(Gl(w),g)+l+su(Kl(w),g)}function dT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;return c&&_<c?l+su(c-_,g):l}function hT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;return c&&_<c?su(c-_,g)+l:l}function fT(l,c,g){return g||c==null?c=0:c&&(c=+c),CE(xt(l).replace(pe,""),c||0)}function gT(l,c,g){return(g?Zn(l,c,g):c===t)?c=1:c=rt(c),Fd(xt(l),c)}function pT(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var mT=ys(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function _T(l,c,g){return g&&typeof g!="number"&&Zn(l,c,g)&&(c=g=t),g=g===t?Y:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!sh(c))&&(c=Li(c),!c&&gs(l))?oo(Yi(l),0,g):l.split(c,g)):[]}var vT=ys(function(l,c,g){return l+(g?" ":"")+uh(c)});function bT(l,c,g){return l=xt(l),g=g==null?0:Mo(rt(g),0,l.length),c=Li(c),l.slice(g,g+c.length)==c}function CT(l,c,g){var _=x.templateSettings;g&&Zn(l,c,g)&&(c=t),l=xt(l),c=vu({},c,_,v_);var w=vu({},c.imports,_.imports,v_),I=yn(w),P=Cd(w,I),H,q,ue=0,ce=c.interpolate||ot,ge="__p += '",Se=yd((c.escape||ot).source+"|"+ce.source+"|"+(ce===is?W:ot).source+"|"+(c.evaluate||ot).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kL+"]")+`
`;l.replace(Se,function(ze,ht,vt,xi,Xn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(Tt,YL),ht&&(H=!0,ge+=`' +
__e(`+ht+`) +
'`),Xn&&(q=!0,ge+=`';
`+Xn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+ze.length,ze}),ge+=`';
`;var $e=Nt.call(c,"variable")&&c.variable;if(!$e)ge=`with (obj) {
`+ge+`
}
`;else if(qt.test($e))throw new Xe(a);ge=(q?ge.replace(Pa,""):ge).replace($n,"$1").replace(ni,"$1;"),ge="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=cv(function(){return St(I,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,oh(lt))throw lt;return lt}function wT(l){return xt(l).toLowerCase()}function yT(l){return xt(l).toUpperCase()}function ST(l,c,g){if(l=xt(l),l&&(g||c===t))return bm(l);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Yi(c),I=Cm(_,w),P=wm(_,w)+1;return oo(_,I,P).join("")}function LT(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,Sm(l)+1);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=wm(_,Yi(c))+1;return oo(_,0,w).join("")}function ET(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Cm(_,Yi(c));return oo(_,w).join("")}function xT(l,c){var g=X,_=$;if(rn(c)){var w="separator"in c?c.separator:w;g="length"in c?rt(c.length):g,_="omission"in c?Li(c.omission):_}l=xt(l);var I=l.length;if(gs(l)){var P=Yi(l);I=P.length}if(g>=I)return l;var H=g-ps(_);if(H<1)return _;var q=P?oo(P,0,H).join(""):l.slice(0,H);if(w===t)return q+_;if(P&&(H+=q.length-H),sh(w)){if(l.slice(H).search(w)){var ue,ce=q;for(w.global||(w=yd(w.source,xt(te.exec(w))+"g")),w.lastIndex=0;ue=w.exec(ce);)var ge=ue.index;q=q.slice(0,ge===t?H:ge)}}else if(l.indexOf(Li(w),H)!=H){var Se=q.lastIndexOf(w);Se>-1&&(q=q.slice(0,Se))}return q+_}function DT(l){return l=xt(l),l&&ir.test(l)?l.replace(Gs,nE):l}var IT=ys(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),uh=d_("toUpperCase");function uv(l,c,g){return l=xt(l),c=g?t:c,c===t?XL(l)?oE(l):$L(l):l.match(c)||[]}var cv=ut(function(l,c){try{return yi(l,t,c)}catch(g){return oh(g)?g:new Xe(g)}}),kT=Mr(function(l,c){return Oi(c,function(g){g=vr(g),Ar(l,g,ih(l[g],l))}),l});function TT(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Mi(s);return[g(_[0]),_[1]]}):[],ut(function(_){for(var w=-1;++w<c;){var I=l[w];if(yi(I[0],this,_))return yi(I[1],this,_)}})}function NT(l){return nx(Pi(l,f))}function ch(l){return function(){return l}}function AT(l,c){return l==null||l!==l?c:l}var OT=f_(),MT=f_(!0);function ci(l){return l}function dh(l){return zm(typeof l=="function"?l:Pi(l,f))}function RT(l){return jm(Pi(l,f))}function PT(l,c){return Km(l,Pi(c,f))}var FT=ut(function(l,c){return function(g){return _a(g,l,c)}}),BT=ut(function(l,c){return function(g){return _a(l,g,c)}});function hh(l,c,g){var _=yn(c),w=Jl(c,_);g==null&&!(rn(c)&&(w.length||!_.length))&&(g=c,c=l,l=this,w=Jl(c,yn(c)));var I=!(rn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(w,function(H){var q=c[H];l[H]=q,P&&(l.prototype[H]=function(){var ue=this.__chain__;if(I||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:q,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return q.apply(l,Jr([this.value()],arguments))})}),l}function WT(){return xn._===this&&(xn._=dE),this}function fh(){}function VT(l){return l=rt(l),ut(function(c){return Gm(c,l)})}var HT=Ud(Jt),$T=Ud(gm),zT=Ud(pd);function dv(l){return Xd(l)?md(vr(l)):bx(l)}function UT(l){return function(c){return l==null?t:Ro(l,c)}}var jT=p_(),KT=p_(!0);function gh(){return[]}function ph(){return!1}function GT(){return{}}function qT(){return""}function YT(){return!0}function ZT(l,c){if(l=rt(l),l<1||l>Z)return[];var g=Y,_=Rn(l,Y);c=We(c),l-=Y;for(var w=bd(_,c);++g<l;)c(g);return w}function XT(l){return et(l)?Jt(l,vr):Ei(l)?[l]:ai(N_(xt(l)))}function QT(l){var c=++uE;return xt(l)+c}var JT=ou(function(l,c){return l+c},0),eN=jd("ceil"),tN=ou(function(l,c){return l/c},1),nN=jd("floor");function iN(l){return l&&l.length?Ql(l,ci,Td):t}function rN(l,c){return l&&l.length?Ql(l,We(c,2),Td):t}function oN(l){return _m(l,ci)}function sN(l,c){return _m(l,We(c,2))}function aN(l){return l&&l.length?Ql(l,ci,Md):t}function lN(l,c){return l&&l.length?Ql(l,We(c,2),Md):t}var uN=ou(function(l,c){return l*c},1),cN=jd("round"),dN=ou(function(l,c){return l-c},0);function hN(l){return l&&l.length?vd(l,ci):0}function fN(l,c){return l&&l.length?vd(l,We(c,2)):0}return x.after=RI,x.ary=$_,x.assign=yk,x.assignIn=nv,x.assignInWith=vu,x.assignWith=Sk,x.at=Lk,x.before=z_,x.bind=ih,x.bindAll=kT,x.bindKey=U_,x.castArray=GI,x.chain=W_,x.chunk=nD,x.compact=iD,x.concat=rD,x.cond=TT,x.conforms=NT,x.constant=ch,x.countBy=hI,x.create=Ek,x.curry=j_,x.curryRight=K_,x.debounce=G_,x.defaults=xk,x.defaultsDeep=Dk,x.defer=PI,x.delay=FI,x.difference=oD,x.differenceBy=sD,x.differenceWith=aD,x.drop=lD,x.dropRight=uD,x.dropRightWhile=cD,x.dropWhile=dD,x.fill=hD,x.filter=gI,x.flatMap=_I,x.flatMapDeep=vI,x.flatMapDepth=bI,x.flatten=R_,x.flattenDeep=fD,x.flattenDepth=gD,x.flip=BI,x.flow=OT,x.flowRight=MT,x.fromPairs=pD,x.functions=Mk,x.functionsIn=Rk,x.groupBy=CI,x.initial=_D,x.intersection=vD,x.intersectionBy=bD,x.intersectionWith=CD,x.invert=Fk,x.invertBy=Bk,x.invokeMap=yI,x.iteratee=dh,x.keyBy=SI,x.keys=yn,x.keysIn=ui,x.map=hu,x.mapKeys=Vk,x.mapValues=Hk,x.matches=RT,x.matchesProperty=PT,x.memoize=gu,x.merge=$k,x.mergeWith=iv,x.method=FT,x.methodOf=BT,x.mixin=hh,x.negate=pu,x.nthArg=VT,x.omit=zk,x.omitBy=Uk,x.once=WI,x.orderBy=LI,x.over=HT,x.overArgs=VI,x.overEvery=$T,x.overSome=zT,x.partial=rh,x.partialRight=q_,x.partition=EI,x.pick=jk,x.pickBy=rv,x.property=dv,x.propertyOf=UT,x.pull=LD,x.pullAll=F_,x.pullAllBy=ED,x.pullAllWith=xD,x.pullAt=DD,x.range=jT,x.rangeRight=KT,x.rearg=HI,x.reject=II,x.remove=ID,x.rest=$I,x.reverse=th,x.sampleSize=TI,x.set=Gk,x.setWith=qk,x.shuffle=NI,x.slice=kD,x.sortBy=MI,x.sortedUniq=PD,x.sortedUniqBy=FD,x.split=_T,x.spread=zI,x.tail=BD,x.take=WD,x.takeRight=VD,x.takeRightWhile=HD,x.takeWhile=$D,x.tap=iI,x.throttle=UI,x.thru=du,x.toArray=J_,x.toPairs=ov,x.toPairsIn=sv,x.toPath=XT,x.toPlainObject=tv,x.transform=Yk,x.unary=jI,x.union=zD,x.unionBy=UD,x.unionWith=jD,x.uniq=KD,x.uniqBy=GD,x.uniqWith=qD,x.unset=Zk,x.unzip=nh,x.unzipWith=B_,x.update=Xk,x.updateWith=Qk,x.values=Es,x.valuesIn=Jk,x.without=YD,x.words=uv,x.wrap=KI,x.xor=ZD,x.xorBy=XD,x.xorWith=QD,x.zip=JD,x.zipObject=eI,x.zipObjectDeep=tI,x.zipWith=nI,x.entries=ov,x.entriesIn=sv,x.extend=nv,x.extendWith=vu,hh(x,x),x.add=JT,x.attempt=cv,x.camelCase=iT,x.capitalize=av,x.ceil=eN,x.clamp=eT,x.clone=qI,x.cloneDeep=ZI,x.cloneDeepWith=XI,x.cloneWith=YI,x.conformsTo=QI,x.deburr=lv,x.defaultTo=AT,x.divide=tN,x.endsWith=rT,x.eq=Xi,x.escape=oT,x.escapeRegExp=sT,x.every=fI,x.find=pI,x.findIndex=O_,x.findKey=Ik,x.findLast=mI,x.findLastIndex=M_,x.findLastKey=kk,x.floor=nN,x.forEach=V_,x.forEachRight=H_,x.forIn=Tk,x.forInRight=Nk,x.forOwn=Ak,x.forOwnRight=Ok,x.get=ah,x.gt=JI,x.gte=ek,x.has=Pk,x.hasIn=lh,x.head=P_,x.identity=ci,x.includes=wI,x.indexOf=mD,x.inRange=tT,x.invoke=Wk,x.isArguments=Bo,x.isArray=et,x.isArrayBuffer=tk,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=nk,x.isBuffer=so,x.isDate=ik,x.isElement=rk,x.isEmpty=ok,x.isEqual=sk,x.isEqualWith=ak,x.isError=oh,x.isFinite=lk,x.isFunction=Pr,x.isInteger=Y_,x.isLength=mu,x.isMap=Z_,x.isMatch=uk,x.isMatchWith=ck,x.isNaN=dk,x.isNative=hk,x.isNil=gk,x.isNull=fk,x.isNumber=X_,x.isObject=rn,x.isObjectLike=an,x.isPlainObject=Sa,x.isRegExp=sh,x.isSafeInteger=pk,x.isSet=Q_,x.isString=_u,x.isSymbol=Ei,x.isTypedArray=Ls,x.isUndefined=mk,x.isWeakMap=_k,x.isWeakSet=vk,x.join=wD,x.kebabCase=aT,x.last=Bi,x.lastIndexOf=yD,x.lowerCase=lT,x.lowerFirst=uT,x.lt=bk,x.lte=Ck,x.max=iN,x.maxBy=rN,x.mean=oN,x.meanBy=sN,x.min=aN,x.minBy=lN,x.stubArray=gh,x.stubFalse=ph,x.stubObject=GT,x.stubString=qT,x.stubTrue=YT,x.multiply=uN,x.nth=SD,x.noConflict=WT,x.noop=fh,x.now=fu,x.pad=cT,x.padEnd=dT,x.padStart=hT,x.parseInt=fT,x.random=nT,x.reduce=xI,x.reduceRight=DI,x.repeat=gT,x.replace=pT,x.result=Kk,x.round=cN,x.runInContext=j,x.sample=kI,x.size=AI,x.snakeCase=mT,x.some=OI,x.sortedIndex=TD,x.sortedIndexBy=ND,x.sortedIndexOf=AD,x.sortedLastIndex=OD,x.sortedLastIndexBy=MD,x.sortedLastIndexOf=RD,x.startCase=vT,x.startsWith=bT,x.subtract=dN,x.sum=hN,x.sumBy=fN,x.template=CT,x.times=ZT,x.toFinite=Fr,x.toInteger=rt,x.toLength=ev,x.toLower=wT,x.toNumber=Wi,x.toSafeInteger=wk,x.toString=xt,x.toUpper=yT,x.trim=ST,x.trimEnd=LT,x.trimStart=ET,x.truncate=xT,x.unescape=DT,x.uniqueId=QT,x.upperCase=IT,x.upperFirst=uh,x.each=V_,x.eachRight=H_,x.first=P_,hh(x,function(){var l={};return mr(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(rt(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=Rn(g,_.__takeCount__):_.__views__.push({size:Rn(g,Y),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==F||g==U;mt.prototype[l]=function(w){var I=this.clone();return I.__iteratees__.push({iteratee:We(w,3),type:g}),I.__filtered__=I.__filtered__||_,I}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ut(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return _a(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(pu(We(l)))},mt.prototype.slice=function(l,c){l=rt(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=rt(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(Y)},mr(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),w=x[_?"take"+(c=="last"?"Right":""):c],I=_||/^find/.test(c);w&&(x.prototype[c]=function(){var P=this.__wrapped__,H=_?[1]:arguments,q=P instanceof mt,ue=H[0],ce=q||et(P),ge=function(ht){var vt=w.apply(x,Jr([ht],H));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(q=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,$e=I&&!Se,lt=q&&!Ne;if(!I&&ce){P=lt?P:new mt(this);var ze=l.apply(P,H);return ze.__actions__.push({func:du,args:[ge],thisArg:t}),new Ri(ze,Se)}return $e&&lt?l.apply(this,H):(ze=this.thru(ge),$e?_?ze.value()[0]:ze.value():ze)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Fl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var I=this.value();return c.apply(et(I)?I:[],w)}return this[g](function(P){return c.apply(et(P)?P:[],w)})}}),mr(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bs,_)||(bs[_]=[]),bs[_].push({name:c,func:g})}}),bs[ru(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=DE,mt.prototype.reverse=IE,mt.prototype.value=kE,x.prototype.at=rI,x.prototype.chain=oI,x.prototype.commit=sI,x.prototype.next=aI,x.prototype.plant=uI,x.prototype.reverse=cI,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=dI,x.prototype.first=x.prototype.head,ca&&(x.prototype[ca]=lI),x},ms=sE();To?((To.exports=ms)._=ms,dd._=ms):xn._=ms}).call(ea)})(sF,sF.exports);var wr=sF.exports,Jw;(function(i){i.Update="Component.Update"})(Jw||(Jw={}));class tl extends TS{constructor(){super(),this._event=new U5}setState(e,t){const n=Object.assign(this.state,e);this.render(n),t==null||t(this.state,n)}render(e){this._event.emit(Jw.Update,this.state,e)}onUpdateState(e){this._event.subscribe(Jw.Update,e)}removeOnUpdateState(e){this._event.unsubscribe(Jw.Update,e)}forceUpdate(){this.setState(wr.cloneDeep(this.state))}getState(){return this.state}}function ZO(i,e){return he.Children.map(i,t=>he.isValidElement(t)?he.cloneElement(t,e):t)}const Wn={info(...i){},error(...i){console.error(...i)},warn(...i){console.warn(...i)}};function nl(i,e,t){return class extends he.Component{constructor(r){super(r),this._isMounted=!1,this.update=()=>{this._isMounted&&this.setState({lastUpdated:Date.now()})},this.onChange=this.onChange.bind(this),this.state={lastUpdated:Date.now()}}componentDidMount(){this._isMounted=!0,this.handleService(r=>{r.onUpdateState(this.onChange)})}componentWillUnmount(){this._isMounted=!1,this.handleService(r=>{r.removeOnUpdateState(this.onChange)})}onChange(r,o){Wn.info(r,o,Ue._registry),this.update()}getServiceState(){const r={};return this.handleService((o,s)=>{s?Object.assign(r,{[s]:Object.assign({},o.getState())}):Object.assign(r,Object.assign({},o.getState()))}),r}handleService(r){if(this.isValidService(i))r(i);else for(const o in i)if(o){const s=i[o];this.isValidService(s)&&r(s,o)}}getControllerProperties(){const r={};return t&&this.handleController((o,s)=>{s?Object.assign(r,{[s]:this.getObjectPublicProperties(o)}):Object.assign(r,this.getObjectPublicProperties(o))}),r}handleController(r){if(this.isValidController(t))r(t);else for(const o in t)if(o){const s=t[o];this.isValidController(s)&&r(s,o)}}render(){return re.createElement(e,Object.assign({},this.state,this.props,this.getServiceState(),this.getControllerProperties()))}isValidService(r){return typeof r.onUpdateState=="function"}isValidController(r){return typeof r.initView=="function"}getObjectPublicProperties(r){const o=Object.keys(r),s={};return o.forEach(a=>{!a.endsWith("Service")&&!a.endsWith("Controller")&&!a.startsWith("_")&&(s[a]=r[a])}),s}}}class aa extends TS{}const dbe=Object.freeze(Object.defineProperty({__proto__:null,Component:tl,get ComponentEvents(){return Jw},Controller:aa,cloneReactChildren:ZO,connect:nl},Symbol.toStringTag,{value:"Module"}));var W0={};Object.defineProperty(W0,"__esModule",{value:!0});function PX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function hbe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PX(Object(t),!0).forEach(function(n){fbe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):PX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function PV(i){"@babel/helpers - typeof";return PV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PV(i)}function Zse(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function FX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function Xse(i,e,t){return e&&FX(i.prototype,e),t&&FX(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function fbe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function BX(i,e){return gbe(i)||pbe(i,e)||Qse(i,e)||mbe()}function gbe(i){if(Array.isArray(i))return i}function pbe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,o=!1,s,a;try{for(t=t.call(i);!(r=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){o=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function Qse(i,e){if(i){if(typeof i=="string")return WX(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WX(i,e)}}function WX(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function mbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _be(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Qse(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}}}var dw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ea<"u"?ea:typeof self<"u"?self:{};function Jse(i,e){return e={exports:{}},i(e,e.exports),e.exports}var X7=Jse(function(i,e){(function(){var t,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,L=1,S=2,y=4,E=8,A=16,N=32,V=64,R=128,M=256,K=512,X=30,$="...",D=800,T=16,F=1,B=2,U=3,G=1/0,Z=9007199254740991,z=17976931348623157e292,O=0/0,Y=4294967295,fe=Y-1,ne=Y>>>1,we=[["ary",R],["bind",L],["bindKey",S],["curry",E],["curryRight",A],["flip",K],["partial",N],["partialRight",V],["rearg",M]],Ie="[object Arguments]",je="[object Array]",dt="[object AsyncFunction]",At="[object Boolean]",Me="[object Date]",st="[object DOMException]",bt="[object Error]",tt="[object Function]",tn="[object GeneratorFunction]",Zt="[object Map]",nn="[object Number]",On="[object Null]",Tn="[object Object]",ei="[object Promise]",Ln="[object Proxy]",Mn="[object RegExp]",Pt="[object Set]",pn="[object String]",mi="[object Symbol]",Te="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",Ct="[object DataView]",wi="[object Float32Array]",Vt="[object Float64Array]",kt="[object Int8Array]",Kt="[object Int16Array]",Gt="[object Int32Array]",Bt="[object Uint8Array]",fr="[object Uint8ClampedArray]",ti="[object Uint16Array]",Ve="[object Uint32Array]",Pa=/\b__p \+= '';/g,$n=/\b(__p \+=) '' \+/g,ni=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,ir=RegExp(Gs.source),ol=RegExp(vn.source),Ki=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,is=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(se.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,k=/\\(\\)?/g,W=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,De=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,Tt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",zn=Ot+wt+si,rr="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Fa="\\xac\\xb1\\xd7\\xf7",sl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Og="\\u2000-\\u206f",fL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jp="A-Z\\xc0-\\xd6\\xd8-\\xde",Kp="\\ufe0e\\ufe0f",Gp=Fa+sl+Og+fL,sd="['’]",gL="["+Ft+"]",qp="["+Gp+"]",Ol="["+zn+"]",Yp="\\d+",pL="["+rr+"]",Zp="["+$i+"]",Xp="[^"+Ft+Gp+Yp+rr+$i+jp+"]",ad="\\ud83c[\\udffb-\\udfff]",mL="(?:"+Ol+"|"+ad+")",Qp="[^"+Ft+"]",ld="(?:\\ud83c[\\udde6-\\uddff]){2}",ud="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+jp+"]",Jp="\\u200d",em="(?:"+Zp+"|"+Xp+")",_L="(?:"+hs+"|"+Xp+")",tm="(?:"+sd+"(?:d|ll|m|re|s|t|ve))?",nm="(?:"+sd+"(?:D|LL|M|RE|S|T|VE))?",im=mL+"?",rm="["+Kp+"]?",vL="(?:"+Jp+"(?:"+[Qp,ld,ud].join("|")+")"+rm+im+")*",bL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",om=rm+im+vL,wL="(?:"+[pL,ld,ud].join("|")+")"+om,yL="(?:"+[Qp+Ol+"?",Ol,ld,ud,gL].join("|")+")",SL=RegExp(sd,"g"),LL=RegExp(Ol,"g"),cd=RegExp(ad+"(?="+ad+")|"+yL+om,"g"),EL=RegExp([hs+"?"+Zp+"+"+tm+"(?="+[qp,hs,"$"].join("|")+")",_L+"+"+nm+"(?="+[qp,hs+em,"$"].join("|")+")",hs+"?"+em+"+"+tm,hs+"+"+nm,CL,bL,Yp,wL].join("|"),"g"),xL=RegExp("["+Jp+Ft+zn+Kp+"]"),DL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,IL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kL=-1,jt={};jt[wi]=jt[Vt]=jt[kt]=jt[Kt]=jt[Gt]=jt[Bt]=jt[fr]=jt[ti]=jt[Ve]=!0,jt[Ie]=jt[je]=jt[at]=jt[At]=jt[Ct]=jt[Me]=jt[bt]=jt[tt]=jt[Zt]=jt[nn]=jt[Tn]=jt[Mn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[Ie]=$t[je]=$t[at]=$t[Ct]=$t[At]=$t[Me]=$t[wi]=$t[Vt]=$t[kt]=$t[Kt]=$t[Gt]=$t[Zt]=$t[nn]=$t[Tn]=$t[Mn]=$t[Pt]=$t[pn]=$t[mi]=$t[Bt]=$t[fr]=$t[ti]=$t[Ve]=!0,$t[bt]=$t[tt]=$t[Fe]=!1;var TL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},NL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OL={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ML=parseFloat,RL=parseInt,sm=typeof dw=="object"&&dw&&dw.Object===Object&&dw,PL=typeof self=="object"&&self&&self.Object===Object&&self,xn=sm||PL||Function("return this")(),dd=e&&!e.nodeType&&e,To=dd&&!0&&i&&!i.nodeType&&i,am=To&&To.exports===dd,hd=am&&sm.process,Ai=function(){try{var j=To&&To.require&&To.require("util").types;return j||hd&&hd.binding&&hd.binding("util")}catch{}}(),lm=Ai&&Ai.isArrayBuffer,um=Ai&&Ai.isDate,cm=Ai&&Ai.isMap,dm=Ai&&Ai.isRegExp,hm=Ai&&Ai.isSet,fm=Ai&&Ai.isTypedArray;function yi(j,oe,ee){switch(ee.length){case 0:return j.call(oe);case 1:return j.call(oe,ee[0]);case 2:return j.call(oe,ee[0],ee[1]);case 3:return j.call(oe,ee[0],ee[1],ee[2])}return j.apply(oe,ee)}function FL(j,oe,ee,xe){for(var Xe=-1,St=j==null?0:j.length;++Xe<St;){var bn=j[Xe];oe(xe,bn,ee(bn),j)}return xe}function Oi(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe&&oe(j[ee],ee,j)!==!1;);return j}function BL(j,oe){for(var ee=j==null?0:j.length;ee--&&oe(j[ee],ee,j)!==!1;);return j}function gm(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe;)if(!oe(j[ee],ee,j))return!1;return!0}function Qr(j,oe){for(var ee=-1,xe=j==null?0:j.length,Xe=0,St=[];++ee<xe;){var bn=j[ee];oe(bn,ee,j)&&(St[Xe++]=bn)}return St}function Ml(j,oe){var ee=j==null?0:j.length;return!!ee&&fs(j,oe,0)>-1}function fd(j,oe,ee){for(var xe=-1,Xe=j==null?0:j.length;++xe<Xe;)if(ee(oe,j[xe]))return!0;return!1}function Jt(j,oe){for(var ee=-1,xe=j==null?0:j.length,Xe=Array(xe);++ee<xe;)Xe[ee]=oe(j[ee],ee,j);return Xe}function Jr(j,oe){for(var ee=-1,xe=oe.length,Xe=j.length;++ee<xe;)j[Xe+ee]=oe[ee];return j}function gd(j,oe,ee,xe){var Xe=-1,St=j==null?0:j.length;for(xe&&St&&(ee=j[++Xe]);++Xe<St;)ee=oe(ee,j[Xe],Xe,j);return ee}function WL(j,oe,ee,xe){var Xe=j==null?0:j.length;for(xe&&Xe&&(ee=j[--Xe]);Xe--;)ee=oe(ee,j[Xe],Xe,j);return ee}function pd(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe;)if(oe(j[ee],ee,j))return!0;return!1}var VL=md("length");function HL(j){return j.split("")}function $L(j){return j.match(ct)||[]}function pm(j,oe,ee){var xe;return ee(j,function(Xe,St,bn){if(oe(Xe,St,bn))return xe=St,!1}),xe}function Rl(j,oe,ee,xe){for(var Xe=j.length,St=ee+(xe?1:-1);xe?St--:++St<Xe;)if(oe(j[St],St,j))return St;return-1}function fs(j,oe,ee){return oe===oe?eE(j,oe,ee):Rl(j,mm,ee)}function zL(j,oe,ee,xe){for(var Xe=ee-1,St=j.length;++Xe<St;)if(xe(j[Xe],oe))return Xe;return-1}function mm(j){return j!==j}function _m(j,oe){var ee=j==null?0:j.length;return ee?vd(j,oe)/ee:O}function md(j){return function(oe){return oe==null?t:oe[j]}}function _d(j){return function(oe){return j==null?t:j[oe]}}function vm(j,oe,ee,xe,Xe){return Xe(j,function(St,bn,Wt){ee=xe?(xe=!1,St):oe(ee,St,bn,Wt)}),ee}function UL(j,oe){var ee=j.length;for(j.sort(oe);ee--;)j[ee]=j[ee].value;return j}function vd(j,oe){for(var ee,xe=-1,Xe=j.length;++xe<Xe;){var St=oe(j[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function bd(j,oe){for(var ee=-1,xe=Array(j);++ee<j;)xe[ee]=oe(ee);return xe}function jL(j,oe){return Jt(oe,function(ee){return[ee,j[ee]]})}function bm(j){return j&&j.slice(0,Sm(j)+1).replace(pe,"")}function Si(j){return function(oe){return j(oe)}}function Cd(j,oe){return Jt(oe,function(ee){return j[ee]})}function ua(j,oe){return j.has(oe)}function Cm(j,oe){for(var ee=-1,xe=j.length;++ee<xe&&fs(oe,j[ee],0)>-1;);return ee}function wm(j,oe){for(var ee=j.length;ee--&&fs(oe,j[ee],0)>-1;);return ee}function KL(j,oe){for(var ee=j.length,xe=0;ee--;)j[ee]===oe&&++xe;return xe}var GL=_d(TL),qL=_d(NL);function YL(j){return"\\"+OL[j]}function ZL(j,oe){return j==null?t:j[oe]}function gs(j){return xL.test(j)}function XL(j){return DL.test(j)}function QL(j){for(var oe,ee=[];!(oe=j.next()).done;)ee.push(oe.value);return ee}function wd(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe,Xe){ee[++oe]=[Xe,xe]}),ee}function ym(j,oe){return function(ee){return j(oe(ee))}}function eo(j,oe){for(var ee=-1,xe=j.length,Xe=0,St=[];++ee<xe;){var bn=j[ee];(bn===oe||bn===h)&&(j[ee]=h,St[Xe++]=ee)}return St}function Pl(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe){ee[++oe]=xe}),ee}function JL(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe){ee[++oe]=[xe,xe]}),ee}function eE(j,oe,ee){for(var xe=ee-1,Xe=j.length;++xe<Xe;)if(j[xe]===oe)return xe;return-1}function tE(j,oe,ee){for(var xe=ee+1;xe--;)if(j[xe]===oe)return xe;return xe}function ps(j){return gs(j)?iE(j):VL(j)}function Yi(j){return gs(j)?rE(j):HL(j)}function Sm(j){for(var oe=j.length;oe--&&J.test(j.charAt(oe)););return oe}var nE=_d(AL);function iE(j){for(var oe=cd.lastIndex=0;cd.test(j);)++oe;return oe}function rE(j){return j.match(cd)||[]}function oE(j){return j.match(EL)||[]}var sE=function j(oe){oe=oe==null?xn:ms.defaults(xn.Object(),oe,ms.pick(xn,IL));var ee=oe.Array,xe=oe.Date,Xe=oe.Error,St=oe.Function,bn=oe.Math,Wt=oe.Object,yd=oe.RegExp,aE=oe.String,Mi=oe.TypeError,Fl=ee.prototype,lE=St.prototype,_s=Wt.prototype,Bl=oe["__core-js_shared__"],Wl=lE.toString,Nt=_s.hasOwnProperty,uE=0,Lm=function(){var l=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vl=_s.toString,cE=Wl.call(Wt),dE=xn._,hE=yd("^"+Wl.call(Nt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=am?oe.Buffer:t,to=oe.Symbol,$l=oe.Uint8Array,Em=Hl?Hl.allocUnsafe:t,zl=ym(Wt.getPrototypeOf,Wt),xm=Wt.create,Dm=_s.propertyIsEnumerable,Ul=Fl.splice,Im=to?to.isConcatSpreadable:t,ca=to?to.iterator:t,No=to?to.toStringTag:t,jl=function(){try{var l=Po(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),fE=oe.clearTimeout!==xn.clearTimeout&&oe.clearTimeout,gE=xe&&xe.now!==xn.Date.now&&xe.now,pE=oe.setTimeout!==xn.setTimeout&&oe.setTimeout,Kl=bn.ceil,Gl=bn.floor,Sd=Wt.getOwnPropertySymbols,mE=Hl?Hl.isBuffer:t,km=oe.isFinite,_E=Fl.join,vE=ym(Wt.keys,Wt),Cn=bn.max,Rn=bn.min,bE=xe.now,CE=oe.parseInt,Tm=bn.random,wE=Fl.reverse,Ld=Po(oe,"DataView"),da=Po(oe,"Map"),Ed=Po(oe,"Promise"),vs=Po(oe,"Set"),ha=Po(oe,"WeakMap"),fa=Po(Wt,"create"),ql=ha&&new ha,bs={},yE=Fo(Ld),SE=Fo(da),LE=Fo(Ed),EE=Fo(vs),xE=Fo(ha),Yl=to?to.prototype:t,ga=Yl?Yl.valueOf:t,Nm=Yl?Yl.toString:t;function x(l){if(an(l)&&!et(l)&&!(l instanceof mt)){if(l instanceof Ri)return l;if(Nt.call(l,"__wrapped__"))return A_(l)}return new Ri(l)}var Cs=function(){function l(){}return function(c){if(!rn(c))return{};if(xm)return xm(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Zl(){}function Ri(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:Ki,evaluate:Ye,interpolate:is,variable:"",imports:{_:x}},x.prototype=Zl.prototype,x.prototype.constructor=x,Ri.prototype=Cs(Zl.prototype),Ri.prototype.constructor=Ri;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function DE(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function IE(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function kE(){var l=this.__wrapped__.value(),c=this.__dir__,g=et(l),_=c<0,w=g?l.length:0,I=Hx(0,w,this.__views__),P=I.start,H=I.end,q=H-P,ue=_?H:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=Rn(q,this.__takeCount__);if(!g||!_&&w==q&&Ne==q)return t_(l,this.__actions__);var $e=[];e:for(;q--&&Se<Ne;){ue+=c;for(var lt=-1,ze=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Xn=vt(ze);if(xi==B)ze=Xn;else if(!Xn){if(xi==F)continue e;break e}}$e[Se++]=ze}return $e}mt.prototype=Cs(Zl.prototype),mt.prototype.constructor=mt;function Ao(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function TE(){this.__data__=fa?fa(null):{},this.size=0}function NE(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function AE(l){var c=this.__data__;if(fa){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function OE(l){var c=this.__data__;return fa?c[l]!==t:Nt.call(c,l)}function ME(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=fa&&c===t?u:c,this}Ao.prototype.clear=TE,Ao.prototype.delete=NE,Ao.prototype.get=AE,Ao.prototype.has=OE,Ao.prototype.set=ME;function Tr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function RE(){this.__data__=[],this.size=0}function PE(l){var c=this.__data__,g=Xl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():Ul.call(c,g,1),--this.size,!0}function FE(l){var c=this.__data__,g=Xl(c,l);return g<0?t:c[g][1]}function BE(l){return Xl(this.__data__,l)>-1}function WE(l,c){var g=this.__data__,_=Xl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}Tr.prototype.clear=RE,Tr.prototype.delete=PE,Tr.prototype.get=FE,Tr.prototype.has=BE,Tr.prototype.set=WE;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function VE(){this.size=0,this.__data__={hash:new Ao,map:new(da||Tr),string:new Ao}}function HE(l){var c=uu(this,l).delete(l);return this.size-=c?1:0,c}function $E(l){return uu(this,l).get(l)}function zE(l){return uu(this,l).has(l)}function UE(l,c){var g=uu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=VE,Nr.prototype.delete=HE,Nr.prototype.get=$E,Nr.prototype.has=zE,Nr.prototype.set=UE;function Oo(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function jE(l){return this.__data__.set(l,u),this}function KE(l){return this.__data__.has(l)}Oo.prototype.add=Oo.prototype.push=jE,Oo.prototype.has=KE;function Zi(l){var c=this.__data__=new Tr(l);this.size=c.size}function GE(){this.__data__=new Tr,this.size=0}function qE(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function YE(l){return this.__data__.get(l)}function ZE(l){return this.__data__.has(l)}function XE(l,c){var g=this.__data__;if(g instanceof Tr){var _=g.__data__;if(!da||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Zi.prototype.clear=GE,Zi.prototype.delete=qE,Zi.prototype.get=YE,Zi.prototype.has=ZE,Zi.prototype.set=XE;function Am(l,c){var g=et(l),_=!g&&Bo(l),w=!g&&!_&&so(l),I=!g&&!_&&!w&&Ls(l),P=g||_||w||I,H=P?bd(l.length,aE):[],q=H.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||w&&(ue=="offset"||ue=="parent")||I&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Rr(ue,q)))&&H.push(ue);return H}function Om(l){var c=l.length;return c?l[Pd(0,c-1)]:t}function QE(l,c){return cu(ai(l),Mo(c,0,l.length))}function JE(l){return cu(ai(l))}function xd(l,c,g){(g!==t&&!Xi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function pa(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Xi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Xl(l,c){for(var g=l.length;g--;)if(Xi(l[g][0],c))return g;return-1}function ex(l,c,g,_){return no(l,function(w,I,P){c(_,w,g(w),P)}),_}function Mm(l,c){return l&&_r(c,yn(c),l)}function tx(l,c){return l&&_r(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&jl?jl(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function Dd(l,c){for(var g=-1,_=c.length,w=ee(_),I=l==null;++g<_;)w[g]=I?t:ah(l,c[g]);return w}function Mo(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,w,I){var P,H=c&f,q=c&p,ue=c&m;if(g&&(P=w?g(l,_,w,I):g(l)),P!==t)return P;if(!rn(l))return l;var ce=et(l);if(ce){if(P=zx(l),!H)return ai(l,P)}else{var ge=Pn(l),Se=ge==tt||ge==tn;if(so(l))return r_(l,H);if(ge==Tn||ge==Ie||Se&&!w){if(P=q||Se?{}:S_(l),!H)return q?Ax(l,tx(P,l)):Nx(l,Mm(P,l))}else{if(!$t[ge])return w?l:{};P=Ux(l,ge,H)}}I||(I=new Zi);var Ne=I.get(l);if(Ne)return Ne;I.set(l,P),Q_(l)?l.forEach(function(ze){P.add(Pi(ze,c,g,ze,l,I))}):Z_(l)&&l.forEach(function(ze,ht){P.set(ht,Pi(ze,c,g,ht,l,I))});var $e=ue?q?Gd:Kd:q?ui:yn,lt=ce?t:$e(l);return Oi(lt||l,function(ze,ht){lt&&(ht=ze,ze=l[ht]),pa(P,ht,Pi(ze,c,g,ht,l,I))}),P}function nx(l){var c=yn(l);return function(g){return Rm(g,l,c)}}function Rm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var w=g[_],I=c[w],P=l[w];if(P===t&&!(w in l)||!I(P))return!1}return!0}function Pm(l,c,g){if(typeof l!="function")throw new Mi(s);return ya(function(){l.apply(t,g)},c)}function ma(l,c,g,_){var w=-1,I=Ml,P=!0,H=l.length,q=[],ue=c.length;if(!H)return q;g&&(c=Jt(c,Si(g))),_?(I=fd,P=!1):c.length>=r&&(I=ua,P=!1,c=new Oo(c));e:for(;++w<H;){var ce=l[w],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;q.push(ce)}else I(c,ge,_)||q.push(ce)}return q}var no=u_(mr),Fm=u_(kd,!0);function ix(l,c){var g=!0;return no(l,function(_,w,I){return g=!!c(_,w,I),g}),g}function Ql(l,c,g){for(var _=-1,w=l.length;++_<w;){var I=l[_],P=c(I);if(P!=null&&(H===t?P===P&&!Ei(P):g(P,H)))var H=P,q=I}return q}function rx(l,c,g,_){var w=l.length;for(g=rt(g),g<0&&(g=-g>w?0:w+g),_=_===t||_>w?w:rt(_),_<0&&(_+=w),_=g>_?0:ev(_);g<_;)l[g++]=c;return l}function Bm(l,c){var g=[];return no(l,function(_,w,I){c(_,w,I)&&g.push(_)}),g}function Dn(l,c,g,_,w){var I=-1,P=l.length;for(g||(g=Kx),w||(w=[]);++I<P;){var H=l[I];c>0&&g(H)?c>1?Dn(H,c-1,g,_,w):Jr(w,H):_||(w[w.length]=H)}return w}var Id=c_(),Wm=c_(!0);function mr(l,c){return l&&Id(l,c,yn)}function kd(l,c){return l&&Wm(l,c,yn)}function Jl(l,c){return Qr(c,function(g){return Pr(l[g])})}function Ro(l,c){c=ro(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[vr(c[g++])];return g&&g==_?l:t}function Vm(l,c,g){var _=c(l);return et(l)?_:Jr(_,g(l))}function Yn(l){return l==null?l===t?Te:On:No&&No in Wt(l)?Vx(l):Jx(l)}function Td(l,c){return l>c}function ox(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ax(l,c,g){return l>=Rn(c,g)&&l<Cn(c,g)}function Nd(l,c,g){for(var _=g?fd:Ml,w=l[0].length,I=l.length,P=I,H=ee(I),q=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),q=Rn(ce.length,q),H[P]=!g&&(c||w>=120&&ce.length>=120)?new Oo(P&&ce):t}ce=l[0];var ge=-1,Se=H[0];e:for(;++ge<w&&ue.length<q;){var Ne=ce[ge],$e=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ua(Se,$e):_(ue,$e,g))){for(P=I;--P;){var lt=H[P];if(!(lt?ua(lt,$e):_(l[P],$e,g)))continue e}Se&&Se.push($e),ue.push(Ne)}}return ue}function lx(l,c,g,_){return mr(l,function(w,I,P){c(_,g(w),I,P)}),_}function _a(l,c,g){c=ro(c,l),l=D_(l,c);var _=l==null?l:l[vr(Bi(c))];return _==null?t:yi(_,l,g)}function Hm(l){return an(l)&&Yn(l)==Ie}function ux(l){return an(l)&&Yn(l)==at}function cx(l){return an(l)&&Yn(l)==Me}function va(l,c,g,_,w){return l===c?!0:l==null||c==null||!an(l)&&!an(c)?l!==l&&c!==c:dx(l,c,g,_,va,w)}function dx(l,c,g,_,w,I){var P=et(l),H=et(c),q=P?je:Pn(l),ue=H?je:Pn(c);q=q==Ie?Tn:q,ue=ue==Ie?Tn:ue;var ce=q==Tn,ge=ue==Tn,Se=q==ue;if(Se&&so(l)){if(!so(c))return!1;P=!0,ce=!1}if(Se&&!ce)return I||(I=new Zi),P||Ls(l)?C_(l,c,g,_,w,I):Bx(l,c,q,g,_,w,I);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),$e=ge&&Nt.call(c,"__wrapped__");if(Ne||$e){var lt=Ne?l.value():l,ze=$e?c.value():c;return I||(I=new Zi),w(lt,ze,g,_,I)}}return Se?(I||(I=new Zi),Wx(l,c,g,_,w,I)):!1}function hx(l){return an(l)&&Pn(l)==Zt}function Ad(l,c,g,_){var w=g.length,I=w,P=!_;if(l==null)return!I;for(l=Wt(l);w--;){var H=g[w];if(P&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++w<I;){H=g[w];var q=H[0],ue=l[q],ce=H[1];if(P&&H[2]){if(ue===t&&!(q in l))return!1}else{var ge=new Zi;if(_)var Se=_(ue,ce,q,l,c,ge);if(!(Se===t?va(ce,ue,v|b,_,ge):Se))return!1}}return!0}function $m(l){if(!rn(l)||qx(l))return!1;var c=Pr(l)?hE:le;return c.test(Fo(l))}function fx(l){return an(l)&&Yn(l)==Mn}function gx(l){return an(l)&&Pn(l)==Pt}function px(l){return an(l)&&mu(l.length)&&!!jt[Yn(l)]}function zm(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?et(l)?Km(l[0],l[1]):jm(l):dv(l)}function Od(l){if(!wa(l))return vE(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function mx(l){if(!rn(l))return Qx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Md(l,c){return l<c}function Um(l,c){var g=-1,_=li(l)?ee(l.length):[];return no(l,function(w,I,P){_[++g]=c(w,I,P)}),_}function jm(l){var c=Yd(l);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(g){return g===l||Ad(g,l,c)}}function Km(l,c){return Xd(l)&&L_(c)?E_(vr(l),c):function(g){var _=ah(g,l);return _===t&&_===c?lh(g,l):va(c,_,v|b)}}function eu(l,c,g,_,w){l!==c&&Id(c,function(I,P){if(w||(w=new Zi),rn(I))_x(l,c,P,g,eu,_,w);else{var H=_?_(Jd(l,P),I,P+"",l,c,w):t;H===t&&(H=I),xd(l,P,H)}},ui)}function _x(l,c,g,_,w,I,P){var H=Jd(l,g),q=Jd(c,g),ue=P.get(q);if(ue){xd(l,g,ue);return}var ce=I?I(H,q,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=et(q),Ne=!Se&&so(q),$e=!Se&&!Ne&&Ls(q);ce=q,Se||Ne||$e?et(H)?ce=H:hn(H)?ce=ai(H):Ne?(ge=!1,ce=r_(q,!0)):$e?(ge=!1,ce=o_(q,!0)):ce=[]:Sa(q)||Bo(q)?(ce=H,Bo(H)?ce=tv(H):(!rn(H)||Pr(H))&&(ce=S_(q))):ge=!1}ge&&(P.set(q,ce),w(ce,q,_,I,P),P.delete(q)),xd(l,g,ce)}function Gm(l,c){var g=l.length;if(g)return c+=c<0?g:0,Rr(c,g)?l[c]:t}function qm(l,c,g){c.length?c=Jt(c,function(I){return et(I)?function(P){return Ro(P,I.length===1?I[0]:I)}:I}):c=[ci];var _=-1;c=Jt(c,Si(We()));var w=Um(l,function(I,P,H){var q=Jt(c,function(ue){return ue(I)});return{criteria:q,index:++_,value:I}});return UL(w,function(I,P){return Tx(I,P,g)})}function vx(l,c){return Ym(l,c,function(g,_){return lh(l,_)})}function Ym(l,c,g){for(var _=-1,w=c.length,I={};++_<w;){var P=c[_],H=Ro(l,P);g(H,P)&&ba(I,ro(P,l),H)}return I}function bx(l){return function(c){return Ro(c,l)}}function Rd(l,c,g,_){var w=_?zL:fs,I=-1,P=c.length,H=l;for(l===c&&(c=ai(c)),g&&(H=Jt(l,Si(g)));++I<P;)for(var q=0,ue=c[I],ce=g?g(ue):ue;(q=w(H,ce,q,_))>-1;)H!==l&&Ul.call(H,q,1),Ul.call(l,q,1);return l}function Zm(l,c){for(var g=l?c.length:0,_=g-1;g--;){var w=c[g];if(g==_||w!==I){var I=w;Rr(w)?Ul.call(l,w,1):Wd(l,w)}}return l}function Pd(l,c){return l+Gl(Tm()*(c-l+1))}function Cx(l,c,g,_){for(var w=-1,I=Cn(Kl((c-l)/(g||1)),0),P=ee(I);I--;)P[_?I:++w]=l,l+=g;return P}function Fd(l,c){var g="";if(!l||c<1||c>Z)return g;do c%2&&(g+=l),c=Gl(c/2),c&&(l+=l);while(c);return g}function ut(l,c){return eh(x_(l,c,ci),l+"")}function wx(l){return Om(Es(l))}function yx(l,c){var g=Es(l);return cu(g,Mo(c,0,g.length))}function ba(l,c,g,_){if(!rn(l))return l;c=ro(c,l);for(var w=-1,I=c.length,P=I-1,H=l;H!=null&&++w<I;){var q=vr(c[w]),ue=g;if(q==="__proto__"||q==="constructor"||q==="prototype")return l;if(w!=P){var ce=H[q];ue=_?_(ce,q,H):t,ue===t&&(ue=rn(ce)?ce:Rr(c[w+1])?[]:{})}pa(H,q,ue),H=H[q]}return l}var Xm=ql?function(l,c){return ql.set(l,c),l}:ci,Sx=jl?function(l,c){return jl(l,"toString",{configurable:!0,enumerable:!1,value:ch(c),writable:!0})}:ci;function Lx(l){return cu(Es(l))}function Fi(l,c,g){var _=-1,w=l.length;c<0&&(c=-c>w?0:w+c),g=g>w?w:g,g<0&&(g+=w),w=c>g?0:g-c>>>0,c>>>=0;for(var I=ee(w);++_<w;)I[_]=l[_+c];return I}function Ex(l,c){var g;return no(l,function(_,w,I){return g=c(_,w,I),!g}),!!g}function tu(l,c,g){var _=0,w=l==null?_:l.length;if(typeof c=="number"&&c===c&&w<=ne){for(;_<w;){var I=_+w>>>1,P=l[I];P!==null&&!Ei(P)&&(g?P<=c:P<c)?_=I+1:w=I}return w}return Bd(l,c,ci,g)}function Bd(l,c,g,_){var w=0,I=l==null?0:l.length;if(I===0)return 0;c=g(c);for(var P=c!==c,H=c===null,q=Ei(c),ue=c===t;w<I;){var ce=Gl((w+I)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,$e=ge===ge,lt=Ei(ge);if(P)var ze=_||$e;else ue?ze=$e&&(_||Se):H?ze=$e&&Se&&(_||!Ne):q?ze=$e&&Se&&!Ne&&(_||!lt):Ne||lt?ze=!1:ze=_?ge<=c:ge<c;ze?w=ce+1:I=ce}return Rn(I,fe)}function Qm(l,c){for(var g=-1,_=l.length,w=0,I=[];++g<_;){var P=l[g],H=c?c(P):P;if(!g||!Xi(H,q)){var q=H;I[w++]=P===0?0:P}}return I}function Jm(l){return typeof l=="number"?l:Ei(l)?O:+l}function Li(l){if(typeof l=="string")return l;if(et(l))return Jt(l,Li)+"";if(Ei(l))return Nm?Nm.call(l):"";var c=l+"";return c=="0"&&1/l==-G?"-0":c}function io(l,c,g){var _=-1,w=Ml,I=l.length,P=!0,H=[],q=H;if(g)P=!1,w=fd;else if(I>=r){var ue=c?null:Px(l);if(ue)return Pl(ue);P=!1,w=ua,q=new Oo}else q=c?[]:H;e:for(;++_<I;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=q.length;Se--;)if(q[Se]===ge)continue e;c&&q.push(ge),H.push(ce)}else w(q,ge,g)||(q!==H&&q.push(ge),H.push(ce))}return H}function Wd(l,c){return c=ro(c,l),l=D_(l,c),l==null||delete l[vr(Bi(c))]}function e_(l,c,g,_){return ba(l,c,g(Ro(l,c)),_)}function nu(l,c,g,_){for(var w=l.length,I=_?w:-1;(_?I--:++I<w)&&c(l[I],I,l););return g?Fi(l,_?0:I,_?I+1:w):Fi(l,_?I+1:0,_?w:I)}function t_(l,c){var g=l;return g instanceof mt&&(g=g.value()),gd(c,function(_,w){return w.func.apply(w.thisArg,Jr([_],w.args))},g)}function Vd(l,c,g){var _=l.length;if(_<2)return _?io(l[0]):[];for(var w=-1,I=ee(_);++w<_;)for(var P=l[w],H=-1;++H<_;)H!=w&&(I[w]=ma(I[w]||P,l[H],c,g));return io(Dn(I,1),c,g)}function n_(l,c,g){for(var _=-1,w=l.length,I=c.length,P={};++_<w;){var H=_<I?c[_]:t;g(P,l[_],H)}return P}function Hd(l){return hn(l)?l:[]}function $d(l){return typeof l=="function"?l:ci}function ro(l,c){return et(l)?l:Xd(l,c)?[l]:N_(xt(l))}var xx=ut;function oo(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var i_=fE||function(l){return xn.clearTimeout(l)};function r_(l,c){if(c)return l.slice();var g=l.length,_=Em?Em(g):new l.constructor(g);return l.copy(_),_}function zd(l){var c=new l.constructor(l.byteLength);return new $l(c).set(new $l(l)),c}function Dx(l,c){var g=c?zd(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Ix(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function kx(l){return ga?Wt(ga.call(l)):{}}function o_(l,c){var g=c?zd(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function s_(l,c){if(l!==c){var g=l!==t,_=l===null,w=l===l,I=Ei(l),P=c!==t,H=c===null,q=c===c,ue=Ei(c);if(!H&&!ue&&!I&&l>c||I&&P&&q&&!H&&!ue||_&&P&&q||!g&&q||!w)return 1;if(!_&&!I&&!ue&&l<c||ue&&g&&w&&!_&&!I||H&&g&&w||!P&&w||!q)return-1}return 0}function Tx(l,c,g){for(var _=-1,w=l.criteria,I=c.criteria,P=w.length,H=g.length;++_<P;){var q=s_(w[_],I[_]);if(q){if(_>=H)return q;var ue=g[_];return q*(ue=="desc"?-1:1)}}return l.index-c.index}function a_(l,c,g,_){for(var w=-1,I=l.length,P=g.length,H=-1,q=c.length,ue=Cn(I-P,0),ce=ee(q+ue),ge=!_;++H<q;)ce[H]=c[H];for(;++w<P;)(ge||w<I)&&(ce[g[w]]=l[w]);for(;ue--;)ce[H++]=l[w++];return ce}function l_(l,c,g,_){for(var w=-1,I=l.length,P=-1,H=g.length,q=-1,ue=c.length,ce=Cn(I-H,0),ge=ee(ce+ue),Se=!_;++w<ce;)ge[w]=l[w];for(var Ne=w;++q<ue;)ge[Ne+q]=c[q];for(;++P<H;)(Se||w<I)&&(ge[Ne+g[P]]=l[w++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function _r(l,c,g,_){var w=!g;g||(g={});for(var I=-1,P=c.length;++I<P;){var H=c[I],q=_?_(g[H],l[H],H,g,l):t;q===t&&(q=l[H]),w?Ar(g,H,q):pa(g,H,q)}return g}function Nx(l,c){return _r(l,Zd(l),c)}function Ax(l,c){return _r(l,w_(l),c)}function iu(l,c){return function(g,_){var w=et(g)?FL:ex,I=c?c():{};return w(g,l,We(_,2),I)}}function ws(l){return ut(function(c,g){var _=-1,w=g.length,I=w>1?g[w-1]:t,P=w>2?g[2]:t;for(I=l.length>3&&typeof I=="function"?(w--,I):t,P&&Zn(g[0],g[1],P)&&(I=w<3?t:I,w=1),c=Wt(c);++_<w;){var H=g[_];H&&l(c,H,_,I)}return c})}function u_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var w=g.length,I=c?w:-1,P=Wt(g);(c?I--:++I<w)&&_(P[I],I,P)!==!1;);return g}}function c_(l){return function(c,g,_){for(var w=-1,I=Wt(c),P=_(c),H=P.length;H--;){var q=P[l?H:++w];if(g(I[q],q,I)===!1)break}return c}}function Ox(l,c,g){var _=c&L,w=Ca(l);function I(){var P=this&&this!==xn&&this instanceof I?w:l;return P.apply(_?g:this,arguments)}return I}function d_(l){return function(c){c=xt(c);var g=gs(c)?Yi(c):t,_=g?g[0]:c.charAt(0),w=g?oo(g,1).join(""):c.slice(1);return _[l]()+w}}function ys(l){return function(c){return gd(uv(lv(c).replace(SL,"")),l,"")}}function Ca(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Cs(l.prototype),_=l.apply(g,c);return rn(_)?_:g}}function Mx(l,c,g){var _=Ca(l);function w(){for(var I=arguments.length,P=ee(I),H=I,q=Ss(w);H--;)P[H]=arguments[H];var ue=I<3&&P[0]!==q&&P[I-1]!==q?[]:eo(P,q);if(I-=ue.length,I<g)return m_(l,c,ru,w.placeholder,t,P,ue,t,t,g-I);var ce=this&&this!==xn&&this instanceof w?_:l;return yi(ce,this,P)}return w}function h_(l){return function(c,g,_){var w=Wt(c);if(!li(c)){var I=We(g,3);c=yn(c),g=function(H){return I(w[H],H,w)}}var P=l(c,g,_);return P>-1?w[I?c[P]:P]:t}}function f_(l){return Mr(function(c){var g=c.length,_=g,w=Ri.prototype.thru;for(l&&c.reverse();_--;){var I=c[_];if(typeof I!="function")throw new Mi(s);if(w&&!P&&lu(I)=="wrapper")var P=new Ri([],!0)}for(_=P?_:g;++_<g;){I=c[_];var H=lu(I),q=H=="wrapper"?qd(I):t;q&&Qd(q[0])&&q[1]==(R|E|N|M)&&!q[4].length&&q[9]==1?P=P[lu(q[0])].apply(P,q[3]):P=I.length==1&&Qd(I)?P[H]():P.thru(I)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&et(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function ru(l,c,g,_,w,I,P,H,q,ue){var ce=c&R,ge=c&L,Se=c&S,Ne=c&(E|A),$e=c&K,lt=Se?t:Ca(l);function ze(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Xn=Ss(ze),Di=KL(vt,Xn);if(_&&(vt=a_(vt,_,w,Ne)),I&&(vt=l_(vt,I,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=eo(vt,Xn);return m_(l,c,ru,ze.placeholder,g,vt,fn,H,q,ue-ht)}var Qi=ge?g:this,Br=Se?Qi[l]:l;return ht=vt.length,H?vt=eD(vt,H):$e&&ht>1&&vt.reverse(),ce&&q<ht&&(vt.length=q),this&&this!==xn&&this instanceof ze&&(Br=lt||Ca(Br)),Br.apply(Qi,vt)}return ze}function g_(l,c){return function(g,_){return lx(g,l,c(_),{})}}function ou(l,c){return function(g,_){var w;if(g===t&&_===t)return c;if(g!==t&&(w=g),_!==t){if(w===t)return _;typeof g=="string"||typeof _=="string"?(g=Li(g),_=Li(_)):(g=Jm(g),_=Jm(_)),w=l(g,_)}return w}}function Ud(l){return Mr(function(c){return c=Jt(c,Si(We())),ut(function(g){var _=this;return l(c,function(w){return yi(w,_,g)})})})}function su(l,c){c=c===t?" ":Li(c);var g=c.length;if(g<2)return g?Fd(c,l):c;var _=Fd(c,Kl(l/ps(c)));return gs(c)?oo(Yi(_),0,l).join(""):_.slice(0,l)}function Rx(l,c,g,_){var w=c&L,I=Ca(l);function P(){for(var H=-1,q=arguments.length,ue=-1,ce=_.length,ge=ee(ce+q),Se=this&&this!==xn&&this instanceof P?I:l;++ue<ce;)ge[ue]=_[ue];for(;q--;)ge[ue++]=arguments[++H];return yi(Se,w?g:this,ge)}return P}function p_(l){return function(c,g,_){return _&&typeof _!="number"&&Zn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),Cx(c,g,_,l)}}function au(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function m_(l,c,g,_,w,I,P,H,q,ue){var ce=c&E,ge=ce?P:t,Se=ce?t:P,Ne=ce?I:t,$e=ce?t:I;c|=ce?N:V,c&=~(ce?V:N),c&y||(c&=~(L|S));var lt=[l,c,w,Ne,ge,$e,Se,H,q,ue],ze=g.apply(t,lt);return Qd(l)&&I_(ze,lt),ze.placeholder=_,k_(ze,l,c)}function jd(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:Rn(rt(_),292),_&&km(g)){var w=(xt(g)+"e").split("e"),I=c(w[0]+"e"+(+w[1]+_));return w=(xt(I)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return c(g)}}var Px=vs&&1/Pl(new vs([,-0]))[1]==G?function(l){return new vs(l)}:fh;function __(l){return function(c){var g=Pn(c);return g==Zt?wd(c):g==Pt?JL(c):jL(c,l(c))}}function Or(l,c,g,_,w,I,P,H){var q=c&S;if(!q&&typeof l!="function")throw new Mi(s);var ue=_?_.length:0;if(ue||(c&=~(N|V),_=w=t),P=P===t?P:Cn(rt(P),0),H=H===t?H:rt(H),ue-=w?w.length:0,c&V){var ce=_,ge=w;_=w=t}var Se=q?t:qd(l),Ne=[l,c,g,_,w,ce,ge,I,P,H];if(Se&&Xx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],w=Ne[4],H=Ne[9]=Ne[9]===t?q?0:l.length:Cn(Ne[9]-ue,0),!H&&c&(E|A)&&(c&=~(E|A)),!c||c==L)var $e=Ox(l,c,g);else c==E||c==A?$e=Mx(l,c,H):(c==N||c==(L|N))&&!w.length?$e=Rx(l,c,g,_):$e=ru.apply(t,Ne);var lt=Se?Xm:I_;return k_(lt($e,Ne),l,c)}function v_(l,c,g,_){return l===t||Xi(l,_s[g])&&!Nt.call(_,g)?c:l}function b_(l,c,g,_,w,I){return rn(l)&&rn(c)&&(I.set(c,l),eu(l,c,t,b_,I),I.delete(c)),l}function Fx(l){return Sa(l)?t:l}function C_(l,c,g,_,w,I){var P=g&v,H=l.length,q=c.length;if(H!=q&&!(P&&q>H))return!1;var ue=I.get(l),ce=I.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new Oo:t;for(I.set(l,c),I.set(c,l);++ge<H;){var $e=l[ge],lt=c[ge];if(_)var ze=P?_(lt,$e,ge,c,l,I):_($e,lt,ge,l,c,I);if(ze!==t){if(ze)continue;Se=!1;break}if(Ne){if(!pd(c,function(ht,vt){if(!ua(Ne,vt)&&($e===ht||w($e,ht,g,_,I)))return Ne.push(vt)})){Se=!1;break}}else if(!($e===lt||w($e,lt,g,_,I))){Se=!1;break}}return I.delete(l),I.delete(c),Se}function Bx(l,c,g,_,w,I,P){switch(g){case Ct:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!I(new $l(l),new $l(c)));case At:case Me:case nn:return Xi(+l,+c);case bt:return l.name==c.name&&l.message==c.message;case Mn:case pn:return l==c+"";case Zt:var H=wd;case Pt:var q=_&v;if(H||(H=Pl),l.size!=c.size&&!q)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=C_(H(l),H(c),_,w,I,P);return P.delete(l),ce;case mi:if(ga)return ga.call(l)==ga.call(c)}return!1}function Wx(l,c,g,_,w,I){var P=g&v,H=Kd(l),q=H.length,ue=Kd(c),ce=ue.length;if(q!=ce&&!P)return!1;for(var ge=q;ge--;){var Se=H[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=I.get(l),$e=I.get(c);if(Ne&&$e)return Ne==c&&$e==l;var lt=!0;I.set(l,c),I.set(c,l);for(var ze=P;++ge<q;){Se=H[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,I):_(ht,vt,Se,l,c,I);if(!(xi===t?ht===vt||w(ht,vt,g,_,I):xi)){lt=!1;break}ze||(ze=Se=="constructor")}if(lt&&!ze){var Xn=l.constructor,Di=c.constructor;Xn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Xn=="function"&&Xn instanceof Xn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return I.delete(l),I.delete(c),lt}function Mr(l){return eh(x_(l,t,R_),l+"")}function Kd(l){return Vm(l,yn,Zd)}function Gd(l){return Vm(l,ui,w_)}var qd=ql?function(l){return ql.get(l)}:fh;function lu(l){for(var c=l.name+"",g=bs[c],_=Nt.call(bs,c)?g.length:0;_--;){var w=g[_],I=w.func;if(I==null||I==l)return w.name}return c}function Ss(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||dh;return l=l===dh?zm:l,arguments.length?l(arguments[0],arguments[1]):l}function uu(l,c){var g=l.__data__;return Gx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function Yd(l){for(var c=yn(l),g=c.length;g--;){var _=c[g],w=l[_];c[g]=[_,w,L_(w)]}return c}function Po(l,c){var g=ZL(l,c);return $m(g)?g:t}function Vx(l){var c=Nt.call(l,No),g=l[No];try{l[No]=t;var _=!0}catch{}var w=Vl.call(l);return _&&(c?l[No]=g:delete l[No]),w}var Zd=Sd?function(l){return l==null?[]:(l=Wt(l),Qr(Sd(l),function(c){return Dm.call(l,c)}))}:gh,w_=Sd?function(l){for(var c=[];l;)Jr(c,Zd(l)),l=zl(l);return c}:gh,Pn=Yn;(Ld&&Pn(new Ld(new ArrayBuffer(1)))!=Ct||da&&Pn(new da)!=Zt||Ed&&Pn(Ed.resolve())!=ei||vs&&Pn(new vs)!=Pt||ha&&Pn(new ha)!=Fe)&&(Pn=function(l){var c=Yn(l),g=c==Tn?l.constructor:t,_=g?Fo(g):"";if(_)switch(_){case yE:return Ct;case SE:return Zt;case LE:return ei;case EE:return Pt;case xE:return Fe}return c});function Hx(l,c,g){for(var _=-1,w=g.length;++_<w;){var I=g[_],P=I.size;switch(I.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=Rn(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function $x(l){var c=l.match(He);return c?c[1].split(Re):[]}function y_(l,c,g){c=ro(c,l);for(var _=-1,w=c.length,I=!1;++_<w;){var P=vr(c[_]);if(!(I=l!=null&&g(l,P)))break;l=l[P]}return I||++_!=w?I:(w=l==null?0:l.length,!!w&&mu(w)&&Rr(P,w)&&(et(l)||Bo(l)))}function zx(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function S_(l){return typeof l.constructor=="function"&&!wa(l)?Cs(zl(l)):{}}function Ux(l,c,g){var _=l.constructor;switch(c){case at:return zd(l);case At:case Me:return new _(+l);case Ct:return Dx(l,g);case wi:case Vt:case kt:case Kt:case Gt:case Bt:case fr:case ti:case Ve:return o_(l,g);case Zt:return new _;case nn:case pn:return new _(l);case Mn:return Ix(l);case Pt:return new _;case mi:return kx(l)}}function jx(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function Kx(l){return et(l)||Bo(l)||!!(Im&&l&&l[Im])}function Rr(l,c){var g=typeof l;return c=c??Z,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Zn(l,c,g){if(!rn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Rr(c,g.length):_=="string"&&c in g)?Xi(g[c],l):!1}function Xd(l,c){if(et(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Ei(l)?!0:Ee.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Gx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Qd(l){var c=lu(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=qd(g);return!!_&&l===_[0]}function qx(l){return!!Lm&&Lm in l}var Yx=Bl?Pr:ph;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_s;return l===g}function L_(l){return l===l&&!rn(l)}function E_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Zx(l){var c=gu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Xx(l,c){var g=l[1],_=c[1],w=g|_,I=w<(L|S|R),P=_==R&&g==E||_==R&&g==M&&l[7].length<=c[8]||_==(R|M)&&c[7].length<=c[8]&&g==E;if(!(I||P))return l;_&L&&(l[2]=c[2],w|=g&L?0:y);var H=c[3];if(H){var q=l[3];l[3]=q?a_(q,H,c[4]):H,l[4]=q?eo(l[3],h):c[4]}return H=c[5],H&&(q=l[5],l[5]=q?l_(q,H,c[6]):H,l[6]=q?eo(l[5],h):c[6]),H=c[7],H&&(l[7]=H),_&R&&(l[8]=l[8]==null?c[8]:Rn(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Qx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Jx(l){return Vl.call(l)}function x_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,w=-1,I=Cn(_.length-c,0),P=ee(I);++w<I;)P[w]=_[c+w];w=-1;for(var H=ee(c+1);++w<c;)H[w]=_[w];return H[c]=g(P),yi(l,this,H)}}function D_(l,c){return c.length<2?l:Ro(l,Fi(c,0,-1))}function eD(l,c){for(var g=l.length,_=Rn(c.length,g),w=ai(l);_--;){var I=c[_];l[_]=Rr(I,g)?w[I]:t}return l}function Jd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var I_=T_(Xm),ya=pE||function(l,c){return xn.setTimeout(l,c)},eh=T_(Sx);function k_(l,c,g){var _=c+"";return eh(l,jx(_,tD($x(_),g)))}function T_(l){var c=0,g=0;return function(){var _=bE(),w=T-(_-g);if(g=_,w>0){if(++c>=D)return arguments[0]}else c=0;return l.apply(t,arguments)}}function cu(l,c){var g=-1,_=l.length,w=_-1;for(c=c===t?_:c;++g<c;){var I=Pd(g,w),P=l[I];l[I]=l[g],l[g]=P}return l.length=c,l}var N_=Zx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,w,I){c.push(w?I.replace(k,"$1"):_||g)}),c});function vr(l){if(typeof l=="string"||Ei(l))return l;var c=l+"";return c=="0"&&1/l==-G?"-0":c}function Fo(l){if(l!=null){try{return Wl.call(l)}catch{}try{return l+""}catch{}}return""}function tD(l,c){return Oi(we,function(g){var _="_."+g[0];c&g[1]&&!Ml(l,_)&&l.push(_)}),l.sort()}function A_(l){if(l instanceof mt)return l.clone();var c=new Ri(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function nD(l,c,g){(g?Zn(l,c,g):c===t)?c=1:c=Cn(rt(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var w=0,I=0,P=ee(Kl(_/c));w<_;)P[I++]=Fi(l,w,w+=c);return P}function iD(l){for(var c=-1,g=l==null?0:l.length,_=0,w=[];++c<g;){var I=l[c];I&&(w[_++]=I)}return w}function rD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return Jr(et(g)?ai(g):[g],Dn(c,1))}var oD=ut(function(l,c){return hn(l)?ma(l,Dn(c,1,hn,!0)):[]}),sD=ut(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),We(g,2)):[]}),aD=ut(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),t,g):[]});function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),Fi(l,c<0?0:c,_)):[]}function uD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function cD(l,c){return l&&l.length?nu(l,We(c,3),!0,!0):[]}function dD(l,c){return l&&l.length?nu(l,We(c,3),!0):[]}function hD(l,c,g,_){var w=l==null?0:l.length;return w?(g&&typeof g!="number"&&Zn(l,c,g)&&(g=0,_=w),rx(l,c,g,_)):[]}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:rt(g);return w<0&&(w=Cn(_+w,0)),Rl(l,We(c,3),w)}function M_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return g!==t&&(w=rt(g),w=g<0?Cn(_+w,0):Rn(w,_-1)),Rl(l,We(c,3),w,!0)}function R_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function fD(l){var c=l==null?0:l.length;return c?Dn(l,G):[]}function gD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:rt(c),Dn(l,c)):[]}function pD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var w=l[c];_[w[0]]=w[1]}return _}function P_(l){return l&&l.length?l[0]:t}function mD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:rt(g);return w<0&&(w=Cn(_+w,0)),fs(l,c,w)}function _D(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var vD=ut(function(l){var c=Jt(l,Hd);return c.length&&c[0]===l[0]?Nd(c):[]}),bD=ut(function(l){var c=Bi(l),g=Jt(l,Hd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?Nd(g,We(c,2)):[]}),CD=ut(function(l){var c=Bi(l),g=Jt(l,Hd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?Nd(g,t,c):[]});function wD(l,c){return l==null?"":_E.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function yD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_;return g!==t&&(w=rt(g),w=w<0?Cn(_+w,0):Rn(w,_-1)),c===c?tE(l,c,w):Rl(l,mm,w,!0)}function SD(l,c){return l&&l.length?Gm(l,rt(c)):t}var LD=ut(F_);function F_(l,c){return l&&l.length&&c&&c.length?Rd(l,c):l}function ED(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,We(g,2)):l}function xD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,t,g):l}var DD=Mr(function(l,c){var g=l==null?0:l.length,_=Dd(l,c);return Zm(l,Jt(c,function(w){return Rr(w,g)?+w:w}).sort(s_)),_});function ID(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,w=[],I=l.length;for(c=We(c,3);++_<I;){var P=l[_];c(P,_,l)&&(g.push(P),w.push(_))}return Zm(l,w),g}function th(l){return l==null?l:wE.call(l)}function kD(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Zn(l,c,g)?(c=0,g=_):(c=c==null?0:rt(c),g=g===t?_:rt(g)),Fi(l,c,g)):[]}function TD(l,c){return tu(l,c)}function ND(l,c,g){return Bd(l,c,We(g,2))}function AD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c);if(_<g&&Xi(l[_],c))return _}return-1}function OD(l,c){return tu(l,c,!0)}function MD(l,c,g){return Bd(l,c,We(g,2),!0)}function RD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c,!0)-1;if(Xi(l[_],c))return _}return-1}function PD(l){return l&&l.length?Qm(l):[]}function FD(l,c){return l&&l.length?Qm(l,We(c,2)):[]}function BD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function WD(l,c,g){return l&&l.length?(c=g||c===t?1:rt(c),Fi(l,0,c<0?0:c)):[]}function VD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function HD(l,c){return l&&l.length?nu(l,We(c,3),!1,!0):[]}function $D(l,c){return l&&l.length?nu(l,We(c,3)):[]}var zD=ut(function(l){return io(Dn(l,1,hn,!0))}),UD=ut(function(l){var c=Bi(l);return hn(c)&&(c=t),io(Dn(l,1,hn,!0),We(c,2))}),jD=ut(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,io(Dn(l,1,hn,!0),t,c)});function KD(l){return l&&l.length?io(l):[]}function GD(l,c){return l&&l.length?io(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?io(l,t,c):[]}function nh(l){if(!(l&&l.length))return[];var c=0;return l=Qr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),bd(c,function(g){return Jt(l,md(g))})}function B_(l,c){if(!(l&&l.length))return[];var g=nh(l);return c==null?g:Jt(g,function(_){return yi(c,t,_)})}var YD=ut(function(l,c){return hn(l)?ma(l,c):[]}),ZD=ut(function(l){return Vd(Qr(l,hn))}),XD=ut(function(l){var c=Bi(l);return hn(c)&&(c=t),Vd(Qr(l,hn),We(c,2))}),QD=ut(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Vd(Qr(l,hn),t,c)}),JD=ut(nh);function eI(l,c){return n_(l||[],c||[],pa)}function tI(l,c){return n_(l||[],c||[],ba)}var nI=ut(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,B_(l,g)});function W_(l){var c=x(l);return c.__chain__=!0,c}function iI(l,c){return c(l),l}function du(l,c){return c(l)}var rI=Mr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,w=function(I){return Dd(I,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Rr(g)?this.thru(w):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:du,args:[w],thisArg:t}),new Ri(_,this.__chain__).thru(function(I){return c&&!I.length&&I.push(t),I}))});function oI(){return W_(this)}function sI(){return new Ri(this.value(),this.__chain__)}function aI(){this.__values__===t&&(this.__values__=J_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function lI(){return this}function uI(l){for(var c,g=this;g instanceof Zl;){var _=A_(g);_.__index__=0,_.__values__=t,c?w.__wrapped__=_:c=_;var w=_;g=g.__wrapped__}return w.__wrapped__=l,c}function cI(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:du,args:[th],thisArg:t}),new Ri(c,this.__chain__)}return this.thru(th)}function dI(){return t_(this.__wrapped__,this.__actions__)}var hI=iu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function fI(l,c,g){var _=et(l)?gm:ix;return g&&Zn(l,c,g)&&(c=t),_(l,We(c,3))}function gI(l,c){var g=et(l)?Qr:Bm;return g(l,We(c,3))}var pI=h_(O_),mI=h_(M_);function _I(l,c){return Dn(hu(l,c),1)}function vI(l,c){return Dn(hu(l,c),G)}function bI(l,c,g){return g=g===t?1:rt(g),Dn(hu(l,c),g)}function V_(l,c){var g=et(l)?Oi:no;return g(l,We(c,3))}function H_(l,c){var g=et(l)?BL:Fm;return g(l,We(c,3))}var CI=iu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function wI(l,c,g,_){l=li(l)?l:Es(l),g=g&&!_?rt(g):0;var w=l.length;return g<0&&(g=Cn(w+g,0)),_u(l)?g<=w&&l.indexOf(c,g)>-1:!!w&&fs(l,c,g)>-1}var yI=ut(function(l,c,g){var _=-1,w=typeof c=="function",I=li(l)?ee(l.length):[];return no(l,function(P){I[++_]=w?yi(c,P,g):_a(P,c,g)}),I}),SI=iu(function(l,c,g){Ar(l,g,c)});function hu(l,c){var g=et(l)?Jt:Um;return g(l,We(c,3))}function LI(l,c,g,_){return l==null?[]:(et(c)||(c=c==null?[]:[c]),g=_?t:g,et(g)||(g=g==null?[]:[g]),qm(l,c,g))}var EI=iu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function xI(l,c,g){var _=et(l)?gd:vm,w=arguments.length<3;return _(l,We(c,4),g,w,no)}function DI(l,c,g){var _=et(l)?WL:vm,w=arguments.length<3;return _(l,We(c,4),g,w,Fm)}function II(l,c){var g=et(l)?Qr:Bm;return g(l,pu(We(c,3)))}function kI(l){var c=et(l)?Om:wx;return c(l)}function TI(l,c,g){(g?Zn(l,c,g):c===t)?c=1:c=rt(c);var _=et(l)?QE:yx;return _(l,c)}function NI(l){var c=et(l)?JE:Lx;return c(l)}function AI(l){if(l==null)return 0;if(li(l))return _u(l)?ps(l):l.length;var c=Pn(l);return c==Zt||c==Pt?l.size:Od(l).length}function OI(l,c,g){var _=et(l)?pd:Ex;return g&&Zn(l,c,g)&&(c=t),_(l,We(c,3))}var MI=ut(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Zn(l,c[0],c[1])?c=[]:g>2&&Zn(c[0],c[1],c[2])&&(c=[c[0]]),qm(l,Dn(c,1),[])}),fu=gE||function(){return xn.Date.now()};function RI(l,c){if(typeof c!="function")throw new Mi(s);return l=rt(l),function(){if(--l<1)return c.apply(this,arguments)}}function $_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,R,t,t,t,t,c)}function z_(l,c){var g;if(typeof c!="function")throw new Mi(s);return l=rt(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var ih=ut(function(l,c,g){var _=L;if(g.length){var w=eo(g,Ss(ih));_|=N}return Or(l,_,c,g,w)}),U_=ut(function(l,c,g){var _=L|S;if(g.length){var w=eo(g,Ss(U_));_|=N}return Or(c,_,l,g,w)});function j_(l,c,g){c=g?t:c;var _=Or(l,E,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=K_.placeholder,_}function G_(l,c,g){var _,w,I,P,H,q,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Mi(s);c=Wi(c)||0,rn(g)&&(ce=!!g.leading,ge="maxWait"in g,I=ge?Cn(Wi(g.maxWait)||0,c):I,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Qi=_,Br=w;return _=w=t,ue=fn,P=l.apply(Br,Qi),P}function $e(fn){return ue=fn,H=ya(ht,c),ce?Ne(fn):P}function lt(fn){var Qi=fn-q,Br=fn-ue,hv=c-Qi;return ge?Rn(hv,I-Br):hv}function ze(fn){var Qi=fn-q,Br=fn-ue;return q===t||Qi>=c||Qi<0||ge&&Br>=I}function ht(){var fn=fu();if(ze(fn))return vt(fn);H=ya(ht,lt(fn))}function vt(fn){return H=t,Se&&_?Ne(fn):(_=w=t,P)}function xi(){H!==t&&i_(H),ue=0,_=q=w=H=t}function Xn(){return H===t?P:vt(fu())}function Di(){var fn=fu(),Qi=ze(fn);if(_=arguments,w=this,q=fn,Qi){if(H===t)return $e(q);if(ge)return i_(H),H=ya(ht,c),Ne(q)}return H===t&&(H=ya(ht,c)),P}return Di.cancel=xi,Di.flush=Xn,Di}var PI=ut(function(l,c){return Pm(l,1,c)}),FI=ut(function(l,c,g){return Pm(l,Wi(c)||0,g)});function BI(l){return Or(l,K)}function gu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Mi(s);var g=function(){var _=arguments,w=c?c.apply(this,_):_[0],I=g.cache;if(I.has(w))return I.get(w);var P=l.apply(this,_);return g.cache=I.set(w,P)||I,P};return g.cache=new(gu.Cache||Nr),g}gu.Cache=Nr;function pu(l){if(typeof l!="function")throw new Mi(s);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function WI(l){return z_(2,l)}var VI=xx(function(l,c){c=c.length==1&&et(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ut(function(_){for(var w=-1,I=Rn(_.length,g);++w<I;)_[w]=c[w].call(this,_[w]);return yi(l,this,_)})}),rh=ut(function(l,c){var g=eo(c,Ss(rh));return Or(l,N,t,c,g)}),q_=ut(function(l,c){var g=eo(c,Ss(q_));return Or(l,V,t,c,g)}),HI=Mr(function(l,c){return Or(l,M,t,t,t,c)});function $I(l,c){if(typeof l!="function")throw new Mi(s);return c=c===t?c:rt(c),ut(l,c)}function zI(l,c){if(typeof l!="function")throw new Mi(s);return c=c==null?0:Cn(rt(c),0),ut(function(g){var _=g[c],w=oo(g,0,c);return _&&Jr(w,_),yi(l,this,w)})}function UI(l,c,g){var _=!0,w=!0;if(typeof l!="function")throw new Mi(s);return rn(g)&&(_="leading"in g?!!g.leading:_,w="trailing"in g?!!g.trailing:w),G_(l,c,{leading:_,maxWait:c,trailing:w})}function jI(l){return $_(l,1)}function KI(l,c){return rh($d(c),l)}function GI(){if(!arguments.length)return[];var l=arguments[0];return et(l)?l:[l]}function qI(l){return Pi(l,m)}function YI(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function ZI(l){return Pi(l,f|m)}function XI(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function QI(l,c){return c==null||Rm(l,c,yn(c))}function Xi(l,c){return l===c||l!==l&&c!==c}var JI=au(Td),ek=au(function(l,c){return l>=c}),Bo=Hm(function(){return arguments}())?Hm:function(l){return an(l)&&Nt.call(l,"callee")&&!Dm.call(l,"callee")},et=ee.isArray,tk=lm?Si(lm):ux;function li(l){return l!=null&&mu(l.length)&&!Pr(l)}function hn(l){return an(l)&&li(l)}function nk(l){return l===!0||l===!1||an(l)&&Yn(l)==At}var so=mE||ph,ik=um?Si(um):cx;function rk(l){return an(l)&&l.nodeType===1&&!Sa(l)}function ok(l){if(l==null)return!0;if(li(l)&&(et(l)||typeof l=="string"||typeof l.splice=="function"||so(l)||Ls(l)||Bo(l)))return!l.length;var c=Pn(l);if(c==Zt||c==Pt)return!l.size;if(wa(l))return!Od(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sk(l,c){return va(l,c)}function ak(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?va(l,c,t,g):!!_}function oh(l){if(!an(l))return!1;var c=Yn(l);return c==bt||c==st||typeof l.message=="string"&&typeof l.name=="string"&&!Sa(l)}function lk(l){return typeof l=="number"&&km(l)}function Pr(l){if(!rn(l))return!1;var c=Yn(l);return c==tt||c==tn||c==dt||c==Ln}function Y_(l){return typeof l=="number"&&l==rt(l)}function mu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Z}function rn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function an(l){return l!=null&&typeof l=="object"}var Z_=cm?Si(cm):hx;function uk(l,c){return l===c||Ad(l,c,Yd(c))}function ck(l,c,g){return g=typeof g=="function"?g:t,Ad(l,c,Yd(c),g)}function dk(l){return X_(l)&&l!=+l}function hk(l){if(Yx(l))throw new Xe(o);return $m(l)}function fk(l){return l===null}function gk(l){return l==null}function X_(l){return typeof l=="number"||an(l)&&Yn(l)==nn}function Sa(l){if(!an(l)||Yn(l)!=Tn)return!1;var c=zl(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Wl.call(g)==cE}var sh=dm?Si(dm):fx;function pk(l){return Y_(l)&&l>=-Z&&l<=Z}var Q_=hm?Si(hm):gx;function _u(l){return typeof l=="string"||!et(l)&&an(l)&&Yn(l)==pn}function Ei(l){return typeof l=="symbol"||an(l)&&Yn(l)==mi}var Ls=fm?Si(fm):px;function mk(l){return l===t}function _k(l){return an(l)&&Pn(l)==Fe}function vk(l){return an(l)&&Yn(l)==pt}var bk=au(Md),Ck=au(function(l,c){return l<=c});function J_(l){if(!l)return[];if(li(l))return _u(l)?Yi(l):ai(l);if(ca&&l[ca])return QL(l[ca]());var c=Pn(l),g=c==Zt?wd:c==Pt?Pl:Es;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===G||l===-G){var c=l<0?-1:1;return c*z}return l===l?l:0}function rt(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function ev(l){return l?Mo(rt(l),0,Y):0}function Wi(l){if(typeof l=="number")return l;if(Ei(l))return O;if(rn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=rn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=bm(l);var g=me.test(l);return g||De.test(l)?RL(l.slice(2),g?2:8):ie.test(l)?O:+l}function tv(l){return _r(l,ui(l))}function wk(l){return l?Mo(rt(l),-Z,Z):l===0?l:0}function xt(l){return l==null?"":Li(l)}var yk=ws(function(l,c){if(wa(c)||li(c)){_r(c,yn(c),l);return}for(var g in c)Nt.call(c,g)&&pa(l,g,c[g])}),nv=ws(function(l,c){_r(c,ui(c),l)}),vu=ws(function(l,c,g,_){_r(c,ui(c),l,_)}),Sk=ws(function(l,c,g,_){_r(c,yn(c),l,_)}),Lk=Mr(Dd);function Ek(l,c){var g=Cs(l);return c==null?g:Mm(g,c)}var xk=ut(function(l,c){l=Wt(l);var g=-1,_=c.length,w=_>2?c[2]:t;for(w&&Zn(c[0],c[1],w)&&(_=1);++g<_;)for(var I=c[g],P=ui(I),H=-1,q=P.length;++H<q;){var ue=P[H],ce=l[ue];(ce===t||Xi(ce,_s[ue])&&!Nt.call(l,ue))&&(l[ue]=I[ue])}return l}),Dk=ut(function(l){return l.push(t,b_),yi(iv,t,l)});function Ik(l,c){return pm(l,We(c,3),mr)}function kk(l,c){return pm(l,We(c,3),kd)}function Tk(l,c){return l==null?l:Id(l,We(c,3),ui)}function Nk(l,c){return l==null?l:Wm(l,We(c,3),ui)}function Ak(l,c){return l&&mr(l,We(c,3))}function Ok(l,c){return l&&kd(l,We(c,3))}function Mk(l){return l==null?[]:Jl(l,yn(l))}function Rk(l){return l==null?[]:Jl(l,ui(l))}function ah(l,c,g){var _=l==null?t:Ro(l,c);return _===t?g:_}function Pk(l,c){return l!=null&&y_(l,c,ox)}function lh(l,c){return l!=null&&y_(l,c,sx)}var Fk=g_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),l[c]=g},ch(ci)),Bk=g_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),Wk=ut(_a);function yn(l){return li(l)?Am(l):Od(l)}function ui(l){return li(l)?Am(l,!0):mx(l)}function Vk(l,c){var g={};return c=We(c,3),mr(l,function(_,w,I){Ar(g,c(_,w,I),_)}),g}function Hk(l,c){var g={};return c=We(c,3),mr(l,function(_,w,I){Ar(g,w,c(_,w,I))}),g}var $k=ws(function(l,c,g){eu(l,c,g)}),iv=ws(function(l,c,g,_){eu(l,c,g,_)}),zk=Mr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(I){return I=ro(I,l),_||(_=I.length>1),I}),_r(l,Gd(l),g),_&&(g=Pi(g,f|p|m,Fx));for(var w=c.length;w--;)Wd(g,c[w]);return g});function Uk(l,c){return rv(l,pu(We(c)))}var jk=Mr(function(l,c){return l==null?{}:vx(l,c)});function rv(l,c){if(l==null)return{};var g=Jt(Gd(l),function(_){return[_]});return c=We(c),Ym(l,g,function(_,w){return c(_,w[0])})}function Kk(l,c,g){c=ro(c,l);var _=-1,w=c.length;for(w||(w=1,l=t);++_<w;){var I=l==null?t:l[vr(c[_])];I===t&&(_=w,I=g),l=Pr(I)?I.call(l):I}return l}function Gk(l,c,g){return l==null?l:ba(l,c,g)}function qk(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:ba(l,c,g,_)}var ov=__(yn),sv=__(ui);function Yk(l,c,g){var _=et(l),w=_||so(l)||Ls(l);if(c=We(c,4),g==null){var I=l&&l.constructor;w?g=_?new I:[]:rn(l)?g=Pr(I)?Cs(zl(l)):{}:g={}}return(w?Oi:mr)(l,function(P,H,q){return c(g,P,H,q)}),g}function Zk(l,c){return l==null?!0:Wd(l,c)}function Xk(l,c,g){return l==null?l:e_(l,c,$d(g))}function Qk(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:e_(l,c,$d(g),_)}function Es(l){return l==null?[]:Cd(l,yn(l))}function Jk(l){return l==null?[]:Cd(l,ui(l))}function eT(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Mo(Wi(l),c,g)}function tT(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ax(l,c,g)}function nT(l,c,g){if(g&&typeof g!="boolean"&&Zn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var w=Tm();return Rn(l+w*(c-l+ML("1e-"+((w+"").length-1))),c)}return Pd(l,c)}var iT=ys(function(l,c,g){return c=c.toLowerCase(),l+(g?av(c):c)});function av(l){return uh(xt(l).toLowerCase())}function lv(l){return l=xt(l),l&&l.replace(Ze,GL).replace(LL,"")}function rT(l,c,g){l=xt(l),c=Li(c);var _=l.length;g=g===t?_:Mo(rt(g),0,_);var w=g;return g-=c.length,g>=0&&l.slice(g,w)==c}function oT(l){return l=xt(l),l&&ol.test(l)?l.replace(vn,qL):l}function sT(l){return l=xt(l),l&&ae.test(l)?l.replace(se,"\\$&"):l}var aT=ys(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),lT=ys(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),uT=d_("toLowerCase");function cT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;if(!c||_>=c)return l;var w=(c-_)/2;return su(Gl(w),g)+l+su(Kl(w),g)}function dT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;return c&&_<c?l+su(c-_,g):l}function hT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;return c&&_<c?su(c-_,g)+l:l}function fT(l,c,g){return g||c==null?c=0:c&&(c=+c),CE(xt(l).replace(pe,""),c||0)}function gT(l,c,g){return(g?Zn(l,c,g):c===t)?c=1:c=rt(c),Fd(xt(l),c)}function pT(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var mT=ys(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function _T(l,c,g){return g&&typeof g!="number"&&Zn(l,c,g)&&(c=g=t),g=g===t?Y:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!sh(c))&&(c=Li(c),!c&&gs(l))?oo(Yi(l),0,g):l.split(c,g)):[]}var vT=ys(function(l,c,g){return l+(g?" ":"")+uh(c)});function bT(l,c,g){return l=xt(l),g=g==null?0:Mo(rt(g),0,l.length),c=Li(c),l.slice(g,g+c.length)==c}function CT(l,c,g){var _=x.templateSettings;g&&Zn(l,c,g)&&(c=t),l=xt(l),c=vu({},c,_,v_);var w=vu({},c.imports,_.imports,v_),I=yn(w),P=Cd(w,I),H,q,ue=0,ce=c.interpolate||ot,ge="__p += '",Se=yd((c.escape||ot).source+"|"+ce.source+"|"+(ce===is?W:ot).source+"|"+(c.evaluate||ot).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kL+"]")+`
`;l.replace(Se,function(ze,ht,vt,xi,Xn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(Tt,YL),ht&&(H=!0,ge+=`' +
__e(`+ht+`) +
'`),Xn&&(q=!0,ge+=`';
`+Xn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+ze.length,ze}),ge+=`';
`;var $e=Nt.call(c,"variable")&&c.variable;if(!$e)ge=`with (obj) {
`+ge+`
}
`;else if(qt.test($e))throw new Xe(a);ge=(q?ge.replace(Pa,""):ge).replace($n,"$1").replace(ni,"$1;"),ge="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=cv(function(){return St(I,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,oh(lt))throw lt;return lt}function wT(l){return xt(l).toLowerCase()}function yT(l){return xt(l).toUpperCase()}function ST(l,c,g){if(l=xt(l),l&&(g||c===t))return bm(l);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Yi(c),I=Cm(_,w),P=wm(_,w)+1;return oo(_,I,P).join("")}function LT(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,Sm(l)+1);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=wm(_,Yi(c))+1;return oo(_,0,w).join("")}function ET(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Cm(_,Yi(c));return oo(_,w).join("")}function xT(l,c){var g=X,_=$;if(rn(c)){var w="separator"in c?c.separator:w;g="length"in c?rt(c.length):g,_="omission"in c?Li(c.omission):_}l=xt(l);var I=l.length;if(gs(l)){var P=Yi(l);I=P.length}if(g>=I)return l;var H=g-ps(_);if(H<1)return _;var q=P?oo(P,0,H).join(""):l.slice(0,H);if(w===t)return q+_;if(P&&(H+=q.length-H),sh(w)){if(l.slice(H).search(w)){var ue,ce=q;for(w.global||(w=yd(w.source,xt(te.exec(w))+"g")),w.lastIndex=0;ue=w.exec(ce);)var ge=ue.index;q=q.slice(0,ge===t?H:ge)}}else if(l.indexOf(Li(w),H)!=H){var Se=q.lastIndexOf(w);Se>-1&&(q=q.slice(0,Se))}return q+_}function DT(l){return l=xt(l),l&&ir.test(l)?l.replace(Gs,nE):l}var IT=ys(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),uh=d_("toUpperCase");function uv(l,c,g){return l=xt(l),c=g?t:c,c===t?XL(l)?oE(l):$L(l):l.match(c)||[]}var cv=ut(function(l,c){try{return yi(l,t,c)}catch(g){return oh(g)?g:new Xe(g)}}),kT=Mr(function(l,c){return Oi(c,function(g){g=vr(g),Ar(l,g,ih(l[g],l))}),l});function TT(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Mi(s);return[g(_[0]),_[1]]}):[],ut(function(_){for(var w=-1;++w<c;){var I=l[w];if(yi(I[0],this,_))return yi(I[1],this,_)}})}function NT(l){return nx(Pi(l,f))}function ch(l){return function(){return l}}function AT(l,c){return l==null||l!==l?c:l}var OT=f_(),MT=f_(!0);function ci(l){return l}function dh(l){return zm(typeof l=="function"?l:Pi(l,f))}function RT(l){return jm(Pi(l,f))}function PT(l,c){return Km(l,Pi(c,f))}var FT=ut(function(l,c){return function(g){return _a(g,l,c)}}),BT=ut(function(l,c){return function(g){return _a(l,g,c)}});function hh(l,c,g){var _=yn(c),w=Jl(c,_);g==null&&!(rn(c)&&(w.length||!_.length))&&(g=c,c=l,l=this,w=Jl(c,yn(c)));var I=!(rn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(w,function(H){var q=c[H];l[H]=q,P&&(l.prototype[H]=function(){var ue=this.__chain__;if(I||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:q,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return q.apply(l,Jr([this.value()],arguments))})}),l}function WT(){return xn._===this&&(xn._=dE),this}function fh(){}function VT(l){return l=rt(l),ut(function(c){return Gm(c,l)})}var HT=Ud(Jt),$T=Ud(gm),zT=Ud(pd);function dv(l){return Xd(l)?md(vr(l)):bx(l)}function UT(l){return function(c){return l==null?t:Ro(l,c)}}var jT=p_(),KT=p_(!0);function gh(){return[]}function ph(){return!1}function GT(){return{}}function qT(){return""}function YT(){return!0}function ZT(l,c){if(l=rt(l),l<1||l>Z)return[];var g=Y,_=Rn(l,Y);c=We(c),l-=Y;for(var w=bd(_,c);++g<l;)c(g);return w}function XT(l){return et(l)?Jt(l,vr):Ei(l)?[l]:ai(N_(xt(l)))}function QT(l){var c=++uE;return xt(l)+c}var JT=ou(function(l,c){return l+c},0),eN=jd("ceil"),tN=ou(function(l,c){return l/c},1),nN=jd("floor");function iN(l){return l&&l.length?Ql(l,ci,Td):t}function rN(l,c){return l&&l.length?Ql(l,We(c,2),Td):t}function oN(l){return _m(l,ci)}function sN(l,c){return _m(l,We(c,2))}function aN(l){return l&&l.length?Ql(l,ci,Md):t}function lN(l,c){return l&&l.length?Ql(l,We(c,2),Md):t}var uN=ou(function(l,c){return l*c},1),cN=jd("round"),dN=ou(function(l,c){return l-c},0);function hN(l){return l&&l.length?vd(l,ci):0}function fN(l,c){return l&&l.length?vd(l,We(c,2)):0}return x.after=RI,x.ary=$_,x.assign=yk,x.assignIn=nv,x.assignInWith=vu,x.assignWith=Sk,x.at=Lk,x.before=z_,x.bind=ih,x.bindAll=kT,x.bindKey=U_,x.castArray=GI,x.chain=W_,x.chunk=nD,x.compact=iD,x.concat=rD,x.cond=TT,x.conforms=NT,x.constant=ch,x.countBy=hI,x.create=Ek,x.curry=j_,x.curryRight=K_,x.debounce=G_,x.defaults=xk,x.defaultsDeep=Dk,x.defer=PI,x.delay=FI,x.difference=oD,x.differenceBy=sD,x.differenceWith=aD,x.drop=lD,x.dropRight=uD,x.dropRightWhile=cD,x.dropWhile=dD,x.fill=hD,x.filter=gI,x.flatMap=_I,x.flatMapDeep=vI,x.flatMapDepth=bI,x.flatten=R_,x.flattenDeep=fD,x.flattenDepth=gD,x.flip=BI,x.flow=OT,x.flowRight=MT,x.fromPairs=pD,x.functions=Mk,x.functionsIn=Rk,x.groupBy=CI,x.initial=_D,x.intersection=vD,x.intersectionBy=bD,x.intersectionWith=CD,x.invert=Fk,x.invertBy=Bk,x.invokeMap=yI,x.iteratee=dh,x.keyBy=SI,x.keys=yn,x.keysIn=ui,x.map=hu,x.mapKeys=Vk,x.mapValues=Hk,x.matches=RT,x.matchesProperty=PT,x.memoize=gu,x.merge=$k,x.mergeWith=iv,x.method=FT,x.methodOf=BT,x.mixin=hh,x.negate=pu,x.nthArg=VT,x.omit=zk,x.omitBy=Uk,x.once=WI,x.orderBy=LI,x.over=HT,x.overArgs=VI,x.overEvery=$T,x.overSome=zT,x.partial=rh,x.partialRight=q_,x.partition=EI,x.pick=jk,x.pickBy=rv,x.property=dv,x.propertyOf=UT,x.pull=LD,x.pullAll=F_,x.pullAllBy=ED,x.pullAllWith=xD,x.pullAt=DD,x.range=jT,x.rangeRight=KT,x.rearg=HI,x.reject=II,x.remove=ID,x.rest=$I,x.reverse=th,x.sampleSize=TI,x.set=Gk,x.setWith=qk,x.shuffle=NI,x.slice=kD,x.sortBy=MI,x.sortedUniq=PD,x.sortedUniqBy=FD,x.split=_T,x.spread=zI,x.tail=BD,x.take=WD,x.takeRight=VD,x.takeRightWhile=HD,x.takeWhile=$D,x.tap=iI,x.throttle=UI,x.thru=du,x.toArray=J_,x.toPairs=ov,x.toPairsIn=sv,x.toPath=XT,x.toPlainObject=tv,x.transform=Yk,x.unary=jI,x.union=zD,x.unionBy=UD,x.unionWith=jD,x.uniq=KD,x.uniqBy=GD,x.uniqWith=qD,x.unset=Zk,x.unzip=nh,x.unzipWith=B_,x.update=Xk,x.updateWith=Qk,x.values=Es,x.valuesIn=Jk,x.without=YD,x.words=uv,x.wrap=KI,x.xor=ZD,x.xorBy=XD,x.xorWith=QD,x.zip=JD,x.zipObject=eI,x.zipObjectDeep=tI,x.zipWith=nI,x.entries=ov,x.entriesIn=sv,x.extend=nv,x.extendWith=vu,hh(x,x),x.add=JT,x.attempt=cv,x.camelCase=iT,x.capitalize=av,x.ceil=eN,x.clamp=eT,x.clone=qI,x.cloneDeep=ZI,x.cloneDeepWith=XI,x.cloneWith=YI,x.conformsTo=QI,x.deburr=lv,x.defaultTo=AT,x.divide=tN,x.endsWith=rT,x.eq=Xi,x.escape=oT,x.escapeRegExp=sT,x.every=fI,x.find=pI,x.findIndex=O_,x.findKey=Ik,x.findLast=mI,x.findLastIndex=M_,x.findLastKey=kk,x.floor=nN,x.forEach=V_,x.forEachRight=H_,x.forIn=Tk,x.forInRight=Nk,x.forOwn=Ak,x.forOwnRight=Ok,x.get=ah,x.gt=JI,x.gte=ek,x.has=Pk,x.hasIn=lh,x.head=P_,x.identity=ci,x.includes=wI,x.indexOf=mD,x.inRange=tT,x.invoke=Wk,x.isArguments=Bo,x.isArray=et,x.isArrayBuffer=tk,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=nk,x.isBuffer=so,x.isDate=ik,x.isElement=rk,x.isEmpty=ok,x.isEqual=sk,x.isEqualWith=ak,x.isError=oh,x.isFinite=lk,x.isFunction=Pr,x.isInteger=Y_,x.isLength=mu,x.isMap=Z_,x.isMatch=uk,x.isMatchWith=ck,x.isNaN=dk,x.isNative=hk,x.isNil=gk,x.isNull=fk,x.isNumber=X_,x.isObject=rn,x.isObjectLike=an,x.isPlainObject=Sa,x.isRegExp=sh,x.isSafeInteger=pk,x.isSet=Q_,x.isString=_u,x.isSymbol=Ei,x.isTypedArray=Ls,x.isUndefined=mk,x.isWeakMap=_k,x.isWeakSet=vk,x.join=wD,x.kebabCase=aT,x.last=Bi,x.lastIndexOf=yD,x.lowerCase=lT,x.lowerFirst=uT,x.lt=bk,x.lte=Ck,x.max=iN,x.maxBy=rN,x.mean=oN,x.meanBy=sN,x.min=aN,x.minBy=lN,x.stubArray=gh,x.stubFalse=ph,x.stubObject=GT,x.stubString=qT,x.stubTrue=YT,x.multiply=uN,x.nth=SD,x.noConflict=WT,x.noop=fh,x.now=fu,x.pad=cT,x.padEnd=dT,x.padStart=hT,x.parseInt=fT,x.random=nT,x.reduce=xI,x.reduceRight=DI,x.repeat=gT,x.replace=pT,x.result=Kk,x.round=cN,x.runInContext=j,x.sample=kI,x.size=AI,x.snakeCase=mT,x.some=OI,x.sortedIndex=TD,x.sortedIndexBy=ND,x.sortedIndexOf=AD,x.sortedLastIndex=OD,x.sortedLastIndexBy=MD,x.sortedLastIndexOf=RD,x.startCase=vT,x.startsWith=bT,x.subtract=dN,x.sum=hN,x.sumBy=fN,x.template=CT,x.times=ZT,x.toFinite=Fr,x.toInteger=rt,x.toLength=ev,x.toLower=wT,x.toNumber=Wi,x.toSafeInteger=wk,x.toString=xt,x.toUpper=yT,x.trim=ST,x.trimEnd=LT,x.trimStart=ET,x.truncate=xT,x.unescape=DT,x.uniqueId=QT,x.upperCase=IT,x.upperFirst=uh,x.each=V_,x.eachRight=H_,x.first=P_,hh(x,function(){var l={};return mr(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(rt(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=Rn(g,_.__takeCount__):_.__views__.push({size:Rn(g,Y),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==F||g==U;mt.prototype[l]=function(w){var I=this.clone();return I.__iteratees__.push({iteratee:We(w,3),type:g}),I.__filtered__=I.__filtered__||_,I}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ut(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return _a(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(pu(We(l)))},mt.prototype.slice=function(l,c){l=rt(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=rt(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(Y)},mr(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),w=x[_?"take"+(c=="last"?"Right":""):c],I=_||/^find/.test(c);w&&(x.prototype[c]=function(){var P=this.__wrapped__,H=_?[1]:arguments,q=P instanceof mt,ue=H[0],ce=q||et(P),ge=function(ht){var vt=w.apply(x,Jr([ht],H));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(q=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,$e=I&&!Se,lt=q&&!Ne;if(!I&&ce){P=lt?P:new mt(this);var ze=l.apply(P,H);return ze.__actions__.push({func:du,args:[ge],thisArg:t}),new Ri(ze,Se)}return $e&&lt?l.apply(this,H):(ze=this.thru(ge),$e?_?ze.value()[0]:ze.value():ze)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Fl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var I=this.value();return c.apply(et(I)?I:[],w)}return this[g](function(P){return c.apply(et(P)?P:[],w)})}}),mr(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bs,_)||(bs[_]=[]),bs[_].push({name:c,func:g})}}),bs[ru(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=DE,mt.prototype.reverse=IE,mt.prototype.value=kE,x.prototype.at=rI,x.prototype.chain=oI,x.prototype.commit=sI,x.prototype.next=aI,x.prototype.plant=uI,x.prototype.reverse=cI,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=dI,x.prototype.first=x.prototype.head,ca&&(x.prototype[ca]=lI),x},ms=sE();To?((To.exports=ms)._=ms,dd._=ms):xn._=ms}).call(dw)}),vh={browserCheck:function(){var e={};if(vh.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0;e>=1024;)e=Number((e/1024).toFixed(2)),n++;return"".concat(e," ").concat(t[n])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){return!e||e===1/0?"0%":(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%")},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){if(e==null||e==="")return"0";e="".concat(e);var t=e.split("."),n=BX(t,2),r=n[0],o=n[1];return"".concat(r.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(o?".".concat(o):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),r=JSON.stringify(n,null,t||2);return r}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.sort(function(o,s){var a=0,u=_be(n),d;try{for(u.s();!(d=u.n()).done;){var h=d.value;if(a=h(o,s),a!==0)return a}}catch(f){u.e(f)}finally{u.f()}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){return e=vh.trim(e),e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"||e.charAt(0)==="["&&e.charAt(e.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVXYZ";function o(d){var h=Math.random()*(d.length-1);return d.charAt(h)}for(var s="num",a="",u=0;u<e;u++)s==="num"?(a+=o(t),s="lower"):s==="lower"?(a+=o(n),s="upper"):s==="upper"&&(a+=o(r),s="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!vh.isEqual(this.state,n)||!vh.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||65376<=r&&r<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,r=[],o=0;o*t<n;)r.push(e.slice(o*t,(o+1)*t)),o++;return r},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!vh.isObj(e)))return Object.entries(e).forEach(function(t){var n=BX(t,2),r=n[0],o=n[1];o&&vh.isObj(o)?vh.removeEmpty(o):vh.isEmpty(o)&&delete e[r]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!X7.isPlainObject(e)||!X7.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var r=hbe({},e);return X7.forEach(t,function(o,s){s in e?r[s]=vh.mergeDeep(e[s],o):r[s]=o}),r},downLoadData:function(e){var t=e.url,n=e.payload,r=e.finallyCallback,o=e.successCallback,s=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return s(a);var u=a.headers.get("Content-type")||"";if(u.includes("application/json"))return s(a);var d=e.fileName;if(!d){var h=a.headers.get("Content-disposition")||"";d=h.split("filename=")[1]}a.blob().then(function(f){var p=URL.createObjectURL(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",decodeURIComponent(d||"")),m.click(),URL.revokeObjectURL(p),o&&o(a)})}).finally(function(){r&&r()})},isUtf8:function(e){var t=["ä","å","æ","ç","è","é"];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,r;t="";var o=e.length||0;for(n=0;n<o;n++)r=e.charCodeAt(n),r>=1&&r<=127?t+=e.charAt(n):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}},vbe={getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));if(t!=null)try{return unescape(decodeURI(t[2]))}catch{return t[2]}return null},getAllCookies:function(){var e={};try{document.cookie.split("; ").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]})}catch{throw new Error("Cookie解析失败，请检查Cookie格式！")}return e},deleteCookie:function(e,t,n){var r=new Date(0);t=t?"; domain=".concat(t):"",n=n||"/",document.cookie=e+"=; expires="+r.toUTCString()+t+"; path="+n},deleteAllCookies:function(e,t){for(var n=document.cookie.split(";"),r=0;r<n.length;r++)n[r]&&this.deleteCookie(n[r].split("=")[0],e,t)},setCookie:function(e,t,n,r){var o="";if(n){var s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),o="; expires="+s.toUTCString()}var a="";r&&(a="; domain="+r),document.cookie=e+"="+t+o+a+"; path=/"}},$C=Jse(function(i,e){(function(t,n){i.exports=n()})(dw,function(){var t=1e3,n=6e4,r=36e5,o="millisecond",s="second",a="minute",u="hour",d="day",h="week",f="month",p="quarter",m="year",v="date",b="Invalid Date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(T,F,B){var U=String(T);return!U||U.length>=F?T:""+Array(F+1-U.length).join(B)+T},A={s:E,z:function(T){var F=-T.utcOffset(),B=Math.abs(F),U=Math.floor(B/60),G=B%60;return(F<=0?"+":"-")+E(U,2,"0")+":"+E(G,2,"0")},m:function T(F,B){if(F.date()<B.date())return-T(B,F);var U=12*(B.year()-F.year())+(B.month()-F.month()),G=F.clone().add(U,f),Z=B-G<0,z=F.clone().add(U+(Z?-1:1),f);return+(-(U+(B-G)/(Z?G-z:z-G))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:f,y:m,w:h,d,D:v,h:u,m:a,s,ms:o,Q:p}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},N="en",V={};V[N]=y;var R=function(T){return T instanceof $},M=function T(F,B,U){var G;if(!F)return N;if(typeof F=="string"){var Z=F.toLowerCase();V[Z]&&(G=Z),B&&(V[Z]=B,G=Z);var z=F.split("-");if(!G&&z.length>1)return T(z[0])}else{var O=F.name;V[O]=F,G=O}return!U&&G&&(N=G),G||!U&&N},K=function(T,F){if(R(T))return T.clone();var B=typeof F=="object"?F:{};return B.date=T,B.args=arguments,new $(B)},X=A;X.l=M,X.i=R,X.w=function(T,F){return K(T,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var $=function(){function T(B){this.$L=M(B.locale,null,!0),this.parse(B)}var F=T.prototype;return F.parse=function(B){this.$d=function(U){var G=U.date,Z=U.utc;if(G===null)return new Date(NaN);if(X.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var z=G.match(L);if(z){var O=z[2]-1||0,Y=(z[7]||"0").substring(0,3);return Z?new Date(Date.UTC(z[1],O,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Y)):new Date(z[1],O,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Y)}}return new Date(G)}(B),this.$x=B.x||{},this.init()},F.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},F.$utils=function(){return X},F.isValid=function(){return this.$d.toString()!==b},F.isSame=function(B,U){var G=K(B);return this.startOf(U)<=G&&G<=this.endOf(U)},F.isAfter=function(B,U){return K(B)<this.startOf(U)},F.isBefore=function(B,U){return this.endOf(U)<K(B)},F.$g=function(B,U,G){return X.u(B)?this[U]:this.set(G,B)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(B,U){var G=this,Z=!!X.u(U)||U,z=X.p(B),O=function(At,Me){var st=X.w(G.$u?Date.UTC(G.$y,Me,At):new Date(G.$y,Me,At),G);return Z?st:st.endOf(d)},Y=function(At,Me){return X.w(G.toDate()[At].apply(G.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(Me)),G)},fe=this.$W,ne=this.$M,we=this.$D,Ie="set"+(this.$u?"UTC":"");switch(z){case m:return Z?O(1,0):O(31,11);case f:return Z?O(1,ne):O(0,ne+1);case h:var je=this.$locale().weekStart||0,dt=(fe<je?fe+7:fe)-je;return O(Z?we-dt:we+(6-dt),ne);case d:case v:return Y(Ie+"Hours",0);case u:return Y(Ie+"Minutes",1);case a:return Y(Ie+"Seconds",2);case s:return Y(Ie+"Milliseconds",3);default:return this.clone()}},F.endOf=function(B){return this.startOf(B,!1)},F.$set=function(B,U){var G,Z=X.p(B),z="set"+(this.$u?"UTC":""),O=(G={},G[d]=z+"Date",G[v]=z+"Date",G[f]=z+"Month",G[m]=z+"FullYear",G[u]=z+"Hours",G[a]=z+"Minutes",G[s]=z+"Seconds",G[o]=z+"Milliseconds",G)[Z],Y=Z===d?this.$D+(U-this.$W):U;if(Z===f||Z===m){var fe=this.clone().set(v,1);fe.$d[O](Y),fe.init(),this.$d=fe.set(v,Math.min(this.$D,fe.daysInMonth())).$d}else O&&this.$d[O](Y);return this.init(),this},F.set=function(B,U){return this.clone().$set(B,U)},F.get=function(B){return this[X.p(B)]()},F.add=function(B,U){var G,Z=this;B=Number(B);var z=X.p(U),O=function(ne){var we=K(Z);return X.w(we.date(we.date()+Math.round(ne*B)),Z)};if(z===f)return this.set(f,this.$M+B);if(z===m)return this.set(m,this.$y+B);if(z===d)return O(1);if(z===h)return O(7);var Y=(G={},G[a]=n,G[u]=r,G[s]=t,G)[z]||1,fe=this.$d.getTime()+B*Y;return X.w(fe,this)},F.subtract=function(B,U){return this.add(-1*B,U)},F.format=function(B){var U=this,G=this.$locale();if(!this.isValid())return G.invalidDate||b;var Z=B||"YYYY-MM-DDTHH:mm:ssZ",z=X.z(this),O=this.$H,Y=this.$m,fe=this.$M,ne=G.weekdays,we=G.months,Ie=function(Me,st,bt,tt){return Me&&(Me[st]||Me(U,Z))||bt[st].slice(0,tt)},je=function(Me){return X.s(O%12||12,Me,"0")},dt=G.meridiem||function(Me,st,bt){var tt=Me<12?"AM":"PM";return bt?tt.toLowerCase():tt},At={YY:String(this.$y).slice(-2),YYYY:this.$y,M:fe+1,MM:X.s(fe+1,2,"0"),MMM:Ie(G.monthsShort,fe,we,3),MMMM:Ie(we,fe),D:this.$D,DD:X.s(this.$D,2,"0"),d:String(this.$W),dd:Ie(G.weekdaysMin,this.$W,ne,2),ddd:Ie(G.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(O),HH:X.s(O,2,"0"),h:je(1),hh:je(2),a:dt(O,Y,!0),A:dt(O,Y,!1),m:String(Y),mm:X.s(Y,2,"0"),s:String(this.$s),ss:X.s(this.$s,2,"0"),SSS:X.s(this.$ms,3,"0"),Z:z};return Z.replace(S,function(Me,st){return st||At[Me]||z.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(B,U,G){var Z,z=X.p(U),O=K(B),Y=(O.utcOffset()-this.utcOffset())*n,fe=this-O,ne=X.m(this,O);return ne=(Z={},Z[m]=ne/12,Z[f]=ne,Z[p]=ne/3,Z[h]=(fe-Y)/6048e5,Z[d]=(fe-Y)/864e5,Z[u]=fe/r,Z[a]=fe/n,Z[s]=fe/t,Z)[z]||fe,G?ne:X.a(ne)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return V[this.$L]},F.locale=function(B,U){if(!B)return this.$L;var G=this.clone(),Z=M(B,U,!0);return Z&&(G.$L=Z),G},F.clone=function(){return X.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},T}(),D=$.prototype;return K.prototype=D,[["$ms",o],["$s",s],["$m",a],["$H",u],["$W",d],["$M",f],["$y",m],["$D",v]].forEach(function(T){D[T[1]]=function(F){return this.$g(F,T[0],T[1])}}),K.extend=function(T,F){return T.$i||(T(F,$,K),T.$i=!0),K},K.locale=M,K.isDayjs=R,K.unix=function(T){return K(1e3*T)},K.en=V[N],K.Ls=V,K.p={},K})}),bbe={formatDateTime:function(e){return $C(e).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(e){return $C(e).format("YYYY-MM-DD")},formatDateHours:function(e){return $C(e).format("YYYY-MM-DD HH:mm")},formatDayHours:function(e){return $C(e).format("MM-DD HH:mm")},formatHours:function(e){return $C(e).format("HH:mm")},formatMinute:function(e){return $C(e).format("HH:mm:ss")},formatSecond:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=0,n=0,r=0;function o(u){return r=Math.floor(u/3600),u-r*3600}function s(u){return n=Math.floor(u/60),u-n*60}function a(u){return t=u,t}return a(s(o(e))),"".concat(r?r+"h":"").concat(n?n+"m":"").concat(t?t+"s":"")||"0s"}},Cbe={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},wbe=function(){function i(){Zse(this,i),this.fakeHandler=null}return Xse(i,[{key:"copy",value:function(t,n){var r=this;this.removeFake(),this.fakeHandlerCallback=function(){return r.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top="".concat(o,"px"),this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=t,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText(n)}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"copyText",value:function(t){var n;try{n=document.execCommand("copy")}catch{n=!1}t&&t(n)}}]),i}(),ybe=function(){function i(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;Zse(this,i),"indexedDB"in window?(this._storeName=n,this._version=t,this._database=e,this._openLog=r):console.log("This browser doesn't support IndexedDB")}return Xse(i,[{key:"open",value:function(){var t=this;return new Promise(function(n,r){try{var o=t;if(o._db)return n(o._db);var s=indexedDB.open(o._database,o._version);s.onsuccess=function(){o._db=s.result,o._db.onversionchange=function(a){console.log("onversionchange",a)},n(s.result),console.log("Open indexedDB success!")},s.onupgradeneeded=function(a){console.log("openDb.onupgradeneeded",a),o._db=s.result,o._db.objectStoreNames.contains(o._storeName)||o._db.createObjectStore(o._storeName),n(s.result)},s.onblocked=function(a){console.log("openDb onblocked",a)},s.onerror=function(a){console.log("Maybe you not allow my web app to use IndexedDB!"),r(a)}}catch(a){console.error(a),r(a)}})}},{key:"getObjectStore",value:function(t,n){if(this._db){var r=this._db.transaction([t],n);return r.objectStore(t)}return null}},{key:"add",value:function(t,n){return this.wrapStoreOperationPromise(function(r){return r.add(t,n)})}},{key:"set",value:function(t,n){return this.log("IndexedDB set",t,n),this.wrapStoreOperationPromise(function(r){return r.put(n,t)})}},{key:"get",value:function(t){return this.log("IndexedDB get",t),this.wrapStoreOperationPromise(function(n){return n.get(t)})}},{key:"delete",value:function(t){return this.wrapStoreOperationPromise(function(n){return n.delete(t)})}},{key:"clear",value:function(){return this.wrapStoreOperationPromise(function(t){return t.clear()})}},{key:"getStore",value:function(){return this.getObjectStore(this._storeName,"readwrite")}},{key:"wrapStoreOperationPromise",value:function(t){var n=this;return new Promise(function(r,o){try{var s=n.getObjectStore(n._storeName,"readwrite");if(s){var a=t(s);a.onsuccess=function(u){return r(u.target.result)},a.onerror=function(u){return o(u)}}}catch(u){console.error(u),o(u)}})}},{key:"log",value:function(){if(this._openLog){var t;(t=console).log.apply(t,arguments)}}}]),i}(),Sbe={set:function(e,t){if(!t)delete window.localStorage[e];else{var n=PV(t)==="object"?JSON.stringify(t):t;window.localStorage[e]=n}},get:function(e){var t=window.localStorage[e]||"";return vh.isJSONStr(t)?JSON.parse(t):t},remove:function(e){delete window.localStorage[e]},clear:function(){window.localStorage.clear()}};W0.Cookie=vbe;W0.CopyUtils=wbe;W0.DateTime=bbe;W0.Layout=Cbe;W0.LocalDB=Sbe;W0.LocalIndexedDB=ybe;var eae=W0.Utils=vh;const j5="mo";function Hn(i,e=j5){return i?`${e}-${i}`:""}function mn(...i){if(wr.isEmpty(i))return;const e=[];for(const t of i){if(!t)continue;const n=typeof t;if(n==="string"||n==="number"){e.push(`${t}`);continue}if(n==="object"){if(t.toString!==Object.prototype.toString){e.push(t.toString());continue}for(const r in t)Object.hasOwnProperty.call(t,r)&&t[r]&&e.push(r)}}return e.join(" ")}function gt(i,e){return`${i}__${e}`}function _n(i,e){return`${i}--${e}`}function tae(){return eae.isMacOs()?"mac":""}const K5=Object.assign({},G1e);let aF;const lF=Symbol("__molecule__root");z5.version.startsWith("18")&&(aF=K5.createRoot);function VX(i){const{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:e}=K5;e&&typeof e=="object"&&(e.usingClientEntryPoint=i)}const uF=(i,e)=>{if(aF){VX(!0);const t=e[lF]||aF(e);VX(!1),t.render(i),e[lF]=t;return}K5.render(i,e)},nae=i=>{var e;return aF?((e=i[lF])===null||e===void 0||e.unmount(),Reflect.deleteProperty(i,lF),!0):K5.unmountComponentAtNode(i)},ey=document.querySelector.bind(document);document.querySelectorAll.bind(document);function Lbe(){const i=document.body,e=document.documentElement,t=e.clientWidth,n=e.clientHeight,r=Math.max(i.scrollHeight,i.offsetHeight,n,e.scrollHeight,e.offsetHeight),o=Math.max(i.scrollWidth,i.offsetWidth,t,e.scrollWidth,e.offsetWidth);return{height:r,width:o,clientWidth:t,clientHeight:n}}function iae(i,e){const{clientWidth:t,clientHeight:n}=Lbe(),r=e.x,o=e.y,s=t-r,a=n-o,u=i.offsetHeight,d=i.offsetWidth,h=s<d?r-d:r,f=a<u?o-u:o;return{x:h,y:f}}function cF(i){return{x:i.clientX,y:i.clientY}}function rae(i){switch(i){case"click":return"onClick";case"hover":return"onMouseOver";case"contextmenu":return"onContextMenu";default:return i}}function HX(i,e){let t=e.x,n=e.y;return i==="top"?n=e.y-e.height:i==="right"?t=e.x+e.width:i==="bottom"?n=e.y+e.height:i==="left"?t=e.x-e.width:i==="rightBottom"&&(t=e.x+e.width,n=e.y+e.height),{x:t,y:n}}function hR(i,e){return i.getAttribute(e)||""}function _b(i){return Object.keys(i).reduce((e,t)=>(t.startsWith("data-")&&(e[t]=i[t]),e),{})}function $X(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ebe(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$X(Object(t),!0).forEach(function(n){xbe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):$X(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function xbe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function zX(i,e){return Dbe(i)||Ibe(i,e)||oae(i,e)||kbe()}function Dbe(i){if(Array.isArray(i))return i}function Ibe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n=[],r=!0,o=!1,s,a;try{for(t=t.call(i);!(r=(s=t.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){o=!0,a=u}finally{try{!r&&t.return!=null&&t.return()}finally{if(o)throw a}}return n}}function oae(i,e){if(i){if(typeof i=="string")return UX(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return UX(i,e)}}function UX(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function kbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tbe(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=oae(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(s)throw a}}}}var hw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sae(i,e){return e={exports:{}},i(e,e.exports),e.exports}var Q7=sae(function(i,e){(function(){var t,n="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",f=1,p=2,m=4,v=1,b=2,L=1,S=2,y=4,E=8,A=16,N=32,V=64,R=128,M=256,K=512,X=30,$="...",D=800,T=16,F=1,B=2,U=3,G=1/0,Z=9007199254740991,z=17976931348623157e292,O=0/0,Y=4294967295,fe=Y-1,ne=Y>>>1,we=[["ary",R],["bind",L],["bindKey",S],["curry",E],["curryRight",A],["flip",K],["partial",N],["partialRight",V],["rearg",M]],Ie="[object Arguments]",je="[object Array]",dt="[object AsyncFunction]",At="[object Boolean]",Me="[object Date]",st="[object DOMException]",bt="[object Error]",tt="[object Function]",tn="[object GeneratorFunction]",Zt="[object Map]",nn="[object Number]",On="[object Null]",Tn="[object Object]",ei="[object Promise]",Ln="[object Proxy]",Mn="[object RegExp]",Pt="[object Set]",pn="[object String]",mi="[object Symbol]",Te="[object Undefined]",Fe="[object WeakMap]",pt="[object WeakSet]",at="[object ArrayBuffer]",Ct="[object DataView]",wi="[object Float32Array]",Vt="[object Float64Array]",kt="[object Int8Array]",Kt="[object Int16Array]",Gt="[object Int32Array]",Bt="[object Uint8Array]",fr="[object Uint8ClampedArray]",ti="[object Uint16Array]",Ve="[object Uint32Array]",Pa=/\b__p \+= '';/g,$n=/\b(__p \+=) '' \+/g,ni=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,vn=/[&<>"']/g,ir=RegExp(Gs.source),ol=RegExp(vn.source),Ki=/<%-([\s\S]+?)%>/g,Ye=/<%([\s\S]+?)%>/g,is=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/,Ae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(se.source),pe=/^\s+/,J=/\s/,ve=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,He=/\{\n\/\* \[wrapped with (.+)\] \*/,Re=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,k=/\\(\\)?/g,W=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,te=/\w*$/,ie=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,le=/^\[object .+?Constructor\]$/,De=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ot=/($^)/,Tt=/['\n\r\u2028\u2029\\]/g,Ft="\\ud800-\\udfff",Ot="\\u0300-\\u036f",wt="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",zn=Ot+wt+si,rr="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Fa="\\xac\\xb1\\xd7\\xf7",sl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Og="\\u2000-\\u206f",fL=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jp="A-Z\\xc0-\\xd6\\xd8-\\xde",Kp="\\ufe0e\\ufe0f",Gp=Fa+sl+Og+fL,sd="['’]",gL="["+Ft+"]",qp="["+Gp+"]",Ol="["+zn+"]",Yp="\\d+",pL="["+rr+"]",Zp="["+$i+"]",Xp="[^"+Ft+Gp+Yp+rr+$i+jp+"]",ad="\\ud83c[\\udffb-\\udfff]",mL="(?:"+Ol+"|"+ad+")",Qp="[^"+Ft+"]",ld="(?:\\ud83c[\\udde6-\\uddff]){2}",ud="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+jp+"]",Jp="\\u200d",em="(?:"+Zp+"|"+Xp+")",_L="(?:"+hs+"|"+Xp+")",tm="(?:"+sd+"(?:d|ll|m|re|s|t|ve))?",nm="(?:"+sd+"(?:D|LL|M|RE|S|T|VE))?",im=mL+"?",rm="["+Kp+"]?",vL="(?:"+Jp+"(?:"+[Qp,ld,ud].join("|")+")"+rm+im+")*",bL="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CL="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",om=rm+im+vL,wL="(?:"+[pL,ld,ud].join("|")+")"+om,yL="(?:"+[Qp+Ol+"?",Ol,ld,ud,gL].join("|")+")",SL=RegExp(sd,"g"),LL=RegExp(Ol,"g"),cd=RegExp(ad+"(?="+ad+")|"+yL+om,"g"),EL=RegExp([hs+"?"+Zp+"+"+tm+"(?="+[qp,hs,"$"].join("|")+")",_L+"+"+nm+"(?="+[qp,hs+em,"$"].join("|")+")",hs+"?"+em+"+"+tm,hs+"+"+nm,CL,bL,Yp,wL].join("|"),"g"),xL=RegExp("["+Jp+Ft+zn+Kp+"]"),DL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,IL=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kL=-1,jt={};jt[wi]=jt[Vt]=jt[kt]=jt[Kt]=jt[Gt]=jt[Bt]=jt[fr]=jt[ti]=jt[Ve]=!0,jt[Ie]=jt[je]=jt[at]=jt[At]=jt[Ct]=jt[Me]=jt[bt]=jt[tt]=jt[Zt]=jt[nn]=jt[Tn]=jt[Mn]=jt[Pt]=jt[pn]=jt[Fe]=!1;var $t={};$t[Ie]=$t[je]=$t[at]=$t[Ct]=$t[At]=$t[Me]=$t[wi]=$t[Vt]=$t[kt]=$t[Kt]=$t[Gt]=$t[Zt]=$t[nn]=$t[Tn]=$t[Mn]=$t[Pt]=$t[pn]=$t[mi]=$t[Bt]=$t[fr]=$t[ti]=$t[Ve]=!0,$t[bt]=$t[tt]=$t[Fe]=!1;var TL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},NL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AL={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},OL={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ML=parseFloat,RL=parseInt,sm=typeof hw=="object"&&hw&&hw.Object===Object&&hw,PL=typeof self=="object"&&self&&self.Object===Object&&self,xn=sm||PL||Function("return this")(),dd=e&&!e.nodeType&&e,To=dd&&!0&&i&&!i.nodeType&&i,am=To&&To.exports===dd,hd=am&&sm.process,Ai=function(){try{var j=To&&To.require&&To.require("util").types;return j||hd&&hd.binding&&hd.binding("util")}catch{}}(),lm=Ai&&Ai.isArrayBuffer,um=Ai&&Ai.isDate,cm=Ai&&Ai.isMap,dm=Ai&&Ai.isRegExp,hm=Ai&&Ai.isSet,fm=Ai&&Ai.isTypedArray;function yi(j,oe,ee){switch(ee.length){case 0:return j.call(oe);case 1:return j.call(oe,ee[0]);case 2:return j.call(oe,ee[0],ee[1]);case 3:return j.call(oe,ee[0],ee[1],ee[2])}return j.apply(oe,ee)}function FL(j,oe,ee,xe){for(var Xe=-1,St=j==null?0:j.length;++Xe<St;){var bn=j[Xe];oe(xe,bn,ee(bn),j)}return xe}function Oi(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe&&oe(j[ee],ee,j)!==!1;);return j}function BL(j,oe){for(var ee=j==null?0:j.length;ee--&&oe(j[ee],ee,j)!==!1;);return j}function gm(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe;)if(!oe(j[ee],ee,j))return!1;return!0}function Qr(j,oe){for(var ee=-1,xe=j==null?0:j.length,Xe=0,St=[];++ee<xe;){var bn=j[ee];oe(bn,ee,j)&&(St[Xe++]=bn)}return St}function Ml(j,oe){var ee=j==null?0:j.length;return!!ee&&fs(j,oe,0)>-1}function fd(j,oe,ee){for(var xe=-1,Xe=j==null?0:j.length;++xe<Xe;)if(ee(oe,j[xe]))return!0;return!1}function Jt(j,oe){for(var ee=-1,xe=j==null?0:j.length,Xe=Array(xe);++ee<xe;)Xe[ee]=oe(j[ee],ee,j);return Xe}function Jr(j,oe){for(var ee=-1,xe=oe.length,Xe=j.length;++ee<xe;)j[Xe+ee]=oe[ee];return j}function gd(j,oe,ee,xe){var Xe=-1,St=j==null?0:j.length;for(xe&&St&&(ee=j[++Xe]);++Xe<St;)ee=oe(ee,j[Xe],Xe,j);return ee}function WL(j,oe,ee,xe){var Xe=j==null?0:j.length;for(xe&&Xe&&(ee=j[--Xe]);Xe--;)ee=oe(ee,j[Xe],Xe,j);return ee}function pd(j,oe){for(var ee=-1,xe=j==null?0:j.length;++ee<xe;)if(oe(j[ee],ee,j))return!0;return!1}var VL=md("length");function HL(j){return j.split("")}function $L(j){return j.match(ct)||[]}function pm(j,oe,ee){var xe;return ee(j,function(Xe,St,bn){if(oe(Xe,St,bn))return xe=St,!1}),xe}function Rl(j,oe,ee,xe){for(var Xe=j.length,St=ee+(xe?1:-1);xe?St--:++St<Xe;)if(oe(j[St],St,j))return St;return-1}function fs(j,oe,ee){return oe===oe?eE(j,oe,ee):Rl(j,mm,ee)}function zL(j,oe,ee,xe){for(var Xe=ee-1,St=j.length;++Xe<St;)if(xe(j[Xe],oe))return Xe;return-1}function mm(j){return j!==j}function _m(j,oe){var ee=j==null?0:j.length;return ee?vd(j,oe)/ee:O}function md(j){return function(oe){return oe==null?t:oe[j]}}function _d(j){return function(oe){return j==null?t:j[oe]}}function vm(j,oe,ee,xe,Xe){return Xe(j,function(St,bn,Wt){ee=xe?(xe=!1,St):oe(ee,St,bn,Wt)}),ee}function UL(j,oe){var ee=j.length;for(j.sort(oe);ee--;)j[ee]=j[ee].value;return j}function vd(j,oe){for(var ee,xe=-1,Xe=j.length;++xe<Xe;){var St=oe(j[xe]);St!==t&&(ee=ee===t?St:ee+St)}return ee}function bd(j,oe){for(var ee=-1,xe=Array(j);++ee<j;)xe[ee]=oe(ee);return xe}function jL(j,oe){return Jt(oe,function(ee){return[ee,j[ee]]})}function bm(j){return j&&j.slice(0,Sm(j)+1).replace(pe,"")}function Si(j){return function(oe){return j(oe)}}function Cd(j,oe){return Jt(oe,function(ee){return j[ee]})}function ua(j,oe){return j.has(oe)}function Cm(j,oe){for(var ee=-1,xe=j.length;++ee<xe&&fs(oe,j[ee],0)>-1;);return ee}function wm(j,oe){for(var ee=j.length;ee--&&fs(oe,j[ee],0)>-1;);return ee}function KL(j,oe){for(var ee=j.length,xe=0;ee--;)j[ee]===oe&&++xe;return xe}var GL=_d(TL),qL=_d(NL);function YL(j){return"\\"+OL[j]}function ZL(j,oe){return j==null?t:j[oe]}function gs(j){return xL.test(j)}function XL(j){return DL.test(j)}function QL(j){for(var oe,ee=[];!(oe=j.next()).done;)ee.push(oe.value);return ee}function wd(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe,Xe){ee[++oe]=[Xe,xe]}),ee}function ym(j,oe){return function(ee){return j(oe(ee))}}function eo(j,oe){for(var ee=-1,xe=j.length,Xe=0,St=[];++ee<xe;){var bn=j[ee];(bn===oe||bn===h)&&(j[ee]=h,St[Xe++]=ee)}return St}function Pl(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe){ee[++oe]=xe}),ee}function JL(j){var oe=-1,ee=Array(j.size);return j.forEach(function(xe){ee[++oe]=[xe,xe]}),ee}function eE(j,oe,ee){for(var xe=ee-1,Xe=j.length;++xe<Xe;)if(j[xe]===oe)return xe;return-1}function tE(j,oe,ee){for(var xe=ee+1;xe--;)if(j[xe]===oe)return xe;return xe}function ps(j){return gs(j)?iE(j):VL(j)}function Yi(j){return gs(j)?rE(j):HL(j)}function Sm(j){for(var oe=j.length;oe--&&J.test(j.charAt(oe)););return oe}var nE=_d(AL);function iE(j){for(var oe=cd.lastIndex=0;cd.test(j);)++oe;return oe}function rE(j){return j.match(cd)||[]}function oE(j){return j.match(EL)||[]}var sE=function j(oe){oe=oe==null?xn:ms.defaults(xn.Object(),oe,ms.pick(xn,IL));var ee=oe.Array,xe=oe.Date,Xe=oe.Error,St=oe.Function,bn=oe.Math,Wt=oe.Object,yd=oe.RegExp,aE=oe.String,Mi=oe.TypeError,Fl=ee.prototype,lE=St.prototype,_s=Wt.prototype,Bl=oe["__core-js_shared__"],Wl=lE.toString,Nt=_s.hasOwnProperty,uE=0,Lm=function(){var l=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Vl=_s.toString,cE=Wl.call(Wt),dE=xn._,hE=yd("^"+Wl.call(Nt).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=am?oe.Buffer:t,to=oe.Symbol,$l=oe.Uint8Array,Em=Hl?Hl.allocUnsafe:t,zl=ym(Wt.getPrototypeOf,Wt),xm=Wt.create,Dm=_s.propertyIsEnumerable,Ul=Fl.splice,Im=to?to.isConcatSpreadable:t,ca=to?to.iterator:t,No=to?to.toStringTag:t,jl=function(){try{var l=Po(Wt,"defineProperty");return l({},"",{}),l}catch{}}(),fE=oe.clearTimeout!==xn.clearTimeout&&oe.clearTimeout,gE=xe&&xe.now!==xn.Date.now&&xe.now,pE=oe.setTimeout!==xn.setTimeout&&oe.setTimeout,Kl=bn.ceil,Gl=bn.floor,Sd=Wt.getOwnPropertySymbols,mE=Hl?Hl.isBuffer:t,km=oe.isFinite,_E=Fl.join,vE=ym(Wt.keys,Wt),Cn=bn.max,Rn=bn.min,bE=xe.now,CE=oe.parseInt,Tm=bn.random,wE=Fl.reverse,Ld=Po(oe,"DataView"),da=Po(oe,"Map"),Ed=Po(oe,"Promise"),vs=Po(oe,"Set"),ha=Po(oe,"WeakMap"),fa=Po(Wt,"create"),ql=ha&&new ha,bs={},yE=Fo(Ld),SE=Fo(da),LE=Fo(Ed),EE=Fo(vs),xE=Fo(ha),Yl=to?to.prototype:t,ga=Yl?Yl.valueOf:t,Nm=Yl?Yl.toString:t;function x(l){if(an(l)&&!et(l)&&!(l instanceof mt)){if(l instanceof Ri)return l;if(Nt.call(l,"__wrapped__"))return A_(l)}return new Ri(l)}var Cs=function(){function l(){}return function(c){if(!rn(c))return{};if(xm)return xm(c);l.prototype=c;var g=new l;return l.prototype=t,g}}();function Zl(){}function Ri(l,c){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:Ki,evaluate:Ye,interpolate:is,variable:"",imports:{_:x}},x.prototype=Zl.prototype,x.prototype.constructor=x,Ri.prototype=Cs(Zl.prototype),Ri.prototype.constructor=Ri;function mt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function DE(){var l=new mt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l}function IE(){if(this.__filtered__){var l=new mt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function kE(){var l=this.__wrapped__.value(),c=this.__dir__,g=et(l),_=c<0,w=g?l.length:0,I=Hx(0,w,this.__views__),P=I.start,H=I.end,q=H-P,ue=_?H:P-1,ce=this.__iteratees__,ge=ce.length,Se=0,Ne=Rn(q,this.__takeCount__);if(!g||!_&&w==q&&Ne==q)return t_(l,this.__actions__);var $e=[];e:for(;q--&&Se<Ne;){ue+=c;for(var lt=-1,ze=l[ue];++lt<ge;){var ht=ce[lt],vt=ht.iteratee,xi=ht.type,Xn=vt(ze);if(xi==B)ze=Xn;else if(!Xn){if(xi==F)continue e;break e}}$e[Se++]=ze}return $e}mt.prototype=Cs(Zl.prototype),mt.prototype.constructor=mt;function Ao(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function TE(){this.__data__=fa?fa(null):{},this.size=0}function NE(l){var c=this.has(l)&&delete this.__data__[l];return this.size-=c?1:0,c}function AE(l){var c=this.__data__;if(fa){var g=c[l];return g===u?t:g}return Nt.call(c,l)?c[l]:t}function OE(l){var c=this.__data__;return fa?c[l]!==t:Nt.call(c,l)}function ME(l,c){var g=this.__data__;return this.size+=this.has(l)?0:1,g[l]=fa&&c===t?u:c,this}Ao.prototype.clear=TE,Ao.prototype.delete=NE,Ao.prototype.get=AE,Ao.prototype.has=OE,Ao.prototype.set=ME;function Tr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function RE(){this.__data__=[],this.size=0}function PE(l){var c=this.__data__,g=Xl(c,l);if(g<0)return!1;var _=c.length-1;return g==_?c.pop():Ul.call(c,g,1),--this.size,!0}function FE(l){var c=this.__data__,g=Xl(c,l);return g<0?t:c[g][1]}function BE(l){return Xl(this.__data__,l)>-1}function WE(l,c){var g=this.__data__,_=Xl(g,l);return _<0?(++this.size,g.push([l,c])):g[_][1]=c,this}Tr.prototype.clear=RE,Tr.prototype.delete=PE,Tr.prototype.get=FE,Tr.prototype.has=BE,Tr.prototype.set=WE;function Nr(l){var c=-1,g=l==null?0:l.length;for(this.clear();++c<g;){var _=l[c];this.set(_[0],_[1])}}function VE(){this.size=0,this.__data__={hash:new Ao,map:new(da||Tr),string:new Ao}}function HE(l){var c=uu(this,l).delete(l);return this.size-=c?1:0,c}function $E(l){return uu(this,l).get(l)}function zE(l){return uu(this,l).has(l)}function UE(l,c){var g=uu(this,l),_=g.size;return g.set(l,c),this.size+=g.size==_?0:1,this}Nr.prototype.clear=VE,Nr.prototype.delete=HE,Nr.prototype.get=$E,Nr.prototype.has=zE,Nr.prototype.set=UE;function Oo(l){var c=-1,g=l==null?0:l.length;for(this.__data__=new Nr;++c<g;)this.add(l[c])}function jE(l){return this.__data__.set(l,u),this}function KE(l){return this.__data__.has(l)}Oo.prototype.add=Oo.prototype.push=jE,Oo.prototype.has=KE;function Zi(l){var c=this.__data__=new Tr(l);this.size=c.size}function GE(){this.__data__=new Tr,this.size=0}function qE(l){var c=this.__data__,g=c.delete(l);return this.size=c.size,g}function YE(l){return this.__data__.get(l)}function ZE(l){return this.__data__.has(l)}function XE(l,c){var g=this.__data__;if(g instanceof Tr){var _=g.__data__;if(!da||_.length<r-1)return _.push([l,c]),this.size=++g.size,this;g=this.__data__=new Nr(_)}return g.set(l,c),this.size=g.size,this}Zi.prototype.clear=GE,Zi.prototype.delete=qE,Zi.prototype.get=YE,Zi.prototype.has=ZE,Zi.prototype.set=XE;function Am(l,c){var g=et(l),_=!g&&Bo(l),w=!g&&!_&&so(l),I=!g&&!_&&!w&&Ls(l),P=g||_||w||I,H=P?bd(l.length,aE):[],q=H.length;for(var ue in l)(c||Nt.call(l,ue))&&!(P&&(ue=="length"||w&&(ue=="offset"||ue=="parent")||I&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Rr(ue,q)))&&H.push(ue);return H}function Om(l){var c=l.length;return c?l[Pd(0,c-1)]:t}function QE(l,c){return cu(ai(l),Mo(c,0,l.length))}function JE(l){return cu(ai(l))}function xd(l,c,g){(g!==t&&!Xi(l[c],g)||g===t&&!(c in l))&&Ar(l,c,g)}function pa(l,c,g){var _=l[c];(!(Nt.call(l,c)&&Xi(_,g))||g===t&&!(c in l))&&Ar(l,c,g)}function Xl(l,c){for(var g=l.length;g--;)if(Xi(l[g][0],c))return g;return-1}function ex(l,c,g,_){return no(l,function(w,I,P){c(_,w,g(w),P)}),_}function Mm(l,c){return l&&_r(c,yn(c),l)}function tx(l,c){return l&&_r(c,ui(c),l)}function Ar(l,c,g){c=="__proto__"&&jl?jl(l,c,{configurable:!0,enumerable:!0,value:g,writable:!0}):l[c]=g}function Dd(l,c){for(var g=-1,_=c.length,w=ee(_),I=l==null;++g<_;)w[g]=I?t:ah(l,c[g]);return w}function Mo(l,c,g){return l===l&&(g!==t&&(l=l<=g?l:g),c!==t&&(l=l>=c?l:c)),l}function Pi(l,c,g,_,w,I){var P,H=c&f,q=c&p,ue=c&m;if(g&&(P=w?g(l,_,w,I):g(l)),P!==t)return P;if(!rn(l))return l;var ce=et(l);if(ce){if(P=zx(l),!H)return ai(l,P)}else{var ge=Pn(l),Se=ge==tt||ge==tn;if(so(l))return r_(l,H);if(ge==Tn||ge==Ie||Se&&!w){if(P=q||Se?{}:S_(l),!H)return q?Ax(l,tx(P,l)):Nx(l,Mm(P,l))}else{if(!$t[ge])return w?l:{};P=Ux(l,ge,H)}}I||(I=new Zi);var Ne=I.get(l);if(Ne)return Ne;I.set(l,P),Q_(l)?l.forEach(function(ze){P.add(Pi(ze,c,g,ze,l,I))}):Z_(l)&&l.forEach(function(ze,ht){P.set(ht,Pi(ze,c,g,ht,l,I))});var $e=ue?q?Gd:Kd:q?ui:yn,lt=ce?t:$e(l);return Oi(lt||l,function(ze,ht){lt&&(ht=ze,ze=l[ht]),pa(P,ht,Pi(ze,c,g,ht,l,I))}),P}function nx(l){var c=yn(l);return function(g){return Rm(g,l,c)}}function Rm(l,c,g){var _=g.length;if(l==null)return!_;for(l=Wt(l);_--;){var w=g[_],I=c[w],P=l[w];if(P===t&&!(w in l)||!I(P))return!1}return!0}function Pm(l,c,g){if(typeof l!="function")throw new Mi(s);return ya(function(){l.apply(t,g)},c)}function ma(l,c,g,_){var w=-1,I=Ml,P=!0,H=l.length,q=[],ue=c.length;if(!H)return q;g&&(c=Jt(c,Si(g))),_?(I=fd,P=!1):c.length>=r&&(I=ua,P=!1,c=new Oo(c));e:for(;++w<H;){var ce=l[w],ge=g==null?ce:g(ce);if(ce=_||ce!==0?ce:0,P&&ge===ge){for(var Se=ue;Se--;)if(c[Se]===ge)continue e;q.push(ce)}else I(c,ge,_)||q.push(ce)}return q}var no=u_(mr),Fm=u_(kd,!0);function ix(l,c){var g=!0;return no(l,function(_,w,I){return g=!!c(_,w,I),g}),g}function Ql(l,c,g){for(var _=-1,w=l.length;++_<w;){var I=l[_],P=c(I);if(P!=null&&(H===t?P===P&&!Ei(P):g(P,H)))var H=P,q=I}return q}function rx(l,c,g,_){var w=l.length;for(g=rt(g),g<0&&(g=-g>w?0:w+g),_=_===t||_>w?w:rt(_),_<0&&(_+=w),_=g>_?0:ev(_);g<_;)l[g++]=c;return l}function Bm(l,c){var g=[];return no(l,function(_,w,I){c(_,w,I)&&g.push(_)}),g}function Dn(l,c,g,_,w){var I=-1,P=l.length;for(g||(g=Kx),w||(w=[]);++I<P;){var H=l[I];c>0&&g(H)?c>1?Dn(H,c-1,g,_,w):Jr(w,H):_||(w[w.length]=H)}return w}var Id=c_(),Wm=c_(!0);function mr(l,c){return l&&Id(l,c,yn)}function kd(l,c){return l&&Wm(l,c,yn)}function Jl(l,c){return Qr(c,function(g){return Pr(l[g])})}function Ro(l,c){c=ro(c,l);for(var g=0,_=c.length;l!=null&&g<_;)l=l[vr(c[g++])];return g&&g==_?l:t}function Vm(l,c,g){var _=c(l);return et(l)?_:Jr(_,g(l))}function Yn(l){return l==null?l===t?Te:On:No&&No in Wt(l)?Vx(l):Jx(l)}function Td(l,c){return l>c}function ox(l,c){return l!=null&&Nt.call(l,c)}function sx(l,c){return l!=null&&c in Wt(l)}function ax(l,c,g){return l>=Rn(c,g)&&l<Cn(c,g)}function Nd(l,c,g){for(var _=g?fd:Ml,w=l[0].length,I=l.length,P=I,H=ee(I),q=1/0,ue=[];P--;){var ce=l[P];P&&c&&(ce=Jt(ce,Si(c))),q=Rn(ce.length,q),H[P]=!g&&(c||w>=120&&ce.length>=120)?new Oo(P&&ce):t}ce=l[0];var ge=-1,Se=H[0];e:for(;++ge<w&&ue.length<q;){var Ne=ce[ge],$e=c?c(Ne):Ne;if(Ne=g||Ne!==0?Ne:0,!(Se?ua(Se,$e):_(ue,$e,g))){for(P=I;--P;){var lt=H[P];if(!(lt?ua(lt,$e):_(l[P],$e,g)))continue e}Se&&Se.push($e),ue.push(Ne)}}return ue}function lx(l,c,g,_){return mr(l,function(w,I,P){c(_,g(w),I,P)}),_}function _a(l,c,g){c=ro(c,l),l=D_(l,c);var _=l==null?l:l[vr(Bi(c))];return _==null?t:yi(_,l,g)}function Hm(l){return an(l)&&Yn(l)==Ie}function ux(l){return an(l)&&Yn(l)==at}function cx(l){return an(l)&&Yn(l)==Me}function va(l,c,g,_,w){return l===c?!0:l==null||c==null||!an(l)&&!an(c)?l!==l&&c!==c:dx(l,c,g,_,va,w)}function dx(l,c,g,_,w,I){var P=et(l),H=et(c),q=P?je:Pn(l),ue=H?je:Pn(c);q=q==Ie?Tn:q,ue=ue==Ie?Tn:ue;var ce=q==Tn,ge=ue==Tn,Se=q==ue;if(Se&&so(l)){if(!so(c))return!1;P=!0,ce=!1}if(Se&&!ce)return I||(I=new Zi),P||Ls(l)?C_(l,c,g,_,w,I):Bx(l,c,q,g,_,w,I);if(!(g&v)){var Ne=ce&&Nt.call(l,"__wrapped__"),$e=ge&&Nt.call(c,"__wrapped__");if(Ne||$e){var lt=Ne?l.value():l,ze=$e?c.value():c;return I||(I=new Zi),w(lt,ze,g,_,I)}}return Se?(I||(I=new Zi),Wx(l,c,g,_,w,I)):!1}function hx(l){return an(l)&&Pn(l)==Zt}function Ad(l,c,g,_){var w=g.length,I=w,P=!_;if(l==null)return!I;for(l=Wt(l);w--;){var H=g[w];if(P&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++w<I;){H=g[w];var q=H[0],ue=l[q],ce=H[1];if(P&&H[2]){if(ue===t&&!(q in l))return!1}else{var ge=new Zi;if(_)var Se=_(ue,ce,q,l,c,ge);if(!(Se===t?va(ce,ue,v|b,_,ge):Se))return!1}}return!0}function $m(l){if(!rn(l)||qx(l))return!1;var c=Pr(l)?hE:le;return c.test(Fo(l))}function fx(l){return an(l)&&Yn(l)==Mn}function gx(l){return an(l)&&Pn(l)==Pt}function px(l){return an(l)&&mu(l.length)&&!!jt[Yn(l)]}function zm(l){return typeof l=="function"?l:l==null?ci:typeof l=="object"?et(l)?Km(l[0],l[1]):jm(l):dv(l)}function Od(l){if(!wa(l))return vE(l);var c=[];for(var g in Wt(l))Nt.call(l,g)&&g!="constructor"&&c.push(g);return c}function mx(l){if(!rn(l))return Qx(l);var c=wa(l),g=[];for(var _ in l)_=="constructor"&&(c||!Nt.call(l,_))||g.push(_);return g}function Md(l,c){return l<c}function Um(l,c){var g=-1,_=li(l)?ee(l.length):[];return no(l,function(w,I,P){_[++g]=c(w,I,P)}),_}function jm(l){var c=Yd(l);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(g){return g===l||Ad(g,l,c)}}function Km(l,c){return Xd(l)&&L_(c)?E_(vr(l),c):function(g){var _=ah(g,l);return _===t&&_===c?lh(g,l):va(c,_,v|b)}}function eu(l,c,g,_,w){l!==c&&Id(c,function(I,P){if(w||(w=new Zi),rn(I))_x(l,c,P,g,eu,_,w);else{var H=_?_(Jd(l,P),I,P+"",l,c,w):t;H===t&&(H=I),xd(l,P,H)}},ui)}function _x(l,c,g,_,w,I,P){var H=Jd(l,g),q=Jd(c,g),ue=P.get(q);if(ue){xd(l,g,ue);return}var ce=I?I(H,q,g+"",l,c,P):t,ge=ce===t;if(ge){var Se=et(q),Ne=!Se&&so(q),$e=!Se&&!Ne&&Ls(q);ce=q,Se||Ne||$e?et(H)?ce=H:hn(H)?ce=ai(H):Ne?(ge=!1,ce=r_(q,!0)):$e?(ge=!1,ce=o_(q,!0)):ce=[]:Sa(q)||Bo(q)?(ce=H,Bo(H)?ce=tv(H):(!rn(H)||Pr(H))&&(ce=S_(q))):ge=!1}ge&&(P.set(q,ce),w(ce,q,_,I,P),P.delete(q)),xd(l,g,ce)}function Gm(l,c){var g=l.length;if(g)return c+=c<0?g:0,Rr(c,g)?l[c]:t}function qm(l,c,g){c.length?c=Jt(c,function(I){return et(I)?function(P){return Ro(P,I.length===1?I[0]:I)}:I}):c=[ci];var _=-1;c=Jt(c,Si(We()));var w=Um(l,function(I,P,H){var q=Jt(c,function(ue){return ue(I)});return{criteria:q,index:++_,value:I}});return UL(w,function(I,P){return Tx(I,P,g)})}function vx(l,c){return Ym(l,c,function(g,_){return lh(l,_)})}function Ym(l,c,g){for(var _=-1,w=c.length,I={};++_<w;){var P=c[_],H=Ro(l,P);g(H,P)&&ba(I,ro(P,l),H)}return I}function bx(l){return function(c){return Ro(c,l)}}function Rd(l,c,g,_){var w=_?zL:fs,I=-1,P=c.length,H=l;for(l===c&&(c=ai(c)),g&&(H=Jt(l,Si(g)));++I<P;)for(var q=0,ue=c[I],ce=g?g(ue):ue;(q=w(H,ce,q,_))>-1;)H!==l&&Ul.call(H,q,1),Ul.call(l,q,1);return l}function Zm(l,c){for(var g=l?c.length:0,_=g-1;g--;){var w=c[g];if(g==_||w!==I){var I=w;Rr(w)?Ul.call(l,w,1):Wd(l,w)}}return l}function Pd(l,c){return l+Gl(Tm()*(c-l+1))}function Cx(l,c,g,_){for(var w=-1,I=Cn(Kl((c-l)/(g||1)),0),P=ee(I);I--;)P[_?I:++w]=l,l+=g;return P}function Fd(l,c){var g="";if(!l||c<1||c>Z)return g;do c%2&&(g+=l),c=Gl(c/2),c&&(l+=l);while(c);return g}function ut(l,c){return eh(x_(l,c,ci),l+"")}function wx(l){return Om(Es(l))}function yx(l,c){var g=Es(l);return cu(g,Mo(c,0,g.length))}function ba(l,c,g,_){if(!rn(l))return l;c=ro(c,l);for(var w=-1,I=c.length,P=I-1,H=l;H!=null&&++w<I;){var q=vr(c[w]),ue=g;if(q==="__proto__"||q==="constructor"||q==="prototype")return l;if(w!=P){var ce=H[q];ue=_?_(ce,q,H):t,ue===t&&(ue=rn(ce)?ce:Rr(c[w+1])?[]:{})}pa(H,q,ue),H=H[q]}return l}var Xm=ql?function(l,c){return ql.set(l,c),l}:ci,Sx=jl?function(l,c){return jl(l,"toString",{configurable:!0,enumerable:!1,value:ch(c),writable:!0})}:ci;function Lx(l){return cu(Es(l))}function Fi(l,c,g){var _=-1,w=l.length;c<0&&(c=-c>w?0:w+c),g=g>w?w:g,g<0&&(g+=w),w=c>g?0:g-c>>>0,c>>>=0;for(var I=ee(w);++_<w;)I[_]=l[_+c];return I}function Ex(l,c){var g;return no(l,function(_,w,I){return g=c(_,w,I),!g}),!!g}function tu(l,c,g){var _=0,w=l==null?_:l.length;if(typeof c=="number"&&c===c&&w<=ne){for(;_<w;){var I=_+w>>>1,P=l[I];P!==null&&!Ei(P)&&(g?P<=c:P<c)?_=I+1:w=I}return w}return Bd(l,c,ci,g)}function Bd(l,c,g,_){var w=0,I=l==null?0:l.length;if(I===0)return 0;c=g(c);for(var P=c!==c,H=c===null,q=Ei(c),ue=c===t;w<I;){var ce=Gl((w+I)/2),ge=g(l[ce]),Se=ge!==t,Ne=ge===null,$e=ge===ge,lt=Ei(ge);if(P)var ze=_||$e;else ue?ze=$e&&(_||Se):H?ze=$e&&Se&&(_||!Ne):q?ze=$e&&Se&&!Ne&&(_||!lt):Ne||lt?ze=!1:ze=_?ge<=c:ge<c;ze?w=ce+1:I=ce}return Rn(I,fe)}function Qm(l,c){for(var g=-1,_=l.length,w=0,I=[];++g<_;){var P=l[g],H=c?c(P):P;if(!g||!Xi(H,q)){var q=H;I[w++]=P===0?0:P}}return I}function Jm(l){return typeof l=="number"?l:Ei(l)?O:+l}function Li(l){if(typeof l=="string")return l;if(et(l))return Jt(l,Li)+"";if(Ei(l))return Nm?Nm.call(l):"";var c=l+"";return c=="0"&&1/l==-G?"-0":c}function io(l,c,g){var _=-1,w=Ml,I=l.length,P=!0,H=[],q=H;if(g)P=!1,w=fd;else if(I>=r){var ue=c?null:Px(l);if(ue)return Pl(ue);P=!1,w=ua,q=new Oo}else q=c?[]:H;e:for(;++_<I;){var ce=l[_],ge=c?c(ce):ce;if(ce=g||ce!==0?ce:0,P&&ge===ge){for(var Se=q.length;Se--;)if(q[Se]===ge)continue e;c&&q.push(ge),H.push(ce)}else w(q,ge,g)||(q!==H&&q.push(ge),H.push(ce))}return H}function Wd(l,c){return c=ro(c,l),l=D_(l,c),l==null||delete l[vr(Bi(c))]}function e_(l,c,g,_){return ba(l,c,g(Ro(l,c)),_)}function nu(l,c,g,_){for(var w=l.length,I=_?w:-1;(_?I--:++I<w)&&c(l[I],I,l););return g?Fi(l,_?0:I,_?I+1:w):Fi(l,_?I+1:0,_?w:I)}function t_(l,c){var g=l;return g instanceof mt&&(g=g.value()),gd(c,function(_,w){return w.func.apply(w.thisArg,Jr([_],w.args))},g)}function Vd(l,c,g){var _=l.length;if(_<2)return _?io(l[0]):[];for(var w=-1,I=ee(_);++w<_;)for(var P=l[w],H=-1;++H<_;)H!=w&&(I[w]=ma(I[w]||P,l[H],c,g));return io(Dn(I,1),c,g)}function n_(l,c,g){for(var _=-1,w=l.length,I=c.length,P={};++_<w;){var H=_<I?c[_]:t;g(P,l[_],H)}return P}function Hd(l){return hn(l)?l:[]}function $d(l){return typeof l=="function"?l:ci}function ro(l,c){return et(l)?l:Xd(l,c)?[l]:N_(xt(l))}var xx=ut;function oo(l,c,g){var _=l.length;return g=g===t?_:g,!c&&g>=_?l:Fi(l,c,g)}var i_=fE||function(l){return xn.clearTimeout(l)};function r_(l,c){if(c)return l.slice();var g=l.length,_=Em?Em(g):new l.constructor(g);return l.copy(_),_}function zd(l){var c=new l.constructor(l.byteLength);return new $l(c).set(new $l(l)),c}function Dx(l,c){var g=c?zd(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.byteLength)}function Ix(l){var c=new l.constructor(l.source,te.exec(l));return c.lastIndex=l.lastIndex,c}function kx(l){return ga?Wt(ga.call(l)):{}}function o_(l,c){var g=c?zd(l.buffer):l.buffer;return new l.constructor(g,l.byteOffset,l.length)}function s_(l,c){if(l!==c){var g=l!==t,_=l===null,w=l===l,I=Ei(l),P=c!==t,H=c===null,q=c===c,ue=Ei(c);if(!H&&!ue&&!I&&l>c||I&&P&&q&&!H&&!ue||_&&P&&q||!g&&q||!w)return 1;if(!_&&!I&&!ue&&l<c||ue&&g&&w&&!_&&!I||H&&g&&w||!P&&w||!q)return-1}return 0}function Tx(l,c,g){for(var _=-1,w=l.criteria,I=c.criteria,P=w.length,H=g.length;++_<P;){var q=s_(w[_],I[_]);if(q){if(_>=H)return q;var ue=g[_];return q*(ue=="desc"?-1:1)}}return l.index-c.index}function a_(l,c,g,_){for(var w=-1,I=l.length,P=g.length,H=-1,q=c.length,ue=Cn(I-P,0),ce=ee(q+ue),ge=!_;++H<q;)ce[H]=c[H];for(;++w<P;)(ge||w<I)&&(ce[g[w]]=l[w]);for(;ue--;)ce[H++]=l[w++];return ce}function l_(l,c,g,_){for(var w=-1,I=l.length,P=-1,H=g.length,q=-1,ue=c.length,ce=Cn(I-H,0),ge=ee(ce+ue),Se=!_;++w<ce;)ge[w]=l[w];for(var Ne=w;++q<ue;)ge[Ne+q]=c[q];for(;++P<H;)(Se||w<I)&&(ge[Ne+g[P]]=l[w++]);return ge}function ai(l,c){var g=-1,_=l.length;for(c||(c=ee(_));++g<_;)c[g]=l[g];return c}function _r(l,c,g,_){var w=!g;g||(g={});for(var I=-1,P=c.length;++I<P;){var H=c[I],q=_?_(g[H],l[H],H,g,l):t;q===t&&(q=l[H]),w?Ar(g,H,q):pa(g,H,q)}return g}function Nx(l,c){return _r(l,Zd(l),c)}function Ax(l,c){return _r(l,w_(l),c)}function iu(l,c){return function(g,_){var w=et(g)?FL:ex,I=c?c():{};return w(g,l,We(_,2),I)}}function ws(l){return ut(function(c,g){var _=-1,w=g.length,I=w>1?g[w-1]:t,P=w>2?g[2]:t;for(I=l.length>3&&typeof I=="function"?(w--,I):t,P&&Zn(g[0],g[1],P)&&(I=w<3?t:I,w=1),c=Wt(c);++_<w;){var H=g[_];H&&l(c,H,_,I)}return c})}function u_(l,c){return function(g,_){if(g==null)return g;if(!li(g))return l(g,_);for(var w=g.length,I=c?w:-1,P=Wt(g);(c?I--:++I<w)&&_(P[I],I,P)!==!1;);return g}}function c_(l){return function(c,g,_){for(var w=-1,I=Wt(c),P=_(c),H=P.length;H--;){var q=P[l?H:++w];if(g(I[q],q,I)===!1)break}return c}}function Ox(l,c,g){var _=c&L,w=Ca(l);function I(){var P=this&&this!==xn&&this instanceof I?w:l;return P.apply(_?g:this,arguments)}return I}function d_(l){return function(c){c=xt(c);var g=gs(c)?Yi(c):t,_=g?g[0]:c.charAt(0),w=g?oo(g,1).join(""):c.slice(1);return _[l]()+w}}function ys(l){return function(c){return gd(uv(lv(c).replace(SL,"")),l,"")}}function Ca(l){return function(){var c=arguments;switch(c.length){case 0:return new l;case 1:return new l(c[0]);case 2:return new l(c[0],c[1]);case 3:return new l(c[0],c[1],c[2]);case 4:return new l(c[0],c[1],c[2],c[3]);case 5:return new l(c[0],c[1],c[2],c[3],c[4]);case 6:return new l(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var g=Cs(l.prototype),_=l.apply(g,c);return rn(_)?_:g}}function Mx(l,c,g){var _=Ca(l);function w(){for(var I=arguments.length,P=ee(I),H=I,q=Ss(w);H--;)P[H]=arguments[H];var ue=I<3&&P[0]!==q&&P[I-1]!==q?[]:eo(P,q);if(I-=ue.length,I<g)return m_(l,c,ru,w.placeholder,t,P,ue,t,t,g-I);var ce=this&&this!==xn&&this instanceof w?_:l;return yi(ce,this,P)}return w}function h_(l){return function(c,g,_){var w=Wt(c);if(!li(c)){var I=We(g,3);c=yn(c),g=function(H){return I(w[H],H,w)}}var P=l(c,g,_);return P>-1?w[I?c[P]:P]:t}}function f_(l){return Mr(function(c){var g=c.length,_=g,w=Ri.prototype.thru;for(l&&c.reverse();_--;){var I=c[_];if(typeof I!="function")throw new Mi(s);if(w&&!P&&lu(I)=="wrapper")var P=new Ri([],!0)}for(_=P?_:g;++_<g;){I=c[_];var H=lu(I),q=H=="wrapper"?qd(I):t;q&&Qd(q[0])&&q[1]==(R|E|N|M)&&!q[4].length&&q[9]==1?P=P[lu(q[0])].apply(P,q[3]):P=I.length==1&&Qd(I)?P[H]():P.thru(I)}return function(){var ue=arguments,ce=ue[0];if(P&&ue.length==1&&et(ce))return P.plant(ce).value();for(var ge=0,Se=g?c[ge].apply(this,ue):ce;++ge<g;)Se=c[ge].call(this,Se);return Se}})}function ru(l,c,g,_,w,I,P,H,q,ue){var ce=c&R,ge=c&L,Se=c&S,Ne=c&(E|A),$e=c&K,lt=Se?t:Ca(l);function ze(){for(var ht=arguments.length,vt=ee(ht),xi=ht;xi--;)vt[xi]=arguments[xi];if(Ne)var Xn=Ss(ze),Di=KL(vt,Xn);if(_&&(vt=a_(vt,_,w,Ne)),I&&(vt=l_(vt,I,P,Ne)),ht-=Di,Ne&&ht<ue){var fn=eo(vt,Xn);return m_(l,c,ru,ze.placeholder,g,vt,fn,H,q,ue-ht)}var Qi=ge?g:this,Br=Se?Qi[l]:l;return ht=vt.length,H?vt=eD(vt,H):$e&&ht>1&&vt.reverse(),ce&&q<ht&&(vt.length=q),this&&this!==xn&&this instanceof ze&&(Br=lt||Ca(Br)),Br.apply(Qi,vt)}return ze}function g_(l,c){return function(g,_){return lx(g,l,c(_),{})}}function ou(l,c){return function(g,_){var w;if(g===t&&_===t)return c;if(g!==t&&(w=g),_!==t){if(w===t)return _;typeof g=="string"||typeof _=="string"?(g=Li(g),_=Li(_)):(g=Jm(g),_=Jm(_)),w=l(g,_)}return w}}function Ud(l){return Mr(function(c){return c=Jt(c,Si(We())),ut(function(g){var _=this;return l(c,function(w){return yi(w,_,g)})})})}function su(l,c){c=c===t?" ":Li(c);var g=c.length;if(g<2)return g?Fd(c,l):c;var _=Fd(c,Kl(l/ps(c)));return gs(c)?oo(Yi(_),0,l).join(""):_.slice(0,l)}function Rx(l,c,g,_){var w=c&L,I=Ca(l);function P(){for(var H=-1,q=arguments.length,ue=-1,ce=_.length,ge=ee(ce+q),Se=this&&this!==xn&&this instanceof P?I:l;++ue<ce;)ge[ue]=_[ue];for(;q--;)ge[ue++]=arguments[++H];return yi(Se,w?g:this,ge)}return P}function p_(l){return function(c,g,_){return _&&typeof _!="number"&&Zn(c,g,_)&&(g=_=t),c=Fr(c),g===t?(g=c,c=0):g=Fr(g),_=_===t?c<g?1:-1:Fr(_),Cx(c,g,_,l)}}function au(l){return function(c,g){return typeof c=="string"&&typeof g=="string"||(c=Wi(c),g=Wi(g)),l(c,g)}}function m_(l,c,g,_,w,I,P,H,q,ue){var ce=c&E,ge=ce?P:t,Se=ce?t:P,Ne=ce?I:t,$e=ce?t:I;c|=ce?N:V,c&=~(ce?V:N),c&y||(c&=~(L|S));var lt=[l,c,w,Ne,ge,$e,Se,H,q,ue],ze=g.apply(t,lt);return Qd(l)&&I_(ze,lt),ze.placeholder=_,k_(ze,l,c)}function jd(l){var c=bn[l];return function(g,_){if(g=Wi(g),_=_==null?0:Rn(rt(_),292),_&&km(g)){var w=(xt(g)+"e").split("e"),I=c(w[0]+"e"+(+w[1]+_));return w=(xt(I)+"e").split("e"),+(w[0]+"e"+(+w[1]-_))}return c(g)}}var Px=vs&&1/Pl(new vs([,-0]))[1]==G?function(l){return new vs(l)}:fh;function __(l){return function(c){var g=Pn(c);return g==Zt?wd(c):g==Pt?JL(c):jL(c,l(c))}}function Or(l,c,g,_,w,I,P,H){var q=c&S;if(!q&&typeof l!="function")throw new Mi(s);var ue=_?_.length:0;if(ue||(c&=~(N|V),_=w=t),P=P===t?P:Cn(rt(P),0),H=H===t?H:rt(H),ue-=w?w.length:0,c&V){var ce=_,ge=w;_=w=t}var Se=q?t:qd(l),Ne=[l,c,g,_,w,ce,ge,I,P,H];if(Se&&Xx(Ne,Se),l=Ne[0],c=Ne[1],g=Ne[2],_=Ne[3],w=Ne[4],H=Ne[9]=Ne[9]===t?q?0:l.length:Cn(Ne[9]-ue,0),!H&&c&(E|A)&&(c&=~(E|A)),!c||c==L)var $e=Ox(l,c,g);else c==E||c==A?$e=Mx(l,c,H):(c==N||c==(L|N))&&!w.length?$e=Rx(l,c,g,_):$e=ru.apply(t,Ne);var lt=Se?Xm:I_;return k_(lt($e,Ne),l,c)}function v_(l,c,g,_){return l===t||Xi(l,_s[g])&&!Nt.call(_,g)?c:l}function b_(l,c,g,_,w,I){return rn(l)&&rn(c)&&(I.set(c,l),eu(l,c,t,b_,I),I.delete(c)),l}function Fx(l){return Sa(l)?t:l}function C_(l,c,g,_,w,I){var P=g&v,H=l.length,q=c.length;if(H!=q&&!(P&&q>H))return!1;var ue=I.get(l),ce=I.get(c);if(ue&&ce)return ue==c&&ce==l;var ge=-1,Se=!0,Ne=g&b?new Oo:t;for(I.set(l,c),I.set(c,l);++ge<H;){var $e=l[ge],lt=c[ge];if(_)var ze=P?_(lt,$e,ge,c,l,I):_($e,lt,ge,l,c,I);if(ze!==t){if(ze)continue;Se=!1;break}if(Ne){if(!pd(c,function(ht,vt){if(!ua(Ne,vt)&&($e===ht||w($e,ht,g,_,I)))return Ne.push(vt)})){Se=!1;break}}else if(!($e===lt||w($e,lt,g,_,I))){Se=!1;break}}return I.delete(l),I.delete(c),Se}function Bx(l,c,g,_,w,I,P){switch(g){case Ct:if(l.byteLength!=c.byteLength||l.byteOffset!=c.byteOffset)return!1;l=l.buffer,c=c.buffer;case at:return!(l.byteLength!=c.byteLength||!I(new $l(l),new $l(c)));case At:case Me:case nn:return Xi(+l,+c);case bt:return l.name==c.name&&l.message==c.message;case Mn:case pn:return l==c+"";case Zt:var H=wd;case Pt:var q=_&v;if(H||(H=Pl),l.size!=c.size&&!q)return!1;var ue=P.get(l);if(ue)return ue==c;_|=b,P.set(l,c);var ce=C_(H(l),H(c),_,w,I,P);return P.delete(l),ce;case mi:if(ga)return ga.call(l)==ga.call(c)}return!1}function Wx(l,c,g,_,w,I){var P=g&v,H=Kd(l),q=H.length,ue=Kd(c),ce=ue.length;if(q!=ce&&!P)return!1;for(var ge=q;ge--;){var Se=H[ge];if(!(P?Se in c:Nt.call(c,Se)))return!1}var Ne=I.get(l),$e=I.get(c);if(Ne&&$e)return Ne==c&&$e==l;var lt=!0;I.set(l,c),I.set(c,l);for(var ze=P;++ge<q;){Se=H[ge];var ht=l[Se],vt=c[Se];if(_)var xi=P?_(vt,ht,Se,c,l,I):_(ht,vt,Se,l,c,I);if(!(xi===t?ht===vt||w(ht,vt,g,_,I):xi)){lt=!1;break}ze||(ze=Se=="constructor")}if(lt&&!ze){var Xn=l.constructor,Di=c.constructor;Xn!=Di&&"constructor"in l&&"constructor"in c&&!(typeof Xn=="function"&&Xn instanceof Xn&&typeof Di=="function"&&Di instanceof Di)&&(lt=!1)}return I.delete(l),I.delete(c),lt}function Mr(l){return eh(x_(l,t,R_),l+"")}function Kd(l){return Vm(l,yn,Zd)}function Gd(l){return Vm(l,ui,w_)}var qd=ql?function(l){return ql.get(l)}:fh;function lu(l){for(var c=l.name+"",g=bs[c],_=Nt.call(bs,c)?g.length:0;_--;){var w=g[_],I=w.func;if(I==null||I==l)return w.name}return c}function Ss(l){var c=Nt.call(x,"placeholder")?x:l;return c.placeholder}function We(){var l=x.iteratee||dh;return l=l===dh?zm:l,arguments.length?l(arguments[0],arguments[1]):l}function uu(l,c){var g=l.__data__;return Gx(c)?g[typeof c=="string"?"string":"hash"]:g.map}function Yd(l){for(var c=yn(l),g=c.length;g--;){var _=c[g],w=l[_];c[g]=[_,w,L_(w)]}return c}function Po(l,c){var g=ZL(l,c);return $m(g)?g:t}function Vx(l){var c=Nt.call(l,No),g=l[No];try{l[No]=t;var _=!0}catch{}var w=Vl.call(l);return _&&(c?l[No]=g:delete l[No]),w}var Zd=Sd?function(l){return l==null?[]:(l=Wt(l),Qr(Sd(l),function(c){return Dm.call(l,c)}))}:gh,w_=Sd?function(l){for(var c=[];l;)Jr(c,Zd(l)),l=zl(l);return c}:gh,Pn=Yn;(Ld&&Pn(new Ld(new ArrayBuffer(1)))!=Ct||da&&Pn(new da)!=Zt||Ed&&Pn(Ed.resolve())!=ei||vs&&Pn(new vs)!=Pt||ha&&Pn(new ha)!=Fe)&&(Pn=function(l){var c=Yn(l),g=c==Tn?l.constructor:t,_=g?Fo(g):"";if(_)switch(_){case yE:return Ct;case SE:return Zt;case LE:return ei;case EE:return Pt;case xE:return Fe}return c});function Hx(l,c,g){for(var _=-1,w=g.length;++_<w;){var I=g[_],P=I.size;switch(I.type){case"drop":l+=P;break;case"dropRight":c-=P;break;case"take":c=Rn(c,l+P);break;case"takeRight":l=Cn(l,c-P);break}}return{start:l,end:c}}function $x(l){var c=l.match(He);return c?c[1].split(Re):[]}function y_(l,c,g){c=ro(c,l);for(var _=-1,w=c.length,I=!1;++_<w;){var P=vr(c[_]);if(!(I=l!=null&&g(l,P)))break;l=l[P]}return I||++_!=w?I:(w=l==null?0:l.length,!!w&&mu(w)&&Rr(P,w)&&(et(l)||Bo(l)))}function zx(l){var c=l.length,g=new l.constructor(c);return c&&typeof l[0]=="string"&&Nt.call(l,"index")&&(g.index=l.index,g.input=l.input),g}function S_(l){return typeof l.constructor=="function"&&!wa(l)?Cs(zl(l)):{}}function Ux(l,c,g){var _=l.constructor;switch(c){case at:return zd(l);case At:case Me:return new _(+l);case Ct:return Dx(l,g);case wi:case Vt:case kt:case Kt:case Gt:case Bt:case fr:case ti:case Ve:return o_(l,g);case Zt:return new _;case nn:case pn:return new _(l);case Mn:return Ix(l);case Pt:return new _;case mi:return kx(l)}}function jx(l,c){var g=c.length;if(!g)return l;var _=g-1;return c[_]=(g>1?"& ":"")+c[_],c=c.join(g>2?", ":" "),l.replace(ve,`{
/* [wrapped with `+c+`] */
`)}function Kx(l){return et(l)||Bo(l)||!!(Im&&l&&l[Im])}function Rr(l,c){var g=typeof l;return c=c??Z,!!c&&(g=="number"||g!="symbol"&&Pe.test(l))&&l>-1&&l%1==0&&l<c}function Zn(l,c,g){if(!rn(g))return!1;var _=typeof c;return(_=="number"?li(g)&&Rr(c,g.length):_=="string"&&c in g)?Xi(g[c],l):!1}function Xd(l,c){if(et(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||Ei(l)?!0:Ee.test(l)||!ke.test(l)||c!=null&&l in Wt(c)}function Gx(l){var c=typeof l;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?l!=="__proto__":l===null}function Qd(l){var c=lu(l),g=x[c];if(typeof g!="function"||!(c in mt.prototype))return!1;if(l===g)return!0;var _=qd(g);return!!_&&l===_[0]}function qx(l){return!!Lm&&Lm in l}var Yx=Bl?Pr:ph;function wa(l){var c=l&&l.constructor,g=typeof c=="function"&&c.prototype||_s;return l===g}function L_(l){return l===l&&!rn(l)}function E_(l,c){return function(g){return g==null?!1:g[l]===c&&(c!==t||l in Wt(g))}}function Zx(l){var c=gu(l,function(_){return g.size===d&&g.clear(),_}),g=c.cache;return c}function Xx(l,c){var g=l[1],_=c[1],w=g|_,I=w<(L|S|R),P=_==R&&g==E||_==R&&g==M&&l[7].length<=c[8]||_==(R|M)&&c[7].length<=c[8]&&g==E;if(!(I||P))return l;_&L&&(l[2]=c[2],w|=g&L?0:y);var H=c[3];if(H){var q=l[3];l[3]=q?a_(q,H,c[4]):H,l[4]=q?eo(l[3],h):c[4]}return H=c[5],H&&(q=l[5],l[5]=q?l_(q,H,c[6]):H,l[6]=q?eo(l[5],h):c[6]),H=c[7],H&&(l[7]=H),_&R&&(l[8]=l[8]==null?c[8]:Rn(l[8],c[8])),l[9]==null&&(l[9]=c[9]),l[0]=c[0],l[1]=w,l}function Qx(l){var c=[];if(l!=null)for(var g in Wt(l))c.push(g);return c}function Jx(l){return Vl.call(l)}function x_(l,c,g){return c=Cn(c===t?l.length-1:c,0),function(){for(var _=arguments,w=-1,I=Cn(_.length-c,0),P=ee(I);++w<I;)P[w]=_[c+w];w=-1;for(var H=ee(c+1);++w<c;)H[w]=_[w];return H[c]=g(P),yi(l,this,H)}}function D_(l,c){return c.length<2?l:Ro(l,Fi(c,0,-1))}function eD(l,c){for(var g=l.length,_=Rn(c.length,g),w=ai(l);_--;){var I=c[_];l[_]=Rr(I,g)?w[I]:t}return l}function Jd(l,c){if(!(c==="constructor"&&typeof l[c]=="function")&&c!="__proto__")return l[c]}var I_=T_(Xm),ya=pE||function(l,c){return xn.setTimeout(l,c)},eh=T_(Sx);function k_(l,c,g){var _=c+"";return eh(l,jx(_,tD($x(_),g)))}function T_(l){var c=0,g=0;return function(){var _=bE(),w=T-(_-g);if(g=_,w>0){if(++c>=D)return arguments[0]}else c=0;return l.apply(t,arguments)}}function cu(l,c){var g=-1,_=l.length,w=_-1;for(c=c===t?_:c;++g<c;){var I=Pd(g,w),P=l[I];l[I]=l[g],l[g]=P}return l.length=c,l}var N_=Zx(function(l){var c=[];return l.charCodeAt(0)===46&&c.push(""),l.replace(Ae,function(g,_,w,I){c.push(w?I.replace(k,"$1"):_||g)}),c});function vr(l){if(typeof l=="string"||Ei(l))return l;var c=l+"";return c=="0"&&1/l==-G?"-0":c}function Fo(l){if(l!=null){try{return Wl.call(l)}catch{}try{return l+""}catch{}}return""}function tD(l,c){return Oi(we,function(g){var _="_."+g[0];c&g[1]&&!Ml(l,_)&&l.push(_)}),l.sort()}function A_(l){if(l instanceof mt)return l.clone();var c=new Ri(l.__wrapped__,l.__chain__);return c.__actions__=ai(l.__actions__),c.__index__=l.__index__,c.__values__=l.__values__,c}function nD(l,c,g){(g?Zn(l,c,g):c===t)?c=1:c=Cn(rt(c),0);var _=l==null?0:l.length;if(!_||c<1)return[];for(var w=0,I=0,P=ee(Kl(_/c));w<_;)P[I++]=Fi(l,w,w+=c);return P}function iD(l){for(var c=-1,g=l==null?0:l.length,_=0,w=[];++c<g;){var I=l[c];I&&(w[_++]=I)}return w}function rD(){var l=arguments.length;if(!l)return[];for(var c=ee(l-1),g=arguments[0],_=l;_--;)c[_-1]=arguments[_];return Jr(et(g)?ai(g):[g],Dn(c,1))}var oD=ut(function(l,c){return hn(l)?ma(l,Dn(c,1,hn,!0)):[]}),sD=ut(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),We(g,2)):[]}),aD=ut(function(l,c){var g=Bi(c);return hn(g)&&(g=t),hn(l)?ma(l,Dn(c,1,hn,!0),t,g):[]});function lD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),Fi(l,c<0?0:c,_)):[]}function uD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),c=_-c,Fi(l,0,c<0?0:c)):[]}function cD(l,c){return l&&l.length?nu(l,We(c,3),!0,!0):[]}function dD(l,c){return l&&l.length?nu(l,We(c,3),!0):[]}function hD(l,c,g,_){var w=l==null?0:l.length;return w?(g&&typeof g!="number"&&Zn(l,c,g)&&(g=0,_=w),rx(l,c,g,_)):[]}function O_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:rt(g);return w<0&&(w=Cn(_+w,0)),Rl(l,We(c,3),w)}function M_(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_-1;return g!==t&&(w=rt(g),w=g<0?Cn(_+w,0):Rn(w,_-1)),Rl(l,We(c,3),w,!0)}function R_(l){var c=l==null?0:l.length;return c?Dn(l,1):[]}function fD(l){var c=l==null?0:l.length;return c?Dn(l,G):[]}function gD(l,c){var g=l==null?0:l.length;return g?(c=c===t?1:rt(c),Dn(l,c)):[]}function pD(l){for(var c=-1,g=l==null?0:l.length,_={};++c<g;){var w=l[c];_[w[0]]=w[1]}return _}function P_(l){return l&&l.length?l[0]:t}function mD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=g==null?0:rt(g);return w<0&&(w=Cn(_+w,0)),fs(l,c,w)}function _D(l){var c=l==null?0:l.length;return c?Fi(l,0,-1):[]}var vD=ut(function(l){var c=Jt(l,Hd);return c.length&&c[0]===l[0]?Nd(c):[]}),bD=ut(function(l){var c=Bi(l),g=Jt(l,Hd);return c===Bi(g)?c=t:g.pop(),g.length&&g[0]===l[0]?Nd(g,We(c,2)):[]}),CD=ut(function(l){var c=Bi(l),g=Jt(l,Hd);return c=typeof c=="function"?c:t,c&&g.pop(),g.length&&g[0]===l[0]?Nd(g,t,c):[]});function wD(l,c){return l==null?"":_E.call(l,c)}function Bi(l){var c=l==null?0:l.length;return c?l[c-1]:t}function yD(l,c,g){var _=l==null?0:l.length;if(!_)return-1;var w=_;return g!==t&&(w=rt(g),w=w<0?Cn(_+w,0):Rn(w,_-1)),c===c?tE(l,c,w):Rl(l,mm,w,!0)}function SD(l,c){return l&&l.length?Gm(l,rt(c)):t}var LD=ut(F_);function F_(l,c){return l&&l.length&&c&&c.length?Rd(l,c):l}function ED(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,We(g,2)):l}function xD(l,c,g){return l&&l.length&&c&&c.length?Rd(l,c,t,g):l}var DD=Mr(function(l,c){var g=l==null?0:l.length,_=Dd(l,c);return Zm(l,Jt(c,function(w){return Rr(w,g)?+w:w}).sort(s_)),_});function ID(l,c){var g=[];if(!(l&&l.length))return g;var _=-1,w=[],I=l.length;for(c=We(c,3);++_<I;){var P=l[_];c(P,_,l)&&(g.push(P),w.push(_))}return Zm(l,w),g}function th(l){return l==null?l:wE.call(l)}function kD(l,c,g){var _=l==null?0:l.length;return _?(g&&typeof g!="number"&&Zn(l,c,g)?(c=0,g=_):(c=c==null?0:rt(c),g=g===t?_:rt(g)),Fi(l,c,g)):[]}function TD(l,c){return tu(l,c)}function ND(l,c,g){return Bd(l,c,We(g,2))}function AD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c);if(_<g&&Xi(l[_],c))return _}return-1}function OD(l,c){return tu(l,c,!0)}function MD(l,c,g){return Bd(l,c,We(g,2),!0)}function RD(l,c){var g=l==null?0:l.length;if(g){var _=tu(l,c,!0)-1;if(Xi(l[_],c))return _}return-1}function PD(l){return l&&l.length?Qm(l):[]}function FD(l,c){return l&&l.length?Qm(l,We(c,2)):[]}function BD(l){var c=l==null?0:l.length;return c?Fi(l,1,c):[]}function WD(l,c,g){return l&&l.length?(c=g||c===t?1:rt(c),Fi(l,0,c<0?0:c)):[]}function VD(l,c,g){var _=l==null?0:l.length;return _?(c=g||c===t?1:rt(c),c=_-c,Fi(l,c<0?0:c,_)):[]}function HD(l,c){return l&&l.length?nu(l,We(c,3),!1,!0):[]}function $D(l,c){return l&&l.length?nu(l,We(c,3)):[]}var zD=ut(function(l){return io(Dn(l,1,hn,!0))}),UD=ut(function(l){var c=Bi(l);return hn(c)&&(c=t),io(Dn(l,1,hn,!0),We(c,2))}),jD=ut(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,io(Dn(l,1,hn,!0),t,c)});function KD(l){return l&&l.length?io(l):[]}function GD(l,c){return l&&l.length?io(l,We(c,2)):[]}function qD(l,c){return c=typeof c=="function"?c:t,l&&l.length?io(l,t,c):[]}function nh(l){if(!(l&&l.length))return[];var c=0;return l=Qr(l,function(g){if(hn(g))return c=Cn(g.length,c),!0}),bd(c,function(g){return Jt(l,md(g))})}function B_(l,c){if(!(l&&l.length))return[];var g=nh(l);return c==null?g:Jt(g,function(_){return yi(c,t,_)})}var YD=ut(function(l,c){return hn(l)?ma(l,c):[]}),ZD=ut(function(l){return Vd(Qr(l,hn))}),XD=ut(function(l){var c=Bi(l);return hn(c)&&(c=t),Vd(Qr(l,hn),We(c,2))}),QD=ut(function(l){var c=Bi(l);return c=typeof c=="function"?c:t,Vd(Qr(l,hn),t,c)}),JD=ut(nh);function eI(l,c){return n_(l||[],c||[],pa)}function tI(l,c){return n_(l||[],c||[],ba)}var nI=ut(function(l){var c=l.length,g=c>1?l[c-1]:t;return g=typeof g=="function"?(l.pop(),g):t,B_(l,g)});function W_(l){var c=x(l);return c.__chain__=!0,c}function iI(l,c){return c(l),l}function du(l,c){return c(l)}var rI=Mr(function(l){var c=l.length,g=c?l[0]:0,_=this.__wrapped__,w=function(I){return Dd(I,l)};return c>1||this.__actions__.length||!(_ instanceof mt)||!Rr(g)?this.thru(w):(_=_.slice(g,+g+(c?1:0)),_.__actions__.push({func:du,args:[w],thisArg:t}),new Ri(_,this.__chain__).thru(function(I){return c&&!I.length&&I.push(t),I}))});function oI(){return W_(this)}function sI(){return new Ri(this.value(),this.__chain__)}function aI(){this.__values__===t&&(this.__values__=J_(this.value()));var l=this.__index__>=this.__values__.length,c=l?t:this.__values__[this.__index__++];return{done:l,value:c}}function lI(){return this}function uI(l){for(var c,g=this;g instanceof Zl;){var _=A_(g);_.__index__=0,_.__values__=t,c?w.__wrapped__=_:c=_;var w=_;g=g.__wrapped__}return w.__wrapped__=l,c}function cI(){var l=this.__wrapped__;if(l instanceof mt){var c=l;return this.__actions__.length&&(c=new mt(this)),c=c.reverse(),c.__actions__.push({func:du,args:[th],thisArg:t}),new Ri(c,this.__chain__)}return this.thru(th)}function dI(){return t_(this.__wrapped__,this.__actions__)}var hI=iu(function(l,c,g){Nt.call(l,g)?++l[g]:Ar(l,g,1)});function fI(l,c,g){var _=et(l)?gm:ix;return g&&Zn(l,c,g)&&(c=t),_(l,We(c,3))}function gI(l,c){var g=et(l)?Qr:Bm;return g(l,We(c,3))}var pI=h_(O_),mI=h_(M_);function _I(l,c){return Dn(hu(l,c),1)}function vI(l,c){return Dn(hu(l,c),G)}function bI(l,c,g){return g=g===t?1:rt(g),Dn(hu(l,c),g)}function V_(l,c){var g=et(l)?Oi:no;return g(l,We(c,3))}function H_(l,c){var g=et(l)?BL:Fm;return g(l,We(c,3))}var CI=iu(function(l,c,g){Nt.call(l,g)?l[g].push(c):Ar(l,g,[c])});function wI(l,c,g,_){l=li(l)?l:Es(l),g=g&&!_?rt(g):0;var w=l.length;return g<0&&(g=Cn(w+g,0)),_u(l)?g<=w&&l.indexOf(c,g)>-1:!!w&&fs(l,c,g)>-1}var yI=ut(function(l,c,g){var _=-1,w=typeof c=="function",I=li(l)?ee(l.length):[];return no(l,function(P){I[++_]=w?yi(c,P,g):_a(P,c,g)}),I}),SI=iu(function(l,c,g){Ar(l,g,c)});function hu(l,c){var g=et(l)?Jt:Um;return g(l,We(c,3))}function LI(l,c,g,_){return l==null?[]:(et(c)||(c=c==null?[]:[c]),g=_?t:g,et(g)||(g=g==null?[]:[g]),qm(l,c,g))}var EI=iu(function(l,c,g){l[g?0:1].push(c)},function(){return[[],[]]});function xI(l,c,g){var _=et(l)?gd:vm,w=arguments.length<3;return _(l,We(c,4),g,w,no)}function DI(l,c,g){var _=et(l)?WL:vm,w=arguments.length<3;return _(l,We(c,4),g,w,Fm)}function II(l,c){var g=et(l)?Qr:Bm;return g(l,pu(We(c,3)))}function kI(l){var c=et(l)?Om:wx;return c(l)}function TI(l,c,g){(g?Zn(l,c,g):c===t)?c=1:c=rt(c);var _=et(l)?QE:yx;return _(l,c)}function NI(l){var c=et(l)?JE:Lx;return c(l)}function AI(l){if(l==null)return 0;if(li(l))return _u(l)?ps(l):l.length;var c=Pn(l);return c==Zt||c==Pt?l.size:Od(l).length}function OI(l,c,g){var _=et(l)?pd:Ex;return g&&Zn(l,c,g)&&(c=t),_(l,We(c,3))}var MI=ut(function(l,c){if(l==null)return[];var g=c.length;return g>1&&Zn(l,c[0],c[1])?c=[]:g>2&&Zn(c[0],c[1],c[2])&&(c=[c[0]]),qm(l,Dn(c,1),[])}),fu=gE||function(){return xn.Date.now()};function RI(l,c){if(typeof c!="function")throw new Mi(s);return l=rt(l),function(){if(--l<1)return c.apply(this,arguments)}}function $_(l,c,g){return c=g?t:c,c=l&&c==null?l.length:c,Or(l,R,t,t,t,t,c)}function z_(l,c){var g;if(typeof c!="function")throw new Mi(s);return l=rt(l),function(){return--l>0&&(g=c.apply(this,arguments)),l<=1&&(c=t),g}}var ih=ut(function(l,c,g){var _=L;if(g.length){var w=eo(g,Ss(ih));_|=N}return Or(l,_,c,g,w)}),U_=ut(function(l,c,g){var _=L|S;if(g.length){var w=eo(g,Ss(U_));_|=N}return Or(c,_,l,g,w)});function j_(l,c,g){c=g?t:c;var _=Or(l,E,t,t,t,t,t,c);return _.placeholder=j_.placeholder,_}function K_(l,c,g){c=g?t:c;var _=Or(l,A,t,t,t,t,t,c);return _.placeholder=K_.placeholder,_}function G_(l,c,g){var _,w,I,P,H,q,ue=0,ce=!1,ge=!1,Se=!0;if(typeof l!="function")throw new Mi(s);c=Wi(c)||0,rn(g)&&(ce=!!g.leading,ge="maxWait"in g,I=ge?Cn(Wi(g.maxWait)||0,c):I,Se="trailing"in g?!!g.trailing:Se);function Ne(fn){var Qi=_,Br=w;return _=w=t,ue=fn,P=l.apply(Br,Qi),P}function $e(fn){return ue=fn,H=ya(ht,c),ce?Ne(fn):P}function lt(fn){var Qi=fn-q,Br=fn-ue,hv=c-Qi;return ge?Rn(hv,I-Br):hv}function ze(fn){var Qi=fn-q,Br=fn-ue;return q===t||Qi>=c||Qi<0||ge&&Br>=I}function ht(){var fn=fu();if(ze(fn))return vt(fn);H=ya(ht,lt(fn))}function vt(fn){return H=t,Se&&_?Ne(fn):(_=w=t,P)}function xi(){H!==t&&i_(H),ue=0,_=q=w=H=t}function Xn(){return H===t?P:vt(fu())}function Di(){var fn=fu(),Qi=ze(fn);if(_=arguments,w=this,q=fn,Qi){if(H===t)return $e(q);if(ge)return i_(H),H=ya(ht,c),Ne(q)}return H===t&&(H=ya(ht,c)),P}return Di.cancel=xi,Di.flush=Xn,Di}var PI=ut(function(l,c){return Pm(l,1,c)}),FI=ut(function(l,c,g){return Pm(l,Wi(c)||0,g)});function BI(l){return Or(l,K)}function gu(l,c){if(typeof l!="function"||c!=null&&typeof c!="function")throw new Mi(s);var g=function(){var _=arguments,w=c?c.apply(this,_):_[0],I=g.cache;if(I.has(w))return I.get(w);var P=l.apply(this,_);return g.cache=I.set(w,P)||I,P};return g.cache=new(gu.Cache||Nr),g}gu.Cache=Nr;function pu(l){if(typeof l!="function")throw new Mi(s);return function(){var c=arguments;switch(c.length){case 0:return!l.call(this);case 1:return!l.call(this,c[0]);case 2:return!l.call(this,c[0],c[1]);case 3:return!l.call(this,c[0],c[1],c[2])}return!l.apply(this,c)}}function WI(l){return z_(2,l)}var VI=xx(function(l,c){c=c.length==1&&et(c[0])?Jt(c[0],Si(We())):Jt(Dn(c,1),Si(We()));var g=c.length;return ut(function(_){for(var w=-1,I=Rn(_.length,g);++w<I;)_[w]=c[w].call(this,_[w]);return yi(l,this,_)})}),rh=ut(function(l,c){var g=eo(c,Ss(rh));return Or(l,N,t,c,g)}),q_=ut(function(l,c){var g=eo(c,Ss(q_));return Or(l,V,t,c,g)}),HI=Mr(function(l,c){return Or(l,M,t,t,t,c)});function $I(l,c){if(typeof l!="function")throw new Mi(s);return c=c===t?c:rt(c),ut(l,c)}function zI(l,c){if(typeof l!="function")throw new Mi(s);return c=c==null?0:Cn(rt(c),0),ut(function(g){var _=g[c],w=oo(g,0,c);return _&&Jr(w,_),yi(l,this,w)})}function UI(l,c,g){var _=!0,w=!0;if(typeof l!="function")throw new Mi(s);return rn(g)&&(_="leading"in g?!!g.leading:_,w="trailing"in g?!!g.trailing:w),G_(l,c,{leading:_,maxWait:c,trailing:w})}function jI(l){return $_(l,1)}function KI(l,c){return rh($d(c),l)}function GI(){if(!arguments.length)return[];var l=arguments[0];return et(l)?l:[l]}function qI(l){return Pi(l,m)}function YI(l,c){return c=typeof c=="function"?c:t,Pi(l,m,c)}function ZI(l){return Pi(l,f|m)}function XI(l,c){return c=typeof c=="function"?c:t,Pi(l,f|m,c)}function QI(l,c){return c==null||Rm(l,c,yn(c))}function Xi(l,c){return l===c||l!==l&&c!==c}var JI=au(Td),ek=au(function(l,c){return l>=c}),Bo=Hm(function(){return arguments}())?Hm:function(l){return an(l)&&Nt.call(l,"callee")&&!Dm.call(l,"callee")},et=ee.isArray,tk=lm?Si(lm):ux;function li(l){return l!=null&&mu(l.length)&&!Pr(l)}function hn(l){return an(l)&&li(l)}function nk(l){return l===!0||l===!1||an(l)&&Yn(l)==At}var so=mE||ph,ik=um?Si(um):cx;function rk(l){return an(l)&&l.nodeType===1&&!Sa(l)}function ok(l){if(l==null)return!0;if(li(l)&&(et(l)||typeof l=="string"||typeof l.splice=="function"||so(l)||Ls(l)||Bo(l)))return!l.length;var c=Pn(l);if(c==Zt||c==Pt)return!l.size;if(wa(l))return!Od(l).length;for(var g in l)if(Nt.call(l,g))return!1;return!0}function sk(l,c){return va(l,c)}function ak(l,c,g){g=typeof g=="function"?g:t;var _=g?g(l,c):t;return _===t?va(l,c,t,g):!!_}function oh(l){if(!an(l))return!1;var c=Yn(l);return c==bt||c==st||typeof l.message=="string"&&typeof l.name=="string"&&!Sa(l)}function lk(l){return typeof l=="number"&&km(l)}function Pr(l){if(!rn(l))return!1;var c=Yn(l);return c==tt||c==tn||c==dt||c==Ln}function Y_(l){return typeof l=="number"&&l==rt(l)}function mu(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Z}function rn(l){var c=typeof l;return l!=null&&(c=="object"||c=="function")}function an(l){return l!=null&&typeof l=="object"}var Z_=cm?Si(cm):hx;function uk(l,c){return l===c||Ad(l,c,Yd(c))}function ck(l,c,g){return g=typeof g=="function"?g:t,Ad(l,c,Yd(c),g)}function dk(l){return X_(l)&&l!=+l}function hk(l){if(Yx(l))throw new Xe(o);return $m(l)}function fk(l){return l===null}function gk(l){return l==null}function X_(l){return typeof l=="number"||an(l)&&Yn(l)==nn}function Sa(l){if(!an(l)||Yn(l)!=Tn)return!1;var c=zl(l);if(c===null)return!0;var g=Nt.call(c,"constructor")&&c.constructor;return typeof g=="function"&&g instanceof g&&Wl.call(g)==cE}var sh=dm?Si(dm):fx;function pk(l){return Y_(l)&&l>=-Z&&l<=Z}var Q_=hm?Si(hm):gx;function _u(l){return typeof l=="string"||!et(l)&&an(l)&&Yn(l)==pn}function Ei(l){return typeof l=="symbol"||an(l)&&Yn(l)==mi}var Ls=fm?Si(fm):px;function mk(l){return l===t}function _k(l){return an(l)&&Pn(l)==Fe}function vk(l){return an(l)&&Yn(l)==pt}var bk=au(Md),Ck=au(function(l,c){return l<=c});function J_(l){if(!l)return[];if(li(l))return _u(l)?Yi(l):ai(l);if(ca&&l[ca])return QL(l[ca]());var c=Pn(l),g=c==Zt?wd:c==Pt?Pl:Es;return g(l)}function Fr(l){if(!l)return l===0?l:0;if(l=Wi(l),l===G||l===-G){var c=l<0?-1:1;return c*z}return l===l?l:0}function rt(l){var c=Fr(l),g=c%1;return c===c?g?c-g:c:0}function ev(l){return l?Mo(rt(l),0,Y):0}function Wi(l){if(typeof l=="number")return l;if(Ei(l))return O;if(rn(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=rn(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=bm(l);var g=me.test(l);return g||De.test(l)?RL(l.slice(2),g?2:8):ie.test(l)?O:+l}function tv(l){return _r(l,ui(l))}function wk(l){return l?Mo(rt(l),-Z,Z):l===0?l:0}function xt(l){return l==null?"":Li(l)}var yk=ws(function(l,c){if(wa(c)||li(c)){_r(c,yn(c),l);return}for(var g in c)Nt.call(c,g)&&pa(l,g,c[g])}),nv=ws(function(l,c){_r(c,ui(c),l)}),vu=ws(function(l,c,g,_){_r(c,ui(c),l,_)}),Sk=ws(function(l,c,g,_){_r(c,yn(c),l,_)}),Lk=Mr(Dd);function Ek(l,c){var g=Cs(l);return c==null?g:Mm(g,c)}var xk=ut(function(l,c){l=Wt(l);var g=-1,_=c.length,w=_>2?c[2]:t;for(w&&Zn(c[0],c[1],w)&&(_=1);++g<_;)for(var I=c[g],P=ui(I),H=-1,q=P.length;++H<q;){var ue=P[H],ce=l[ue];(ce===t||Xi(ce,_s[ue])&&!Nt.call(l,ue))&&(l[ue]=I[ue])}return l}),Dk=ut(function(l){return l.push(t,b_),yi(iv,t,l)});function Ik(l,c){return pm(l,We(c,3),mr)}function kk(l,c){return pm(l,We(c,3),kd)}function Tk(l,c){return l==null?l:Id(l,We(c,3),ui)}function Nk(l,c){return l==null?l:Wm(l,We(c,3),ui)}function Ak(l,c){return l&&mr(l,We(c,3))}function Ok(l,c){return l&&kd(l,We(c,3))}function Mk(l){return l==null?[]:Jl(l,yn(l))}function Rk(l){return l==null?[]:Jl(l,ui(l))}function ah(l,c,g){var _=l==null?t:Ro(l,c);return _===t?g:_}function Pk(l,c){return l!=null&&y_(l,c,ox)}function lh(l,c){return l!=null&&y_(l,c,sx)}var Fk=g_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),l[c]=g},ch(ci)),Bk=g_(function(l,c,g){c!=null&&typeof c.toString!="function"&&(c=Vl.call(c)),Nt.call(l,c)?l[c].push(g):l[c]=[g]},We),Wk=ut(_a);function yn(l){return li(l)?Am(l):Od(l)}function ui(l){return li(l)?Am(l,!0):mx(l)}function Vk(l,c){var g={};return c=We(c,3),mr(l,function(_,w,I){Ar(g,c(_,w,I),_)}),g}function Hk(l,c){var g={};return c=We(c,3),mr(l,function(_,w,I){Ar(g,w,c(_,w,I))}),g}var $k=ws(function(l,c,g){eu(l,c,g)}),iv=ws(function(l,c,g,_){eu(l,c,g,_)}),zk=Mr(function(l,c){var g={};if(l==null)return g;var _=!1;c=Jt(c,function(I){return I=ro(I,l),_||(_=I.length>1),I}),_r(l,Gd(l),g),_&&(g=Pi(g,f|p|m,Fx));for(var w=c.length;w--;)Wd(g,c[w]);return g});function Uk(l,c){return rv(l,pu(We(c)))}var jk=Mr(function(l,c){return l==null?{}:vx(l,c)});function rv(l,c){if(l==null)return{};var g=Jt(Gd(l),function(_){return[_]});return c=We(c),Ym(l,g,function(_,w){return c(_,w[0])})}function Kk(l,c,g){c=ro(c,l);var _=-1,w=c.length;for(w||(w=1,l=t);++_<w;){var I=l==null?t:l[vr(c[_])];I===t&&(_=w,I=g),l=Pr(I)?I.call(l):I}return l}function Gk(l,c,g){return l==null?l:ba(l,c,g)}function qk(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:ba(l,c,g,_)}var ov=__(yn),sv=__(ui);function Yk(l,c,g){var _=et(l),w=_||so(l)||Ls(l);if(c=We(c,4),g==null){var I=l&&l.constructor;w?g=_?new I:[]:rn(l)?g=Pr(I)?Cs(zl(l)):{}:g={}}return(w?Oi:mr)(l,function(P,H,q){return c(g,P,H,q)}),g}function Zk(l,c){return l==null?!0:Wd(l,c)}function Xk(l,c,g){return l==null?l:e_(l,c,$d(g))}function Qk(l,c,g,_){return _=typeof _=="function"?_:t,l==null?l:e_(l,c,$d(g),_)}function Es(l){return l==null?[]:Cd(l,yn(l))}function Jk(l){return l==null?[]:Cd(l,ui(l))}function eT(l,c,g){return g===t&&(g=c,c=t),g!==t&&(g=Wi(g),g=g===g?g:0),c!==t&&(c=Wi(c),c=c===c?c:0),Mo(Wi(l),c,g)}function tT(l,c,g){return c=Fr(c),g===t?(g=c,c=0):g=Fr(g),l=Wi(l),ax(l,c,g)}function nT(l,c,g){if(g&&typeof g!="boolean"&&Zn(l,c,g)&&(c=g=t),g===t&&(typeof c=="boolean"?(g=c,c=t):typeof l=="boolean"&&(g=l,l=t)),l===t&&c===t?(l=0,c=1):(l=Fr(l),c===t?(c=l,l=0):c=Fr(c)),l>c){var _=l;l=c,c=_}if(g||l%1||c%1){var w=Tm();return Rn(l+w*(c-l+ML("1e-"+((w+"").length-1))),c)}return Pd(l,c)}var iT=ys(function(l,c,g){return c=c.toLowerCase(),l+(g?av(c):c)});function av(l){return uh(xt(l).toLowerCase())}function lv(l){return l=xt(l),l&&l.replace(Ze,GL).replace(LL,"")}function rT(l,c,g){l=xt(l),c=Li(c);var _=l.length;g=g===t?_:Mo(rt(g),0,_);var w=g;return g-=c.length,g>=0&&l.slice(g,w)==c}function oT(l){return l=xt(l),l&&ol.test(l)?l.replace(vn,qL):l}function sT(l){return l=xt(l),l&&ae.test(l)?l.replace(se,"\\$&"):l}var aT=ys(function(l,c,g){return l+(g?"-":"")+c.toLowerCase()}),lT=ys(function(l,c,g){return l+(g?" ":"")+c.toLowerCase()}),uT=d_("toLowerCase");function cT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;if(!c||_>=c)return l;var w=(c-_)/2;return su(Gl(w),g)+l+su(Kl(w),g)}function dT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;return c&&_<c?l+su(c-_,g):l}function hT(l,c,g){l=xt(l),c=rt(c);var _=c?ps(l):0;return c&&_<c?su(c-_,g)+l:l}function fT(l,c,g){return g||c==null?c=0:c&&(c=+c),CE(xt(l).replace(pe,""),c||0)}function gT(l,c,g){return(g?Zn(l,c,g):c===t)?c=1:c=rt(c),Fd(xt(l),c)}function pT(){var l=arguments,c=xt(l[0]);return l.length<3?c:c.replace(l[1],l[2])}var mT=ys(function(l,c,g){return l+(g?"_":"")+c.toLowerCase()});function _T(l,c,g){return g&&typeof g!="number"&&Zn(l,c,g)&&(c=g=t),g=g===t?Y:g>>>0,g?(l=xt(l),l&&(typeof c=="string"||c!=null&&!sh(c))&&(c=Li(c),!c&&gs(l))?oo(Yi(l),0,g):l.split(c,g)):[]}var vT=ys(function(l,c,g){return l+(g?" ":"")+uh(c)});function bT(l,c,g){return l=xt(l),g=g==null?0:Mo(rt(g),0,l.length),c=Li(c),l.slice(g,g+c.length)==c}function CT(l,c,g){var _=x.templateSettings;g&&Zn(l,c,g)&&(c=t),l=xt(l),c=vu({},c,_,v_);var w=vu({},c.imports,_.imports,v_),I=yn(w),P=Cd(w,I),H,q,ue=0,ce=c.interpolate||ot,ge="__p += '",Se=yd((c.escape||ot).source+"|"+ce.source+"|"+(ce===is?W:ot).source+"|"+(c.evaluate||ot).source+"|$","g"),Ne="//# sourceURL="+(Nt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kL+"]")+`
`;l.replace(Se,function(ze,ht,vt,xi,Xn,Di){return vt||(vt=xi),ge+=l.slice(ue,Di).replace(Tt,YL),ht&&(H=!0,ge+=`' +
__e(`+ht+`) +
'`),Xn&&(q=!0,ge+=`';
`+Xn+`;
__p += '`),vt&&(ge+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=Di+ze.length,ze}),ge+=`';
`;var $e=Nt.call(c,"variable")&&c.variable;if(!$e)ge=`with (obj) {
`+ge+`
}
`;else if(qt.test($e))throw new Xe(a);ge=(q?ge.replace(Pa,""):ge).replace($n,"$1").replace(ni,"$1;"),ge="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var lt=cv(function(){return St(I,Ne+"return "+ge).apply(t,P)});if(lt.source=ge,oh(lt))throw lt;return lt}function wT(l){return xt(l).toLowerCase()}function yT(l){return xt(l).toUpperCase()}function ST(l,c,g){if(l=xt(l),l&&(g||c===t))return bm(l);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Yi(c),I=Cm(_,w),P=wm(_,w)+1;return oo(_,I,P).join("")}function LT(l,c,g){if(l=xt(l),l&&(g||c===t))return l.slice(0,Sm(l)+1);if(!l||!(c=Li(c)))return l;var _=Yi(l),w=wm(_,Yi(c))+1;return oo(_,0,w).join("")}function ET(l,c,g){if(l=xt(l),l&&(g||c===t))return l.replace(pe,"");if(!l||!(c=Li(c)))return l;var _=Yi(l),w=Cm(_,Yi(c));return oo(_,w).join("")}function xT(l,c){var g=X,_=$;if(rn(c)){var w="separator"in c?c.separator:w;g="length"in c?rt(c.length):g,_="omission"in c?Li(c.omission):_}l=xt(l);var I=l.length;if(gs(l)){var P=Yi(l);I=P.length}if(g>=I)return l;var H=g-ps(_);if(H<1)return _;var q=P?oo(P,0,H).join(""):l.slice(0,H);if(w===t)return q+_;if(P&&(H+=q.length-H),sh(w)){if(l.slice(H).search(w)){var ue,ce=q;for(w.global||(w=yd(w.source,xt(te.exec(w))+"g")),w.lastIndex=0;ue=w.exec(ce);)var ge=ue.index;q=q.slice(0,ge===t?H:ge)}}else if(l.indexOf(Li(w),H)!=H){var Se=q.lastIndexOf(w);Se>-1&&(q=q.slice(0,Se))}return q+_}function DT(l){return l=xt(l),l&&ir.test(l)?l.replace(Gs,nE):l}var IT=ys(function(l,c,g){return l+(g?" ":"")+c.toUpperCase()}),uh=d_("toUpperCase");function uv(l,c,g){return l=xt(l),c=g?t:c,c===t?XL(l)?oE(l):$L(l):l.match(c)||[]}var cv=ut(function(l,c){try{return yi(l,t,c)}catch(g){return oh(g)?g:new Xe(g)}}),kT=Mr(function(l,c){return Oi(c,function(g){g=vr(g),Ar(l,g,ih(l[g],l))}),l});function TT(l){var c=l==null?0:l.length,g=We();return l=c?Jt(l,function(_){if(typeof _[1]!="function")throw new Mi(s);return[g(_[0]),_[1]]}):[],ut(function(_){for(var w=-1;++w<c;){var I=l[w];if(yi(I[0],this,_))return yi(I[1],this,_)}})}function NT(l){return nx(Pi(l,f))}function ch(l){return function(){return l}}function AT(l,c){return l==null||l!==l?c:l}var OT=f_(),MT=f_(!0);function ci(l){return l}function dh(l){return zm(typeof l=="function"?l:Pi(l,f))}function RT(l){return jm(Pi(l,f))}function PT(l,c){return Km(l,Pi(c,f))}var FT=ut(function(l,c){return function(g){return _a(g,l,c)}}),BT=ut(function(l,c){return function(g){return _a(l,g,c)}});function hh(l,c,g){var _=yn(c),w=Jl(c,_);g==null&&!(rn(c)&&(w.length||!_.length))&&(g=c,c=l,l=this,w=Jl(c,yn(c)));var I=!(rn(g)&&"chain"in g)||!!g.chain,P=Pr(l);return Oi(w,function(H){var q=c[H];l[H]=q,P&&(l.prototype[H]=function(){var ue=this.__chain__;if(I||ue){var ce=l(this.__wrapped__),ge=ce.__actions__=ai(this.__actions__);return ge.push({func:q,args:arguments,thisArg:l}),ce.__chain__=ue,ce}return q.apply(l,Jr([this.value()],arguments))})}),l}function WT(){return xn._===this&&(xn._=dE),this}function fh(){}function VT(l){return l=rt(l),ut(function(c){return Gm(c,l)})}var HT=Ud(Jt),$T=Ud(gm),zT=Ud(pd);function dv(l){return Xd(l)?md(vr(l)):bx(l)}function UT(l){return function(c){return l==null?t:Ro(l,c)}}var jT=p_(),KT=p_(!0);function gh(){return[]}function ph(){return!1}function GT(){return{}}function qT(){return""}function YT(){return!0}function ZT(l,c){if(l=rt(l),l<1||l>Z)return[];var g=Y,_=Rn(l,Y);c=We(c),l-=Y;for(var w=bd(_,c);++g<l;)c(g);return w}function XT(l){return et(l)?Jt(l,vr):Ei(l)?[l]:ai(N_(xt(l)))}function QT(l){var c=++uE;return xt(l)+c}var JT=ou(function(l,c){return l+c},0),eN=jd("ceil"),tN=ou(function(l,c){return l/c},1),nN=jd("floor");function iN(l){return l&&l.length?Ql(l,ci,Td):t}function rN(l,c){return l&&l.length?Ql(l,We(c,2),Td):t}function oN(l){return _m(l,ci)}function sN(l,c){return _m(l,We(c,2))}function aN(l){return l&&l.length?Ql(l,ci,Md):t}function lN(l,c){return l&&l.length?Ql(l,We(c,2),Md):t}var uN=ou(function(l,c){return l*c},1),cN=jd("round"),dN=ou(function(l,c){return l-c},0);function hN(l){return l&&l.length?vd(l,ci):0}function fN(l,c){return l&&l.length?vd(l,We(c,2)):0}return x.after=RI,x.ary=$_,x.assign=yk,x.assignIn=nv,x.assignInWith=vu,x.assignWith=Sk,x.at=Lk,x.before=z_,x.bind=ih,x.bindAll=kT,x.bindKey=U_,x.castArray=GI,x.chain=W_,x.chunk=nD,x.compact=iD,x.concat=rD,x.cond=TT,x.conforms=NT,x.constant=ch,x.countBy=hI,x.create=Ek,x.curry=j_,x.curryRight=K_,x.debounce=G_,x.defaults=xk,x.defaultsDeep=Dk,x.defer=PI,x.delay=FI,x.difference=oD,x.differenceBy=sD,x.differenceWith=aD,x.drop=lD,x.dropRight=uD,x.dropRightWhile=cD,x.dropWhile=dD,x.fill=hD,x.filter=gI,x.flatMap=_I,x.flatMapDeep=vI,x.flatMapDepth=bI,x.flatten=R_,x.flattenDeep=fD,x.flattenDepth=gD,x.flip=BI,x.flow=OT,x.flowRight=MT,x.fromPairs=pD,x.functions=Mk,x.functionsIn=Rk,x.groupBy=CI,x.initial=_D,x.intersection=vD,x.intersectionBy=bD,x.intersectionWith=CD,x.invert=Fk,x.invertBy=Bk,x.invokeMap=yI,x.iteratee=dh,x.keyBy=SI,x.keys=yn,x.keysIn=ui,x.map=hu,x.mapKeys=Vk,x.mapValues=Hk,x.matches=RT,x.matchesProperty=PT,x.memoize=gu,x.merge=$k,x.mergeWith=iv,x.method=FT,x.methodOf=BT,x.mixin=hh,x.negate=pu,x.nthArg=VT,x.omit=zk,x.omitBy=Uk,x.once=WI,x.orderBy=LI,x.over=HT,x.overArgs=VI,x.overEvery=$T,x.overSome=zT,x.partial=rh,x.partialRight=q_,x.partition=EI,x.pick=jk,x.pickBy=rv,x.property=dv,x.propertyOf=UT,x.pull=LD,x.pullAll=F_,x.pullAllBy=ED,x.pullAllWith=xD,x.pullAt=DD,x.range=jT,x.rangeRight=KT,x.rearg=HI,x.reject=II,x.remove=ID,x.rest=$I,x.reverse=th,x.sampleSize=TI,x.set=Gk,x.setWith=qk,x.shuffle=NI,x.slice=kD,x.sortBy=MI,x.sortedUniq=PD,x.sortedUniqBy=FD,x.split=_T,x.spread=zI,x.tail=BD,x.take=WD,x.takeRight=VD,x.takeRightWhile=HD,x.takeWhile=$D,x.tap=iI,x.throttle=UI,x.thru=du,x.toArray=J_,x.toPairs=ov,x.toPairsIn=sv,x.toPath=XT,x.toPlainObject=tv,x.transform=Yk,x.unary=jI,x.union=zD,x.unionBy=UD,x.unionWith=jD,x.uniq=KD,x.uniqBy=GD,x.uniqWith=qD,x.unset=Zk,x.unzip=nh,x.unzipWith=B_,x.update=Xk,x.updateWith=Qk,x.values=Es,x.valuesIn=Jk,x.without=YD,x.words=uv,x.wrap=KI,x.xor=ZD,x.xorBy=XD,x.xorWith=QD,x.zip=JD,x.zipObject=eI,x.zipObjectDeep=tI,x.zipWith=nI,x.entries=ov,x.entriesIn=sv,x.extend=nv,x.extendWith=vu,hh(x,x),x.add=JT,x.attempt=cv,x.camelCase=iT,x.capitalize=av,x.ceil=eN,x.clamp=eT,x.clone=qI,x.cloneDeep=ZI,x.cloneDeepWith=XI,x.cloneWith=YI,x.conformsTo=QI,x.deburr=lv,x.defaultTo=AT,x.divide=tN,x.endsWith=rT,x.eq=Xi,x.escape=oT,x.escapeRegExp=sT,x.every=fI,x.find=pI,x.findIndex=O_,x.findKey=Ik,x.findLast=mI,x.findLastIndex=M_,x.findLastKey=kk,x.floor=nN,x.forEach=V_,x.forEachRight=H_,x.forIn=Tk,x.forInRight=Nk,x.forOwn=Ak,x.forOwnRight=Ok,x.get=ah,x.gt=JI,x.gte=ek,x.has=Pk,x.hasIn=lh,x.head=P_,x.identity=ci,x.includes=wI,x.indexOf=mD,x.inRange=tT,x.invoke=Wk,x.isArguments=Bo,x.isArray=et,x.isArrayBuffer=tk,x.isArrayLike=li,x.isArrayLikeObject=hn,x.isBoolean=nk,x.isBuffer=so,x.isDate=ik,x.isElement=rk,x.isEmpty=ok,x.isEqual=sk,x.isEqualWith=ak,x.isError=oh,x.isFinite=lk,x.isFunction=Pr,x.isInteger=Y_,x.isLength=mu,x.isMap=Z_,x.isMatch=uk,x.isMatchWith=ck,x.isNaN=dk,x.isNative=hk,x.isNil=gk,x.isNull=fk,x.isNumber=X_,x.isObject=rn,x.isObjectLike=an,x.isPlainObject=Sa,x.isRegExp=sh,x.isSafeInteger=pk,x.isSet=Q_,x.isString=_u,x.isSymbol=Ei,x.isTypedArray=Ls,x.isUndefined=mk,x.isWeakMap=_k,x.isWeakSet=vk,x.join=wD,x.kebabCase=aT,x.last=Bi,x.lastIndexOf=yD,x.lowerCase=lT,x.lowerFirst=uT,x.lt=bk,x.lte=Ck,x.max=iN,x.maxBy=rN,x.mean=oN,x.meanBy=sN,x.min=aN,x.minBy=lN,x.stubArray=gh,x.stubFalse=ph,x.stubObject=GT,x.stubString=qT,x.stubTrue=YT,x.multiply=uN,x.nth=SD,x.noConflict=WT,x.noop=fh,x.now=fu,x.pad=cT,x.padEnd=dT,x.padStart=hT,x.parseInt=fT,x.random=nT,x.reduce=xI,x.reduceRight=DI,x.repeat=gT,x.replace=pT,x.result=Kk,x.round=cN,x.runInContext=j,x.sample=kI,x.size=AI,x.snakeCase=mT,x.some=OI,x.sortedIndex=TD,x.sortedIndexBy=ND,x.sortedIndexOf=AD,x.sortedLastIndex=OD,x.sortedLastIndexBy=MD,x.sortedLastIndexOf=RD,x.startCase=vT,x.startsWith=bT,x.subtract=dN,x.sum=hN,x.sumBy=fN,x.template=CT,x.times=ZT,x.toFinite=Fr,x.toInteger=rt,x.toLength=ev,x.toLower=wT,x.toNumber=Wi,x.toSafeInteger=wk,x.toString=xt,x.toUpper=yT,x.trim=ST,x.trimEnd=LT,x.trimStart=ET,x.truncate=xT,x.unescape=DT,x.uniqueId=QT,x.upperCase=IT,x.upperFirst=uh,x.each=V_,x.eachRight=H_,x.first=P_,hh(x,function(){var l={};return mr(x,function(c,g){Nt.call(x.prototype,g)||(l[g]=c)}),l}(),{chain:!1}),x.VERSION=n,Oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Oi(["drop","take"],function(l,c){mt.prototype[l]=function(g){g=g===t?1:Cn(rt(g),0);var _=this.__filtered__&&!c?new mt(this):this.clone();return _.__filtered__?_.__takeCount__=Rn(g,_.__takeCount__):_.__views__.push({size:Rn(g,Y),type:l+(_.__dir__<0?"Right":"")}),_},mt.prototype[l+"Right"]=function(g){return this.reverse()[l](g).reverse()}}),Oi(["filter","map","takeWhile"],function(l,c){var g=c+1,_=g==F||g==U;mt.prototype[l]=function(w){var I=this.clone();return I.__iteratees__.push({iteratee:We(w,3),type:g}),I.__filtered__=I.__filtered__||_,I}}),Oi(["head","last"],function(l,c){var g="take"+(c?"Right":"");mt.prototype[l]=function(){return this[g](1).value()[0]}}),Oi(["initial","tail"],function(l,c){var g="drop"+(c?"":"Right");mt.prototype[l]=function(){return this.__filtered__?new mt(this):this[g](1)}}),mt.prototype.compact=function(){return this.filter(ci)},mt.prototype.find=function(l){return this.filter(l).head()},mt.prototype.findLast=function(l){return this.reverse().find(l)},mt.prototype.invokeMap=ut(function(l,c){return typeof l=="function"?new mt(this):this.map(function(g){return _a(g,l,c)})}),mt.prototype.reject=function(l){return this.filter(pu(We(l)))},mt.prototype.slice=function(l,c){l=rt(l);var g=this;return g.__filtered__&&(l>0||c<0)?new mt(g):(l<0?g=g.takeRight(-l):l&&(g=g.drop(l)),c!==t&&(c=rt(c),g=c<0?g.dropRight(-c):g.take(c-l)),g)},mt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},mt.prototype.toArray=function(){return this.take(Y)},mr(mt.prototype,function(l,c){var g=/^(?:filter|find|map|reject)|While$/.test(c),_=/^(?:head|last)$/.test(c),w=x[_?"take"+(c=="last"?"Right":""):c],I=_||/^find/.test(c);w&&(x.prototype[c]=function(){var P=this.__wrapped__,H=_?[1]:arguments,q=P instanceof mt,ue=H[0],ce=q||et(P),ge=function(ht){var vt=w.apply(x,Jr([ht],H));return _&&Se?vt[0]:vt};ce&&g&&typeof ue=="function"&&ue.length!=1&&(q=ce=!1);var Se=this.__chain__,Ne=!!this.__actions__.length,$e=I&&!Se,lt=q&&!Ne;if(!I&&ce){P=lt?P:new mt(this);var ze=l.apply(P,H);return ze.__actions__.push({func:du,args:[ge],thisArg:t}),new Ri(ze,Se)}return $e&&lt?l.apply(this,H):(ze=this.thru(ge),$e?_?ze.value()[0]:ze.value():ze)})}),Oi(["pop","push","shift","sort","splice","unshift"],function(l){var c=Fl[l],g=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",_=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var w=arguments;if(_&&!this.__chain__){var I=this.value();return c.apply(et(I)?I:[],w)}return this[g](function(P){return c.apply(et(P)?P:[],w)})}}),mr(mt.prototype,function(l,c){var g=x[c];if(g){var _=g.name+"";Nt.call(bs,_)||(bs[_]=[]),bs[_].push({name:c,func:g})}}),bs[ru(t,S).name]=[{name:"wrapper",func:t}],mt.prototype.clone=DE,mt.prototype.reverse=IE,mt.prototype.value=kE,x.prototype.at=rI,x.prototype.chain=oI,x.prototype.commit=sI,x.prototype.next=aI,x.prototype.plant=uI,x.prototype.reverse=cI,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=dI,x.prototype.first=x.prototype.head,ca&&(x.prototype[ca]=lI),x},ms=sE();To?((To.exports=ms)._=ms,dd._=ms):xn._=ms}).call(hw)}),bf={browserCheck:function(){var e={};if(bf.isMobileDevice())return!0;var t=navigator.userAgent.toLowerCase(),n;return(n=t.match(/rv:([\d.]+)\) like gecko/))||(n=t.match(/msie ([\d\.]+)/))?e.ie=n[1]:(n=t.match(/edge\/([\d\.]+)/))?e.edge=n[1]:(n=t.match(/firefox\/([\d\.]+)/))?e.firefox=n[1]:(n=t.match(/(?:opera|opr).([\d\.]+)/))?e.opera=n[1]:(n=t.match(/chrome\/([\d\.]+)/))?e.chrome=n[1]:(n=t.match(/version\/([\d\.]+).*safari/))&&(e.safari=n[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox)},checkExist:function(e){return e!=null&&e!==""},convertBytes:function(e){for(var t=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=0;e>=1024;)e=Number((e/1024).toFixed(2)),n++;return"".concat(e," ").concat(t[n])},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return typeof window.orientation<"u"||navigator.userAgent.indexOf("IEMobile")!==-1},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(e)},percent:function(e,t){return!e||e===1/0?"0%":(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%")},getCssText:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},trim:function(e){return typeof e!="string"?e:e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},trimAll:function(e){return typeof e!="string"?e:e.replace(/\s/g,"")},getThousandth:function(e){if(e==null||e==="")return"0";e="".concat(e);var t=e.split("."),n=zX(t,2),r=n[0],o=n[1];return"".concat(r.replace(/(\d)(?=(\d{3})+$)/g,"$1,")).concat(o?".".concat(o):"")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e),r=JSON.stringify(n,null,t||2);return r}catch{return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.sort(function(o,s){var a=0,u=Tbe(n),d;try{for(u.s();!(d=u.n()).done;){var h=d.value;if(a=h(o,s),a!==0)return a}}catch(f){u.e(f)}finally{u.f()}return a})},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+new Date().getTime()+~~(Math.random()*1e6)},isJSONStr:function(e){return e=bf.trim(e),e.charAt(0)==="{"&&e.charAt(e.length-1)==="}"||e.charAt(0)==="["&&e.charAt(e.length-1)==="]"},isPhoneNumber:function(e){var t=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return t.test(e)},isFunction:function(e){return e?typeof/./!="function"?typeof e=="function":Object.prototype.toString.call(e)==="[object Function]":!1},getRandomStr:function(e){var t="0123456789",n="abcdefghijklmnopqrstuvwxyz",r="ABCDEFGHIJKLMNOPQRSTUVXYZ";function o(d){var h=Math.random()*(d.length-1);return d.charAt(h)}for(var s="num",a="",u=0;u<e;u++)s==="num"?(a+=o(t),s="lower"):s==="lower"?(a+=o(n),s="upper"):s==="upper"&&(a+=o(r),s="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())},isEqual:function(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0},shouldRender:function(e){e.prototype.shouldComponentUpdate=function(t,n){return!bf.isEqual(this.state,n)||!bf.isEqual(this.props,t)}},getStrlen:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>=1&&r<=126||65376<=r&&r<=65439?t++:t+=2}return t},transformArray:function(e,t){for(var n=e.length,r=[],o=0;o*t<n;)r.push(e.slice(o*t,(o+1)*t)),o++;return r},isEmpty:function(e){return!!(e===""||e===null||e===void 0||Array.prototype.isPrototypeOf(e)&&e.length===0||Object.prototype.isPrototypeOf(e)&&Object.keys(e).length===0)},isObj:function(e){return Object.prototype.toString.call(e)==="[object Object]"},removeEmpty:function(e){if(!(!e||!bf.isObj(e)))return Object.entries(e).forEach(function(t){var n=zX(t,2),r=n[0],o=n[1];o&&bf.isObj(o)?bf.removeEmpty(o):bf.isEmpty(o)&&delete e[r]}),e},mergeDeep:function(e,t){if(e==null||t==null)return e||t;if(!Q7.isPlainObject(e)||!Q7.isPlainObject(t))return t;if(e===t)return t;if("_isMergeAtom"in t){var n=t._isMergeAtom;if(delete t._isMergeAtom,n)return t}var r=Ebe({},e);return Q7.forEach(t,function(o,s){s in e?r[s]=bf.mergeDeep(e[s],o):r[s]=o}),r},downLoadData:function(e){var t=e.url,n=e.payload,r=e.finallyCallback,o=e.successCallback,s=e.errorCallback;fetch(t,{method:"POST",body:JSON.stringify(n)}).then(function(a){if(a.status!==200)return s(a);var u=a.headers.get("Content-type")||"";if(u.includes("application/json"))return s(a);var d=e.fileName;if(!d){var h=a.headers.get("Content-disposition")||"";d=h.split("filename=")[1]}a.blob().then(function(f){var p=URL.createObjectURL(f),m=document.createElement("a");m.setAttribute("href",p),m.setAttribute("download",decodeURIComponent(d||"")),m.click(),URL.revokeObjectURL(p),o&&o(a)})}).finally(function(){r&&r()})},isUtf8:function(e){var t=["ä","å","æ","ç","è","é"];return t.forEach(function(n){if(e&&e.indexOf(n)>-1)return!1}),!0},utf16to8:function(e){if(typeof e!="string"||!this.isUtf8(e))return e;var t,n,r;t="";var o=e.length||0;for(n=0;n<o;n++)r=e.charCodeAt(n),r>=1&&r<=127?t+=e.charAt(n):r>2047?(t+=String.fromCharCode(224|r>>12&15),t+=String.fromCharCode(128|r>>6&63),t+=String.fromCharCode(128|r>>0&63)):(t+=String.fromCharCode(192|r>>6&31),t+=String.fromCharCode(128|r>>0&63));return t},base64Encode:function(e){var t=e;if(!t)return t;try{t=btoa(this.utf16to8(e))}catch(n){console.log(n)}return t}};sae(function(i,e){(function(t,n){i.exports=n()})(hw,function(){var t=1e3,n=6e4,r=36e5,o="millisecond",s="second",a="minute",u="hour",d="day",h="week",f="month",p="quarter",m="year",v="date",b="Invalid Date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(T,F,B){var U=String(T);return!U||U.length>=F?T:""+Array(F+1-U.length).join(B)+T},A={s:E,z:function(T){var F=-T.utcOffset(),B=Math.abs(F),U=Math.floor(B/60),G=B%60;return(F<=0?"+":"-")+E(U,2,"0")+":"+E(G,2,"0")},m:function T(F,B){if(F.date()<B.date())return-T(B,F);var U=12*(B.year()-F.year())+(B.month()-F.month()),G=F.clone().add(U,f),Z=B-G<0,z=F.clone().add(U+(Z?-1:1),f);return+(-(U+(B-G)/(Z?G-z:z-G))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:f,y:m,w:h,d,D:v,h:u,m:a,s,ms:o,Q:p}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},N="en",V={};V[N]=y;var R=function(T){return T instanceof $},M=function T(F,B,U){var G;if(!F)return N;if(typeof F=="string"){var Z=F.toLowerCase();V[Z]&&(G=Z),B&&(V[Z]=B,G=Z);var z=F.split("-");if(!G&&z.length>1)return T(z[0])}else{var O=F.name;V[O]=F,G=O}return!U&&G&&(N=G),G||!U&&N},K=function(T,F){if(R(T))return T.clone();var B=typeof F=="object"?F:{};return B.date=T,B.args=arguments,new $(B)},X=A;X.l=M,X.i=R,X.w=function(T,F){return K(T,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var $=function(){function T(B){this.$L=M(B.locale,null,!0),this.parse(B)}var F=T.prototype;return F.parse=function(B){this.$d=function(U){var G=U.date,Z=U.utc;if(G===null)return new Date(NaN);if(X.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var z=G.match(L);if(z){var O=z[2]-1||0,Y=(z[7]||"0").substring(0,3);return Z?new Date(Date.UTC(z[1],O,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Y)):new Date(z[1],O,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Y)}}return new Date(G)}(B),this.$x=B.x||{},this.init()},F.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},F.$utils=function(){return X},F.isValid=function(){return this.$d.toString()!==b},F.isSame=function(B,U){var G=K(B);return this.startOf(U)<=G&&G<=this.endOf(U)},F.isAfter=function(B,U){return K(B)<this.startOf(U)},F.isBefore=function(B,U){return this.endOf(U)<K(B)},F.$g=function(B,U,G){return X.u(B)?this[U]:this.set(G,B)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(B,U){var G=this,Z=!!X.u(U)||U,z=X.p(B),O=function(At,Me){var st=X.w(G.$u?Date.UTC(G.$y,Me,At):new Date(G.$y,Me,At),G);return Z?st:st.endOf(d)},Y=function(At,Me){return X.w(G.toDate()[At].apply(G.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(Me)),G)},fe=this.$W,ne=this.$M,we=this.$D,Ie="set"+(this.$u?"UTC":"");switch(z){case m:return Z?O(1,0):O(31,11);case f:return Z?O(1,ne):O(0,ne+1);case h:var je=this.$locale().weekStart||0,dt=(fe<je?fe+7:fe)-je;return O(Z?we-dt:we+(6-dt),ne);case d:case v:return Y(Ie+"Hours",0);case u:return Y(Ie+"Minutes",1);case a:return Y(Ie+"Seconds",2);case s:return Y(Ie+"Milliseconds",3);default:return this.clone()}},F.endOf=function(B){return this.startOf(B,!1)},F.$set=function(B,U){var G,Z=X.p(B),z="set"+(this.$u?"UTC":""),O=(G={},G[d]=z+"Date",G[v]=z+"Date",G[f]=z+"Month",G[m]=z+"FullYear",G[u]=z+"Hours",G[a]=z+"Minutes",G[s]=z+"Seconds",G[o]=z+"Milliseconds",G)[Z],Y=Z===d?this.$D+(U-this.$W):U;if(Z===f||Z===m){var fe=this.clone().set(v,1);fe.$d[O](Y),fe.init(),this.$d=fe.set(v,Math.min(this.$D,fe.daysInMonth())).$d}else O&&this.$d[O](Y);return this.init(),this},F.set=function(B,U){return this.clone().$set(B,U)},F.get=function(B){return this[X.p(B)]()},F.add=function(B,U){var G,Z=this;B=Number(B);var z=X.p(U),O=function(ne){var we=K(Z);return X.w(we.date(we.date()+Math.round(ne*B)),Z)};if(z===f)return this.set(f,this.$M+B);if(z===m)return this.set(m,this.$y+B);if(z===d)return O(1);if(z===h)return O(7);var Y=(G={},G[a]=n,G[u]=r,G[s]=t,G)[z]||1,fe=this.$d.getTime()+B*Y;return X.w(fe,this)},F.subtract=function(B,U){return this.add(-1*B,U)},F.format=function(B){var U=this,G=this.$locale();if(!this.isValid())return G.invalidDate||b;var Z=B||"YYYY-MM-DDTHH:mm:ssZ",z=X.z(this),O=this.$H,Y=this.$m,fe=this.$M,ne=G.weekdays,we=G.months,Ie=function(Me,st,bt,tt){return Me&&(Me[st]||Me(U,Z))||bt[st].slice(0,tt)},je=function(Me){return X.s(O%12||12,Me,"0")},dt=G.meridiem||function(Me,st,bt){var tt=Me<12?"AM":"PM";return bt?tt.toLowerCase():tt},At={YY:String(this.$y).slice(-2),YYYY:this.$y,M:fe+1,MM:X.s(fe+1,2,"0"),MMM:Ie(G.monthsShort,fe,we,3),MMMM:Ie(we,fe),D:this.$D,DD:X.s(this.$D,2,"0"),d:String(this.$W),dd:Ie(G.weekdaysMin,this.$W,ne,2),ddd:Ie(G.weekdaysShort,this.$W,ne,3),dddd:ne[this.$W],H:String(O),HH:X.s(O,2,"0"),h:je(1),hh:je(2),a:dt(O,Y,!0),A:dt(O,Y,!1),m:String(Y),mm:X.s(Y,2,"0"),s:String(this.$s),ss:X.s(this.$s,2,"0"),SSS:X.s(this.$ms,3,"0"),Z:z};return Z.replace(S,function(Me,st){return st||At[Me]||z.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(B,U,G){var Z,z=X.p(U),O=K(B),Y=(O.utcOffset()-this.utcOffset())*n,fe=this-O,ne=X.m(this,O);return ne=(Z={},Z[m]=ne/12,Z[f]=ne,Z[p]=ne/3,Z[h]=(fe-Y)/6048e5,Z[d]=(fe-Y)/864e5,Z[u]=fe/r,Z[a]=fe/n,Z[s]=fe/t,Z)[z]||fe,G?ne:X.a(ne)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return V[this.$L]},F.locale=function(B,U){if(!B)return this.$L;var G=this.clone(),Z=M(B,U,!0);return Z&&(G.$L=Z),G},F.clone=function(){return X.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},T}(),D=$.prototype;return K.prototype=D,[["$ms",o],["$s",s],["$m",a],["$H",u],["$W",d],["$M",f],["$y",m],["$D",v]].forEach(function(T){D[T[1]]=function(F){return this.$g(F,T[0],T[1])}}),K.extend=function(T,F){return T.$i||(T(F,$,K),T.$i=!0),K},K.locale=M,K.isDayjs=R,K.unix=function(T){return K(1e3*T)},K.en=V[N],K.Ls=V,K.p={},K})});const pA=Hn("context-view"),J7=gt(pA,"content"),Nbe=gt(pA,"block"),aae=_n(pA,"shadow");var y2;(function(i){i.onHide="onHide"})(y2||(y2={}));const e9=new U5;function XO(i){const[e,t]=he.useState();return he.useEffect(()=>{t(NS(i))},[]),e}function NS(i={}){const{shadowOutline:e=!0}=i,t=mn(pA,"fade-in");let n=ey(`.${pA}`);const r=(d,h)=>{const f=ey("."+J7),p=h||(i==null?void 0:i.render);if(!p)throw new Error("ContextView show Error: the render parameter is required!");uF(re.createElement("div",{ref:()=>{if(n){const m=iae(n,d);n.style.cssText=`
                    visibility: visible;
                    top: ${m.y}px;
                    left: ${m.x}px;
                `}}},p()),f)},o=()=>{if(n){const d=ey(`.${J7}`);d&&nae(d),n.style.visibility="hidden",e9.emit(y2.onHide)}},s=d=>{e9.subscribe(y2.onHide,d)},a=d=>{d.preventDefault(),d.stopPropagation(),o()},u=()=>{e9.unsubscribe(y2.onHide),o()};if(!n){n=document.createElement("div"),n.className=mn(t,bf.isMacOs()?"mac":""),n.style.visibility="hidden";const d=document.getElementById("molecule");d?d.appendChild(n):document.body.appendChild(n);const h=e===!1?"":aae;uF(re.createElement(re.Fragment,null,re.createElement("div",{className:Nbe,onClick:a,onContextMenu:a}),re.createElement("div",{className:mn(J7,h)})),n)}return{view:n,show:r,hide:o,onHide:s,dispose:u}}function G5(i){const{anchor:e,render:t}=i;if(!e)return;const n=NS({render:t}),r=s=>{s.target===s.currentTarget&&(s.preventDefault(),n.show({x:s.clientX,y:s.clientY},t))};e.addEventListener("contextmenu",r);const o=()=>{n.hide(),e.removeEventListener("contextmenu",r)};return Object.assign(Object.assign({},n),{dispose:o})}function di(i){return e=>e.id===i}function bK(...i){return function(...e){i.filter(t=>!!t).forEach(t=>t==null?void 0:t(...e))}}function lae(){return Date.now()+Math.round(Math.random()*1e3)}function CK(i,e){for(const t in e)typeof i[t]=="object"&&e[t]?i[t]=CK(i[t],e[t]):i[t]=e[t];return i}function Abe(i){const e={},t=(n,r)=>{for(const o in r)if(o){const s=r[o],a=n?`${n}.${o}`:o;typeof s=="object"?t(a,s):e[a]=s}};return t("",i),e}function Obe(i){let e={};for(const t in i)if(t){const n=t.split(".");let r="",o={},s=o;for(let a=0;a<n.length&&a!==n.length;++a){const u=n[a],d={[u]:""};r&&(s[r]=d),s=d,r=u,a===0&&(o=d)}s[r]=i[t],e=CK(e,o)}return e}function Mbe(i){let e,t,n;if(i.match(/^rgb/)){const o=i.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||[];e=+o[1],t=+o[2],n=+o[3]}else{let o=+("0x"+i.slice(1,7));i.length<5&&(o=+("0x"+i.slice(1).replace(/./g,"$&$&").slice(0,6))),e=o>>16,t=o>>8&255,n=o&255}return Math.sqrt(.299*(e*e)+.587*(t*t)+.114*(n*n))>127.5?"light":"dark"}function Rbe(i,e){return i*e}function Pbe(i,e){const t=document.head.getElementsByClassName(e);if(t.length===0){const n=document.createElement("style");n.type="text/css",n.className=e,n.innerHTML=i,document.head.appendChild(n)}else t[0].innerHTML=i}const Cg=Hn("menu"),uae=Hn("sub-menu"),Fbe=_n(Cg,"vertical"),Bbe=_n(Cg,"horizontal"),QO=gt(Cg,"item"),Wbe=gt(Cg,"divider"),cae=gt(Cg,"check"),wK=_n(QO,"disabled"),GN=_n(QO,"active"),dae=gt(Cg,"label"),hae=gt(Cg,"content"),Vbe=gt(Cg,"keybinding"),Hbe=gt(Cg,"indicator"),$be=()=>re.createElement("li",{className:mn(QO,wK),role:"separator"},re.createElement("a",{className:Wbe}));var zbe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function dr(i){const{className:e,type:t,children:n}=i,r=zbe(i,["className","type","children"]);return t?typeof t=="string"?re.createElement("span",Object.assign({className:mn(e,"codicon",t.includes("~spin")&&"codicon-spin",Hn(t.split("~spin")[0],"codicon"))},r)):t:n?re.createElement("span",Object.assign({className:e},r),n):null}var Ube=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function fae(i){const{icon:e,disabled:t=!1,className:n,onClick:r,keybinding:o,render:s,children:a,name:u,title:d,id:h,sortIndex:f}=i,p=Ube(i,["icon","disabled","className","onClick","keybinding","render","children","name","title","id","sortIndex"]),m={onClick:function(v){r==null||r(v,i)}};return re.createElement("li",Object.assign({className:mn(QO,n,t?wK:null),id:h==null?void 0:h.toString(),"data-sort":f},typeof d=="string"?{title:d}:{},m,p),re.createElement("div",{className:hae},re.createElement(dr,{type:e,className:cae}),re.createElement("span",{className:dae,title:typeof u=="string"?u:""},s?s(i):a),o?re.createElement("span",{className:Vbe},o):null))}var jbe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t},g0;(function(i){i.Vertical="vertical",i.Horizontal="horizontal"})(g0||(g0={}));function gae(i){return i===g0.Horizontal}function pae(i){const{className:e,name:t,render:n,data:r=[],mode:o=g0.Vertical,icon:s,disabled:a=!1,children:u,onClick:d,title:h,sortIndex:f}=i,p=jbe(i,["className","name","render","data","mode","icon","disabled","children","onClick","title","sortIndex"]),m=mn(uae,e),b=gae(o)?"down":"right",L=r.length>0?re.createElement(Ya,Object.assign({className:m,style:{opacity:"0",pointerEvents:"none"},data:r,onClick:d},p)):re.createElement(Ya,{className:m,style:{opacity:"0",pointerEvents:"none"},onClick:d},u);return re.createElement("li",Object.assign({className:mn(QO,a?wK:null),"data-submenu":!0,"data-mode":o,"data-sort":f},typeof h=="string"?{title:h}:{},p),re.createElement("div",{className:hae},typeof s=="string"?re.createElement(dr,{className:cae,type:s||""}):s,re.createElement("span",{className:dae},n?n(i):t),re.createElement(dr,{className:Hbe,type:`chevron-${b}`})),L)}var Kbe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Gbe=i=>{if(i&&i!=null&&i.dataset.submenu){const e=Array.prototype.find.call(i.children,t=>t.nodeName==="UL");e.style.opacity="1",e.style.pointerEvents="auto",i.classList.add(GN)}},qbe=(i,e,t=!1)=>{if(!i||!e)return;const n=i.getBoundingClientRect(),r=iae(e,n);if(t)r.y=r.y+n.height;else{r.x=r.x+n.width;const o=getComputedStyle(e).getPropertyValue("font-size"),s=Rbe(.5,parseInt(o.replace(/px/g,"")));r.y=r.y-s}e.style.top=`${r.y}px`,e.style.left=`${r.x}px`};function Ybe(i,e){const{className:t,mode:n=g0.Vertical,data:r=[],children:o,onClick:s,trigger:a="hover",title:u}=i,d=Kbe(i,["className","mode","data","children","onClick","trigger","title"]),h=he.useRef(null),f=he.useRef(!1);let p=ZO(o,{onClick:s});const m=a==="hover"?200:0,v=n===g0.Horizontal?Bbe:Fbe,b=mn(Cg,v,t);if(r.length>0){const V=R=>R.map(M=>{if(M.type==="divider")return re.createElement($be,{key:M.id});const K=bK(s,M.onClick);return M.data&&M.data.length>0?re.createElement(pae,Object.assign({key:M.id,mode:M.mode||n},M,{onClick:K}),V(M.data)):re.createElement(fae,Object.assign({},M,{key:M.id,onClick:K}),M.name)});p=V(r)}const L=()=>{var V,R;(V=h.current)===null||V===void 0||V.querySelectorAll("ul").forEach(M=>{M.style.opacity="0",M.style.pointerEvents="none"}),(R=h.current)===null||R===void 0||R.querySelectorAll(`li.${GN}`).forEach(M=>{M.classList.remove(GN)})},S=wr.debounce(V=>{if(f.current){const R=document.elementsFromPoint(V.pageX,V.pageY),M=R.find(D=>D.nodeName==="UL"),K=R.find(D=>D.nodeName==="LI");M&&(M.querySelectorAll("ul").forEach(D=>{D.style.opacity="0",D.style.pointerEvents="none"}),M.querySelectorAll(`li.${GN}`).forEach(D=>{D.classList.remove(GN)})),Gbe(K);const X=(K==null?void 0:K.querySelector("ul"))||void 0,$=(K==null?void 0:K.dataset.mode)||n;qbe(K,X,gae($))}},m),y=V=>{V.preventDefault(),V.persist(),V.stopPropagation(),f.current=!0,S(V)},E=()=>{f.current=!1},A=()=>b!=null&&b.includes(uae)?{}:{onContextMenu:V=>{V.preventDefault(),V.persist(),V.stopPropagation()},onClick:V=>{V.preventDefault(),V.persist(),V.stopPropagation()},[rae(a)]:y,onMouseOut:E},N=he.useCallback(()=>{document.hidden&&L()},[]);return he.useEffect(()=>(window.addEventListener("contextmenu",L),window.addEventListener("click",L),window.addEventListener("visibilitychange",N),()=>{document.removeEventListener("contextmenu",L),window.removeEventListener("click",L),window.removeEventListener("visibilitychange",N)}),[]),he.useImperativeHandle(e,()=>({dispose:()=>{L()}})),re.createElement("ul",Object.assign({className:b,ref:h},typeof u=="string"?{title:u}:{},A(),d),p)}const Ya=he.forwardRef(Ybe);function us(){return us=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},us.apply(this,arguments)}function Za(i){"@babel/helpers - typeof";return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Za(i)}function Zbe(i,e){if(Za(i)!=="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(Za(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function mae(i){var e=Zbe(i,"string");return Za(e)==="symbol"?e:String(e)}function en(i,e,t){return e=mae(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function jX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function En(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jX(Object(t),!0).forEach(function(n){en(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):jX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Xbe(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function dF(i,e){if(i==null)return{};var t=Xbe(i,e),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(r=0;r<o.length;r++)n=o[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function V0(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function KX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,mae(n.key),n)}}function H0(i,e,t){return e&&KX(i.prototype,e),t&&KX(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function In(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function FV(i,e){return FV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},FV(i,e)}function fC(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&FV(i,e)}function hF(i){return hF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hF(i)}function Qbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jbe(i,e){if(e&&(Za(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return In(i)}function gC(i){var e=Qbe();return function(){var n=hF(i),r;if(e){var o=hF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Jbe(this,r)}}var _ae=function(e){return+setTimeout(e,16)},vae=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(_ae=function(e){return window.requestAnimationFrame(e)},vae=function(e){return window.cancelAnimationFrame(e)});var GX=0,yK=new Map;function bae(i){yK.delete(i)}var jh=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;GX+=1;var n=GX;function r(o){if(o===0)bae(n),e();else{var s=_ae(function(){r(o-1)});yK.set(n,s)}}return r(t),n};jh.cancel=function(i){var e=yK.get(i);return bae(e),vae(e)};function S2(i,e){if(!i)return!1;if(i.contains)return i.contains(e);for(var t=e;t;){if(t===i)return!0;t=t.parentNode}return!1}function eCe(i){return i instanceof HTMLElement||i instanceof SVGElement}function fF(i){return eCe(i)?i:i instanceof re.Component?Ry.findDOMNode(i):null}var Cae={exports:{}},Hr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=typeof Symbol=="function"&&Symbol.for,SK=la?Symbol.for("react.element"):60103,LK=la?Symbol.for("react.portal"):60106,q5=la?Symbol.for("react.fragment"):60107,Y5=la?Symbol.for("react.strict_mode"):60108,Z5=la?Symbol.for("react.profiler"):60114,X5=la?Symbol.for("react.provider"):60109,Q5=la?Symbol.for("react.context"):60110,EK=la?Symbol.for("react.async_mode"):60111,J5=la?Symbol.for("react.concurrent_mode"):60111,e8=la?Symbol.for("react.forward_ref"):60112,t8=la?Symbol.for("react.suspense"):60113,tCe=la?Symbol.for("react.suspense_list"):60120,n8=la?Symbol.for("react.memo"):60115,i8=la?Symbol.for("react.lazy"):60116,nCe=la?Symbol.for("react.block"):60121,iCe=la?Symbol.for("react.fundamental"):60117,rCe=la?Symbol.for("react.responder"):60118,oCe=la?Symbol.for("react.scope"):60119;function bc(i){if(typeof i=="object"&&i!==null){var e=i.$$typeof;switch(e){case SK:switch(i=i.type,i){case EK:case J5:case q5:case Z5:case Y5:case t8:return i;default:switch(i=i&&i.$$typeof,i){case Q5:case e8:case i8:case n8:case X5:return i;default:return e}}case LK:return e}}}function wae(i){return bc(i)===J5}Hr.AsyncMode=EK;Hr.ConcurrentMode=J5;Hr.ContextConsumer=Q5;Hr.ContextProvider=X5;Hr.Element=SK;Hr.ForwardRef=e8;Hr.Fragment=q5;Hr.Lazy=i8;Hr.Memo=n8;Hr.Portal=LK;Hr.Profiler=Z5;Hr.StrictMode=Y5;Hr.Suspense=t8;Hr.isAsyncMode=function(i){return wae(i)||bc(i)===EK};Hr.isConcurrentMode=wae;Hr.isContextConsumer=function(i){return bc(i)===Q5};Hr.isContextProvider=function(i){return bc(i)===X5};Hr.isElement=function(i){return typeof i=="object"&&i!==null&&i.$$typeof===SK};Hr.isForwardRef=function(i){return bc(i)===e8};Hr.isFragment=function(i){return bc(i)===q5};Hr.isLazy=function(i){return bc(i)===i8};Hr.isMemo=function(i){return bc(i)===n8};Hr.isPortal=function(i){return bc(i)===LK};Hr.isProfiler=function(i){return bc(i)===Z5};Hr.isStrictMode=function(i){return bc(i)===Y5};Hr.isSuspense=function(i){return bc(i)===t8};Hr.isValidElementType=function(i){return typeof i=="string"||typeof i=="function"||i===q5||i===J5||i===Z5||i===Y5||i===t8||i===tCe||typeof i=="object"&&i!==null&&(i.$$typeof===i8||i.$$typeof===n8||i.$$typeof===X5||i.$$typeof===Q5||i.$$typeof===e8||i.$$typeof===iCe||i.$$typeof===rCe||i.$$typeof===oCe||i.$$typeof===nCe)};Hr.typeOf=bc;Cae.exports=Hr;var yae=Cae.exports;function Sae(i,e){typeof i=="function"?i(e):Za(i)==="object"&&i&&"current"in i&&(i.current=e)}function xK(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n=e.filter(function(r){return r});return n.length<=1?n[0]:function(r){e.forEach(function(o){Sae(o,r)})}}function DK(i){var e,t,n=yae.isMemo(i)?i.type.type:i.type;return!(typeof n=="function"&&!((e=n.prototype)!==null&&e!==void 0&&e.render)||typeof i=="function"&&!((t=i.prototype)!==null&&t!==void 0&&t.render))}function qN(i,e,t,n){var r=Ry.unstable_batchedUpdates?function(s){Ry.unstable_batchedUpdates(t,s)}:t;return i!=null&&i.addEventListener&&i.addEventListener(e,r,n),{remove:function(){i!=null&&i.removeEventListener&&i.removeEventListener(e,r,n)}}}function AS(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Lae=he.forwardRef(function(i,e){var t=i.didUpdate,n=i.getContainer,r=i.children,o=he.useRef(),s=he.useRef();he.useImperativeHandle(e,function(){return{}});var a=he.useRef(!1);return!a.current&&AS()&&(s.current=n(),o.current=s.current.parentNode,a.current=!0),he.useEffect(function(){t==null||t(i)}),he.useEffect(function(){return s.current.parentNode===null&&o.current!==null&&o.current.appendChild(s.current),function(){var u,d;(u=s.current)===null||u===void 0||(d=u.parentNode)===null||d===void 0||d.removeChild(s.current)}},[]),s.current?Ry.createPortal(r,s.current):null}),Eae={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var s=typeof o;if(s==="string"||s==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&n.push(a)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var u in o)e.call(o,u)&&o[u]&&n.push(u)}}}return n.join(" ")}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(Eae);var sCe=Eae.exports;const rd=Vp(sCe);function aCe(i,e,t){return t?i[0]===e[0]:i[0]===e[0]&&i[1]===e[1]}function lCe(i,e,t){var n=i[e]||{};return En(En({},n),t)}function uCe(i,e,t,n){for(var r=t.points,o=Object.keys(i),s=0;s<o.length;s+=1){var a=o[s];if(aCe(i[a].points,r,n))return"".concat(e,"-placement-").concat(a)}return""}function cCe(i){if(Array.isArray(i))return i}function dCe(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,o,s,a=[],u=!0,d=!1;try{if(o=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(h){d=!0,r=h}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(d)throw r}}return a}}function BV(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function xae(i,e){if(i){if(typeof i=="string")return BV(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BV(i,e)}}function hCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(i,e){return cCe(i)||dCe(i,e)||xae(i,e)||hCe()}const fCe=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var i=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(i==null?void 0:i.substr(0,4))};var gCe=he.createContext({}),pCe=function(i){fC(t,i);var e=gC(t);function t(){return V0(this,t),e.apply(this,arguments)}return H0(t,[{key:"render",value:function(){return this.props.children}}]),t}(he.Component);function L2(i){var e=he.useRef(!1),t=he.useState(i),n=yo(t,2),r=n[0],o=n[1];he.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(a,u){u&&e.current||o(a)}return[r,s]}var c1="none",fR="appear",gR="enter",pR="leave",qX="none",Eh="prepare",Tw="start",Nw="active",IK="end",Dae="prepared";function YX(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit".concat(i)]="webkit".concat(e),t["Moz".concat(i)]="moz".concat(e),t["ms".concat(i)]="MS".concat(e),t["O".concat(i)]="o".concat(e.toLowerCase()),t}function mCe(i,e){var t={animationend:YX("Animation","AnimationEnd"),transitionend:YX("Transition","TransitionEnd")};return i&&("AnimationEvent"in e||delete t.animationend.animation,"TransitionEvent"in e||delete t.transitionend.transition),t}var _Ce=mCe(AS(),typeof window<"u"?window:{}),Iae={};if(AS()){var vCe=document.createElement("div");Iae=vCe.style}var mR={};function kae(i){if(mR[i])return mR[i];var e=_Ce[i];if(e)for(var t=Object.keys(e),n=t.length,r=0;r<n;r+=1){var o=t[r];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Iae)return mR[i]=e[o],mR[i]}return""}var Tae=kae("animationend"),Nae=kae("transitionend"),Aae=!!(Tae&&Nae),ZX=Tae||"animationend",XX=Nae||"transitionend";function QX(i,e){if(!i)return null;if(Za(i)==="object"){var t=e.replace(/-\w/g,function(n){return n[1].toUpperCase()});return i[t]}return"".concat(i,"-").concat(e)}const bCe=function(i){var e=he.useRef(),t=he.useRef(i);t.current=i;var n=he.useCallback(function(s){t.current(s)},[]);function r(s){s&&(s.removeEventListener(XX,n),s.removeEventListener(ZX,n))}function o(s){e.current&&e.current!==s&&r(e.current),s&&s!==e.current&&(s.addEventListener(XX,n),s.addEventListener(ZX,n),e.current=s)}return he.useEffect(function(){return function(){r(e.current)}},[]),[o,r]};var Oae=AS()?he.useLayoutEffect:he.useEffect;const CCe=function(){var i=he.useRef(null);function e(){jh.cancel(i.current)}function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=jh(function(){r<=1?n({isCanceled:function(){return o!==i.current}}):t(n,r-1)});i.current=o}return he.useEffect(function(){return function(){e()}},[]),[t,e]};var wCe=[Eh,Tw,Nw,IK],yCe=[Eh,Dae],Mae=!1,SCe=!0;function Rae(i){return i===Nw||i===IK}const LCe=function(i,e,t){var n=L2(qX),r=yo(n,2),o=r[0],s=r[1],a=CCe(),u=yo(a,2),d=u[0],h=u[1];function f(){s(Eh,!0)}var p=e?yCe:wCe;return Oae(function(){if(o!==qX&&o!==IK){var m=p.indexOf(o),v=p[m+1],b=t(o);b===Mae?s(v,!0):v&&d(function(L){function S(){L.isCanceled()||s(v,!0)}b===!0?S():Promise.resolve(b).then(S)})}},[i,o]),he.useEffect(function(){return function(){h()}},[]),[f,o]};function ECe(i,e,t,n){var r=n.motionEnter,o=r===void 0?!0:r,s=n.motionAppear,a=s===void 0?!0:s,u=n.motionLeave,d=u===void 0?!0:u,h=n.motionDeadline,f=n.motionLeaveImmediately,p=n.onAppearPrepare,m=n.onEnterPrepare,v=n.onLeavePrepare,b=n.onAppearStart,L=n.onEnterStart,S=n.onLeaveStart,y=n.onAppearActive,E=n.onEnterActive,A=n.onLeaveActive,N=n.onAppearEnd,V=n.onEnterEnd,R=n.onLeaveEnd,M=n.onVisibleChanged,K=L2(),X=yo(K,2),$=X[0],D=X[1],T=L2(c1),F=yo(T,2),B=F[0],U=F[1],G=L2(null),Z=yo(G,2),z=Z[0],O=Z[1],Y=he.useRef(!1),fe=he.useRef(null);function ne(){return t()}var we=he.useRef(!1);function Ie(){U(c1,!0),O(null,!0)}function je(Ln){var Mn=ne();if(!(Ln&&!Ln.deadline&&Ln.target!==Mn)){var Pt=we.current,pn;B===fR&&Pt?pn=N==null?void 0:N(Mn,Ln):B===gR&&Pt?pn=V==null?void 0:V(Mn,Ln):B===pR&&Pt&&(pn=R==null?void 0:R(Mn,Ln)),B!==c1&&Pt&&pn!==!1&&Ie()}}var dt=bCe(je),At=yo(dt,1),Me=At[0],st=function(Mn){var Pt,pn,mi;switch(Mn){case fR:return Pt={},en(Pt,Eh,p),en(Pt,Tw,b),en(Pt,Nw,y),Pt;case gR:return pn={},en(pn,Eh,m),en(pn,Tw,L),en(pn,Nw,E),pn;case pR:return mi={},en(mi,Eh,v),en(mi,Tw,S),en(mi,Nw,A),mi;default:return{}}},bt=he.useMemo(function(){return st(B)},[B]),tt=LCe(B,!i,function(Ln){if(Ln===Eh){var Mn=bt[Eh];return Mn?Mn(ne()):Mae}if(nn in bt){var Pt;O(((Pt=bt[nn])===null||Pt===void 0?void 0:Pt.call(bt,ne(),null))||null)}return nn===Nw&&(Me(ne()),h>0&&(clearTimeout(fe.current),fe.current=setTimeout(function(){je({deadline:!0})},h))),nn===Dae&&Ie(),SCe}),tn=yo(tt,2),Zt=tn[0],nn=tn[1],On=Rae(nn);we.current=On,Oae(function(){D(e);var Ln=Y.current;Y.current=!0;var Mn;!Ln&&e&&a&&(Mn=fR),Ln&&e&&o&&(Mn=gR),(Ln&&!e&&d||!Ln&&f&&!e&&d)&&(Mn=pR);var Pt=st(Mn);Mn&&(i||Pt[Eh])?(U(Mn),Zt()):U(c1)},[e]),he.useEffect(function(){(B===fR&&!a||B===gR&&!o||B===pR&&!d)&&U(c1)},[a,o,d]),he.useEffect(function(){return function(){Y.current=!1,clearTimeout(fe.current)}},[]);var Tn=he.useRef(!1);he.useEffect(function(){$&&(Tn.current=!0),$!==void 0&&B===c1&&((Tn.current||$)&&(M==null||M($)),Tn.current=!0)},[$,B]);var ei=z;return bt[Eh]&&nn===Tw&&(ei=En({transition:"none"},ei)),[B,nn,ei,$??e]}function xCe(i){var e=i;Za(i)==="object"&&(e=i.transitionSupport);function t(r,o){return!!(r.motionName&&e&&o!==!1)}var n=he.forwardRef(function(r,o){var s=r.visible,a=s===void 0?!0:s,u=r.removeOnLeave,d=u===void 0?!0:u,h=r.forceRender,f=r.children,p=r.motionName,m=r.leavedClassName,v=r.eventProps,b=he.useContext(gCe),L=b.motion,S=t(r,L),y=he.useRef(),E=he.useRef();function A(){try{return y.current instanceof HTMLElement?y.current:fF(E.current)}catch{return null}}var N=ECe(S,a,A,r),V=yo(N,4),R=V[0],M=V[1],K=V[2],X=V[3],$=he.useRef(X);X&&($.current=!0);var D=he.useCallback(function(O){y.current=O,Sae(o,O)},[o]),T,F=En(En({},v),{},{visible:a});if(!f)T=null;else if(R===c1)X?T=f(En({},F),D):!d&&$.current&&m?T=f(En(En({},F),{},{className:m}),D):h||!d&&!m?T=f(En(En({},F),{},{style:{display:"none"}}),D):T=null;else{var B,U;M===Eh?U="prepare":Rae(M)?U="active":M===Tw&&(U="start");var G=QX(p,"".concat(R,"-").concat(U));T=f(En(En({},F),{},{className:rd(QX(p,R),(B={},en(B,G,G&&U),en(B,p,typeof p=="string"),B)),style:K}),D)}if(he.isValidElement(T)&&DK(T)){var Z=T,z=Z.ref;z||(T=he.cloneElement(T,{ref:D}))}return he.createElement(pCe,{ref:E},T)});return n.displayName="CSSMotion",n}const OS=xCe(Aae);var WV="add",VV="keep",HV="remove",t9="removed";function DCe(i){var e;return i&&Za(i)==="object"&&"key"in i?e=i:e={key:i},En(En({},e),{},{key:String(e.key)})}function $V(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return i.map(DCe)}function ICe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=[],n=0,r=e.length,o=$V(i),s=$V(e);o.forEach(function(d){for(var h=!1,f=n;f<r;f+=1){var p=s[f];if(p.key===d.key){n<f&&(t=t.concat(s.slice(n,f).map(function(m){return En(En({},m),{},{status:WV})})),n=f),t.push(En(En({},p),{},{status:VV})),n+=1,h=!0;break}}h||t.push(En(En({},d),{},{status:HV}))}),n<r&&(t=t.concat(s.slice(n).map(function(d){return En(En({},d),{},{status:WV})})));var a={};t.forEach(function(d){var h=d.key;a[h]=(a[h]||0)+1});var u=Object.keys(a).filter(function(d){return a[d]>1});return u.forEach(function(d){t=t.filter(function(h){var f=h.key,p=h.status;return f!==d||p!==HV}),t.forEach(function(h){h.key===d&&(h.status=VV)})}),t}var kCe=["component","children","onVisibleChanged","onAllRemoved"],TCe=["status"],NCe=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ACe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OS,t=function(n){fC(o,n);var r=gC(o);function o(){var s;V0(this,o);for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return s=r.call.apply(r,[this].concat(u)),en(In(s),"state",{keyEntities:[]}),en(In(s),"removeKey",function(h){var f=s.state.keyEntities,p=f.map(function(m){return m.key!==h?m:En(En({},m),{},{status:t9})});return s.setState({keyEntities:p}),p.filter(function(m){var v=m.status;return v!==t9}).length}),s}return H0(o,[{key:"render",value:function(){var a=this,u=this.state.keyEntities,d=this.props,h=d.component,f=d.children,p=d.onVisibleChanged,m=d.onAllRemoved,v=dF(d,kCe),b=h||he.Fragment,L={};return NCe.forEach(function(S){L[S]=v[S],delete v[S]}),delete v.keys,he.createElement(b,v,u.map(function(S){var y=S.status,E=dF(S,TCe),A=y===WV||y===VV;return he.createElement(e,us({},L,{key:E.key,visible:A,eventProps:E,onVisibleChanged:function(V){if(p==null||p(V,{key:E.key}),!V){var R=a.removeKey(E.key);R===0&&m&&m()}}}),f)}))}}],[{key:"getDerivedStateFromProps",value:function(a,u){var d=a.keys,h=u.keyEntities,f=$V(d),p=ICe(h,f);return{keyEntities:p.filter(function(m){var v=h.find(function(b){var L=b.key;return m.key===L});return!(v&&v.status===t9&&m.status===HV)})}}}]),o}(he.Component);return en(t,"defaultProps",{component:"div"}),t}ACe(Aae);function Pae(i){var e=i.prefixCls,t=i.motion,n=i.animation,r=i.transitionName;return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function OCe(i){var e=i.prefixCls,t=i.visible,n=i.zIndex,r=i.mask,o=i.maskMotion,s=i.maskAnimation,a=i.maskTransitionName;if(!r)return null;var u={};return(o||a||s)&&(u=En({motionAppear:!0},Pae({motion:o,prefixCls:e,transitionName:a,animation:s}))),he.createElement(OS,us({},u,{visible:t,removeOnLeave:!0}),function(d){var h=d.className;return he.createElement("div",{style:{zIndex:n},className:rd("".concat(e,"-mask"),h)})})}function JX(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function eQ(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JX(Object(t),!0).forEach(function(n){MCe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):JX(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function zV(i){"@babel/helpers - typeof";return zV=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zV(i)}function MCe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var yN,RCe={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function gF(){if(yN!==void 0)return yN;yN="";var i=document.createElement("p").style,e="Transform";for(var t in RCe)t+e in i&&(yN=t);return yN}function Fae(){return gF()?"".concat(gF(),"TransitionProperty"):"transitionProperty"}function r8(){return gF()?"".concat(gF(),"Transform"):"transform"}function tQ(i,e){var t=Fae();t&&(i.style[t]=e,t!=="transitionProperty"&&(i.style.transitionProperty=e))}function n9(i,e){var t=r8();t&&(i.style[t]=e,t!=="transform"&&(i.style.transform=e))}function PCe(i){return i.style.transitionProperty||i.style[Fae()]}function FCe(i){var e=window.getComputedStyle(i,null),t=e.getPropertyValue("transform")||e.getPropertyValue(r8());if(t&&t!=="none"){var n=t.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var BCe=/matrix\((.*)\)/,WCe=/matrix3d\((.*)\)/;function VCe(i,e){var t=window.getComputedStyle(i,null),n=t.getPropertyValue("transform")||t.getPropertyValue(r8());if(n&&n!=="none"){var r,o=n.match(BCe);if(o)o=o[1],r=o.split(",").map(function(a){return parseFloat(a,10)}),r[4]=e.x,r[5]=e.y,n9(i,"matrix(".concat(r.join(","),")"));else{var s=n.match(WCe)[1];r=s.split(",").map(function(a){return parseFloat(a,10)}),r[12]=e.x,r[13]=e.y,n9(i,"matrix3d(".concat(r.join(","),")"))}}else n9(i,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var HCe=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,JO;function nQ(i){var e=i.style.display;i.style.display="none",i.offsetHeight,i.style.display=e}function ty(i,e,t){var n=t;if(zV(e)==="object"){for(var r in e)e.hasOwnProperty(r)&&ty(i,r,e[r]);return}if(typeof n<"u"){typeof n=="number"&&(n="".concat(n,"px")),i.style[e]=n;return}return JO(i,e)}function $Ce(i){var e,t,n,r=i.ownerDocument,o=r.body,s=r&&r.documentElement;return e=i.getBoundingClientRect(),t=Math.floor(e.left),n=Math.floor(e.top),t-=s.clientLeft||o.clientLeft||0,n-=s.clientTop||o.clientTop||0,{left:t,top:n}}function Bae(i,e){var t=i["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=i.document;t=r.documentElement[n],typeof t!="number"&&(t=r.body[n])}return t}function Wae(i){return Bae(i)}function Vae(i){return Bae(i,!0)}function mA(i){var e=$Ce(i),t=i.ownerDocument,n=t.defaultView||t.parentWindow;return e.left+=Wae(n),e.top+=Vae(n),e}function kK(i){return i!=null&&i==i.window}function Hae(i){return kK(i)?i.document:i.nodeType===9?i:i.ownerDocument}function zCe(i,e,t){var n=t,r="",o=Hae(i);return n=n||o.defaultView.getComputedStyle(i,null),n&&(r=n.getPropertyValue(e)||n[e]),r}var UCe=new RegExp("^(".concat(HCe,")(?!px)[a-z%]+$"),"i"),jCe=/^(top|right|bottom|left)$/,i9="currentStyle",r9="runtimeStyle",Q0="left",KCe="px";function GCe(i,e){var t=i[i9]&&i[i9][e];if(UCe.test(t)&&!jCe.test(e)){var n=i.style,r=n[Q0],o=i[r9][Q0];i[r9][Q0]=i[i9][Q0],n[Q0]=e==="fontSize"?"1em":t||0,t=n.pixelLeft+KCe,n[Q0]=r,i[r9][Q0]=o}return t===""?"auto":t}typeof window<"u"&&(JO=window.getComputedStyle?zCe:GCe);function _R(i,e){return i==="left"?e.useCssRight?"right":i:e.useCssBottom?"bottom":i}function iQ(i){if(i==="left")return"right";if(i==="right")return"left";if(i==="top")return"bottom";if(i==="bottom")return"top"}function rQ(i,e,t){ty(i,"position")==="static"&&(i.style.position="relative");var n=-999,r=-999,o=_R("left",t),s=_R("top",t),a=iQ(o),u=iQ(s);o!=="left"&&(n=999),s!=="top"&&(r=999);var d="",h=mA(i);("left"in e||"top"in e)&&(d=PCe(i)||"",tQ(i,"none")),"left"in e&&(i.style[a]="",i.style[o]="".concat(n,"px")),"top"in e&&(i.style[u]="",i.style[s]="".concat(r,"px")),nQ(i);var f=mA(i),p={};for(var m in e)if(e.hasOwnProperty(m)){var v=_R(m,t),b=m==="left"?n:r,L=h[m]-f[m];v===m?p[v]=b+L:p[v]=b-L}ty(i,p),nQ(i),("left"in e||"top"in e)&&tQ(i,d);var S={};for(var y in e)if(e.hasOwnProperty(y)){var E=_R(y,t),A=e[y]-h[y];y===E?S[E]=p[E]+A:S[E]=p[E]-A}ty(i,S)}function qCe(i,e){var t=mA(i),n=FCe(i),r={x:n.x,y:n.y};"left"in e&&(r.x=n.x+e.left-t.left),"top"in e&&(r.y=n.y+e.top-t.top),VCe(i,r)}function YCe(i,e,t){if(t.ignoreShake){var n=mA(i),r=n.left.toFixed(0),o=n.top.toFixed(0),s=e.left.toFixed(0),a=e.top.toFixed(0);if(r===s&&o===a)return}t.useCssRight||t.useCssBottom?rQ(i,e,t):t.useCssTransform&&r8()in document.body.style?qCe(i,e):rQ(i,e,t)}function TK(i,e){for(var t=0;t<i.length;t++)e(i[t])}function $ae(i){return JO(i,"boxSizing")==="border-box"}var ZCe=["margin","border","padding"],UV=-1,XCe=2,jV=1,QCe=0;function JCe(i,e,t){var n={},r=i.style,o;for(o in e)e.hasOwnProperty(o)&&(n[o]=r[o],r[o]=e[o]);t.call(i);for(o in e)e.hasOwnProperty(o)&&(r[o]=n[o])}function YN(i,e,t){var n=0,r,o,s;for(o=0;o<e.length;o++)if(r=e[o],r)for(s=0;s<t.length;s++){var a=void 0;r==="border"?a="".concat(r).concat(t[s],"Width"):a=r+t[s],n+=parseFloat(JO(i,a))||0}return n}var Gf={getParent:function(e){var t=e;do t.nodeType===11&&t.host?t=t.host:t=t.parentNode;while(t&&t.nodeType!==1&&t.nodeType!==9);return t}};TK(["Width","Height"],function(i){Gf["doc".concat(i)]=function(e){var t=e.document;return Math.max(t.documentElement["scroll".concat(i)],t.body["scroll".concat(i)],Gf["viewport".concat(i)](t))},Gf["viewport".concat(i)]=function(e){var t="client".concat(i),n=e.document,r=n.body,o=n.documentElement,s=o[t];return n.compatMode==="CSS1Compat"&&s||r&&r[t]||s}});function oQ(i,e,t){var n=t;if(kK(i))return e==="width"?Gf.viewportWidth(i):Gf.viewportHeight(i);if(i.nodeType===9)return e==="width"?Gf.docWidth(i):Gf.docHeight(i);var r=e==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(e==="width"?i.getBoundingClientRect().width:i.getBoundingClientRect().height),s=$ae(i),a=0;(o==null||o<=0)&&(o=void 0,a=JO(i,e),(a==null||Number(a)<0)&&(a=i.style[e]||0),a=Math.floor(parseFloat(a))||0),n===void 0&&(n=s?jV:UV);var u=o!==void 0||s,d=o||a;return n===UV?u?d-YN(i,["border","padding"],r):a:u?n===jV?d:d+(n===XCe?-YN(i,["border"],r):YN(i,["margin"],r)):a+YN(i,ZCe.slice(n),r)}var ewe={position:"absolute",visibility:"hidden",display:"block"};function sQ(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];var n,r=e[0];return r.offsetWidth!==0?n=oQ.apply(void 0,e):JCe(r,ewe,function(){n=oQ.apply(void 0,e)}),n}TK(["width","height"],function(i){var e=i.charAt(0).toUpperCase()+i.slice(1);Gf["outer".concat(e)]=function(n,r){return n&&sQ(n,i,r?QCe:jV)};var t=i==="width"?["Left","Right"]:["Top","Bottom"];Gf[i]=function(n,r){var o=r;if(o!==void 0){if(n){var s=$ae(n);return s&&(o+=YN(n,["padding","border"],t)),ty(n,i,o)}return}return n&&sQ(n,i,UV)}});function zae(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}var hi={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Hae,offset:function(e,t,n){if(typeof t<"u")YCe(e,t,n||{});else return mA(e)},isWindow:kK,each:TK,css:ty,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var r=e.overflow;if(r)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:zae,getWindowScrollLeft:function(e){return Wae(e)},getWindowScrollTop:function(e){return Vae(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)hi.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};zae(hi,Gf);var o9=hi.getParent;function KV(i){if(hi.isWindow(i)||i.nodeType===9)return null;var e=hi.getDocument(i),t=e.body,n,r=hi.css(i,"position"),o=r==="fixed"||r==="absolute";if(!o)return i.nodeName.toLowerCase()==="html"?null:o9(i);for(n=o9(i);n&&n!==t&&n.nodeType!==9;n=o9(n))if(r=hi.css(n,"position"),r!=="static")return n;return null}var aQ=hi.getParent;function twe(i){if(hi.isWindow(i)||i.nodeType===9)return!1;var e=hi.getDocument(i),t=e.body,n=null;for(n=aQ(i);n&&n!==t&&n!==e;n=aQ(n)){var r=hi.css(n,"position");if(r==="fixed")return!0}return!1}function NK(i,e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=KV(i),r=hi.getDocument(i),o=r.defaultView||r.parentWindow,s=r.body,a=r.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==s&&n!==a&&hi.css(n,"overflow")!=="visible"){var u=hi.offset(n);u.left+=n.clientLeft,u.top+=n.clientTop,t.top=Math.max(t.top,u.top),t.right=Math.min(t.right,u.left+n.clientWidth),t.bottom=Math.min(t.bottom,u.top+n.clientHeight),t.left=Math.max(t.left,u.left)}else if(n===s||n===a)break;n=KV(n)}var d=null;if(!hi.isWindow(i)&&i.nodeType!==9){d=i.style.position;var h=hi.css(i,"position");h==="absolute"&&(i.style.position="fixed")}var f=hi.getWindowScrollLeft(o),p=hi.getWindowScrollTop(o),m=hi.viewportWidth(o),v=hi.viewportHeight(o),b=a.scrollWidth,L=a.scrollHeight,S=window.getComputedStyle(s);if(S.overflowX==="hidden"&&(b=o.innerWidth),S.overflowY==="hidden"&&(L=o.innerHeight),i.style&&(i.style.position=d),e||twe(i))t.left=Math.max(t.left,f),t.top=Math.max(t.top,p),t.right=Math.min(t.right,f+m),t.bottom=Math.min(t.bottom,p+v);else{var y=Math.max(b,f+m);t.right=Math.min(t.right,y);var E=Math.max(L,p+v);t.bottom=Math.min(t.bottom,E)}return t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}function nwe(i,e,t,n){var r=hi.clone(i),o={width:e.width,height:e.height};return n.adjustX&&r.left<t.left&&(r.left=t.left),n.resizeWidth&&r.left>=t.left&&r.left+o.width>t.right&&(o.width-=r.left+o.width-t.right),n.adjustX&&r.left+o.width>t.right&&(r.left=Math.max(t.right-o.width,t.left)),n.adjustY&&r.top<t.top&&(r.top=t.top),n.resizeHeight&&r.top>=t.top&&r.top+o.height>t.bottom&&(o.height-=r.top+o.height-t.bottom),n.adjustY&&r.top+o.height>t.bottom&&(r.top=Math.max(t.bottom-o.height,t.top)),hi.mix(r,o)}function AK(i){var e,t,n;if(!hi.isWindow(i)&&i.nodeType!==9)e=hi.offset(i),t=hi.outerWidth(i),n=hi.outerHeight(i);else{var r=hi.getWindow(i);e={left:hi.getWindowScrollLeft(r),top:hi.getWindowScrollTop(r)},t=hi.viewportWidth(r),n=hi.viewportHeight(r)}return e.width=t,e.height=n,e}function lQ(i,e){var t=e.charAt(0),n=e.charAt(1),r=i.width,o=i.height,s=i.left,a=i.top;return t==="c"?a+=o/2:t==="b"&&(a+=o),n==="c"?s+=r/2:n==="r"&&(s+=r),{left:s,top:a}}function vR(i,e,t,n,r){var o=lQ(e,t[1]),s=lQ(i,t[0]),a=[s.left-o.left,s.top-o.top];return{left:Math.round(i.left-a[0]+n[0]-r[0]),top:Math.round(i.top-a[1]+n[1]-r[1])}}function uQ(i,e,t){return i.left<t.left||i.left+e.width>t.right}function cQ(i,e,t){return i.top<t.top||i.top+e.height>t.bottom}function iwe(i,e,t){return i.left>t.right||i.left+e.width<t.left}function rwe(i,e,t){return i.top>t.bottom||i.top+e.height<t.top}function bR(i,e,t){var n=[];return hi.each(i,function(r){n.push(r.replace(e,function(o){return t[o]}))}),n}function CR(i,e){return i[e]=-i[e],i}function dQ(i,e){var t;return/%$/.test(i)?t=parseInt(i.substring(0,i.length-1),10)/100*e:t=parseInt(i,10),t||0}function hQ(i,e){i[0]=dQ(i[0],e.width),i[1]=dQ(i[1],e.height)}function Uae(i,e,t,n){var r=t.points,o=t.offset||[0,0],s=t.targetOffset||[0,0],a=t.overflow,u=t.source||i;o=[].concat(o),s=[].concat(s),a=a||{};var d={},h=0,f=!!(a&&a.alwaysByViewport),p=NK(u,f),m=AK(u);hQ(o,m),hQ(s,e);var v=vR(m,e,r,o,s),b=hi.merge(m,v);if(p&&(a.adjustX||a.adjustY)&&n){if(a.adjustX&&uQ(v,m,p)){var L=bR(r,/[lr]/gi,{l:"r",r:"l"}),S=CR(o,0),y=CR(s,0),E=vR(m,e,L,S,y);iwe(E,m,p)||(h=1,r=L,o=S,s=y)}if(a.adjustY&&cQ(v,m,p)){var A=bR(r,/[tb]/gi,{t:"b",b:"t"}),N=CR(o,1),V=CR(s,1),R=vR(m,e,A,N,V);rwe(R,m,p)||(h=1,r=A,o=N,s=V)}h&&(v=vR(m,e,r,o,s),hi.mix(b,v));var M=uQ(v,m,p),K=cQ(v,m,p);if(M||K){var X=r;M&&(X=bR(r,/[lr]/gi,{l:"r",r:"l"})),K&&(X=bR(r,/[tb]/gi,{t:"b",b:"t"})),r=X,o=t.offset||[0,0],s=t.targetOffset||[0,0]}d.adjustX=a.adjustX&&M,d.adjustY=a.adjustY&&K,(d.adjustX||d.adjustY)&&(b=nwe(v,m,p,d))}return b.width!==m.width&&hi.css(u,"width",hi.width(u)+b.width-m.width),b.height!==m.height&&hi.css(u,"height",hi.height(u)+b.height-m.height),hi.offset(u,{left:b.left,top:b.top},{useCssRight:t.useCssRight,useCssBottom:t.useCssBottom,useCssTransform:t.useCssTransform,ignoreShake:t.ignoreShake}),{points:r,offset:o,targetOffset:s,overflow:d}}function owe(i,e){var t=NK(i,e),n=AK(i);return!t||n.left+n.width<=t.left||n.top+n.height<=t.top||n.left>=t.right||n.top>=t.bottom}function OK(i,e,t){var n=t.target||e,r=AK(n),o=!owe(n,t.overflow&&t.overflow.alwaysByViewport);return Uae(i,r,t,o)}OK.__getOffsetParent=KV;OK.__getVisibleRectForElement=NK;function swe(i,e,t){var n,r,o=hi.getDocument(i),s=o.defaultView||o.parentWindow,a=hi.getWindowScrollLeft(s),u=hi.getWindowScrollTop(s),d=hi.viewportWidth(s),h=hi.viewportHeight(s);"pageX"in e?n=e.pageX:n=a+e.clientX,"pageY"in e?r=e.pageY:r=u+e.clientY;var f={left:n,top:r,width:0,height:0},p=n>=0&&n<=a+d&&r>=0&&r<=u+h,m=[t.points[0],"cc"];return Uae(i,f,eQ(eQ({},t),{},{points:m}),p)}var GV={},awe=function(e){};function lwe(i,e){}function uwe(i,e){}function cwe(){GV={}}function jae(i,e,t){!e&&!GV[t]&&(i(!1,t),GV[t]=!0)}function o8(i,e){jae(lwe,i,e)}function dwe(i,e){jae(uwe,i,e)}o8.preMessage=awe;o8.resetWarned=cwe;o8.noteOnce=dwe;function hwe(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function r(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,u=n.has(o);if(o8(!u,"Warning: There may be circular references"),u)return!1;if(o===s)return!0;if(t&&a>1)return!1;n.add(o);var d=a+1;if(Array.isArray(o)){if(!Array.isArray(s)||o.length!==s.length)return!1;for(var h=0;h<o.length;h++)if(!r(o[h],s[h],d))return!1;return!0}if(o&&s&&Za(o)==="object"&&Za(s)==="object"){var f=Object.keys(o);return f.length!==Object.keys(s).length?!1:f.every(function(p){return r(o[p],s[p],d)})}return!1}return r(i,e)}const fwe=function(i){if(!i)return!1;if(i instanceof Element){if(i.offsetParent)return!0;if(i.getBBox){var e=i.getBBox(),t=e.width,n=e.height;if(t||n)return!0}if(i.getBoundingClientRect){var r=i.getBoundingClientRect(),o=r.width,s=r.height;if(o||s)return!0}}return!1};var fQ=AS()?he.useLayoutEffect:he.useEffect,qV=function(e,t){var n=he.useRef(!0);fQ(function(){return e(n.current)},t),fQ(function(){return n.current=!1,function(){n.current=!0}},[])};const gwe=function(i,e){var t=re.useRef(!1),n=re.useRef(null);function r(){window.clearTimeout(n.current)}function o(s){if(r(),!t.current||s===!0){if(i(s)===!1)return;t.current=!0,n.current=window.setTimeout(function(){t.current=!1},e)}else n.current=window.setTimeout(function(){t.current=!1,o()},e)}return[o,function(){t.current=!1,r()}]};var Kae=function(){if(typeof Map<"u")return Map;function i(e,t){var n=-1;return e.some(function(r,o){return r[0]===t?(n=o,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=i(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(t,n){var r=i(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,r=i(n,t);~r&&n.splice(r,1)},e.prototype.has=function(t){return!!~i(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var r=0,o=this.__entries__;r<o.length;r++){var s=o[r];t.call(n,s[1],s[0])}},e}()}(),YV=typeof window<"u"&&typeof document<"u"&&window.document===document,pF=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),pwe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pF):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),mwe=2;function _we(i,e){var t=!1,n=!1,r=0;function o(){t&&(t=!1,i()),n&&a()}function s(){pwe(o)}function a(){var u=Date.now();if(t){if(u-r<mwe)return;n=!0}else t=!0,n=!1,setTimeout(s,e);r=u}return a}var vwe=20,bwe=["top","right","bottom","left","width","height","size","weight"],Cwe=typeof MutationObserver<"u",wwe=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=_we(this.refresh.bind(this),vwe)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!YV||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Cwe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!YV||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,r=bwe.some(function(o){return!!~n.indexOf(o)});r&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),Gae=function(i,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Object.defineProperty(i,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return i},Py=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||pF},qae=s8(0,0,0,0);function mF(i){return parseFloat(i)||0}function gQ(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,r){var o=i["border-"+r+"-width"];return n+mF(o)},0)}function ywe(i){for(var e=["top","right","bottom","left"],t={},n=0,r=e;n<r.length;n++){var o=r[n],s=i["padding-"+o];t[o]=mF(s)}return t}function Swe(i){var e=i.getBBox();return s8(0,0,e.width,e.height)}function Lwe(i){var e=i.clientWidth,t=i.clientHeight;if(!e&&!t)return qae;var n=Py(i).getComputedStyle(i),r=ywe(n),o=r.left+r.right,s=r.top+r.bottom,a=mF(n.width),u=mF(n.height);if(n.boxSizing==="border-box"&&(Math.round(a+o)!==e&&(a-=gQ(n,"left","right")+o),Math.round(u+s)!==t&&(u-=gQ(n,"top","bottom")+s)),!xwe(i)){var d=Math.round(a+o)-e,h=Math.round(u+s)-t;Math.abs(d)!==1&&(a-=d),Math.abs(h)!==1&&(u-=h)}return s8(r.left,r.top,a,u)}var Ewe=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof Py(i).SVGGraphicsElement}:function(i){return i instanceof Py(i).SVGElement&&typeof i.getBBox=="function"}}();function xwe(i){return i===Py(i).document.documentElement}function Dwe(i){return YV?Ewe(i)?Swe(i):Lwe(i):qae}function Iwe(i){var e=i.x,t=i.y,n=i.width,r=i.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Gae(s,{x:e,y:t,width:n,height:r,top:t,right:e+n,bottom:r+t,left:e}),s}function s8(i,e,t,n){return{x:i,y:e,width:t,height:n}}var kwe=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=s8(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=Dwe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),Twe=function(){function i(e,t){var n=Iwe(t);Gae(this,{target:e,contentRect:n})}return i}(),Nwe=function(){function i(e,t,n){if(this.activeObservations_=[],this.observations_=new Kae,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Py(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new kwe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Py(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new Twe(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),Yae=typeof WeakMap<"u"?new WeakMap:new Kae,Zae=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=wwe.getInstance(),n=new Nwe(e,t,this);Yae.set(this,n)}return i}();["observe","unobserve","disconnect"].forEach(function(i){Zae.prototype[i]=function(){var e;return(e=Yae.get(this))[i].apply(e,arguments)}});var Xae=function(){return typeof pF.ResizeObserver<"u"?pF.ResizeObserver:Zae}();function Awe(i,e){return i===e?!0:!i||!e?!1:"pageX"in e&&"pageY"in e?i.pageX===e.pageX&&i.pageY===e.pageY:"clientX"in e&&"clientY"in e?i.clientX===e.clientX&&i.clientY===e.clientY:!1}function Owe(i,e){i!==document.activeElement&&S2(e,i)&&typeof i.focus=="function"&&i.focus()}function pQ(i,e){var t=null,n=null;function r(s){var a=yo(s,1),u=a[0].target;if(document.documentElement.contains(u)){var d=u.getBoundingClientRect(),h=d.width,f=d.height,p=Math.floor(h),m=Math.floor(f);(t!==p||n!==m)&&Promise.resolve().then(function(){e({width:p,height:m})}),t=p,n=m}}var o=new Xae(r);return i&&o.observe(i),function(){o.disconnect()}}function mQ(i){return typeof i!="function"?null:i()}function _Q(i){return Za(i)!=="object"||!i?null:i}var Mwe=function(e,t){var n=e.children,r=e.disabled,o=e.target,s=e.align,a=e.onAlign,u=e.monitorWindowResize,d=e.monitorBufferTime,h=d===void 0?0:d,f=re.useRef({}),p=re.useRef(),m=re.Children.only(n),v=re.useRef({});v.current.disabled=r,v.current.target=o,v.current.align=s,v.current.onAlign=a;var b=gwe(function(){var $=v.current,D=$.disabled,T=$.target,F=$.align,B=$.onAlign,U=p.current;if(!D&&T&&U){var G,Z=mQ(T),z=_Q(T);f.current.element=Z,f.current.point=z,f.current.align=F;var O=document,Y=O.activeElement;return Z&&fwe(Z)?G=OK(U,Z,F):z&&(G=swe(U,z,F)),Owe(Y,U),B&&G&&B(U,G),!0}return!1},h),L=yo(b,2),S=L[0],y=L[1],E=re.useState(),A=yo(E,2),N=A[0],V=A[1],R=re.useState(),M=yo(R,2),K=M[0],X=M[1];return qV(function(){V(mQ(o)),X(_Q(o))}),re.useEffect(function(){(f.current.element!==N||!Awe(f.current.point,K)||!hwe(f.current.align,s))&&S()}),re.useEffect(function(){var $=pQ(p.current,S);return $},[p.current]),re.useEffect(function(){var $=pQ(N,S);return $},[N]),re.useEffect(function(){r?y():S()},[r]),re.useEffect(function(){if(u){var $=qN(window,"resize",S);return $.remove}},[u]),re.useEffect(function(){return function(){y()}},[]),re.useImperativeHandle(t,function(){return{forceAlign:function(){return S(!0)}}}),re.isValidElement(m)&&(m=re.cloneElement(m,{ref:xK(m.ref,p)})),m},Qae=re.forwardRef(Mwe);Qae.displayName="Align";function ZV(){ZV=function(){return i};var i={},e=Object.prototype,t=e.hasOwnProperty,n=Object.defineProperty||function(D,T,F){D[T]=F.value},r=typeof Symbol=="function"?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(D,T,F){return Object.defineProperty(D,T,{value:F,enumerable:!0,configurable:!0,writable:!0}),D[T]}try{u({},"")}catch{u=function(F,B,U){return F[B]=U}}function d(D,T,F,B){var U=T&&T.prototype instanceof p?T:p,G=Object.create(U.prototype),Z=new K(B||[]);return n(G,"_invoke",{value:N(D,F,Z)}),G}function h(D,T,F){try{return{type:"normal",arg:D.call(T,F)}}catch(B){return{type:"throw",arg:B}}}i.wrap=d;var f={};function p(){}function m(){}function v(){}var b={};u(b,o,function(){return this});var L=Object.getPrototypeOf,S=L&&L(L(X([])));S&&S!==e&&t.call(S,o)&&(b=S);var y=v.prototype=p.prototype=Object.create(b);function E(D){["next","throw","return"].forEach(function(T){u(D,T,function(F){return this._invoke(T,F)})})}function A(D,T){function F(U,G,Z,z){var O=h(D[U],D,G);if(O.type!=="throw"){var Y=O.arg,fe=Y.value;return fe&&Za(fe)=="object"&&t.call(fe,"__await")?T.resolve(fe.__await).then(function(ne){F("next",ne,Z,z)},function(ne){F("throw",ne,Z,z)}):T.resolve(fe).then(function(ne){Y.value=ne,Z(Y)},function(ne){return F("throw",ne,Z,z)})}z(O.arg)}var B;n(this,"_invoke",{value:function(G,Z){function z(){return new T(function(O,Y){F(G,Z,O,Y)})}return B=B?B.then(z,z):z()}})}function N(D,T,F){var B="suspendedStart";return function(U,G){if(B==="executing")throw new Error("Generator is already running");if(B==="completed"){if(U==="throw")throw G;return $()}for(F.method=U,F.arg=G;;){var Z=F.delegate;if(Z){var z=V(Z,F);if(z){if(z===f)continue;return z}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(B==="suspendedStart")throw B="completed",F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);B="executing";var O=h(D,T,F);if(O.type==="normal"){if(B=F.done?"completed":"suspendedYield",O.arg===f)continue;return{value:O.arg,done:F.done}}O.type==="throw"&&(B="completed",F.method="throw",F.arg=O.arg)}}}function V(D,T){var F=T.method,B=D.iterator[F];if(B===void 0)return T.delegate=null,F==="throw"&&D.iterator.return&&(T.method="return",T.arg=void 0,V(D,T),T.method==="throw")||F!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+F+"' method")),f;var U=h(B,D.iterator,T.arg);if(U.type==="throw")return T.method="throw",T.arg=U.arg,T.delegate=null,f;var G=U.arg;return G?G.done?(T[D.resultName]=G.value,T.next=D.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,f):G:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,f)}function R(D){var T={tryLoc:D[0]};1 in D&&(T.catchLoc=D[1]),2 in D&&(T.finallyLoc=D[2],T.afterLoc=D[3]),this.tryEntries.push(T)}function M(D){var T=D.completion||{};T.type="normal",delete T.arg,D.completion=T}function K(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(R,this),this.reset(!0)}function X(D){if(D){var T=D[o];if(T)return T.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var F=-1,B=function U(){for(;++F<D.length;)if(t.call(D,F))return U.value=D[F],U.done=!1,U;return U.value=void 0,U.done=!0,U};return B.next=B}}return{next:$}}function $(){return{value:void 0,done:!0}}return m.prototype=v,n(y,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,a,"GeneratorFunction"),i.isGeneratorFunction=function(D){var T=typeof D=="function"&&D.constructor;return!!T&&(T===m||(T.displayName||T.name)==="GeneratorFunction")},i.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,v):(D.__proto__=v,u(D,a,"GeneratorFunction")),D.prototype=Object.create(y),D},i.awrap=function(D){return{__await:D}},E(A.prototype),u(A.prototype,s,function(){return this}),i.AsyncIterator=A,i.async=function(D,T,F,B,U){U===void 0&&(U=Promise);var G=new A(d(D,T,F,B),U);return i.isGeneratorFunction(T)?G:G.next().then(function(Z){return Z.done?Z.value:G.next()})},E(y),u(y,a,"Generator"),u(y,o,function(){return this}),u(y,"toString",function(){return"[object Generator]"}),i.keys=function(D){var T=Object(D),F=[];for(var B in T)F.push(B);return F.reverse(),function U(){for(;F.length;){var G=F.pop();if(G in T)return U.value=G,U.done=!1,U}return U.done=!0,U}},i.values=X,K.prototype={constructor:K,reset:function(T){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!T)for(var F in this)F.charAt(0)==="t"&&t.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=void 0)},stop:function(){this.done=!0;var T=this.tryEntries[0].completion;if(T.type==="throw")throw T.arg;return this.rval},dispatchException:function(T){if(this.done)throw T;var F=this;function B(Y,fe){return Z.type="throw",Z.arg=T,F.next=Y,fe&&(F.method="next",F.arg=void 0),!!fe}for(var U=this.tryEntries.length-1;U>=0;--U){var G=this.tryEntries[U],Z=G.completion;if(G.tryLoc==="root")return B("end");if(G.tryLoc<=this.prev){var z=t.call(G,"catchLoc"),O=t.call(G,"finallyLoc");if(z&&O){if(this.prev<G.catchLoc)return B(G.catchLoc,!0);if(this.prev<G.finallyLoc)return B(G.finallyLoc)}else if(z){if(this.prev<G.catchLoc)return B(G.catchLoc,!0)}else{if(!O)throw new Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return B(G.finallyLoc)}}}},abrupt:function(T,F){for(var B=this.tryEntries.length-1;B>=0;--B){var U=this.tryEntries[B];if(U.tryLoc<=this.prev&&t.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var G=U;break}}G&&(T==="break"||T==="continue")&&G.tryLoc<=F&&F<=G.finallyLoc&&(G=null);var Z=G?G.completion:{};return Z.type=T,Z.arg=F,G?(this.method="next",this.next=G.finallyLoc,f):this.complete(Z)},complete:function(T,F){if(T.type==="throw")throw T.arg;return T.type==="break"||T.type==="continue"?this.next=T.arg:T.type==="return"?(this.rval=this.arg=T.arg,this.method="return",this.next="end"):T.type==="normal"&&F&&(this.next=F),f},finish:function(T){for(var F=this.tryEntries.length-1;F>=0;--F){var B=this.tryEntries[F];if(B.finallyLoc===T)return this.complete(B.completion,B.afterLoc),M(B),f}},catch:function(T){for(var F=this.tryEntries.length-1;F>=0;--F){var B=this.tryEntries[F];if(B.tryLoc===T){var U=B.completion;if(U.type==="throw"){var G=U.arg;M(B)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(T,F,B){return this.delegate={iterator:X(T),resultName:F,nextLoc:B},this.method==="next"&&(this.arg=void 0),f}},i}function vQ(i,e,t,n,r,o,s){try{var a=i[o](s),u=a.value}catch(d){t(d);return}a.done?e(u):Promise.resolve(u).then(n,r)}function Rwe(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var o=i.apply(e,t);function s(u){vQ(o,n,r,s,a,"next",u)}function a(u){vQ(o,n,r,s,a,"throw",u)}s(void 0)})}}var bQ=["measure","alignPre","align",null,"motion"];const Pwe=function(i,e){var t=L2(null),n=yo(t,2),r=n[0],o=n[1],s=he.useRef();function a(h){o(h,!0)}function u(){jh.cancel(s.current)}function d(h){u(),s.current=jh(function(){a(function(f){switch(r){case"align":return"motion";case"motion":return"stable"}return f}),h==null||h()})}return he.useEffect(function(){a("measure")},[i]),he.useEffect(function(){switch(r){case"measure":e();break}r&&(s.current=jh(Rwe(ZV().mark(function h(){var f,p;return ZV().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:f=bQ.indexOf(r),p=bQ[f+1],p&&f!==-1&&a(p);case 3:case"end":return v.stop()}},h)}))))},[r]),he.useEffect(function(){return function(){u()}},[]),[r,d]},Fwe=function(i){var e=he.useState({width:0,height:0}),t=yo(e,2),n=t[0],r=t[1];function o(a){var u=a.offsetWidth,d=a.offsetHeight,h=a.getBoundingClientRect(),f=h.width,p=h.height;Math.abs(u-f)<1&&Math.abs(d-p)<1&&(u=f,d=p),r({width:u,height:d})}var s=he.useMemo(function(){var a={};if(i){var u=n.width,d=n.height;i.indexOf("height")!==-1&&d?a.height=d:i.indexOf("minHeight")!==-1&&d&&(a.minHeight=d),i.indexOf("width")!==-1&&u?a.width=u:i.indexOf("minWidth")!==-1&&u&&(a.minWidth=u)}return a},[i,n]);return[s,o]};var Jae=he.forwardRef(function(i,e){var t=i.visible,n=i.prefixCls,r=i.className,o=i.style,s=i.children,a=i.zIndex,u=i.stretch,d=i.destroyPopupOnHide,h=i.forceRender,f=i.align,p=i.point,m=i.getRootDomNode,v=i.getClassNameFromAlign,b=i.onAlign,L=i.onMouseEnter,S=i.onMouseLeave,y=i.onMouseDown,E=i.onTouchStart,A=i.onClick,N=he.useRef(),V=he.useRef(),R=he.useState(),M=yo(R,2),K=M[0],X=M[1],$=Fwe(u),D=yo($,2),T=D[0],F=D[1];function B(){u&&F(m())}var U=Pwe(t,B),G=yo(U,2),Z=G[0],z=G[1],O=he.useState(0),Y=yo(O,2),fe=Y[0],ne=Y[1],we=he.useRef();qV(function(){Z==="alignPre"&&ne(0)},[Z]);function Ie(){return p||m}function je(){var tn;(tn=N.current)===null||tn===void 0||tn.forceAlign()}function dt(tn,Zt){var nn=v(Zt);K!==nn&&X(nn),ne(function(On){return On+1}),Z==="align"&&(b==null||b(tn,Zt))}qV(function(){Z==="align"&&(fe<3?je():z(function(){var tn;(tn=we.current)===null||tn===void 0||tn.call(we)}))},[fe]);var At=En({},Pae(i));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(tn){var Zt=At[tn];At[tn]=function(nn,On){return z(),Zt==null?void 0:Zt(nn,On)}});function Me(){return new Promise(function(tn){we.current=tn})}he.useEffect(function(){!At.motionName&&Z==="motion"&&z()},[At.motionName,Z]),he.useImperativeHandle(e,function(){return{forceAlign:je,getElement:function(){return V.current}}});var st=En(En({},T),{},{zIndex:a,opacity:Z==="motion"||Z==="stable"||!t?void 0:0,pointerEvents:!t&&Z!=="stable"?"none":void 0},o),bt=!0;f!=null&&f.points&&(Z==="align"||Z==="stable")&&(bt=!1);var tt=s;return he.Children.count(s)>1&&(tt=he.createElement("div",{className:"".concat(n,"-content")},s)),he.createElement(OS,us({visible:t,ref:V,leavedClassName:"".concat(n,"-hidden")},At,{onAppearPrepare:Me,onEnterPrepare:Me,removeOnLeave:d,forceRender:h}),function(tn,Zt){var nn=tn.className,On=tn.style,Tn=rd(n,r,K,nn);return he.createElement(Qae,{target:Ie(),key:"popup",ref:N,monitorWindowResize:!0,disabled:bt,align:f,onAlign:dt},he.createElement("div",{ref:Zt,className:Tn,onMouseEnter:L,onMouseLeave:S,onMouseDownCapture:y,onTouchStartCapture:E,onClick:A,style:En(En({},On),st)},tt))})});Jae.displayName="PopupInner";var ele=he.forwardRef(function(i,e){var t=i.prefixCls,n=i.visible,r=i.zIndex,o=i.children,s=i.mobile;s=s===void 0?{}:s;var a=s.popupClassName,u=s.popupStyle,d=s.popupMotion,h=d===void 0?{}:d,f=s.popupRender,p=i.onClick,m=he.useRef();he.useImperativeHandle(e,function(){return{forceAlign:function(){},getElement:function(){return m.current}}});var v=En({zIndex:r},u),b=o;return he.Children.count(o)>1&&(b=he.createElement("div",{className:"".concat(t,"-content")},o)),f&&(b=f(b)),he.createElement(OS,us({visible:n,ref:m,removeOnLeave:!0},h),function(L,S){var y=L.className,E=L.style,A=rd(t,a,y);return he.createElement("div",{ref:S,className:A,onClick:p,style:En(En({},E),v)},b)})});ele.displayName="MobilePopupInner";var Bwe=["visible","mobile"],tle=he.forwardRef(function(i,e){var t=i.visible,n=i.mobile,r=dF(i,Bwe),o=he.useState(t),s=yo(o,2),a=s[0],u=s[1],d=he.useState(!1),h=yo(d,2),f=h[0],p=h[1],m=En(En({},r),{},{visible:a});he.useEffect(function(){u(t),t&&n&&p(fCe())},[t,n]);var v=f?he.createElement(ele,us({},m,{mobile:n,ref:e})):he.createElement(Jae,us({},m,{ref:e}));return he.createElement("div",null,he.createElement(OCe,m),v)});tle.displayName="Popup";var CQ=he.createContext(null);function s9(){}function Wwe(){return""}function Vwe(i){return i?i.ownerDocument:window.document}var Hwe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function $we(i){var e=function(t){fC(r,t);var n=gC(r);function r(o){var s;V0(this,r),s=n.call(this,o),en(In(s),"popupRef",he.createRef()),en(In(s),"triggerRef",he.createRef()),en(In(s),"portalContainer",void 0),en(In(s),"attachId",void 0),en(In(s),"clickOutsideHandler",void 0),en(In(s),"touchOutsideHandler",void 0),en(In(s),"contextMenuOutsideHandler1",void 0),en(In(s),"contextMenuOutsideHandler2",void 0),en(In(s),"mouseDownTimeout",void 0),en(In(s),"focusTime",void 0),en(In(s),"preClickTime",void 0),en(In(s),"preTouchTime",void 0),en(In(s),"delayTimer",void 0),en(In(s),"hasPopupMouseDown",void 0),en(In(s),"onMouseEnter",function(u){var d=s.props.mouseEnterDelay;s.fireEvents("onMouseEnter",u),s.delaySetPopupVisible(!0,d,d?null:u)}),en(In(s),"onMouseMove",function(u){s.fireEvents("onMouseMove",u),s.setPoint(u)}),en(In(s),"onMouseLeave",function(u){s.fireEvents("onMouseLeave",u),s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),en(In(s),"onPopupMouseEnter",function(){s.clearDelayTimer()}),en(In(s),"onPopupMouseLeave",function(u){var d;u.relatedTarget&&!u.relatedTarget.setTimeout&&S2((d=s.popupRef.current)===null||d===void 0?void 0:d.getElement(),u.relatedTarget)||s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),en(In(s),"onFocus",function(u){s.fireEvents("onFocus",u),s.clearDelayTimer(),s.isFocusToShow()&&(s.focusTime=Date.now(),s.delaySetPopupVisible(!0,s.props.focusDelay))}),en(In(s),"onMouseDown",function(u){s.fireEvents("onMouseDown",u),s.preClickTime=Date.now()}),en(In(s),"onTouchStart",function(u){s.fireEvents("onTouchStart",u),s.preTouchTime=Date.now()}),en(In(s),"onBlur",function(u){s.fireEvents("onBlur",u),s.clearDelayTimer(),s.isBlurToHide()&&s.delaySetPopupVisible(!1,s.props.blurDelay)}),en(In(s),"onContextMenu",function(u){u.preventDefault(),s.fireEvents("onContextMenu",u),s.setPopupVisible(!0,u)}),en(In(s),"onContextMenuClose",function(){s.isContextMenuToShow()&&s.close()}),en(In(s),"onClick",function(u){if(s.fireEvents("onClick",u),s.focusTime){var d;if(s.preClickTime&&s.preTouchTime?d=Math.min(s.preClickTime,s.preTouchTime):s.preClickTime?d=s.preClickTime:s.preTouchTime&&(d=s.preTouchTime),Math.abs(d-s.focusTime)<20)return;s.focusTime=0}s.preClickTime=0,s.preTouchTime=0,s.isClickToShow()&&(s.isClickToHide()||s.isBlurToHide())&&u&&u.preventDefault&&u.preventDefault();var h=!s.state.popupVisible;(s.isClickToHide()&&!h||h&&s.isClickToShow())&&s.setPopupVisible(!s.state.popupVisible,u)}),en(In(s),"onPopupMouseDown",function(){if(s.hasPopupMouseDown=!0,clearTimeout(s.mouseDownTimeout),s.mouseDownTimeout=window.setTimeout(function(){s.hasPopupMouseDown=!1},0),s.context){var u;(u=s.context).onPopupMouseDown.apply(u,arguments)}}),en(In(s),"onDocumentClick",function(u){if(!(s.props.mask&&!s.props.maskClosable)){var d=u.target,h=s.getRootDomNode(),f=s.getPopupDomNode();(!S2(h,d)||s.isContextMenuOnly())&&!S2(f,d)&&!s.hasPopupMouseDown&&s.close()}}),en(In(s),"getRootDomNode",function(){var u=s.props.getTriggerDOMNode;if(u)return u(s.triggerRef.current);try{var d=fF(s.triggerRef.current);if(d)return d}catch{}return Ry.findDOMNode(In(s))}),en(In(s),"getPopupClassNameFromAlign",function(u){var d=[],h=s.props,f=h.popupPlacement,p=h.builtinPlacements,m=h.prefixCls,v=h.alignPoint,b=h.getPopupClassNameFromAlign;return f&&p&&d.push(uCe(p,m,u,v)),b&&d.push(b(u)),d.join(" ")}),en(In(s),"getComponent",function(){var u=s.props,d=u.prefixCls,h=u.destroyPopupOnHide,f=u.popupClassName,p=u.onPopupAlign,m=u.popupMotion,v=u.popupAnimation,b=u.popupTransitionName,L=u.popupStyle,S=u.mask,y=u.maskAnimation,E=u.maskTransitionName,A=u.maskMotion,N=u.zIndex,V=u.popup,R=u.stretch,M=u.alignPoint,K=u.mobile,X=u.forceRender,$=u.onPopupClick,D=s.state,T=D.popupVisible,F=D.point,B=s.getPopupAlign(),U={};return s.isMouseEnterToShow()&&(U.onMouseEnter=s.onPopupMouseEnter),s.isMouseLeaveToHide()&&(U.onMouseLeave=s.onPopupMouseLeave),U.onMouseDown=s.onPopupMouseDown,U.onTouchStart=s.onPopupMouseDown,he.createElement(tle,us({prefixCls:d,destroyPopupOnHide:h,visible:T,point:M&&F,className:f,align:B,onAlign:p,animation:v,getClassNameFromAlign:s.getPopupClassNameFromAlign},U,{stretch:R,getRootDomNode:s.getRootDomNode,style:L,mask:S,zIndex:N,transitionName:b,maskAnimation:y,maskTransitionName:E,maskMotion:A,ref:s.popupRef,motion:m,mobile:K,forceRender:X,onClick:$}),typeof V=="function"?V():V)}),en(In(s),"attachParent",function(u){jh.cancel(s.attachId);var d=s.props,h=d.getPopupContainer,f=d.getDocument,p=s.getRootDomNode(),m;h?(p||h.length===0)&&(m=h(p)):m=f(s.getRootDomNode()).body,m?m.appendChild(u):s.attachId=jh(function(){s.attachParent(u)})}),en(In(s),"getContainer",function(){if(!s.portalContainer){var u=s.props.getDocument,d=u(s.getRootDomNode()).createElement("div");d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.width="100%",s.portalContainer=d}return s.attachParent(s.portalContainer),s.portalContainer}),en(In(s),"setPoint",function(u){var d=s.props.alignPoint;!d||!u||s.setState({point:{pageX:u.pageX,pageY:u.pageY}})}),en(In(s),"handlePortalUpdate",function(){s.state.prevPopupVisible!==s.state.popupVisible&&s.props.afterPopupVisibleChange(s.state.popupVisible)}),en(In(s),"triggerContextValue",{onPopupMouseDown:s.onPopupMouseDown});var a;return"popupVisible"in o?a=!!o.popupVisible:a=!!o.defaultPopupVisible,s.state={prevPopupVisible:a,popupVisible:a},Hwe.forEach(function(u){s["fire".concat(u)]=function(d){s.fireEvents(u,d)}}),s}return H0(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var s=this.props,a=this.state;if(a.popupVisible){var u;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(u=s.getDocument(this.getRootDomNode()),this.clickOutsideHandler=qN(u,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(u=u||s.getDocument(this.getRootDomNode()),this.touchOutsideHandler=qN(u,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(u=u||s.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=qN(u,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=qN(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),jh.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var s;return((s=this.popupRef.current)===null||s===void 0?void 0:s.getElement())||null}},{key:"getPopupAlign",value:function(){var s=this.props,a=s.popupPlacement,u=s.popupAlign,d=s.builtinPlacements;return a&&d?lCe(d,a,u):u}},{key:"setPopupVisible",value:function(s,a){var u=this.props.alignPoint,d=this.state.popupVisible;this.clearDelayTimer(),d!==s&&("popupVisible"in this.props||this.setState({popupVisible:s,prevPopupVisible:d}),this.props.onPopupVisibleChange(s)),u&&a&&s&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(s,a,u){var d=this,h=a*1e3;if(this.clearDelayTimer(),h){var f=u?{pageX:u.pageX,pageY:u.pageY}:null;this.delayTimer=window.setTimeout(function(){d.setPopupVisible(s,f),d.clearDelayTimer()},h)}else this.setPopupVisible(s,u)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(s){var a=this.props.children.props,u=this.props;return a[s]&&u[s]?this["fire".concat(s)]:a[s]||u[s]}},{key:"isClickToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("click")!==-1||u.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var s=this.props.action;return s==="contextMenu"||s.length===1&&s[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("contextMenu")!==-1||u.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var s=this.props,a=s.action,u=s.hideAction;return a.indexOf("click")!==-1||u.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("hover")!==-1||u.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var s=this.props,a=s.action,u=s.hideAction;return a.indexOf("hover")!==-1||u.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var s=this.props,a=s.action,u=s.showAction;return a.indexOf("focus")!==-1||u.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var s=this.props,a=s.action,u=s.hideAction;return a.indexOf("focus")!==-1||u.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var s;(s=this.popupRef.current)===null||s===void 0||s.forceAlign()}}},{key:"fireEvents",value:function(s,a){var u=this.props.children.props[s];u&&u(a);var d=this.props[s];d&&d(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var s=this.state.popupVisible,a=this.props,u=a.children,d=a.forceRender,h=a.alignPoint,f=a.className,p=a.autoDestroy,m=he.Children.only(u),v={key:"trigger"};this.isContextMenuToShow()?v.onContextMenu=this.onContextMenu:v.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(v.onClick=this.onClick,v.onMouseDown=this.onMouseDown,v.onTouchStart=this.onTouchStart):(v.onClick=this.createTwoChains("onClick"),v.onMouseDown=this.createTwoChains("onMouseDown"),v.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(v.onMouseEnter=this.onMouseEnter,h&&(v.onMouseMove=this.onMouseMove)):v.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?v.onMouseLeave=this.onMouseLeave:v.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(v.onFocus=this.onFocus,v.onBlur=this.onBlur):(v.onFocus=this.createTwoChains("onFocus"),v.onBlur=this.createTwoChains("onBlur"));var b=rd(m&&m.props&&m.props.className,f);b&&(v.className=b);var L=En({},v);DK(m)&&(L.ref=xK(this.triggerRef,m.ref));var S=he.cloneElement(m,L),y;return(s||this.popupRef.current||d)&&(y=he.createElement(i,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!s&&p&&(y=null),he.createElement(CQ.Provider,{value:this.triggerContextValue},S,y)}}],[{key:"getDerivedStateFromProps",value:function(s,a){var u=s.popupVisible,d={};return u!==void 0&&a.popupVisible!==u&&(d.popupVisible=u,d.prevPopupVisible=a.popupVisible),d}}]),r}(he.Component);return en(e,"contextType",CQ),en(e,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Wwe,getDocument:Vwe,onPopupVisibleChange:s9,afterPopupVisibleChange:s9,onPopupAlign:s9,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),e}const zwe=$we(Lae);var Lc={adjustX:1,adjustY:1},Ec=[0,0],Uwe={left:{points:["cr","cl"],overflow:Lc,offset:[-4,0],targetOffset:Ec},right:{points:["cl","cr"],overflow:Lc,offset:[4,0],targetOffset:Ec},top:{points:["bc","tc"],overflow:Lc,offset:[0,-4],targetOffset:Ec},bottom:{points:["tc","bc"],overflow:Lc,offset:[0,4],targetOffset:Ec},topLeft:{points:["bl","tl"],overflow:Lc,offset:[0,-4],targetOffset:Ec},leftTop:{points:["tr","tl"],overflow:Lc,offset:[-4,0],targetOffset:Ec},topRight:{points:["br","tr"],overflow:Lc,offset:[0,-4],targetOffset:Ec},rightTop:{points:["tl","tr"],overflow:Lc,offset:[4,0],targetOffset:Ec},bottomRight:{points:["tr","br"],overflow:Lc,offset:[0,4],targetOffset:Ec},rightBottom:{points:["bl","br"],overflow:Lc,offset:[4,0],targetOffset:Ec},bottomLeft:{points:["tl","bl"],overflow:Lc,offset:[0,4],targetOffset:Ec},leftBottom:{points:["br","bl"],overflow:Lc,offset:[-4,0],targetOffset:Ec}};function jwe(i){var e=i.showArrow,t=i.arrowContent,n=i.children,r=i.prefixCls,o=i.id,s=i.overlayInnerStyle,a=i.className,u=i.style;return he.createElement("div",{className:rd("".concat(r,"-content"),a),style:u},e!==!1&&he.createElement("div",{className:"".concat(r,"-arrow"),key:"arrow"},t),he.createElement("div",{className:"".concat(r,"-inner"),id:o,role:"tooltip",style:s},typeof n=="function"?n():n))}var Kwe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Gwe=function(e,t){var n=e.overlayClassName,r=e.trigger,o=r===void 0?["hover"]:r,s=e.mouseEnterDelay,a=s===void 0?0:s,u=e.mouseLeaveDelay,d=u===void 0?.1:u,h=e.overlayStyle,f=e.prefixCls,p=f===void 0?"rc-tooltip":f,m=e.children,v=e.onVisibleChange,b=e.afterVisibleChange,L=e.transitionName,S=e.animation,y=e.motion,E=e.placement,A=E===void 0?"right":E,N=e.align,V=N===void 0?{}:N,R=e.destroyTooltipOnHide,M=R===void 0?!1:R,K=e.defaultVisible,X=e.getTooltipContainer,$=e.overlayInnerStyle,D=e.arrowContent,T=e.overlay,F=e.id,B=e.showArrow,U=B===void 0?!0:B,G=dF(e,Kwe),Z=he.useRef(null);he.useImperativeHandle(t,function(){return Z.current});var z=En({},G);"visible"in e&&(z.popupVisible=e.visible);var O=function(){return he.createElement(jwe,{showArrow:U,arrowContent:D,key:"content",prefixCls:p,id:F,overlayInnerStyle:$},T)},Y=!1,fe=!1;if(typeof M=="boolean")Y=M;else if(M&&Za(M)==="object"){var ne=M.keepParent;Y=ne===!0,fe=ne===!1}return he.createElement(zwe,us({popupClassName:n,prefixCls:p,popup:O,action:o,builtinPlacements:Uwe,popupPlacement:A,ref:Z,popupAlign:V,getPopupContainer:X,onPopupVisibleChange:v,afterPopupVisibleChange:b,popupTransitionName:L,popupAnimation:S,popupMotion:y,defaultPopupVisible:K,destroyPopupOnHide:Y,autoDestroy:fe,mouseLeaveDelay:d,popupStyle:h,mouseEnterDelay:a},z),m)};const qwe=he.forwardRef(Gwe);var Ywe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const MK=i=>{var{overlay:e,children:t,placement:n="bottom",trigger:r="hover",overlayClassName:o,mouseEnterDelay:s}=i,a=Ywe(i,["overlay","children","placement","trigger","overlayClassName","mouseEnterDelay"]);return e?re.createElement(qwe,Object.assign({overlayClassName:mn(tae(),o),placement:n,trigger:r,overlay:e,mouseEnterDelay:s||.1},a),t):t||null};var nle=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const RK=Hn("action-bar"),Zwe=gt(RK,"container"),PK=gt(RK,"item"),Xwe=_n(PK,"disabled"),Qwe=_n(PK,"checked");function Jwe(i){const{title:e,name:t,contextMenu:n=[],onClick:r,icon:o,onContextMenuClick:s}=i,a=nle(i,["title","name","contextMenu","onClick","icon","onContextMenuClick"]),u=i.disabled?Xwe:null,d=i.checked?Qwe:null,h=he.useRef(null),f=he.useRef(),p=he.useCallback((L,S)=>{var y;s==null||s(L,S),(y=f.current)===null||y===void 0||y.hide()},[n]),m=()=>re.createElement(Ya,{onClick:p,data:n});he.useEffect(()=>(n.length>0&&(f.current=G5({anchor:h.current,render:m})),function(){var S;(S=f.current)===null||S===void 0||S.dispose()}));const v=function(L){if(i.disabled){L.preventDefault();return}r&&r(L,i),n.length>-1&&f.current&&f.current.show({x:L.clientX,y:L.clientY})},b=_b(a);return re.createElement("li",Object.assign({ref:h,className:mn(PK,u,d),onClick:v},b),re.createElement(MK,{overlay:re.createElement("span",null,e)},re.createElement(dr,{type:o},t)))}function eM(i){const{data:e=[],onClick:t,onContextMenuClick:n,className:r,style:o,title:s}=i,a=nle(i,["data","onClick","onContextMenuClick","className","style","title"]),u=mn(RK,r),d=e.map((f,p)=>re.createElement(Jwe,Object.assign({key:f.id},f,{onContextMenuClick:n,"data-index":p,onClick:bK(t,f.onClick)}))),h=_b(a);return re.createElement("div",Object.assign({className:u,style:o,title:s},h),re.createElement("ul",{className:Zwe},d))}const FK=Hn("breadcrumb"),eye=gt(FK,"item"),tye=gt(FK,"label");var wQ=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function ile(i){const{onClick:e,className:t,separator:n,routes:r=[],style:o,title:s,role:a}=i,u=wQ(i,["onClick","className","separator","routes","style","title","role"]),d=mn(FK,t),h=r.length,f=n||re.createElement(dr,{type:"chevron-right"}),p=_b(u);return re.createElement("div",Object.assign({className:d,role:a,style:o,title:s},p),r.map((m,v)=>{const{id:b,className:L,title:S,style:y,href:E,icon:A,render:N,name:V}=m,R=wQ(m,["id","className","title","style","href","icon","render","name"]);return re.createElement("a",Object.assign({key:b,className:mn(eye,L),title:S,style:y,href:E,tabIndex:0,onContextMenu:M=>M.preventDefault(),onClick:M=>e==null?void 0:e(M,m)},_b(R)),re.createElement(dr,{type:A}),re.createElement("span",{className:tye},N?N(m):V),h-v>1?f:null)}))}var nye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const a8=Hn("btn"),iye=_n(a8,"normal"),rye=_n(a8,"large"),oye=_n(a8,"disabled"),vb=he.forwardRef(function(i,e){const{className:t,children:n,size:r="normal"}=i,o=nye(i,["className","children","size"]),s=i.disabled?oye:null,u=mn(t,a8,r==="large"?rye:iye,s);return re.createElement("button",Object.assign({ref:e,className:u},o),n)});var sye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const BK=Hn("checkbox"),aye=gt(BK,"label"),lye=gt(BK,"input");function uye(i){const{className:e,id:t,children:n,value:r,onChange:o,title:s,role:a,style:u}=i,d=sye(i,["className","id","children","value","onChange","title","role","style"]),h=mn(BK,e),f=m=>{o==null||o(m,{id:t,value:m.target.value})},p=_b(d);return re.createElement("div",Object.assign({className:h,role:a,style:u,title:s},p),re.createElement("input",{id:t.toString(),type:"checkbox",className:lye,value:r,onChange:f}),re.createElement("label",{htmlFor:t.toString(),className:mn(aye,"codicon")},n))}const pC=Hn("collapse"),cye=gt(pC,"item"),rle=gt(pC,"pane"),dye=_n(rle,"collapsing"),hye=_n(pC,"active"),ole=gt(pC,"header"),fye=gt(ole,"title"),yQ=gt(pC,"content"),gye=gt(pC,"extra");var pye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const mye="tool-bar",_ye=Hn(mye);function tM(i){const{className:e}=i,t=pye(i,["className"]);return re.createElement("div",{className:mn(_ye,e)},re.createElement(eM,Object.assign({},t)))}function pp({children:i,style:e,className:t,role:n,title:r}){return re.createElement("div",{role:n,title:r,className:t,style:e},i)}const MS=Hn("split"),vye=_n(MS,"dragging"),bye=_n(MS,"vertical"),Cye=_n(MS,"horizontal"),wye=gt(MS,"pane"),nM=gt(MS,"sash"),yye=_n(nM,"vertical"),Sye=_n(nM,"horizontal"),Lye=_n(nM,"disabled"),Eye=_n(nM,"hover");var xye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function Dye(i){var{className:e,onDragStart:t,onDragging:n,onDragEnd:r}=i,o=xye(i,["className","onDragStart","onDragging","onDragEnd"]);const s=he.useRef(),[a,u]=he.useState(!1),[d,h]=he.useState(!1);return he.useEffect(function(){return function(){clearTimeout(s.current)}},[]),re.createElement("div",Object.assign({role:"Resizer",className:mn(nM,(d||a)&&Eye,e),onMouseEnter:()=>{s.current=setTimeout(()=>{u(!0)},150)},onMouseLeave:()=>{s.current&&(u(!1),clearTimeout(s.current))},onMouseDown:f=>{h(!0),t(f);const p=function(v){n(v)},m=function(v){h(!1),r(v),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m)};window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)}},o))}var Iye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const a9=function(i,e,t=1/0){return typeof i>"u"?t:typeof i=="number"?i:i.endsWith("%")?e*(+i.replace("%","")/100):i.endsWith("px")?+i.replace("px",""):t},_A=i=>{var e,{children:t,sizes:n,allowResize:r=!0,showSashes:o=!0,split:s="vertical",className:a,sashClassName:u,paneClassName:d,resizerSize:h=4,onChange:f}=i,p=Iye(i,["children","sizes","allowResize","showSashes","split","className","sashClassName","paneClassName","resizerSize","onChange"]);const m=he.useRef({x:0,y:0}),v=he.useRef(null),[b,L]=he.useState({}),[S,y]=he.useState(!1);he.useEffect(()=>{const T=new ResizeObserver(()=>{L(v.current.getBoundingClientRect())});return T.observe(v.current),()=>{T.disconnect()}},[]);const{sizeName:E,sPos:A,sAxis:N}=he.useMemo(function(){return{sizeName:s==="vertical"?"width":"height",sPos:s==="vertical"?"left":"top",sAxis:s==="vertical"?"x":"y"}},[s]),V=(e=b[E])!==null&&e!==void 0?e:0,R=he.useMemo(function(){return t.map(T=>{const F=[0,1/0];if(T.type===pp){const{minSize:B,maxSize:U}=T.props;F[0]=a9(B,V,0),F[1]=a9(U,V)}return F})},[t,V]),M=he.useMemo(()=>typeof r=="boolean"?new Array(t.length).fill(r):t.map((T,F)=>{var B;return(B=r[F])!==null&&B!==void 0?B:!0}),[t.length,r]),K=he.useMemo(function(){let T=0,F=0,B=0;const U=t.map((Z,z)=>{const O=a9(n[z],V);return O===1/0?T++:(F+=O,M[z]&&(B+=O)),O});if(M.filter(Z=>Z===!0).length===0)return U;if(F>V||!T&&F<V){const Z=(F-V)/B;return U.map((z,O)=>z===1/0?0:M[O]?z-z*Z:z)}if(T>0){const Z=(V-F)/T;return U.map(z=>z===1/0?Z:z)}return U},[...n,t.length,V,...M]),X=he.useMemo(function(){return K.reduce(function(T,F){return[...T,T[T.length-1]+F]},[0])},[...K]),$=he.useCallback(function(T){var F,B;m.current={x:(F=T.pageX)!==null&&F!==void 0?F:T.screenX,y:(B=T.pageY)!==null&&B!==void 0?B:T.screenY},y(!0)},[]),D=he.useCallback(function(T,F){var B,U;let Z={x:(B=T.pageX)!==null&&B!==void 0?B:T.screenX,y:(U=T.pageY)!==null&&U!==void 0?U:T.screenY}[N]-m.current[N];const z=-Math.min(K[F]-R[F][0],R[F+1][1]-K[F+1]),O=Math.min(K[F+1]-R[F+1][0],R[F][1]-K[F]);Z<z&&(Z=z),Z>O&&(Z=O);const Y=[...K];Y[F]+=Z,Y[F+1]-=Z,f==null||f(Y)},[R,f,K]);return re.createElement("div",Object.assign({className:mn(MS,S&&vye,s==="vertical"&&bye,s==="horizontal"&&Cye,a),ref:v},p),t.map((T,F)=>{const B=mn(wye,d),U={[E]:K[F],[A]:X[F]};let G=null;if(F>0){const Z=o===!1||(o==null?void 0:o[F-1])===!1;G=re.createElement(Dye,{className:mn(Z&&Lye,s==="vertical"?yye:Sye,u),style:{[E]:h,[A]:X[F]-h/2},onDragStart:$,onDragging:z=>D(z,F-1),onDragEnd:()=>{y(!1)}})}if(T.type===pp){const{className:Z="",style:z={}}=T.props;return re.createElement(re.Fragment,{key:F},G,ZO(T,{className:mn(B,Z),style:Object.assign(Object.assign({},z),U)}))}return re.createElement(re.Fragment,{key:F},G,re.createElement(pp,{className:B,style:U},T))}))};var kye=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const $P=220,$g=26;function sle(i){var{data:e=[],activePanelKeys:t,className:n,title:r,style:o,role:s,onCollapseChange:a,onToolbarClick:u,onResize:d}=i,h=kye(i,["data","activePanelKeys","className","title","style","role","onCollapseChange","onToolbarClick","onResize"]);const[f,p]=he.useState(new Array(e.length)),[m,v]=he.useState(!1),b=he.useRef(null),[L,S]=he.useState(e.map(B=>B.hidden?0:$g)),y=he.useRef([]),E=he.useRef(!0),A=B=>B===void 0,N=(B,U)=>{for(let G=0;G<B.length;G++)if(B[G]!==U[G])return G+1;return-1},V=B=>{const U=N(L,B);U!==-1&&(y.current[U]=B[U],d==null||d(B),S(B))},R=(B,U,G)=>{B.stopPropagation(),u==null||u(U,G)},M=(B,U)=>U?U(B):null,K=(B,U)=>{const G=[...f];A(G[U])?G[U]=B:delete G[U],a==null||a(G),p(G.concat())},X=()=>{v(!0),$(),setTimeout(()=>{v(!1)},300)},$=()=>{if(f.filter(U=>!A(U)).length){const{height:U}=b.current.getBoundingClientRect();let G=U,Z=0;const z=e.map((fe,ne)=>{var we,Ie,je,dt;if(fe.hidden)return 0;if(!f.includes(fe.id))return G=G-$g,$g;if(((we=fe.config)===null||we===void 0?void 0:we.grow)===0){const st=(je=(Ie=b.current)===null||Ie===void 0?void 0:Ie.querySelector(`.${yQ}[data-collapse-index='${ne}']`))===null||je===void 0?void 0:je.querySelector(`[data-content='${fe.id}']`);if(!st)return G=G-$g,$g;const{height:bt}=st.getBoundingClientRect(),tt=bt+$g;return tt>$P?(G=G-$P,$P):(G=G-tt,tt)}return typeof y.current[ne]<"u"?(G=G-y.current[ne],y.current[ne]):(Z=Z+(((dt=fe.config)===null||dt===void 0?void 0:dt.grow)||1),"auto")}),O=G/Z,Y=z.map((fe,ne)=>{var we;return fe==="auto"?O*(((we=e[ne].config)===null||we===void 0?void 0:we.grow)||1):fe});d==null||d(Y),S(Y)}else{const U=e.map(G=>G.hidden?0:$g);d==null||d(U),S(U)}},{nextSashes:D,allowResize:T}=he.useMemo(function(){var B,U;const G=[];for(let Z=1;Z<f.length;Z++){const z=!A(f[Z-1]),O=((U=(B=e[Z-1])===null||B===void 0?void 0:B.config)===null||U===void 0?void 0:U.grow)!==0,Y=!A(f[Z]),fe=z&&O&&Y;G.push(fe)}return{nextSashes:G,allowResize:e.map((Z,z)=>{var O;return((O=Z==null?void 0:Z.config)===null||O===void 0?void 0:O.grow)===0?!1:!A(f[z])})}},[f,e]);he.useLayoutEffect(()=>{E.current||X(),E.current=!1},[f,e]),he.useLayoutEffect(()=>{Array.isArray(t)&&p(t)},[t]);const F=_b(h);return re.createElement("div",Object.assign({ref:b,className:mn(pC,n),title:r,style:o,role:s},F),re.createElement(_A,{sizes:L,onChange:V,split:"horizontal",allowResize:T,showSashes:D,paneClassName:mn(rle,m&&dye)},e.map((B,U)=>{const G=f.includes(B.id);return re.createElement(pp,{key:B.id,minSize:$g},re.createElement("div",{className:mn(B.className,cye,G&&hye),"data-collapse-id":B.id},re.createElement("div",{className:ole,tabIndex:0,onClick:()=>K(B.id,U)},re.createElement(dr,{type:G?"chevron-down":"chevron-right"}),re.createElement("span",{className:fye},B.name),re.createElement("div",{className:gye},G&&re.createElement(tM,{key:B.id,data:B.toolbar||[],onClick:(Z,z)=>R(Z,z,B)}))),re.createElement("div",{className:yQ,tabIndex:0,"data-collapse-index":U},M(B,B.renderPanel))))})))}var l9;function ale(i){if(typeof document>"u")return 0;if(i||l9===void 0){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div"),n=t.style;n.position="absolute",n.top="0",n.left="0",n.pointerEvents="none",n.visibility="hidden",n.width="200px",n.height="150px",n.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var r=e.offsetWidth;t.style.overflow="scroll";var o=e.offsetWidth;r===o&&(o=t.clientWidth),document.body.removeChild(t),l9=r-o}return l9}function Fy(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!i)return{};var t=e.element,n=t===void 0?document.body:t,r={},o=Object.keys(i);return o.forEach(function(s){r[s]=n.style[s]}),o.forEach(function(s){n.style[s]=i[s]}),r}function Tye(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var u9={};const SQ=function(i){if(!(!Tye()&&!i)){var e="ant-scrolling-effect",t=new RegExp("".concat(e),"g"),n=document.body.className;if(i){if(!t.test(n))return;Fy(u9),u9={},document.body.className=n.replace(t,"").trim();return}var r=ale();if(r&&(u9=Fy({position:"relative",width:"calc(100% - ".concat(r,"px)")}),!t.test(n))){var o="".concat(n," ").concat(e);document.body.className=o.trim()}}};function Nye(i){if(Array.isArray(i))return BV(i)}function Aye(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Oye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LQ(i){return Nye(i)||Aye(i)||xae(i)||Oye()}var Mye=0,xc=[],lle="ant-scrolling-effect",c9=new RegExp("".concat(lle),"g"),d9=new Map,Rye=H0(function i(e){var t=this;V0(this,i),en(this,"lockTarget",void 0),en(this,"options",void 0),en(this,"getContainer",function(){var n;return(n=t.options)===null||n===void 0?void 0:n.container}),en(this,"reLock",function(n){var r=xc.find(function(o){var s=o.target;return s===t.lockTarget});r&&t.unLock(),t.options=n,r&&(r.options=n,t.lock())}),en(this,"lock",function(){var n;if(!xc.some(function(u){var d=u.target;return d===t.lockTarget})){if(xc.some(function(u){var d,h=u.options;return(h==null?void 0:h.container)===((d=t.options)===null||d===void 0?void 0:d.container)})){xc=[].concat(LQ(xc),[{target:t.lockTarget,options:t.options}]);return}var r=0,o=((n=t.options)===null||n===void 0?void 0:n.container)||document.body;(o===document.body&&window.innerWidth-document.documentElement.clientWidth>0||o.scrollHeight>o.clientHeight)&&getComputedStyle(o).overflow!=="hidden"&&(r=ale());var s=o.className;if(xc.filter(function(u){var d,h=u.options;return(h==null?void 0:h.container)===((d=t.options)===null||d===void 0?void 0:d.container)}).length===0&&d9.set(o,Fy({width:r!==0?"calc(100% - ".concat(r,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:o})),!c9.test(s)){var a="".concat(s," ").concat(lle);o.className=a.trim()}xc=[].concat(LQ(xc),[{target:t.lockTarget,options:t.options}])}}),en(this,"unLock",function(){var n,r=xc.find(function(a){var u=a.target;return u===t.lockTarget});if(xc=xc.filter(function(a){var u=a.target;return u!==t.lockTarget}),!(!r||xc.some(function(a){var u,d=a.options;return(d==null?void 0:d.container)===((u=r.options)===null||u===void 0?void 0:u.container)}))){var o=((n=t.options)===null||n===void 0?void 0:n.container)||document.body,s=o.className;c9.test(s)&&(Fy(d9.get(o),{element:o}),d9.delete(o),o.className=o.className.replace(c9,"").trim())}}),this.lockTarget=Mye++,this.options=e}),Mg=0,ZN=AS(),wR={},zC=function(e){if(!ZN)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(Za(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body},Pye=function(i){fC(t,i);var e=gC(t);function t(n){var r;return V0(this,t),r=e.call(this,n),en(In(r),"container",void 0),en(In(r),"componentRef",he.createRef()),en(In(r),"rafId",void 0),en(In(r),"scrollLocker",void 0),en(In(r),"renderComponent",void 0),en(In(r),"updateScrollLocker",function(o){var s=o||{},a=s.visible,u=r.props,d=u.getContainer,h=u.visible;h&&h!==a&&ZN&&zC(d)!==r.scrollLocker.getContainer()&&r.scrollLocker.reLock({container:zC(d)})}),en(In(r),"updateOpenCount",function(o){var s=o||{},a=s.visible,u=s.getContainer,d=r.props,h=d.visible,f=d.getContainer;h!==a&&ZN&&zC(f)===document.body&&(h&&!a?Mg+=1:o&&(Mg-=1));var p=typeof f=="function"&&typeof u=="function";(p?f.toString()!==u.toString():f!==u)&&r.removeCurrentContainer()}),en(In(r),"attachToParent",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(o||r.container&&!r.container.parentNode){var s=zC(r.props.getContainer);return s?(s.appendChild(r.container),!0):!1}return!0}),en(In(r),"getContainer",function(){return ZN?(r.container||(r.container=document.createElement("div"),r.attachToParent(!0)),r.setWrapperClassName(),r.container):null}),en(In(r),"setWrapperClassName",function(){var o=r.props.wrapperClassName;r.container&&o&&o!==r.container.className&&(r.container.className=o)}),en(In(r),"removeCurrentContainer",function(){var o,s;(o=r.container)===null||o===void 0||(s=o.parentNode)===null||s===void 0||s.removeChild(r.container)}),en(In(r),"switchScrollingEffect",function(){Mg===1&&!Object.keys(wR).length?(SQ(),wR=Fy({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):Mg||(Fy(wR),wR={},SQ(!0))}),r.scrollLocker=new Rye({container:zC(n.getContainer)}),r}return H0(t,[{key:"componentDidMount",value:function(){var r=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=jh(function(){r.forceUpdate()}))}},{key:"componentDidUpdate",value:function(r){this.updateOpenCount(r),this.updateScrollLocker(r),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var r=this.props,o=r.visible,s=r.getContainer;ZN&&zC(s)===document.body&&(Mg=o&&Mg?Mg-1:Mg),this.removeCurrentContainer(),jh.cancel(this.rafId)}},{key:"render",value:function(){var r=this.props,o=r.children,s=r.forceRender,a=r.visible,u=null,d={getOpenCount:function(){return Mg},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(s||a||this.componentRef.current)&&(u=he.createElement(Lae,{getContainer:this.getContainer,ref:this.componentRef},o(d))),u}}]),t}(he.Component),Fn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Fn.F1&&t<=Fn.F12)return!1;switch(t){case Fn.ALT:case Fn.CAPS_LOCK:case Fn.CONTEXT_MENU:case Fn.CTRL:case Fn.DOWN:case Fn.END:case Fn.ESC:case Fn.HOME:case Fn.INSERT:case Fn.LEFT:case Fn.MAC_FF_META:case Fn.META:case Fn.NUMLOCK:case Fn.NUM_CENTER:case Fn.PAGE_DOWN:case Fn.PAGE_UP:case Fn.PAUSE:case Fn.PRINT_SCREEN:case Fn.RIGHT:case Fn.SHIFT:case Fn.UP:case Fn.WIN_KEY:case Fn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Fn.ZERO&&e<=Fn.NINE||e>=Fn.NUM_ZERO&&e<=Fn.NUM_MULTIPLY||e>=Fn.A&&e<=Fn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Fn.SPACE:case Fn.QUESTION_MARK:case Fn.NUM_PLUS:case Fn.NUM_MINUS:case Fn.NUM_PERIOD:case Fn.NUM_DIVISION:case Fn.SEMICOLON:case Fn.DASH:case Fn.EQUALS:case Fn.COMMA:case Fn.PERIOD:case Fn.SLASH:case Fn.APOSTROPHE:case Fn.SINGLE_QUOTE:case Fn.OPEN_SQUARE_BRACKET:case Fn.BACKSLASH:case Fn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function Fye(){var i=En({},Fve);return i.useId}var EQ=0;function Bye(i){var e=he.useState("ssr-id"),t=yo(e,2),n=t[0],r=t[1],o=Fye(),s=o==null?void 0:o();return he.useEffect(function(){if(!o){var a=EQ;EQ+=1,r("rc_unique_".concat(a))}},[]),i||s||n}var Wye=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Vye=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Hye="".concat(Wye," ").concat(Vye).split(/[\s\n]+/),$ye="aria-",zye="data-";function xQ(i,e){return i.indexOf(e)===0}function Uye(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t;e===!1?t={aria:!0,data:!0,attr:!0}:e===!0?t={aria:!0}:t=En({},e);var n={};return Object.keys(i).forEach(function(r){(t.aria&&(r==="role"||xQ(r,$ye))||t.data&&xQ(r,zye)||t.attr&&Hye.includes(r))&&(n[r]=i[r])}),n}function jye(i){var e=i.prefixCls,t=i.style,n=i.visible,r=i.maskProps,o=i.motionName;return he.createElement(OS,{key:"mask",visible:n,motionName:o,leavedClassName:"".concat(e,"-mask-hidden")},function(s){var a=s.className,u=s.style;return he.createElement("div",us({style:En(En({},u),t),className:rd("".concat(e,"-mask"),a)},r))})}function DQ(i,e,t){var n=e;return!n&&t&&(n="".concat(i,"-").concat(t)),n}function IQ(i,e){var t=i["page".concat(e?"Y":"X","Offset")],n="scroll".concat(e?"Top":"Left");if(typeof t!="number"){var r=i.document;t=r.documentElement[n],typeof t!="number"&&(t=r.body[n])}return t}function Kye(i){var e=i.getBoundingClientRect(),t={left:e.left,top:e.top},n=i.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=IQ(r),t.top+=IQ(r,!0),t}const Gye=he.memo(function(i){var e=i.children;return e},function(i,e){var t=e.shouldUpdate;return!t});var kQ={width:0,height:0,overflow:"hidden",outline:"none"},qye=re.forwardRef(function(i,e){var t=i.prefixCls,n=i.className,r=i.style,o=i.title,s=i.ariaId,a=i.footer,u=i.closable,d=i.closeIcon,h=i.onClose,f=i.children,p=i.bodyStyle,m=i.bodyProps,v=i.modalRender,b=i.onMouseDown,L=i.onMouseUp,S=i.holderRef,y=i.visible,E=i.forceRender,A=i.width,N=i.height,V=he.useRef(),R=he.useRef();re.useImperativeHandle(e,function(){return{focus:function(){var F;(F=V.current)===null||F===void 0||F.focus()},changeActive:function(F){var B=document,U=B.activeElement;F&&U===R.current?V.current.focus():!F&&U===V.current&&R.current.focus()}}});var M={};A!==void 0&&(M.width=A),N!==void 0&&(M.height=N);var K;a&&(K=re.createElement("div",{className:"".concat(t,"-footer")},a));var X;o&&(X=re.createElement("div",{className:"".concat(t,"-header")},re.createElement("div",{className:"".concat(t,"-title"),id:s},o)));var $;u&&($=re.createElement("button",{type:"button",onClick:h,"aria-label":"Close",className:"".concat(t,"-close")},d||re.createElement("span",{className:"".concat(t,"-close-x")})));var D=re.createElement("div",{className:"".concat(t,"-content")},$,X,re.createElement("div",us({className:"".concat(t,"-body"),style:p},m),f),K);return re.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:S,style:En(En({},r),M),className:rd(t,n),onMouseDown:b,onMouseUp:L},re.createElement("div",{tabIndex:0,ref:V,style:kQ,"aria-hidden":"true"}),re.createElement(Gye,{shouldUpdate:y||E},v?v(D):D),re.createElement("div",{tabIndex:0,ref:R,style:kQ,"aria-hidden":"true"}))}),ule=he.forwardRef(function(i,e){var t=i.prefixCls,n=i.title,r=i.style,o=i.className,s=i.visible,a=i.forceRender,u=i.destroyOnClose,d=i.motionName,h=i.ariaId,f=i.onVisibleChanged,p=i.mousePosition,m=he.useRef(),v=he.useState(),b=yo(v,2),L=b[0],S=b[1],y={};L&&(y.transformOrigin=L);function E(){var A=Kye(m.current);S(p?"".concat(p.x-A.left,"px ").concat(p.y-A.top,"px"):"")}return he.createElement(OS,{visible:s,onVisibleChanged:f,onAppearPrepare:E,onEnterPrepare:E,forceRender:a,motionName:d,removeOnLeave:u,ref:m},function(A,N){var V=A.className,R=A.style;return he.createElement(qye,us({},i,{ref:e,title:n,ariaId:h,prefixCls:t,holderRef:N,style:En(En(En({},R),r),y),className:rd(o,V)}))})});ule.displayName="Content";function TQ(i){var e=i.prefixCls,t=e===void 0?"rc-dialog":e,n=i.zIndex,r=i.visible,o=r===void 0?!1:r,s=i.keyboard,a=s===void 0?!0:s,u=i.focusTriggerAfterClose,d=u===void 0?!0:u,h=i.scrollLocker,f=i.wrapStyle,p=i.wrapClassName,m=i.wrapProps,v=i.onClose,b=i.afterClose,L=i.transitionName,S=i.animation,y=i.closable,E=y===void 0?!0:y,A=i.mask,N=A===void 0?!0:A,V=i.maskTransitionName,R=i.maskAnimation,M=i.maskClosable,K=M===void 0?!0:M,X=i.maskStyle,$=i.maskProps,D=i.rootClassName,T=he.useRef(),F=he.useRef(),B=he.useRef(),U=he.useState(o),G=yo(U,2),Z=G[0],z=G[1],O=Bye();function Y(Me){if(Me){if(!S2(F.current,document.activeElement)){var st;T.current=document.activeElement,(st=B.current)===null||st===void 0||st.focus()}}else{if(z(!1),N&&T.current&&d){try{T.current.focus({preventScroll:!0})}catch{}T.current=null}Z&&(b==null||b())}}function fe(Me){v==null||v(Me)}var ne=he.useRef(!1),we=he.useRef(),Ie=function(){clearTimeout(we.current),ne.current=!0},je=function(){we.current=setTimeout(function(){ne.current=!1})},dt=null;K&&(dt=function(st){ne.current?ne.current=!1:F.current===st.target&&fe(st)});function At(Me){if(a&&Me.keyCode===Fn.ESC){Me.stopPropagation(),fe(Me);return}o&&Me.keyCode===Fn.TAB&&B.current.changeActive(!Me.shiftKey)}return he.useEffect(function(){return o&&z(!0),function(){}},[o]),he.useEffect(function(){return function(){clearTimeout(we.current)}},[]),he.useEffect(function(){return Z?(h==null||h.lock(),h==null?void 0:h.unLock):function(){}},[Z,h]),he.createElement("div",us({className:rd("".concat(t,"-root"),D)},Uye(i,{data:!0})),he.createElement(jye,{prefixCls:t,visible:N&&o,motionName:DQ(t,V,R),style:En({zIndex:n},X),maskProps:$}),he.createElement("div",us({tabIndex:-1,onKeyDown:At,className:rd("".concat(t,"-wrap"),p),ref:F,onClick:dt,style:En(En({zIndex:n},f),{},{display:Z?null:"none"})},m),he.createElement(ule,us({},i,{onMouseDown:Ie,onMouseUp:je,ref:B,closable:E,ariaId:O,prefixCls:t,visible:o,onClose:fe,onVisibleChanged:Y,motionName:DQ(t,L,S)}))))}var cle=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,o=e.destroyOnClose,s=o===void 0?!1:o,a=e.afterClose,u=he.useState(t),d=yo(u,2),h=d[0],f=d[1];return he.useEffect(function(){t&&f(!0)},[t]),n===!1?he.createElement(TQ,us({},e,{getOpenCount:function(){return 2}})):!r&&s&&!h?null:he.createElement(Pye,{visible:t,forceRender:r,getContainer:n},function(p){return he.createElement(TQ,us({},e,{destroyOnClose:s,afterClose:function(){a==null||a(),f(!1)}},p))})};cle.displayName="Dialog";const WK=Hn("modal"),Tp=Hn("confirm"),Yye=gt(WK,"close"),Zye=_n(Yye,"x"),Xye=_n(WK,"centered"),Qye=gt(Tp,"container"),Jye=gt(Tp,"indicator"),eSe=i=>typeof i=="string"?gt(Tp,QV[i]):"",tSe=gt(Tp,"content"),VK=gt(Tp,"message"),nSe=gt(Tp,"btns"),iSe=_n(Tp,"centered"),rSe=_n(VK,"text"),oSe=_n(VK,"detail");var sSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Aw=[];let XV;const NQ=i=>{XV={x:i.pageX,y:i.pageY},setTimeout(()=>{XV=null},100)},aSe=re.createElement("span",{className:Zye},re.createElement(dr,{type:"close"})),dle=i=>{he.useEffect(()=>(document.documentElement.addEventListener("click",NQ,!0),()=>{document.documentElement.removeEventListener("click",NQ,!0)}),[]);const e=v=>{const{onCancel:b}=i;b==null||b(v)},t=v=>{const{onOk:b}=i;b==null||b(v)},{footer:n,visible:r,wrapClassName:o,centered:s,getContainer:a,closeIcon:u,cancelText:d="Cancel",okText:h="Ok"}=i,f=sSe(i,["footer","visible","wrapClassName","centered","getContainer","closeIcon","cancelText","okText"]),p=mn(o,{[Xye]:!!s}),m=()=>{const{footer:v,cancelButtonProps:b,okButtonProps:L}=i;return v!==void 0?v:re.createElement(re.Fragment,null,re.createElement(vb,Object.assign({onClick:e},b),d),re.createElement(vb,Object.assign({onClick:t},L),h))};return re.createElement(cle,Object.assign({},f,{getContainer:a,prefixCls:WK,wrapClassName:p,footer:m(),visible:r,mousePosition:XV,onClose:e,closeIcon:aSe}))},AQ=i=>{const e=he.useRef(!1),{close:t}=i,n=a=>{!a||!a.then||a.then((...u)=>{t==null||t(...u)},u=>{console.error(u),e.current=!1})},r=()=>{const{actionFn:a,close:u}=i;if(e.current)return;if(e.current=!0,!a){u==null||u();return}let d;if(a.length)d=a(u),e.current=!1;else if(d=a(),!d){u==null||u();return}n(d)},{children:o,buttonProps:s}=i;return re.createElement(vb,Object.assign({onClick:r},s),o)},lSe=i=>{const{actions:e,icon:t,onCancel:n,onOk:r,close:o,maskStyle:s,okText:a="Ok",okButtonProps:u,cancelText:d="Cancel",cancelButtonProps:h,okCancel:f,bodyStyle:p,closable:m=!1,className:v,width:b=520,style:L={},mask:S=!0,maskClosable:y=!1,transitionName:E="zoom",maskTransitionName:A="fade",type:N,visible:V}=i,R=eSe(N),M=mn(Tp,R,v),K=f&&re.createElement(AQ,{actionFn:n,close:o,buttonProps:h},d);return re.createElement(dle,{prefixCls:Tp,className:M,wrapClassName:mn({[iSe]:!!i.centered}),onCancel:()=>o({triggerCancel:!0}),transitionName:E,maskTransitionName:A,mask:S,maskClosable:y,style:L,width:b,closable:m,footer:"",title:"",maskStyle:s,visible:V},re.createElement("div",{className:Qye,style:p},re.createElement("div",{className:tSe},re.createElement("div",{className:Jye}," ",t," "),re.createElement("div",{className:VK},i.title!==void 0&&re.createElement("span",{className:rSe},i.title),re.createElement("div",{className:oSe},i.content))),re.createElement("div",{className:nSe},e===void 0?re.createElement(re.Fragment,null,K,re.createElement(AQ,{actionFn:r,close:o,buttonProps:u},a)):e)))};var uSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function hle(i){const e=document.createElement("div");document.body.appendChild(e);const t=Object.assign(Object.assign({},i),{close:o,visible:!0});function n(...s){const a=s.some(d=>d&&d.triggerCancel);i.onCancel&&a&&i.onCancel(...s),nae(e)&&e.parentNode&&e.parentNode.removeChild(e);for(let d=0;d<Aw.length;d++)if(Aw[d]===o){Aw.splice(d,1);break}}function r(s){var{okText:a,cancelText:u}=s,d=uSe(s,["okText","cancelText"]);uF(re.createElement(lSe,Object.assign({okText:a,cancelText:u},d)),e)}function o(...s){n(...s)}return r(t),Aw.push(o),{destroy:o}}function cSe(i){return Object.assign({type:"warning",okCancel:!1,icon:re.createElement(dr,{type:"warning"})},i)}function dSe(i){return Object.assign({type:"confirm",okCancel:!0,icon:re.createElement(dr,{type:"warning"})},i)}function fle(i){return hle(cSe(i))}const iM=dle;var QV;(function(i){i.warning="warning",i.confirm="confirm"})(QV||(QV={}));iM.warning=fle;iM.warn=fle;iM.confirm=function(e){return hle(dSe(e))};iM.destroyAll=function(){for(;Aw.length;){const e=Aw.pop();e&&e()}};var hSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const OQ=Hn("drop-down"),HK=he.forwardRef((i,e)=>{const{className:t,overlay:n,children:r,placement:o="right",trigger:s="click"}=i,a=hSe(i,["className","overlay","children","placement","trigger"]),u=XO({render:()=>n});he.useImperativeHandle(e,()=>({contextView:u,dispose:()=>{u.hide()}}));const d=mn(OQ,_n(OQ,o),t),h={[rae(s)]:function(f){if(!u)return;const m=f.currentTarget.getBoundingClientRect();let v=HX(o,m);if(u.show(v),o==="left"||o==="top"){const b=u.view.getBoundingClientRect();b.x=m.x,b.y=m.y,v=HX(o,b),u.show(v)}}};return re.createElement("div",Object.assign({className:d},h,a),r)});var JV;(function(i){i.ENTER="Enter"})(JV||(JV={}));var fSe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const RS=Hn("input"),gSe=_n(RS,"normal"),pSe=_n(RS,"lg"),mSe=_n(RS,"disabled");function _Se(i){return typeof i>"u"||i===null?"":i}function gle(i,e,t){t&&t(e)}function vSe(i,e){return mn(RS,{[gSe]:i==="normal"},{[pSe]:i==="large"},{[mSe]:e})}let $K=class extends re.Component{constructor(e){super(e),this.input=null,this.saveInput=n=>{this.input=n},this.handleChange=n=>{const{onChange:r}=this.props;this.setValue(n.target.value),typeof r=="function"&&gle(this.input,n,r)},this.handleKeyDown=n=>{const{onPressEnter:r,onKeyDown:o}=this.props;n.key===JV.ENTER&&(r==null||r(n)),o==null||o(n)};const t=typeof e.value>"u"?e.defaultValue:e.value;this.state={value:t,prevValue:e.value}}static getDerivedStateFromProps(e,{prevValue:t}){const n={prevValue:e.value};return(e.value!==void 0||t!==e.value)&&(n.value=e.value),n}setValue(e){this.props.value===void 0&&this.setState({value:e})}render(){const{value:e}=this.state,t=this.props,{className:n,size:r="normal",disabled:o=!1,placeholder:s,style:a}=t,u=fSe(t,["className","size","disabled","placeholder","style"]);return re.createElement("input",Object.assign({value:e,style:a,placeholder:s,onChange:this.handleChange,onKeyDown:this.handleKeyDown,className:mn(n,vSe(r,o)),ref:this.saveInput},u))}};$K.defaultProps={type:"text"};function eH(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[];return re.Children.forEach(i,function(n){n==null&&!e.keepEmpty||(Array.isArray(n)?t=t.concat(eH(n)):yae.isFragment(n)&&n.props?t=t.concat(eH(n.props.children,e)):t.push(n))}),t}var Bv=new Map;function bSe(i){i.forEach(function(e){var t,n=e.target;(t=Bv.get(n))===null||t===void 0||t.forEach(function(r){return r(n)})})}var ple=new Xae(bSe);function CSe(i,e){Bv.has(i)||(Bv.set(i,new Set),ple.observe(i)),Bv.get(i).add(e)}function wSe(i,e){Bv.has(i)&&(Bv.get(i).delete(e),Bv.get(i).size||(ple.unobserve(i),Bv.delete(i)))}var ySe=function(i){fC(t,i);var e=gC(t);function t(){return V0(this,t),e.apply(this,arguments)}return H0(t,[{key:"render",value:function(){return this.props.children}}]),t}(he.Component),tH=he.createContext(null);function SSe(i){var e=i.children,t=i.onBatchResize,n=he.useRef(0),r=he.useRef([]),o=he.useContext(tH),s=he.useCallback(function(a,u,d){n.current+=1;var h=n.current;r.current.push({size:a,element:u,data:d}),Promise.resolve().then(function(){h===n.current&&(t==null||t(r.current),r.current=[])}),o==null||o(a,u,d)},[t,o]);return he.createElement(tH.Provider,{value:s},e)}function LSe(i,e){var t=i.children,n=i.disabled,r=he.useRef(null),o=he.useRef(null),s=he.useContext(tH),a=typeof t=="function",u=a?t(r):t,d=he.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!a&&he.isValidElement(u)&&DK(u),f=h?u.ref:null,p=he.useMemo(function(){return xK(f,r)},[f,r]),m=function(){return fF(r.current)||fF(o.current)};he.useImperativeHandle(e,function(){return m()});var v=he.useRef(i);v.current=i;var b=he.useCallback(function(L){var S=v.current,y=S.onResize,E=S.data,A=L.getBoundingClientRect(),N=A.width,V=A.height,R=L.offsetWidth,M=L.offsetHeight,K=Math.floor(N),X=Math.floor(V);if(d.current.width!==K||d.current.height!==X||d.current.offsetWidth!==R||d.current.offsetHeight!==M){var $={width:K,height:X,offsetWidth:R,offsetHeight:M};d.current=$;var D=R===Math.round(N)?N:R,T=M===Math.round(V)?V:M,F=En(En({},$),{},{offsetWidth:D,offsetHeight:T});s==null||s(F,L,E),y&&Promise.resolve().then(function(){y(F,L)})}},[]);return he.useEffect(function(){var L=m();return L&&!n&&CSe(L,b),function(){return wSe(L,b)}},[r.current,n]),he.createElement(ySe,{ref:o},h?he.cloneElement(u,{ref:p}):u)}var ESe=he.forwardRef(LSe),xSe="rc-observer-key";function DSe(i,e){var t=i.children,n=typeof t=="function"?[t]:eH(t);return n.map(function(r,o){var s=(r==null?void 0:r.key)||"".concat(xSe,"-").concat(o);return he.createElement(ESe,us({},i,{key:s,ref:o===0?e:void 0}),r)})}var mle=he.forwardRef(DSe);mle.Collection=SSe;function ISe(i,e){var t=En({},i);return Array.isArray(e)&&e.forEach(function(n){delete t[n]}),t}var kSe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,TSe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],h9={},Dc;function NSe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=i.getAttribute("id")||i.getAttribute("data-reactid")||i.getAttribute("name");if(e&&h9[t])return h9[t];var n=window.getComputedStyle(i),r=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),o=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),a=TSe.map(function(d){return"".concat(d,":").concat(n.getPropertyValue(d))}).join(";"),u={sizingStyle:a,paddingSize:o,borderSize:s,boxSizing:r};return e&&t&&(h9[t]=u),u}function ASe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Dc||(Dc=document.createElement("textarea"),Dc.setAttribute("tab-index","-1"),Dc.setAttribute("aria-hidden","true"),document.body.appendChild(Dc)),i.getAttribute("wrap")?Dc.setAttribute("wrap",i.getAttribute("wrap")):Dc.removeAttribute("wrap");var r=NSe(i,e),o=r.paddingSize,s=r.borderSize,a=r.boxSizing,u=r.sizingStyle;Dc.setAttribute("style","".concat(u,";").concat(kSe)),Dc.value=i.value||i.placeholder||"";var d=Number.MIN_SAFE_INTEGER,h=Number.MAX_SAFE_INTEGER,f=Dc.scrollHeight,p;if(a==="border-box"?f+=s:a==="content-box"&&(f-=o),t!==null||n!==null){Dc.value=" ";var m=Dc.scrollHeight-o;t!==null&&(d=m*t,a==="border-box"&&(d=d+o+s),f=Math.max(d,f)),n!==null&&(h=m*n,a==="border-box"&&(h=h+o+s),p=f>h?"":"hidden",f=Math.min(h,f))}return{height:f,minHeight:d,maxHeight:h,overflowY:p,resize:"none"}}var OSe=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),d=0;d<s.length;d++){var h=s[d];if(!u(h))return!1;var f=e[h],p=t[h];if(o=n?n.call(r,f,p,h):void 0,o===!1||o===void 0&&f!==p)return!1}return!0};const MSe=Vp(OSe);var Iv;(function(i){i[i.NONE=0]="NONE",i[i.RESIZING=1]="RESIZING",i[i.RESIZED=2]="RESIZED"})(Iv||(Iv={}));var RSe=function(i){fC(t,i);var e=gC(t);function t(n){var r;return V0(this,t),r=e.call(this,n),r.nextFrameActionId=void 0,r.resizeFrameId=void 0,r.textArea=void 0,r.saveTextArea=function(o){r.textArea=o},r.handleResize=function(o){var s=r.state.resizeStatus,a=r.props,u=a.autoSize,d=a.onResize;s===Iv.NONE&&(typeof d=="function"&&d(o),u&&r.resizeOnNextFrame())},r.resizeOnNextFrame=function(){cancelAnimationFrame(r.nextFrameActionId),r.nextFrameActionId=requestAnimationFrame(r.resizeTextarea)},r.resizeTextarea=function(){var o=r.props.autoSize;if(!(!o||!r.textArea)){var s=o.minRows,a=o.maxRows,u=ASe(r.textArea,!1,s,a);r.setState({textareaStyles:u,resizeStatus:Iv.RESIZING},function(){cancelAnimationFrame(r.resizeFrameId),r.resizeFrameId=requestAnimationFrame(function(){r.setState({resizeStatus:Iv.RESIZED},function(){r.resizeFrameId=requestAnimationFrame(function(){r.setState({resizeStatus:Iv.NONE}),r.fixFirefoxAutoScroll()})})})})}},r.renderTextArea=function(){var o=r.props,s=o.prefixCls,a=s===void 0?"rc-textarea":s,u=o.autoSize,d=o.onResize,h=o.className,f=o.disabled,p=r.state,m=p.textareaStyles,v=p.resizeStatus,b=ISe(r.props,["prefixCls","onPressEnter","autoSize","defaultValue","onResize"]),L=rd(a,h,en({},"".concat(a,"-disabled"),f));"value"in b&&(b.value=b.value||"");var S=En(En(En({},r.props.style),m),v===Iv.RESIZING?{overflowX:"hidden",overflowY:"hidden"}:null);return he.createElement(mle,{onResize:r.handleResize,disabled:!(u||d)},he.createElement("textarea",us({},b,{className:L,style:S,ref:r.saveTextArea})))},r.state={textareaStyles:{},resizeStatus:Iv.NONE},r}return H0(t,[{key:"componentDidUpdate",value:function(r){(r.value!==this.props.value||!MSe(r.autoSize,this.props.autoSize))&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.nextFrameActionId),cancelAnimationFrame(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var r=this.textArea.selectionStart,o=this.textArea.selectionEnd;this.textArea.setSelectionRange(r,o)}}catch{}}},{key:"render",value:function(){return this.renderTextArea()}}]),t}(he.Component),PSe=function(i){fC(t,i);var e=gC(t);function t(n){var r;V0(this,t),r=e.call(this,n),r.resizableTextArea=void 0,r.focus=function(){r.resizableTextArea.textArea.focus()},r.saveTextArea=function(s){r.resizableTextArea=s},r.handleChange=function(s){var a=r.props.onChange;r.setValue(s.target.value,function(){r.resizableTextArea.resizeTextarea()}),a&&a(s)},r.handleKeyDown=function(s){var a=r.props,u=a.onPressEnter,d=a.onKeyDown;s.keyCode===13&&u&&u(s),d&&d(s)};var o=typeof n.value>"u"||n.value===null?n.defaultValue:n.value;return r.state={value:o},r}return H0(t,[{key:"setValue",value:function(r,o){"value"in this.props||this.setState({value:r},o)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return he.createElement(RSe,us({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(r){return"value"in r?{value:r.value}:null}}]),t}(he.Component),_le={},vle={exports:{}};(function(i){function e(t){return t&&t.__esModule?t:{default:t}}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(vle);var zK=vle.exports,ble={exports:{}},Cle={exports:{}};(function(i){function e(t){if(Array.isArray(t))return t}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Cle);var FSe=Cle.exports,wle={exports:{}};(function(i){function e(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var o,s,a,u,d=[],h=!0,f=!1;try{if(a=(r=r.call(t)).next,n===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(o=a.call(r)).done)&&(d.push(o.value),d.length!==n);h=!0);}catch(p){f=!0,s=p}finally{try{if(!h&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw s}}return d}}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(wle);var BSe=wle.exports,yle={exports:{}},Sle={exports:{}};(function(i){function e(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=t[r];return o}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Sle);var WSe=Sle.exports;(function(i){var e=WSe;function t(n,r){if(n){if(typeof n=="string")return e(n,r);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(n,r)}}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports})(yle);var VSe=yle.exports,Lle={exports:{}};(function(i){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Lle);var HSe=Lle.exports;(function(i){var e=FSe,t=BSe,n=VSe,r=HSe;function o(s,a){return e(s)||t(s,a)||n(s,a)||r()}i.exports=o,i.exports.__esModule=!0,i.exports.default=i.exports})(ble);var Ele=ble.exports,UK={},xle={exports:{}},Dle={exports:{}};(function(i){function e(t){"@babel/helpers - typeof";return i.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i.exports.__esModule=!0,i.exports.default=i.exports,e(t)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Dle);var $Se=Dle.exports;(function(i){var e=$Se.default;function t(r){if(typeof WeakMap!="function")return null;var o=new WeakMap,s=new WeakMap;return(t=function(u){return u?s:o})(r)}function n(r,o){if(!o&&r&&r.__esModule)return r;if(r===null||e(r)!=="object"&&typeof r!="function")return{default:r};var s=t(o);if(s&&s.has(r))return s.get(r);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in r)if(d!=="default"&&Object.prototype.hasOwnProperty.call(r,d)){var h=u?Object.getOwnPropertyDescriptor(r,d):null;h&&(h.get||h.set)?Object.defineProperty(a,d,h):a[d]=r[d]}return a.default=r,s&&s.set(r,a),a}i.exports=n,i.exports.__esModule=!0,i.exports.default=i.exports})(xle);var jK=xle.exports,zSe=jK.default;Object.defineProperty(UK,"__esModule",{value:!0});UK.default=USe;var MQ=zSe(he);function USe(i){var e=MQ.useRef();e.current=i;var t=MQ.useCallback(function(){for(var n,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(n=e.current)===null||n===void 0?void 0:n.call.apply(n,[e].concat(o))},[]);return t}var By={},KK={};Object.defineProperty(KK,"__esModule",{value:!0});KK.default=jSe;function jSe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var KSe=zK.default,GSe=jK.default;Object.defineProperty(By,"__esModule",{value:!0});By.useLayoutUpdateEffect=By.default=void 0;var nH=GSe(he),qSe=KSe(KK),RQ=(0,qSe.default)()?nH.useLayoutEffect:nH.useEffect,Ile=function(e,t){var n=nH.useRef(!0);RQ(function(){return e(n.current)},t),RQ(function(){return n.current=!1,function(){n.current=!0}},[])},YSe=function(e,t){Ile(function(n){if(!n)return e()},t)};By.useLayoutUpdateEffect=YSe;var ZSe=Ile;By.default=ZSe;var GK={},XSe=jK.default,QSe=zK.default;Object.defineProperty(GK,"__esModule",{value:!0});GK.default=eLe;var JSe=QSe(Ele),f9=XSe(he);function eLe(i){var e=f9.useRef(!1),t=f9.useState(i),n=(0,JSe.default)(t,2),r=n[0],o=n[1];f9.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(a,u){u&&e.current||o(a)}return[r,s]}var qK=zK.default;Object.defineProperty(_le,"__esModule",{value:!0});var tLe=_le.default=nLe,PQ=qK(Ele),FQ=qK(UK),BQ=By,WQ=qK(GK);function g9(i){return i!==void 0}function nLe(i,e){var t=e||{},n=t.defaultValue,r=t.value,o=t.onChange,s=t.postState,a=(0,WQ.default)(function(){return g9(r)?r:g9(n)?typeof n=="function"?n():n:typeof i=="function"?i():i}),u=(0,PQ.default)(a,2),d=u[0],h=u[1],f=r!==void 0?r:d,p=s?s(f):f,m=(0,FQ.default)(o),v=(0,WQ.default)([f]),b=(0,PQ.default)(v,2),L=b[0],S=b[1];(0,BQ.useLayoutUpdateEffect)(function(){var E=L[0];d!==E&&m(d,E)},[L]),(0,BQ.useLayoutUpdateEffect)(function(){g9(r)||h(r)},[r]);var y=(0,FQ.default)(function(E,A){h(E,A),S([f],A)});return[p,y]}var iLe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const kle=gt(RS,"textarea"),rLe=_n(kle,"show-count"),oLe=i=>{var{showCount:e=!1,maxLength:t,className:n,style:r,onChange:o}=i,s=iLe(i,["showCount","maxLength","className","style","onChange"]);const a=he.useRef(null),[u,d]=tLe(s.defaultValue,{value:s.value}),h=he.useRef(s.value);he.useEffect(()=>{(s.value!==void 0||h.current!==s.value)&&(d(s.value),h.current=s.value)},[s.value,h.current]);const f=S=>{s.value===void 0&&d(S)},p=S=>{f(S.target.value),gle(a.current,S,o)},m=wr.omit(s,["value"]),v=re.createElement(PSe,Object.assign({},m,{value:u,maxLength:t,className:mn(n&&!e?[n]:""),style:e?{}:r,prefixCls:RS,onChange:p,ref:a}));let b=_Se(u);const L=Number(t)>0;if(b=L?[...b].slice(0,t).join(""):b,e){const y=`${[...b].length}${L?` / ${t}`:""}`;return re.createElement("div",{className:mn(n,kle,rLe),style:r,"data-count":y},v)}return v};$K.TextArea=oLe;var sLe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const rM=Hn("list"),aLe=_n(rM,"vertical"),lLe=_n(rM,"horizontal");function uLe(i){const{children:e,current:t,disable:n,onClick:r,onSelect:o,className:s,mode:a}=i,u=sLe(i,["children","current","disable","onClick","onSelect","className","mode"]),[d,h]=he.useState(t),[f,p]=he.useState(n);he.useEffect(()=>{d!==t&&h(t),n!==f&&p(n)},[t,n]);const m=(L,S)=>{r==null||r(L,S),S&&(S.id!==d&&h(S.id),o==null||o(L,S))},b=mn(rM,s,a==="horizontal"?lLe:aLe);return re.createElement("ul",Object.assign({},u,{className:b}),ZO(e,{active:d,disable:f,onClick:m}))}var cLe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const YK=gt(rM,"item"),dLe=gt(rM,"label"),hLe=_n(YK,"active"),VQ=_n(YK,"disabled");function fLe(i){const{id:e,onClick:t,disabled:n,active:r,disable:o,className:s,children:a}=i,u=cLe(i,["id","onClick","disabled","active","disable","className","children"]),d=p=>{t==null||t(p,i)};let h="";(n!==void 0||n===!0)&&(h=VQ),o===e&&(h=VQ);const f=mn(YK,s,h,r===e?hLe:"");return re.createElement("li",Object.assign({id:e.toString(),className:f},u,{onClick:d}),re.createElement("span",{className:dLe},a))}class gLe{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Tle=new gLe;function gn(i){wg(i)||Tle.onUnexpectedError(i)}function Rs(i){wg(i)||Tle.onUnexpectedExternalError(i)}function HQ(i){if(i instanceof Error){let{name:e,message:t}=i;const n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n}}return i}const iH="Canceled";function wg(i){return i instanceof Error&&i.name===iH&&i.message===iH}function mC(){const i=new Error(iH);return i.name=i.message,i}function Kh(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function pLe(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class mLe extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}function Np(i){const e=this;let t=!1,n;return function(){return t||(t=!0,n=i.apply(e,arguments)),n}}var Jn;(function(i){function e(y){return y&&typeof y=="object"&&typeof y[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*r(y){yield y}i.single=r;function o(y){return y||t}i.from=o;function s(y){return!y||y[Symbol.iterator]().next().done===!0}i.isEmpty=s;function a(y){return y[Symbol.iterator]().next().value}i.first=a;function u(y,E){for(const A of y)if(E(A))return!0;return!1}i.some=u;function d(y,E){for(const A of y)if(E(A))return A}i.find=d;function*h(y,E){for(const A of y)E(A)&&(yield A)}i.filter=h;function*f(y,E){let A=0;for(const N of y)yield E(N,A++)}i.map=f;function*p(...y){for(const E of y)for(const A of E)yield A}i.concat=p;function*m(y){for(const E of y)for(const A of E)yield A}i.concatNested=m;function v(y,E,A){let N=A;for(const V of y)N=E(N,V);return N}i.reduce=v;function*b(y,E,A=y.length){for(E<0&&(E+=y.length),A<0?A+=y.length:A>y.length&&(A=y.length);E<A;E++)yield y[E]}i.slice=b;function L(y,E=Number.POSITIVE_INFINITY){const A=[];if(E===0)return[A,y];const N=y[Symbol.iterator]();for(let V=0;V<E;V++){const R=N.next();if(R.done)return[A,i.empty()];A.push(R.value)}return[A,{[Symbol.iterator](){return N}}]}i.consume=L;function S(y,E,A=(N,V)=>N===V){const N=y[Symbol.iterator](),V=E[Symbol.iterator]();for(;;){const R=N.next(),M=V.next();if(R.done!==M.done)return!1;if(R.done)return!0;if(!A(R.value,M.value))return!1}}i.equals=S})(Jn||(Jn={}));class _Le extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function ZK(i){return typeof i.dispose=="function"&&i.dispose.length===0}function oi(i){if(Jn.is(i)){let e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new _Le(e);return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function t0(...i){return Kn(()=>oi(i))}function Kn(i){return{dispose:Np(()=>{i()})}}class Qe{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{oi(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Qe.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}Qe.DISABLE_DISPOSED_WARNING=!1;class Oe{constructor(){this._store=new Qe,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Oe.None=Object.freeze({dispose(){}});class Aa{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)===null||t===void 0||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)===null||e===void 0||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class vLe{constructor(e){this.object=e}dispose(){}}let mo=class rH{constructor(e){this.element=e,this.next=rH.Undefined,this.prev=rH.Undefined}};mo.Undefined=new mo(void 0);class Tu{constructor(){this._first=mo.Undefined,this._last=mo.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===mo.Undefined}clear(){let e=this._first;for(;e!==mo.Undefined;){const t=e.next;e.prev=mo.Undefined,e.next=mo.Undefined,e=t}this._first=mo.Undefined,this._last=mo.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new mo(e);if(this._first===mo.Undefined)this._first=n,this._last=n;else if(t){const o=this._last;this._last=n,n.prev=o,o.next=n}else{const o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(n))}}shift(){if(this._first!==mo.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==mo.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==mo.Undefined&&e.next!==mo.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===mo.Undefined&&e.next===mo.Undefined?(this._first=mo.Undefined,this._last=mo.Undefined):e.next===mo.Undefined?(this._last=this._last.prev,this._last.next=mo.Undefined):e.prev===mo.Undefined&&(this._first=this._first.next,this._first.prev=mo.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==mo.Undefined;)yield e.element,e=e.next}}var p9;const zP="en";let _F=!1,vF=!1,UP=!1,Nle=!1,Ale=!1,XK=!1,XN,jP=zP,bLe,wv;const qr=typeof self=="object"?self:typeof global=="object"?global:{};let dl;typeof qr.vscode<"u"&&typeof qr.vscode.process<"u"?dl=qr.vscode.process:typeof process<"u"&&(dl=process);const CLe=typeof((p9=dl==null?void 0:dl.versions)===null||p9===void 0?void 0:p9.electron)=="string",wLe=CLe&&(dl==null?void 0:dl.type)==="renderer";if(typeof navigator=="object"&&!wLe)wv=navigator.userAgent,_F=wv.indexOf("Windows")>=0,vF=wv.indexOf("Macintosh")>=0,XK=(wv.indexOf("Macintosh")>=0||wv.indexOf("iPad")>=0||wv.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,UP=wv.indexOf("Linux")>=0,Ale=!0,XN=navigator.language,jP=XN;else if(typeof dl=="object"){_F=dl.platform==="win32",vF=dl.platform==="darwin",UP=dl.platform==="linux",UP&&dl.env.SNAP&&dl.env.SNAP_REVISION,XN=zP,jP=zP;const i=dl.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i),t=e.availableLanguages["*"];XN=e.locale,jP=t||zP,bLe=e._translationsConfigFile}catch{}Nle=!0}else console.error("Unable to resolve platform.");const As=_F,qn=vF,Xa=UP,Gh=Nle,PS=Ale,ig=XK,yLe=wv,SLe=jP,LLe=XN,ELe=(()=>{if(typeof qr.postMessage=="function"&&!qr.importScripts){let i=[];qr.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,r=i.length;n<r;n++){const o=i[n];if(o.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),o.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),qr.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),qu=vF||XK?2:_F?1:3;let $Q=!0,zQ=!1;function Ole(){if(!zQ){zQ=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,$Q=new Uint16Array(i.buffer)[0]===512+1}return $Q}const xLe=qr.performance&&typeof qr.performance.now=="function";class rg{constructor(e){this._highResolution=xLe&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new rg(e)}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?qr.performance.now():Date.now()}}var Rt;(function(i){i.None=()=>Oe.None;function e(y){return(E,A=null,N)=>{let V=!1,R;return R=y(M=>{if(!V)return R?R.dispose():V=!0,E.call(A,M)},null,N),V&&R.dispose(),R}}i.once=e;function t(y,E){return u((A,N=null,V)=>y(R=>A.call(N,E(R)),null,V))}i.map=t;function n(y,E){return u((A,N=null,V)=>y(R=>{E(R),A.call(N,R)},null,V))}i.forEach=n;function r(y,E){return u((A,N=null,V)=>y(R=>E(R)&&A.call(N,R),null,V))}i.filter=r;function o(y){return y}i.signal=o;function s(...y){return(E,A=null,N)=>t0(...y.map(V=>V(R=>E.call(A,R),null,N)))}i.any=s;function a(y,E,A){let N=A;return t(y,V=>(N=E(N,V),N))}i.reduce=a;function u(y){let E;const A=new be({onFirstListenerAdd(){E=y(A.fire,A)},onLastListenerRemove(){E.dispose()}});return A.event}function d(y,E,A=100,N=!1,V){let R,M,K,X=0;const $=new be({leakWarningThreshold:V,onFirstListenerAdd(){R=y(D=>{X++,M=E(M,D),N&&!K&&($.fire(M),M=void 0),clearTimeout(K),K=setTimeout(()=>{const T=M;M=void 0,K=void 0,(!N||X>1)&&$.fire(T),X=0},A)})},onLastListenerRemove(){R.dispose()}});return $.event}i.debounce=d;function h(y,E=(A,N)=>A===N){let A=!0,N;return r(y,V=>{const R=A||!E(V,N);return A=!1,N=V,R})}i.latch=h;function f(y,E){return[i.filter(y,E),i.filter(y,A=>!E(A))]}i.split=f;function p(y,E=!1,A=[]){let N=A.slice(),V=y(K=>{N?N.push(K):M.fire(K)});const R=()=>{N&&N.forEach(K=>M.fire(K)),N=null},M=new be({onFirstListenerAdd(){V||(V=y(K=>M.fire(K)))},onFirstListenerDidAdd(){N&&(E?setTimeout(R):R())},onLastListenerRemove(){V&&V.dispose(),V=null}});return M.event}i.buffer=p;class m{constructor(E){this.event=E}map(E){return new m(t(this.event,E))}forEach(E){return new m(n(this.event,E))}filter(E){return new m(r(this.event,E))}reduce(E,A){return new m(a(this.event,E,A))}latch(){return new m(h(this.event))}debounce(E,A=100,N=!1,V){return new m(d(this.event,E,A,N,V))}on(E,A,N){return this.event(E,A,N)}once(E,A,N){return e(this.event)(E,A,N)}}function v(y){return new m(y)}i.chain=v;function b(y,E,A=N=>N){const N=(...K)=>M.fire(A(...K)),V=()=>y.on(E,N),R=()=>y.removeListener(E,N),M=new be({onFirstListenerAdd:V,onLastListenerRemove:R});return M.event}i.fromNodeEventEmitter=b;function L(y,E,A=N=>N){const N=(...K)=>M.fire(A(...K)),V=()=>y.addEventListener(E,N),R=()=>y.removeEventListener(E,N),M=new be({onFirstListenerAdd:V,onLastListenerRemove:R});return M.event}i.fromDOMEventEmitter=L;function S(y){return new Promise(E=>e(y)(E))}i.toPromise=S})(Rt||(Rt={}));class l8{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${l8._idPool++}`}start(e){this._stopWatch=new rg(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}l8._idPool=0;let be=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=!((t=this._options)===null||t===void 0)&&t._profName?new l8(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var r;this._listeners||(this._listeners=new Tu);const o=this._listeners.isEmpty();o&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const s=this._listeners.push(t?[e,t]:e);o&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const a=(r=this._leakageMon)===null||r===void 0?void 0:r.check(this._listeners.size),u=Kn(()=>{a&&a(),this._disposed||(s(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))});return n instanceof Qe?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new Tu);for(let r of this._listeners)this._deliveryQueue.push([r,e]);for((t=this._perfMon)===null||t===void 0||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[r,o]=this._deliveryQueue.shift();try{typeof r=="function"?r.call(void 0,o):r[0].call(r[1],o)}catch(s){gn(s)}}(n=this._perfMon)===null||n===void 0||n.stop()}}dispose(){var e,t,n,r,o;this._disposed||(this._disposed=!0,(e=this._listeners)===null||e===void 0||e.clear(),(t=this._deliveryQueue)===null||t===void 0||t.clear(),(r=(n=this._options)===null||n===void 0?void 0:n.onLastListenerRemove)===null||r===void 0||r.call(n),(o=this._leakageMon)===null||o===void 0||o.dispose())}};class bF extends be{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Tu,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class DLe extends bF{constructor(e){var t;super(e),this._delay=(t=e.delay)!==null&&t!==void 0?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class QK{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,r)=>e(o=>{const s=this.buffers[this.buffers.length-1];s?s.push(()=>t.call(n,o)):t.call(n,o)},void 0,r)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach(r=>r()),n}}class UQ{constructor(){this.listening=!1,this.inputEvent=Rt.None,this.inputEventListener=Oe.None,this.emitter=new be({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class bb{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new be,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}getZoomFactor(){return this._zoomFactor}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}}bb.INSTANCE=new bb;function CF(){return bb.INSTANCE.getZoomLevel()}function Mle(){return bb.INSTANCE.getTimeSinceLastZoomLevelChanged()}function JK(i){return bb.INSTANCE.onDidChangeZoomLevel(i)}function Rle(){return bb.INSTANCE.getZoomFactor()}function vA(){return bb.INSTANCE.getPixelRatio()}const oM=navigator.userAgent,yl=oM.indexOf("Firefox")>=0,n0=oM.indexOf("AppleWebKit")>=0,eG=oM.indexOf("Chrome")>=0,qc=!eG&&oM.indexOf("Safari")>=0,Ple=!eG&&!qc&&n0,Fle=oM.indexOf("Android")>=0,tG=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,ILe=Object.freeze(Object.defineProperty({__proto__:null,getPixelRatio:vA,getTimeSinceLastZoomLevelChanged:Mle,getZoomFactor:Rle,getZoomLevel:CF,isAndroid:Fle,isChrome:eG,isFirefox:yl,isSafari:qc,isStandalone:tG,isWebKit:n0,isWebkitWebView:Ple,onDidChangeZoomLevel:JK},Symbol.toStringTag,{value:"Module"})),u8={clipboard:{writeText:Gh||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Gh||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:(()=>Gh||tG?0:navigator.keyboard||qc?1:2)(),touch:"ontouchstart"in window||navigator.maxTouchPoints>0,pointerEvents:window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0)};class nG{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const KP=new nG,oH=new nG,sH=new nG,Ble=new Array(230),kLe=Object.create(null),TLe=Object.create(null),iG=[];for(let i=0;i<=193;i++)iG[i]=-1;(function(){const i="",e=[[0,1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[0,1,1,"Hyper",0,i,0,i,i,i],[0,1,2,"Super",0,i,0,i,i,i],[0,1,3,"Fn",0,i,0,i,i,i],[0,1,4,"FnLock",0,i,0,i,i,i],[0,1,5,"Suspend",0,i,0,i,i,i],[0,1,6,"Resume",0,i,0,i,i,i],[0,1,7,"Turbo",0,i,0,i,i,i],[0,1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[0,1,9,"WakeUp",0,i,0,i,i,i],[31,0,10,"KeyA",31,"A",65,"VK_A",i,i],[32,0,11,"KeyB",32,"B",66,"VK_B",i,i],[33,0,12,"KeyC",33,"C",67,"VK_C",i,i],[34,0,13,"KeyD",34,"D",68,"VK_D",i,i],[35,0,14,"KeyE",35,"E",69,"VK_E",i,i],[36,0,15,"KeyF",36,"F",70,"VK_F",i,i],[37,0,16,"KeyG",37,"G",71,"VK_G",i,i],[38,0,17,"KeyH",38,"H",72,"VK_H",i,i],[39,0,18,"KeyI",39,"I",73,"VK_I",i,i],[40,0,19,"KeyJ",40,"J",74,"VK_J",i,i],[41,0,20,"KeyK",41,"K",75,"VK_K",i,i],[42,0,21,"KeyL",42,"L",76,"VK_L",i,i],[43,0,22,"KeyM",43,"M",77,"VK_M",i,i],[44,0,23,"KeyN",44,"N",78,"VK_N",i,i],[45,0,24,"KeyO",45,"O",79,"VK_O",i,i],[46,0,25,"KeyP",46,"P",80,"VK_P",i,i],[47,0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[48,0,27,"KeyR",48,"R",82,"VK_R",i,i],[49,0,28,"KeyS",49,"S",83,"VK_S",i,i],[50,0,29,"KeyT",50,"T",84,"VK_T",i,i],[51,0,30,"KeyU",51,"U",85,"VK_U",i,i],[52,0,31,"KeyV",52,"V",86,"VK_V",i,i],[53,0,32,"KeyW",53,"W",87,"VK_W",i,i],[54,0,33,"KeyX",54,"X",88,"VK_X",i,i],[55,0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[56,0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[22,0,36,"Digit1",22,"1",49,"VK_1",i,i],[23,0,37,"Digit2",23,"2",50,"VK_2",i,i],[24,0,38,"Digit3",24,"3",51,"VK_3",i,i],[25,0,39,"Digit4",25,"4",52,"VK_4",i,i],[26,0,40,"Digit5",26,"5",53,"VK_5",i,i],[27,0,41,"Digit6",27,"6",54,"VK_6",i,i],[28,0,42,"Digit7",28,"7",55,"VK_7",i,i],[29,0,43,"Digit8",29,"8",56,"VK_8",i,i],[30,0,44,"Digit9",30,"9",57,"VK_9",i,i],[21,0,45,"Digit0",21,"0",48,"VK_0",i,i],[3,1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[9,1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[2,1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[10,1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[83,0,51,"Minus",83,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[81,0,52,"Equal",81,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[87,0,53,"BracketLeft",87,"[",219,"VK_OEM_4","[","OEM_4"],[89,0,54,"BracketRight",89,"]",221,"VK_OEM_6","]","OEM_6"],[88,0,55,"Backslash",88,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,0,56,"IntlHash",0,i,0,i,i,i],[80,0,57,"Semicolon",80,";",186,"VK_OEM_1",";","OEM_1"],[90,0,58,"Quote",90,"'",222,"VK_OEM_7","'","OEM_7"],[86,0,59,"Backquote",86,"`",192,"VK_OEM_3","`","OEM_3"],[82,0,60,"Comma",82,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[84,0,61,"Period",84,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[85,0,62,"Slash",85,"/",191,"VK_OEM_2","/","OEM_2"],[8,1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[59,1,64,"F1",59,"F1",112,"VK_F1",i,i],[60,1,65,"F2",60,"F2",113,"VK_F2",i,i],[61,1,66,"F3",61,"F3",114,"VK_F3",i,i],[62,1,67,"F4",62,"F4",115,"VK_F4",i,i],[63,1,68,"F5",63,"F5",116,"VK_F5",i,i],[64,1,69,"F6",64,"F6",117,"VK_F6",i,i],[65,1,70,"F7",65,"F7",118,"VK_F7",i,i],[66,1,71,"F8",66,"F8",119,"VK_F8",i,i],[67,1,72,"F9",67,"F9",120,"VK_F9",i,i],[68,1,73,"F10",68,"F10",121,"VK_F10",i,i],[69,1,74,"F11",69,"F11",122,"VK_F11",i,i],[70,1,75,"F12",70,"F12",123,"VK_F12",i,i],[0,1,76,"PrintScreen",0,i,0,i,i,i],[79,1,77,"ScrollLock",79,"ScrollLock",145,"VK_SCROLL",i,i],[7,1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[19,1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[14,1,80,"Home",14,"Home",36,"VK_HOME",i,i],[11,1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[20,1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[13,1,83,"End",13,"End",35,"VK_END",i,i],[12,1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[17,1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[15,1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[18,1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[16,1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[78,1,89,"NumLock",78,"NumLock",144,"VK_NUMLOCK",i,i],[108,1,90,"NumpadDivide",108,"NumPad_Divide",111,"VK_DIVIDE",i,i],[103,1,91,"NumpadMultiply",103,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[106,1,92,"NumpadSubtract",106,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[104,1,93,"NumpadAdd",104,"NumPad_Add",107,"VK_ADD",i,i],[3,1,94,"NumpadEnter",3,i,0,i,i,i],[94,1,95,"Numpad1",94,"NumPad1",97,"VK_NUMPAD1",i,i],[95,1,96,"Numpad2",95,"NumPad2",98,"VK_NUMPAD2",i,i],[96,1,97,"Numpad3",96,"NumPad3",99,"VK_NUMPAD3",i,i],[97,1,98,"Numpad4",97,"NumPad4",100,"VK_NUMPAD4",i,i],[98,1,99,"Numpad5",98,"NumPad5",101,"VK_NUMPAD5",i,i],[99,1,100,"Numpad6",99,"NumPad6",102,"VK_NUMPAD6",i,i],[100,1,101,"Numpad7",100,"NumPad7",103,"VK_NUMPAD7",i,i],[101,1,102,"Numpad8",101,"NumPad8",104,"VK_NUMPAD8",i,i],[102,1,103,"Numpad9",102,"NumPad9",105,"VK_NUMPAD9",i,i],[93,1,104,"Numpad0",93,"NumPad0",96,"VK_NUMPAD0",i,i],[107,1,105,"NumpadDecimal",107,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[92,0,106,"IntlBackslash",92,"OEM_102",226,"VK_OEM_102",i,i],[58,1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[0,1,108,"Power",0,i,0,i,i,i],[0,1,109,"NumpadEqual",0,i,0,i,i,i],[71,1,110,"F13",71,"F13",124,"VK_F13",i,i],[72,1,111,"F14",72,"F14",125,"VK_F14",i,i],[73,1,112,"F15",73,"F15",126,"VK_F15",i,i],[74,1,113,"F16",74,"F16",127,"VK_F16",i,i],[75,1,114,"F17",75,"F17",128,"VK_F17",i,i],[76,1,115,"F18",76,"F18",129,"VK_F18",i,i],[77,1,116,"F19",77,"F19",130,"VK_F19",i,i],[0,1,117,"F20",0,i,0,"VK_F20",i,i],[0,1,118,"F21",0,i,0,"VK_F21",i,i],[0,1,119,"F22",0,i,0,"VK_F22",i,i],[0,1,120,"F23",0,i,0,"VK_F23",i,i],[0,1,121,"F24",0,i,0,"VK_F24",i,i],[0,1,122,"Open",0,i,0,i,i,i],[0,1,123,"Help",0,i,0,i,i,i],[0,1,124,"Select",0,i,0,i,i,i],[0,1,125,"Again",0,i,0,i,i,i],[0,1,126,"Undo",0,i,0,i,i,i],[0,1,127,"Cut",0,i,0,i,i,i],[0,1,128,"Copy",0,i,0,i,i,i],[0,1,129,"Paste",0,i,0,i,i,i],[0,1,130,"Find",0,i,0,i,i,i],[0,1,131,"AudioVolumeMute",112,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[0,1,132,"AudioVolumeUp",113,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[0,1,133,"AudioVolumeDown",114,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[105,1,134,"NumpadComma",105,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[110,0,135,"IntlRo",110,"ABNT_C1",193,"VK_ABNT_C1",i,i],[0,1,136,"KanaMode",0,i,0,i,i,i],[0,0,137,"IntlYen",0,i,0,i,i,i],[0,1,138,"Convert",0,i,0,i,i,i],[0,1,139,"NonConvert",0,i,0,i,i,i],[0,1,140,"Lang1",0,i,0,i,i,i],[0,1,141,"Lang2",0,i,0,i,i,i],[0,1,142,"Lang3",0,i,0,i,i,i],[0,1,143,"Lang4",0,i,0,i,i,i],[0,1,144,"Lang5",0,i,0,i,i,i],[0,1,145,"Abort",0,i,0,i,i,i],[0,1,146,"Props",0,i,0,i,i,i],[0,1,147,"NumpadParenLeft",0,i,0,i,i,i],[0,1,148,"NumpadParenRight",0,i,0,i,i,i],[0,1,149,"NumpadBackspace",0,i,0,i,i,i],[0,1,150,"NumpadMemoryStore",0,i,0,i,i,i],[0,1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[0,1,152,"NumpadMemoryClear",0,i,0,i,i,i],[0,1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[0,1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[0,1,155,"NumpadClear",0,i,0,i,i,i],[0,1,156,"NumpadClearEntry",0,i,0,i,i,i],[5,1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[4,1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[6,1,0,i,6,"Alt",18,"VK_MENU",i,i],[57,1,0,i,57,"Meta",0,"VK_COMMAND",i,i],[5,1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[4,1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[6,1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[57,1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[5,1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[4,1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[6,1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[57,1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[0,1,165,"BrightnessUp",0,i,0,i,i,i],[0,1,166,"BrightnessDown",0,i,0,i,i,i],[0,1,167,"MediaPlay",0,i,0,i,i,i],[0,1,168,"MediaRecord",0,i,0,i,i,i],[0,1,169,"MediaFastForward",0,i,0,i,i,i],[0,1,170,"MediaRewind",0,i,0,i,i,i],[114,1,171,"MediaTrackNext",119,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[115,1,172,"MediaTrackPrevious",120,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[116,1,173,"MediaStop",121,"MediaStop",178,"VK_MEDIA_STOP",i,i],[0,1,174,"Eject",0,i,0,i,i,i],[117,1,175,"MediaPlayPause",122,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[0,1,176,"MediaSelect",123,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[0,1,177,"LaunchMail",124,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[0,1,178,"LaunchApp2",125,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[0,1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[0,1,180,"SelectTask",0,i,0,i,i,i],[0,1,181,"LaunchScreenSaver",0,i,0,i,i,i],[0,1,182,"BrowserSearch",115,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[0,1,183,"BrowserHome",116,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[112,1,184,"BrowserBack",117,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[113,1,185,"BrowserForward",118,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[0,1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[0,1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[0,1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[0,1,189,"ZoomToggle",0,i,0,i,i,i],[0,1,190,"MailReply",0,i,0,i,i,i],[0,1,191,"MailForward",0,i,0,i,i,i],[0,1,192,"MailSend",0,i,0,i,i,i],[109,1,0,i,109,"KeyInComposition",229,i,i,i],[111,1,0,i,111,"ABNT_C2",194,"VK_ABNT_C2",i,i],[91,1,0,i,91,"OEM_8",223,"VK_OEM_8",i,i],[0,1,0,i,0,i,0,"VK_CLEAR",i,i],[0,1,0,i,0,i,0,"VK_KANA",i,i],[0,1,0,i,0,i,0,"VK_HANGUL",i,i],[0,1,0,i,0,i,0,"VK_JUNJA",i,i],[0,1,0,i,0,i,0,"VK_FINAL",i,i],[0,1,0,i,0,i,0,"VK_HANJA",i,i],[0,1,0,i,0,i,0,"VK_KANJI",i,i],[0,1,0,i,0,i,0,"VK_CONVERT",i,i],[0,1,0,i,0,i,0,"VK_NONCONVERT",i,i],[0,1,0,i,0,i,0,"VK_ACCEPT",i,i],[0,1,0,i,0,i,0,"VK_MODECHANGE",i,i],[0,1,0,i,0,i,0,"VK_SELECT",i,i],[0,1,0,i,0,i,0,"VK_PRINT",i,i],[0,1,0,i,0,i,0,"VK_EXECUTE",i,i],[0,1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[0,1,0,i,0,i,0,"VK_HELP",i,i],[0,1,0,i,0,i,0,"VK_APPS",i,i],[0,1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[0,1,0,i,0,i,0,"VK_PACKET",i,i],[0,1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[0,1,0,i,0,i,0,"VK_ATTN",i,i],[0,1,0,i,0,i,0,"VK_CRSEL",i,i],[0,1,0,i,0,i,0,"VK_EXSEL",i,i],[0,1,0,i,0,i,0,"VK_EREOF",i,i],[0,1,0,i,0,i,0,"VK_PLAY",i,i],[0,1,0,i,0,i,0,"VK_ZOOM",i,i],[0,1,0,i,0,i,0,"VK_NONAME",i,i],[0,1,0,i,0,i,0,"VK_PA1",i,i],[0,1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]];let t=[],n=[];for(const r of e){const[o,s,a,u,d,h,f,p,m,v]=r;if(n[a]||(n[a]=!0,kLe[u]=a,TLe[u.toLowerCase()]=a,s&&(iG[a]=d)),!t[d]){if(t[d]=!0,!h)throw new Error(`String representation missing for key code ${d} around scan code ${u}`);KP.define(d,h),oH.define(d,m||h),sH.define(d,v||m||h)}f&&(Ble[f]=d)}})();var R1;(function(i){function e(a){return KP.keyCodeToStr(a)}i.toString=e;function t(a){return KP.strToKeyCode(a)}i.fromString=t;function n(a){return oH.keyCodeToStr(a)}i.toUserSettingsUS=n;function r(a){return sH.keyCodeToStr(a)}i.toUserSettingsGeneral=r;function o(a){return oH.strToKeyCode(a)||sH.strToKeyCode(a)}i.fromUserSettings=o;function s(a){if(a>=93&&a<=108)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return KP.keyCodeToStr(a)}i.toElectronAccelerator=s})(R1||(R1={}));function Yr(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}function aH(i,e){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new wF([m9(t,e),m9(n,e)]):new wF([m9(t,e)])}function m9(i,e){const t=!!(i&2048),n=!!(i&256),r=e===2?n:t,o=!!(i&1024),s=!!(i&512),a=e===2?t:n,u=i&255;return new Cb(r,o,s,a,u)}class Cb{constructor(e,t,n,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyCode=o}equals(e){return this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new wF([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class wF{constructor(e){if(e.length===0)throw Kh("parts");this.parts=e}}class NLe{constructor(e,t,n,r,o,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=r,this.keyLabel=o,this.keyAriaLabel=s}}class ALe{}function OLe(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return R1.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(yl){if(e===59)return 80;if(e===107)return 81;if(e===109)return 83;if(qn&&e===224)return 57}else if(n0){if(e===91)return 57;if(qn&&e===93)return 57;if(!qn&&e===92)return 57}return Ble[e]||0}const MLe=qn?256:2048,RLe=512,PLe=1024,FLe=qn?2048:256;class yr{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.keyCode=OLe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=MLe),this.altKey&&(t|=RLe),this.shiftKey&&(t|=PLe),this.metaKey&&(t|=FLe),t|=e,t}_computeRuntimeKeybinding(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Cb(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}let lH=!1,UC=null;function BLe(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return lH=!0,null}catch{return lH=!0,null}return i.parent}class uH{static getSameOriginWindowChain(){if(!UC){UC=[];let e=window,t;do t=BLe(e),t?UC.push({window:e,iframeElement:e.frameElement||null}):UC.push({window:e,iframeElement:null}),e=t;while(e)}return UC.slice(0)}static hasDifferentOriginAncestor(){return UC||this.getSameOriginWindowChain(),lH}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,r=0,o=this.getSameOriginWindowChain();for(const s of o){if(n+=s.window.scrollY,r+=s.window.scrollX,s.window===t||!s.iframeElement)break;let a=s.iframeElement.getBoundingClientRect();n+=a.top,r+=a.left}return{top:n,left:r}}}class Ju{constructor(e){this.timestamp=Date.now(),this.browserEvent=e,this.leftButton=e.button===0,this.middleButton=e.button===1,this.rightButton=e.button===2,this.buttons=e.buttons,this.target=e.target,this.detail=e.detail||1,e.type==="dblclick"&&(this.detail=2),this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey,typeof e.pageX=="number"?(this.posx=e.pageX,this.posy=e.pageY):(this.posx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop);let t=uH.getPositionOfChildWindowRelativeToAncestorWindow(self,e.view);this.posx-=t.left,this.posy-=t.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Wy{constructor(e,t=0,n=0){if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){let r=e,o=e;if(typeof r.wheelDeltaY<"u")this.deltaY=r.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const s=e;s.deltaMode===s.DOM_DELTA_LINE?yl&&!qn?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")qc&&As?this.deltaX=-(r.wheelDeltaX/120):this.deltaX=r.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const s=e;s.deltaMode===s.DOM_DELTA_LINE?yl&&!qn?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}const Wle=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var Vn;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof GP?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Rt.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Wle})})(Vn||(Vn={}));class GP{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Wle:(this._emitter||(this._emitter=new be),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let oa=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new GP),this._token}cancel(){this._token?this._token instanceof GP&&this._token.cancel():this._token=Vn.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof GP&&this._token.dispose():this._token=Vn.None}};var ju=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},QN=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(a,u){s=i[o](s),r(a,u,s.done,s.value)})}}function r(o,s,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},s)}};function WLe(i){return!!i&&typeof i.then=="function"}function cs(i){const e=new oa,t=i(e.token),n=new Promise((r,o)=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),o(mC())});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),r(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel()}then(r,o){return n.then(r,o)}catch(r){return this.then(void 0,r)}finally(r){return n.finally(r)}}}function rG(i,e,t){return Promise.race([i,new Promise(n=>e.onCancellationRequested(()=>n(t)))])}class VLe{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{this.queuedPromise=null;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(r=>{this.activePromise=null,t(r)},r=>{this.activePromise=null,n(r)})})}}class Ap{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,r)=>{this.doResolve=n,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const n=this.task;return this.task=null,n()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return this.timeout!==null}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(mC()),this.completionPromise=null)}cancelTimeout(){this.timeout!==null&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class HLe{constructor(e){this.delayer=new Ap(e),this.throttler=new VLe}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}dispose(){this.delayer.dispose()}}function p0(i,e){return e?new Promise((t,n)=>{const r=setTimeout(()=>{o.dispose(),t()},i),o=e.onCancellationRequested(()=>{clearTimeout(r),o.dispose(),n(mC())})}):cs(t=>p0(i,t))}function wb(i,e=0){const t=setTimeout(i,e);return Kn(()=>clearTimeout(t))}function Vle(i,e=n=>!!n,t=null){let n=0;const r=i.length,o=()=>{if(n>=r)return Promise.resolve(t);const s=i[n++];return Promise.resolve(s()).then(u=>e(u)?Promise.resolve(u):o())};return o()}class Oa{constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class sM{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class er{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let bA;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?bA=i=>{ELe(()=>{if(e)return;const t=Date.now()+3;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:bA=(i,e)=>{const t=requestIdleCallback(i,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(t))}}}})();class ny{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(t){this._error=t}finally{this._didRun=!0}},this._handle=bA(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class Hle{constructor(){this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}}var cH;(function(i){function e(n){return ju(this,void 0,void 0,function*(){let r;const o=yield Promise.all(n.map(s=>s.then(a=>a,a=>{r||(r=a)})));if(typeof r<"u")throw r;return o})}i.settled=e;function t(n){return new Promise((r,o)=>ju(this,void 0,void 0,function*(){try{yield n(r,o)}catch(s){o(s)}}))}i.withAsyncBody=t})(cH||(cH={}));class Yo{constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new be,queueMicrotask(()=>ju(this,void 0,void 0,function*(){const t={emitOne:n=>this.emitOne(n),emitMany:n=>this.emitMany(n),reject:n=>this.reject(n)};try{yield Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}static fromArray(e){return new Yo(t=>{t.emitMany(e)})}static fromPromise(e){return new Yo(t=>ju(this,void 0,void 0,function*(){t.emitMany(yield e)}))}static fromPromises(e){return new Yo(t=>ju(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>ju(this,void 0,void 0,function*(){return t.emitOne(yield n)})))}))}static merge(e){return new Yo(t=>ju(this,void 0,void 0,function*(){yield Promise.all(e.map(n=>{var r,o;return ju(this,void 0,void 0,function*(){var s,a;try{for(r=QN(n);o=yield r.next(),!o.done;){const u=o.value;t.emitOne(u)}}catch(u){s={error:u}}finally{try{o&&!o.done&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}})}))}))}[Symbol.asyncIterator](){let e=0;return{next:()=>ju(this,void 0,void 0,function*(){do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};yield Rt.toPromise(this._onStateChanged.event)}while(!0)})}}static map(e,t){return new Yo(n=>ju(this,void 0,void 0,function*(){var r,o;try{for(var s=QN(e),a;a=yield s.next(),!a.done;){const u=a.value;n.emitOne(t(u))}}catch(u){r={error:u}}finally{try{a&&!a.done&&(o=s.return)&&(yield o.call(s))}finally{if(r)throw r.error}}}))}map(e){return Yo.map(this,e)}static filter(e,t){return new Yo(n=>ju(this,void 0,void 0,function*(){var r,o;try{for(var s=QN(e),a;a=yield s.next(),!a.done;){const u=a.value;t(u)&&n.emitOne(u)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(o=s.return)&&(yield o.call(s))}finally{if(r)throw r.error}}}))}filter(e){return Yo.filter(this,e)}static coalesce(e){return Yo.filter(e,t=>!!t)}coalesce(){return Yo.coalesce(this)}static toPromise(e){var t,n,r,o;return ju(this,void 0,void 0,function*(){const s=[];try{for(t=QN(e);n=yield t.next(),!n.done;){const a=n.value;s.push(a)}}catch(a){r={error:a}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}return s})}toPromise(){return Yo.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}}Yo.EMPTY=Yo.fromArray([]);class $Le extends Yo{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function zLe(i){const e=new oa,t=i(e.token);return new $Le(e,n=>ju(this,void 0,void 0,function*(){var r,o;const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),n.reject(mC())});try{try{for(var a=QN(t),u;u=yield a.next(),!u.done;){const d=u.value;if(e.token.isCancellationRequested)return;n.emitOne(d)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(o=a.return)&&(yield o.call(a))}finally{if(r)throw r.error}}s.dispose(),e.dispose()}catch(d){s.dispose(),e.dispose(),n.reject(d)}}))}let iy;if(typeof qr.vscode<"u"&&typeof qr.vscode.process<"u"){const i=qr.vscode.process;iy={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"?iy={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:iy={get platform(){return As?"win32":qn?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const dH=iy.cwd,ULe=iy.env,_C=iy.platform,jLe=65,KLe=97,GLe=90,qLe=122,i0=46,Ys=47,yu=92,pv=58,YLe=63;class $le extends Error{constructor(e,t,n){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const o=e.indexOf(".")!==-1?"property":"argument";let s=`The "${e}" ${o} ${r} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function Zo(i,e){if(typeof i!="string")throw new $le(e,"string",i)}function Ii(i){return i===Ys||i===yu}function hH(i){return i===Ys}function mv(i){return i>=jLe&&i<=GLe||i>=KLe&&i<=qLe}function yF(i,e,t,n){let r="",o=0,s=-1,a=0,u=0;for(let d=0;d<=i.length;++d){if(d<i.length)u=i.charCodeAt(d);else{if(n(u))break;u=Ys}if(n(u)){if(!(s===d-1||a===1))if(a===2){if(r.length<2||o!==2||r.charCodeAt(r.length-1)!==i0||r.charCodeAt(r.length-2)!==i0){if(r.length>2){const h=r.lastIndexOf(t);h===-1?(r="",o=0):(r=r.slice(0,h),o=r.length-1-r.lastIndexOf(t)),s=d,a=0;continue}else if(r.length!==0){r="",o=0,s=d,a=0;continue}}e&&(r+=r.length>0?`${t}..`:"..",o=2)}else r.length>0?r+=`${t}${i.slice(s+1,d)}`:r=i.slice(s+1,d),o=d-s-1;s=d,a=0}else u===i0&&a!==-1?++a:a=-1}return r}function zle(i,e){if(e===null||typeof e!="object")throw new $le("pathObject","Object",e);const t=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const gl={resolve(...i){let e="",t="",n=!1;for(let r=i.length-1;r>=-1;r--){let o;if(r>=0){if(o=i[r],Zo(o,"path"),o.length===0)continue}else e.length===0?o=dH():(o=ULe[`=${e}`]||dH(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===yu)&&(o=`${e}\\`));const s=o.length;let a=0,u="",d=!1;const h=o.charCodeAt(0);if(s===1)Ii(h)&&(a=1,d=!0);else if(Ii(h))if(d=!0,Ii(o.charCodeAt(1))){let f=2,p=f;for(;f<s&&!Ii(o.charCodeAt(f));)f++;if(f<s&&f!==p){const m=o.slice(p,f);for(p=f;f<s&&Ii(o.charCodeAt(f));)f++;if(f<s&&f!==p){for(p=f;f<s&&!Ii(o.charCodeAt(f));)f++;(f===s||f!==p)&&(u=`\\\\${m}\\${o.slice(p,f)}`,a=f)}}}else a=1;else mv(h)&&o.charCodeAt(1)===pv&&(u=o.slice(0,2),a=2,s>2&&Ii(o.charCodeAt(2))&&(d=!0,a=3));if(u.length>0)if(e.length>0){if(u.toLowerCase()!==e.toLowerCase())continue}else e=u;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=yF(t,!n,"\\",Ii),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){Zo(i,"path");const e=i.length;if(e===0)return".";let t=0,n,r=!1;const o=i.charCodeAt(0);if(e===1)return hH(o)?"\\":i;if(Ii(o))if(r=!0,Ii(i.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){const d=i.slice(u,a);for(u=a;a<e&&Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ii(i.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${i.slice(u)}\\`;a!==u&&(n=`\\\\${d}\\${i.slice(u,a)}`,t=a)}}}else t=1;else mv(o)&&i.charCodeAt(1)===pv&&(n=i.slice(0,2),t=2,e>2&&Ii(i.charCodeAt(2))&&(r=!0,t=3));let s=t<e?yF(i.slice(t),!r,"\\",Ii):"";return s.length===0&&!r&&(s="."),s.length>0&&Ii(i.charCodeAt(e-1))&&(s+="\\"),n===void 0?r?`\\${s}`:s:r?`${n}\\${s}`:`${n}${s}`},isAbsolute(i){Zo(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return Ii(t)||e>2&&mv(t)&&i.charCodeAt(1)===pv&&Ii(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let o=0;o<i.length;++o){const s=i[o];Zo(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,r=0;if(typeof t=="string"&&Ii(t.charCodeAt(0))){++r;const o=t.length;o>1&&Ii(t.charCodeAt(1))&&(++r,o>2&&(Ii(t.charCodeAt(2))?++r:n=!1))}if(n){for(;r<e.length&&Ii(e.charCodeAt(r));)r++;r>=2&&(e=`\\${e.slice(r)}`)}return gl.normalize(e)},relative(i,e){if(Zo(i,"from"),Zo(e,"to"),i===e)return"";const t=gl.resolve(i),n=gl.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let r=0;for(;r<i.length&&i.charCodeAt(r)===yu;)r++;let o=i.length;for(;o-1>r&&i.charCodeAt(o-1)===yu;)o--;const s=o-r;let a=0;for(;a<e.length&&e.charCodeAt(a)===yu;)a++;let u=e.length;for(;u-1>a&&e.charCodeAt(u-1)===yu;)u--;const d=u-a,h=s<d?s:d;let f=-1,p=0;for(;p<h;p++){const v=i.charCodeAt(r+p);if(v!==e.charCodeAt(a+p))break;v===yu&&(f=p)}if(p!==h){if(f===-1)return n}else{if(d>h){if(e.charCodeAt(a+p)===yu)return n.slice(a+p+1);if(p===2)return n.slice(a+p)}s>h&&(i.charCodeAt(r+p)===yu?f=p:p===2&&(f=3)),f===-1&&(f=0)}let m="";for(p=r+f+1;p<=o;++p)(p===o||i.charCodeAt(p)===yu)&&(m+=m.length===0?"..":"\\..");return a+=f,m.length>0?`${m}${n.slice(a,u)}`:(n.charCodeAt(a)===yu&&++a,n.slice(a,u))},toNamespacedPath(i){if(typeof i!="string")return i;if(i.length===0)return"";const e=gl.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===yu){if(e.charCodeAt(1)===yu){const t=e.charCodeAt(2);if(t!==YLe&&t!==i0)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(mv(e.charCodeAt(0))&&e.charCodeAt(1)===pv&&e.charCodeAt(2)===yu)return`\\\\?\\${e}`;return i},dirname(i){Zo(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const r=i.charCodeAt(0);if(e===1)return Ii(r)?i:".";if(Ii(r)){if(t=n=1,Ii(i.charCodeAt(1))){let a=2,u=a;for(;a<e&&!Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&Ii(i.charCodeAt(a));)a++;if(a<e&&a!==u){for(u=a;a<e&&!Ii(i.charCodeAt(a));)a++;if(a===e)return i;a!==u&&(t=n=a+1)}}}}else mv(r)&&i.charCodeAt(1)===pv&&(t=e>2&&Ii(i.charCodeAt(2))?3:2,n=t);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(Ii(i.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return i.slice(0,o)},basename(i,e){e!==void 0&&Zo(e,"ext"),Zo(i,"path");let t=0,n=-1,r=!0,o;if(i.length>=2&&mv(i.charCodeAt(0))&&i.charCodeAt(1)===pv&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(o=i.length-1;o>=t;--o){const u=i.charCodeAt(o);if(Ii(u)){if(!r){t=o+1;break}}else a===-1&&(r=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(o=i.length-1;o>=t;--o)if(Ii(i.charCodeAt(o))){if(!r){t=o+1;break}}else n===-1&&(r=!1,n=o+1);return n===-1?"":i.slice(t,n)},extname(i){Zo(i,"path");let e=0,t=-1,n=0,r=-1,o=!0,s=0;i.length>=2&&i.charCodeAt(1)===pv&&mv(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const u=i.charCodeAt(a);if(Ii(u)){if(!o){n=a+1;break}continue}r===-1&&(o=!1,r=a+1),u===i0?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||r===-1||s===0||s===1&&t===r-1&&t===n+1?"":i.slice(t,r)},format:zle.bind(null,"\\"),parse(i){Zo(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,r=i.charCodeAt(0);if(t===1)return Ii(r)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(Ii(r)){if(n=1,Ii(i.charCodeAt(1))){let f=2,p=f;for(;f<t&&!Ii(i.charCodeAt(f));)f++;if(f<t&&f!==p){for(p=f;f<t&&Ii(i.charCodeAt(f));)f++;if(f<t&&f!==p){for(p=f;f<t&&!Ii(i.charCodeAt(f));)f++;f===t?n=f:f!==p&&(n=f+1)}}}}else if(mv(r)&&i.charCodeAt(1)===pv){if(t<=2)return e.root=e.dir=i,e;if(n=2,Ii(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let o=-1,s=n,a=-1,u=!0,d=i.length-1,h=0;for(;d>=n;--d){if(r=i.charCodeAt(d),Ii(r)){if(!u){s=d+1;break}continue}a===-1&&(u=!1,a=d+1),r===i0?o===-1?o=d:h!==1&&(h=1):o!==-1&&(h=-1)}return a!==-1&&(o===-1||h===0||h===1&&o===a-1&&o===s+1?e.base=e.name=i.slice(s,a):(e.name=i.slice(s,o),e.base=i.slice(s,a),e.ext=i.slice(o,a))),s>0&&s!==n?e.dir=i.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Do={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const r=n>=0?i[n]:dH();Zo(r,"path"),r.length!==0&&(e=`${r}/${e}`,t=r.charCodeAt(0)===Ys)}return e=yF(e,!t,"/",hH),t?`/${e}`:e.length>0?e:"."},normalize(i){if(Zo(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Ys,t=i.charCodeAt(i.length-1)===Ys;return i=yF(i,!e,"/",hH),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return Zo(i,"path"),i.length>0&&i.charCodeAt(0)===Ys},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];Zo(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Do.normalize(e)},relative(i,e){if(Zo(i,"from"),Zo(e,"to"),i===e||(i=Do.resolve(i),e=Do.resolve(e),i===e))return"";const t=1,n=i.length,r=n-t,o=1,s=e.length-o,a=r<s?r:s;let u=-1,d=0;for(;d<a;d++){const f=i.charCodeAt(t+d);if(f!==e.charCodeAt(o+d))break;f===Ys&&(u=d)}if(d===a)if(s>a){if(e.charCodeAt(o+d)===Ys)return e.slice(o+d+1);if(d===0)return e.slice(o+d)}else r>a&&(i.charCodeAt(t+d)===Ys?u=d:d===0&&(u=0));let h="";for(d=t+u+1;d<=n;++d)(d===n||i.charCodeAt(d)===Ys)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(o+u)}`},toNamespacedPath(i){return i},dirname(i){if(Zo(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Ys;let t=-1,n=!0;for(let r=i.length-1;r>=1;--r)if(i.charCodeAt(r)===Ys){if(!n){t=r;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&Zo(e,"ext"),Zo(i,"path");let t=0,n=-1,r=!0,o;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(o=i.length-1;o>=0;--o){const u=i.charCodeAt(o);if(u===Ys){if(!r){t=o+1;break}}else a===-1&&(r=!1,a=o+1),s>=0&&(u===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(o=i.length-1;o>=0;--o)if(i.charCodeAt(o)===Ys){if(!r){t=o+1;break}}else n===-1&&(r=!1,n=o+1);return n===-1?"":i.slice(t,n)},extname(i){Zo(i,"path");let e=-1,t=0,n=-1,r=!0,o=0;for(let s=i.length-1;s>=0;--s){const a=i.charCodeAt(s);if(a===Ys){if(!r){t=s+1;break}continue}n===-1&&(r=!1,n=s+1),a===i0?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:zle.bind(null,"/"),parse(i){Zo(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Ys;let n;t?(e.root="/",n=1):n=0;let r=-1,o=0,s=-1,a=!0,u=i.length-1,d=0;for(;u>=n;--u){const h=i.charCodeAt(u);if(h===Ys){if(!a){o=u+1;break}continue}s===-1&&(a=!1,s=u+1),h===i0?r===-1?r=u:d!==1&&(d=1):r!==-1&&(d=-1)}if(s!==-1){const h=o===0&&t?1:o;r===-1||d===0||d===1&&r===s-1&&r===o+1?e.base=e.name=i.slice(h,s):(e.name=i.slice(h,r),e.base=i.slice(h,s),e.ext=i.slice(r,s))}return o>0?e.dir=i.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Do.win32=gl.win32=gl;Do.posix=gl.posix=Do;const oG=_C==="win32"?gl.normalize:Do.normalize,ZLe=_C==="win32"?gl.resolve:Do.resolve,XLe=_C==="win32"?gl.relative:Do.relative,Ule=_C==="win32"?gl.dirname:Do.dirname,G1=_C==="win32"?gl.basename:Do.basename,QLe=_C==="win32"?gl.extname:Do.extname,q1=_C==="win32"?gl.sep:Do.sep,JLe=/^\w[\w\d+.-]*$/,eEe=/^\//,tEe=/^\/\//;function jQ(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!JLe.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!eEe.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(tEe.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function nEe(i,e){return!i&&!e?"file":i}function iEe(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==Nh&&(e=Nh+e):e=Nh;break}return e}const Kr="",Nh="/",rEe=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class sn{constructor(e,t,n,r,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Kr,this.authority=e.authority||Kr,this.path=e.path||Kr,this.query=e.query||Kr,this.fragment=e.fragment||Kr):(this.scheme=nEe(e,s),this.authority=t||Kr,this.path=iEe(this.scheme,n||Kr),this.query=r||Kr,this.fragment=o||Kr,jQ(this,s))}static isUri(e){return e instanceof sn?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}get fsPath(){return SF(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:r,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=Kr),n===void 0?n=this.authority:n===null&&(n=Kr),r===void 0?r=this.path:r===null&&(r=Kr),o===void 0?o=this.query:o===null&&(o=Kr),s===void 0?s=this.fragment:s===null&&(s=Kr),t===this.scheme&&n===this.authority&&r===this.path&&o===this.query&&s===this.fragment?this:new jC(t,n,r,o,s)}static parse(e,t=!1){const n=rEe.exec(e);return n?new jC(n[2]||Kr,yR(n[4]||Kr),yR(n[5]||Kr),yR(n[7]||Kr),yR(n[9]||Kr),t):new jC(Kr,Kr,Kr,Kr,Kr)}static file(e){let t=Kr;if(As&&(e=e.replace(/\\/g,Nh)),e[0]===Nh&&e[1]===Nh){const n=e.indexOf(Nh,2);n===-1?(t=e.substring(2),e=Nh):(t=e.substring(2,n),e=e.substring(n)||Nh)}return new jC("file",t,e,Kr,Kr)}static from(e){const t=new jC(e.scheme,e.authority,e.path,e.query,e.fragment);return jQ(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return As&&e.scheme==="file"?n=sn.file(gl.join(SF(e,!0),...t)).path:n=Do.join(e.path,...t),e.with({path:n})}toString(e=!1){return fH(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof sn)return e;{const t=new jC(e);return t._formatted=e.external,t._fsPath=e._sep===jle?e.fsPath:null,t}}else return e}}const jle=As?1:void 0;let jC=class extends sn{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=SF(this,!1)),this._fsPath}toString(e=!1){return e?fH(this,!0):(this._formatted||(this._formatted=fH(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=jle),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Kle={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function KQ(i,e){let t,n=-1;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47)n!==-1&&(t+=encodeURIComponent(i.substring(n,r)),n=-1),t!==void 0&&(t+=i.charAt(r));else{t===void 0&&(t=i.substr(0,r));const s=Kle[o];s!==void 0?(n!==-1&&(t+=encodeURIComponent(i.substring(n,r)),n=-1),t+=s):n===-1&&(n=r)}}return n!==-1&&(t+=encodeURIComponent(i.substring(n))),t!==void 0?t:i}function oEe(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=Kle[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function SF(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,As&&(t=t.replace(/\//g,"\\")),t}function fH(i,e){const t=e?oEe:KQ;let n="",{scheme:r,authority:o,path:s,query:a,fragment:u}=i;if(r&&(n+=r,n+=":"),(o||r==="file")&&(n+=Nh,n+=Nh),o){let d=o.indexOf("@");if(d!==-1){const h=o.substr(0,d);o=o.substr(d+1),d=h.indexOf(":"),d===-1?n+=t(h,!1):(n+=t(h.substr(0,d),!1),n+=":",n+=t(h.substr(d+1),!1)),n+="@"}o=o.toLowerCase(),d=o.indexOf(":"),d===-1?n+=t(o,!1):(n+=t(o.substr(0,d),!1),n+=o.substr(d))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){const d=s.charCodeAt(1);d>=65&&d<=90&&(s=`/${String.fromCharCode(d+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){const d=s.charCodeAt(0);d>=65&&d<=90&&(s=`${String.fromCharCode(d+32)}:${s.substr(2)}`)}n+=t(s,!0)}return a&&(n+="?",n+=t(a,!1)),u&&(n+="#",n+=e?u:KQ(u,!1)),n}function Gle(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+Gle(i.substr(3)):i}}const GQ=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function yR(i){return i.match(GQ)?i.replace(GQ,e=>Gle(e)):i}var kn;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.userData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebook="vscode-notebook",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeInteractive="vscode-interactive",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls"})(kn||(kn={}));class sEe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&(n=`[${n}]`);const r=this._ports[t],o=this._connectionTokens[t];let s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&tkn=${encodeURIComponent(o)}`),sn.from({scheme:PS?this._preferredWebSchema:kn.vscodeRemoteResource,authority:`${n}:${r}`,path:"/vscode-remote-resource",query:s})}}const qle=new sEe;class CA{asBrowserUri(e,t){const n=this.toUri(e,t);return n.scheme===kn.vscodeRemote?qle.rewrite(n):n.scheme===kn.file&&(Gh||typeof qr.importScripts=="function"&&qr.origin===`${kn.vscodeFileResource}://${CA.FALLBACK_AUTHORITY}`)?n.with({scheme:kn.vscodeFileResource,authority:n.authority||CA.FALLBACK_AUTHORITY,query:null,fragment:null}):n}toUri(e,t){return sn.isUri(e)?e:sn.parse(t.toUrl(e))}}CA.FALLBACK_AUTHORITY="vscode-app";const Yle=new CA;function $o(i){for(;i.firstChild;)i.firstChild.remove()}function sG(i){var e;return(e=i==null?void 0:i.isConnected)!==null&&e!==void 0?e:!1}class Zle{constructor(e,t,n,r){this._node=e,this._type=t,this._handler=n,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function qe(i,e,t,n){return new Zle(i,e,t,n)}function Xle(i){return function(e){return i(new Ju(e))}}function aEe(i){return function(e){return i(new yr(e))}}let ts=function(e,t,n,r){let o=n;return t==="click"||t==="mousedown"?o=Xle(n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=aEe(n)),qe(e,t,o,r)},lEe=function(e,t,n){let r=Xle(t);return aG(e,r,n)};function aG(i,e,t){return qe(i,ig&&u8.pointerEvents?Ht.POINTER_DOWN:Ht.MOUSE_DOWN,e,t)}function Qle(i,e,t){return qe(i,ig&&u8.pointerEvents?Ht.POINTER_UP:Ht.MOUSE_UP,e,t)}function lG(i,e){return qe(i,"mouseout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function uEe(i,e){return qe(i,"pointerout",t=>{let n=t.relatedTarget;for(;n&&n!==i;)n=n.parentNode;n!==i&&e(t)})}function _h(i,e,t){let n=null;const r=u=>a.fire(u),o=()=>{n||(n=new Zle(i,e,r,t))},s=()=>{n&&(n.dispose(),n=null)},a=new be({onFirstListenerAdd:o,onLastListenerRemove:s});return a}let _9=null;function cEe(i){if(!_9){const e=t=>setTimeout(()=>t(new Date().getTime()),0);_9=self.requestAnimationFrame||self.msRequestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame||self.oRequestAnimationFrame||e}return _9.call(self,i)}let Jle,og;class v9{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){gn(e)}}static sort(e,t){return t.priority-e.priority}}(function(){let i=[],e=null,t=!1,n=!1,r=()=>{for(t=!1,e=i,i=[],n=!0;e.length>0;)e.sort(v9.sort),e.shift().execute();n=!1};og=(o,s=0)=>{let a=new v9(o,s);return i.push(a),t||(t=!0,cEe(r)),a},Jle=(o,s)=>{if(n){let a=new v9(o,s);return e.push(a),a}else return og(o,s)}})();const dEe=8,hEe=function(i,e){return e};class fEe extends Oe{constructor(e,t,n,r=hEe,o=dEe){super();let s=null,a=0,u=this._register(new Oa),d=()=>{a=new Date().getTime(),n(s),s=null};this._register(qe(e,t,h=>{s=r(s,h);let f=new Date().getTime()-a;f>=o?(u.cancel(),d()):u.setIfNotSet(d,o-f)}))}}function uG(i,e,t,n,r){return new fEe(i,e,t,n,r)}function cG(i){return document.defaultView.getComputedStyle(i,null)}function c8(i){if(i!==document.body)return new cr(i.clientWidth,i.clientHeight);if(ig&&window.visualViewport)return new cr(window.visualViewport.width,window.visualViewport.height);if(window.innerWidth&&window.innerHeight)return new cr(window.innerWidth,window.innerHeight);if(document.body&&document.body.clientWidth&&document.body.clientHeight)return new cr(document.body.clientWidth,document.body.clientHeight);if(document.documentElement&&document.documentElement.clientWidth&&document.documentElement.clientHeight)return new cr(document.documentElement.clientWidth,document.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class zr{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let r=cG(e),o="0";return r&&(r.getPropertyValue?o=r.getPropertyValue(t):o=r.getAttribute(n)),zr.convertToPixels(e,o)}static getBorderLeftWidth(e){return zr.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return zr.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return zr.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return zr.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return zr.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return zr.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return zr.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return zr.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return zr.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return zr.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return zr.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return zr.getDimension(e,"margin-bottom","marginBottom")}}class cr{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new cr(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof cr?e:new cr(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function eue(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==document.body&&i!==document.documentElement;){t-=i.scrollTop;const r=nue(i)?null:cG(i);r&&(n-=r.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=zr.getBorderLeftWidth(i),t+=zr.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function gEe(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function Us(i){let e=i.getBoundingClientRect();return{left:e.left+mp.scrollX,top:e.top+mp.scrollY,width:e.width,height:e.height}}const mp=new class{get scrollX(){return typeof window.scrollX=="number"?window.scrollX:document.body.scrollLeft+document.documentElement.scrollLeft}get scrollY(){return typeof window.scrollY=="number"?window.scrollY:document.body.scrollTop+document.documentElement.scrollTop}};function Oc(i){let e=zr.getMarginLeft(i)+zr.getMarginRight(i);return i.offsetWidth+e}function b9(i){let e=zr.getBorderLeftWidth(i)+zr.getBorderRightWidth(i),t=zr.getPaddingLeft(i)+zr.getPaddingRight(i);return i.offsetWidth-e-t}function pEe(i){let e=zr.getBorderTopWidth(i)+zr.getBorderBottomWidth(i),t=zr.getPaddingTop(i)+zr.getPaddingBottom(i);return i.offsetHeight-e-t}function gH(i){let e=zr.getMarginTop(i)+zr.getMarginBottom(i);return i.offsetHeight+e}function _p(i,e){for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function tue(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function qQ(i,e,t){return!!tue(i,e,t)}function nue(i){return i&&!!i.host&&!!i.mode}function d8(i){return!!m0(i)}function m0(i){for(;i.parentNode;){if(i===document.body)return null;i=i.parentNode}return nue(i)?i:null}function ry(){let i=document.activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function cc(i=document.getElementsByTagName("head")[0]){let e=document.createElement("style");return e.type="text/css",e.media="screen",i.appendChild(e),e}let C9=null;function iue(){return C9||(C9=cc()),C9}function mEe(i){var e,t;return!((e=i==null?void 0:i.sheet)===null||e===void 0)&&e.rules?i.sheet.rules:!((t=i==null?void 0:i.sheet)===null||t===void 0)&&t.cssRules?i.sheet.cssRules:[]}function pH(i,e,t=iue()){!t||!e||t.sheet.insertRule(i+"{"+e+"}",0)}function YQ(i,e=iue()){if(!e)return;let t=mEe(e),n=[];for(let r=0;r<t.length;r++)t[r].selectorText.indexOf(i)!==-1&&n.push(r);for(let r=n.length-1;r>=0;r--)e.sheet.deleteRule(n[r])}function rue(i){return typeof HTMLElement=="object"?i instanceof HTMLElement:i&&typeof i=="object"&&i.nodeType===1&&typeof i.nodeName=="string"}const Ht={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:n0?"webkitAnimationStart":"animationstart",ANIMATION_END:n0?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:n0?"webkitAnimationIteration":"animationiteration"},Ni={stop:function(i,e){i.preventDefault?i.preventDefault():i.returnValue=!1,e&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0)}};function _Ee(i){let e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function vEe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class LF extends Oe{constructor(e){super(),this._onDidFocus=this._register(new be),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new be),this.onDidBlur=this._onDidBlur.event;let t=LF.hasFocusWithin(e),n=!1;const r=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,window.setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{LF.hasFocusWithin(e)!==t&&(t?o():r())},this._register(qe(e,Ht.FOCUS,r,!0)),this._register(qe(e,Ht.BLUR,o,!0)),this._register(qe(e,Ht.FOCUS_IN,()=>this._refreshStateHandler())),this._register(qe(e,Ht.FOCUS_OUT,()=>this._refreshStateHandler()))}static hasFocusWithin(e){const t=m0(e),n=t?t.activeElement:document.activeElement;return _p(n,e)}}function Vy(i){return new LF(i)}function Be(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function bEe(i,e){return i.insertBefore(e,i.firstChild),e}function _0(i,...e){i.innerText="",Be(i,...e)}const CEe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var wA;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(wA||(wA={}));function oue(i,e,t,...n){let r=CEe.exec(e);if(!r)throw new Error("Bad use of emmet");t=Object.assign({},t||{});let o=r[1]||"div",s;return i!==wA.HTML?s=document.createElementNS(i,o):s=document.createElement(o),r[3]&&(s.id=r[3]),r[4]&&(s.className=r[4].replace(/\./g," ").trim()),Object.keys(t).forEach(a=>{const u=t[a];typeof u>"u"||(/^on\w+$/.test(a)?s[a]=u:a==="selected"?u&&s.setAttribute(a,"true"):s.setAttribute(a,u))}),s.append(...n),s}function Ge(i,e,...t){return oue(wA.HTML,i,e,...t)}Ge.SVG=function(i,e,...t){return oue(wA.SVG,i,e,...t)};function Eu(...i){for(let e of i)e.style.display="",e.removeAttribute("aria-hidden")}function za(...i){for(let e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function wEe(i){return Array.prototype.slice.call(document.getElementsByTagName(i),0)}function ZQ(i){const e=window.devicePixelRatio*i;return Math.max(1,Math.floor(e))/window.devicePixelRatio}function sue(i){window.open(i,"_blank","noopener")}function yEe(i){const e=()=>{i(),t=og(e)};let t=og(e);return Kn(()=>t.dispose())}qle.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");function yb(i){return i?`url('${Yle.asBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function XQ(i){return`'${i.replace(/'/g,"%27")}'`}class P1 extends be{constructor(){super(),this._subscriptions=new Qe,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(qe(window,"keydown",e=>{if(e.defaultPrevented)return;const t=new yr(e);if(!(t.keyCode===6&&e.repeat)){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(t.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}},!0)),this._subscriptions.add(qe(window,"keyup",e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))},!0)),this._subscriptions.add(qe(document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(qe(document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),this._subscriptions.add(qe(document.body,"mousemove",e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),this._subscriptions.add(qe(window,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return P1.instance||(P1.instance=new P1),P1.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}function SEe(i,e){const t=window.matchMedia(i);typeof t.addEventListener=="function"?t.addEventListener("change",e):t.addListener(e)}const QQ=2e4;let v1,qP,mH,YP,_H;function LEe(i){v1=document.createElement("div"),v1.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),v1.appendChild(n),n};qP=e(),mH=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("role","complementary"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),v1.appendChild(n),n};YP=t(),_H=t(),i.appendChild(v1)}function ks(i){v1&&(qP.textContent!==i?($o(mH),xF(qP,i)):($o(qP),xF(mH,i)))}function EF(i){v1&&(qn?ks(i):YP.textContent!==i?($o(_H),xF(YP,i)):($o(YP),xF(_H,i)))}function xF(i,e){$o(i),e.length>QQ&&(e=e.substr(0,QQ)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var Ph;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(Ph||(Ph={}));const An=gi("instantiationService");function EEe(i,e,t,n){e[Ph.DI_TARGET]===e?e[Ph.DI_DEPENDENCIES].push({id:i,index:t,optional:n}):(e[Ph.DI_DEPENDENCIES]=[{id:i,index:t,optional:n}],e[Ph.DI_TARGET]=e)}function gi(i){if(Ph.serviceIds.has(i))return Ph.serviceIds.get(i);const e=function(t,n,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");EEe(e,t,r,!1)};return e.toString=()=>i,Ph.serviceIds.set(i,e),e}const ki=gi("codeEditorService"),dG=gi("markerDecorationsService");function xEe(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,function(n,r){const o=r[0];return typeof e[o]<"u"?e[o]:n}),t}function C(i,e,...t){return xEe(e,t)}let Le=class d1{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new d1(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return d1.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return d1.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return d1.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,r=t.lineNumber|0;if(n===r){let o=e.column|0,s=t.column|0;return o-s}return n-r}clone(){return new d1(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new d1(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}};const Io=gi("modelService");function DEe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}const Qa=gi("textModelService");var DF=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class rc extends Oe{constructor(e,t="",n="",r=!0,o){super(),this._onDidChange=this._register(new be),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=r,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}run(e,t){return DF(this,void 0,void 0,function*(){this._actionCallback&&(yield this._actionCallback(e))})}}class Hy extends Oe{constructor(){super(...arguments),this._onBeforeRun=this._register(new be),this.onBeforeRun=this._onBeforeRun.event,this._onDidRun=this._register(new be),this.onDidRun=this._onDidRun.event}run(e,t){return DF(this,void 0,void 0,function*(){if(!e.enabled)return;this._onBeforeRun.fire({action:e});let n;try{yield this.runAction(e,t)}catch(r){n=r}this._onDidRun.fire({action:e,error:n})})}runAction(e,t){return DF(this,void 0,void 0,function*(){yield e.run(t)})}}class Qc extends rc{constructor(e){super(Qc.ID,e,e?"separator text":"separator"),this.checked=!1,this.enabled=!1}}Qc.ID="vs.actions.separator";class h8{constructor(e,t,n,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=r,this._actions=n}get actions(){return this._actions}dispose(){}run(){return DF(this,void 0,void 0,function*(){})}}class f8 extends rc{constructor(){super(f8.ID,C("submenu.empty","(empty)"),void 0,!1)}}f8.ID="vs.actions.empty";let IEe=class{constructor(){this._icons=new Map,this._onDidRegister=new be}add(e){const t=this._icons.get(e.id);t?e.description?t.description=e.description:console.error(`Duplicate registration of codicon ${e.id}`):(this._icons.set(e.id,e),this._onDidRegister.fire(e))}get(e){return this._icons.get(e)}get all(){return this._icons.values()}get onDidRegister(){return this._onDidRegister.event}};const aue=new IEe,IF=aue;function kEe(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}class _e{constructor(e,t,n){this.id=e,this.definition=t,this.description=n,aue.add(this)}get classNames(){return"codicon codicon-"+this.id}get classNamesArray(){return["codicon","codicon-"+this.id]}get cssSelector(){return".codicon.codicon-"+this.id}}_e.add=new _e("add",{fontCharacter:"\\ea60"});_e.lightBulb=new _e("light-bulb",{fontCharacter:"\\ea61"});_e.warning=new _e("warning",{fontCharacter:"\\ea6c"});_e.info=new _e("info",{fontCharacter:"\\ea74"});_e.close=new _e("close",{fontCharacter:"\\ea76"});_e.symbolFolder=new _e("symbol-folder",{fontCharacter:"\\ea83"});_e.symbolEvent=new _e("symbol-event",{fontCharacter:"\\ea86"});_e.error=new _e("error",{fontCharacter:"\\ea87"});_e.symbolVariable=new _e("symbol-variable",{fontCharacter:"\\ea88"});_e.symbolArray=new _e("symbol-array",{fontCharacter:"\\ea8a"});_e.symbolModule=new _e("symbol-module",{fontCharacter:"\\ea8b"});_e.symbolPackage=new _e("symbol-package",{fontCharacter:"\\ea8b"});_e.symbolNamespace=new _e("symbol-namespace",{fontCharacter:"\\ea8b"});_e.symbolObject=new _e("symbol-object",{fontCharacter:"\\ea8b"});_e.symbolMethod=new _e("symbol-method",{fontCharacter:"\\ea8c"});_e.symbolFunction=new _e("symbol-function",{fontCharacter:"\\ea8c"});_e.symbolConstructor=new _e("symbol-constructor",{fontCharacter:"\\ea8c"});_e.symbolBoolean=new _e("symbol-boolean",{fontCharacter:"\\ea8f"});_e.symbolNull=new _e("symbol-null",{fontCharacter:"\\ea8f"});_e.symbolNumber=new _e("symbol-number",{fontCharacter:"\\ea90"});_e.symbolStruct=new _e("symbol-struct",{fontCharacter:"\\ea91"});_e.symbolTypeParameter=new _e("symbol-type-parameter",{fontCharacter:"\\ea92"});_e.symbolKey=new _e("symbol-key",{fontCharacter:"\\ea93"});_e.symbolText=new _e("symbol-text",{fontCharacter:"\\ea93"});_e.symbolReference=new _e("symbol-reference",{fontCharacter:"\\ea94"});_e.symbolEnum=new _e("symbol-enum",{fontCharacter:"\\ea95"});_e.symbolValue=new _e("symbol-value",{fontCharacter:"\\ea95"});_e.symbolUnit=new _e("symbol-unit",{fontCharacter:"\\ea96"});_e.arrowDown=new _e("arrow-down",{fontCharacter:"\\ea9a"});_e.arrowLeft=new _e("arrow-left",{fontCharacter:"\\ea9b"});_e.arrowUp=new _e("arrow-up",{fontCharacter:"\\eaa1"});_e.caseSensitive=new _e("case-sensitive",{fontCharacter:"\\eab1"});_e.check=new _e("check",{fontCharacter:"\\eab2"});_e.chevronDown=new _e("chevron-down",{fontCharacter:"\\eab4"});_e.chevronRight=new _e("chevron-right",{fontCharacter:"\\eab6"});_e.chevronUp=new _e("chevron-up",{fontCharacter:"\\eab7"});_e.lightbulbAutofix=new _e("lightbulb-autofix",{fontCharacter:"\\eb13"});_e.loading=new _e("loading",{fontCharacter:"\\eb19"});_e.preserveCase=new _e("preserve-case",{fontCharacter:"\\eb2e"});_e.regex=new _e("regex",{fontCharacter:"\\eb38"});_e.remove=new _e("remove",{fontCharacter:"\\eb3b"});_e.replaceAll=new _e("replace-all",{fontCharacter:"\\eb3c"});_e.replace=new _e("replace",{fontCharacter:"\\eb3d"});_e.splitHorizontal=new _e("split-horizontal",{fontCharacter:"\\eb56"});_e.splitVertical=new _e("split-vertical",{fontCharacter:"\\eb57"});_e.symbolClass=new _e("symbol-class",{fontCharacter:"\\eb5b"});_e.symbolColor=new _e("symbol-color",{fontCharacter:"\\eb5c"});_e.symbolConstant=new _e("symbol-constant",{fontCharacter:"\\eb5d"});_e.symbolEnumMember=new _e("symbol-enum-member",{fontCharacter:"\\eb5e"});_e.symbolField=new _e("symbol-field",{fontCharacter:"\\eb5f"});_e.symbolFile=new _e("symbol-file",{fontCharacter:"\\eb60"});_e.symbolInterface=new _e("symbol-interface",{fontCharacter:"\\eb61"});_e.symbolKeyword=new _e("symbol-keyword",{fontCharacter:"\\eb62"});_e.symbolOperator=new _e("symbol-operator",{fontCharacter:"\\eb64"});_e.symbolProperty=new _e("symbol-property",{fontCharacter:"\\eb65"});_e.symbolSnippet=new _e("symbol-snippet",{fontCharacter:"\\eb66"});_e.triangleDown=new _e("triangle-down",{fontCharacter:"\\eb6e"});_e.triangleLeft=new _e("triangle-left",{fontCharacter:"\\eb6f"});_e.triangleRight=new _e("triangle-right",{fontCharacter:"\\eb70"});_e.triangleUp=new _e("triangle-up",{fontCharacter:"\\eb71"});_e.wholeWord=new _e("whole-word",{fontCharacter:"\\eb7e"});_e.listFilter=new _e("list-filter",{fontCharacter:"\\eb83"});_e.listSelection=new _e("list-selection",{fontCharacter:"\\eb85"});_e.selection=new _e("selection",{fontCharacter:"\\eb85"});_e.symbolString=new _e("symbol-string",{fontCharacter:"\\eb8d"});_e.treeItemExpanded=new _e("tree-item-expanded",_e.chevronDown.definition);_e.treeFilterOnTypeOn=new _e("tree-filter-on-type-on",_e.listFilter.definition);_e.treeFilterOnTypeOff=new _e("tree-filter-on-type-off",_e.listSelection.definition);_e.treeFilterClear=new _e("tree-filter-clear",_e.close.definition);_e.treeItemLoading=new _e("tree-item-loading",_e.loading.definition);_e.menuSelection=new _e("menu-selection",_e.check.definition);_e.menuSubmenu=new _e("menu-submenu",_e.chevronRight.definition);_e.scrollbarButtonLeft=new _e("scrollbar-button-left",_e.triangleLeft.definition);_e.scrollbarButtonRight=new _e("scrollbar-button-right",_e.triangleRight.definition);_e.scrollbarButtonUp=new _e("scrollbar-button-up",_e.triangleUp.definition);_e.scrollbarButtonDown=new _e("scrollbar-button-down",_e.triangleDown.definition);_e.quickInputBack=new _e("quick-input-back",_e.arrowLeft.definition);var ja;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(o){if(o instanceof _e)return["codicon","codicon-"+o.id];const s=e.exec(o.id);if(!s)return t(_e.error);let[,a,u]=s;const d=["codicon","codicon-"+a];return u&&d.push("codicon-modifier-"+u.substr(1)),d}i.asClassNameArray=t;function n(o){return t(o).join(" ")}i.asClassName=n;function r(o){return"."+t(o).join(".")}i.asCSSSelector=r})(ja||(ja={}));function lue(i){return Array.isArray(i)}function dc(i){return typeof i=="string"}function Ga(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function Sb(i){return typeof i=="number"&&!isNaN(i)}function uue(i){return i===!0||i===!1}function pl(i){return typeof i>"u"}function TEe(i){return!xu(i)}function xu(i){return pl(i)||i===null}function Gi(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function SR(i){if(xu(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function kF(i){return typeof i=="function"}function NEe(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)AEe(i[n],e[n])}function AEe(i,e){if(dc(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(kF(e)){try{if(i instanceof e)return}catch{}if(!xu(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function OEe(i){let e=[],t=Object.getPrototypeOf(i);for(;Object.prototype!==t;)e=e.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return e}function hG(i){const e=[];for(const t of OEe(i))typeof i[t]=="function"&&e.push(t);return e}function MEe(i,e){const t=r=>function(){const o=Array.prototype.slice.call(arguments,0);return e(r,o)};let n={};for(const r of i)n[r]=t(r);return n}function ml(i){return i===null?void 0:i}function cue(i,e="Unreachable"){throw new Error(e)}const kr=gi("commandService"),Qn=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new be,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.description){const s=[];for(let u of i.description.args)s.push(u.constraint);const a=i.handler;i.handler=function(u,...d){return NEe(d,s),a(u,...d)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new Tu,this._commands.set(t,n));let r=n.unshift(i),o=Kn(()=>{r();const s=this._commands.get(t);s!=null&&s.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(i,e){return Qn.registerCommand(i,(t,...n)=>t.get(kr).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return Jn.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Qn.registerCommand("noop",()=>{});function due(i){return!i||typeof i!="string"?!0:i.trim().length===0}const REe=/{(\d+)}/g;function ec(i,...e){return e.length===0?i:i.replace(REe,function(t,n){const r=parseInt(n,10);return isNaN(r)||r<0||r>=e.length?t:e[r]})}function fG(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function hc(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function PEe(i,e=" "){const t=gG(i,e);return hue(t,e)}function gG(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function hue(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let r=n,o=-1;for(;o=i.lastIndexOf(e,r-1),!(o===-1||o+t!==r);){if(o===0)return"";r=o}return i.substring(0,r)}function FEe(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function BEe(i){return i.replace(/\*/g,"")}function fue(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=hc(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function WEe(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function w9(i){return(i.global?"g":"")+(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")}function sg(i){return i.split(/\r\n|\r|\n/)}function ka(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function zi(i,e=0,t=i.length){for(let n=e;n<t;n++){const r=i.charCodeAt(n);if(r!==32&&r!==9)return i.substring(e,n)}return i.substring(e,t)}function Jf(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function yA(i,e){return i<e?-1:i>e?1:0}function pG(i,e,t=0,n=i.length,r=0,o=e.length){for(;t<n&&r<o;t++,r++){let u=i.charCodeAt(t),d=e.charCodeAt(r);if(u<d)return-1;if(u>d)return 1}const s=n-t,a=o-r;return s<a?-1:s>a?1:0}function vH(i,e){return aM(i,e,0,i.length,0,e.length)}function aM(i,e,t=0,n=i.length,r=0,o=e.length){for(;t<n&&r<o;t++,r++){let u=i.charCodeAt(t),d=e.charCodeAt(r);if(u===d)continue;if(u>=128||d>=128)return pG(i.toLowerCase(),e.toLowerCase(),t,n,r,o);Wv(u)&&(u-=32),Wv(d)&&(d-=32);const h=u-d;if(h!==0)return h}const s=n-t,a=o-r;return s<a?-1:s>a?1:0}function Wv(i){return i>=97&&i<=122}function kf(i){return i>=65&&i<=90}function JN(i,e){return i.length===e.length&&aM(i,e)===0}function mG(i,e){const t=e.length;return e.length>i.length?!1:aM(i,e,0,t)===0}function $y(i,e){let t,n=Math.min(i.length,e.length);for(t=0;t<n;t++)if(i.charCodeAt(t)!==e.charCodeAt(t))return t;return n}function TF(i,e){let t,n=Math.min(i.length,e.length);const r=i.length-1,o=e.length-1;for(t=0;t<n;t++)if(i.charCodeAt(r-t)!==e.charCodeAt(o-t))return t;return n}function Vo(i){return 55296<=i&&i<=56319}function zy(i){return 56320<=i&&i<=57343}function _G(i,e){return(i-55296<<10)+(e-56320)+65536}function F1(i,e,t){const n=i.charCodeAt(t);if(Vo(n)&&t+1<e){const r=i.charCodeAt(t+1);if(zy(r))return _G(n,r)}return n}function oy(i,e){const t=i.charCodeAt(e-1);if(zy(t)&&e>1){const n=i.charCodeAt(e-2);if(Vo(n))return _G(n,t)}return t}function NF(i,e){const t=cp.getInstance(),n=e,r=i.length,o=F1(i,r,e);e+=o>=65536?2:1;let s=t.getGraphemeBreakType(o);for(;e<r;){const a=F1(i,r,e),u=t.getGraphemeBreakType(a);if(OF(s,u))break;e+=a>=65536?2:1,s=u}return e-n}function VEe(i,e){const t=cp.getInstance(),n=e,r=oy(i,e);e-=r>=65536?2:1;let o=t.getGraphemeBreakType(r);for(;e>0;){const s=oy(i,e),a=t.getGraphemeBreakType(s);if(OF(a,o))break;e-=s>=65536?2:1,o=a}return n-e}const HEe=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function g8(i){return HEe.test(i)}const $Ee=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFF0]|\uD83E[\uDD00-\uDDFF\uDE70-\uDEF6])/;function zEe(i){return $Ee.test(i)}const UEe=/^[\t\n\r\x20-\x7E]*$/;function vG(i){return UEe.test(i)}const gue=/[\u2028\u2029]/;function pue(i){return gue.test(i)}function jEe(i){for(let e=0,t=i.length;e<t;e++)if(ag(i.charCodeAt(e)))return!0;return!1}function ag(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function AF(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const KEe=String.fromCharCode(65279);function bG(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function GEe(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function mue(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function LR(i){return cp.getInstance().getGraphemeBreakType(i)}function OF(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}class cp{constructor(){this._data=qEe()}static getInstance(){return cp._INSTANCE||(cp._INSTANCE=new cp),cp._INSTANCE}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let r=1;for(;r<=n;)if(e<t[3*r])r=2*r;else if(e>t[3*r+1])r=2*r+1;else return t[3*r+2];return 0}}cp._INSTANCE=null;function qEe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function YEe(i,e){if(i===0)return 0;const t=ZEe(i,e);if(t!==void 0)return t;const n=oy(e,i);return i-=ZP(n),i}function ZEe(i,e){let t=oy(e,i);for(i-=ZP(t);XEe(t)||t===65039||t===8419;){if(i===0)return;t=oy(e,i),i-=ZP(t)}if(AF(t)){if(i>=0){const n=oy(e,i);n===8205&&(i-=ZP(n))}return i}}function ZP(i){return i>=65536?2:1}function XEe(i){return 127995<=i&&i<=127999}const QEe=" ";class xh{static getData(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,40,10088,40,10098,40,12308,40,64830,40,65341,41,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,124,8739,124,9213,124,65512,124,1633,124,1777,124,66336,124,125127,124,120783,124,120793,124,120803,124,120813,124,120823,124,130033,124,65321,124,8544,124,8464,124,8465,124,119816,124,119868,124,119920,124,120024,124,120128,124,120180,124,120232,124,120284,124,120336,124,120388,124,120440,124,406,124,65356,124,8572,124,8467,124,119845,124,119897,124,119949,124,120001,124,120053,124,120105,124,120157,124,120209,124,120261,124,120313,124,120365,124,120417,124,120469,124,448,124,120496,124,120554,124,120612,124,120670,124,120728,124,11410,124,1030,124,1216,124,1493,124,1503,124,1575,124,126464,124,126592,124,65166,124,65165,124,1994,124,11599,124,5825,124,42226,124,93992,124,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90],"_default":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"cs":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"de":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89],"es":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"fr":[65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"it":[160,32,8211,45,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ko":[8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pl":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"pt-BR":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"qps-ploc":[160,32,8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"ru":[65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,124,1009,112,215,120],"tr":[160,32,8211,45,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hans":[65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89],"zh-hant":[8211,45,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,124,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}')}static getConfusablesForCurrentLocale(){if(!xh.map){let n=function(s){const a=new Map;for(let u=0;u<s.length;u+=2)a.set(s[u],s[u+1]);return a};const e=xh.getData();let t=LLe;(!t||!(t in e))&&(t=SLe),(!t||!(t in e))&&(t="_default");const r=n(e._common),o=n(e[t]);for(const[s,a]of o)r.set(s,a);xh.map=r}return xh.map}static isAmbiguous(e){return xh.getConfusablesForCurrentLocale().has(e)}static getPrimaryConfusable(e){return xh.getConfusablesForCurrentLocale().get(e)}static getPrimaryConfusableCodePoints(){return new Set(xh.getConfusablesForCurrentLocale().keys())}}class vp{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(vp.getRawData())),this._data}static isInvisibleCharacter(e){return vp.getData().has(e)}static get codePoints(){return vp.getData()}}vp._data=void 0;let p8=yLe||"";const Ks=new Map;Ks.set("false",!1);Ks.set("true",!0);Ks.set("isMac",qn);Ks.set("isLinux",Xa);Ks.set("isWindows",As);Ks.set("isWeb",PS);Ks.set("isMacNative",qn&&!PS);Ks.set("isEdge",p8.indexOf("Edg/")>=0);Ks.set("isFirefox",p8.indexOf("Firefox")>=0);Ks.set("isChrome",p8.indexOf("Chrome")>=0);Ks.set("isSafari",p8.indexOf("Safari")>=0);const JEe=Object.prototype.hasOwnProperty;class _t{static has(e){return v0.create(e)}static equals(e,t){return Uy.create(e,t)}static regex(e,t){return MF.create(e,t)}static not(e){return Lb.create(e)}static and(...e){return Vv.create(e,null)}static or(...e){return dp.create(e,null,!0)}static deserialize(e,t=!1){if(e)return this._deserializeOrExpression(e,t)}static _deserializeOrExpression(e,t){let n=e.split("||");return dp.create(n.map(r=>this._deserializeAndExpression(r,t)),null,!0)}static _deserializeAndExpression(e,t){let n=e.split("&&");return Vv.create(n.map(r=>this._deserializeOne(r,t)),null)}static _deserializeOne(e,t){if(e=e.trim(),e.indexOf("!=")>=0){let n=e.split("!=");return m8.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("==")>=0){let n=e.split("==");return Uy.create(n[0].trim(),this._deserializeValue(n[1],t))}if(e.indexOf("=~")>=0){let n=e.split("=~");return MF.create(n[0].trim(),this._deserializeRegexValue(n[1],t))}if(e.indexOf(" in ")>=0){let n=e.split(" in ");return CG.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const n=e.split(">=");return b8.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const n=e.split(">");return v8.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const n=e.split("<=");return w8.create(n[0].trim(),n[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const n=e.split("<");return C8.create(n[0].trim(),n[1].trim())}return/^\!\s*/.test(e)?Lb.create(e.substr(1).trim()):v0.create(e)}static _deserializeValue(e,t){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;let n=/^'([^']*)'$/.exec(e);return n?n[1].trim():e}static _deserializeRegexValue(e,t){if(due(e)){if(t)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let n=e.indexOf("/"),r=e.lastIndexOf("/");if(n===r||n<0){if(t)throw new Error(`bad regexp-value '${e}', missing /-enclosure`);return console.warn(`bad regexp-value '${e}', missing /-enclosure`),null}let o=e.slice(n+1,r),s=e[r+1]==="i"?"i":"";try{return new RegExp(o,s)}catch(a){if(t)throw new Error(`bad regexp-value '${e}', parse error: ${a}`);return console.warn(`bad regexp-value '${e}', parse error: ${a}`),null}}}function exe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function sy(i,e){return i.cmp(e)}class Pu{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return fc.INSTANCE}}Pu.INSTANCE=new Pu;class fc{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Pu.INSTANCE}}fc.INSTANCE=new fc;class v0{constructor(e,t){this.key=e,this.negated=t,this.type=2}static create(e,t=null){const n=Ks.get(e);return typeof n=="boolean"?n?fc.INSTANCE:Pu.INSTANCE:new v0(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:vue(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ks.get(this.key);return typeof e=="boolean"?e?fc.INSTANCE:Pu.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Lb.create(this.key,this)),this.negated}}class Uy{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}static create(e,t,n=null){if(typeof t=="boolean")return t?v0.create(e,n):Lb.create(e,n);const r=Ks.get(e);return typeof r=="boolean"?t===(r?"true":"false")?fc.INSTANCE:Pu.INSTANCE:new Uy(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ks.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?fc.INSTANCE:Pu.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=m8.create(this.key,this.value,this)),this.negated}}class CG{constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}static create(e,t){return new CG(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.indexOf(n)>=0:typeof n=="string"&&typeof t=="object"&&t!==null?JEe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=wG.create(this)),this.negated}}class wG{constructor(e){this._actual=e,this.type=11}static create(e){return new wG(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}class m8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}static create(e,t,n=null){if(typeof t=="boolean")return t?Lb.create(e,n):v0.create(e,n);const r=Ks.get(e);return typeof r=="boolean"?t===(r?"true":"false")?Pu.INSTANCE:fc.INSTANCE:new m8(e,t,n)}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Ks.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Pu.INSTANCE:fc.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Uy.create(this.key,this.value,this)),this.negated}}class Lb{constructor(e,t){this.key=e,this.negated=t,this.type=3}static create(e,t=null){const n=Ks.get(e);return typeof n=="boolean"?n?Pu.INSTANCE:fc.INSTANCE:new Lb(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:vue(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Ks.get(this.key);return typeof e=="boolean"?e?Pu.INSTANCE:fc.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=v0.create(this.key,this)),this.negated}}function _8(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Pu.INSTANCE}class v8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}static create(e,t,n=null){return _8(t,r=>new v8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=w8.create(this.key,this.value,this)),this.negated}}class b8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}static create(e,t,n=null){return _8(t,r=>new b8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=C8.create(this.key,this.value,this)),this.negated}}class C8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}static create(e,t,n=null){return _8(t,r=>new C8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=b8.create(this.key,this.value,this)),this.negated}}class w8{constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}static create(e,t,n=null){return _8(t,r=>new w8(e,r,n))}cmp(e){return e.type!==this.type?this.type-e.type:vC(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=v8.create(this.key,this.value,this)),this.negated}}class MF{constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}static create(e,t){return new MF(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=yG.create(this)),this.negated}}class yG{constructor(e){this._actual=e,this.type=8}static create(e){return new yG(e)}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}negate(){return this._actual}}function _ue(i){let e=null;for(let t=0,n=i.length;t<n;t++){const r=i[t].substituteConstants();if(i[t]!==r&&e===null){e=[];for(let o=0;o<t;o++)e[o]=i[o]}e!==null&&(e[t]=r)}return e===null?i:e}class Vv{constructor(e,t){this.expr=e,this.negated=t,this.type=6}static create(e,t){return Vv._normalizeArr(e,t)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=sy(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=_ue(this.expr);return e===this.expr?this:Vv.create(e,this.negated)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t){const n=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return Pu.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&r)return fc.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort(sy);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const s=n.pop(),a=n.length===0,u=dp.create(o.expr.map(d=>Vv.create([d,s],null)),null,a);u&&(n.push(u),n.sort(sy))}return n.length===1?n[0]:new Vv(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(let t of this.expr)e.push(t.negate());this.negated=dp.create(e,this,!0)}return this.negated}}class dp{constructor(e,t){this.expr=e,this.negated=t,this.type=9}static create(e,t,n){return dp._normalizeArr(e,t,n)}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const r=sy(this.expr[t],e.expr[t]);if(r!==0)return r}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=_ue(this.expr);return e===this.expr?this:dp.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let r=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){const u=e[s];if(u){if(u.type===0){o=!0;continue}if(u.type===1)return fc.INSTANCE;if(u.type===9){r=r.concat(u.expr);continue}r.push(u)}}if(r.length===0&&o)return Pu.INSTANCE;r.sort(sy)}if(r.length!==0){if(r.length===1)return r[0];for(let s=1;s<r.length;s++)r[s-1].equals(r[s])&&(r.splice(s,1),s--);if(r.length===1)return r[0];if(n){for(let s=0;s<r.length;s++)for(let a=s+1;a<r.length;a++)bue(r[s],r[a])&&(r.splice(a,1),a--);if(r.length===1)return r[0]}return new dp(r,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(let t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),r=[];for(const s of RF(t))for(const a of RF(n))r.push(Vv.create([s,a],null));const o=e.length===0;e.unshift(dp.create(r,null,o))}this.negated=e[0]}return this.negated}}class Dt extends v0{constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?Dt._info.push(Object.assign(Object.assign({},n),{key:e})):n!==!0&&Dt._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return Dt._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Uy.create(this.key,e)}}Dt._info=[];const dn=gi("contextKeyService"),txe="setContext";function vue(i,e){return i<e?-1:i>e?1:0}function vC(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function bue(i,e){if(e.type===6&&i.type!==9&&i.type!==6){for(const r of e.expr)if(i.equals(r))return!0}const t=i.negate(),n=RF(t).concat(RF(e));n.sort(sy);for(let r=0;r<n.length;r++){const s=n[r].negate();for(let a=r+1;a<n.length;a++){const u=n[a];if(s.equals(u))return!0}}return!1}function RF(i){return i.type===9?i.expr:[i]}function XP(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}class nxe{constructor(){this.data=new Map}add(e,t){XP(dc(e)),XP(Ga(t)),XP(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const Zr=new nxe;var Jc;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(Jc||(Jc={}));const Er=gi("themeService");var bH;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(bH||(bH={}));function Lr(i){return{id:i}}var pr;(function(i){function e(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(typeof u.color>"u"||bH.isThemeColor(u.color))}i.isThemeIcon=e;const t=new RegExp(`^\\$\\((${ja.iconNameExpression}(?:${ja.iconModifierExpression})?)\\)$`);function n(u){const d=t.exec(u);if(!d)return;let[,h]=d;return{id:h}}i.fromString=n;function r(u,d){let h=u.id;const f=h.lastIndexOf("~");return f!==-1&&(h=h.substring(0,f)),d&&(h=`${h}~${d}`),{id:h}}i.modify=r;function o(u){const d=u.id.lastIndexOf("~");if(d!==-1)return u.id.substring(d+1)}i.getModifier=o;function s(u,d){var h,f;return u.id===d.id&&((h=u.color)===null||h===void 0?void 0:h.id)===((f=d.color)===null||f===void 0?void 0:f.id)}i.isEqual=s;function a(u,d){return{id:u.id,color:d?Lr(d):void 0}}i.asThemeIcon=a,i.asClassNameArray=ja.asClassNameArray,i.asClassName=ja.asClassName,i.asCSSSelector=ja.asCSSSelector})(pr||(pr={}));function PF(i){switch(i){case Jc.DARK:return"vs-dark";case Jc.HIGH_CONTRAST:return"hc-black";default:return"vs"}}const Cue={ThemingContribution:"base.contributions.theming"};class ixe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new be}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Kn(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}let wue=new ixe;Zr.add(Cue.ThemingContribution,wue);function hr(i){return wue.onColorThemeChange(i)}class rxe extends Oe{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var oxe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},JQ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function e2(i){return i.command!==void 0}class Mt{constructor(e){this.id=Mt._idPool++,this._debugName=e}}Mt._idPool=0;Mt.CommandPalette=new Mt("CommandPalette");Mt.EditorContext=new Mt("EditorContext");Mt.SimpleEditorContext=new Mt("SimpleEditorContext");Mt.EditorContextCopy=new Mt("EditorContextCopy");Mt.EditorContextPeek=new Mt("EditorContextPeek");Mt.MenubarEditMenu=new Mt("MenubarEditMenu");Mt.MenubarCopy=new Mt("MenubarCopy");Mt.MenubarGoMenu=new Mt("MenubarGoMenu");Mt.MenubarSelectionMenu=new Mt("MenubarSelectionMenu");Mt.InlineCompletionsActions=new Mt("InlineCompletionsActions");const bC=gi("menuService"),ia=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new be,this.onDidChangeMenu=this._onDidChangeMenu.event,this._commandPaletteChangeEvent={has:i=>i===Mt.CommandPalette}}addCommand(i){return this.addCommands(Jn.single(i))}addCommands(i){for(const e of i)this._commands.set(e.id,e);return this._onDidChangeMenu.fire(this._commandPaletteChangeEvent),Kn(()=>{let e=!1;for(const t of i)e=this._commands.delete(t.id)||e;e&&this._onDidChangeMenu.fire(this._commandPaletteChangeEvent)})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){return this.appendMenuItems(Jn.single({id:i,item:e}))}appendMenuItems(i){const e=new Set,t=new Tu;for(const{id:n,item:r}of i){let o=this._menuItems.get(n);o||(o=new Tu,this._menuItems.set(n,o)),t.push(o.push(r)),e.add(n)}return this._onDidChangeMenu.fire(e),Kn(()=>{if(t.size>0){for(let n of t)n();this._onDidChangeMenu.fire(e),t.clear()}})}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Mt.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)e2(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class SG extends h8{constructor(e,t,n,r){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,[],"submenu"),this.item=e,this._menuService=t,this._contextKeyService=n,this._options=r}get actions(){const e=[],t=this._menuService.createMenu(this.item.submenu,this._contextKeyService),n=t.getActions(this._options);t.dispose();for(const[,r]of n)r.length>0&&(e.push(...r),e.push(new Qc));return e.length&&e.pop(),e}}let b0=class yue{constructor(e,t,n,r,o){var s,a;if(this._commandService=o,this.id=e.id,this.label=n!=null&&n.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value,this.tooltip=(a=typeof e.tooltip=="string"?e.tooltip:(s=e.tooltip)===null||s===void 0?void 0:s.value)!==null&&a!==void 0?a:"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}this.item=e,this.alt=t?new yue(t,void 0,n,r,o):void 0,this._options=n,pr.isThemeIcon(e.icon)&&(this.class=ja.asClassName(e.icon))}dispose(){}run(...e){var t,n;let r=[];return!((t=this._options)===null||t===void 0)&&t.arg&&(r=[...r,this._options.arg]),!((n=this._options)===null||n===void 0)&&n.shouldForwardArgs&&(r=[...r,...e]),this._commandService.executeCommand(this.id,...r)}};b0=oxe([JQ(3,dn),JQ(4,kr)],b0);class FF{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(qu===1){if(e&&e.win)return e.win}else if(qu===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=FF.bindToCurrentPlatform(e);if(t&&t.primary){const n=aH(t.primary,qu);n&&this._registerDefaultKeybinding(n,e.id,e.args,e.weight,0,e.when)}if(t&&Array.isArray(t.secondary))for(let n=0,r=t.secondary.length;n<r;n++){const o=t.secondary[n],s=aH(o,qu);s&&this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-n-1,e.when)}}registerCommandAndKeybindingRule(e){this.registerKeybindingRule(e),Qn.registerCommand(e)}static _mightProduceChar(e){return e>=21&&e<=30||e>=31&&e<=56?!0:e===80||e===81||e===82||e===83||e===84||e===85||e===86||e===110||e===111||e===87||e===88||e===89||e===90||e===91||e===92}_assertNoCtrlAlt(e,t){e.ctrlKey&&e.altKey&&!e.metaKey&&FF._mightProduceChar(e.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",e," for ",t)}_registerDefaultKeybinding(e,t,n,r,o,s){qu===1&&this._assertNoCtrlAlt(e.parts[0],t),this._coreKeybindings.push({keybinding:e.parts,command:t,commandArgs:n,when:s,weight1:r,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(axe)),this._cachedMergedKeybindings.slice(0)}}const Os=new FF,sxe={EditorModes:"platform.keybindingsRegistry"};Zr.add(sxe.EditorModes,Os);function axe(i,e){return i.weight1!==e.weight1?i.weight1-e.weight1:i.command<e.command?-1:i.command>e.command?1:i.weight2-e.weight2}const yg=gi("telemetryService"),Sg=gi("logService");var Fh;(function(i){i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.Off=6]="Off"})(Fh||(Fh={}));const Sue=Fh.Info;class lxe extends Oe{constructor(){super(...arguments),this.level=Sue,this._onDidChangeLogLevel=this._register(new be)}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}}class uxe extends lxe{constructor(e=Sue){super(),this.setLevel(e)}trace(e,...t){this.getLevel()<=Fh.Trace&&console.log("%cTRACE","color: #888",e,...t)}debug(e,...t){this.getLevel()<=Fh.Debug&&console.log("%cDEBUG","background: #eee; color: #888",e,...t)}info(e,...t){this.getLevel()<=Fh.Info&&console.log("%c INFO","color: #33f",e,...t)}error(e,...t){this.getLevel()<=Fh.Error&&console.log("%c  ERR","color: #f33",e,...t)}dispose(){}}class cxe extends Oe{constructor(e){super(),this.logger=e,this._register(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}error(e,...t){this.logger.error(e,...t)}}class y8{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this._description=e.description}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=_t.and(n,this.precondition):n=this.precondition);const r={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Os.registerKeybindingRule(r)}}Qn.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),description:this._description})}_registerMenuItem(e){ia.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class FS extends y8{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n){return this._implementations.push({priority:e,name:t,implementation:n}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){const n=e.get(Sg);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){const o=r.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Lue extends y8{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Ps extends y8{static bindToContribution(e){return class extends Ps{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,r,o){e(r)&&this._callback(e(r),o)}}}runCommand(e,t){const n=e.get(ki),r=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(r)return r.invokeWithinContext(o=>{if(o.get(dn).contextMatchesRules(ml(this.precondition)))return this.runEditorCommand(o,r,t)})}}let Et=class Eue extends Ps{constructor(e){super(Eue.convertOptions(e)),this.label=e.label,this.alias=e.alias}static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(r){return r.menuId||(r.menuId=Mt.EditorContext),r.title||(r.title=e.label),r.when=_t.and(e.precondition,r.when),r}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(yg).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};class xue extends Et{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,r)=>r[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const r of this._implementations){const o=r[1](e,t,n);if(o)return typeof o=="boolean"?void 0:o}}}function Lg(i,e){Qn.registerCommand(i,function(t,...n){const[r,o]=n;Gi(sn.isUri(r)),Gi(Le.isIPosition(o));const s=t.get(Io).getModel(r);if(s){const a=Le.lift(o);return e(s,a,...n.slice(2))}return t.get(Qa).createModelReference(r).then(a=>new Promise((u,d)=>{try{const h=e(a.object.textEditorModel,Le.lift(o),n.slice(2));u(h)}catch(h){d(h)}}).finally(()=>{a.dispose()}))})}function dxe(i,e){Qn.registerCommand(i,function(t,...n){const[r]=n;Gi(sn.isUri(r));const o=t.get(Io).getModel(r);return o?e(o,...n.slice(1)):t.get(Qa).createModelReference(r).then(s=>new Promise((a,u)=>{try{const d=e(s.object.textEditorModel,n.slice(1));a(d)}catch(d){u(d)}}).finally(()=>{s.dispose()}))})}function nt(i){return Yu.INSTANCE.registerEditorCommand(i),i}function it(i){const e=new i;return Yu.INSTANCE.registerEditorAction(e),e}function Due(i){return Yu.INSTANCE.registerEditorAction(i),i}function Iue(i){Yu.INSTANCE.registerEditorAction(i)}function Ti(i,e){Yu.INSTANCE.registerEditorContribution(i,e)}var ay;(function(i){function e(s){return Yu.INSTANCE.getEditorCommand(s)}i.getEditorCommand=e;function t(){return Yu.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return Yu.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function r(s){return Yu.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}i.getSomeEditorContributions=r;function o(){return Yu.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=o})(ay||(ay={}));const hxe={EditorCommonContributions:"editor.contributions"};class Yu{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t){this.editorContributions.push({id:e,ctor:t})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions.slice(0)}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}Yu.INSTANCE=new Yu;Zr.add(hxe.EditorCommonContributions,Yu.INSTANCE);function lM(i){return i.register(),i}const kue=lM(new FS({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Mt.MenubarEditMenu,group:"1_do",title:C({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Mt.CommandPalette,group:"",title:C("undo","Undo"),order:1}]}));lM(new Lue(kue,{id:"default:undo",precondition:void 0}));const Tue=lM(new FS({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Mt.MenubarEditMenu,group:"1_do",title:C({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Mt.CommandPalette,group:"",title:C("redo","Redo"),order:1}]}));lM(new Lue(Tue,{id:"default:redo",precondition:void 0}));const fxe=lM(new FS({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Mt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Mt.CommandPalette,group:"",title:C("selectAll","Select All"),order:1}]}));var gxe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},pxe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SA=class{constructor(e,t){}dispose(){}};SA.ID="editor.contrib.markerDecorations";SA=gxe([pxe(1,dG)],SA);Ti(SA.ID,SA);const Nue="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function mxe(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Nue)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const Aue=mxe();function BF(i){let e=Aue;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const _xe={maxLen:1e3,windowSize:15,timeBudget:150};function WF(i,e,t,n,r=_xe){if(t.length>r.maxLen){let d=i-r.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,i+r.maxLen/2),WF(i,e,t,n,r)}const o=Date.now(),s=i-1-n;let a=-1,u=null;for(let d=1;!(Date.now()-o>=r.timeBudget);d++){const h=s-r.windowSize*d;e.lastIndex=Math.max(0,h);const f=vxe(e,t,s,a);if(!f&&u||(u=f,h<=0))break;a=h}if(u){let d={word:u[0],startColumn:n+1+u.index,endColumn:n+1+u.index+u[0].length};return e.lastIndex=0,d}return null}function vxe(i,e,t,n){let r;for(;r=i.exec(e);){const o=r.index||0;if(o<=t&&i.lastIndex>=t)return r;if(n>0&&o>n)return null}return null}function zu(i,e=0){return i[i.length-(1+e)]}function bxe(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function oc(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,r=i.length;n<r;n++)if(!t(i[n],e[n]))return!1;return!0}function LG(i,e,t){let n=0,r=i.length-1;for(;n<=r;){const o=(n+r)/2|0,s=t(i[o],e);if(s<0)n=o+1;else if(s>0)r=o-1;else return o}return-(n+1)}function Oue(i,e){let t=0,n=i.length;if(n===0)return 0;for(;t<n;){const r=Math.floor((t+n)/2);e(i[r])?n=r:t=r+1}return t}function CH(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],r=[],o=[],s=[];for(let a of e){const u=t(a,n);u<0?r.push(a):u>0?o.push(a):s.push(a)}return i<r.length?CH(i,r,t):i<r.length+s.length?s[0]:CH(i-(r.length+s.length),o,t)}function eJ(i,e){const t=[];let n;for(const r of i.slice(0).sort(e))!n||e(n[0],r)!==0?(n=[r],t.push(n)):n.push(r);return t}function BS(i){return i.filter(e=>!!e)}function Mue(i){return!Array.isArray(i)||i.length===0}function vl(i){return Array.isArray(i)&&i.length>0}function Eb(i,e=t=>t){const t=new Set;return i.filter(n=>{const r=e(n);return t.has(r)?!1:(t.add(r),!0)})}function Cxe(i,e){const t=wxe(i,e);if(t!==-1)return i[t]}function wxe(i,e){for(let t=i.length-1;t>=0;t--){const n=i[t];if(e(n))return t}return-1}function wH(i,e){return i.length>0?i[0]:e}function Rue(i){return[].concat(...i)}function xa(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let r=t;r<e;r++)n.push(r);else for(let r=t;r>e;r--)n.push(r);return n}function LA(i,e,t){const n=i.slice(0,e),r=i.slice(e);return n.concat(t,r)}function y9(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function ER(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function EG(i){return Array.isArray(i)?i:[i]}function yxe(i,e,t){const n=Pue(i,e),r=i.length,o=t.length;i.length=r+o;for(let s=r-1;s>=n;s--)i[s+o]=i[s];for(let s=0;s<o;s++)i[s+n]=t[s]}function tJ(i,e,t,n){const r=Pue(i,e),o=i.splice(r,t);return yxe(i,r,n),o}function Pue(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}class ly{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}function Qg(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.keys(i).forEach(t=>{i[t]&&typeof i[t]=="object"?e[t]=Qg(i[t]):e[t]=i[t]}),e}function Sxe(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Fue.call(t,n)){const r=t[n];typeof r=="object"&&!Object.isFrozen(r)&&e.push(r)}}return i}const Fue=Object.prototype.hasOwnProperty;function Lxe(i,e){return yH(i,e,new Set)}function yH(i,e,t){if(xu(i))return i;const n=e(i);if(typeof n<"u")return n;if(lue(i)){const r=[];for(const o of i)r.push(yH(o,e,t));return r}if(Ga(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const r={};for(let o in i)Fue.call(i,o)&&(r[o]=yH(i[o],e,t));return t.delete(i),r}return i}function Eg(i,e,t=!0){return Ga(i)?(Ga(e)&&Object.keys(e).forEach(n=>{n in i?t&&(Ga(i[n])&&Ga(e[n])?Eg(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function ed(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!ed(i[t],e[t]))return!1}else{const r=[];for(n in i)r.push(n);r.sort();const o=[];for(n in e)o.push(n);if(o.sort(),!ed(r,o))return!1;for(t=0;t<r.length;t++)if(!ed(i[r[t]],e[r[t]]))return!1}return!0}function gf(i,e,t){const n=e(i);return typeof n>"u"?t:n}const yv=8;class Bue{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Exe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Wue{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class jo{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return S8(e,t)}compute(e,t,n){return n}}class E2{constructor(e,t){this.newValue=e,this.didChange=t}}function S8(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new E2(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&oc(i,e);return new E2(e,n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){const r=S8(i[n],e[n]);r.didChange&&(i[n]=r.newValue,t=!0)}return new E2(i,t)}class WS{constructor(e,t=null){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0,this.deps=t}applyUpdate(e,t){return S8(e,t)}validate(e){return this.defaultValue}}class CC{constructor(e,t,n,r){this.id=e,this.name=t,this.defaultValue=n,this.schema=r}applyUpdate(e,t){return S8(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function Yt(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class Gn extends CC{constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=n),super(e,t,n,r)}validate(e){return Yt(e,this.defaultValue)}}function SH(i,e,t,n){if(typeof i>"u")return e;let r=parseInt(i,10);return isNaN(r)?e:(r=Math.max(t,r),r=Math.min(n,r),r|0)}class br extends CC{constructor(e,t,n,r,o,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=r,s.maximum=o),super(e,t,n,s),this.minimum=r,this.maximum=o}static clampedInt(e,t,n,r){return SH(e,t,n,r)}validate(e){return br.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class qf extends CC{constructor(e,t,n,r,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=r}static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}validate(e){return this.validationFn(qf.float(e,this.defaultValue))}}class hl extends CC{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,r=void 0){typeof r<"u"&&(r.type="string",r.default=n),super(e,t,n,r)}validate(e){return hl.string(e,this.defaultValue)}}function Ua(i,e,t){return typeof i!="string"||t.indexOf(i)===-1?e:i}class Lo extends CC{constructor(e,t,n,r,o=void 0){typeof o<"u"&&(o.type="string",o.enum=r,o.default=n),super(e,t,n,o),this._allowedValues=r}validate(e){return Ua(e,this.defaultValue,this._allowedValues)}}class SN extends jo{constructor(e,t,n,r,o,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=r),super(e,t,n,a),this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function xxe(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Dxe extends jo{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[C("accessibilitySupport.auto","The editor will use platform APIs to detect when a Screen Reader is attached."),C("accessibilitySupport.on","The editor will be permanently optimized for usage with a Screen Reader. Word wrapping will be disabled."),C("accessibilitySupport.off","The editor will never be optimized for usage with a Screen Reader.")],default:"auto",description:C("accessibilitySupport","Controls whether the editor should run in a mode where it is optimized for screen readers. Setting to on will disable word wrapping.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Ixe extends jo{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(19,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:C("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:C("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Yt(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Yt(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function kxe(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ls;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(ls||(ls={}));function Txe(i){switch(i){case"line":return ls.Line;case"block":return ls.Block;case"underline":return ls.Underline;case"line-thin":return ls.LineThin;case"block-outline":return ls.BlockOutline;case"underline-thin":return ls.UnderlineThin}}class Nxe extends WS{constructor(){super(127,[65,33])}compute(e,t,n){const r=["monaco-editor"];return t.get(33)&&r.push(t.get(33)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(65)==="default"?r.push("mouse-default"):t.get(65)==="copy"&&r.push("mouse-copy"),t.get(99)&&r.push("showUnused"),t.get(125)&&r.push("showDeprecated"),r.join(" ")}}class Axe extends Gn{constructor(){super(32,"emptySelectionClipboard",!0,{description:C("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class Oxe extends jo{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(35,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:C("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[C("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),C("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),C("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:C("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[C("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),C("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),C("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:C("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:C("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:qn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:C("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:C("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Yt(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Ua(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Ua(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Yt(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Yt(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Yt(t.loop,this.defaultValue.loop)}}}class Du extends jo{constructor(){super(44,"fontLigatures",Du.OFF,{anyOf:[{type:"boolean",description:C("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:C("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:C("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Du.OFF:e==="true"?Du.ON:e:e?Du.ON:Du.OFF}}Du.OFF='"liga" off, "calt" off';Du.ON='"liga" on, "calt" on';class Mxe extends WS{constructor(){super(43)}compute(e,t,n){return e.fontInfo}}class Rxe extends CC{constructor(){super(45,"fontSize",js.fontSize,{type:"number",minimum:6,maximum:100,default:js.fontSize,description:C("fontSize","Controls the font size in pixels.")})}validate(e){let t=qf.float(e,this.defaultValue);return t===0?js.fontSize:qf.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class Rf extends jo{constructor(){super(46,"fontWeight",js.fontWeight,{anyOf:[{type:"number",minimum:Rf.MINIMUM_VALUE,maximum:Rf.MAXIMUM_VALUE,errorMessage:C("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Rf.SUGGESTION_VALUES}],default:js.fontWeight,description:C("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(br.clampedInt(e,js.fontWeight,Rf.MINIMUM_VALUE,Rf.MAXIMUM_VALUE))}}Rf.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];Rf.MINIMUM_VALUE=1;Rf.MAXIMUM_VALUE=1e3;class Pxe extends jo{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[C("editor.gotoLocation.multiple.peek","Show peek view of the results (default)"),C("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a peek view"),C("editor.gotoLocation.multiple.goto","Go to the primary result and enable peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(50,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:C("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":Object.assign({description:C("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleTypeDefinitions":Object.assign({description:C("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleDeclarations":Object.assign({description:C("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleImplementations":Object.assign({description:C("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},t),"editor.gotoLocation.multipleReferences":Object.assign({description:C("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist.")},t),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:C("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:C("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:C("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:C("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:C("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,r,o,s;if(!e||typeof e!="object")return this.defaultValue;const a=e;return{multiple:Ua(a.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(t=a.multipleDefinitions)!==null&&t!==void 0?t:Ua(a.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(n=a.multipleTypeDefinitions)!==null&&n!==void 0?n:Ua(a.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(r=a.multipleDeclarations)!==null&&r!==void 0?r:Ua(a.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(o=a.multipleImplementations)!==null&&o!==void 0?o:Ua(a.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(s=a.multipleReferences)!==null&&s!==void 0?s:Ua(a.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:hl.string(a.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:hl.string(a.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:hl.string(a.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:hl.string(a.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:hl.string(a.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class Fxe extends jo{constructor(){const e={enabled:!0,delay:300,sticky:!0,above:!0};super(52,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:C("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,description:C("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:C("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.above":{type:"boolean",default:e.above,description:C("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Yt(t.enabled,this.defaultValue.enabled),delay:br.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Yt(t.sticky,this.defaultValue.sticky),above:Yt(t.above,this.defaultValue.above)}}}class uy extends WS{constructor(){super(130,[49,57,37,64,91,59,60,93,117,120,121,122,2])}compute(e,t,n){return uy.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=e.scrollBeyondLastLine?t-1:0,r=(e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeyondLastLine:n,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,r=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*r),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:r};const s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,u=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,f=e.minimap.renderCharacters;let p=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const m=e.minimap.maxColumn,v=e.minimap.size,b=e.minimap.side,L=e.verticalScrollbarWidth,S=e.viewLineCount,y=e.remainingWidth,E=e.isViewportWrapping,A=f?2:3;let N=Math.floor(o*r);const V=N/o;let R=!1,M=!1,K=A*p,X=p/o,$=1;if(v==="fill"||v==="fit"){const{typicalViewportLineCount:Z,extraLinesBeyondLastLine:z,desiredRatio:O,minimapLineCount:Y}=uy.computeContainedMinimapLineCount({viewLineCount:S,scrollBeyondLastLine:h,height:r,lineHeight:u,pixelRatio:o});if(S/Y>1)R=!0,M=!0,p=1,K=1,X=p/o;else{let ne=!1,we=p+1;if(v==="fit"){const Ie=Math.ceil((S+z)*K);E&&a&&y<=t.stableFitRemainingWidth?(ne=!0,we=t.stableFitMaxMinimapScale):ne=Ie>N}if(v==="fill"||ne){R=!0;const Ie=p;K=Math.min(u*o,Math.max(1,Math.floor(1/O))),E&&a&&y<=t.stableFitRemainingWidth&&(we=t.stableFitMaxMinimapScale),p=Math.min(we,Math.max(1,Math.floor(K/A))),p>Ie&&($=Math.min(2,p/Ie)),X=p/o/$,N=Math.ceil(Math.max(Z,S+z)*K),E?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=y,t.stableFitMaxMinimapScale=p):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const D=Math.floor(m*X),T=Math.min(D,Math.max(0,Math.floor((y-L-2)*X/(d+X)))+yv);let F=Math.floor(o*T);const B=F/o;F=Math.floor(F*$);const U=f?1:2,G=b==="left"?0:n-T-L;return{renderMinimap:U,minimapLeft:G,minimapWidth:T,minimapHeightIsEditorHeight:R,minimapIsSampling:M,minimapScale:p,minimapLineHeight:K,minimapCanvasInnerWidth:F,minimapCanvasInnerHeight:N,minimapCanvasOuterWidth:B,minimapCanvasOuterHeight:V}}static computeLayout(e,t){const n=t.outerWidth|0,r=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,u=t.maxDigitWidth,d=t.pixelRatio,h=t.viewLineCount,f=e.get(122),p=f==="inherit"?e.get(121):f,m=p==="inherit"?e.get(117):p,v=e.get(120),b=e.get(2),L=t.isDominatedByLongLines,S=e.get(49),y=e.get(59).renderType!==0,E=e.get(60),A=e.get(93),N=e.get(64),V=e.get(91),R=V.verticalScrollbarSize,M=V.verticalHasArrows,K=V.arrowSize,X=V.horizontalScrollbarSize,$=e.get(57),D=e.get(37);let T;if(typeof $=="string"&&/^\d+(\.\d+)?ch$/.test($)){const At=parseFloat($.substr(0,$.length-2));T=br.clampedInt(At*a,0,0,1e3)}else T=br.clampedInt($,0,0,1e3);D&&(T+=16);let F=0;if(y){const At=Math.max(s,E);F=Math.round(At*u)}let B=0;S&&(B=o);let U=0,G=U+B,Z=G+F,z=Z+T;const O=n-B-F-T;let Y=!1,fe=!1,ne=-1;b!==2&&(p==="inherit"&&L?(Y=!0,fe=!0):m==="on"||m==="bounded"?fe=!0:m==="wordWrapColumn"&&(ne=v));const we=uy._computeMinimapLayout({outerWidth:n,outerHeight:r,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:A,minimap:N,verticalScrollbarWidth:R,viewLineCount:h,remainingWidth:O,isViewportWrapping:fe},t.memory||new Wue);we.renderMinimap!==0&&we.minimapLeft===0&&(U+=we.minimapWidth,G+=we.minimapWidth,Z+=we.minimapWidth,z+=we.minimapWidth);const Ie=O-we.minimapWidth,je=Math.max(1,Math.floor((Ie-R-2)/a)),dt=M?K:0;return fe&&(ne=Math.max(1,je),m==="bounded"&&(ne=Math.min(ne,v))),{width:n,height:r,glyphMarginLeft:U,glyphMarginWidth:B,lineNumbersLeft:G,lineNumbersWidth:F,decorationsLeft:Z,decorationsWidth:T,contentLeft:z,contentWidth:Ie,minimap:we,viewportColumn:je,isWordWrapMinified:Y,isViewportWrapping:fe,wrappingColumn:ne,verticalScrollbarWidth:R,horizontalScrollbarHeight:X,overviewRuler:{top:dt,width:R,height:r-2*dt,right:0}}}}class Bxe extends jo{constructor(){const e={enabled:!0};super(56,"lightbulb",e,{"editor.lightbulb.enabled":{type:"boolean",default:e.enabled,description:C("codeActions","Enables the code action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Yt(e.enabled,this.defaultValue.enabled)}}}class Wxe extends jo{constructor(){const e={enabled:!0,fontSize:0,fontFamily:""};super(126,"inlayHints",e,{"editor.inlayHints.enabled":{type:"boolean",default:e.enabled,description:C("inlayHints.enable","Enables the inlay hints in the editor.")},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:C("inlayHints.fontSize","Controls font size of inlay hints in the editor. A default of 90% of `#editor.fontSize#` is used when the configured value is less than `5` or greater than the editor font size.")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:C("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the `#editor.fontFamily#` is used.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Yt(t.enabled,this.defaultValue.enabled),fontSize:br.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:hl.string(t.fontFamily,this.defaultValue.fontFamily)}}}class Vxe extends qf{constructor(){super(58,"lineHeight",js.lineHeight,e=>qf.clamp(e,0,150),{markdownDescription:C("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Hxe extends jo{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",renderCharacters:!0,maxColumn:120,scale:1};super(64,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:C("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[C("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),C("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),C("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:C("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:C("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:C("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:C("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:C("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:C("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Yt(t.enabled,this.defaultValue.enabled),size:Ua(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ua(t.side,this.defaultValue.side,["right","left"]),showSlider:Ua(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Yt(t.renderCharacters,this.defaultValue.renderCharacters),scale:br.clampedInt(t.scale,1,1,3),maxColumn:br.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}function $xe(i){return i==="ctrlCmd"?qn?"metaKey":"ctrlKey":"altKey"}class zxe extends jo{constructor(){super(74,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:C("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:br.clampedInt(t.top,0,0,1e3),bottom:br.clampedInt(t.bottom,0,0,1e3)}}}class Uxe extends jo{constructor(){const e={enabled:!0,cycle:!1};super(75,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:C("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:C("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Yt(t.enabled,this.defaultValue.enabled),cycle:Yt(t.cycle,this.defaultValue.cycle)}}}class jxe extends WS{constructor(){super(128)}compute(e,t,n){return e.pixelRatio}}class Kxe extends jo{constructor(){const e={other:!0,comments:!1,strings:!1};super(78,"quickSuggestions",e,{anyOf:[{type:"boolean"},{type:"object",properties:{strings:{type:"boolean",default:e.strings,description:C("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{type:"boolean",default:e.comments,description:C("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{type:"boolean",default:e.other,description:C("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}}}],default:e,description:C("quickSuggestions","Controls whether suggestions should automatically show up while typing.")}),this.defaultValue=e}validate(e){if(typeof e=="boolean")return e;if(e&&typeof e=="object"){const t=e,n={other:Yt(t.other,this.defaultValue.other),comments:Yt(t.comments,this.defaultValue.comments),strings:Yt(t.strings,this.defaultValue.strings)};return n.other&&n.comments&&n.strings?!0:!n.other&&!n.comments&&!n.strings?!1:n}return this.defaultValue}}class Gxe extends jo{constructor(){super(59,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[C("lineNumbers.off","Line numbers are not rendered."),C("lineNumbers.on","Line numbers are rendered as absolute number."),C("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),C("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:C("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function xG(i){const e=i.get(86);return e==="editable"?i.get(80):e!=="on"}class qxe extends jo{constructor(){const e=[],t={type:"number",description:C("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(90,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:C("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:C("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:br.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const r=n;t.push({column:br.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((n,r)=>n.column-r.column),t}return this.defaultValue}}function nJ(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let Yxe=class extends jo{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1};super(91,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),C("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),C("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[C("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),C("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),C("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:C("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:C("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:C("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:C("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=br.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=br.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:br.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:nJ(t.vertical,this.defaultValue.vertical),horizontal:nJ(t.horizontal,this.defaultValue.horizontal),useShadows:Yt(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Yt(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Yt(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Yt(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Yt(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:br.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:r,verticalSliderSize:br.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Yt(t.scrollByPage,this.defaultValue.scrollByPage)}}};const Lf="inUntrustedWorkspace",Pf={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments"};class Zxe extends jo{constructor(){const e={nonBasicASCII:Lf,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Lf,allowedCharacters:{}};super(112,"unicodeHighlight",e,{[Pf.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Lf],default:e.nonBasicASCII,description:C("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Pf.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:C("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Pf.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:C("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Pf.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Lf],default:e.includeComments,description:C("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to unicode highlighting.")},[Pf.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:C("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&(ed(e.allowedCharacters,t.allowedCharacters)||(e=Object.assign(Object.assign({},e),{allowedCharacters:t.allowedCharacters}),n=!0));const r=super.applyUpdate(e,t);return n?new E2(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:VF(t.nonBasicASCII,Lf,[!0,!1,Lf]),invisibleCharacters:Yt(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Yt(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:VF(t.includeComments,Lf,[!0,!1,Lf]),allowedCharacters:this.validateAllowedCharacters(e.allowedCharacters,this.defaultValue.allowedCharacters)}}validateAllowedCharacters(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[r,o]of Object.entries(e))o===!0&&(n[r]=!0);return n}}class Xxe extends jo{constructor(){const e={enabled:!0,mode:"subwordSmart"};super(54,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:C("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Yt(t.enabled,this.defaultValue.enabled),mode:Ua(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"])}}}class Qxe extends jo{constructor(){const e={enabled:Qs.bracketPairColorizationOptions.enabled};super(12,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,description:C("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use 'workbench.colorCustomizations' to override the bracket highlight colors.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Yt(e.enabled,this.defaultValue.enabled)}}}class Jxe extends jo{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(13,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairs.true","Enables bracket pair guides."),C("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),C("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:C("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[C("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),C("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),C("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:C("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:C("editor.guides.highlightActiveBracketPair","Controls whether bracket pair guides are enabled or not.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:C("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:"boolean",default:e.highlightActiveIndentation,description:C("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:VF(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:VF(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Yt(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Yt(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Yt(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation)}}}function VF(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class eDe extends jo{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!0,localityBonus:!1,shareSuggestSelections:!1,showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(105,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[C("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),C("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:C("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:C("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:C("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:C("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:C("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:C("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:C("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:C("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:C("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:C("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:C("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:C("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ua(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Yt(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Yt(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Yt(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Yt(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),showIcons:Yt(t.showIcons,this.defaultValue.showIcons),showStatusBar:Yt(t.showStatusBar,this.defaultValue.showStatusBar),preview:Yt(t.preview,this.defaultValue.preview),previewMode:Ua(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Yt(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Yt(t.showMethods,this.defaultValue.showMethods),showFunctions:Yt(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Yt(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Yt(t.showDeprecated,this.defaultValue.showDeprecated),showFields:Yt(t.showFields,this.defaultValue.showFields),showVariables:Yt(t.showVariables,this.defaultValue.showVariables),showClasses:Yt(t.showClasses,this.defaultValue.showClasses),showStructs:Yt(t.showStructs,this.defaultValue.showStructs),showInterfaces:Yt(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Yt(t.showModules,this.defaultValue.showModules),showProperties:Yt(t.showProperties,this.defaultValue.showProperties),showEvents:Yt(t.showEvents,this.defaultValue.showEvents),showOperators:Yt(t.showOperators,this.defaultValue.showOperators),showUnits:Yt(t.showUnits,this.defaultValue.showUnits),showValues:Yt(t.showValues,this.defaultValue.showValues),showConstants:Yt(t.showConstants,this.defaultValue.showConstants),showEnums:Yt(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Yt(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Yt(t.showKeywords,this.defaultValue.showKeywords),showWords:Yt(t.showWords,this.defaultValue.showWords),showColors:Yt(t.showColors,this.defaultValue.showColors),showFiles:Yt(t.showFiles,this.defaultValue.showFiles),showReferences:Yt(t.showReferences,this.defaultValue.showReferences),showFolders:Yt(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Yt(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Yt(t.showSnippets,this.defaultValue.showSnippets),showUsers:Yt(t.showUsers,this.defaultValue.showUsers),showIssues:Yt(t.showIssues,this.defaultValue.showIssues)}}}class tDe extends jo{constructor(){super(101,"smartSelect",{selectLeadingAndTrailingWhitespace:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:C("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Yt(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace)}}}class nDe extends WS{constructor(){super(129,[80])}compute(e,t,n){return t.get(80)?!0:e.tabFocusMode}}function iDe(i){switch(i){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}}class rDe extends WS{constructor(){super(131,[130])}compute(e,t,n){const r=t.get(130);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}}const oDe="Consolas, 'Courier New', monospace",sDe="Menlo, Monaco, 'Courier New', monospace",aDe="'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback'",js={fontFamily:qn?sDe:Xa?aDe:oDe,fontWeight:"normal",fontSize:qn?12:14,lineHeight:0,letterSpacing:0},Qs={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!1}},b1=[];function Je(i){return b1[i.id]=i,i}const lf={acceptSuggestionOnCommitCharacter:Je(new Gn(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:C("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Je(new Lo(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",C("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:C("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Je(new Dxe),accessibilityPageSize:Je(new br(3,"accessibilityPageSize",10,1,1073741824,{description:C("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default.")})),ariaLabel:Je(new hl(4,"ariaLabel",C("editorViewAccessibleLabel","Editor content"))),autoClosingBrackets:Je(new Lo(5,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),C("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:C("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingDelete:Je(new Lo(6,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Je(new Lo(7,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",C("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:C("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Je(new Lo(8,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",C("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),C("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:C("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Je(new SN(9,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],xxe,{enumDescriptions:[C("editor.autoIndent.none","The editor will not insert indentation automatically."),C("editor.autoIndent.keep","The editor will keep the current line's indentation."),C("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),C("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),C("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:C("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Je(new Gn(10,"automaticLayout",!1)),autoSurround:Je(new Lo(11,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[C("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),C("editor.autoSurround.quotes","Surround with quotes but not brackets."),C("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:C("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Je(new Qxe),bracketPairGuides:Je(new Jxe),stickyTabStops:Je(new Gn(103,"stickyTabStops",!1,{description:C("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Je(new Gn(14,"codeLens",!0,{description:C("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Je(new hl(15,"codeLensFontFamily","",{description:C("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Je(new br(16,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:C("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to `0`, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Je(new Gn(17,"colorDecorators",!0,{description:C("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),columnSelection:Je(new Gn(18,"columnSelection",!1,{description:C("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Je(new Ixe),contextmenu:Je(new Gn(20,"contextmenu",!0)),copyWithSyntaxHighlighting:Je(new Gn(21,"copyWithSyntaxHighlighting",!0,{description:C("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Je(new SN(22,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],kxe,{description:C("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Je(new Gn(23,"cursorSmoothCaretAnimation",!1,{description:C("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Je(new SN(24,"cursorStyle",ls.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Txe,{description:C("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Je(new br(25,"cursorSurroundingLines",0,0,1073741824,{description:C("cursorSurroundingLines","Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Je(new Lo(26,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[C("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),C("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],description:C("cursorSurroundingLinesStyle","Controls when `cursorSurroundingLines` should be enforced.")})),cursorWidth:Je(new br(27,"cursorWidth",0,0,1073741824,{markdownDescription:C("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Je(new Gn(28,"disableLayerHinting",!1)),disableMonospaceOptimizations:Je(new Gn(29,"disableMonospaceOptimizations",!1)),domReadOnly:Je(new Gn(30,"domReadOnly",!1)),dragAndDrop:Je(new Gn(31,"dragAndDrop",!0,{description:C("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Je(new Axe),extraEditorClassName:Je(new hl(33,"extraEditorClassName","")),fastScrollSensitivity:Je(new qf(34,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:C("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Je(new Oxe),fixedOverflowWidgets:Je(new Gn(36,"fixedOverflowWidgets",!1)),folding:Je(new Gn(37,"folding",!0,{description:C("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Je(new Lo(38,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[C("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),C("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:C("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Je(new Gn(39,"foldingHighlight",!0,{description:C("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Je(new Gn(40,"foldingImportsByDefault",!1,{description:C("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),unfoldOnClickAfterEndOfLine:Je(new Gn(41,"unfoldOnClickAfterEndOfLine",!1,{description:C("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Je(new hl(42,"fontFamily",js.fontFamily,{description:C("fontFamily","Controls the font family.")})),fontInfo:Je(new Mxe),fontLigatures2:Je(new Du),fontSize:Je(new Rxe),fontWeight:Je(new Rf),formatOnPaste:Je(new Gn(47,"formatOnPaste",!1,{description:C("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Je(new Gn(48,"formatOnType",!1,{description:C("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Je(new Gn(49,"glyphMargin",!0,{description:C("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Je(new Pxe),hideCursorInOverviewRuler:Je(new Gn(51,"hideCursorInOverviewRuler",!1,{description:C("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Je(new Fxe),inDiffEditor:Je(new Gn(53,"inDiffEditor",!1)),letterSpacing:Je(new qf(55,"letterSpacing",js.letterSpacing,i=>qf.clamp(i,-5,20),{description:C("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Je(new Bxe),lineDecorationsWidth:Je(new CC(57,"lineDecorationsWidth",10)),lineHeight:Je(new Vxe),lineNumbers:Je(new Gxe),lineNumbersMinChars:Je(new br(60,"lineNumbersMinChars",5,1,300)),linkedEditing:Je(new Gn(61,"linkedEditing",!1,{description:C("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols, e.g. HTML tags, are updated while editing.")})),links:Je(new Gn(62,"links",!0,{description:C("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Je(new Lo(63,"matchBrackets","always",["always","near","never"],{description:C("matchBrackets","Highlight matching brackets.")})),minimap:Je(new Hxe),mouseStyle:Je(new Lo(65,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Je(new qf(66,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:C("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Je(new Gn(67,"mouseWheelZoom",!1,{markdownDescription:C("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Je(new Gn(68,"multiCursorMergeOverlapping",!0,{description:C("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Je(new SN(69,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],$xe,{markdownEnumDescriptions:[C("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:C({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Je(new Lo(70,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[C("multiCursorPaste.spread","Each cursor pastes a single line of the text."),C("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:C("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),occurrencesHighlight:Je(new Gn(71,"occurrencesHighlight",!0,{description:C("occurrencesHighlight","Controls whether the editor should highlight semantic symbol occurrences.")})),overviewRulerBorder:Je(new Gn(72,"overviewRulerBorder",!0,{description:C("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Je(new br(73,"overviewRulerLanes",3,0,3)),padding:Je(new zxe),parameterHints:Je(new Uxe),peekWidgetDefaultFocus:Je(new Lo(76,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[C("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),C("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:C("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Je(new Gn(77,"definitionLinkOpensInPeek",!1,{description:C("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Je(new Kxe),quickSuggestionsDelay:Je(new br(79,"quickSuggestionsDelay",10,0,1073741824,{description:C("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Je(new Gn(80,"readOnly",!1)),renameOnType:Je(new Gn(81,"renameOnType",!1,{description:C("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:C("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Je(new Gn(82,"renderControlCharacters",!0,{description:C("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Je(new Gn(83,"renderFinalNewline",!0,{description:C("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Je(new Lo(84,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",C("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:C("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Je(new Gn(85,"renderLineHighlightOnlyWhenFocus",!1,{description:C("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Je(new Lo(86,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Je(new Lo(87,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",C("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),C("renderWhitespace.selection","Render whitespace characters only on selected text."),C("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:C("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Je(new br(88,"revealHorizontalRightPadding",30,0,1e3)),roundedSelection:Je(new Gn(89,"roundedSelection",!0,{description:C("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Je(new qxe),scrollbar:Je(new Yxe),scrollBeyondLastColumn:Je(new br(92,"scrollBeyondLastColumn",5,0,1073741824,{description:C("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Je(new Gn(93,"scrollBeyondLastLine",!0,{description:C("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Je(new Gn(94,"scrollPredominantAxis",!0,{description:C("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Je(new Gn(95,"selectionClipboard",!0,{description:C("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Xa})),selectionHighlight:Je(new Gn(96,"selectionHighlight",!0,{description:C("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Je(new Gn(97,"selectOnLineNumbers",!0)),showFoldingControls:Je(new Lo(98,"showFoldingControls","mouseover",["always","mouseover"],{enumDescriptions:[C("showFoldingControls.always","Always show the folding controls."),C("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:C("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Je(new Gn(99,"showUnused",!0,{description:C("showUnused","Controls fading out of unused code.")})),showDeprecated:Je(new Gn(125,"showDeprecated",!0,{description:C("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Je(new Wxe),snippetSuggestions:Je(new Lo(100,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[C("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),C("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),C("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),C("snippetSuggestions.none","Do not show snippet suggestions.")],description:C("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Je(new tDe),smoothScrolling:Je(new Gn(102,"smoothScrolling",!1,{description:C("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Je(new br(104,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Je(new eDe),inlineSuggest:Je(new Xxe),suggestFontSize:Je(new br(106,"suggestFontSize",0,0,1e3,{markdownDescription:C("suggestFontSize","Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.")})),suggestLineHeight:Je(new br(107,"suggestLineHeight",0,0,1e3,{markdownDescription:C("suggestLineHeight","Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used. The minimum value is 8.")})),suggestOnTriggerCharacters:Je(new Gn(108,"suggestOnTriggerCharacters",!0,{description:C("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Je(new Lo(109,"suggestSelection","recentlyUsed",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[C("suggestSelection.first","Always select the first suggestion."),C("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),C("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:C("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Je(new Lo(110,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[C("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),C("tabCompletion.off","Disable tab completions."),C("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:C("tabCompletion","Enables tab completions.")})),tabIndex:Je(new br(111,"tabIndex",0,-1,1073741824)),unicodeHighlight:Je(new Zxe),unusualLineTerminators:Je(new Lo(113,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[C("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),C("unusualLineTerminators.off","Unusual line terminators are ignored."),C("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:C("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Je(new Gn(114,"useShadowDOM",!0)),useTabStops:Je(new Gn(115,"useTabStops",!0,{description:C("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordSeparators:Je(new hl(116,"wordSeparators",Nue,{description:C("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Je(new Lo(117,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),C({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:C({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Je(new hl(118,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:Je(new hl(119,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:Je(new br(120,"wordWrapColumn",80,1,1073741824,{markdownDescription:C({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Je(new Lo(121,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Je(new Lo(122,"wordWrapOverride2","inherit",["off","on","inherit"])),wrappingIndent:Je(new SN(123,"wrappingIndent",1,"same",["none","same","indent","deepIndent"],iDe,{enumDescriptions:[C("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),C("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),C("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),C("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:C("wrappingIndent","Controls the indentation of wrapped lines.")})),wrappingStrategy:Je(new Lo(124,"wrappingStrategy","simple",["simple","advanced"],{enumDescriptions:[C("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),C("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],description:C("wrappingStrategy","Controls the algorithm that computes wrapping points.")})),editorClassName:Je(new Nxe),pixelRatio:Je(new jxe),tabFocusMode:Je(new nDe),layoutInfo:Je(new uy),wrappingInfo:Je(new rDe)};class lDe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class DG{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=this._bareFontInfo.getMassagedFontFamily(qc?js.fontFamily:null),t=document.createElement("div");t.style.position="absolute",t.style.top="-50000px",t.style.width="50000px";const n=document.createElement("div");n.style.fontFamily=e,n.style.fontWeight=this._bareFontInfo.fontWeight,n.style.fontSize=this._bareFontInfo.fontSize+"px",n.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,n.style.lineHeight=this._bareFontInfo.lineHeight+"px",n.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(n);const r=document.createElement("div");r.style.fontFamily=e,r.style.fontWeight="bold",r.style.fontSize=this._bareFontInfo.fontSize+"px",r.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,r.style.lineHeight=this._bareFontInfo.lineHeight+"px",r.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",t.appendChild(r);const o=document.createElement("div");o.style.fontFamily=e,o.style.fontWeight=this._bareFontInfo.fontWeight,o.style.fontSize=this._bareFontInfo.fontSize+"px",o.style.fontFeatureSettings=this._bareFontInfo.fontFeatureSettings,o.style.lineHeight=this._bareFontInfo.lineHeight+"px",o.style.letterSpacing=this._bareFontInfo.letterSpacing+"px",o.style.fontStyle="italic",t.appendChild(o);const s=[];for(const a of this._requests){let u;a.type===0&&(u=n),a.type===2&&(u=r),a.type===1&&(u=o),u.appendChild(document.createElement("br"));const d=document.createElement("span");DG._render(d,a),u.appendChild(d),s.push(d)}this._container=t,this._testElements=s}static _render(e,t){if(t.chr===" "){let n=" ";for(let r=0;r<8;r++)n+=n;e.innerText=n}else{let n=t.chr;for(let r=0;r<8;r++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],r=this._testElements[e];n.fulfill(r.offsetWidth/256)}}}function uDe(i,e){new DG(i,e).read()}class Vue extends Oe{constructor(e,t,n){super(),this.referenceDomElement=e,this.changeCallback=n,this.width=-1,this.height=-1,this.resizeObserver=null,this.measureReferenceDomElementToken=-1,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this.width}getHeight(){return this.height}startObserving(){typeof ResizeObserver<"u"?!this.resizeObserver&&this.referenceDomElement&&(this.resizeObserver=new ResizeObserver(e=>{e&&e[0]&&e[0].contentRect?this.observe({width:e[0].contentRect.width,height:e[0].contentRect.height}):this.observe()}),this.resizeObserver.observe(this.referenceDomElement)):this.measureReferenceDomElementToken===-1&&(this.measureReferenceDomElementToken=setInterval(()=>this.observe(),100))}stopObserving(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.measureReferenceDomElementToken!==-1&&(clearInterval(this.measureReferenceDomElementToken),this.measureReferenceDomElementToken=-1)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,r=0;t?(n=t.width,r=t.height):this.referenceDomElement&&(n=this.referenceDomElement.clientWidth,r=this.referenceDomElement.clientHeight),n=Math.max(5,n),r=Math.max(5,r),(this.width!==n||this.height!==r)&&(this.width=n,this.height=r,e&&this.changeCallback())}}const Op=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new be,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},cDe=qn?1.5:1.35,S9=8;class Y1{constructor(e){this._bareFontInfoBrand=void 0,this.zoomLevel=e.zoomLevel,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}static createFromValidatedSettings(e,t,n,r){const o=e.get(42),s=e.get(46),a=e.get(45),u=e.get(44),d=e.get(58),h=e.get(55);return Y1._create(o,s,a,u,d,h,t,n,r)}static _create(e,t,n,r,o,s,a,u,d){o===0?o=cDe*n:o<S9&&(o=o*n),o=Math.round(o),o<S9&&(o=S9);const h=1+(d?0:Op.getZoomLevel()*.1);return n*=h,o*=h,new Y1({zoomLevel:a,pixelRatio:u,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:r,lineHeight:o,letterSpacing:s})}getId(){return this.zoomLevel+"-"+this.pixelRatio+"-"+this.fontFamily+"-"+this.fontWeight+"-"+this.fontSize+"-"+this.fontFeatureSettings+"-"+this.lineHeight+"-"+this.letterSpacing}getMassagedFontFamily(e){const t=Y1._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const dDe=1;class LH extends Y1{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=dDe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}const L8={JSONContribution:"base.contributions.json"};function hDe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class fDe{constructor(){this._onDidChangeSchema=new be,this.schemasById={}}registerSchema(e,t){this.schemasById[hDe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const gDe=new fDe;Zr.add(L8.JSONContribution,gDe);const wC={Configuration:"base.contributions.configuration"},LN="vscode://schemas/settings/resourceLanguage",iJ=Zr.as(L8.JSONContribution);class pDe{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new be,this._onDidUpdateConfiguration=new be,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:C("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},iJ.registerSchema(LN,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=this.doRegisterConfigurations(e,t);iJ.registerSchema(LN,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){var t;const n=[],r=[];for(const{overrides:o,source:s}of e)for(const a in o)if(n.push(a),EA.test(a)){const u=Object.assign(Object.assign({},((t=this.configurationDefaultsOverrides.get(a))===null||t===void 0?void 0:t.value)||{}),o[a]);this.configurationDefaultsOverrides.set(a,{source:s,value:u});const d={type:"object",default:u,description:C("defaultLanguageConfiguration.description","Configure settings to be overridden for {0} language.",a),$ref:LN,defaultDefaultValue:u,source:dc(s)?void 0:s};r.push(...$ue(a)),this.configurationProperties[a]=d,this.defaultLanguageConfigurationOverridesNode.properties[a]=d}else{this.configurationDefaultsOverrides.set(a,{value:o[a],source:s});const u=this.configurationProperties[a];u&&(this.updatePropertyDefaultValue(a,u),this.updateSchema(a,u))}this.registerOverrideIdentifiers(r),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})}registerOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t){const n=[];return e.forEach(r=>{n.push(...this.validateAndRegisterProperties(r,t,r.extensionInfo,r.restrictedProperties)),this.configurationContributors.push(r),this.registerJSONConfiguration(r)}),n}validateAndRegisterProperties(e,t=!0,n,r,o=3){o=xu(e.scope)?o:e.scope;let s=[],a=e.properties;if(a)for(let d in a){if(t&&vDe(d)){delete a[d];continue}const h=a[d];if(h.source=n,h.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,h),EA.test(d)?h.scope=void 0:(h.scope=xu(h.scope)?o:h.scope,h.restricted=xu(h.restricted)?!!(r!=null&&r.includes(d)):h.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d];!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),s.push(d)}let u=e.allOf;if(u)for(let d of u)s.push(...this.validateAndRegisterProperties(d,t,n,r,o));return s}getConfigurationProperties(){return this.configurationProperties}registerJSONConfiguration(e){const t=n=>{let r=n.properties;if(r)for(const s in r)this.updateSchema(s,r[s]);let o=n.allOf;o&&o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:C("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:LN};this.updatePropertyDefaultValue(t,n)}this._onDidSchemaChange.fire()}registerOverridePropertyPatternKey(){C("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),C("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let r=n==null?void 0:n.value,o=n==null?void 0:n.source;pl(r)&&(r=t.defaultDefaultValue,o=void 0),pl(r)&&(r=_De(t.type)),t.default=r,t.defaultValueSource=o}}const Hue="\\[([^\\]]+)\\]",rJ=new RegExp(Hue,"g"),mDe=`^(${Hue})+$`,EA=new RegExp(mDe);function $ue(i){const e=[];if(EA.test(i)){let t=rJ.exec(i);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=rJ.exec(i)}}return Eb(e)}function _De(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const zue=new pDe;Zr.add(wC.Configuration,zue);function vDe(i){return i.trim()?EA.test(i)?C("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):zue.getConfigurationProperties()[i]!==void 0?C("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):null:C("config.property.empty","Cannot register an empty property")}const bDe=Object.prototype.hasOwnProperty;function CDe(i,e){for(let t in i)if(bDe.call(i,t)&&e({key:t,value:i[t]},function(){delete i[t]})===!1)return}class wDe{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}}const HF=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new be,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(i){this._tabFocus!==i&&(this._tabFocus=i,this._onDidChangeTabFocus.fire(this._tabFocus))}},yDe=Object.hasOwnProperty;class SDe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class LDe{constructor(){this._values=[]}_read(e){return this._values[e]}_write(e,t){this._values[e]=t}}class xf{static readOptions(e){const t=e,n=new LDe;for(const r of b1){const o=r.name==="_never_"?void 0:t[r.name];n._write(r.id,o)}return n}static validateOptions(e){const t=new Exe;for(const n of b1)t._write(n.id,n.validate(e._read(n.id)));return t}static computeOptions(e,t){const n=new SDe;for(const r of b1)n._write(r.id,r.compute(t,n,e._read(r.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?oc(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!xf._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let r=!1;for(const o of b1){const s=!xf._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=s,s&&(r=!0)}return r?new Bue(n):null}static applyUpdate(e,t){let n=!1;for(const r of b1)if(t.hasOwnProperty(r.name)){const o=r.applyUpdate(e[r.name],t[r.name]);e[r.name]=o.newValue,n=n||o.didChange}return n}}function EDe(i){const e=i.wordWrap;e===!0?i.wordWrap="on":e===!1&&(i.wordWrap="off");const t=i.lineNumbers;t===!0?i.lineNumbers="on":t===!1&&(i.lineNumbers="off"),i.autoClosingBrackets===!1&&(i.autoClosingBrackets="never",i.autoClosingQuotes="never",i.autoSurround="never"),i.cursorBlinking==="visible"&&(i.cursorBlinking="solid");const o=i.renderWhitespace;o===!0?i.renderWhitespace="boundary":o===!1&&(i.renderWhitespace="none");const s=i.renderLineHighlight;s===!0?i.renderLineHighlight="line":s===!1&&(i.renderLineHighlight="none");const a=i.acceptSuggestionOnEnter;a===!0?i.acceptSuggestionOnEnter="on":a===!1&&(i.acceptSuggestionOnEnter="off");const u=i.tabCompletion;u===!1?i.tabCompletion="off":u===!0&&(i.tabCompletion="onlySnippets");const d=i.suggest;if(d&&typeof d.filteredTypes=="object"&&d.filteredTypes){const L={};L.method="showMethods",L.function="showFunctions",L.constructor="showConstructors",L.deprecated="showDeprecated",L.field="showFields",L.variable="showVariables",L.class="showClasses",L.struct="showStructs",L.interface="showInterfaces",L.module="showModules",L.property="showProperties",L.event="showEvents",L.operator="showOperators",L.unit="showUnits",L.value="showValues",L.constant="showConstants",L.enum="showEnums",L.enumMember="showEnumMembers",L.keyword="showKeywords",L.text="showWords",L.color="showColors",L.file="showFiles",L.reference="showReferences",L.folder="showFolders",L.typeParameter="showTypeParameters",L.snippet="showSnippets",CDe(L,S=>{const y=d.filteredTypes[S.key];y===!1&&(d[S.value]=y)})}const h=i.hover;h===!0?i.hover={enabled:!0}:h===!1&&(i.hover={enabled:!1});const f=i.parameterHints;f===!0?i.parameterHints={enabled:!0}:f===!1&&(i.parameterHints={enabled:!1});const p=i.autoIndent;p===!0?i.autoIndent="full":p===!1&&(i.autoIndent="advanced");const m=i.matchBrackets;m===!0?i.matchBrackets="always":m===!1&&(i.matchBrackets="never");const{renderIndentGuides:v,highlightActiveIndentGuide:b}=i;i.guides||(i.guides={}),v!==void 0&&(i.guides.indentation=!!v),b!==void 0&&(i.guides.highlightActiveIndentation=!!b)}function oJ(i){const e=Qg(i);return EDe(e),e}class IG extends Oe{constructor(e,t){super(),this._onDidChange=this._register(new be),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new be),this.onDidChangeFast=this._onDidChangeFast.event,this._reservedHeight=0,this.isSimpleWidget=e,this._isDominatedByLongLines=!1,this._computeOptionsMemory=new Wue,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._rawOptions=oJ(t),this._readOptions=xf.readOptions(this._rawOptions),this._validatedOptions=xf.validateOptions(this._readOptions),this._register(Op.onDidChangeZoomLevel(n=>this._recomputeOptions())),this._register(HF.onDidChangeTabFocus(n=>this._recomputeOptions()))}observeReferenceElement(e){}updatePixelRatio(){}_recomputeOptions(){const e=this.options,t=this._computeInternalOptions();if(!e)this.options=t;else{const n=xf.checkEquals(e,t);if(n===null)return;this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n)}}getRawOptions(){return this._rawOptions}_computeInternalOptions(){const e=this._getEnvConfiguration(),t=Y1.createFromValidatedSettings(this._validatedOptions,e.zoomLevel,e.pixelRatio,this.isSimpleWidget),n={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:this.readConfiguration(t),extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:HF.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport};return xf.computeOptions(this._validatedOptions,n)}updateOptions(e){if(typeof e>"u")return;const t=oJ(e);xf.applyUpdate(this._rawOptions,t)&&(this._readOptions=xf.readOptions(this._rawOptions),this._validatedOptions=xf.validateOptions(this._readOptions),this._recomputeOptions())}setIsDominatedByLongLines(e){this._isDominatedByLongLines=e,this._recomputeOptions()}setMaxLineNumber(e){const t=IG._digitCount(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}static _digitCount(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}reserveHeight(e){this._reservedHeight=e,this._recomputeOptions()}}const xDe=Object.freeze({id:"editor",order:5,type:"object",title:C("editorConfigurationTitle","Editor"),scope:5}),DDe=Zr.as(wC.Configuration),$F=Object.assign(Object.assign({},xDe),{properties:{"editor.tabSize":{type:"number",default:Qs.tabSize,minimum:1,markdownDescription:C("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.insertSpaces":{type:"boolean",default:Qs.insertSpaces,markdownDescription:C("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.")},"editor.detectIndentation":{type:"boolean",default:Qs.detectIndentation,markdownDescription:C("detectIndentation","Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.")},"editor.trimAutoWhitespace":{type:"boolean",default:Qs.trimAutoWhitespace,description:C("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Qs.largeFileOptimizations,description:C("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{type:"boolean",default:!0,description:C("wordBasedSuggestions","Controls whether completions should be computed based on words in the document.")},"editor.wordBasedSuggestionsMode":{enum:["currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[C("wordBasedSuggestionsMode.currentDocument","Only suggest words from the active document."),C("wordBasedSuggestionsMode.matchingDocuments","Suggest words from all open documents of the same language."),C("wordBasedSuggestionsMode.allDocuments","Suggest words from all open documents.")],description:C("wordBasedSuggestionsMode","Controls from which documents word based completions are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[C("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),C("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),C("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:C("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:C("stablePeek","Keep peek editors open even when double clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:C("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.language.brackets":{type:"array",default:!1,description:C("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:"array",default:!1,description:C("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:C("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:C("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:5e3,description:C("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:50,description:C("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:!0,description:C("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:!0,description:C("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:!0,description:C("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:!1,description:C("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:"inherit",markdownEnumDescriptions:[C("wordWrap.off","Lines will never wrap."),C("wordWrap.on","Lines will wrap at the viewport width."),C("wordWrap.inherit","Lines will wrap according to the `#editor.wordWrap#` setting.")]}}});function IDe(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of b1){const e=i.schema;if(typeof e<"u")if(IDe(e))$F.properties[`editor.${i.name}`]=e;else for(let t in e)yDe.call(e,t)&&($F.properties[t]=e[t])}let xR=null;function Uue(){return xR===null&&(xR=Object.create(null),Object.keys($F.properties).forEach(i=>{xR[i]=!0})),xR}function kDe(i){return Uue()[`editor.${i}`]||!1}function TDe(i){return Uue()[`diffEditor.${i}`]||!1}DDe.registerConfiguration($F);class sJ{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}function NDe(){xb.INSTANCE.clearCache()}class xb extends Oe{constructor(){super(),this._onDidChange=this._register(new be),this.onDidChange=this._onDidChange.event,this._cache=new sJ,this._evictUntrustedReadingsTimeout=-1}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearCache(){this._cache=new sJ,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),!t.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()},5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readConfiguration(e){if(!this._cache.has(e)){let t=xb._actualReadConfiguration(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new LH({zoomLevel:CF(),pixelRatio:vA(),fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}static createRequest(e,t,n,r){const o=new lDe(e,t);return n.push(o),r&&r.push(o),o}static _actualReadConfiguration(e){const t=[],n=[],r=this.createRequest("n",0,t,n),o=this.createRequest("ｍ",0,t,null),s=this.createRequest(" ",0,t,n),a=this.createRequest("0",0,t,n),u=this.createRequest("1",0,t,n),d=this.createRequest("2",0,t,n),h=this.createRequest("3",0,t,n),f=this.createRequest("4",0,t,n),p=this.createRequest("5",0,t,n),m=this.createRequest("6",0,t,n),v=this.createRequest("7",0,t,n),b=this.createRequest("8",0,t,n),L=this.createRequest("9",0,t,n),S=this.createRequest("→",0,t,n),y=this.createRequest("￫",0,t,null),E=this.createRequest("·",0,t,n),A=this.createRequest(String.fromCharCode(11825),0,t,null),N="|/-_ilm%";for(let $=0,D=N.length;$<D;$++)this.createRequest(N.charAt($),0,t,n),this.createRequest(N.charAt($),1,t,n),this.createRequest(N.charAt($),2,t,n);uDe(e,t);const V=Math.max(a.width,u.width,d.width,h.width,f.width,p.width,m.width,v.width,b.width,L.width);let R=e.fontFeatureSettings===Du.OFF;const M=n[0].width;for(let $=1,D=n.length;R&&$<D;$++){const T=M-n[$].width;if(T<-.001||T>.001){R=!1;break}}let K=!0;R&&y.width!==M&&(K=!1),y.width>S.width&&(K=!1);const X=Mle()>2e3;return new LH({zoomLevel:CF(),pixelRatio:vA(),fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:R,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:K,spaceWidth:s.width,middotWidth:E.width,wsmiddotWidth:A.width,maxDigitWidth:V},X)}}xb.INSTANCE=new xb;let Na=class jue extends IG{constructor(e,t,n=null,r){super(e,t),this.accessibilityService=r,this._elementSizeObserver=this._register(new Vue(n,t.dimension,()=>this._recomputeOptions())),this._register(xb.INSTANCE.onDidChange(()=>this._recomputeOptions())),this._validatedOptions.get(10)&&this._elementSizeObserver.startObserving(),this._register(JK(o=>this._recomputeOptions())),this._register(this.accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions())),this._recomputeOptions()}static applyFontInfoSlow(e,t){e.style.fontFamily=t.getMassagedFontFamily(qc?js.fontFamily:null),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px"}static applyFontInfo(e,t){e.setFontFamily(t.getMassagedFontFamily(qc?js.fontFamily:null)),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)}observeReferenceElement(e){this._elementSizeObserver.observe(e)}updatePixelRatio(){this._recomputeOptions()}static _getExtraEditorClassName(){let e="";return!qc&&!Ple&&(e+="no-user-select "),qc&&(e+="no-minimap-shadow "),qn&&(e+="mac "),e}_getEnvConfiguration(){return{extraEditorClassName:jue._getExtraEditorClassName(),outerWidth:this._elementSizeObserver.getWidth(),outerHeight:this._elementSizeObserver.getHeight(),emptySelectionClipboard:n0||yl,pixelRatio:vA(),zoomLevel:CF(),accessibilitySupport:this.accessibilityService.isScreenReaderOptimized()?2:this.accessibilityService.getAccessibilitySupport()}}readConfiguration(e){return xb.INSTANCE.readConfiguration(e)}},Q=class qs{constructor(e,t,n,r){e>n||e===n&&t>r?(this.startLineNumber=n,this.startColumn=r,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=r)}isEmpty(){return qs.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return qs.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return qs.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return qs.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return qs.plusRange(this,e)}static plusRange(e,t){let n,r,o,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,r=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,r=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,r=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new qs(n,r,o,s)}intersectRanges(e){return qs.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,u=t.startColumn,d=t.endLineNumber,h=t.endColumn;return n<a?(n=a,r=u):n===a&&(r=Math.max(r,u)),o>d?(o=d,s=h):o===d&&(s=Math.min(s,h)),n>o||n===o&&r>s?null:new qs(n,r,o,s)}equalsRange(e){return qs.equalsRange(this,e)}static equalsRange(e,t){return!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return qs.getEndPosition(this)}static getEndPosition(e){return new Le(e.endLineNumber,e.endColumn)}getStartPosition(){return qs.getStartPosition(this)}static getStartPosition(e){return new Le(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new qs(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new qs(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return qs.collapseToStart(this)}static collapseToStart(e){return new qs(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}static fromPositions(e,t=e){return new qs(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new qs(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){const a=e.startColumn|0,u=t.startColumn|0;if(a===u){const d=e.endLineNumber|0,h=t.endLineNumber|0;if(d===h){const f=e.endColumn|0,p=t.endColumn|0;return f-p}return d-h}return a-u}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}},yt=class Nc extends Q{constructor(e,t,n,r){super(e,t,n,r),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=r}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Nc.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Nc(this.startLineNumber,this.startColumn,e,t):new Nc(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Le(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Le(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Nc(e,t,this.endLineNumber,this.endColumn):new Nc(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Nc(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Nc(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Nc(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Nc(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,r,o){return o===0?new Nc(e,t,n,r):new Nc(n,r,e,t)}};class Kue{constructor(e){this.domNode=e,this._maxWidth=-1,this._width=-1,this._height=-1,this._top=-1,this._left=-1,this._bottom=-1,this._right=-1,this._fontFamily="",this._fontWeight="",this._fontSize=-1,this._fontFeatureSettings="",this._lineHeight=-1,this._letterSpacing=-100,this._className="",this._display="",this._position="",this._visibility="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.domNode.style.maxWidth=this._maxWidth+"px")}setWidth(e){this._width!==e&&(this._width=e,this.domNode.style.width=this._width+"px")}setHeight(e){this._height!==e&&(this._height=e,this.domNode.style.height=this._height+"px")}setTop(e){this._top!==e&&(this._top=e,this.domNode.style.top=this._top+"px")}unsetTop(){this._top!==-1&&(this._top=-1,this.domNode.style.top="")}setLeft(e){this._left!==e&&(this._left=e,this.domNode.style.left=this._left+"px")}setBottom(e){this._bottom!==e&&(this._bottom=e,this.domNode.style.bottom=this._bottom+"px")}setRight(e){this._right!==e&&(this._right=e,this.domNode.style.right=this._right+"px")}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){this._fontSize!==e&&(this._fontSize=e,this.domNode.style.fontSize=this._fontSize+"px")}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setLineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.domNode.style.lineHeight=this._lineHeight+"px")}setLetterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.domNode.style.letterSpacing=this._letterSpacing+"px")}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function ri(i){return new Kue(i)}function ko(i,e,t){let n=null,r=null;if(typeof t.value=="function"?(n="value",r=t.value,r.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",r=t.get),!r)throw new Error("not supported");const o=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:r.apply(this,s)}),this[o]}}var ADe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},lr;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(lr||(lr={}));class Hi extends Oe{constructor(){super(),this.dispatched=!1,this.activeTouches={},this.handle=null,this.targets=[],this.ignoreTargets=[],this._lastSetTapCountTime=0,this._register(qe(document,"touchstart",e=>this.onTouchStart(e),{passive:!1})),this._register(qe(document,"touchend",e=>this.onTouchEnd(e))),this._register(qe(document,"touchmove",e=>this.onTouchMove(e),{passive:!1}))}static addTarget(e){return Hi.isTouchDevice()?(Hi.INSTANCE||(Hi.INSTANCE=new Hi),Hi.INSTANCE.targets.push(e),{dispose:()=>{Hi.INSTANCE.targets=Hi.INSTANCE.targets.filter(t=>t!==e)}}):Oe.None}static ignoreTarget(e){return Hi.isTouchDevice()?(Hi.INSTANCE||(Hi.INSTANCE=new Hi),Hi.INSTANCE.ignoreTargets.push(e),{dispose:()=>{Hi.INSTANCE.ignoreTargets=Hi.INSTANCE.ignoreTargets.filter(t=>t!==e)}}):Oe.None}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,r=e.targetTouches.length;n<r;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(lr.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e){let t=Date.now(),n=Object.keys(this.activeTouches).length;for(let r=0,o=e.changedTouches.length;r<o;r++){let s=e.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(s.identifier))){console.warn("move of an UNKNOWN touch",s);continue}let a=this.activeTouches[s.identifier],u=Date.now()-a.initialTimeStamp;if(u<Hi.HOLD_DELAY&&Math.abs(a.initialPageX-zu(a.rollingPageX))<30&&Math.abs(a.initialPageY-zu(a.rollingPageY))<30){let d=this.newGestureEvent(lr.Tap,a.initialTarget);d.pageX=zu(a.rollingPageX),d.pageY=zu(a.rollingPageY),this.dispatchEvent(d)}else if(u>=Hi.HOLD_DELAY&&Math.abs(a.initialPageX-zu(a.rollingPageX))<30&&Math.abs(a.initialPageY-zu(a.rollingPageY))<30){let d=this.newGestureEvent(lr.Contextmenu,a.initialTarget);d.pageX=zu(a.rollingPageX),d.pageY=zu(a.rollingPageY),this.dispatchEvent(d)}else if(n===1){let d=zu(a.rollingPageX),h=zu(a.rollingPageY),f=zu(a.rollingTimestamps)-a.rollingTimestamps[0],p=d-a.rollingPageX[0],m=h-a.rollingPageY[0];const v=this.targets.filter(b=>a.initialTarget instanceof Node&&b.contains(a.initialTarget));this.inertia(v,t,Math.abs(p)/f,p>0?1:-1,d,Math.abs(m)/f,m>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(lr.End,a.initialTarget)),delete this.activeTouches[s.identifier]}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===lr.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Hi.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===lr.Change||e.type===lr.Contextmenu)&&(this._lastSetTapCountTime=0);for(let t=0;t<this.ignoreTargets.length;t++)if(e.initialTarget instanceof Node&&this.ignoreTargets[t].contains(e.initialTarget))return;this.targets.forEach(t=>{e.initialTarget instanceof Node&&t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)})}inertia(e,t,n,r,o,s,a,u){this.handle=og(()=>{let d=Date.now(),h=d-t,f=0,p=0,m=!0;n+=Hi.SCROLL_FRICTION*h,s+=Hi.SCROLL_FRICTION*h,n>0&&(m=!1,f=r*n*h),s>0&&(m=!1,p=a*s*h);let v=this.newGestureEvent(lr.Change);v.translationX=f,v.translationY=p,e.forEach(b=>b.dispatchEvent(v)),m||this.inertia(e,d,n,r,o+f,s,a,u+p)})}onTouchMove(e){let t=Date.now();for(let n=0,r=e.changedTouches.length;n<r;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(lr.Change,s.initialTarget);a.translationX=o.pageX-zu(s.rollingPageX),a.translationY=o.pageY-zu(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}Hi.SCROLL_FRICTION=-.005;Hi.HOLD_DELAY=700;Hi.CLEAR_TAP_COUNT_TIME=400;ADe([ko],Hi,"isTouchDevice",null);function VS(i,e){let t=new Ju(e);return t.preventDefault(),{leftButton:t.leftButton,buttons:t.buttons,posx:t.posx,posy:t.posy}}class yC{constructor(){this._hooks=new Qe,this._mouseMoveEventMerger=null,this._mouseMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._mouseMoveEventMerger=null,this._mouseMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._mouseMoveEventMerger}startMonitoring(e,t,n,r,o){if(this.isMonitoring())return;this._mouseMoveEventMerger=n,this._mouseMoveCallback=r,this._onStopCallback=o;const s=uH.getSameOriginWindowChain(),a=ig?"pointermove":"mousemove",u="mouseup",d=s.map(f=>f.window.document),h=m0(e);h&&d.unshift(h);for(const f of d)this._hooks.add(uG(f,a,p=>{if(p.buttons!==t){this.stopMonitoring(!0);return}this._mouseMoveCallback(p)},(p,m)=>this._mouseMoveEventMerger(p,m))),this._hooks.add(qe(f,u,p=>this.stopMonitoring(!0)));if(uH.hasDifferentOriginAncestor()){let f=s[s.length-1];this._hooks.add(qe(f.window.document,"mouseout",p=>{new Ju(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(qe(f.window.document,"mouseover",p=>{new Ju(p).target.tagName.toLowerCase()==="html"&&this.stopMonitoring(!0)})),this._hooks.add(qe(f.window.document.body,"mouseleave",p=>{this.stopMonitoring(!0)}))}}}function r0(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class fi{constructor(e,t,n,r=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ah{constructor(e,t,n,r){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=r0(Math.max(Math.min(1,t),0),3),this.l=r0(Math.max(Math.min(1,n),0),3),this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,o=e.a,s=Math.max(t,n,r),a=Math.min(t,n,r);let u=0,d=0;const h=(a+s)/2,f=s-a;if(f>0){switch(d=Math.min(h<=.5?f/(2*h):f/(2-2*h),1),s){case t:u=(n-r)/f+(n<r?6:0);break;case n:u=(r-t)/f+2;break;case r:u=(t-n)/f+4;break}u*=60,u=Math.round(u)}return new Ah(u,d,h,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:r,a:o}=e;let s,a,u;if(n===0)s=a=u=r;else{const d=r<.5?r*(1+n):r+n-r*n,h=2*r-d;s=Ah._hue2rgb(h,d,t+1/3),a=Ah._hue2rgb(h,d,t),u=Ah._hue2rgb(h,d,t-1/3)}return new fi(Math.round(s*255),Math.round(a*255),Math.round(u*255),o)}}class Yf{constructor(e,t,n,r){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=r0(Math.max(Math.min(1,t),0),3),this.v=r0(Math.max(Math.min(1,n),0),3),this.a=r0(Math.max(Math.min(1,r),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,r=e.b/255,o=Math.max(t,n,r),s=Math.min(t,n,r),a=o-s,u=o===0?0:a/o;let d;return a===0?d=0:o===t?d=((n-r)/a%6+6)%6:o===n?d=(r-t)/a+2:d=(t-n)/a+4,new Yf(Math.round(d*60),u,o,e.a)}static toRGBA(e){const{h:t,s:n,v:r,a:o}=e,s=r*n,a=s*(1-Math.abs(t/60%2-1)),u=r-s;let[d,h,f]=[0,0,0];return t<60?(d=s,h=a):t<120?(d=a,h=s):t<180?(h=s,f=a):t<240?(h=a,f=s):t<300?(d=a,f=s):t<=360&&(d=s,f=a),d=Math.round((d+u)*255),h=Math.round((h+u)*255),f=Math.round((f+u)*255),new fi(d,h,f,o)}}class ye{constructor(e){if(e)if(e instanceof fi)this.rgba=e;else if(e instanceof Ah)this._hsla=e,this.rgba=Ah.toRGBA(e);else if(e instanceof Yf)this._hsva=e,this.rgba=Yf.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}static fromHex(e){return ye.Format.CSS.parseHex(e)||ye.red}get hsla(){return this._hsla?this._hsla:Ah.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Yf.fromRGBA(this.rgba)}equals(e){return!!e&&fi.equals(this.rgba,e.rgba)&&Ah.equals(this.hsla,e.hsla)&&Yf.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=ye._relativeLuminanceForComponent(this.rgba.r),t=ye._relativeLuminanceForComponent(this.rgba.g),n=ye._relativeLuminanceForComponent(this.rgba.b),r=.2126*e+.7152*t+.0722*n;return r0(r,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new ye(new Ah(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new ye(new Ah(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:r,a:o}=this.rgba;return new ye(new fi(t,n,r,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new ye(new fi(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=ye.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-r)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const r=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(r-o)/r,e.darken(n)}}ye.white=new ye(new fi(255,255,255,1));ye.black=new ye(new fi(0,0,0,1));ye.red=new ye(new fi(255,0,0,1));ye.blue=new ye(new fi(0,0,255,1));ye.cyan=new ye(new fi(0,255,255,1));ye.lightgrey=new ye(new fi(211,211,211,1));ye.transparent=new ye(new fi(0,0,0,0));(function(i){(function(e){(function(t){function n(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:i.Format.CSS.formatRGBA(m)}t.formatRGB=n;function r(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}t.formatRGBA=r;function o(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(m)}t.formatHSL=o;function s(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}t.formatHSLA=s;function a(m){const v=m.toString(16);return v.length!==2?"0"+v:v}function u(m){return`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}`}t.formatHex=u;function d(m,v=!1){return v&&m.rgba.a===1?i.Format.CSS.formatHex(m):`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}${a(Math.round(m.rgba.a*255))}`}t.formatHexA=d;function h(m){return m.isOpaque()?i.Format.CSS.formatHex(m):i.Format.CSS.formatRGBA(m)}t.format=h;function f(m){const v=m.length;if(v===0||m.charCodeAt(0)!==35)return null;if(v===7){const b=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),L=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),S=16*p(m.charCodeAt(5))+p(m.charCodeAt(6));return new i(new fi(b,L,S,1))}if(v===9){const b=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),L=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),S=16*p(m.charCodeAt(5))+p(m.charCodeAt(6)),y=16*p(m.charCodeAt(7))+p(m.charCodeAt(8));return new i(new fi(b,L,S,y/255))}if(v===4){const b=p(m.charCodeAt(1)),L=p(m.charCodeAt(2)),S=p(m.charCodeAt(3));return new i(new fi(16*b+b,16*L+L,16*S+S))}if(v===5){const b=p(m.charCodeAt(1)),L=p(m.charCodeAt(2)),S=p(m.charCodeAt(3)),y=p(m.charCodeAt(4));return new i(new fi(16*b+b,16*L+L,16*S+S,(16*y+y)/255))}return null}t.parseHex=f;function p(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(ye||(ye={}));function Gue(i){return`--vscode-${i.replace(".","-")}`}const que={ColorContribution:"base.contributions.colors"};class ODe{constructor(){this._onDidChangeSchema=new be,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,r=!1,o){let s={id:e,description:n,defaults:t,needsTransparency:r,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),this.colorSchema.properties[e]=a,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){const r=n.defaults[t.type];return jg(r,t)}}getColorSchema(){return this.colorSchema}toString(){let e=(t,n)=>{let r=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return r!==o?r-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const E8=new ODe;Zr.add(que.ColorContribution,E8);function Ce(i,e,t,n,r){return E8.registerColor(i,e,t,n,r)}const zt=Ce("foreground",{dark:"#CCCCCC",light:"#616161",hc:"#FFFFFF"},C("foreground","Overall foreground color. This color is only used if not overridden by a component.")),MDe=Ce("errorForeground",{dark:"#F48771",light:"#A1260D",hc:"#F48771"},C("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),L9=Ce("icon.foreground",{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},C("iconForeground","The default color for icons in the workbench.")),Db=Ce("focusBorder",{dark:"#007FD4",light:"#0090F1",hc:"#F38518"},C("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),ho=Ce("contrastBorder",{light:null,dark:null,hc:"#6FC3DF"},C("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Ja=Ce("contrastActiveBorder",{light:null,dark:null,hc:Db},C("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),x8=Ce("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},C("textLinkForeground","Foreground color for links in text.")),D8=Ce("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hc:"#3794FF"},C("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Yue=Ce("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hc:ye.black},C("textCodeBlockBackground","Background color for code blocks in text.")),C0=Ce("widget.shadow",{dark:tr(ye.black,.36),light:tr(ye.black,.16),hc:null},C("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),kG=Ce("input.background",{dark:"#3C3C3C",light:ye.white,hc:ye.black},C("inputBoxBackground","Input box background.")),TG=Ce("input.foreground",{dark:zt,light:zt,hc:zt},C("inputBoxForeground","Input box foreground.")),NG=Ce("input.border",{dark:null,light:null,hc:ho},C("inputBoxBorder","Input box border.")),EH=Ce("inputOption.activeBorder",{dark:"#007ACC00",light:"#007ACC00",hc:ho},C("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),xH=Ce("inputOption.activeBackground",{dark:tr(Db,.4),light:tr(Db,.2),hc:ye.transparent},C("inputOption.activeBackground","Background hover color of options in input fields.")),DH=Ce("inputOption.activeForeground",{dark:ye.white,light:ye.black,hc:null},C("inputOption.activeForeground","Foreground color of activated options in input fields.")),Zue=Ce("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hc:ye.black},C("inputValidationInfoBackground","Input validation background color for information severity.")),Xue=Ce("inputValidation.infoForeground",{dark:null,light:null,hc:null},C("inputValidationInfoForeground","Input validation foreground color for information severity.")),Que=Ce("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hc:ho},C("inputValidationInfoBorder","Input validation border color for information severity.")),Jue=Ce("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hc:ye.black},C("inputValidationWarningBackground","Input validation background color for warning severity.")),ece=Ce("inputValidation.warningForeground",{dark:null,light:null,hc:null},C("inputValidationWarningForeground","Input validation foreground color for warning severity.")),tce=Ce("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hc:ho},C("inputValidationWarningBorder","Input validation border color for warning severity.")),nce=Ce("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hc:ye.black},C("inputValidationErrorBackground","Input validation background color for error severity.")),ice=Ce("inputValidation.errorForeground",{dark:null,light:null,hc:null},C("inputValidationErrorForeground","Input validation foreground color for error severity.")),rce=Ce("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hc:ho},C("inputValidationErrorBorder","Input validation border color for error severity.")),E9=Ce("dropdown.background",{dark:"#3C3C3C",light:ye.white,hc:ye.black},C("dropdownBackground","Dropdown background.")),aJ=Ce("dropdown.foreground",{dark:"#F0F0F0",light:null,hc:ye.white},C("dropdownForeground","Dropdown foreground.")),RDe=Ce("button.foreground",{dark:ye.white,light:ye.white,hc:ye.white},C("buttonForeground","Button foreground color.")),IH=Ce("button.background",{dark:"#0E639C",light:"#007ACC",hc:null},C("buttonBackground","Button background color.")),PDe=Ce("button.hoverBackground",{dark:dce(IH,.2),light:cce(IH,.2),hc:null},C("buttonHoverBackground","Button background color when hovering.")),x2=Ce("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hc:ye.black},C("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),D2=Ce("badge.foreground",{dark:ye.white,light:"#333",hc:ye.white},C("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),HS=Ce("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hc:null},C("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),cy=Ce("scrollbarSlider.background",{dark:ye.fromHex("#797979").transparent(.4),light:ye.fromHex("#646464").transparent(.4),hc:tr(ho,.6)},C("scrollbarSliderBackground","Scrollbar slider background color.")),dy=Ce("scrollbarSlider.hoverBackground",{dark:ye.fromHex("#646464").transparent(.7),light:ye.fromHex("#646464").transparent(.7),hc:tr(ho,.8)},C("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),hy=Ce("scrollbarSlider.activeBackground",{dark:ye.fromHex("#BFBFBF").transparent(.4),light:ye.fromHex("#000000").transparent(.6),hc:ho},C("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),FDe=Ce("progressBar.background",{dark:ye.fromHex("#0E70C0"),light:ye.fromHex("#0E70C0"),hc:ho},C("progressBarBackground","Background color of the progress bar that can show for long running operations.")),BDe=Ce("editorError.background",{dark:null,light:null,hc:null},C("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),I2=Ce("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hc:null},C("editorError.foreground","Foreground color of error squigglies in the editor.")),oce=Ce("editorError.border",{dark:null,light:null,hc:ye.fromHex("#E47777").transparent(.8)},C("errorBorder","Border color of error boxes in the editor.")),WDe=Ce("editorWarning.background",{dark:null,light:null,hc:null},C("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),bp=Ce("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hc:null},C("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),I8=Ce("editorWarning.border",{dark:null,light:null,hc:ye.fromHex("#FFCC00").transparent(.8)},C("warningBorder","Border color of warning boxes in the editor.")),VDe=Ce("editorInfo.background",{dark:null,light:null,hc:null},C("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),qh=Ce("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},C("editorInfo.foreground","Foreground color of info squigglies in the editor.")),AG=Ce("editorInfo.border",{dark:null,light:null,hc:ye.fromHex("#3794FF").transparent(.8)},C("infoBorder","Border color of info boxes in the editor.")),HDe=Ce("editorHint.foreground",{dark:ye.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hc:null},C("editorHint.foreground","Foreground color of hint squigglies in the editor.")),$De=Ce("editorHint.border",{dark:null,light:null,hc:ye.fromHex("#eeeeee").transparent(.8)},C("hintBorder","Border color of hint boxes in the editor.")),sc=Ce("editor.background",{light:"#fffffe",dark:"#1E1E1E",hc:ye.black},C("editorBackground","Editor background color.")),uM=Ce("editor.foreground",{light:"#333333",dark:"#BBBBBB",hc:ye.white},C("editorForeground","Editor default foreground color.")),Yh=Ce("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hc:"#0C141F"},C("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Cp=Ce("editorWidget.foreground",{dark:zt,light:zt,hc:zt},C("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),QP=Ce("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hc:ho},C("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),zDe=Ce("editorWidget.resizeBorder",{light:null,dark:null,hc:null},C("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),lJ=Ce("quickInput.background",{dark:Yh,light:Yh,hc:Yh},C("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),UDe=Ce("quickInput.foreground",{dark:Cp,light:Cp,hc:Cp},C("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),jDe=Ce("quickInputTitle.background",{dark:new ye(new fi(255,255,255,.105)),light:new ye(new fi(0,0,0,.06)),hc:"#000000"},C("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),KDe=Ce("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hc:ye.white},C("pickerGroupForeground","Quick picker color for grouping labels.")),GDe=Ce("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hc:ye.white},C("pickerGroupBorder","Quick picker color for grouping borders.")),qDe=Ce("keybindingLabel.background",{dark:new ye(new fi(128,128,128,.17)),light:new ye(new fi(221,221,221,.4)),hc:ye.transparent},C("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),YDe=Ce("keybindingLabel.foreground",{dark:ye.fromHex("#CCCCCC"),light:ye.fromHex("#555555"),hc:ye.white},C("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),ZDe=Ce("keybindingLabel.border",{dark:new ye(new fi(51,51,51,.6)),light:new ye(new fi(204,204,204,.4)),hc:new ye(new fi(111,195,223))},C("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),XDe=Ce("keybindingLabel.bottomBorder",{dark:new ye(new fi(68,68,68,.6)),light:new ye(new fi(187,187,187,.4)),hc:new ye(new fi(111,195,223))},C("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),o0=Ce("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},C("editorSelectionBackground","Color of the editor selection.")),QDe=Ce("editor.selectionForeground",{light:null,dark:null,hc:"#000000"},C("editorSelectionForeground","Color of the selected text for high contrast.")),OG=Ce("editor.inactiveSelectionBackground",{light:tr(o0,.5),dark:tr(o0,.5),hc:tr(o0,.5)},C("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),MG=Ce("editor.selectionHighlightBackground",{light:dJ(o0,sc,.3,.6),dark:dJ(o0,sc,.3,.6),hc:null},C("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),JDe=Ce("editor.selectionHighlightBorder",{light:null,dark:null,hc:Ja},C("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),eIe=Ce("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hc:null},C("editorFindMatch","Color of the current search match.")),kH=Ce("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hc:null},C("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),tIe=Ce("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hc:null},C("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),nIe=Ce("editor.findMatchBorder",{light:null,dark:null,hc:Ja},C("editorFindMatchBorder","Border color of the current search match.")),iIe=Ce("editor.findMatchHighlightBorder",{light:null,dark:null,hc:Ja},C("findMatchHighlightBorder","Border color of the other search matches.")),rIe=Ce("editor.findRangeHighlightBorder",{dark:null,light:null,hc:tr(Ja,.4)},C("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),oIe=Ce("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hc:"#ADD6FF26"},C("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),Ib=Ce("editorHoverWidget.background",{light:Yh,dark:Yh,hc:Yh},C("hoverBackground","Background color of the editor hover.")),RG=Ce("editorHoverWidget.foreground",{light:Cp,dark:Cp,hc:Cp},C("hoverForeground","Foreground color of the editor hover.")),PG=Ce("editorHoverWidget.border",{light:QP,dark:QP,hc:QP},C("hoverBorder","Border color of the editor hover.")),sIe=Ce("editorHoverWidget.statusBarBackground",{dark:dce(Ib,.2),light:cce(Ib,.05),hc:Yh},C("statusBarBackground","Background color of the editor hover status bar.")),sce=Ce("editorLink.activeForeground",{dark:"#4E94CE",light:ye.blue,hc:ye.cyan},C("activeLinkForeground","Color of active links.")),Z1=Ce("editorInlayHint.foreground",{dark:tr(D2,.8),light:tr(D2,.8),hc:D2},C("editorInlayHintForeground","Foreground color of inline hints")),X1=Ce("editorInlayHint.background",{dark:tr(x2,.6),light:tr(x2,.3),hc:x2},C("editorInlayHintBackground","Background color of inline hints")),aIe=Ce("editorInlayHint.typeForeground",{dark:Z1,light:Z1,hc:Z1},C("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),lIe=Ce("editorInlayHint.typeBackground",{dark:X1,light:X1,hc:X1},C("editorInlayHintBackgroundTypes","Background color of inline hints for types")),uIe=Ce("editorInlayHint.parameterForeground",{dark:Z1,light:Z1,hc:Z1},C("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),cIe=Ce("editorInlayHint.parameterBackground",{dark:X1,light:X1,hc:X1},C("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),dIe=Ce("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hc:"#FFCC00"},C("editorLightBulbForeground","The color used for the lightbulb actions icon.")),hIe=Ce("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),TH=new ye(new fi(155,185,85,.2)),NH=new ye(new fi(255,0,0,.2)),ace=Ce("diffEditor.insertedTextBackground",{dark:TH,light:TH,hc:null},C("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),lce=Ce("diffEditor.removedTextBackground",{dark:NH,light:NH,hc:null},C("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),fIe=Ce("diffEditor.insertedTextBorder",{dark:null,light:null,hc:"#33ff2eff"},C("diffEditorInsertedOutline","Outline color for the text that got inserted.")),gIe=Ce("diffEditor.removedTextBorder",{dark:null,light:null,hc:"#FF008F"},C("diffEditorRemovedOutline","Outline color for text that got removed.")),pIe=Ce("diffEditor.border",{dark:null,light:null,hc:ho},C("diffEditorBorder","Border color between the two text editors.")),mIe=Ce("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hc:null},C("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),_Ie=Ce("list.focusBackground",{dark:null,light:null,hc:null},C("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vIe=Ce("list.focusForeground",{dark:null,light:null,hc:null},C("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),bIe=Ce("list.focusOutline",{dark:Db,light:Db,hc:Ja},C("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Q1=Ce("list.activeSelectionBackground",{dark:"#094771",light:"#0060C0",hc:null},C("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),s0=Ce("list.activeSelectionForeground",{dark:ye.white,light:ye.white,hc:null},C("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JP=Ce("list.activeSelectionIconForeground",{dark:null,light:null,hc:null},C("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),CIe=Ce("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hc:null},C("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),wIe=Ce("list.inactiveSelectionForeground",{dark:null,light:null,hc:null},C("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),yIe=Ce("list.inactiveSelectionIconForeground",{dark:null,light:null,hc:null},C("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),SIe=Ce("list.inactiveFocusBackground",{dark:null,light:null,hc:null},C("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),LIe=Ce("list.inactiveFocusOutline",{dark:null,light:null,hc:null},C("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),EIe=Ce("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hc:null},C("listHoverBackground","List/Tree background when hovering over items using the mouse.")),xIe=Ce("list.hoverForeground",{dark:null,light:null,hc:null},C("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),DIe=Ce("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hc:null},C("listDropBackground","List/Tree drag and drop background when moving items around using the mouse.")),x9=Ce("list.highlightForeground",{dark:"#18A3FF",light:"#0066BF",hc:Db},C("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),IIe=Ce("listFilterWidget.background",{light:"#efc1ad",dark:"#653723",hc:ye.black},C("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),kIe=Ce("listFilterWidget.outline",{dark:ye.transparent,light:ye.transparent,hc:"#f38518"},C("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),TIe=Ce("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hc:ho},C("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),NIe=Ce("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hc:"#a9a9a9"},C("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),AIe=Ce("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hc:null},C("tableColumnsBorder","Table border color between columns.")),OIe=Ce("tree.tableOddRowsBackground",{dark:tr(zt,.04),light:tr(zt,.04),hc:null},C("tableOddRowsBackgroundColor","Background color for odd table rows.")),uJ=Ce("quickInput.list.focusBackground",{dark:null,light:null,hc:null},"",void 0,C("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),MIe=Ce("quickInputList.focusForeground",{dark:s0,light:s0,hc:s0},C("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),RIe=Ce("quickInputList.focusIconForeground",{dark:JP,light:JP,hc:JP},C("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),e4=Ce("quickInputList.focusBackground",{dark:xA(uJ,Q1),light:xA(uJ,Q1),hc:null},C("quickInput.listFocusBackground","Quick picker background color for the focused item.")),PIe=Ce("menu.border",{dark:null,light:null,hc:ho},C("menuBorder","Border color of menus.")),FIe=Ce("menu.foreground",{dark:aJ,light:zt,hc:aJ},C("menuForeground","Foreground color of menu items.")),BIe=Ce("menu.background",{dark:E9,light:E9,hc:E9},C("menuBackground","Background color of menu items.")),WIe=Ce("menu.selectionForeground",{dark:s0,light:s0,hc:s0},C("menuSelectionForeground","Foreground color of the selected menu item in menus.")),VIe=Ce("menu.selectionBackground",{dark:Q1,light:Q1,hc:Q1},C("menuSelectionBackground","Background color of the selected menu item in menus.")),HIe=Ce("menu.selectionBorder",{dark:null,light:null,hc:Ja},C("menuSelectionBorder","Border color of the selected menu item in menus.")),$Ie=Ce("menu.separatorBackground",{dark:"#BBBBBB",light:"#888888",hc:ho},C("menuSeparatorBackground","Color of a separator menu item in menus.")),zIe=Ce("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hc:null},C("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),k8=Ce("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},C("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),uce=Ce("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},C("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),UIe=Ce("editorOverviewRuler.unicodeForeground",{dark:"#d186167e",light:"#d186167e",hc:"#AB5A00"},C("overviewRulerUnicodeForeground","Overview ruler marker color for highlighted unicode characters. The color must not be opaque so as not to hide underlying decorations."),!0),FG=Ce("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},C("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),T8=Ce("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hc:"#ffffff"},C("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),cJ=Ce("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hc:"#ffffff"},C("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),jIe=Ce("minimap.errorHighlight",{dark:new ye(new fi(255,18,18,.7)),light:new ye(new fi(255,18,18,.7)),hc:new ye(new fi(255,50,50,1))},C("minimapError","Minimap marker color for errors.")),KIe=Ce("minimap.warningHighlight",{dark:bp,light:bp,hc:I8},C("overviewRuleWarning","Minimap marker color for warnings.")),GIe=Ce("minimap.background",{dark:null,light:null,hc:null},C("minimapBackground","Minimap background color.")),qIe=Ce("minimap.foregroundOpacity",{dark:ye.fromHex("#000f"),light:ye.fromHex("#000f"),hc:ye.fromHex("#000f")},C("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),YIe=Ce("minimap.unicodeHighlight",{light:"#d18616",dark:"#d18616",hc:"#AB5A00"},C("minimapUnicodeHighlight","Minimap marker color for highlighted unicode characters.")),ZIe=Ce("minimapSlider.background",{light:tr(cy,.5),dark:tr(cy,.5),hc:tr(cy,.5)},C("minimapSliderBackground","Minimap slider background color.")),XIe=Ce("minimapSlider.hoverBackground",{light:tr(dy,.5),dark:tr(dy,.5),hc:tr(dy,.5)},C("minimapSliderHoverBackground","Minimap slider background color when hovering.")),QIe=Ce("minimapSlider.activeBackground",{light:tr(hy,.5),dark:tr(hy,.5),hc:tr(hy,.5)},C("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),JIe=Ce("problemsErrorIcon.foreground",{dark:I2,light:I2,hc:I2},C("problemsErrorIconForeground","The color used for the problems error icon.")),eke=Ce("problemsWarningIcon.foreground",{dark:bp,light:bp,hc:bp},C("problemsWarningIconForeground","The color used for the problems warning icon.")),tke=Ce("problemsInfoIcon.foreground",{dark:qh,light:qh,hc:qh},C("problemsInfoIconForeground","The color used for the problems info icon."));function nke(i,e){var t,n,r;switch(i.op){case 0:return(t=jg(i.value,e))===null||t===void 0?void 0:t.darken(i.factor);case 1:return(n=jg(i.value,e))===null||n===void 0?void 0:n.lighten(i.factor);case 2:return(r=jg(i.value,e))===null||r===void 0?void 0:r.transparent(i.factor);case 3:for(const a of i.values){const u=jg(a,e);if(u)return u}return;case 5:return jg(e.defines(i.if)?i.then:i.else,e);case 4:const o=jg(i.value,e);if(!o)return;const s=jg(i.background,e);return s?o.isDarkerThan(s)?ye.getLighterColor(o,s,i.factor).transparent(i.transparency):ye.getDarkerColor(o,s,i.factor).transparent(i.transparency):o.transparent(i.factor*i.transparency);default:throw cue()}}function cce(i,e){return{op:0,value:i,factor:e}}function dce(i,e){return{op:1,value:i,factor:e}}function tr(i,e){return{op:2,value:i,factor:e}}function xA(...i){return{op:3,values:i}}function dJ(i,e,t,n){return{op:4,value:i,background:e,factor:t,transparency:n}}function jg(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?ye.fromHex(i):e.getColor(i);if(i instanceof ye)return i;if(typeof i=="object")return nke(i,e)}}const hce="vscode://schemas/workbench-colors";let fce=Zr.as(L8.JSONContribution);fce.registerSchema(hce,E8.getColorSchema());const hJ=new er(()=>fce.notifySchemaChanged(hce),200);E8.onDidChangeSchema(()=>{hJ.isScheduled()||hJ.schedule()});class BG{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(){return new gce(this.x-mp.scrollX,this.y-mp.scrollY)}}class gce{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(){return new BG(this.clientX+mp.scrollX,this.clientY+mp.scrollY)}}class ike{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r,this._editorPagePositionBrand=void 0}}function pce(i){const e=Us(i);return new ike(e.left,e.top,e.width,e.height)}class kb extends Ju{constructor(e,t){super(e),this._editorMouseEventBrand=void 0,this.pos=new BG(this.posx,this.posy),this.editorPos=pce(t)}}class rke{constructor(e){this._editorViewDomNode=e}_create(e){return new kb(e,this._editorViewDomNode)}onContextMenu(e,t){return qe(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return qe(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return qe(e,"mousedown",n=>{t(this._create(n))})}onMouseLeave(e,t){return lG(e,n=>{t(this._create(n))})}onMouseMoveThrottled(e,t,n,r){return uG(e,"mousemove",t,(s,a)=>n(s,this._create(a)),r)}}class oke{constructor(e){this._editorViewDomNode=e}_create(e){return new kb(e,this._editorViewDomNode)}onPointerUp(e,t){return qe(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return qe(e,"pointerdown",n=>{t(this._create(n))})}onPointerLeave(e,t){return uEe(e,n=>{t(this._create(n))})}onPointerMoveThrottled(e,t,n,r){return uG(e,"pointermove",t,(s,a)=>n(s,this._create(a)),r)}}class ske extends Oe{constructor(e){super(),this._editorViewDomNode=e,this._globalMouseMoveMonitor=this._register(new yC),this._keydownListener=null}startMonitoring(e,t,n,r,o){this._keydownListener=ts(document,"keydown",a=>{a.toKeybinding().isModifierKey()||this._globalMouseMoveMonitor.stopMonitoring(!0,a.browserEvent)},!0);const s=(a,u)=>n(a,new kb(u,this._editorViewDomNode));this._globalMouseMoveMonitor.startMonitoring(e,t,s,r,a=>{this._keydownListener.dispose(),o(a)})}stopMonitoring(){this._globalMouseMoveMonitor.stopMonitoring(!0)}}class mce{constructor(e){this._editor=e,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new er(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const r=this._counter++;n=new ake(t,`dyn-rule-${r}`,d8(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}class ake{constructor(e,t,n,r){this.key=e,this.className=t,this.properties=r,this._referenceCount=0,this._styleElement=cc(n),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const r in t){const o=t[r];let s;typeof o=="object"?s=`var(${Gue(o.id)})`:s=o;const a=lke(r);n+=`
	${a}: ${s};`}return n+=`
}`,n}dispose(){this._styleElement.remove()}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function lke(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class cM extends Oe{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,r=e.length;n<r;n++){let o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class Cc extends cM{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class lg{static write(e,t){e instanceof Kue,e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],r=0;for(;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[r++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(r);for(let s=0;s<r;s++)o[s]=n[r-s-1];return o}}class uke{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e){return this._viewLayout.getVerticalOffsetForLineNumber(e)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class cke extends uke{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class dke{constructor(e,t,n){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n}}class N8{constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}static from(e){const t=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const o=e[n];t[n]=new N8(o.left,o.width)}return t}toString(){return`[${this.left},${this.width}]`}}class fy{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class hke{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class fke{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class D9{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,r,o){const s=this._createRange();try{return s.setStart(e,t),s.setEnd(n,r),s.getClientRects()}catch{return null}finally{this._detachRange(s,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(fy.compare);let t=[],n=0,r=e[0];for(let o=1,s=e.length;o<s;o++){const a=e[o];r.left+r.width+.9>=a.left?r.width=Math.max(r.width,a.left+a.width-r.left):(t[n++]=r,r=a)}return t[n++]=r,t}static _createHorizontalRangesFromClientRects(e,t){if(!e||e.length===0)return null;const n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];n[r]=new fy(Math.max(0,s.left-t),s.width)}return this._mergeAdjacentRanges(n)}static readHorizontalRanges(e,t,n,r,o,s,a){const d=e.children.length-1;if(0>d)return null;if(t=Math.min(d,Math.max(0,t)),r=Math.min(d,Math.max(0,r)),t===r&&n===o&&n===0&&!e.children[t].firstChild){const m=e.children[t].getClientRects();return this._createHorizontalRangesFromClientRects(m,s)}t!==r&&r>0&&o===0&&(r--,o=1073741824);let h=e.children[t].firstChild,f=e.children[r].firstChild;if((!h||!f)&&(!h&&n===0&&t>0&&(h=e.children[t-1].firstChild,n=1073741824),!f&&o===0&&r>0&&(f=e.children[r-1].firstChild,o=1073741824)),!h||!f)return null;n=Math.min(h.textContent.length,Math.max(0,n)),o=Math.min(f.textContent.length,Math.max(0,o));const p=this._readClientRects(h,n,f,o,a);return this._createHorizontalRangesFromClientRects(p,s)}}class Nu{constructor(e,t,n,r){this.startColumn=e,this.endColumn=t,this.className=n,this.type=r,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,r=t.length;if(n!==r)return!1;for(let o=0;o<n;o++)if(!Nu._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const r=t+1,o=n+1,s=n-t,a=[];let u=0;for(const d of e)d.endColumn<=r||d.startColumn>=o||(a[u++]=new Nu(Math.max(1,d.startColumn-r+1),Math.min(s+1,d.endColumn-r+1),d.className,d.type));return a}static filter(e,t,n,r){if(e.length===0)return[];let o=[],s=0;for(let a=0,u=e.length;a<u;a++){const d=e[a],h=d.range;if(h.endLineNumber<t||h.startLineNumber>t||h.isEmpty()&&(d.type===0||d.type===3))continue;const f=h.startLineNumber===t?h.startColumn:n,p=h.endLineNumber===t?h.endColumn:r;o[s++]=new Nu(f,p,d.inlineClassName,d.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Nu._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class fJ{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=r}}let gke=class AH{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,r=e.length;n<r;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let r=0;for(;r+1<this.count&&this.stopOffsets[r]===this.stopOffsets[r+1];)r++;n.push(new fJ(t,this.stopOffsets[r],this.classNames.join(" "),AH._metadata(this.metadata))),t=this.stopOffsets[r]+1,this.stopOffsets.splice(0,r+1),this.classNames.splice(0,r+1),this.metadata.splice(0,r+1),this.count-=r+1}return this.count>0&&t<e&&(n.push(new fJ(t,e-1,this.classNames.join(" "),AH._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let r=0;r<this.count;r++)if(this.stopOffsets[r]>=e){this.stopOffsets.splice(r,0,e),this.classNames.splice(r,0,t),this.metadata.splice(r,0,n);break}this.count++}};class pke{static normalize(e,t){if(t.length===0)return[];let n=[];const r=new gke;let o=0;for(let s=0,a=t.length;s<a;s++){const u=t[s];let d=u.startColumn,h=u.endColumn;const f=u.className,p=u.type===1?2:u.type===2?4:0;if(d>1){const b=e.charCodeAt(d-2);Vo(b)&&d--}if(h>1){const b=e.charCodeAt(h-2);Vo(b)&&h--}const m=d-1,v=h-2;o=r.consumeLowerThan(m,o,n),r.count===0&&(o=m),r.insert(v,f,p)}return r.consumeLowerThan(1073741824,o,n),n}}const gJ=typeof Buffer<"u";let I9;class A8{constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}static wrap(e){return gJ&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new A8(e)}toString(){return gJ?this.buffer.toString():(I9||(I9=new TextDecoder),I9.decode(this.buffer))}}function mke(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function _ke(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function wh(i,e){return i[e]*Math.pow(2,24)+i[e+1]*Math.pow(2,16)+i[e+2]*Math.pow(2,8)+i[e+3]}function yh(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function pJ(i,e){return i[e]}function mJ(i,e,t){i[t]=e}let k9;function _ce(){return k9||(k9=new TextDecoder("UTF-16LE")),k9}let T9;function vke(){return T9||(T9=new TextDecoder("UTF-16BE")),T9}let N9;function vce(){return N9||(N9=Ole()?_ce():vke()),N9}const bce=typeof TextDecoder<"u";let Tb,OH;bce?(Tb=i=>new Cke(i),OH=bke):(Tb=i=>new wke,OH=Cce);function bke(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?Cce(i,e,t):_ce().decode(n)}function Cce(i,e,t){let n=[],r=0;for(let o=0;o<t;o++){const s=mke(i,e);e+=2,n[r++]=String.fromCharCode(s)}return n.join("")}class Cke{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return vce().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}write1(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||Vo(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCII(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIIString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class wke{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCII(e){this._pieces[this._piecesLen++]=String.fromCharCode(e)}appendASCIIString(e){this._pieces[this._piecesLen++]=e}}class Jo{constructor(e,t,n){this._linePartBrand=void 0,this.endIndex=e,this.type=t,this.metadata=n}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class yke{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class SC{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b,L,S,y,E){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=r,this.isBasicASCII=o,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=u,this.lineDecorations=d.sort(Nu.compare),this.tabSize=h,this.startVisibleColumn=f,this.spaceWidth=p,this.stopRenderingLineAfter=b,this.renderWhitespace=L==="all"?4:L==="boundary"?1:L==="selection"?2:L==="trailing"?3:0,this.renderControlCharacters=S,this.fontLigatures=y,this.selectionsOnLine=E&&E.sort((V,R)=>V.startOffset<R.startOffset?-1:1);const A=Math.abs(v-p),N=Math.abs(m-p);A<N?(this.renderSpaceWidth=v,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=m,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Nu.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class WG{constructor(e,t){this.partIndex=e,this.charIndex=t}}class Tf{constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._absoluteOffsets=new Uint32Array(this.length)}static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}setColumnInfo(e,t,n,r){const o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._absoluteOffsets[e-1]=r+n}getAbsoluteOffset(e){return this._absoluteOffsets.length===0?0:this._absoluteOffsets[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=Tf.getPartIndex(t),r=Tf.getCharIndex(t);return new WG(n,r)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let r=(e<<16|n<<0)>>>0,o=0,s=this.length-1;for(;o+1<s;){let b=o+s>>>1,L=this._data[b];if(L===r)return b;L>r?s=b:o=b}if(o===s)return o;let a=this._data[o],u=this._data[s];if(a===r)return o;if(u===r)return s;let d=Tf.getPartIndex(a),h=Tf.getCharIndex(a),f=Tf.getPartIndex(u),p;d!==f?p=t:p=Tf.getCharIndex(u);let m=n-h,v=p-n;return m<=v?o:s}}class MH{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function O8(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendASCIIString("<span>");let t=0,n=0,r=0;for(const s of i.lineDecorations)(s.type===1||s.type===2)&&(e.appendASCIIString('<span class="'),e.appendASCIIString(s.className),e.appendASCIIString('"></span>'),s.type===1&&(r|=1,t++),s.type===2&&(r|=2,n++));e.appendASCIIString("</span>");const o=new Tf(1,t+n);return o.setColumnInfo(1,t,0,0),new MH(o,!1,r)}return e.appendASCIIString("<span><span></span></span>"),new MH(new Tf(0,0),!1,0)}return Nke(Eke(i),e)}class Ske{constructor(e,t,n,r){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=r}}function M8(i){let e=Tb(1e4),t=O8(i,e);return new Ske(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Lke{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=r,this.isOverflowing=o,this.parts=s,this.containsForeignElements=a,this.fauxIndentLength=u,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=f,this.spaceWidth=p,this.renderSpaceCharCode=m,this.renderWhitespace=v,this.renderControlCharacters=b}}function Eke(i){const e=i.lineContent;let t,n;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=i.stopRenderingLineAfter):(t=!1,n=e.length);let r=xke(i.lineTokens,i.fauxIndentLength,n);i.renderControlCharacters&&!i.isBasicASCII&&(r=Ike(e,r)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3)&&(r=kke(i,e,n,r));let o=0;if(i.lineDecorations.length>0){for(let s=0,a=i.lineDecorations.length;s<a;s++){const u=i.lineDecorations[s];u.type===3||u.type===1?o|=1:u.type===2&&(o|=2)}r=Tke(e,n,r,i.lineDecorations)}return i.containsRTL||(r=Dke(e,r,!i.isBasicASCII||i.fontLigatures)),new Lke(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,n,t,r,o,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function xke(i,e,t){let n=[],r=0;e>0&&(n[r++]=new Jo(e,"",0));for(let o=0,s=i.getCount();o<s;o++){const a=i.getEndOffset(o);if(a<=e)continue;const u=i.getClassName(o);if(a>=t){n[r++]=new Jo(t,u,0);break}n[r++]=new Jo(a,u,0)}return n}function Dke(i,e,t){let n=0,r=[],o=0;if(t)for(let s=0,a=e.length;s<a;s++){const u=e[s],d=u.endIndex;if(n+50<d){const h=u.type,f=u.metadata;let p=-1,m=n;for(let v=n;v<d;v++)i.charCodeAt(v)===32&&(p=v),p!==-1&&v-m>=50&&(r[o++]=new Jo(p+1,h,f),m=p+1,p=-1);m!==d&&(r[o++]=new Jo(d,h,f))}else r[o++]=u;n=d}else for(let s=0,a=e.length;s<a;s++){const u=e[s],d=u.endIndex;let h=d-n;if(h>50){const f=u.type,p=u.metadata,m=Math.ceil(h/50);for(let v=1;v<m;v++){let b=n+v*50;r[o++]=new Jo(b,f,p)}r[o++]=new Jo(d,f,p)}else r[o++]=u;n=d}return r}function wce(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function Ike(i,e){let t=[],n=new Jo(0,"",0),r=0;for(const o of e){const s=o.endIndex;for(;r<s;r++){const a=i.charCodeAt(r);wce(a)&&(r>n.endIndex&&(n=new Jo(r,o.type,o.metadata),t.push(n)),n=new Jo(r+1,"mtkcontrol",o.metadata),t.push(n))}r>n.endIndex&&(n=new Jo(s,o.type,o.metadata),t.push(n))}return t}function kke(i,e,t,n){const r=i.continuesWithWrappedLine,o=i.fauxIndentLength,s=i.tabSize,a=i.startVisibleColumn,u=i.useMonospaceOptimizations,d=i.selectionsOnLine,h=i.renderWhitespace===1,f=i.renderWhitespace===3,p=i.renderSpaceWidth!==i.spaceWidth;let m=[],v=0,b=0,L=n[b].type,S=n[b].endIndex;const y=n.length;let E=!1,A=ka(e),N;A===-1?(E=!0,A=t,N=t):N=Jf(e);let V=!1,R=0,M=d&&d[R],K=a%s;for(let $=o;$<t;$++){const D=e.charCodeAt($);M&&$>=M.endOffset&&(R++,M=d&&d[R]);let T;if($<A||$>N)T=!0;else if(D===9)T=!0;else if(D===32)if(h)if(V)T=!0;else{const F=$+1<t?e.charCodeAt($+1):0;T=F===32||F===9}else T=!0;else T=!1;if(T&&d&&(T=!!M&&M.startOffset<=$&&M.endOffset>$),T&&f&&(T=E||$>N),V){if(!T||!u&&K>=s){if(p){const F=v>0?m[v-1].endIndex:o;for(let B=F+1;B<=$;B++)m[v++]=new Jo(B,"mtkw",1)}else m[v++]=new Jo($,"mtkw",1);K=K%s}}else($===S||T&&$>o)&&(m[v++]=new Jo($,L,0),K=K%s);for(D===9?K=s:ag(D)?K+=2:K++,V=T;$===S&&(b++,b<y);)L=n[b].type,S=n[b].endIndex}let X=!1;if(V)if(r&&h){let $=t>0?e.charCodeAt(t-1):0,D=t>1?e.charCodeAt(t-2):0;$===32&&D!==32&&D!==9||(X=!0)}else X=!0;if(X)if(p){const $=v>0?m[v-1].endIndex:o;for(let D=$+1;D<=t;D++)m[v++]=new Jo(D,"mtkw",1)}else m[v++]=new Jo(t,"mtkw",1);else m[v++]=new Jo(t,L,0);return m}function Tke(i,e,t,n){n.sort(Nu.compare);const r=pke.normalize(i,n),o=r.length;let s=0,a=[],u=0,d=0;for(let f=0,p=t.length;f<p;f++){const m=t[f],v=m.endIndex,b=m.type,L=m.metadata;for(;s<o&&r[s].startOffset<v;){const S=r[s];if(S.startOffset>d&&(d=S.startOffset,a[u++]=new Jo(d,b,L)),S.endOffset+1<=v)d=S.endOffset+1,a[u++]=new Jo(d,b+" "+S.className,L|S.metadata),s++;else{d=v,a[u++]=new Jo(d,b+" "+S.className,L|S.metadata);break}}v>d&&(d=v,a[u++]=new Jo(d,b,L))}const h=t[t.length-1].endIndex;if(s<o&&r[s].startOffset===h)for(;s<o&&r[s].startOffset===h;){const f=r[s];a[u++]=new Jo(d,f.className,f.metadata),s++}return a}function Nke(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,r=i.containsForeignElements,o=i.lineContent,s=i.len,a=i.isOverflowing,u=i.parts,d=i.fauxIndentLength,h=i.tabSize,f=i.startVisibleColumn,p=i.containsRTL,m=i.spaceWidth,v=i.renderSpaceCharCode,b=i.renderWhitespace,L=i.renderControlCharacters,S=new Tf(s+1,u.length);let y=!1,E=0,A=f,N=0,V=0,R=0,M=0;p?e.appendASCIIString('<span dir="ltr">'):e.appendASCIIString("<span>");for(let K=0,X=u.length;K<X;K++){M+=R;const $=u[K],D=$.endIndex,T=$.type,F=b!==0&&$.isWhitespace(),B=F&&!t&&(T==="mtkw"||!r),U=E===D&&$.isPseudoAfter();if(N=0,e.appendASCIIString('<span class="'),e.appendASCIIString(B?"mtkz":T),e.appendASCII(34),F){let G=0;{let Z=E,z=A;for(;Z<D;Z++){const Y=(o.charCodeAt(Z)===9?h-z%h:1)|0;G+=Y,Z>=d&&(z+=Y)}}for(B&&(e.appendASCIIString(' style="width:'),e.appendASCIIString(String(m*G)),e.appendASCIIString('px"')),e.appendASCII(62);E<D;E++){S.setColumnInfo(E+1,K-V,N,M),V=0;const Z=o.charCodeAt(E);let z;if(Z===9){z=h-A%h|0,!n||z>1?e.write1(8594):e.write1(65515);for(let O=2;O<=z;O++)e.write1(160)}else z=1,e.write1(v);N+=z,E>=d&&(A+=z)}R=G}else{let G=0;for(e.appendASCII(62);E<D;E++){S.setColumnInfo(E+1,K-V,N,M),V=0;const Z=o.charCodeAt(E);let z=1,O=1;switch(Z){case 9:z=h-A%h,O=z;for(let Y=1;Y<=z;Y++)e.write1(160);break;case 32:e.write1(160);break;case 60:e.appendASCIIString("&lt;");break;case 62:e.appendASCIIString("&gt;");break;case 38:e.appendASCIIString("&amp;");break;case 0:L?e.write1(9216):e.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.write1(65533);break;default:ag(Z)&&O++,L&&Z<32?e.write1(9216+Z):L&&Z===127?e.write1(9249):L&&wce(Z)?(e.appendASCIIString("[U+"),e.appendASCIIString(Ake(Z)),e.appendASCIIString("]"),z=8):e.write1(Z)}N+=z,G+=z,E>=d&&(A+=O)}R=G}U?V++:V=0,E>=s&&!y&&$.isPseudoAfter()&&(y=!0,S.setColumnInfo(E+1,K,N,M)),e.appendASCIIString("</span>")}return y||S.setColumnInfo(s+1,u.length-1,N,M),a&&e.appendASCIIString("<span>&hellip;</span>"),e.appendASCIIString("</span>"),new MH(S,p,r)}function Ake(i){return i.toString(16).toUpperCase().padStart(4,"0")}const Oke=function(){return Gh?!0:!(Xa||yl||qc)}();let gy=!0;class _J{constructor(e,t){this._domNode=e,this._clientRectDeltaLeft=0,this._clientRectDeltaLeftRead=!1,this.endNode=t}get clientRectDeltaLeft(){return this._clientRectDeltaLeftRead||(this._clientRectDeltaLeftRead=!0,this._clientRectDeltaLeft=this._domNode.getBoundingClientRect().left),this._clientRectDeltaLeft}}class vJ{constructor(e,t){this.themeType=t;const n=e.options,r=n.get(43);this.renderWhitespace=n.get(87),this.renderControlCharacters=n.get(82),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!n.get(29),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(58),this.stopRenderingLineAfter=n.get(104),this.fontLigatures=n.get(44)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Ff{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=ri(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return this._options.themeType===Jc.HIGH_CONTRAST||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=n.getViewLineRenderingData(e),s=this._options,a=Nu.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let u=null;if(s.themeType===Jc.HIGH_CONTRAST||this._options.renderWhitespace==="selection"){const p=n.selections;for(const m of p){if(m.endLineNumber<e||m.startLineNumber>e)continue;const v=m.startLineNumber===e?m.startColumn:o.minColumn,b=m.endLineNumber===e?m.endColumn:o.maxColumn;v<b&&(s.themeType===Jc.HIGH_CONTRAST||this._options.renderWhitespace!=="selection"?a.push(new Nu(v,b,"inline-selected-text",0)):(u||(u=[]),u.push(new yke(v-1,b-1))))}}const d=new SC(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,a,o.tabSize,o.startVisibleColumn,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==Du.OFF,u);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;r.appendASCIIString('<div style="top:'),r.appendASCIIString(String(t)),r.appendASCIIString("px;height:"),r.appendASCIIString(String(this._options.lineHeight)),r.appendASCIIString('px;" class="'),r.appendASCIIString(Ff.CLASS_NAME),r.appendASCIIString('">');const h=O8(d,r);r.appendASCIIString("</div>");let f=null;return gy&&Oke&&o.isBasicASCII&&s.useMonospaceOptimizations&&h.containsForeignElements===0&&o.content.length<300&&d.lineTokens.getCount()<100&&(f=new DR(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping)),f||(f=Sce(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=f,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(){return this._renderedViewLine?this._renderedViewLine.getWidth():0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof DR:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof DR?this._renderedViewLine.monospaceAssumptionsAreValid():gy}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof DR&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,r){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const o=this._renderedViewLine.input.stopRenderingLineAfter;let s=!1;o!==-1&&t>o+1&&n>o+1&&(s=!0),o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);const a=this._renderedViewLine.getVisibleRangesForRange(e,t,n,r);return a&&a.length>0?new fke(s,a):null}getColumnOfNodeOffset(e,t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t,n):1}}Ff.CLASS_NAME="view-line";class DR{constructor(e,t,n){this.domNode=e,this.input=t,this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(){return Math.round(this._getCharPosition(this._characterMapping.length))}getWidthIsFast(){return!0}monospaceAssumptionsAreValid(){if(!this.domNode)return gy;const e=this.getWidth(),t=this.domNode.domNode.firstChild.offsetWidth;return Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),gy=!1),gy}toSlowRenderedLine(){return Sce(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,r){const o=this._getCharPosition(t),s=this._getCharPosition(n);return[new fy(o,s-o)]}_getCharPosition(e){const t=this._characterMapping.getAbsoluteOffset(e);return this._charWidth*t}getColumnOfNodeOffset(e,t,n){const r=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new WG(o,n),r)}}class yce{constructor(e,t,n,r,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,r);if(o===-1)return null;const s=this._readPixelOffset(this.domNode,e,n,r);return s===-1?null:[new fy(o,s-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,r)}_readVisibleRangesForRange(e,t,n,r,o){if(n===r){const s=this._readPixelOffset(e,t,n,o);return s===-1?null:[new fy(s,0)]}else return this._readRawVisibleRangesForRange(e,n,r,o)}_readPixelOffset(e,t,n,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth();const o=this._getReadingTarget(e);return o.firstChild?o.firstChild.offsetWidth:0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[n];if(o!==-1)return o;const s=this._actualReadPixelOffset(e,t,n,r);return this._pixelOffsetCache[n]=s,s}return this._actualReadPixelOffset(e,t,n,r)}_actualReadPixelOffset(e,t,n,r){if(this._characterMapping.length===0){const u=D9.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,r.clientRectDeltaLeft,r.endNode);return!u||u.length===0?-1:u[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth();const o=this._characterMapping.getDomPosition(n),s=D9.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,r.clientRectDeltaLeft,r.endNode);if(!s||s.length===0)return-1;const a=s[0].left;if(this.input.isBasicASCII){const u=this._characterMapping.getAbsoluteOffset(n),d=Math.round(this.input.spaceWidth*u);if(Math.abs(d-a)<=1)return d}return a}_readRawVisibleRangesForRange(e,t,n,r){if(t===1&&n===this._characterMapping.length)return[new fy(0,this.getWidth())];const o=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(n);return D9.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,s.partIndex,s.charIndex,r.clientRectDeltaLeft,r.endNode)}getColumnOfNodeOffset(e,t,n){const r=t.textContent.length;let o=-1;for(;t;)t=t.previousSibling,o++;return this._characterMapping.getColumn(new WG(o,n),r)}}class Mke extends yce{_readVisibleRangesForRange(e,t,n,r,o){const s=super._readVisibleRangesForRange(e,t,n,r,o);if(!s||s.length===0||n===r||n===1&&r===this._characterMapping.length)return s;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,r,o);if(a!==-1){const u=s[s.length-1];u.left<a&&(u.width=a-u.left)}}return s}}const Sce=function(){return n0?Rke:Pke}();function Rke(i,e,t,n,r){return new Mke(i,e,t,n,r)}function Pke(i,e,t,n,r){return new yce(i,e,t,n,r)}var Sl;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Sl||(Sl={}));var bl;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(bl||(bl={}));class t4{constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),this.indentSize=e.tabSize|0,this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&ed(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class DA{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var J1;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(J1||(J1={}));class Ow{constructor(e,t,n){this.visibleColumn=e,this.className=t,this.horizontalLine=n}}class RH{constructor(e,t){this.top=e,this.endColumn=t}}class A9{constructor(e,t,n,r,o,s){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=o,this._isTracked=s}}class Fke{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function IR(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Ds{constructor(e,t,n,r){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=r}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${IR(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${IR(this.oldText)}")`:`(replace@${this.oldPosition} "${IR(this.oldText)}" with "${IR(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const r=t.length;yh(e,r,n),n+=4;for(let o=0;o<r;o++)_ke(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){const n=wh(e,t);return t+=4,OH(e,t,n)}writeSize(){return 4+4+Ds._writeStringSize(this.oldText)+Ds._writeStringSize(this.newText)}write(e,t){return yh(e,this.oldPosition,t),t+=4,yh(e,this.newPosition,t),t+=4,t=Ds._writeString(e,this.oldText,t),t=Ds._writeString(e,this.newText,t),t}static read(e,t,n){const r=wh(e,t);t+=4;const o=wh(e,t);t+=4;const s=Ds._readString(e,t);t+=Ds._writeStringSize(s);const a=Ds._readString(e,t);return t+=Ds._writeStringSize(a),n.push(new Ds(r,s,o,a)),t}}function Bke(i,e){return i===null||i.length===0?e:new Ef(i,e).compress()}class Ef{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),r=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(r),r=this._getCurr(++t);continue}if(r===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldEnd<=n.newPosition){this._acceptCurr(r),r=this._getCurr(++t);continue}if(n.newEnd<=r.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(r.oldPosition<n.newPosition){const[d,h]=Ef._splitCurr(r,n.newPosition-r.oldPosition);this._acceptCurr(d),r=h;continue}if(n.newPosition<r.oldPosition){const[d,h]=Ef._splitPrev(n,r.oldPosition-n.newPosition);this._acceptPrev(d),n=h;continue}let a,u;if(r.oldEnd===n.newEnd)a=n,u=r,n=this._getPrev(++e),r=this._getCurr(++t);else if(r.oldEnd<n.newEnd){const[d,h]=Ef._splitPrev(n,r.oldLength);a=d,u=r,n=h,r=this._getCurr(++t)}else{const[d,h]=Ef._splitCurr(r,n.newLength);a=n,u=d,n=this._getPrev(++e),r=h}this._result[this._resultLen++]=new Ds(a.oldPosition,a.oldText,u.newPosition,u.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=u.newLength-u.oldLength}const o=Ef._merge(this._result);return Ef._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=Ef._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Ef._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Ds(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Ds(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),r=e.newText.substr(t);return[new Ds(e.oldPosition,e.oldText,e.newPosition,n),new Ds(e.oldEnd,"",e.newPosition+t,r)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),r=e.oldText.substr(t);return[new Ds(e.oldPosition,n,e.newPosition,e.newText),new Ds(e.oldPosition+t,r,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,r=e[0];for(let o=1;o<e.length;o++){const s=e[o];r.oldEnd===s.oldPosition?r=new Ds(r.oldPosition,r.oldText+s.oldText,r.newPosition,r.newText+s.newText):(t[n++]=r,r=s)}return t[n++]=r,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let r=0;r<e.length;r++){const o=e[r];o.oldText!==o.newText&&(t[n++]=o)}return t}}function Wke(i){return i.replace(/[\\/]/g,Do.sep)}function Vke(i){return i.indexOf("/")===-1&&(i=Wke(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function Hke(i,e,t,n=q1){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!mG(i,e))return!1;if(e.length===i.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,i.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function $ke(i){return i>=65&&i<=90||i>=97&&i<=122}function zke(i){const e=oG(i);return As?i.length>3?!1:Lce(e)&&(i.length===2||e.charCodeAt(2)===92):e===Do.sep}function Lce(i,e){return(e!==void 0?e:As)?$ke(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function n4(i){return SF(i,!0)}class Uke{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:yA(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}joinPath(e,...t){return sn.joinPath(e,...t)}basenameOrAuthority(e){return gc(e)||e.authority}basename(e){return Do.basename(e.path)}extname(e){return Do.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===kn.file?t=sn.file(Ule(n4(e))).path:(t=Do.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===kn.file?t=sn.file(oG(n4(e))).path:t=Do.normalize(e.path),e.with({path:t})}resolvePath(e,t){if(e.scheme===kn.file){const n=sn.file(ZLe(n4(e),t));return e.with({authority:n.authority,path:n.path})}return t=Vke(t),e.with({path:Do.resolve(e.path,t)})}}const sa=new Uke(()=>!1),Ece=sa.isEqual.bind(sa),xce=sa.basenameOrAuthority.bind(sa),gc=sa.basename.bind(sa),jke=sa.extname.bind(sa),VG=sa.dirname.bind(sa),Kke=sa.joinPath.bind(sa),Gke=sa.normalizePath.bind(sa),bJ=sa.resolvePath.bind(sa);var w0;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(s=>{const[a,u]=s.split(":");a&&u&&n.set(a,u)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(i.META_DATA_MIME,o),n}i.parseMetaData=e})(w0||(w0={}));function KC(i){return i.toString()}class qo{constructor(e,t,n,r,o,s,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=r,this.beforeCursorState=o,this.afterCursorState=s,this.changes=a}static create(e,t){const n=e.getAlternativeVersionId(),r=PH(e);return new qo(n,n,r,r,t,t,[])}append(e,t,n,r,o){t.length>0&&(this.changes=Bke(this.changes,t)),this.afterEOL=n,this.afterVersionId=r,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(yh(e,t?t.length:0,n),n+=4,t)for(const r of t)yh(e,r.selectionStartLineNumber,n),n+=4,yh(e,r.selectionStartColumn,n),n+=4,yh(e,r.positionLineNumber,n),n+=4,yh(e,r.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const r=wh(e,t);t+=4;for(let o=0;o<r;o++){const s=wh(e,t);t+=4;const a=wh(e,t);t+=4;const u=wh(e,t);t+=4;const d=wh(e,t);t+=4,n.push(new yt(s,a,u,d))}return t}serialize(){let e=10+qo._writeSelectionsSize(this.beforeCursorState)+qo._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)e+=r.writeSize();const t=new Uint8Array(e);let n=0;yh(t,this.beforeVersionId,n),n+=4,yh(t,this.afterVersionId,n),n+=4,mJ(t,this.beforeEOL,n),n+=1,mJ(t,this.afterEOL,n),n+=1,n=qo._writeSelections(t,this.beforeCursorState,n),n=qo._writeSelections(t,this.afterCursorState,n),yh(t,this.changes.length,n),n+=4;for(const r of this.changes)n=r.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const r=wh(t,n);n+=4;const o=wh(t,n);n+=4;const s=pJ(t,n);n+=1;const a=pJ(t,n);n+=1;const u=[];n=qo._readSelections(t,n,u);const d=[];n=qo._readSelections(t,n,d);const h=wh(t,n);n+=4;const f=[];for(let p=0;p<h;p++)n=Ds.read(t,n,f);return new qo(r,o,s,a,u,d,f)}}class Dce{constructor(e,t){this.model=e,this._data=qo.create(e,t)}get type(){return 0}get resource(){return sn.isUri(this.model)?this.model:this.model.uri}get label(){return C("edit","Typing")}toString(){return(this._data instanceof qo?this._data:qo.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(sn.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof qo}append(e,t,n,r,o){this._data instanceof qo&&this._data.append(e,t,n,r,o)}close(){this._data instanceof qo&&(this._data=this._data.serialize())}open(){this._data instanceof qo||(this._data=qo.deserialize(this._data))}undo(){if(sn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof qo&&(this._data=this._data.serialize());const e=qo.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(sn.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof qo&&(this._data=this._data.serialize());const e=qo.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof qo&&(this._data=this._data.serialize()),this._data.byteLength+168}}class qke{constructor(e,t){this.type=1,this.label=e,this._isOpen=!0,this._editStackElementsArr=t.slice(0),this._editStackElementsMap=new Map;for(const n of this._editStackElementsArr){const r=KC(n.resource);this._editStackElementsMap.set(r,n)}this._delegate=null}get resources(){return this._editStackElementsArr.map(e=>e.resource)}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=KC(e);return this._editStackElementsMap.has(t)}setModel(e){const t=KC(sn.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=KC(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,r,o){const s=KC(e.uri);this._editStackElementsMap.get(s).append(e,t,n,r,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=KC(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(const t of this._editStackElementsArr)e.push(`${gc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function PH(i){return i.getEOL()===`
`?0:1}function Jg(i){return i?i instanceof Dce||i instanceof qke:!1}class HG{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Jg(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Jg(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(Jg(t)&&t.canAppend(this._model))return t;const n=new Dce(this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],PH(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const r=this._getOrCreateEditStackElement(e),o=this._model.applyEdits(t,!0),s=HG._computeCursorState(n,o),a=o.map((u,d)=>({index:d,textChange:u.textChange}));return a.sort((u,d)=>u.textChange.oldPosition===d.textChange.oldPosition?u.index-d.index:u.textChange.oldPosition-d.textChange.oldPosition),r.append(this._model,a.map(u=>u.textChange),PH(this._model),this._model.getAlternativeVersionId(),s),s}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return gn(n),null}}}class Yke{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function Zke(i,e,t,n,r){r.spacesDiff=0,r.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let p=i.charCodeAt(o),m=t.charCodeAt(o);if(p!==m)break}let s=0,a=0;for(let p=o;p<e;p++)i.charCodeAt(p)===32?s++:a++;let u=0,d=0;for(let p=o;p<n;p++)t.charCodeAt(p)===32?u++:d++;if(s>0&&a>0||u>0&&d>0)return;let h=Math.abs(a-d),f=Math.abs(s-u);if(h===0){r.spacesDiff=f,f>0&&0<=u-1&&u-1<i.length&&u<t.length&&t.charCodeAt(u)!==32&&i.charCodeAt(u-1)===32&&i.charCodeAt(i.length-1)===44&&(r.looksLikeAlignment=!0);return}if(f%h===0){r.spacesDiff=f/h;return}}function CJ(i,e,t){const n=Math.min(i.getLineCount(),1e4);let r=0,o=0,s="",a=0;const u=[2,4,6,8,3,5,7],d=8;let h=[0,0,0,0,0,0,0,0,0],f=new Yke;for(let v=1;v<=n;v++){let b=i.getLineLength(v),L=i.getLineContent(v);const S=b<=65536;let y=!1,E=0,A=0,N=0;for(let R=0,M=b;R<M;R++){let K=S?L.charCodeAt(R):i.getLineCharCode(v,R);if(K===9)N++;else if(K===32)A++;else{y=!0,E=R;break}}if(!y||(N>0?r++:A>1&&o++,Zke(s,a,L,E,f),f.looksLikeAlignment&&!(t&&e===f.spacesDiff)))continue;let V=f.spacesDiff;V<=d&&h[V]++,s=L,a=E}let p=t;r!==o&&(p=r<o);let m=e;if(p){let v=p?0:.1*n;u.forEach(b=>{let L=h[b];L>v&&(v=L,m=b)}),m===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(m=2)}return{insertSpaces:p,tabSize:m}}function Va(i){return(i.metadata&1)>>>0}function or(i,e){i.metadata=i.metadata&254|e<<0}function Ns(i){return(i.metadata&2)>>>1===1}function Ji(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function Ice(i){return(i.metadata&4)>>>2===1}function wJ(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function Xke(i){return(i.metadata&24)>>>3}function yJ(i,e){i.metadata=i.metadata&231|e<<3}function Qke(i){return(i.metadata&32)>>>5===1}function SJ(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class kce{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,or(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,wJ(this,!1),yJ(this,1),SJ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Ji(this,!1)}reset(e,t,n,r){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=r}setOptions(e){this.options=e;let t=this.options.className;wJ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),yJ(this,this.options.stickiness),SJ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const wn=new kce(null,0,0);wn.parent=wn;wn.left=wn;wn.right=wn;or(wn,0);class O9{constructor(){this.root=wn,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,r,o){return this.root===wn?[]:sTe(this,e,t,n,r,o)}search(e,t,n){return this.root===wn?[]:oTe(this,e,t,n)}collectNodesFromOwner(e){return iTe(this,e)}collectNodesPostOrder(){return rTe(this)}insert(e){LJ(this,e),this._normalizeDeltaIfNecessary()}delete(e){EJ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let r=0;for(;e!==this.root;)e===e.parent.right&&(r+=e.parent.delta),e=e.parent;const o=n.start+r,s=n.end+r;n.setCachedOffsets(o,s,t)}acceptReplace(e,t,n,r){const o=tTe(this,e,e+t);for(let s=0,a=o.length;s<a;s++){const u=o[s];EJ(this,u)}this._normalizeDeltaIfNecessary(),nTe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){const u=o[s];u.start=u.cachedAbsoluteStart,u.end=u.cachedAbsoluteEnd,eTe(u,e,e+t,n,r),u.maxEnd=u.end,LJ(this,u)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,Jke(this))}}function Jke(i){let e=i.root,t=0;for(;e!==wn;){if(e.left!==wn&&!Ns(e.left)){e=e.left;continue}if(e.right!==wn&&!Ns(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,y0(e),Ji(e,!0),Ji(e.left,!1),Ji(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Ji(i.root,!1)}function GC(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function eTe(i,e,t,n,r){const o=Xke(i),s=o===0||o===2,a=o===1||o===2,u=t-e,d=n,h=Math.min(u,d),f=i.start;let p=!1;const m=i.end;let v=!1;e<=f&&m<=t&&Qke(i)&&(i.start=e,p=!0,i.end=e,v=!0);{const L=r?1:u>0?2:0;!p&&GC(f,s,e,L)&&(p=!0),!v&&GC(m,a,e,L)&&(v=!0)}if(h>0&&!r){const L=u>d?2:0;!p&&GC(f,s,e+h,L)&&(p=!0),!v&&GC(m,a,e+h,L)&&(v=!0)}{const L=r?1:0;!p&&GC(f,s,t,L)&&(i.start=e+d,p=!0),!v&&GC(m,a,t,L)&&(i.end=e+d,v=!0)}const b=d-u;p||(i.start=Math.max(0,f+b)),v||(i.end=Math.max(0,m+b)),i.start>i.end&&(i.end=i.start)}function tTe(i,e,t){let n=i.root,r=0,o=0,s=0,a=0,u=[],d=0;for(;n!==wn;){if(Ns(n)){Ji(n.left,!1),Ji(n.right,!1),n===n.parent.right&&(r-=n.parent.delta),n=n.parent;continue}if(!Ns(n.left)){if(o=r+n.maxEnd,o<e){Ji(n,!0);continue}if(n.left!==wn){n=n.left;continue}}if(s=r+n.start,s>t){Ji(n,!0);continue}if(a=r+n.end,a>=e&&(n.setCachedOffsets(s,a,0),u[d++]=n),Ji(n,!0),n.right!==wn&&!Ns(n.right)){r+=n.delta,n=n.right;continue}}return Ji(i.root,!1),u}function nTe(i,e,t,n){let r=i.root,o=0,s=0,a=0;const u=n-(t-e);for(;r!==wn;){if(Ns(r)){Ji(r.left,!1),Ji(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),y0(r),r=r.parent;continue}if(!Ns(r.left)){if(s=o+r.maxEnd,s<e){Ji(r,!0);continue}if(r.left!==wn){r=r.left;continue}}if(a=o+r.start,a>t){r.start+=u,r.end+=u,r.delta+=u,(r.delta<-1073741824||r.delta>1073741824)&&(i.requestNormalizeDelta=!0),Ji(r,!0);continue}if(Ji(r,!0),r.right!==wn&&!Ns(r.right)){o+=r.delta,r=r.right;continue}}Ji(i.root,!1)}function iTe(i,e){let t=i.root,n=[],r=0;for(;t!==wn;){if(Ns(t)){Ji(t.left,!1),Ji(t.right,!1),t=t.parent;continue}if(t.left!==wn&&!Ns(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[r++]=t),Ji(t,!0),t.right!==wn&&!Ns(t.right)){t=t.right;continue}}return Ji(i.root,!1),n}function rTe(i){let e=i.root,t=[],n=0;for(;e!==wn;){if(Ns(e)){Ji(e.left,!1),Ji(e.right,!1),e=e.parent;continue}if(e.left!==wn&&!Ns(e.left)){e=e.left;continue}if(e.right!==wn&&!Ns(e.right)){e=e.right;continue}t[n++]=e,Ji(e,!0)}return Ji(i.root,!1),t}function oTe(i,e,t,n){let r=i.root,o=0,s=0,a=0,u=[],d=0;for(;r!==wn;){if(Ns(r)){Ji(r.left,!1),Ji(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==wn&&!Ns(r.left)){r=r.left;continue}s=o+r.start,a=o+r.end,r.setCachedOffsets(s,a,n);let h=!0;if(e&&r.ownerId&&r.ownerId!==e&&(h=!1),t&&Ice(r)&&(h=!1),h&&(u[d++]=r),Ji(r,!0),r.right!==wn&&!Ns(r.right)){o+=r.delta,r=r.right;continue}}return Ji(i.root,!1),u}function sTe(i,e,t,n,r,o){let s=i.root,a=0,u=0,d=0,h=0,f=[],p=0;for(;s!==wn;){if(Ns(s)){Ji(s.left,!1),Ji(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),s=s.parent;continue}if(!Ns(s.left)){if(u=a+s.maxEnd,u<e){Ji(s,!0);continue}if(s.left!==wn){s=s.left;continue}}if(d=a+s.start,d>t){Ji(s,!0);continue}if(h=a+s.end,h>=e){s.setCachedOffsets(d,h,o);let m=!0;n&&s.ownerId&&s.ownerId!==n&&(m=!1),r&&Ice(s)&&(m=!1),m&&(f[p++]=s)}if(Ji(s,!0),s.right!==wn&&!Ns(s.right)){a+=s.delta,s=s.right;continue}}return Ji(i.root,!1),f}function LJ(i,e){if(i.root===wn)return e.parent=wn,e.left=wn,e.right=wn,or(e,0),i.root=e,i.root;aTe(i,e),Sv(e.parent);let t=e;for(;t!==i.root&&Va(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Va(n)===1?(or(t.parent,0),or(n,0),or(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,k2(i,t)),or(t.parent,0),or(t.parent.parent,1),T2(i,t.parent.parent))}else{const n=t.parent.parent.left;Va(n)===1?(or(t.parent,0),or(n,0),or(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,T2(i,t)),or(t.parent,0),or(t.parent.parent,1),k2(i,t.parent.parent))}return or(i.root,0),e}function aTe(i,e){let t=0,n=i.root;const r=e.start,o=e.end;for(;;)if(uTe(r,o,n.start+t,n.end+t)<0)if(n.left===wn){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===wn){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=wn,e.right=wn,or(e,1)}function EJ(i,e){let t,n;if(e.left===wn?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===wn?(t=e.left,n=e):(n=lTe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,or(t,0),e.detach(),M9(),y0(t),i.root.parent=wn;return}let r=Va(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,or(n,Va(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==wn&&(n.left.parent=n),n.right!==wn&&(n.right.parent=n)),e.detach(),r){Sv(t.parent),n!==e&&(Sv(n),Sv(n.parent)),M9();return}Sv(t),Sv(t.parent),n!==e&&(Sv(n),Sv(n.parent));let o;for(;t!==i.root&&Va(t)===0;)t===t.parent.left?(o=t.parent.right,Va(o)===1&&(or(o,0),or(t.parent,1),k2(i,t.parent),o=t.parent.right),Va(o.left)===0&&Va(o.right)===0?(or(o,1),t=t.parent):(Va(o.right)===0&&(or(o.left,0),or(o,1),T2(i,o),o=t.parent.right),or(o,Va(t.parent)),or(t.parent,0),or(o.right,0),k2(i,t.parent),t=i.root)):(o=t.parent.left,Va(o)===1&&(or(o,0),or(t.parent,1),T2(i,t.parent),o=t.parent.left),Va(o.left)===0&&Va(o.right)===0?(or(o,1),t=t.parent):(Va(o.left)===0&&(or(o.right,0),or(o,1),k2(i,o),o=t.parent.left),or(o,Va(t.parent)),or(t.parent,0),or(o.left,0),T2(i,t.parent),t=i.root));or(t,0),M9()}function lTe(i){for(;i.left!==wn;)i=i.left;return i}function M9(){wn.parent=wn,wn.delta=0,wn.start=0,wn.end=0}function k2(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==wn&&(t.left.parent=e),t.parent=e.parent,e.parent===wn?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,y0(e),y0(t)}function T2(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==wn&&(t.right.parent=e),t.parent=e.parent,e.parent===wn?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,y0(e),y0(t)}function Tce(i){let e=i.end;if(i.left!==wn){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==wn){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function y0(i){i.maxEnd=Tce(i)}function Sv(i){for(;i!==wn;){const e=Tce(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function uTe(i,e,t,n){return i===t?e-n:i-t}let FH=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==un)return $G(this.right);let e=this;for(;e.parent!==un&&e.parent.left!==e;)e=e.parent;return e.parent===un?un:e.parent}prev(){if(this.left!==un)return Nce(this.left);let e=this;for(;e.parent!==un&&e.parent.right!==e;)e=e.parent;return e.parent===un?un:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};const un=new FH(null,0);un.parent=un;un.left=un;un.right=un;un.color=0;function $G(i){for(;i.left!==un;)i=i.left;return i}function Nce(i){for(;i.right!==un;)i=i.right;return i}function zG(i){return i===un?0:i.size_left+i.piece.length+zG(i.right)}function UG(i){return i===un?0:i.lf_left+i.piece.lineFeedCnt+UG(i.right)}function R9(){un.parent=un}function N2(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==un&&(t.left.parent=e),t.parent=e.parent,e.parent===un?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function A2(i,e){let t=e.left;e.left=t.right,t.right!==un&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===un?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function kR(i,e){let t,n;if(e.left===un?(n=e,t=n.right):e.right===un?(n=e,t=n.left):(n=$G(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),R9(),i.root.parent=un;return}let r=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,t2(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,t2(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==un&&(n.left.parent=n),n.right!==un&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,t2(i,n)),e.detach(),t.parent.left===t){let s=zG(t),a=UG(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let u=s-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,zg(i,t.parent,u,d)}}if(t2(i,t.parent),r){R9();return}let o;for(;t!==i.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,N2(i,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,A2(i,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,N2(i,t.parent),t=i.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,A2(i,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,N2(i,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,A2(i,t.parent),t=i.root));t.color=0,R9()}function xJ(i,e){for(t2(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,N2(i,e)),e.parent.color=0,e.parent.parent.color=1,A2(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,A2(i,e)),e.parent.color=0,e.parent.parent.color=1,N2(i,e.parent.parent))}i.root.color=0}function zg(i,e,t,n){for(;e!==i.root&&e!==un;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function t2(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=zG(e.left)-e.size_left,n=UG(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}function zF(i){return i<0?0:i>255?255:i|0}function qC(i){return i<0?0:i>4294967295?4294967295:i|0}class $S{constructor(e){let t=zF(e);this._defaultValue=t,this._asciiMap=$S._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);for(let n=0;n<256;n++)t[n]=e;return t}set(e,t){let n=zF(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}}class Mw{constructor(){this._actual=new $S(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}}class cTe extends $S{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}function dTe(i){let e={};return t=>(e.hasOwnProperty(t)||(e[t]=i(t)),e[t])}const pc=dTe(i=>new cTe(i)),hTe=999;class h1{constructor(e,t,n,r){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=fTe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=fue(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new gTe(t,this.wordSeparators?pc(this.wordSeparators):null,n?this.searchString:null)}}function fTe(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++)if(i.charCodeAt(e)===92){if(e++,e>=t)break;const r=i.charCodeAt(e);if(r===110||r===114||r===87)return!0}return!1}class gTe{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function C1(i,e,t){if(!t)return new DA(i,null);let n=[];for(let r=0,o=e.length;r<o;r++)n[r]=e[r];return new DA(i,n)}class DJ{constructor(e){let t=[],n=0;for(let r=0,o=e.length;r<o;r++)e.charCodeAt(r)===10&&(t[n++]=r);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,r=t.length-1;if(r===-1||e<=t[0])return 0;for(;n<r;){const o=n+((r-n)/2>>0);t[o]>=e?r=o-1:t[o+1]>=e?(n=o,r=o):n=o+1}return n+1}}class TR{static findMatches(e,t,n,r,o){const s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new Rw(s.wordSeparators,s.regex),r,o):this._doFindMatchesLineByLine(e,n,s,r,o):[]}static _getMultilineMatchRange(e,t,n,r,o,s){let a,u=0;r?(u=r.findLineFeedCountBeforeOffset(o),a=t+o+u):a=t+o;let d;if(r){let m=r.findLineFeedCountBeforeOffset(o+s.length)-u;d=a+s.length+m}else d=a+s.length;const h=e.getPositionAt(a),f=e.getPositionAt(d);return new Q(h.lineNumber,h.column,f.lineNumber,f.column)}static _doFindMatchesMultiline(e,t,n,r,o){const s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),u=e.getEOL()===`\r
`?new DJ(a):null,d=[];let h=0,f;for(n.reset(0);f=n.next(a);)if(d[h++]=C1(this._getMultilineMatchRange(e,s,a,u,f.index,f[0]),f,r),h>=o)return d;return d}static _doFindMatchesLineByLine(e,t,n,r,o){const s=[];let a=0;if(t.startLineNumber===t.endLineNumber){const d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,s,r,o),s}const u=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,u,t.startLineNumber,t.startColumn-1,a,s,r,o);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<o;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,s,r,o);if(a<o){const d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,s,r,o)}return s}static _findMatchesInLine(e,t,n,r,o,s,a,u){const d=e.wordSeparators;if(!a&&e.simpleSearch){const p=e.simpleSearch,m=p.length,v=t.length;let b=-m;for(;(b=t.indexOf(p,b+m))!==-1;)if((!d||jG(d,t,v,b,m))&&(s[o++]=new DA(new Q(n,b+1+r,n,b+1+m+r),null),o>=u))return o;return o}const h=new Rw(e.wordSeparators,e.regex);let f;h.reset(0);do if(f=h.next(t),f&&(s[o++]=C1(new Q(n,f.index+1+r,n,f.index+1+f[0].length+r),f,a),o>=u))return o;while(f);return o}static findNextMatch(e,t,n,r){const o=t.parseSearchRequest();if(!o)return null;const s=new Rw(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,s,r):this._doFindNextMatchLineByLine(e,n,s,r)}static _doFindNextMatchMultiline(e,t,n,r){const o=new Le(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),u=e.getValueInRange(new Q(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new DJ(u):null;n.reset(t.column-1);let h=n.next(u);return h?C1(this._getMultilineMatchRange(e,s,u,d,h.index,h[0]),h,r):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Le(1,1),n,r):null}static _doFindNextMatchLineByLine(e,t,n,r){const o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),u=this._findFirstMatchInLine(n,a,s,t.column,r);if(u)return u;for(let d=1;d<=o;d++){const h=(s+d-1)%o,f=e.getLineContent(h+1),p=this._findFirstMatchInLine(n,f,h+1,1,r);if(p)return p}return null}static _findFirstMatchInLine(e,t,n,r,o){e.reset(r-1);const s=e.next(t);return s?C1(new Q(n,s.index+1,n,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,n,r){const o=t.parseSearchRequest();if(!o)return null;const s=new Rw(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,r):this._doFindPreviousMatchLineByLine(e,n,s,r)}static _doFindPreviousMatchMultiline(e,t,n,r){const o=this._doFindMatchesMultiline(e,new Q(1,1,t.lineNumber,t.column),n,r,10*hTe);if(o.length>0)return o[o.length-1];const s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new Le(s,e.getLineMaxColumn(s)),n,r):null}static _doFindPreviousMatchLineByLine(e,t,n,r){const o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),u=this._findLastMatchInLine(n,a,s,r);if(u)return u;for(let d=1;d<=o;d++){const h=(o+s-d-1)%o,f=e.getLineContent(h+1),p=this._findLastMatchInLine(n,f,h+1,r);if(p)return p}return null}static _findLastMatchInLine(e,t,n,r){let o=null,s;for(e.reset(0);s=e.next(t);)o=C1(new Q(n,s.index+1,n,s.index+1+s[0].length),s,r);return o}}function pTe(i,e,t,n,r){if(n===0)return!0;const o=e.charCodeAt(n-1);if(i.get(o)!==0||o===13||o===10)return!0;if(r>0){const s=e.charCodeAt(n);if(i.get(s)!==0)return!0}return!1}function mTe(i,e,t,n,r){if(n+r===t)return!0;const o=e.charCodeAt(n+r);if(i.get(o)!==0||o===13||o===10)return!0;if(r>0){const s=e.charCodeAt(n+r-1);if(i.get(s)!==0)return!0}return!1}function jG(i,e,t,n,r){return pTe(i,e,t,n,r)&&mTe(i,e,t,n,r)}class Rw{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const r=n.index,o=n[0].length;if(r===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){F1(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=o,!this._wordSeparators||jG(this._wordSeparators,e,t,r,o))return n}while(n);return null}}const Rg=65535;function Ace(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class _Te{constructor(e,t,n,r,o){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=r,this.isBasicASCII=o}}function Kg(i,e=!0){let t=[0],n=1;for(let r=0,o=i.length;r<o;r++){const s=i.charCodeAt(r);s===13?r+1<o&&i.charCodeAt(r+1)===10?(t[n++]=r+2,r++):t[n++]=r+1:s===10&&(t[n++]=r+1)}return e?Ace(t):t}function vTe(i,e){i.length=0,i[0]=0;let t=1,n=0,r=0,o=0,s=!0;for(let u=0,d=e.length;u<d;u++){const h=e.charCodeAt(u);h===13?u+1<d&&e.charCodeAt(u+1)===10?(o++,i[t++]=u+2,u++):(n++,i[t++]=u+1):h===10?(r++,i[t++]=u+1):s&&h!==9&&(h<32||h>126)&&(s=!1)}const a=new _Te(Ace(i),n,r,o,s);return i.length=0,a}class al{constructor(e,t,n,r,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=r,this.length=o}}class w1{constructor(e,t){this.buffer=e,this.lineStarts=t}}class bTe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==un&&e.iterate(e.root,n=>(n!==un&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class CTe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let r=0;r<n.length;r++){let o=n[r];if(o.node.parent===null||o.nodeStartOffset>=e){n[r]=null,t=!0;continue}}if(t){let r=[];for(const o of n)o!==null&&r.push(o);this._cache=r}}}class wTe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new w1("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=un,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let r=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=Kg(e[o].buffer));let a=new al(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),r=this.rbInsertRight(r,a)}this._searchCache=new CTe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Rg,n=t-Math.floor(t/3),r=n*2,o="",s=0,a=[];if(this.iterate(this.root,u=>{let d=this.getNodeContent(u),h=d.length;if(s<=n||s+h<r)return o+=d,s+=h,!0;let f=o.replace(/\r\n|\r|\n/g,e);return a.push(new w1(f,Kg(f))),o=d,s=h,!0}),s>0){let u=o.replace(/\r\n|\r|\n/g,e);a.push(new w1(u,Kg(u)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new bTe(this,e)}getOffsetAt(e,t){let n=0,r=this.root;for(;r!==un;)if(r.left!==un&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){n+=r.size_left;let o=this.getAccumulatedValue(r,e-r.lf_left-2);return n+=o+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,n+=r.size_left+r.piece.length,r=r.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,r=e;for(;t!==un;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(n+1,1),a=r-s;return new Le(n+1,a+1)}return new Le(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===un){let o=this.getOffsetAt(n+1,1),s=r-e-o;return new Le(n+1,s+1)}else t=t.right;return new Le(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),r=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,r);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,u=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return u.substring(d+e.remainder,d+t.remainder)}let n=e.node,r=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=r.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==un;){let a=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(u,u+t.remainder);break}else s+=a.substr(u,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",r=!1;return this.iterate(this.root,o=>{if(o===un)return!0;const s=o.piece;let a=s.length;if(a===0)return!0;const u=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,h=s.start.line,f=s.end.line;let p=d[h]+s.start.column;if(r&&(u.charCodeAt(p)===10&&(p++,a--),e[t++]=n,n="",r=!1,a===0))return!0;if(h===f)return!this._EOLNormalized&&u.charCodeAt(p+a-1)===13?(r=!0,n+=u.substr(p,a-1)):n+=u.substr(p,a),!0;n+=this._EOLNormalized?u.substring(p,Math.max(p,d[h+1]-this._EOLLength)):u.substring(p,d[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let m=h+1;m<f;m++)n=this._EOLNormalized?u.substring(d[m],d[m+1]-this._EOLLength):u.substring(d[m],d[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&u.charCodeAt(d[f]+s.end.column-1)===13?(r=!0,s.end.column===0?t--:n=u.substr(d[f],s.end.column-1)):n=u.substr(d[f],s.end.column),!0}),r&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(r)}else{let t=this._buffers[e.node.piece.bufferIndex],r=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,r,o,s,a,u,d,h,f){let p=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),v=this.offsetInBuffer(e.piece.bufferIndex,o),b=this.offsetInBuffer(e.piece.bufferIndex,s),L,S={line:0,column:0},y,E;t._wordSeparators?(y=p.buffer.substring(v,b),E=A=>A+v,t.reset(0)):(y=p.buffer,E=A=>A,t.reset(v));do if(L=t.next(y),L){if(E(L.index)>=b)return h;this.positionInBuffer(e,E(L.index)-m,S);let A=this.getLineFeedCnt(e.piece.bufferIndex,o,S),N=S.line===o.line?S.column-o.column+r:S.column+1,V=N+L[0].length;if(f[h++]=C1(new Q(n+A,N,n+A,V),L,u),E(L.index)+L[0].length>=b||h>=d)return h}while(L);return h}findMatchesLineByLine(e,t,n,r){const o=[];let s=0;const a=new Rw(t.wordSeparators,t.regex);let u=this.nodeAt2(e.startLineNumber,e.startColumn);if(u===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let h=this.positionInBuffer(u.node,u.remainder),f=this.positionInBuffer(d.node,d.remainder);if(u.node===d.node)return this.findMatchesInNode(u.node,a,e.startLineNumber,e.startColumn,h,f,t,n,r,s,o),o;let p=e.startLineNumber,m=u.node;for(;m!==d.node;){let b=this.getLineFeedCnt(m.piece.bufferIndex,h,m.piece.end);if(b>=1){let S=this._buffers[m.piece.bufferIndex].lineStarts,y=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),E=S[h.line+b],A=p===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(m,a,p,A,h,this.positionInBuffer(m,E-y),t,n,r,s,o),s>=r)return o;p+=b}let L=p===e.startLineNumber?e.startColumn-1:0;if(p===e.endLineNumber){const S=this.getLineContent(p).substring(L,e.endColumn-1);return s=this._findMatchesInLine(t,a,S,e.endLineNumber,L,s,o,n,r),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(p).substr(L),p,L,s,o,n,r),s>=r)return o;p++,u=this.nodeAt2(p,1),m=u.node,h=this.positionInBuffer(u.node,u.remainder)}if(p===e.endLineNumber){let b=p===e.startLineNumber?e.startColumn-1:0;const L=this.getLineContent(p).substring(b,e.endColumn-1);return s=this._findMatchesInLine(t,a,L,e.endLineNumber,b,s,o,n,r),o}let v=p===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(d.node,a,p,v,h,f,t,n,r,s,o),o}_findMatchesInLine(e,t,n,r,o,s,a,u,d){const h=e.wordSeparators;if(!u&&e.simpleSearch){const p=e.simpleSearch,m=p.length,v=n.length;let b=-m;for(;(b=n.indexOf(p,b+m))!==-1;)if((!h||jG(h,n,v,b,m))&&(a[s++]=new DA(new Q(r,b+1+o,r,b+1+m+o),null),s>=d))return s;return s}let f;t.reset(0);do if(f=t.next(n),f&&(a[s++]=C1(new Q(r,f.index+1+o,r,f.index+1+f[0].length+o),f,u),s>=d))return s;while(f);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==un){let{node:r,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=r.piece,u=a.bufferIndex,d=this.positionInBuffer(r,o);if(r.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Rg){this.appendToNode(r,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,r),this._searchCache.validate(e);else if(s+r.piece.length>e){let h=[],f=new al(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(u,a.end)-this.offsetInBuffer(u,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(r,o)===10){let b={line:f.start.line+1,column:0};f=new al(f.bufferIndex,b,f.end,this.getLineFeedCnt(f.bufferIndex,b,f.end),f.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(r,o-1)===13){let b=this.positionInBuffer(r,o-1);this.deleteNodeTail(r,b),t="\r"+t,r.piece.length===0&&h.push(r)}else this.deleteNodeTail(r,d);else this.deleteNodeTail(r,d);let p=this.createNewPieces(t);f.length>0&&this.rbInsertRight(r,f);let m=r;for(let v=0;v<p.length;v++)m=this.rbInsertRight(m,p[v]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,r)}else{let r=this.createNewPieces(t),o=this.rbInsertLeft(null,r[0]);for(let s=1;s<r.length;s++)o=this.rbInsertRight(o,r[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===un)return;let n=this.nodeAt(e),r=this.nodeAt(e+t),o=n.node,s=r.node;if(o===s){let p=this.positionInBuffer(o,n.remainder),m=this.positionInBuffer(o,r.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){let v=o.next();kR(this,o),this.validateCRLFWithPrevNode(v),this.computeBufferMetadata();return}this.deleteNodeHead(o,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,p),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,p,m),this.computeBufferMetadata();return}let a=[],u=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,u),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let d=this.positionInBuffer(s,r.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&a.push(s);let h=o.next();for(let p=h;p!==un&&p!==s;p=p.next())a.push(p);let f=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},u=new al(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=u,e+=`
`,zg(this,t,-1,-1),t.piece.length===0&&n.push(t)}let r=this.createNewPieces(e),o=this.rbInsertLeft(t,r[r.length-1]);for(let s=r.length-2;s>=0;s--)o=this.rbInsertLeft(o,r[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),r=this.rbInsertRight(t,n[0]),o=r;for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s]);this.validateCRLFWithPrevNode(r)}positionInBuffer(e,t,n){let r=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,u=s[r.start.line]+r.start.column+t,d=r.start.line,h=r.end.line,f=0,p=0,m=0;for(;d<=h&&(f=d+(h-d)/2|0,m=s[f],f!==h);)if(p=s[f+1],u<m)h=f-1;else if(u>=p)d=f+1;else break;return n?(n.line=f,n.column=u-m,null):{line:f,column:u-m}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let r=this._buffers[e].lineStarts;if(n.line===r.length-1)return n.line-t.line;let o=r[n.line+1],s=r[n.line]+n.column;if(o>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)kR(this,e[t])}createNewPieces(e){if(e.length>Rg){let h=[];for(;e.length>Rg;){const p=e.charCodeAt(Rg-1);let m;p===13||p>=55296&&p<=56319?(m=e.substring(0,Rg-1),e=e.substring(Rg-1)):(m=e.substring(0,Rg),e=e.substring(Rg));let v=Kg(m);h.push(new al(this._buffers.length,{line:0,column:0},{line:v.length-1,column:m.length-v[v.length-1]},v.length-1,m.length)),this._buffers.push(new w1(m,v))}let f=Kg(e);return h.push(new al(this._buffers.length,{line:0,column:0},{line:f.length-1,column:e.length-f[f.length-1]},f.length-1,e.length)),this._buffers.push(new w1(e,f)),h}let t=this._buffers[0].buffer.length;const n=Kg(e,!1);let r=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},r=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length;let s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],u={line:s,column:a},d=new al(0,r,u,this.getLineFeedCnt(0,r,u),o-t);return this._lastChangeBufferPos=u,[d]}getLineRawContent(e,t=0){let n=this.root,r="",o=this._searchCache.get2(e);if(o){n=o.node;let s=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)r=a.substring(u+s,u+n.piece.length);else{let d=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(u+s,u+d-t)}}else{let s=0;const a=e;for(;n!==un;)if(n.left!==un&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let u=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,f=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(f+u,f+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let u=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r=d.substring(h+u,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==un;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=s.substring(u,u+a-t),r}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);r+=s.substr(a,n.piece.length)}n=n.next()}return r}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==un;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,r=this.positionInBuffer(e,t),o=r.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,r);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:r.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,r=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?r[n.end.line]+n.end.column-r[n.start.line]-n.start.column:r[o]-r[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,r=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),u=this.getLineFeedCnt(n.bufferIndex,n.start,s),d=u-r,h=a-o,f=n.length+h;e.piece=new al(n.bufferIndex,n.start,s,u,f),zg(this,e,h,d)}deleteNodeHead(e,t){const n=e.piece,r=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),u=this.offsetInBuffer(n.bufferIndex,s),d=a-r,h=o-u,f=n.length+h;e.piece=new al(n.bufferIndex,s,n.end,a,f),zg(this,e,h,d)}shrinkNode(e,t,n){const r=e.piece,o=r.start,s=r.end,a=r.length,u=r.lineFeedCnt,d=t,h=this.getLineFeedCnt(r.bufferIndex,r.start,d),f=this.offsetInBuffer(r.bufferIndex,t)-this.offsetInBuffer(r.bufferIndex,o);e.piece=new al(r.bufferIndex,r.start,d,h,f),zg(this,e,f-a,h-u);let p=new al(r.bufferIndex,n,s,this.getLineFeedCnt(r.bufferIndex,n,s),this.offsetInBuffer(r.bufferIndex,s)-this.offsetInBuffer(r.bufferIndex,n)),m=this.rbInsertRight(e,p);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=Kg(t,!1);for(let m=0;m<o.length;m++)o[m]+=r;if(n){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],u={line:s,column:a},d=e.piece.length+t.length,h=e.piece.lineFeedCnt,f=this.getLineFeedCnt(0,e.piece.start,u),p=f-h;e.piece=new al(e.piece.bufferIndex,e.piece.start,u,f,d),this._lastChangeBufferPos=u,zg(this,e,t.length,p)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let r=0;for(;t!==un;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,r=0;for(;n!==un;)if(n.left!==un&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return r+=n.size_left,{node:n,remainder:Math.min(o+t-1,s),nodeStartOffset:r}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:r};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==un;){if(n.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(n.piece.length>=t-1){let o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],r=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(r)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===un||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,r=t.start.line,o=n[r]+t.start.column;return r===n.length-1||n[r+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===un||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],r=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new al(e.piece.bufferIndex,e.piece.start,o,a,s),zg(this,e,-1,-1),e.piece.length===0&&n.push(e);let u={line:t.piece.start.line+1,column:0};const d=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,u,t.piece.end);t.piece=new al(t.piece.bufferIndex,u,t.piece.end,h,d),zg(this,t,-1,-1),t.piece.length===0&&n.push(t);let f=this.createNewPieces(`\r
`);this.rbInsertRight(e,f[0]);for(let p=0;p<n.length;p++)kR(this,n[p])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)kR(this,n);else{const r=n.piece,o={line:r.start.line+1,column:0},s=r.length-1,a=this.getLineFeedCnt(r.bufferIndex,o,r.end);n.piece=new al(r.bufferIndex,o,r.end,a,s),zg(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===un)return t(un);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===un)return"";let t=this._buffers[e.piece.bufferIndex],n,r=e.piece,o=this.offsetInBuffer(r.bufferIndex,r.start),s=this.offsetInBuffer(r.bufferIndex,r.end);return n=t.buffer.substring(o,s),n}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),r=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,r)}rbInsertRight(e,t){let n=new FH(t,1);if(n.left=un,n.right=un,n.parent=un,n.size_left=0,n.lf_left=0,this.root===un)this.root=n,n.color=0;else if(e.right===un)e.right=n,n.parent=e;else{let o=$G(e.right);o.left=n,n.parent=o}return xJ(this,n),n}rbInsertLeft(e,t){let n=new FH(t,1);if(n.left=un,n.right=un,n.parent=un,n.size_left=0,n.lf_left=0,this.root===un)this.root=n,n.color=0;else if(e.left===un)e.left=n,n.parent=e;else{let r=Nce(e.left);r.right=n,n.parent=r}return xJ(this,n),n}}function Oce(i){return R8(i,0)}function R8(i,e){switch(typeof i){case"object":return i===null?hp(349,e):Array.isArray(i)?STe(i,e):LTe(i,e);case"string":return KG(i,e);case"boolean":return yTe(i,e);case"number":return hp(i,e);case"undefined":return hp(937,e);default:return hp(617,e)}}function hp(i,e){return(e<<5)-e+i|0}function yTe(i,e){return hp(i?433:863,e)}function KG(i,e){e=hp(149417,e);for(let t=0,n=i.length;t<n;t++)e=hp(i.charCodeAt(t),e);return e}function STe(i,e){return e=hp(104579,e),i.reduce((t,n)=>R8(n,t),e)}function LTe(i,e){return e=hp(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=KG(n,t),R8(i[n],t)),e)}function P9(i,e,t=32){const n=t-e,r=~((1<<n)-1);return(i<<e|(r&i)>>>n)>>>0}function IJ(i,e=0,t=i.byteLength,n=0){for(let r=0;r<t;r++)i[e+r]=n}function ETe(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function EN(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):ETe((i>>>0).toString(16),e/4)}class P8{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let r=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let u=s;if(Vo(s))if(a+1<t){const d=e.charCodeAt(a+1);zy(d)?(a++,u=_G(s,d)):u=65533}else{o=s;break}else zy(s)&&(u=65533);if(r=this._push(n,r,u),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=r,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),EN(this._h0)+EN(this._h1)+EN(this._h2)+EN(this._h3)+EN(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,IJ(this._buff,this._buffLen),this._buffLen>56&&(this._step(),IJ(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=P8._bigBlock32,t=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,t.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,P9(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let n=this._h0,r=this._h1,o=this._h2,s=this._h3,a=this._h4,u,d,h;for(let f=0;f<80;f++)f<20?(u=r&o|~r&s,d=1518500249):f<40?(u=r^o^s,d=1859775393):f<60?(u=r&o|r&s|o&s,d=2400959708):(u=r^o^s,d=3395469782),h=P9(n,5)+u+a+d+e.getUint32(f*4,!1)&4294967295,a=s,s=o,o=P9(r,30),r=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}}P8._bigBlock32=new DataView(new ArrayBuffer(320));var kJ,TJ;class xTe{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class DTe{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?pG(e,this._value,0,e.length,this._from,this._to):aM(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ITe{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?pG(e,this._value,0,e.length,this._from,this._to):aM(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class kTe{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ITe(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return vH(e,this._value.scheme);if(this._states[this._stateIdx]===2)return vH(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return yA(e,this._value.query);if(this._states[this._stateIdx]===5)return yA(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class NR{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return(t=(e=this.left)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get heightRight(){var e,t;return(t=(e=this.right)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}}class py{constructor(e){this._iter=e}static forUris(e=()=>!1){return new py(new kTe(e))}static forStrings(){return new py(new xTe)}static forConfigKeys(){return new py(new DTe)}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let r;this._root||(this._root=new NR,this._root.segment=n.value());const o=[];for(r=this._root;;){const a=n.cmp(r.segment);if(a>0)r.left||(r.left=new NR,r.left.segment=n.value()),o.push([-1,r]),r=r.left;else if(a<0)r.right||(r.right=new NR,r.right.segment=n.value()),o.push([1,r]),r=r.right;else if(n.hasNext())n.next(),r.mid||(r.mid=new NR,r.mid.segment=n.value()),o.push([0,r]),r=r.mid;else break}const s=r.value;r.value=t,r.key=e;for(let a=o.length-1;a>=0;a--){const u=o[a][1];u.updateHeight();const d=u.balanceFactor();if(d<-1||d>1){const h=o[a][0],f=o[a+1][0];if(h===1&&f===1)o[a][1]=u.rotateLeft();else if(h===-1&&f===-1)o[a][1]=u.rotateRight();else if(h===1&&f===-1)u.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=u.rotateLeft();else if(h===-1&&f===1)u.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=u.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return s}get(e){var t;return(t=this._getNode(e))===null||t===void 0?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const r=this._iter.reset(e),o=[];let s=this._root;for(;s;){const a=r.cmp(s.segment);if(a>0)o.push([-1,s]),s=s.left;else if(a<0)o.push([1,s]),s=s.right;else if(r.hasNext())r.next(),o.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const a=this._min(s.right),{key:u,value:d,segment:h}=a;this._delete(a.key,!1),s.key=u,s.value=d,s.segment=h}else{const a=(n=s.left)!==null&&n!==void 0?n:s.right;if(o.length>0){const[u,d]=o[o.length-1];switch(u){case-1:d.left=a;break;case 0:d.mid=a;break;case 1:d.right=a;break}}else this._root=a}for(let a=o.length-1;a>=0;a--){const u=o[a][1];u.updateHeight();const d=u.balanceFactor();if(d>1?(u.right.balanceFactor()>=0||(u.right=o[a+1][1]=o[a+1][1].rotateRight()),o[a][1]=u.rotateLeft()):d<-1&&(u.left.balanceFactor()<=0||(u.left=o[a+1][1]=o[a+1][1].rotateLeft()),o[a][1]=u.rotateRight()),a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,r;for(;n;){const o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),r=n.value||r,n=n.mid;else break}return n&&n.value||r}findSuperstr(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}}class TTe{constructor(e,t){this.uri=e,this.value=t}}class ta{constructor(e,t){this[kJ]="ResourceMap",e instanceof ta?(this.map=new Map(e.map),this.toKey=t??ta.defaultToKey):(this.map=new Map,this.toKey=e??ta.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),new TTe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))===null||t===void 0?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,r]of this.map)e(r.value,r.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(kJ=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}ta.defaultToKey=i=>i.toString();class NTe{constructor(){this[TJ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let r=this._map.get(e);if(r)r.value=t,n!==0&&this.touch(r,n);else{switch(r={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(e,r),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator](){return r},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return r}[(TJ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(n.previous=r,r.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,r=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=r,r.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class $0 extends NTe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}function Pc(i,e,t){return Math.min(Math.max(i,e),t)}class ATe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this}get value(){return this._val}}const F9="**",NJ="/",i4="[/\\\\]",r4="[^/\\\\]",OTe=/\//g;function AJ(i){switch(i){case 0:return"";case 1:return`${r4}*?`;default:return`(?:${i4}|${r4}+${i4}|${i4}${r4}+)*?`}}function OJ(i,e){if(!i)return[];const t=[];let n=!1,r=!1,o="";for(const s of i){switch(s){case e:if(!n&&!r){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":r=!0;break;case"]":r=!1;break}o+=s}return o&&t.push(o),t}function Mce(i){if(!i)return"";let e="";const t=OJ(i,NJ);if(t.every(n=>n===F9))e=".*";else{let n=!1;t.forEach((r,o)=>{if(r===F9){n||(e+=AJ(2),n=!0);return}let s=!1,a="",u=!1,d="";for(const h of r){if(h!=="}"&&s){a+=h;continue}if(u&&(h!=="]"||!d)){let f;h==="-"?f=h:(h==="^"||h==="!")&&!d?f="^":h===NJ?f="":f=hc(h),d+=f;continue}switch(h){case"{":s=!0;continue;case"[":u=!0;continue;case"}":const p=`(?:${OJ(a,",").map(m=>Mce(m)).join("|")})`;e+=p,s=!1,a="";break;case"]":e+="["+d+"]",u=!1,d="";break;case"?":e+=r4;continue;case"*":e+=AJ(1);continue;default:e+=hc(h)}}o<t.length-1&&(t[o+1]!==F9||o+2<t.length)&&(e+=i4),n=!1})}return e}const MTe=/^\*\*\/\*\.[\w\.-]+$/,RTe=/^\*\*\/([\w\.-]+)\/?$/,PTe=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,FTe=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,BTe=/^\*\*((\/[\w\.-]+)+)\/?$/,WTe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,MJ=new $0(1e4),RJ=function(){return!1},eg=function(){return null};function GG(i,e){if(!i)return eg;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let r=MJ.get(n);if(r)return PJ(r,i);let o;if(MTe.test(t)){const s=t.substr(4);r=function(a,u){return typeof a=="string"&&a.endsWith(s)?t:null}}else(o=RTe.exec(B9(t,e)))?r=VTe(o[1],t):(e.trimForExclusions?FTe:PTe).test(t)?r=HTe(t,e):(o=BTe.exec(B9(t,e)))?r=FJ(o[1].substr(1),t,!0):(o=WTe.exec(B9(t,e)))?r=FJ(o[1],t,!1):r=$Te(t);return MJ.set(n,r),PJ(r,i)}function PJ(i,e){return typeof e=="string"?i:function(t,n){return Hke(t,e.base)?i(XLe(e.base,t),n):null}}function B9(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function VTe(i,e){const t=`/${i}`,n=`\\${i}`,r=function(s,a){return typeof s!="string"?null:a?a===i?e:null:s===i||s.endsWith(t)||s.endsWith(n)?e:null},o=[i];return r.basenames=o,r.patterns=[e],r.allBasenames=o,r}function HTe(i,e){const t=Pce(i.slice(1,-1).split(",").map(a=>GG(a,e)).filter(a=>a!==eg),i),n=t.length;if(!n)return eg;if(n===1)return t[0];const r=function(a,u){for(let d=0,h=t.length;d<h;d++)if(t[d](a,u))return i;return null},o=t.find(a=>!!a.allBasenames);o&&(r.allBasenames=o.allBasenames);const s=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return s.length&&(r.allPaths=s),r}function FJ(i,e,t){const n=q1===Do.sep,r=n?i:i.replace(OTe,q1),o=q1+r,s=Do.sep+i,a=t?function(u,d){return typeof u=="string"&&(u===r||u.endsWith(o)||!n&&(u===i||u.endsWith(s)))?e:null}:function(u,d){return typeof u=="string"&&(u===r||!n&&u===i)?e:null};return a.allPaths=[(t?"*/":"./")+i],a}function $Te(i){try{const e=new RegExp(`^${Mce(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return eg}}function zTe(i,e,t){return!i||typeof e!="string"?!1:Rce(i)(e,void 0,t)}function Rce(i,e={}){if(!i)return RJ;if(typeof i=="string"||UTe(i)){const t=GG(i,e);if(t===eg)return RJ;const n=function(r,o){return!!t(r,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return jTe(i,e)}function UTe(i){const e=i;return e&&typeof e.base=="string"&&typeof e.pattern=="string"}function jTe(i,e){const t=Pce(Object.getOwnPropertyNames(i).map(a=>KTe(a,i[a],e)).filter(a=>a!==eg)),n=t.length;if(!n)return eg;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,f){for(let p=0,m=t.length;p<m;p++){const v=t[p](h,f);if(v)return v}return null},u=t.find(h=>!!h.allBasenames);u&&(a.allBasenames=u.allBasenames);const d=t.reduce((h,f)=>f.allPaths?h.concat(f.allPaths):h,[]);return d.length&&(a.allPaths=d),a}const r=function(a,u,d){let h;for(let f=0,p=t.length;f<p;f++){const m=t[f];m.requiresSiblings&&d&&(u||(u=G1(a)),h||(h=u.substr(0,u.length-QLe(a).length)));const v=m(a,u,h,d);if(v)return v}return null},o=t.find(a=>!!a.allBasenames);o&&(r.allBasenames=o.allBasenames);const s=t.reduce((a,u)=>u.allPaths?a.concat(u.allPaths):a,[]);return s.length&&(r.allPaths=s),r}function KTe(i,e,t){if(e===!1)return eg;const n=GG(i,t);if(n===eg)return eg;if(typeof e=="boolean")return n;if(e){const r=e.when;if(typeof r=="string"){const o=(s,a,u,d)=>{if(!d||!n(s,a))return null;const h=r.replace("$(basename)",u),f=d(h);return WLe(f)?f.then(p=>p?i:null):f?i:null};return o.requiresSiblings=!0,o}}return n}function Pce(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,u)=>{const d=u.basenames;return d?a.concat(d):a},[]);let r;if(e){r=[];for(let a=0,u=n.length;a<u;a++)r.push(e)}else r=t.reduce((a,u)=>{const d=u.patterns;return d?a.concat(d):a},[]);const o=function(a,u){if(typeof a!="string")return null;if(!u){let h;for(h=a.length;h>0;h--){const f=a.charCodeAt(h-1);if(f===47||f===92)break}u=a.substr(h)}const d=n.indexOf(u);return d!==-1?r[d]:null};o.basenames=n,o.patterns=r,o.allBasenames=n;const s=i.filter(a=>!a.basenames);return s.push(o),s}function Fce(i,e,t,n){if(Array.isArray(i)){let r=0;for(const o of i){const s=Fce(o,e,t,n);if(s===10)return s;s>r&&(r=s)}return r}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:r,pattern:o,scheme:s,hasAccessToAllModels:a}=i;if(!n&&!a)return 0;let u=0;if(s)if(s===e.scheme)u=10;else if(s==="*")u=5;else return 0;if(r)if(r===t)u=10;else if(r==="*")u=Math.max(u,5);else return 0;if(o){let d;if(typeof o=="string"?d=o:d=Object.assign(Object.assign({},o),{base:oG(o.base)}),d===e.fsPath||zTe(d,e.fsPath))u=10;else return 0}return u}else return 0}}function Bce(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(Bce):!!i.exclusive}class Xr{constructor(){this._clock=0,this._entries=[],this._onDidChange=new be}get onDidChange(){return this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Kn(()=>{if(n){let r=this._entries.indexOf(n);r>=0&&(this._entries.splice(r,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(let n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,n=>t.push(n.provider)),t}orderedGroups(e){const t=[];let n,r;return this._orderedForEach(e,o=>{n&&r===o._score?n.push(o.provider):(r=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t){if(e){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}}_updateScores(e){let t={uri:e.uri.toString(),language:e.getLanguageId()};if(!(this._lastCandidate&&this._lastCandidate.language===t.language&&this._lastCandidate.uri===t.uri)){this._lastCandidate=t;for(let n of this._entries)if(n._score=Fce(n.selector,e.uri,e.getLanguageId(),DEe(e)),Bce(n.selector)&&n._score>0){for(let r of this._entries)r._score=0;n._score=1e3;break}this._entries.sort(Xr._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:e._time<t._time?1:e._time>t._time?-1:0}}const BJ=new WeakMap;let GTe=0;function qTe(i){let e=BJ.get(i);return e===void 0&&(e=++GTe,BJ.set(i,e)),e}class UF{constructor(e,t,n=Number.MAX_SAFE_INTEGER){this._registry=e,this.min=t,this.max=n,this._cache=new $0(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>R8(qTe(n),t),0)}_clamp(e){return e===void 0?this.min:Math.min(this.max,Math.max(this.min,Math.floor(e*1.3)))}get(e){const t=this._key(e),n=this._cache.get(t);return this._clamp(n==null?void 0:n.value)}update(e,t){const n=this._key(e);let r=this._cache.get(n);return r||(r=new ATe,this._cache.set(n,r)),r.update(t),this.get(e)}}class YTe{constructor(){this._map=new Map,this._promises=new Map,this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this._colorMap=null}fire(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._map.set(e,t),this.fire([e]),Kn(()=>{this._map.get(e)===t&&(this._map.delete(e),this.fire([e]))})}registerPromise(e,t){let n=null,r=!1;return this._promises.set(e,t.then(o=>{this._promises.delete(e),!(r||!o)&&(n=this.register(e,o))})),Kn(()=>{r=!0,n&&n.dispose()})}getPromise(e){const t=this.get(e);if(t)return Promise.resolve(t);const n=this._promises.get(e);return n?n.then(r=>this.get(e)):null}get(e){return this._map.get(e)||null}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._map.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class na{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&1792)>>>8}static getFontStyle(e){return(e&14336)>>>11}static getForeground(e){return(e&8372224)>>>14}static getBackground(e){return(e&4286578688)>>>23}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),r=this.getFontStyle(e);return r&1&&(n+=" mtki"),r&2&&(n+=" mtkb"),r&4&&(n+=" mtku"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),r=this.getFontStyle(e);let o=`color: ${t[n]};`;return r&1&&(o+="font-style: italic;"),r&2&&(o+="font-weight: bold;"),r&4&&(o+="text-decoration: underline;"),o}}const ZTe=function(){let i=Object.create(null);return i[0]="symbol-method",i[1]="symbol-function",i[2]="symbol-constructor",i[3]="symbol-field",i[4]="symbol-variable",i[5]="symbol-class",i[6]="symbol-struct",i[7]="symbol-interface",i[8]="symbol-module",i[9]="symbol-property",i[10]="symbol-event",i[11]="symbol-operator",i[12]="symbol-unit",i[13]="symbol-value",i[14]="symbol-constant",i[15]="symbol-enum",i[16]="symbol-enum-member",i[17]="symbol-keyword",i[27]="symbol-snippet",i[18]="symbol-text",i[19]="symbol-color",i[20]="symbol-file",i[21]="symbol-reference",i[22]="symbol-customcolor",i[23]="symbol-folder",i[24]="symbol-type-parameter",i[25]="account",i[26]="issues",function(e){const t=i[e];let n=t&&IF.get(t);return n||(console.info("No codicon found for CompletionItemKind "+e),n=_e.symbolProperty),n.classNames}}();let Wce=function(){let i=Object.create(null);return i.method=0,i.function=1,i.constructor=2,i.field=3,i.variable=4,i.class=5,i.struct=6,i.interface=7,i.module=8,i.property=9,i.event=10,i.operator=11,i.unit=12,i.value=13,i.constant=14,i.enum=15,i["enum-member"]=16,i.enumMember=16,i.keyword=17,i.snippet=27,i.text=18,i.color=19,i.file=20,i.reference=21,i.customcolor=22,i.folder=23,i["type-parameter"]=24,i.typeParameter=24,i.account=25,i.issue=26,function(e,t){let n=i[e];return typeof n>"u"&&!t&&(n=9),n}}();var Zu;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(Zu||(Zu={}));var tg;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(tg||(tg={}));var IA;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(IA||(IA={}));function XTe(i){return i&&sn.isUri(i.uri)&&Q.isIRange(i.range)&&(Q.isIRange(i.originSelectionRange)||Q.isIRange(i.targetSelectionRange))}var BH;(function(i){const e=new Map;e.set("file",0),e.set("module",1),e.set("namespace",2),e.set("package",3),e.set("class",4),e.set("method",5),e.set("property",6),e.set("field",7),e.set("constructor",8),e.set("enum",9),e.set("interface",10),e.set("function",11),e.set("variable",12),e.set("constant",13),e.set("string",14),e.set("number",15),e.set("boolean",16),e.set("array",17),e.set("object",18),e.set("key",19),e.set("null",20),e.set("enum-member",21),e.set("struct",22),e.set("event",23),e.set("operator",24),e.set("type-parameter",25);const t=new Map;t.set(0,"file"),t.set(1,"module"),t.set(2,"namespace"),t.set(3,"package"),t.set(4,"class"),t.set(5,"method"),t.set(6,"property"),t.set(7,"field"),t.set(8,"constructor"),t.set(9,"enum"),t.set(10,"interface"),t.set(11,"function"),t.set(12,"variable"),t.set(13,"constant"),t.set(14,"string"),t.set(15,"number"),t.set(16,"boolean"),t.set(17,"array"),t.set(18,"object"),t.set(19,"key"),t.set(20,"null"),t.set(21,"enum-member"),t.set(22,"struct"),t.set(23,"event"),t.set(24,"operator"),t.set(25,"type-parameter");function n(s){return e.get(s)}i.fromString=n;function r(s){return t.get(s)}i.toString=r;function o(s,a){const u=t.get(s);let d=u&&IF.get("symbol-"+u);return d||(console.info("No codicon found for SymbolKind "+s),d=_e.symbolProperty),`${a?"inline":"block"} ${d.classNames}`}i.toCssClassName=o})(BH||(BH={}));class tf{constructor(e){this.value=e}}tf.Comment=new tf("comment");tf.Imports=new tf("imports");tf.Region=new tf("region");var jF;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(jF||(jF={}));const KF=new Xr,GF=new Xr,Oh=new Xr,qG=new Xr,eb=new Xr,kA=new Xr,Yc=new Xr,jy=new Xr,qF=new Xr,TA=new Xr,YF=new Xr,ZF=new Xr,XF=new Xr,rp=new Xr,Hv=new Xr,ng=new Xr,O2=new Xr,Mh=new Xr,QF=new Xr,NA=new Xr,Ky=new Xr,F8=new Xr,WH=new Xr,Gy=new Xr,B8=new Xr,Wr=new YTe;class es{constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}static createEmpty(e,t){const n=es.defaultTokenMetadata,r=new Uint32Array(2);return r[0]=e.length,r[1]=n,new es(r,e,t)}equals(e){return e instanceof es?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const r=t<<1,o=r+(n<<1);for(let s=r;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=na.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return na.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return na.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return na.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return na.getInlineStyleFromMetadata(n,t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return es.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new YG(this,e,t,n)}static convertToEndOffset(e,t){const r=(e.length>>>1)-1;for(let o=0;o<r;o++)e[o<<1]=e[o+1<<1];e[r<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,r=(e.length>>>1)-1;for(;n<r;){const o=n+Math.floor((r-n)/2),s=e[o<<1];if(s===t)return o+1;s<t?n=o+1:s>t&&(r=o)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,r="";const o=new Array;let s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,u=n<e.length?e[n]:null;if(a!==-1&&(u===null||a<=u.offset)){r+=this._text.substring(s,a);const d=this._tokens[(t<<1)+1];o.push(r.length,d),t++,s=a}else if(u){if(u.offset>s){r+=this._text.substring(s,u.offset);const d=this._tokens[(t<<1)+1];o.push(r.length,d),s=u.offset}r+=u.text,o.push(r.length,u.tokenMetadata),n++}else break}return new es(new Uint32Array(o),r,this._languageIdCodec)}}es.defaultTokenMetadata=(16384|2<<23)>>>0;class YG{constructor(e,t,n,r){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=r,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof YG?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}function Nb(i){let e=0,t=0,n=0,r=0;for(let o=0,s=i.length;o<s;o++){const a=i.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&i.charCodeAt(o+1)===10?(r|=2,o++):r|=3,n=o+1):a===10&&(r|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=i.length),[e,t,i.length-n,r]}function WJ(i){return(i<<0|0|0|16384|2<<23)>>>0}const Pg=new Uint32Array(0).buffer;class W9{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e){n.tokens.push(t);return}}this.tokens.push(new QTe(e,[t]))}}class JF{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),r=this._getEndCharacter(e-1);return new Q(0,t+1,n,r+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const r=t+Math.floor((n-t)/2),o=this._getDeltaLine(r);if(o<e)t=r+1;else if(o>e)n=r-1;else{let s=r;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let a=r;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new VJ(this._tokens.subarray(4*s,4*a+4))}}return this._getDeltaLine(t)===e?new VJ(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,r){const o=this._tokens,s=this._tokenCount;let a=0,u=!1,d=0;for(let h=0;h<s;h++){const f=4*h,p=o[f],m=o[f+1],v=o[f+2],b=o[f+3];if((p>e||p===e&&v>=t)&&(p<n||p===n&&m<=r))u=!0;else{if(a===0&&(d=p),u){const L=4*a;o[L]=p-d,o[L+1]=m,o[L+2]=v,o[L+3]=b}a++}}return this._tokenCount=a,d}split(e,t,n,r){const o=this._tokens,s=this._tokenCount;let a=[],u=[],d=a,h=0,f=0;for(let p=0;p<s;p++){const m=4*p,v=o[m],b=o[m+1],L=o[m+2],S=o[m+3];if(v>e||v===e&&L>=t){if(v<n||v===n&&b<=r)continue;d!==u&&(d=u,h=0,f=v)}d[h++]=v-f,d[h++]=b,d[h++]=L,d[h++]=S}return[new JF(new Uint32Array(a)),new JF(new Uint32Array(u)),f]}acceptDeleteRange(e,t,n,r,o){const s=this._tokens,a=this._tokenCount,u=r-t;let d=0,h=!1;for(let f=0;f<a;f++){const p=4*f;let m=s[p],v=s[p+1],b=s[p+2];const L=s[p+3];if(m<t||m===t&&b<=n){d++;continue}else if(m===t&&v<n)m===r&&b>o?b-=o-n:b=n;else if(m===t&&v===n)if(m===r&&b>o)b-=o-n;else{h=!0;continue}else if(m<r||m===r&&v<o)if(m===r&&b>o)m===t?(v=n,b=v+(b-o)):(v=0,b=v+(b-o));else{h=!0;continue}else if(m>r){if(u===0&&!h){d=a;break}m-=u}else if(m===r&&v>=o)e&&m===0&&(v+=e,b+=e),m-=u,v-=o-n,b-=o-n;else throw new Error("Not possible!");const S=4*d;s[S]=m,s[S+1]=v,s[S+2]=b,s[S+3]=L,d++}this._tokenCount=d}acceptInsertText(e,t,n,r,o,s){const a=n===0&&r===1&&(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122),u=this._tokens,d=this._tokenCount;for(let h=0;h<d;h++){const f=4*h;let p=u[f],m=u[f+1],v=u[f+2];if(!(p<e||p===e&&v<t)){if(p===e&&v===t)if(a)v+=1;else continue;else if(p===e&&m<t&&t<v)n===0?v+=r:v=t;else{if(p===e&&m===t&&a)continue;if(p===e)if(p+=n,n===0)m+=r,v+=r;else{const b=v-m;m=o+(m-t),v=m+b}else p+=n}u[f]=p,u[f+1]=m,u[f+2]=v}}}}class VJ{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class e3{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e&&new Q(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[r,o,s]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new e3(this.startLineNumber,r),new e3(this.startLineNumber+s,o)]}applyEdit(e,t){const[n,r,o]=Nb(t);this.acceptEdit(e,n,r,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,r,o){this._acceptDeleteRange(e),this._acceptInsertText(new Le(e.startLineNumber,e.startColumn),t,n,r,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const o=n-t;this.startLineNumber-=o;return}const r=this.tokens.getMaxDeltaLine();if(!(t>=r+1)){if(t<0&&n>=r+1){this.startLineNumber=0,this.tokens.clear();return}if(t<0){const o=-t;this.startLineNumber-=o,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,r,o){if(t===0&&n===0)return;const s=e.lineNumber-this.startLineNumber;if(s<0){this.startLineNumber+=t;return}const a=this.tokens.getMaxDeltaLine();s>=a+1||this.tokens.acceptInsertText(s,e.column-1,t,n,r,o)}}class QTe{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function Fg(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class ZG{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;n=e.plusRange(o).plusRange(s)}let r=null;for(let o=0,s=this._pieces.length;o<s;o++){const a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){r=r||{index:o};continue}const[u,d]=a.split(n);if(u.isEmpty()){r=r||{index:o};continue}d.isEmpty()||(this._pieces.splice(o,1,u,d),o++,s++,r=r||{index:o})}return r=r||{index:this._pieces.length},t.length>0&&(this._pieces=LA(this._pieces,r.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(n.length===0)return t;const r=ZG._findFirstPieceWithLine(n,e),o=n[r].getLineTokens(e);if(!o)return t;const s=t.getCount(),a=o.getCount();let u=0,d=[],h=0,f=0;const p=(m,v)=>{m!==f&&(f=m,d[h++]=m,d[h++]=v)};for(let m=0;m<a;m++){const v=o.getStartCharacter(m),b=o.getEndCharacter(m),L=o.getMetadata(m),S=((L&1?2048:0)|(L&2?4096:0)|(L&4?8192:0)|(L&8?8372224:0)|(L&16?4286578688:0))>>>0,y=~S>>>0;for(;u<s&&t.getEndOffset(u)<=v;)p(t.getEndOffset(u),t.getMetadata(u)),u++;for(u<s&&t.getStartOffset(u)<v&&p(v,t.getMetadata(u));u<s&&t.getEndOffset(u)<b;)p(t.getEndOffset(u),t.getMetadata(u)&y|L&S),u++;if(u<s)p(b,t.getMetadata(u)&y|L&S),t.getEndOffset(u)===b&&u++;else{const E=Math.min(Math.max(0,u-1),s-1);p(b,t.getMetadata(E)&y|L&S)}}for(;u<s;)p(t.getEndOffset(u),t.getMetadata(u)),u++;return new es(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,r=e.length-1;for(;n<r;){let o=n+Math.floor((r-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)r=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,r,o){for(const s of this._pieces)s.acceptEdit(e,t,n,r,o)}}class Uu{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let r=null;if(t<this._len&&(r=this._lineTokens[t]),r!==null&&r!==Pg)return new es(Fg(r),n,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=n.length,o[1]=WJ(this._languageIdCodec.encodeLanguageId(e)),new es(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){const r=n?Fg(n):null;if(t===0){let o=!1;if(r&&r.length>1&&(o=na.getLanguageId(r[1])!==e),!o)return Pg}if(!r||r.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=WJ(e),o.buffer}return r[r.length-2]=t,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let r=0;r<t;r++)n[r]=null;this._lineTokens=LA(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,r,o){const s=Uu._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,r);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=s,o?!Uu._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Fg(e),r=Fg(t);if(n.length!==r.length)return!1;for(let o=0,s=n.length;o<s;o++)if(n[o]!==r[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Le(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Uu._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Uu._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let r=null;n<this._len&&(r=Uu._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Uu._append(this._lineTokens[t],r),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const r=e.lineNumber-1;if(!(r>=this._len)){if(t===0){this._lineTokens[r]=Uu._insert(this._lineTokens[r],e.column-1,n);return}this._lineTokens[r]=Uu._deleteEnding(this._lineTokens[r],e.column-1),this._lineTokens[r]=Uu._insert(this._lineTokens[r],e.column-1,n),this._insertLines(e.lineNumber,t)}}static _deleteBeginning(e,t){return e===null||e===Pg?e:Uu._delete(e,0,t)}static _deleteEnding(e,t){if(e===null||e===Pg)return e;const n=Fg(e),r=n[n.length-2];return Uu._delete(e,t,r)}static _delete(e,t,n){if(e===null||e===Pg||t===n)return e;const r=Fg(e),o=r.length>>>1;if(t===0&&r[r.length-2]===n)return Pg;const s=es.findIndexInTokensArray(r,t),a=s>0?r[s-1<<1]:0,u=r[s<<1];if(n<u){const m=n-t;for(let v=s;v<o;v++)r[v<<1]-=m;return e}let d,h;a!==t?(r[s<<1]=t,d=s+1<<1,h=t):(d=s<<1,h=a);const f=n-t;for(let m=s+1;m<o;m++){const v=r[m<<1]-f;v>h&&(r[d++]=v,r[d++]=r[(m<<1)+1],h=v)}if(d===r.length)return e;let p=new Uint32Array(d);return p.set(r.subarray(0,d),0),p.buffer}static _append(e,t){if(t===Pg)return e;if(e===Pg)return t;if(e===null)return e;if(t===null)return null;const n=Fg(e),r=Fg(t),o=r.length>>>1;let s=new Uint32Array(n.length+r.length);s.set(n,0);let a=n.length;const u=n[n.length-2];for(let d=0;d<o;d++)s[a++]=r[d<<1]+u,s[a++]=r[(d<<1)+1];return s.buffer}static _insert(e,t,n){if(e===null||e===Pg)return e;const r=Fg(e),o=r.length>>>1;let s=es.findIndexInTokensArray(r,t);s>0&&r[s-1<<1]===t&&s--;for(let a=s;a<o;a++)r[a<<1]+=n;return e}}class my extends Oe{constructor(e,t,n,r,o,s,a){super(),this._onDidChangeContent=this._register(new be),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=o,this._pieceTree=new wTe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t;const r=this.getPositionAt(e),o=this.getPositionAt(n);return new Q(r.lineNumber,r.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn);return this.getOffsetAt(e.endLineNumber,e.endColumn)-n}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const r=e.startLineNumber,o=e.endLineNumber;for(let s=r;s<=o;s++){const a=this.getLineContent(s),u=s===r?e.startColumn-1:0,d=s===o?e.endColumn-1:a.length;for(let h=u;h<d;h++)Vo(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-r),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=ka(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Jf(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let r=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,u=[];for(let b=0;b<e.length;b++){let L=e[b];a&&L._isTracked&&(a=!1);let S=L.range;if(L.text){let V=!0;s||(V=!vG(L.text),s=V),!r&&V&&(r=g8(L.text)),!o&&V&&(o=pue(L.text))}let y="",E=0,A=0,N=0;if(L.text){let V;[E,A,N,V]=Nb(L.text);const R=this.getEOL();V===0||V===(R===`\r
`?2:1)?y=L.text:y=L.text.replace(/\r\n|\r|\n/g,R)}u[b]={sortIndex:b,identifier:L.identifier||null,range:S,rangeOffset:this.getOffsetAt(S.startLineNumber,S.startColumn),rangeLength:this.getValueLengthInRange(S),text:y,eolCount:E,firstLineLength:A,lastLineLength:N,forceMoveMarkers:!!L.forceMoveMarkers,isAutoWhitespaceEdit:L.isAutoWhitespaceEdit||!1}}u.sort(my._sortOpsAscending);let d=!1;for(let b=0,L=u.length-1;b<L;b++){let S=u[b].range.getEndPosition(),y=u[b+1].range.getStartPosition();if(y.isBeforeOrEqual(S)){if(y.isBefore(S))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(u=this._reduceOperations(u));let h=n||t?my._getInverseEditRanges(u):[],f=[];if(t)for(let b=0;b<u.length;b++){let L=u[b],S=h[b];if(L.isAutoWhitespaceEdit&&L.range.isEmpty())for(let y=S.startLineNumber;y<=S.endLineNumber;y++){let E="";y===S.startLineNumber&&(E=this.getLineContent(L.range.startLineNumber),ka(E)!==-1)||f.push({lineNumber:y,oldContent:E})}}let p=null;if(n){let b=0;p=[];for(let L=0;L<u.length;L++){const S=u[L],y=h[L],E=this.getValueInRange(S.range),A=S.rangeOffset+b;b+=S.text.length-E.length,p[L]={sortIndex:S.sortIndex,identifier:S.identifier,range:y,text:E,textChange:new Ds(S.rangeOffset,E,A,S.text)}}d||p.sort((L,S)=>L.sortIndex-S.sortIndex)}this._mightContainRTL=r,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;const m=this._doApplyEdits(u);let v=null;if(t&&f.length>0){f.sort((b,L)=>L.lineNumber-b.lineNumber),v=[];for(let b=0,L=f.length;b<L;b++){let S=f[b].lineNumber;if(b>0&&f[b-1].lineNumber===S)continue;let y=f[b].oldContent,E=this.getLineContent(S);E.length===0||E===y||ka(E)!==-1||v.push(S)}}return this._onDidChangeContent.fire(),new Fke(p,m,v)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,r=e[e.length-1].range,o=new Q(n.startLineNumber,n.startColumn,r.endLineNumber,r.endColumn);let s=n.startLineNumber,a=n.startColumn;const u=[];for(let m=0,v=e.length;m<v;m++){const b=e[m],L=b.range;t=t||b.forceMoveMarkers,u.push(this.getValueInRange(new Q(s,a,L.startLineNumber,L.startColumn))),b.text.length>0&&u.push(b.text),s=L.endLineNumber,a=L.endColumn}const d=u.join(""),[h,f,p]=Nb(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:h,firstLineLength:f,lastLineLength:p,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(my._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let r=e[n];const o=r.range.startLineNumber,s=r.range.startColumn,a=r.range.endLineNumber,u=r.range.endColumn;if(o===a&&s===u&&r.text.length===0)continue;r.text?(this._pieceTree.delete(r.rangeOffset,r.rangeLength),this._pieceTree.insert(r.rangeOffset,r.text,!0)):this._pieceTree.delete(r.rangeOffset,r.rangeLength);const d=new Q(o,s,a,u);t.push({range:d,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,r){return this._pieceTree.findMatchesLineByLine(e,t,n,r)}static _getInverseEditRanges(e){let t=[],n=0,r=0,o=null;for(let s=0,a=e.length;s<a;s++){let u=e[s],d,h;o?o.range.endLineNumber===u.range.startLineNumber?(d=n,h=r+(u.range.startColumn-o.range.endColumn)):(d=n+(u.range.startLineNumber-o.range.endLineNumber),h=u.range.startColumn):(d=u.range.startLineNumber,h=u.range.startColumn);let f;if(u.text.length>0){const p=u.eolCount+1;p===1?f=new Q(d,h,d,h+u.firstLineLength):f=new Q(d,h,d+p-1,u.lastLineLength+1)}else f=new Q(d,h,d,h);n=f.endLineNumber,r=f.endColumn,t.push(f),o=u}return t}static _sortOpsAscending(e,t){let n=Q.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=Q.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class JTe{constructor(e,t,n,r,o,s,a,u,d){this._chunks=e,this._bom=t,this._cr=n,this._lf=r,this._crlf=o,this._containsRTL=s,this._containsUnusualLineTerminators=a,this._isBasicASCII=u,this._normalizeEOL=d}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e);let n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=n.length;o<s;o++){let a=n[o].buffer.replace(/\r\n|\r|\n/g,t),u=Kg(a);n[o]=new w1(a,u)}const r=new my(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:r,disposable:r}}}class eNe{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&bG(e)&&(this.BOM=KEe,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=vTe(this._tmpLineStarts,e);this.chunks.push(new w1(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,this.isBasicASCII&&(this.isBasicASCII=t.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=g8(e)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=pue(e))}finish(e=!0){return this._finish(),new JTe(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=Kg(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class tNe{constructor(){this.changeType=1}}class nf{constructor(e,t,n,r,o){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=r,this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",r=0;for(const o of t)n+=e.substring(r,o.column-1),r=o.column-1,n+=o.options.content;return n+=e.substring(r),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new nf(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new nf(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,r)=>n.lineNumber===r.lineNumber?n.column===r.column?n.order-r.order:n.column-r.column:n.lineNumber-r.lineNumber),t}}class HJ{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class nNe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class iNe{constructor(e,t,n,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class rNe{constructor(){this.changeType=5}}class tb{constructor(e,t,n,r){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=r,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new tb(n,r,o,s)}}class Vce{constructor(e){this.changes=e}}class t3{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=tb.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=t3._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new t3(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),r=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,u=e.isFlush||t.isFlush;return{changes:n,eol:r,versionId:o,isUndoing:s,isRedoing:a,isFlush:u}}}let W8=class{constructor(e,t,n){this._tokenBrand=void 0,this.offset=e,this.type=t,this.language=n}toString(){return"("+this.offset+", "+this.type+")"}};class XG{constructor(e,t){this._tokenizationResultBrand=void 0,this.tokens=e,this.endState=t}}class V8{constructor(e,t){this._tokenizationResult2Brand=void 0,this.tokens=e,this.endState=t}}class oNe{clone(){return this}equals(e){return this===e}}const dM=new oNe,S0="vs.editor.nullMode";function Hce(i,e,t,n){return new XG([new W8(n,"",i)],t)}function QG(i,e,t,n){let r=new Uint32Array(2);return r[0]=n,r[1]=(i<<0|0|0|16384|2<<23)>>>0,new V8(r,t===null?dM:t)}class sNe{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len?this._valid[e]:!1}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[],r=[];for(let o=0;o<t;o++)n[o]=null,r[o]=!1;this._beginState=LA(this._beginState,e,n),this._valid=LA(this._valid,e,r),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const r=this.getBeginState(t+1);if(r===null||!n.equals(r)){this._setBeginState(t+1,n),this._invalidateLine(t+1);return}let o=t+1;for(;o<e&&this._isValid(o);)o++;this._invalidLineStartIndex=o}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,o=Math.min(n,t);for(let s=o;s>=0;s--)this._invalidateLine(e.startLineNumber+s-1);this._acceptDeleteRange(e),this._acceptInsertText(new Le(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class aNe extends Oe{constructor(e,t){super(),this._textModel=e,this._languageIdCodec=t,this._isScheduled=!1,this._isDisposed=!1,this._tokenizationStateStore=new sNe,this._tokenizationSupport=null,this._register(Wr.onDidChange(n=>{const r=this._textModel.getLanguageId();n.changedLanguages.indexOf(r)!==-1&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeContentFast(n=>{if(n.isFlush){this._resetTokenizationState();return}for(let r=0,o=n.changes.length;r<o;r++){const s=n.changes[r],[a]=Nb(s.text);this._tokenizationStateStore.applyEdits(s.range,a)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=lNe(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,bA(e=>{this._isScheduled=!1,!this._isDisposed&&this._revalidateTokensNow(e)}))}_revalidateTokensNow(e){const t=this._textModel.getLineCount(),n=1,r=new W9,o=rg.create(!1);let s=-1;do if(o.elapsed()>n||(s=this._tokenizeOneInvalidLine(r),s>=t))break;while(this._hasLinesToTokenize()&&e.timeRemaining()>0);this._beginBackgroundTokenization(),this._textModel.setTokens(r.tokens,!this._hasLinesToTokenize())}tokenizeViewport(e,t){const n=new W9;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens,!this._hasLinesToTokenize())}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new W9;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens,!this._hasLinesToTokenize())}getTokenTypeIfInsertingCharacter(e,t){if(!this._tokenizationSupport)return 0;this.forceTokenization(e.lineNumber);const n=this._tokenizationStateStore.getBeginState(e.lineNumber-1);if(!n)return 0;const r=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),s=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=AR(this._languageIdCodec,r,this._tokenizationSupport,s,!0,n),u=new es(a.tokens,s,this._languageIdCodec);if(u.getCount()===0)return 0;const d=u.findTokenIndexAtOffset(e.column-1);return u.getStandardTokenType(d)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return e>t?!1:e<t||this._textModel.getLineLength(e)<2048}_hasLinesToTokenize(){return this._tokenizationSupport?this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount():!1}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageId(),r=this._textModel.getLineCount(),o=t-1;for(let s=this._tokenizationStateStore.invalidLineStartIndex;s<=o;s++){const a=this._textModel.getLineContent(s+1),u=this._tokenizationStateStore.getBeginState(s),d=AR(this._languageIdCodec,n,this._tokenizationSupport,a,!0,u);e.add(s+1,d.tokens),this._tokenizationStateStore.setEndState(r,s,d.endState),s=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport||n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex){this._updateTokensUntilLine(e,n);return}let r=this._textModel.getLineFirstNonWhitespaceColumn(t);const o=[];let s=null;for(let d=t-1;r>1&&d>=1;d--){const h=this._textModel.getLineFirstNonWhitespaceColumn(d);if(h!==0&&h<r){if(s=this._tokenizationStateStore.getBeginState(d-1),s)break;o.push(this._textModel.getLineContent(d)),r=h}}s||(s=this._tokenizationSupport.getInitialState());const a=this._textModel.getLanguageId();let u=s;for(let d=o.length-1;d>=0;d--)u=AR(this._languageIdCodec,a,this._tokenizationSupport,o[d],!1,u).endState;for(let d=t;d<=n;d++){const h=this._textModel.getLineContent(d),f=AR(this._languageIdCodec,a,this._tokenizationSupport,h,!0,u);e.add(d,f.tokens),this._tokenizationStateStore.setFakeTokens(d-1),u=f.endState}}}function lNe(i){const e=i.getLanguageId();let t=i.isTooLargeForTokenization()?null:Wr.get(e),n=null;if(t)try{n=t.getInitialState()}catch(r){gn(r),t=null}return[t,n]}function AR(i,e,t,n,r,o){let s=null;if(t)try{s=t.tokenize2(n,r,o.clone(),0)}catch(a){gn(a)}return s||(s=QG(i.encodeLanguageId(e),n,o,0)),es.convertToEndOffset(s.tokens,n.length),s}var uo;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(uo||(uo={}));class V9{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._standardTokenMask=0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._standardTokenMask|=2;break;case"comment":this._standardTokenMask|=1;break;case"regex":this._standardTokenMask|=4;break}}isOK(e){return(this._standardTokenMask&e)===0}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),r=e.getStandardTokenType(n);return this.isOK(r)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const r=String.fromCharCode(n);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class uNe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)xN(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),xN(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),xN(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),xN(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&xN(this.autoClosingPairsCloseSingleChar,t.close,t)}}function xN(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}function o4(i,e){let t=i.getCount(),n=i.findTokenIndexAtOffset(e),r=i.getLanguageId(n),o=n;for(;o+1<t&&i.getLanguageId(o+1)===r;)o++;let s=n;for(;s>0&&i.getLanguageId(s-1)===r;)s--;return new cNe(i,r,s,o+1,i.getStartOffset(s),i.getEndOffset(o))}class cNe{constructor(e,t,n,r,o,s){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=r,this.firstCharOffset=o,this._lastCharOffset=s}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Cf(i){return(i&7)!==0}class hM{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new V9(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new V9({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.colorizedBracketPairs?this._colorizedBracketPairs=$J(e.colorizedBracketPairs.map(t=>[t[0],t[1]])):e.brackets?this._colorizedBracketPairs=$J(e.brackets.map(t=>[t[0],t[1]]).filter(t=>!(t[0]==="<"&&t[1]===">"))):this._colorizedBracketPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new V9({open:t.open,close:t.close||""}))}this._autoCloseBefore=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:hM.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(){return this._autoCloseBefore}getSurroundingPairs(){return this._surroundingPairs}getColorizedBrackets(){return this._colorizedBracketPairs}}hM.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED=`;:.,=}])> 
	`;function $J(i){return i.filter(([e,t])=>e!==""&&t!=="")}class n3{constructor(e,t,n,r,o,s){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=r,this.forwardRegex=o,this.reversedRegex=s,this._openSet=n3._toSet(this.open),this._closeSet=n3._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function dNe(i){const e=i.length;i=i.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);const t=[];for(let s=0;s<e;s++)t[s]=s;const n=(s,a)=>{const[u,d]=s,[h,f]=a;return u===h||u===f||d===h||d===f},r=(s,a)=>{const u=Math.min(s,a),d=Math.max(s,a);for(let h=0;h<e;h++)t[h]===d&&(t[h]=u)};for(let s=0;s<e;s++){const a=i[s];for(let u=s+1;u<e;u++){const d=i[u];n(a,d)&&r(t[s],t[u])}}const o=[];for(let s=0;s<e;s++){let a=[],u=[];for(let d=0;d<e;d++)if(t[d]===s){const[h,f]=i[d];a.push(h),u.push(f)}a.length>0&&o.push({open:a,close:u})}return o}class hNe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=dNe(t);this.brackets=n.map((r,o)=>new n3(e,o,r.open,r.close,fNe(r.open,r.close,n,o),gNe(r.open,r.close,n,o))),this.forwardRegex=pNe(this.brackets),this.reversedRegex=mNe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const r of this.brackets){for(const o of r.open)this.textIsBracket[o]=r,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of r.close)this.textIsBracket[o]=r,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function $ce(i,e,t,n){for(let r=0,o=e.length;r<o;r++){if(r===t)continue;const s=e[r];for(const a of s.open)a.indexOf(i)>=0&&n.push(a);for(const a of s.close)a.indexOf(i)>=0&&n.push(a)}}function zce(i,e){return i.length-e.length}function H8(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function fNe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let o=0,s=r.length;o<s;o++)$ce(r[o],t,n,r);return r=H8(r),r.sort(zce),r.reverse(),$8(r)}function gNe(i,e,t,n){let r=[];r=r.concat(i),r=r.concat(e);for(let o=0,s=r.length;o<s;o++)$ce(r[o],t,n,r);return r=H8(r),r.sort(zce),r.reverse(),$8(r.map(JG))}function pNe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=H8(e),$8(e)}function mNe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=H8(e),$8(e.map(JG))}function _Ne(i){const e=/^[\w ]+$/.test(i);return i=hc(i),e?`\\b${i}\\b`:i}function $8(i){let e=`(${i.map(_Ne).join(")|(")})`;return fue(e,!0)}const JG=function(){function i(n){if(bce){const r=new Uint16Array(n.length);let o=0;for(let s=n.length-1;s>=0;s--)r[o++]=n.charCodeAt(s);return vce().decode(r)}else{let r=[],o=0;for(let s=n.length-1;s>=0;s--)r[o++]=n.charAt(s);return r.join("")}}let e=null,t=null;return function(r){return e!==r&&(e=r,t=i(e)),t}}();class Ac{static _findPrevBracketInText(e,t,n,r){let o=n.match(e);if(!o)return null;let s=n.length-(o.index||0),a=o[0].length,u=r+s;return new Q(t,u-a+1,t,u+1)}static findPrevBracketInRange(e,t,n,r,o){const a=JG(n).substring(n.length-o,n.length-r);return this._findPrevBracketInText(e,t,a,r)}static findNextBracketInText(e,t,n,r){let o=n.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let u=r+s;return new Q(t,u+1,t,u+1+a)}static findNextBracketInRange(e,t,n,r,o){const s=n.substring(r,o);return this.findNextBracketInText(e,t,s,r)}}class vNe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const r=n.charAt(n.length-1);e.push(r)}return Eb(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const r=t.findTokenIndexAtOffset(n-1);if(Cf(t.getStandardTokenType(r)))return null;const o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=Ac.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;const u=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[u])return null;const h=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(h)?{matchOpenBracket:u}:null}}function OR(i){return i.global&&(i.lastIndex=0),!0}class bNe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&OR(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&OR(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&OR(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&OR(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Pw{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Pw._createOpenBracketRegExp(t[0]),r=Pw._createCloseBracketRegExp(t[1]);n&&r&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:r})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,r){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:r},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&r.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(r))return{indentAction:uo.IndentOutdent}}if(e>=2&&n.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:uo.Indent}}return null}static _createOpenBracketRegExp(e){let t=hc(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Pw._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=hc(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Pw._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return gn(t),null}}}const nr=gi("configurationService");function Uce(i,e){const t=Object.create(null);for(let n in i)eq(t,n,i[n],e);return t}function eq(i,e,t,n){const r=e.split("."),o=r.pop();let s=i;for(let a=0;a<r.length;a++){let u=r[a],d=s[u];switch(typeof d){case"undefined":d=s[u]=Object.create(null);break;case"object":break;default:n(`Ignoring ${e} as ${r.slice(0,a+1).join(".")} is ${JSON.stringify(d)}`);return}s=d}if(typeof s=="object"&&s!==null)try{s[o]=t}catch{n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(s)}`)}else n(`Ignoring ${e} as ${r.join(".")} is ${JSON.stringify(s)}`)}function CNe(i,e){const t=e.split(".");jce(i,t)}function jce(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(jce(n,e),Object.keys(n).length===0&&delete i[t])}}function wNe(i,e,t){function n(s,a){let u=s;for(const d of a){if(typeof u!="object"||u===null)return;u=u[d]}return u}const r=e.split("."),o=n(i,r);return typeof o>"u"?t:o}const Fs=gi("modeService");class kv{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const Kce=[];function z0(i,e,t){e instanceof kv||(e=new kv(e,[],t)),Kce.push([i,e])}function yNe(){return Kce}var SNe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},zJ=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class H9{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const fM=gi("languageConfigurationService");let i3=class extends Oe{constructor(e,t){super(),this.configurationService=e,this.modeService=t,this.onDidChangeEmitter=this._register(new be),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(VH));this._register(this.configurationService.onDidChangeConfiguration(r=>{const o=r.change.keys.some(a=>n.has(a)),s=r.change.overrides.filter(([a,u])=>u.some(d=>n.has(d))).map(([a])=>this.modeService.validateLanguageId(a));if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new H9(void 0));else for(const a of s)a&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new H9(a)))})),this._register(vi.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new H9(r.languageId))}))}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=LNe(e,this.configurationService,this.modeService),this.configurations.set(e,t)),t}};i3=SNe([zJ(0,nr),zJ(1,Fs)],i3);function LNe(i,e,t){let n=vi.getLanguageConfiguration(i);if(!n){const a=t.validateLanguageId(i);if(!a)throw new Error("Unexpected languageId");n=new AA(a,{})}const r=ENe(n.languageId,e),o=Gce([n.underlyingConfig,r]);return new AA(n.languageId,o)}const VH={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function ENe(i,e){const t=e.getValue(VH.brackets,{overrideIdentifier:i}),n=e.getValue(VH.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:UJ(t),colorizedBracketPairs:UJ(n)}}function UJ(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}class jJ{constructor(e){this.languageId=e}}class xNe{constructor(){this._entries=new Map,this._onDidChange=new be,this.onDidChange=this._onDidChange.event}register(e,t,n=0){let r=this._entries.get(e);r||(r=new DNe(e),this._entries.set(e,r));const o=r.register(t,n);return this._onDidChange.fire(new jJ(e)),Kn(()=>{o.dispose(),this._onDidChange.fire(new jJ(e))})}getLanguageConfiguration(e){let t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}getIndentationRules(e){const t=this.getLanguageConfiguration(e);return t&&t.indentationRules||null}_getElectricCharacterSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.electricCharacter||null}getElectricCharacters(e){let t=this._getElectricCharacterSupport(e);return t?t.getElectricCharacters():[]}onElectricCharacter(e,t,n){let r=o4(t,n-1),o=this._getElectricCharacterSupport(r.languageId);return o?o.onElectricCharacter(e,r,n-r.firstCharOffset):null}getComments(e){let t=this.getLanguageConfiguration(e);return t&&t.comments||null}_getCharacterPairSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.characterPair||null}getAutoClosingPairs(e){const t=this._getCharacterPairSupport(e);return new uNe(t?t.getAutoClosingPairs():[])}getAutoCloseBeforeSet(e){let t=this._getCharacterPairSupport(e);return t?t.getAutoCloseBeforeSet():hM.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED}getSurroundingPairs(e){let t=this._getCharacterPairSupport(e);return t?t.getSurroundingPairs():[]}getWordDefinition(e){let t=this.getLanguageConfiguration(e);return BF(t&&t.wordDefinition||null)}getFoldingRules(e){let t=this.getLanguageConfiguration(e);return t?t.foldingRules:{}}getIndentRulesSupport(e){let t=this.getLanguageConfiguration(e);return t&&t.indentRulesSupport||null}getPrecedingValidLine(e,t,n){let r=e.getLanguageIdAtPosition(t,0);if(t>1){let o,s=-1;for(o=t-1;o>=1;o--){if(e.getLanguageIdAtPosition(o,0)!==r)return s;let a=e.getLineContent(o);if(n.shouldIgnore(a)||/^\s+$/.test(a)||a===""){s=o;continue}return o}}return-1}getInheritIndentForLine(e,t,n,r=!0){if(e<4)return null;const o=this.getIndentRulesSupport(t.getLanguageId());if(!o)return null;if(n<=1)return{indentation:"",action:null};const s=this.getPrecedingValidLine(t,n,o);if(s<0)return null;if(s<1)return{indentation:"",action:null};const a=t.getLineContent(s);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:zi(a),action:uo.Indent,line:s};if(o.shouldDecrease(a))return{indentation:zi(a),action:null,line:s};{if(s===1)return{indentation:zi(t.getLineContent(s)),action:null,line:s};const u=s-1,d=o.getIndentMetadata(t.getLineContent(u));if(!(d&3)&&d&4){let h=0;for(let f=u-1;f>0;f--)if(!o.shouldIndentNextLine(t.getLineContent(f))){h=f;break}return{indentation:zi(t.getLineContent(h+1)),action:null,line:h+1}}if(r)return{indentation:zi(t.getLineContent(s)),action:null,line:s};for(let h=s;h>0;h--){const f=t.getLineContent(h);if(o.shouldIncrease(f))return{indentation:zi(f),action:uo.Indent,line:h};if(o.shouldIndentNextLine(f)){let p=0;for(let m=h-1;m>0;m--)if(!o.shouldIndentNextLine(t.getLineContent(h))){p=m;break}return{indentation:zi(t.getLineContent(p+1)),action:null,line:p+1}}else if(o.shouldDecrease(f))return{indentation:zi(f),action:null,line:h}}return{indentation:zi(t.getLineContent(1)),action:null,line:1}}}getGoodIndentForLine(e,t,n,r,o){if(e<4)return null;const s=this.getLanguageConfiguration(n);if(!s)return null;const a=this.getIndentRulesSupport(n);if(!a)return null;const u=this.getInheritIndentForLine(e,t,r),d=t.getLineContent(r);if(u){const h=u.line;if(h!==void 0){const f=s.onEnter(e,"",t.getLineContent(h),"");if(f){let p=zi(t.getLineContent(h));return f.removeText&&(p=p.substring(0,p.length-f.removeText)),f.indentAction===uo.Indent||f.indentAction===uo.IndentOutdent?p=o.shiftIndent(p):f.indentAction===uo.Outdent&&(p=o.unshiftIndent(p)),a.shouldDecrease(d)&&(p=o.unshiftIndent(p)),f.appendText&&(p+=f.appendText),zi(p)}}return a.shouldDecrease(d)?u.action===uo.Indent?u.indentation:o.unshiftIndent(u.indentation):u.action===uo.Indent?o.shiftIndent(u.indentation):u.indentation}return null}getIndentForEnter(e,t,n,r){if(e<4)return null;t.forceTokenization(n.startLineNumber);const o=t.getLineTokens(n.startLineNumber),s=o4(o,n.startColumn-1),a=s.getLineContent();let u=!1,d;s.firstCharOffset>0&&o.getLanguageId(0)!==s.languageId?(u=!0,d=a.substr(0,n.startColumn-1-s.firstCharOffset)):d=o.getLineContent().substring(0,n.startColumn-1);let h;n.isEmpty()?h=a.substr(n.startColumn-1-s.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset);const f=this.getIndentRulesSupport(s.languageId);if(!f)return null;const p=d,m=zi(d),v={getLineTokens:y=>t.getLineTokens(y),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(y,E)=>t.getLanguageIdAtPosition(y,E),getLineContent:y=>y===n.startLineNumber?p:t.getLineContent(y)},b=zi(o.getLineContent()),L=this.getInheritIndentForLine(e,v,n.startLineNumber+1);if(!L){const y=u?b:m;return{beforeEnter:y,afterEnter:y}}let S=u?b:L.indentation;return L.action===uo.Indent&&(S=r.shiftIndent(S)),f.shouldDecrease(h)&&(S=r.unshiftIndent(S)),{beforeEnter:u?b:m,afterEnter:S}}getIndentActionForType(e,t,n,r,o){if(e<4)return null;const s=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn);if(s.firstCharOffset)return null;const a=this.getIndentRulesSupport(s.languageId);if(!a)return null;const u=s.getLineContent(),d=u.substr(0,n.startColumn-1-s.firstCharOffset);let h;if(n.isEmpty()?h=u.substr(n.startColumn-1-s.firstCharOffset):h=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset),!a.shouldDecrease(d+h)&&a.shouldDecrease(d+r+h)){const f=this.getInheritIndentForLine(e,t,n.startLineNumber,!1);if(!f)return null;let p=f.indentation;return f.action!==uo.Indent&&(p=o.unshiftIndent(p)),p}return null}getIndentMetadata(e,t){const n=this.getIndentRulesSupport(e.getLanguageId());return!n||t<1||t>e.getLineCount()?null:n.getIndentMetadata(e.getLineContent(t))}getEnterAction(e,t,n){const r=this.getScopedLineTokens(t,n.startLineNumber,n.startColumn),o=this.getLanguageConfiguration(r.languageId);if(!o)return null;const s=r.getLineContent(),a=s.substr(0,n.startColumn-1-r.firstCharOffset);let u;n.isEmpty()?u=s.substr(n.startColumn-1-r.firstCharOffset):u=this.getScopedLineTokens(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-r.firstCharOffset);let d="";if(n.startLineNumber>1&&r.firstCharOffset===0){const b=this.getScopedLineTokens(t,n.startLineNumber-1);b.languageId===r.languageId&&(d=b.getLineContent())}const h=o.onEnter(e,d,a,u);if(!h)return null;const f=h.indentAction;let p=h.appendText;const m=h.removeText||0;p?f===uo.Indent&&(p="	"+p):f===uo.Indent||f===uo.IndentOutdent?p="	":p="";let v=this.getIndentationAtPosition(t,n.startLineNumber,n.startColumn);return m&&(v=v.substring(0,v.length-m)),{indentAction:f,appendText:p,removeText:m,indentation:v}}getIndentationAtPosition(e,t,n){const r=e.getLineContent(t);let o=zi(r);return o.length>n-1&&(o=o.substring(0,n-1)),o}getScopedLineTokens(e,t,n){e.forceTokenization(t);const r=e.getLineTokens(t),o=typeof n>"u"?e.getLineMaxColumn(t)-1:n-1;return o4(r,o)}}const vi=new xNe;class DNe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new KJ(e,t,++this._order);return this._entries.push(n),this._resolved=null,Kn(()=>{for(let r=0;r<this._entries.length;r++)if(this._entries[r]===n){this._entries.splice(r,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new AA(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(KJ.cmp),Gce(this._entries.map(e=>e.configuration)))}}function Gce(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class KJ{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class AA{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Pw(this.underlyingConfig):null,this.comments=AA._handleComments(this.underlyingConfig),this.characterPair=new hM(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||Aue,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new bNe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{}}getWordDefinition(){return BF(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new hNe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new vNe(this.brackets)),this._electricCharacter}onEnter(e,t,n,r){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,r):null}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[r,o]=t.blockComment;n.blockCommentStartToken=r,n.blockCommentEndToken=o}return n}}z0(fM,i3);const gM=gi("undoRedoService");class qce{constructor(e,t){this.resource=e,this.elements=t}}class qy{constructor(){this.id=qy._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}qy._ID=0;qy.None=new qy;class Bf{constructor(){this.id=Bf._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}}Bf._ID=0;Bf.None=new Bf;class GJ{constructor(e,t,n){this.range=e,this.nestingLevel=t,this.isInvalid=n}}class INe{constructor(e,t,n,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=r}}class kNe extends INe{constructor(e,t,n,r,o){super(e,t,n,r),this.minVisibleColumnIndentation=o}}class TNe{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return`${this.lineCount},${this.columnCount}`}}function NNe(i,e,t,n){return i!==t?Gr(t-i,n):Gr(0,n-e)}const Mp=0;function ANe(i){return i===0}const Au=Math.pow(2,26);function Gr(i,e){return i*Au+e}function a0(i){const e=i,t=Math.floor(e/Au),n=e-t*Au;return new TNe(t,n)}function ONe(i){return Math.floor(i/Au)}function Ts(i,e){return e<Au?i+e:i-i%Au+e}function MNe(i,e){const t=i,n=e;if(n-t<=0)return Mp;const o=Math.floor(t/Au),s=Math.floor(n/Au),a=n-s*Au;if(o===s){const u=t-o*Au;return Gr(0,a-u)}else return Gr(s-o,a)}function s4(i,e){return i<e}function B1(i,e){return i<=e}function MR(i,e){return i>=e}function RR(i){return Gr(i.lineNumber-1,i.column-1)}function M2(i,e){const t=i,n=Math.floor(t/Au),r=t-n*Au,o=e,s=Math.floor(o/Au),a=o-s*Au;return new Q(n+1,r+1,s+1,a+1)}function RNe(i){const e=sg(i);return Gr(e.length-1,e[e.length-1].length)}class qJ{constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}}class PNe{constructor(e,t){this.documentLength=t,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(n=>tq.from(n))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):this.documentLength;return MNe(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Gr(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Gr(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=a0(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Gr(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Gr(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(B1(n,e)){this.nextEditIdx++;const r=a0(n),o=a0(this.translateOldToCur(t.endOffsetBeforeObj)),s=r.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,u=r.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+u,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class tq{constructor(e,t,n){this.endOffsetBeforeObj=a0(t),this.endOffsetAfterObj=a0(Ts(e,n)),this.offsetObj=a0(e)}static from(e){return new tq(e.startOffset,e.endOffset,e.newLength)}}class ur{static visibleColumnFromColumn(e,t,n){const r=e.length,o=t-1<r?t-1:r;let s=0,a=0;for(;a<o;){const u=F1(e,o,a);if(a+=u>=65536?2:1,u===9)s=ur.nextRenderTabStop(s,n);else{let d=LR(u);for(;a<o;){const h=F1(e,o,a),f=LR(h);if(OF(d,f))break;a+=h>=65536?2:1,d=f}ag(u)||AF(u)?s=s+2:s=s+1}}return s}static visibleColumnFromColumn2(e,t,n){return this.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,e.tabSize)}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const r=e.length;let o=0,s=1,a=0;for(;a<r;){const u=F1(e,r,a);a+=u>=65536?2:1;let d;if(u===9)d=ur.nextRenderTabStop(o,n);else{let f=LR(u);for(;a<r;){const p=F1(e,r,a),m=LR(p);if(OF(f,m))break;a+=p>=65536?2:1,f=m}ag(u)||AF(u)?d=o+2:d=o+1}const h=a+1;if(d>=t){const f=t-o;return d-t<f?h:s}o=d,s=h}return r+1}static columnFromVisibleColumn2(e,t,n,r){let o=this.columnFromVisibleColumn(t.getLineContent(n),r,e.tabSize),s=t.getLineMinColumn(n);if(o<s)return s;let a=t.getLineMaxColumn(n);return o>a?a:o}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}const a4=new Array;class wo{constructor(e,t){this.items=e,this.additionalItems=t}static create(e,t){if(e<=128&&t.length===0){let n=wo.cache[e];return n||(n=new wo(e,t),wo.cache[e]=n),n}return new wo(e,t)}static getEmpty(){return this.empty}add(e,t){const n=t.getKey(e);let r=n>>5;if(r===0){const s=1<<n|this.items;return s===this.items?this:wo.create(s,this.additionalItems)}r--;const o=this.additionalItems.slice(0);for(;o.length<r;)o.push(0);return o[r]|=1<<(n&31),wo.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===a4&&e.additionalItems===a4)return t===this.items?this:t===e.items?e:wo.create(t,a4);const n=new Array;for(let r=0;r<Math.max(this.additionalItems.length,e.additionalItems.length);r++){const o=this.additionalItems[r]||0,s=e.additionalItems[r]||0;n.push(o|s)}return wo.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}}wo.cache=new Array(129);wo.empty=wo.create(0,a4);const YJ={getKey(i){return i}};class FNe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class nq{constructor(e){this._length=e}get length(){return this._length}}class OA extends nq{constructor(e,t,n,r,o){super(e),this.openingBracket=t,this.child=n,this.closingBracket=r,this.missingOpeningBracketIds=o}static create(e,t,n){let r=e.length;return t&&(r=Ts(r,t.length)),n&&(r=Ts(r,n.length)),new OA(r,e,t,n,t?t.missingOpeningBracketIds:wo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=new Array;return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new OA(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Ts(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class ug extends nq{constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(e,t,n,r=!1){let o=e.length,s=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=Ts(o,t.length),s=s.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");o=Ts(o,n.length),s=s.merge(n.missingOpeningBracketIds)}return r?new BNe(o,e.listHeight+1,e,t,n,s):new MA(o,e.listHeight+1,e,t,n,s)}static getEmpty(){return new WNe(Mp,0,[],wo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;let t=this,n;for(;t.kind===4&&(n=t.childrenLength)>0;)t=t.getChild(n-1);return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<e;r++){const o=this.getChild(r);t=Ts(t,o.length),n=n.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,r=e;for(let o=0;o<this.childrenLength;o++){const s=this.getChild(o);s&&(n=Math.min(n,s.computeMinIndentation(r,t)),r=Ts(r,s.length))}return this.cachedMinIndentation=n,n}}class MA extends ug{constructor(e,t,n,r,o,s){super(e,t,s),this._item1=n,this._item2=r,this._item3=o}get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new MA(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class BNe extends MA{toMutable(){return new MA(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class r3 extends ug{constructor(e,t,n,r){super(e,t,r),this._children=n}get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new r3(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class WNe extends r3{toMutable(){return new r3(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const VNe=[];class iq extends nq{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return VNe}deepClone(){return this}}class fw extends iq{get kind(){return 0}get missingOpeningBracketIds(){return wo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=a0(e),r=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=ONe(Ts(e,this.length))+1;let s=Number.MAX_SAFE_INTEGER;for(let a=r;a<=o;a++){const u=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(u===0)continue;const h=ur.visibleColumnFromColumn(d,u,t.getOptions().tabSize);s=Math.min(s,h)}return s}}class nb extends iq{constructor(e){super(e)}static create(e){const t=e,n=nb.cacheByLength.get(t);if(n)return n;const r=new nb(e);return nb.cacheByLength.set(t,r),r}get kind(){return 1}get missingOpeningBracketIds(){return wo.getEmpty()}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}nb.cacheByLength=new Map;class HNe extends iq{constructor(e,t){super(t),this.missingOpeningBracketIds=e}get kind(){return 3}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let Ov=class{constructor(e,t,n,r,o){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=r,this.astNode=o}};class $Ne{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new zNe(this.textModel,this.bracketTokens),this._offset=Mp,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Gr(this.textBufferLineCount,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Ts(this._offset,e);const t=a0(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Ts(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class zNe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const o=this.lineTokens,s=o.getCount();let a=null;if(this.lineTokenOffset<s){const u=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&u===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const d=na.getTokenType(u)===0,h=o.getEndOffset(this.lineTokenOffset);if(d&&h!==this.lineCharOffset){const f=o.getLanguageId(this.lineTokenOffset),p=this.line.substring(this.lineCharOffset,h),m=this.bracketTokens.getSingleLanguageBracketTokens(f),v=m.regExpGlobal;if(v){v.lastIndex=0;const b=v.exec(p);b&&(a=m.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const r=NNe(e,t,this.lineIdx,this.lineCharOffset);return new Ov(r,0,-1,wo.getEmpty(),new fw(r))}}class UNe{constructor(e,t){this.text=e,this._offset=Mp,this.idx=0;const r=t.getRegExpStr()?new RegExp(t.getRegExpStr()+`|
`,"g"):null,o=[];let s,a=0,u=0,d=0,h=0;const f=new Array;for(let v=0;v<60;v++)f.push(new Ov(Gr(0,v),0,-1,wo.getEmpty(),new fw(Gr(0,v))));const p=new Array;for(let v=0;v<60;v++)p.push(new Ov(Gr(1,v),0,-1,wo.getEmpty(),new fw(Gr(1,v))));if(r)for(r.lastIndex=0;(s=r.exec(e))!==null;){const v=s.index,b=s[0];if(b===`
`)a++,u=v+1;else{if(d!==v){let L;if(h===a){const S=v-d;if(S<f.length)L=f[S];else{const y=Gr(0,S);L=new Ov(y,0,-1,wo.getEmpty(),new fw(y))}}else{const S=a-h,y=v-u;if(S===1&&y<p.length)L=p[y];else{const E=Gr(S,y);L=new Ov(E,0,-1,wo.getEmpty(),new fw(E))}}o.push(L)}o.push(t.getToken(b)),d=v+b.length,h=a}}const m=e.length;if(d!==m){const v=h===a?Gr(0,m-d):Gr(a-h,m-u);o.push(new Ov(v,0,-1,wo.getEmpty(),new fw(v)))}this.length=Gr(a,m-u),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new mLe}}class o3{constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(e,t){function n(u,d){return t.getKey(`${u}:::${d}`)}const r=e.characterPair.getColorizedBrackets(),o=new Map,s=new Set;for(const[u,d]of r){s.add(u);let h=o.get(d);const f=n(e.languageId,u);h||(h={openingBrackets:wo.getEmpty(),first:f},o.set(d,h)),h.openingBrackets=h.openingBrackets.add(f,YJ)}const a=new Map;for(const[u,d]of o){const h=Gr(0,u.length);a.set(u,new Ov(h,2,d.first,d.openingBrackets,nb.create(h)))}for(const u of s){const d=Gr(0,u.length),h=n(e.languageId,u);a.set(u,new Ov(d,1,h,wo.getEmpty().add(h,YJ),nb.create(d)))}return new o3(a)}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>jNe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"g"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e)}get isEmpty(){return this.map.size===0}}function jNe(i){const e=hc(i);return/^[\w ]+$/.test(i)?`\\b${e}\\b`:e}class KNe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){const t=this.languageIdToBracketTokens.get(e);if(!t)return!1;const n=o3.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider).getRegExpStr();return t.getRegExpStr()!==n}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=o3.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function GNe(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const s=e,a=i[s].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-s>=2?Yce(s===0&&e===i.length?i:i.slice(s,e),!1):i[s]}let n=t(),r=t();if(!r)return n;for(let s=t();s;s=t())ZJ(n,r)<=ZJ(r,s)?(n=$9(n,r),r=s):r=$9(r,s);return $9(n,r)}function Yce(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let r=0;r<n;r++){const o=r<<1;i[r]=ug.create23(i[o],i[o+1],o+3===t?i[o+2]:null,e)}t=n}return ug.create23(i[0],i[1],t>=3?i[2]:null,e)}function ZJ(i,e){return Math.abs(i.listHeight-e.listHeight)}function $9(i,e){return i.listHeight===e.listHeight?ug.create23(i,e,null,!1):i.listHeight>e.listHeight?qNe(i,e):YNe(e,i)}function qNe(i,e){i=i.toMutable();let t=i;const n=new Array;let r;for(;;){if(e.listHeight===t.listHeight){r=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){const s=n[o];r?s.childrenLength>=3?r=ug.create23(s.unappendChild(),r,null,!1):(s.appendChildOfSameHeight(r),r=void 0):s.handleChildrenChanged()}return r?ug.create23(i,r,null,!1):i}function YNe(i,e){i=i.toMutable();let t=i;const n=new Array;for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let r=e;for(let o=n.length-1;o>=0;o--){const s=n[o];r?s.childrenLength>=3?r=ug.create23(r,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(r),r=void 0):s.handleChildrenChanged()}return r?ug.create23(r,i,null,!1):i}class ZNe{constructor(e){this.lastOffset=Mp,this.nextNodes=[e],this.offsets=[Mp],this.idxs=[]}readLongestNodeAt(e,t){if(s4(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=DN(this.nextNodes);if(!n)return;const r=DN(this.offsets);if(s4(e,r))return;if(s4(r,e))if(Ts(r,n.length)<=e)this.nextNodeAfterCurrent();else{const o=z9(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(r),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const o=z9(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(r),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=DN(this.offsets),t=DN(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=DN(this.nextNodes),r=z9(n,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(n.getChild(r)),this.offsets.push(Ts(e,t.length)),this.idxs[this.idxs.length-1]=r;break}else this.idxs.pop()}}}function z9(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function DN(i){return i.length>0?i[i.length-1]:void 0}function XJ(i,e,t,n){return new XNe(i,e,t,n).parseDocument()}class XNe{constructor(e,t,n,r){if(this.tokenizer=e,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,n&&r)throw new Error("Not supported");this.oldNodeReader=n?new ZNe(n):void 0,this.positionMapper=new PNe(t,e.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(wo.getEmpty());return e||(e=ug.getEmpty()),e}parseList(e){const t=new Array;for(;;){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;const o=this.parseChild(e);o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?GNe(t):Yce(t,this.createImmutableLists)}parseChild(e){if(this.oldNodeReader){const n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!ANe(n)){const r=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>s4(o.length,n)?o.canBeReused(e):!1);if(r)return this._itemsFromCache++,this.tokenizer.skip(r.length),r}}this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new HNe(t.bracketIds,t.length);case 0:return t.astNode;case 1:const n=e.merge(t.bracketIds),r=this.parseList(n),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===t.bracketId||o.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),OA.create(t.astNode,r,o.astNode)):OA.create(t.astNode,r,null);default:throw new Error("unexpected")}}}class QNe extends Oe{constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new be,this.denseKeyProvider=new FNe,this.brackets=new KNe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this._register(e.onBackgroundTokenizationStateChanged(()=>{if(e.backgroundTokenizationState===2){const n=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,n||this.didChangeEmitter.fire()}})),this._register(e.onDidChangeTokens(({ranges:n})=>{const r=n.map(o=>new qJ(Gr(o.fromLineNumber-1,0),Gr(o.toLineNumber,0),Gr(o.toLineNumber-o.fromLineNumber+1,0)));this.astWithTokens=this.parseDocumentFromTextBuffer(r,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()})),e.backgroundTokenizationState===0){const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new UNe(this.textModel.getValue(),n);this.initialAstWithoutTokens=XJ(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else e.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):e.backgroundTokenizationState===1&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(e){return this.brackets.didLanguageChange(e)}handleContentChanged(e){const t=e.changes.map(n=>{const r=Q.lift(n.range);return new qJ(RR(r.getStartPosition()),RR(r.getEndPosition()),RNe(n.text))}).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(t,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(t,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(e,t,n){const r=t,o=new $Ne(this.textModel,this.brackets);return XJ(o,e,r,n)}getBracketsInRange(e){const t=Gr(e.startLineNumber-1,e.startColumn-1),n=Gr(e.endLineNumber-1,e.endColumn-1),r=new Array,o=this.initialAstWithoutTokens||this.astWithTokens;return n2(o,Mp,o.length,t,n,r),r}getBracketPairsInRange(e,t){const n=new Array,r=RR(e.getStartPosition()),o=RR(e.getEndPosition()),s=this.initialAstWithoutTokens||this.astWithTokens,a=new JNe(n,t,this.textModel);return Zce(s,Mp,s.length,r,o,a),n}}function n2(i,e,t,n,r,o,s=0){if(i.kind===1){const a=M2(e,t);o.push(new GJ(a,s-1,!1))}else if(i.kind===3){const a=M2(e,t);o.push(new GJ(a,s-1,!0))}else if(i.kind===4)for(const a of i.children)t=Ts(e,a.length),B1(e,r)&&MR(t,n)&&n2(a,e,t,n,r,o,s),e=t;else if(i.kind===2){s++;{const a=i.openingBracket;t=Ts(e,a.length),B1(e,r)&&MR(t,n)&&n2(a,e,t,n,r,o,s),e=t}if(i.child){const a=i.child;t=Ts(e,a.length),B1(e,r)&&MR(t,n)&&n2(a,e,t,n,r,o,s),e=t}if(i.closingBracket){const a=i.closingBracket;t=Ts(e,a.length),B1(e,r)&&MR(t,n)&&n2(a,e,t,n,r,o,s),e=t}}}class JNe{constructor(e,t,n){this.result=e,this.includeMinIndentation=t,this.textModel=n}}function Zce(i,e,t,n,r,o,s=0){var a;if(i.kind===2){const d=Ts(e,i.openingBracket.length);let h=-1;o.includeMinIndentation&&(h=i.computeMinIndentation(e,o.textModel)),o.result.push(new kNe(M2(e,t),M2(e,d),i.closingBracket?M2(Ts(d,((a=i.child)===null||a===void 0?void 0:a.length)||Mp),t):void 0,s,h)),s++}let u=e;for(const d of i.children){const h=u;u=Ts(u,d.length),B1(h,r)&&B1(n,u)&&Zce(d,h,u,n,r,o,s)}}class e2e extends Oe{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Aa),this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(e.onDidChangeOptions(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(e.onDidChangeLanguage(n=>{this.bracketPairsTree.clear(),this.updateBracketPairsTree()})),this._register(this.languageConfigurationService.onDidChange(n=>{var r;(!n.languageId||!((r=this.bracketPairsTree.value)===null||r===void 0)&&r.object.didLanguageChange(n.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}))}get isDocumentSupported(){return this.textModel.getValueLength()<=5e6}updateBracketPairsTree(){if(this.bracketsRequested&&this.isDocumentSupported){if(!this.bracketPairsTree.value){const e=new Qe;this.bracketPairsTree.value=t2e(e.add(new QNe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}handleContentChanged(e){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleContentChanged(e)}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!1))||[]}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketPairsInRange(e,!0))||[]}getBracketsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)===null||t===void 0?void 0:t.object.getBracketsInRange(e))||[]}findMatchingBracketUp(e,t){let n=e.toLowerCase(),r=this.textModel.validatePosition(t);const o=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);let s=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!s)return null;let a=s.textIsBracket[n];return a?PR(this._findMatchingBracketUp(a,r,null)):null}matchBracket(e){return this._matchBracket(this.textModel.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,r){const o=t.getCount(),s=t.getLanguageId(r);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let d=r-1;d>=0;d--){const h=t.getEndOffset(d);if(h<=a)break;if(Cf(t.getStandardTokenType(d))||t.getLanguageId(d)!==s){a=h;break}}let u=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let d=r+1;d<o;d++){const h=t.getStartOffset(d);if(h>=u)break;if(Cf(t.getStandardTokenType(d))||t.getLanguageId(d)!==s){u=h;break}}return{searchStartOffset:a,searchEndOffset:u}}_matchBracket(e){const t=e.lineNumber,n=this.textModel.getLineTokens(t),r=this.textModel.getLineContent(t),o=n.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const s=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(o)).brackets;if(s&&!Cf(n.getStandardTokenType(o))){let{searchStartOffset:a,searchEndOffset:u}=this._establishBracketSearchOffsets(e,n,s,o),d=null;for(;;){const h=Ac.findNextBracketInRange(s.forwardRegex,t,r,a,u);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const f=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),p=this._matchFoundBracket(h,s.textIsBracket[f],s.textIsOpenBracket[f],null);if(p){if(p instanceof ep)return null;d=p}}a=h.endColumn-1}if(d)return d}if(o>0&&n.getStartOffset(o)===e.column-1){const a=o-1,u=this.languageConfigurationService.getLanguageConfiguration(n.getLanguageId(a)).brackets;if(u&&!Cf(n.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,n,u,a);const f=Ac.findPrevBracketInRange(u.reversedRegex,t,r,d,h);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn){const p=r.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),m=this._matchFoundBracket(f,u.textIsBracket[p],u.textIsOpenBracket[p],null);if(m)return m instanceof ep?null:m}}}return null}_matchFoundBracket(e,t,n,r){if(!t)return null;const o=n?this._findMatchingBracketDown(t,e.getEndPosition(),r):this._findMatchingBracketUp(t,e.getStartPosition(),r);return o?o instanceof ep?o:[e,o]:null}_findMatchingBracketUp(e,t,n){const r=e.languageId,o=e.reversedRegex;let s=-1,a=0;const u=(d,h,f,p)=>{for(;;){if(n&&++a%100===0&&!n())return ep.INSTANCE;const m=Ac.findPrevBracketInRange(o,d,h,f,p);if(!m)break;const v=h.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(e.isOpen(v)?s++:e.isClose(v)&&s--,s===0)return m;p=m.startColumn-1}return null};for(let d=t.lineNumber;d>=1;d--){const h=this.textModel.getLineTokens(d),f=h.getCount(),p=this.textModel.getLineContent(d);let m=f-1,v=p.length,b=p.length;d===t.lineNumber&&(m=h.findTokenIndexAtOffset(t.column-1),v=t.column-1,b=t.column-1);let L=!0;for(;m>=0;m--){const S=h.getLanguageId(m)===r&&!Cf(h.getStandardTokenType(m));if(S)L?v=h.getStartOffset(m):(v=h.getStartOffset(m),b=h.getEndOffset(m));else if(L&&v!==b){const y=u(d,p,v,b);if(y)return y}L=S}if(L&&v!==b){const S=u(d,p,v,b);if(S)return S}}return null}_findMatchingBracketDown(e,t,n){const r=e.languageId,o=e.forwardRegex;let s=1,a=0;const u=(h,f,p,m)=>{for(;;){if(n&&++a%100===0&&!n())return ep.INSTANCE;const v=Ac.findNextBracketInRange(o,h,f,p,m);if(!v)break;const b=f.substring(v.startColumn-1,v.endColumn-1).toLowerCase();if(e.isOpen(b)?s++:e.isClose(b)&&s--,s===0)return v;p=v.endColumn-1}return null},d=this.textModel.getLineCount();for(let h=t.lineNumber;h<=d;h++){const f=this.textModel.getLineTokens(h),p=f.getCount(),m=this.textModel.getLineContent(h);let v=0,b=0,L=0;h===t.lineNumber&&(v=f.findTokenIndexAtOffset(t.column-1),b=t.column-1,L=t.column-1);let S=!0;for(;v<p;v++){const y=f.getLanguageId(v)===r&&!Cf(f.getStandardTokenType(v));if(y)S||(b=f.getStartOffset(v)),L=f.getEndOffset(v);else if(S&&b!==L){const E=u(h,m,b,L);if(E)return E}S=y}if(S&&b!==L){const y=u(h,m,b,L);if(y)return y}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);let n=null,r=null;for(let o=t.lineNumber;o>=1;o--){const s=this.textModel.getLineTokens(o),a=s.getCount(),u=this.textModel.getLineContent(o);let d=a-1,h=u.length,f=u.length;if(o===t.lineNumber){d=s.findTokenIndexAtOffset(t.column-1),h=t.column-1,f=t.column-1;const m=s.getLanguageId(d);n!==m&&(n=m,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets)}let p=!0;for(;d>=0;d--){const m=s.getLanguageId(d);if(n!==m){if(r&&p&&h!==f){const b=Ac.findPrevBracketInRange(r.reversedRegex,o,u,h,f);if(b)return this._toFoundBracket(r,b);p=!1}n=m,r=this.languageConfigurationService.getLanguageConfiguration(n).brackets}const v=!!r&&!Cf(s.getStandardTokenType(d));if(v)p?h=s.getStartOffset(d):(h=s.getStartOffset(d),f=s.getEndOffset(d));else if(r&&p&&h!==f){const b=Ac.findPrevBracketInRange(r.reversedRegex,o,u,h,f);if(b)return this._toFoundBracket(r,b)}p=v}if(r&&p&&h!==f){const m=Ac.findPrevBracketInRange(r.reversedRegex,o,u,h,f);if(m)return this._toFoundBracket(r,m)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e),n=this.textModel.getLineCount();let r=null,o=null;for(let s=t.lineNumber;s<=n;s++){const a=this.textModel.getLineTokens(s),u=a.getCount(),d=this.textModel.getLineContent(s);let h=0,f=0,p=0;if(s===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),f=t.column-1,p=t.column-1;const v=a.getLanguageId(h);r!==v&&(r=v,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets)}let m=!0;for(;h<u;h++){const v=a.getLanguageId(h);if(r!==v){if(o&&m&&f!==p){const L=Ac.findNextBracketInRange(o.forwardRegex,s,d,f,p);if(L)return this._toFoundBracket(o,L);m=!1}r=v,o=this.languageConfigurationService.getLanguageConfiguration(r).brackets}const b=!!o&&!Cf(a.getStandardTokenType(h));if(b)m||(f=a.getStartOffset(h)),p=a.getEndOffset(h);else if(o&&m&&f!==p){const L=Ac.findNextBracketInRange(o.forwardRegex,s,d,f,p);if(L)return this._toFoundBracket(o,L)}m=b}if(o&&m&&f!==p){const v=Ac.findNextBracketInRange(o.forwardRegex,s,d,f,p);if(v)return this._toFoundBracket(o,v)}}return null}findEnclosingBrackets(e,t){let n;if(typeof t>"u")n=null;else{const m=Date.now();n=()=>Date.now()-m<=t}const r=this.textModel.validatePosition(e),o=this.textModel.getLineCount(),s=new Map;let a=[];const u=(m,v)=>{if(!s.has(m)){let b=[];for(let L=0,S=v?v.brackets.length:0;L<S;L++)b[L]=0;s.set(m,b)}a=s.get(m)};let d=0;const h=(m,v,b,L,S)=>{for(;;){if(n&&++d%100===0&&!n())return ep.INSTANCE;const y=Ac.findNextBracketInRange(m.forwardRegex,v,b,L,S);if(!y)break;const E=b.substring(y.startColumn-1,y.endColumn-1).toLowerCase(),A=m.textIsBracket[E];if(A&&(A.isOpen(E)?a[A.index]++:A.isClose(E)&&a[A.index]--,a[A.index]===-1))return this._matchFoundBracket(y,A,!1,n);L=y.endColumn-1}return null};let f=null,p=null;for(let m=r.lineNumber;m<=o;m++){const v=this.textModel.getLineTokens(m),b=v.getCount(),L=this.textModel.getLineContent(m);let S=0,y=0,E=0;if(m===r.lineNumber){S=v.findTokenIndexAtOffset(r.column-1),y=r.column-1,E=r.column-1;const N=v.getLanguageId(S);f!==N&&(f=N,p=this.languageConfigurationService.getLanguageConfiguration(f).brackets,u(f,p))}let A=!0;for(;S<b;S++){const N=v.getLanguageId(S);if(f!==N){if(p&&A&&y!==E){const R=h(p,m,L,y,E);if(R)return PR(R);A=!1}f=N,p=this.languageConfigurationService.getLanguageConfiguration(f).brackets,u(f,p)}const V=!!p&&!Cf(v.getStandardTokenType(S));if(V)A||(y=v.getStartOffset(S)),E=v.getEndOffset(S);else if(p&&A&&y!==E){const R=h(p,m,L,y,E);if(R)return PR(R)}A=V}if(p&&A&&y!==E){const N=h(p,m,L,y,E);if(N)return PR(N)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();let r=e.textIsBracket[n];return r?{range:t,open:r.open,close:r.close,isOpen:e.textIsOpenBracket[n]}:null}}function t2e(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}class ep{constructor(){this._searchCanceledBrand=void 0}}ep.INSTANCE=new ep;function PR(i){return i instanceof ep?null:i}const n2e=Ce("editor.lineHighlightBackground",{dark:null,light:null,hc:null},C("lineHighlight","Background color for the highlight of line at the cursor position.")),QJ=Ce("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hc:"#f38518"},C("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),i2e=Ce("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hc:null},C("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),r2e=Ce("editor.rangeHighlightBorder",{dark:null,light:null,hc:Ja},C("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),o2e=Ce("editor.symbolHighlightBackground",{dark:kH,light:kH,hc:null},C("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),s2e=Ce("editor.symbolHighlightBorder",{dark:null,light:null,hc:Ja},C("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),Xce=Ce("editorCursor.foreground",{dark:"#AEAFAD",light:ye.black,hc:ye.white},C("caret","Color of the editor cursor.")),a2e=Ce("editorCursor.background",null,C("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),ib=Ce("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hc:"#e3e4e229"},C("editorWhitespaces","Color of whitespace characters in the editor.")),z8=Ce("editorIndentGuide.background",{dark:ib,light:ib,hc:ib},C("editorIndentGuides","Color of the editor indentation guides.")),U8=Ce("editorIndentGuide.activeBackground",{dark:ib,light:ib,hc:ib},C("editorActiveIndentGuide","Color of the active editor indentation guides.")),Qce=Ce("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hc:ye.white},C("editorLineNumbers","Color of editor line numbers.")),U9=Ce("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hc:Ja},C("editorActiveLineNumber","Color of editor active line number"),!1,C("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),l2e=Ce("editorLineNumber.activeForeground",{dark:U9,light:U9,hc:U9},C("editorActiveLineNumber","Color of editor active line number")),u2e=Ce("editorRuler.foreground",{dark:"#5A5A5A",light:ye.lightgrey,hc:ye.white},C("editorRuler","Color of the editor rulers.")),c2e=Ce("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hc:"#0064001a"},C("editorBracketMatchBackground","Background color behind matching brackets")),Jce=Ce("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hc:ho},C("editorBracketMatchBorder","Color for matching brackets boxes")),d2e=Ce("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hc:"#7f7f7f4d"},C("editorOverviewRulerBorder","Color of the overview ruler border.")),h2e=Ce("editorOverviewRuler.background",null,C("editorOverviewRulerBackground","Background color of the editor overview ruler. Only used when the minimap is enabled and placed on the right side of the editor.")),f2e=Ce("editorGutter.background",{dark:sc,light:sc,hc:sc},C("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),g2e=Ce("editorUnnecessaryCode.border",{dark:null,light:null,hc:ye.fromHex("#fff").transparent(.8)},C("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),p2e=Ce("editorUnnecessaryCode.opacity",{dark:ye.fromHex("#000a"),light:ye.fromHex("#0007"),hc:null},C("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),m2e=Ce("editorGhostText.border",{dark:null,light:null,hc:ye.fromHex("#fff").transparent(.8)},C("editorGhostTextBorder","Border color of ghost text in the editor.")),_2e=Ce("editorGhostText.foreground",{dark:ye.fromHex("#ffffff56"),light:ye.fromHex("#0007"),hc:null},C("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),v2e=Ce("editorGhostText.background",{dark:null,light:null,hc:null},C("editorGhostTextBackground","Background color of the ghost text in the editor.")),j9=new ye(new fi(0,122,204,.6)),b2e=Ce("editorOverviewRuler.rangeHighlightForeground",{dark:j9,light:j9,hc:j9},C("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),C2e=Ce("editorOverviewRuler.errorForeground",{dark:new ye(new fi(255,18,18,.7)),light:new ye(new fi(255,18,18,.7)),hc:new ye(new fi(255,50,50,1))},C("overviewRuleError","Overview ruler marker color for errors.")),w2e=Ce("editorOverviewRuler.warningForeground",{dark:bp,light:bp,hc:I8},C("overviewRuleWarning","Overview ruler marker color for warnings.")),y2e=Ce("editorOverviewRuler.infoForeground",{dark:qh,light:qh,hc:AG},C("overviewRuleInfo","Overview ruler marker color for infos.")),ede=Ce("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hc:"#FFD700"},C("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),tde=Ce("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hc:"#DA70D6"},C("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),nde=Ce("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hc:"#87CEFA"},C("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),ide=Ce("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),rde=Ce("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),ode=Ce("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),S2e=Ce("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ye(new fi(255,18,18,.8)),light:new ye(new fi(255,18,18,.8)),hc:new ye(new fi(255,50,50,1))},C("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),L2e=Ce("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),E2e=Ce("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),x2e=Ce("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),D2e=Ce("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),I2e=Ce("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),k2e=Ce("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),T2e=Ce("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),N2e=Ce("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),A2e=Ce("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),O2e=Ce("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),M2e=Ce("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),R2e=Ce("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hc:"#00000000"},C("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));hr((i,e)=>{const t=i.getColor(sc);t&&e.addRule(`.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: ${t}; }`);const n=i.getColor(uM);n&&e.addRule(`.monaco-editor, .monaco-editor .inputarea.ime-input { color: ${n}; }`);const r=i.getColor(f2e);r&&e.addRule(`.monaco-editor .margin { background-color: ${r}; }`);const o=i.getColor(i2e);o&&e.addRule(`.monaco-editor .rangeHighlight { background-color: ${o}; }`);const s=i.getColor(r2e);s&&e.addRule(`.monaco-editor .rangeHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${s}; }`);const a=i.getColor(o2e);a&&e.addRule(`.monaco-editor .symbolHighlight { background-color: ${a}; }`);const u=i.getColor(s2e);u&&e.addRule(`.monaco-editor .symbolHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${u}; }`);const d=i.getColor(ib);d&&(e.addRule(`.monaco-editor .mtkw { color: ${d} !important; }`),e.addRule(`.monaco-editor .mtkz { color: ${d} !important; }`))});class P2e extends Oe{constructor(e){super(),this.textModel=e,this.colorProvider=new sde,this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.onDidChangeOptions(t=>{this.colorizationOptions=e.getOptions().bracketPairColorizationOptions})),this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}getDecorationsInRange(e,t,n){if(t===void 0)return[];if(!this.colorizationOptions.enabled)return[];const r=new Array,o=this.textModel.bracketPairs.getBracketsInRange(e);for(const s of o)r.push({id:`bracket${s.range.toString()}-${s.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(s)},ownerId:0,range:s.range});return r}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Q(1,1,this.textModel.getLineCount(),1),e,t):[]}}class sde{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}hr((i,e)=>{const t=[ede,tde,nde,ide,rde,ode],n=new sde;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(S2e)}; }`);let r=t.map(o=>i.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const s=r[o%r.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});var F2e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},K9=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function B2e(){return new eNe}function W2e(i){const e=B2e();return e.acceptChunk(i),e.finish()}function JJ(i,e){return(typeof i=="string"?W2e(i):i).create(e)}let FR=0;const V2e=999,H2e=1e4;class $2e{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let r=this._source.read();if(r===null)return this._eos=!0,t===0?null:e.join("");if(r.length>0&&(e[t++]=r,n+=r.length),n>=64*1024)return e.join("")}while(!0)}}const IN=()=>{throw new Error("Invalid change accessor")};let Ll=class wf extends Oe{constructor(e,t,n,r=null,o,s,a){super(),this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onWillDispose=this._register(new be),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new K2e(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new be),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new be),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new be),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new be),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new be),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeContentOrInjectedText=this._register(new be),this.onDidChangeContentOrInjectedText=this._onDidChangeContentOrInjectedText.event,this._eventEmitter=this._register(new G2e),this._backgroundTokenizationState=0,this._onBackgroundTokenizationStateChanged=this._register(new be),this.onBackgroundTokenizationStateChanged=this._onBackgroundTokenizationStateChanged.event,this._register(this._eventEmitter.fastEvent(p=>{this._onDidChangeContentOrInjectedText.fire(p.rawContentChangedEvent)})),FR++,this.id="$model"+FR,this.isForSimpleWidget=t.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=sn.parse("inmemory://model/"+FR):this._associatedResource=r,this._attachedEditorCount=0;const{textBuffer:u,disposable:d}=JJ(e,t.defaultEOL);this._buffer=u,this._bufferDisposable=d,this._options=wf.resolveOptions(this._buffer,t);const h=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new Q(1,1,h,this._buffer.getLineLength(h)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=f>wf.LARGE_FILE_SIZE_THRESHOLD||h>wf.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=f>wf.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageId=n||S0,this._languageRegistryListener=this._languageConfigurationService.onDidChange(p=>{p.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=mue(FR),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new eee,this._commandManager=new HG(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new Uu(this._modeService.languageIdCodec),this._tokens2=new ZG(this._modeService.languageIdCodec),this._tokenization=new aNe(this,this._modeService.languageIdCodec),this._bracketPairColorizer=this._register(new e2e(this,this._languageConfigurationService)),this._decorationProvider=this._register(new P2e(this)),this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))}static resolveOptions(e,t){if(t.detectIndentation){const n=CJ(e,t.tabSize,t.insertSpaces);return new t4({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new t4({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}get bracketPairs(){return this._bracketPairColorizer}get backgroundTokenizationState(){return this._backgroundTokenizationState}handleTokenizationProgress(e){if(this._backgroundTokenizationState===2)return;const t=e?2:1;this._backgroundTokenizationState!==t&&(this._backgroundTokenizationState=t,this._onBackgroundTokenizationStateChanged.fire())}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new my([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._bracketPairColorizer.handleContentChanged(t),!this._isDisposing&&this._eventEmitter.fire(new t3(e,t))}setValue(e){if(this._assertNotDisposed(),e===null)return;const{textBuffer:t,disposable:n}=JJ(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,r,o,s,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:o,isRedoing:s,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new eee,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new tb([new tNe],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,o,s),0,r,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),r=this.getValueLengthInRange(n),o=this.getLineCount(),s=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new tb([new rNe],this._versionId,!1,!1),this._createContentChanged2(new Q(1,1,o,s),0,r,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,r=t.length;n<r;n++){const o=t[n],s=o.range,a=o.cachedAbsoluteStart-o.start,u=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),d=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);o.cachedAbsoluteStart=u,o.cachedAbsoluteEnd=d,o.cachedVersionId=e,o.start=u-a,o.end=d-a,y0(o)}}onBeforeAttached(){this._attachedEditorCount++,this._attachedEditorCount===1&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,this._attachedEditorCount===0&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let r=1;r<=n;r++){const o=this._buffer.getLineLength(r);o>=H2e?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.indentSize,r=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,s=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new t4({tabSize:t,indentSize:n,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:s});if(this._options.equals(a))return;let u=this._options.createChangeEvent(a);this._options=a,this._onDidChangeOptions.fire(u)}detectIndentation(e,t){this._assertNotDisposed();let n=CJ(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let r=0;for(let s=0;s<e.length;s++)e.charAt(s)==="	"?r+=t:r++;let o="";if(!n){let s=Math.floor(r/t);r=r%t;for(let a=0;a<s;a++)o+="	"}for(let s=0;s<r;s++)o+=" ";return o}static normalizeIndentation(e,t,n){let r=ka(e);return r===-1&&(r=e.length),wf._normalizeIndentationFromWhitespace(e.substring(0,r),t,n)+e.substring(r)}normalizeIndentation(e){return this._assertNotDisposed(),wf.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(gue.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueInRange(n,e);return t?this._buffer.getBOM()+r:r}createSnapshot(e=!1){return new $2e(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),r=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+r:r}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,r=e.startColumn;let o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),s=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(o<1)o=1,s=1;else if(o>t)o=t,s=this.getLineMaxColumn(o);else if(s<=1)s=1;else{const f=this.getLineMaxColumn(o);s>=f&&(s=f)}const a=e.endLineNumber,u=e.endColumn;let d=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof u=="number"&&!isNaN(u)?u:1);if(d<1)d=1,h=1;else if(d>t)d=t,h=this.getLineMaxColumn(d);else if(h<=1)h=1;else{const f=this.getLineMaxColumn(d);h>=f&&(h=f)}return n===o&&r===s&&a===d&&u===h&&e instanceof Q&&!(e instanceof yt)?e:new Q(o,s,d,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const r=this._buffer.getLineCount();if(e>r)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(n===1){const s=this._buffer.getLineCharCode(e,t-2);if(Vo(s))return!1}return!0}_validatePosition(e,t,n){const r=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=this._buffer.getLineCount();if(r<1)return new Le(1,1);if(r>s)return new Le(s,this.getLineMaxColumn(s));if(o<=1)return new Le(r,1);const a=this.getLineMaxColumn(r);if(o>=a)return new Le(r,a);if(n===1){const u=this._buffer.getLineCharCode(r,o-2);if(Vo(u))return new Le(r,o-1)}return new Le(r,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof Le&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn;if(!this._isValidPosition(n,r,0)||!this._isValidPosition(o,s,0))return!1;if(t===1){const a=r>1?this._buffer.getLineCharCode(n,r-2):0,u=s>1&&s<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,s-2):0,d=Vo(a),h=Vo(u);return!d&&!h}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof Q&&!(e instanceof yt)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),r=this._validatePosition(e.endLineNumber,e.endColumn,0),o=n.lineNumber,s=n.column,a=r.lineNumber,u=r.column;{const d=s>1?this._buffer.getLineCharCode(o,s-2):0,h=u>1&&u<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,u-2):0,f=Vo(d),p=Vo(h);return!f&&!p?new Q(o,s,a,u):o===a&&s===u?new Q(o,s-1,a,u-1):f&&p?new Q(o,s-1,a,u+1):f?new Q(o,s-1,a,u):new Q(o,s,a,u+1)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new Q(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,r){return this._buffer.findMatchesLineByLine(e,t,n,r)}findMatches(e,t,n,r,o,s,a=V2e){this._assertNotDisposed();let u=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(f=>Q.isIRange(f))&&(u=t.map(f=>this.validateRange(f)))),u===null&&(u=[this.getFullModelRange()]),u=u.sort((f,p)=>f.startLineNumber-p.startLineNumber||f.startColumn-p.startColumn);const d=[];d.push(u.reduce((f,p)=>Q.areIntersecting(f,p)?f.plusRange(p):(d.push(f),p)));let h;if(!n&&e.indexOf(`
`)<0){const p=new h1(e,n,r,o).parseSearchRequest();if(!p)return[];h=m=>this.findMatchesLineByLine(m,p,s,a)}else h=f=>TR.findMatches(this,new h1(e,n,r,o),f,s,a);return d.map(h).reduce((f,p)=>f.concat(p),[])}findNextMatch(e,t,n,r,o,s){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const d=new h1(e,n,r,o).parseSearchRequest();if(!d)return null;const h=this.getLineCount();let f=new Q(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),p=this.findMatchesLineByLine(f,d,s,1);return TR.findNextMatch(this,new h1(e,n,r,o),a,s),p.length>0||(f=new Q(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),p=this.findMatchesLineByLine(f,d,s,1),p.length>0)?p[0]:null}return TR.findNextMatch(this,new h1(e,n,r,o),a,s)}findPreviousMatch(e,t,n,r,o,s){this._assertNotDisposed();const a=this.validatePosition(t);return TR.findPreviousMatch(this,new h1(e,n,r,o),a,s)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof A9?e:new A9(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let r=t.map(s=>({range:this.validateRange(s.range),text:s.text})),o=!0;if(e)for(let s=0,a=e.length;s<a;s++){let u=e[s],d=!1;for(let h=0,f=r.length;h<f;h++){let p=r[h].range,m=p.startLineNumber>u.endLineNumber,v=u.startLineNumber>p.endLineNumber;if(!m&&!v){d=!0;break}}if(!d){o=!1;break}}if(o)for(let s=0,a=this._trimAutoWhitespaceLines.length;s<a;s++){let u=this._trimAutoWhitespaceLines[s],d=this.getLineMaxColumn(u),h=!0;for(let f=0,p=r.length;f<p;f++){let m=r[f].range,v=r[f].text;if(!(u<m.startLineNumber||u>m.endLineNumber)&&!(u===m.startLineNumber&&m.startColumn===d&&m.isEmpty()&&v&&v.length>0&&v.charAt(0)===`
`)&&!(u===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&v&&v.length>0&&v.charAt(v.length-1)===`
`)){h=!1;break}}if(h){const f=new Q(u,1,u,d);t.push(new A9(null,f,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,r){const o=e.map(s=>{const a=this.getPositionAt(s.newPosition),u=this.getPositionAt(s.newEnd);return{range:new Q(a.lineNumber,a.column,u.lineNumber,u.column),text:s.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,n,r)}_applyRedo(e,t,n,r){const o=e.map(s=>{const a=this.getPositionAt(s.oldPosition),u=this.getPositionAt(s.oldEnd);return{range:new Q(a.lineNumber,a.column,u.lineNumber,u.column),text:s.newText}});this._applyUndoRedoEdits(o,t,!1,!0,n,r)}_applyUndoRedoEdits(e,t,n,r,o,s){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=r,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(s),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),r=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),s=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,s.length!==0){for(let d=0,h=s.length;d<h;d++){const f=s[d],[p,m,v]=Nb(f.text);this._tokens.acceptEdit(f.range,p,m),this._tokens2.acceptEdit(f.range,p,m,v,f.text.length>0?f.text.charCodeAt(0):0),this._decorationsTree.acceptReplace(f.rangeOffset,f.rangeLength,f.text.length,f.forceMoveMarkers)}let a=[];this._increaseVersionId();let u=n;for(let d=0,h=s.length;d<h;d++){const f=s[d],[p]=Nb(f.text);this._onDidChangeDecorations.fire();const m=f.range.startLineNumber,v=f.range.endLineNumber,b=v-m,L=p,S=Math.min(b,L),y=L-b,E=o-u-y+m,A=E,N=E+L,V=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Le(A,1)),this.getOffsetAt(new Le(N,this.getLineMaxColumn(N))),0),R=nf.fromDecorations(V),M=new ly(R);for(let K=S;K>=0;K--){const X=m+K,$=E+K;M.takeFromEndWhile(T=>T.lineNumber>$);const D=M.takeFromEndWhile(T=>T.lineNumber===$);a.push(new HJ(X,this.getLineContent($),D))}if(S<b){const K=m+S;a.push(new nNe(K+1,v))}if(S<L){const K=new ly(R),X=m+S,$=L-S,D=o-u-$+X+1;let T=[],F=[];for(let B=0;B<$;B++){let U=D+B;F[B]=this.getLineContent(U),K.takeWhile(G=>G.lineNumber<U),T[B]=K.takeWhile(G=>G.lineNumber===U)}a.push(new iNe(X+1,m+L,F,T))}u+=y}this._emitContentChangedEvent(new tb(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:s,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=[...e].map(r=>new HJ(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeContentOrInjectedText.fire(new Vce(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(o,s)=>this._deltaDecorationsImpl(e,[],[{range:o,options:s}])[0],changeDecoration:(o,s)=>{this._changeDecorationImpl(o,s)},changeDecorationOptions:(o,s)=>{this._changeDecorationOptionsImpl(o,nee(s))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,s)=>o.length===0&&s.length===0?[]:this._deltaDecorationsImpl(e,o,s)},r=null;try{r=t(n)}catch(o){gn(o)}return n.addDecoration=IN,n.changeDecoration=IN,n.changeDecorationOptions=IN,n.removeDecoration=IN,n.deltaDecorations=IN,r}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const r=e?this._decorations[e]:null;if(!r)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:tee[n]}])[0]:null;if(!t)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;const o=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),s,a,o),r.setOptions(tee[n]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,r=t.length;n<r;n++){const o=t[n];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,r=!1){let o=this.getLineCount(),s=Math.min(o,Math.max(1,e)),a=Math.min(o,Math.max(1,t)),u=this.getLineMaxColumn(a);const d=new Q(s,1,a,u),h=this._getDecorationsInRange(d,n,r);return h.push(...this._decorationProvider.getDecorationsInRange(d,n,r)),h}getDecorationsInRange(e,t=0,n=!1){let r=this.validateRange(e);const o=this._getDecorationsInRange(r,t,n);return o.push(...this._decorationProvider.getDecorationsInRange(r,t,n)),o}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),r=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return nf.fromDecorations(r).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}_getDecorationsInRange(e,t,n){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,n)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),s=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,s,r),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const r=!!(n.options.overviewRuler&&n.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber)}if(n.options.before||t.before){const s=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}r!==o?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const r=this.getVersionId(),o=t.length;let s=0;const a=n.length;let u=0,d=new Array(a);for(;s<o||u<a;){let h=null;if(s<o){do h=this._decorations[t[s++]];while(!h&&s<o);if(h){if(h.options.after){const f=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber)}if(h.options.before){const f=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber)}this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<a){if(!h){const L=++this._lastDecorationId,S=`${this._instanceId};${L}`;h=new kce(S,0,0),this._decorations[S]=h}const f=n[u],p=this._validateRangeRelaxedNoAllocations(f.range),m=nee(f.options),v=this._buffer.getOffsetAt(p.startLineNumber,p.startColumn),b=this._buffer.getOffsetAt(p.endLineNumber,p.endColumn);h.ownerId=e,h.reset(r,v,b,p),h.setOptions(m),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(p.startLineNumber),this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(h),d[u]=h.id,u++}else h&&delete this._decorations[h.id]}return d}setTokens(e,t=!1){if(e.length!==0){let n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];let a=0,u=0,d=!1;for(let h=0,f=s.tokens.length;h<f;h++){const p=s.startLineNumber+h;d?(this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),s.tokens[h],!1),u=p):this._tokens.setTokens(this._languageId,p-1,this._buffer.getLineLength(p),s.tokens[h],!0)&&(d=!0,a=p,u=p)}d&&n.push({fromLineNumber:a,toLineNumber:u})}n.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:n})}this.handleTokenizationProgress(t)}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageId,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageId(){return this._languageId}setMode(e){if(this._languageId===e)return;let t={oldLanguage:this._languageId,newLanguage:e};this._languageId=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new Le(e,t)),r=this.getLineTokens(n.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(n.column-1))}getTokenTypeIfInsertingCharacter(e,t,n){const r=this.validatePosition(new Le(e,t));return this._tokenization.getTokenTypeIfInsertingCharacter(r,n)}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),r=this._getLineTokens(t.lineNumber),o=r.findTokenIndexAtOffset(t.column-1),[s,a]=wf._findLanguageBoundaries(r,o),u=WF(t.column,this.getLanguageConfiguration(r.getLanguageId(o)).getWordDefinition(),n.substring(s,a),s);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u;if(o>0&&s===t.column-1){const[d,h]=wf._findLanguageBoundaries(r,o-1),f=WF(t.column,this.getLanguageConfiguration(r.getLanguageId(o-1)).getWordDefinition(),n.substring(d,h),d);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn)return f}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let r=0;for(let s=t;s>=0&&e.getLanguageId(s)===n;s--)r=e.getStartOffset(s);let o=e.getLineContent().length;for(let s=t,a=e.getCount();s<a&&e.getLanguageId(s)===n;s++)o=e.getEndOffset(s);return[r,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}static computeIndentLevel(e,t){let n=0,r=0,o=e.length;for(;r<o;){let s=e.charCodeAt(r);if(s===32)n++;else if(s===9)n=n-n%t+t;else break;r++}return r===o?-1:n}_computeIndentLevel(e){return wf.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const r=this.getLineCount();if(e<1||e>r)throw new Error("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this._languageId).foldingRules,s=!!(o&&o.offSide);let a=-2,u=-1,d=-2,h=-1;const f=R=>{if(a!==-1&&(a===-2||a>R-1)){a=-1,u=-1;for(let M=R-2;M>=0;M--){let K=this._computeIndentLevel(M);if(K>=0){a=M,u=K;break}}}if(d===-2){d=-1,h=-1;for(let M=R;M<r;M++){let K=this._computeIndentLevel(M);if(K>=0){d=M,h=K;break}}}};let p=-2,m=-1,v=-2,b=-1;const L=R=>{if(p===-2){p=-1,m=-1;for(let M=R-2;M>=0;M--){let K=this._computeIndentLevel(M);if(K>=0){p=M,m=K;break}}}if(v!==-1&&(v===-2||v<R-1)){v=-1,b=-1;for(let M=R;M<r;M++){let K=this._computeIndentLevel(M);if(K>=0){v=M,b=K;break}}}};let S=0,y=!0,E=0,A=!0,N=0,V=0;for(let R=0;y||A;R++){const M=e-R,K=e+R;R>1&&(M<1||M<t)&&(y=!1),R>1&&(K>r||K>n)&&(A=!1),R>5e4&&(y=!1,A=!1);let X=-1;if(y){const D=this._computeIndentLevel(M-1);D>=0?(d=M-1,h=D,X=Math.ceil(D/this._options.indentSize)):(f(M),X=this._getIndentLevelForWhitespaceLine(s,u,h))}let $=-1;if(A){const D=this._computeIndentLevel(K-1);D>=0?(p=K-1,m=D,$=Math.ceil(D/this._options.indentSize)):(L(K),$=this._getIndentLevelForWhitespaceLine(s,m,b))}if(R===0){V=X;continue}if(R===1){if(K<=r&&$>=0&&V+1===$){y=!1,S=K,E=K,N=$;continue}if(M>=1&&X>=0&&X-1===V){A=!1,S=M,E=M,N=X;continue}if(S=e,E=e,N=V,N===0)return{startLineNumber:S,endLineNumber:E,indent:N}}y&&(X>=N?S=M:y=!1),A&&($>=N?E=K:A=!1)}return{startLineNumber:S,endLineNumber:E,indent:N}}getLinesBracketGuides(e,t,n,r){var o,s,a,u,d;const h=[],f=this._bracketPairColorizer.getBracketPairsInRangeWithMinIndentation(new Q(e,1,t,this.getLineMaxColumn(t)));let p;if(n&&f.length>0){const S=e<=n.lineNumber&&n.lineNumber<=t?f.filter(y=>Q.strictContainsPosition(y.range,n)):this._bracketPairColorizer.getBracketPairsInRange(Q.fromPositions(n));p=(o=Cxe(S,y=>y.range.startLineNumber!==y.range.endLineNumber))===null||o===void 0?void 0:o.range}const m=new ly(f),v=new Array,b=new Array,L=new ade;for(let S=e;S<=t;S++){let y=new Array;b.length>0&&(y=y.concat(b),b.length=0),h.push(y);for(const A of m.takeWhile(N=>N.openingBracketRange.startLineNumber<=S)||[]){if(A.range.startLineNumber===A.range.endLineNumber)continue;const N=Math.min(this.getVisibleColumnFromPosition(A.openingBracketRange.getStartPosition()),this.getVisibleColumnFromPosition((a=(s=A.closingBracketRange)===null||s===void 0?void 0:s.getStartPosition())!==null&&a!==void 0?a:A.range.getEndPosition()),A.minVisibleColumnIndentation+1);let V=!1;A.closingBracketRange&&ka(this.getLineContent(A.closingBracketRange.startLineNumber))<A.closingBracketRange.startColumn-1&&(V=!0);const R=A.openingBracketRange.getStartPosition(),M=(d=(u=A.closingBracketRange)===null||u===void 0?void 0:u.getStartPosition())!==null&&d!==void 0?d:A.range.getEndPosition();A.closingBracketRange===void 0?v[A.nestingLevel]=null:v[A.nestingLevel]={nestingLevel:A.nestingLevel,guideVisibleColumn:N,start:R,visibleStartColumn:this.getVisibleColumnFromPosition(R),end:M,visibleEndColumn:this.getVisibleColumnFromPosition(M),bracketPair:A,renderHorizontalEndLineAtTheBottom:V}}for(const A of v){if(!A)continue;const N=p&&A.bracketPair.range.equalsRange(p),V=L.getInlineClassNameOfLevel(A.nestingLevel)+(r.highlightActive&&N?" "+L.activeClassName:"");(N&&r.horizontalGuides!==J1.Disabled||r.includeInactive&&r.horizontalGuides===J1.Enabled)&&(A.start.lineNumber===S&&A.guideVisibleColumn<A.visibleStartColumn&&y.push(new Ow(A.guideVisibleColumn,V,new RH(!1,A.start.column))),A.end.lineNumber===S+1&&A.guideVisibleColumn<A.visibleEndColumn&&b.push(new Ow(A.guideVisibleColumn,V,new RH(!A.renderHorizontalEndLineAtTheBottom,A.end.column))))}let E=Number.MAX_SAFE_INTEGER;for(let A=v.length-1;A>=0;A--){const N=v[A];if(!N)continue;const V=r.highlightActive&&p&&N.bracketPair.range.equalsRange(p),R=L.getInlineClassNameOfLevel(N.nestingLevel)+(V?" "+L.activeClassName:"");(V||r.includeInactive)&&N.renderHorizontalEndLineAtTheBottom&&N.end.lineNumber===S+1&&b.push(new Ow(N.guideVisibleColumn,R,null)),!(N.end.lineNumber<=S||N.start.lineNumber>=S)&&(N.guideVisibleColumn>=E&&!V||(E=N.guideVisibleColumn,(V||r.includeInactive)&&y.push(new Ow(N.guideVisibleColumn,R,null))))}y.sort((A,N)=>A.visibleColumn-N.visibleColumn)}return h}getVisibleColumnFromPosition(e){return ur.visibleColumnFromColumn(this.getLineContent(e.lineNumber),e.column,this._options.tabSize)+1}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const r=this.getLanguageConfiguration(this._languageId).foldingRules,o=!!(r&&r.offSide);let s=new Array(t-e+1),a=-2,u=-1,d=-2,h=-1;for(let f=e;f<=t;f++){let p=f-e;const m=this._computeIndentLevel(f-1);if(m>=0){a=f-1,u=m,s[p]=Math.ceil(m/this._options.indentSize);continue}if(a===-2){a=-1,u=-1;for(let v=f-2;v>=0;v--){let b=this._computeIndentLevel(v);if(b>=0){a=v,u=b;break}}}if(d!==-1&&(d===-2||d<f-1)){d=-1,h=-1;for(let v=f;v<n;v++){let b=this._computeIndentLevel(v);if(b>=0){d=v,h=b;break}}}s[p]=this._getIndentLevelForWhitespaceLine(o,u,h)}return s}_getIndentLevelForWhitespaceLine(e,t,n){return t===-1||n===-1?0:t<n?1+Math.floor(t/this._options.indentSize):t===n?Math.ceil(n/this._options.indentSize):e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return z2e(this.getLineContent(e))+1}};Ll.MODEL_SYNC_LIMIT=50*1024*1024;Ll.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;Ll.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;Ll.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Qs.tabSize,indentSize:Qs.indentSize,insertSpaces:Qs.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Qs.trimAutoWhitespace,largeFileOptimizations:Qs.largeFileOptimizations,bracketPairColorizationOptions:Qs.bracketPairColorizationOptions};Ll=F2e([K9(4,gM),K9(5,Fs),K9(6,fM)],Ll);function z2e(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}class ade{constructor(){this.activeClassName="indent-active"}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}function G9(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function q9(i){return!!i.options.after||!!i.options.before}class eee{constructor(){this._decorationsTree0=new O9,this._decorationsTree1=new O9,this._injectedTextDecorationsTree=new O9}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,r,o){const s=e.getVersionId(),a=this._intervalSearch(t,n,r,o,s);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,r,o){const s=this._decorationsTree0.intervalSearch(e,t,n,r,o),a=this._decorationsTree1.intervalSearch(e,t,n,r,o),u=this._injectedTextDecorationsTree.intervalSearch(e,t,n,r,o);return s.concat(a).concat(u)}getInjectedTextInInterval(e,t,n,r){const o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,r,!1,o);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),r=this._injectedTextDecorationsTree.search(t,!1,n);return this._ensureNodesHaveRanges(e,r).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,r){const o=e.getVersionId(),s=this._search(t,n,r,o);return this._ensureNodesHaveRanges(e,s)}_search(e,t,n,r){if(n)return this._decorationsTree1.search(e,t,r);{const o=this._decorationsTree0.search(e,t,r),s=this._decorationsTree1.search(e,t,r),a=this._injectedTextDecorationsTree.search(e,t,r);return o.concat(s).concat(a)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),r=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(r)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){q9(e)?this._injectedTextDecorationsTree.insert(e):G9(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){q9(e)?this._injectedTextDecorationsTree.delete(e):G9(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){q9(e)?this._injectedTextDecorationsTree.resolveNode(e,t):G9(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,r){this._decorationsTree0.acceptReplace(e,t,n,r),this._decorationsTree1.acceptReplace(e,t,n,r),this._injectedTextDecorationsTree.acceptReplace(e,t,n,r)}}function _v(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class lde{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class U2e extends lde{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Sl.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class j2e extends lde{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?ye.fromHex(e):t.getColor(e.id)}}class RA{constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1}static from(e){return e instanceof RA?e:new RA(e)}}class Sn{constructor(e){var t;this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?_v(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new U2e(e.overviewRuler):null,this.minimap=e.minimap?new j2e(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?_v(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?_v(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?_v(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?_v(e.marginClassName):null,this.inlineClassName=e.inlineClassName?_v(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?_v(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?_v(e.afterContentClassName):null,this.after=e.after?RA.from(e.after):null,this.before=e.before?RA.from(e.before):null,this.hideInCommentTokens=(t=e.hideInCommentTokens)!==null&&t!==void 0?t:!1}static register(e){return new Sn(e)}static createDynamic(e){return new Sn(e)}}Sn.EMPTY=Sn.register({description:"empty"});const tee=[Sn.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Sn.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Sn.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Sn.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function nee(i){return i instanceof Sn?i:Sn.createDynamic(i)}class K2e extends Oe{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new be),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;if(this._deferredCnt--,this._deferredCnt===0){if(this._shouldFire){this.handleBeforeFire(this._affectedInjectedTextLines);const t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(t)}(e=this._affectedInjectedTextLines)===null||e===void 0||e.clear(),this._affectedInjectedTextLines=null}}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!!(e.minimap&&e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(e.overviewRuler&&e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class G2e extends Oe{constructor(){super(),this._fastEmitter=this._register(new be),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new be),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}const q2e=()=>!0,iee=()=>!1,Y2e=i=>i===" "||i==="	";class Vc{constructor(e,t,n){this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=n.options,o=r.get(130);this.readOnly=r.get(80),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(103),this.lineHeight=r.get(58),this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(115),this.wordSeparators=r.get(116),this.emptySelectionClipboard=r.get(32),this.copyWithSyntaxHighlighting=r.get(21),this.multiCursorMergeOverlapping=r.get(68),this.multiCursorPaste=r.get(70),this.autoClosingBrackets=r.get(5),this.autoClosingQuotes=r.get(8),this.autoClosingDelete=r.get(6),this.autoClosingOvertype=r.get(7),this.autoSurround=r.get(11),this.autoIndent=r.get(9),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:Vc._getShouldAutoClose(e,this.autoClosingQuotes),bracket:Vc._getShouldAutoClose(e,this.autoClosingBrackets)},this.autoClosingPairs=vi.getAutoClosingPairs(e);let s=Vc._getSurroundingPairs(e);if(s)for(const a of s)this.surroundingPairs[a.open]=a.close}static shouldRecreate(e){return e.hasChanged(130)||e.hasChanged(116)||e.hasChanged(32)||e.hasChanged(68)||e.hasChanged(70)||e.hasChanged(5)||e.hasChanged(8)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(115)||e.hasChanged(58)||e.hasChanged(80)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=Vc._getElectricCharacters(this._languageId);if(e)for(const t of e)this._electricChars[t]=!0}return this._electricChars}normalizeIndentation(e){return Ll.normalizeIndentation(e,this.indentSize,this.insertSpaces)}static _getElectricCharacters(e){try{return vi.getElectricCharacters(e)}catch(t){return gn(t),null}}static _getShouldAutoClose(e,t){switch(t){case"beforeWhitespace":return Y2e;case"languageDefined":return Vc._getLanguageDefinedShouldAutoClose(e);case"always":return q2e;case"never":return iee}}static _getLanguageDefinedShouldAutoClose(e){try{const t=vi.getAutoCloseBeforeSet(e);return n=>t.indexOf(n)!==-1}catch(t){return gn(t),iee}}static _getSurroundingPairs(e){try{return vi.getSurroundingPairs(e)}catch(t){return gn(t),null}}}class ss{constructor(e,t,n,r){this._singleCursorStateBrand=void 0,this.selectionStart=e,this.selectionStartLeftoverVisibleColumns=t,this.position=n,this.leftoverVisibleColumns=r,this.selection=ss._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,r){return e?new ss(this.selectionStart,this.selectionStartLeftoverVisibleColumns,new Le(t,n),r):new ss(new Q(t,n,t,n),r,new Le(t,n),r)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?yt.fromPositions(e.getStartPosition(),t):yt.fromPositions(e.getEndPosition(),t)}}class ree{constructor(e,t,n,r){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=r}}class Z2e{constructor(e){this.modelState=e,this.viewState=null}}class X2e{constructor(e){this.modelState=null,this.viewState=e}}let Bn=class ude{constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}static fromModelState(e){return new Z2e(e)}static fromViewState(e){return new X2e(e)}static fromModelSelection(e){const t=yt.liftSelection(e),n=new ss(Q.fromPositions(t.getSelectionStart()),0,t.getPosition(),0);return ude.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=this.fromModelSelection(e[n]);return t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class ll{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function gw(i){return i==="'"||i==='"'||i==="`"}class PA{static whitespaceVisibleColumn(e,t,n){const r=e.length;let o=0,s=-1,a=-1;for(let u=0;u<r;u++){if(u===t)return[s,a,o];switch(o%n===0&&(s=u,a=o),e.charCodeAt(u)){case 32:o+=1;break;case 9:o=ur.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===r?[s,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,r){const o=e.length,[s,a,u]=PA.whitespaceVisibleColumn(e,t,n);if(u===-1)return-1;let d;switch(r){case 0:d=!0;break;case 1:d=!1;break;case 2:if(u%n===0)return t;d=u%n<=n/2;break}if(d){if(s===-1)return-1;let p=a;for(let m=s;m<o;++m){if(p===a+n)return s;switch(e.charCodeAt(m)){case 32:p+=1;break;case 9:p=ur.nextRenderTabStop(p,n);break;default:return-1}}return p===a+n?s:-1}const h=ur.nextRenderTabStop(u,n);let f=u;for(let p=t;p<o;p++){if(f===h)return p;switch(e.charCodeAt(p)){case 32:f+=1;break;case 9:f=ur.nextRenderTabStop(f,n);break;default:return-1}}return f===h?o:-1}}class Lv{constructor(e=null){this.hitTarget=e,this.type=0}}class HH{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var y1;(function(i){function e(t,n,r){const o=t.getPositionFromDOMInfo(n,r);return o?new HH(o,n,null):new Lv(n)}i.createFromDOMInfo=e})(y1||(y1={}));class Q2e{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Dh{constructor(e,t,n=0,r=null,o=null,s=null){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,!o&&r&&(o=new Q(r.lineNumber,r.column,r.lineNumber,r.column)),this.range=o,this.detail=s}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+e.detail}toString(){return Dh.toString(this)}}class Ic{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===6}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===7}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===7}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===5}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===8}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}}class Yy{constructor(e,t,n){this.model=e.model;const r=e.configuration.options;this.layoutInfo=r.get(130),this.viewDomNode=t.viewDomNode,this.lineHeight=r.get(58),this.stickyTabStops=r.get(103),this.typicalHalfwidthCharacterWidth=r.get(43).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Yy.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const r=n.verticalOffset+n.height/2,o=e.model.getLineCount();let s=null,a,u=null;return n.afterLineNumber!==o&&(u=new Le(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(s=new Le(n.afterLineNumber,e.model.getLineMaxColumn(n.afterLineNumber))),u===null?a=s:s===null?a=u:t<r?a=s:a=u,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:s,positionAfter:u,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const r=this._context.model.getLineCount(),o=this._context.model.getLineMaxColumn(r);return{range:new Q(r,o,r,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.model.getLineMaxColumn(t);return{range:new Q(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Yy._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==document.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class J2e{constructor(e,t,n){this.editorPos=t,this.pos=n,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+n.y-t.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+n.x-t.x-e.layoutInfo.contentLeft,this.isInMarginArea=n.x-t.x<e.layoutInfo.contentLeft&&n.x-t.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Ws._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class rq extends J2e{constructor(e,t,n,r){super(e,t,n),this._ctx=e,r?(this.target=r,this.targetPath=lg.collect(r,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}fulfill(e,t=null,n=null,r=null){let o=this.mouseColumn;return t&&t.column<this._ctx.model.getLineMaxColumn(t.lineNumber)&&(o=ur.visibleColumnFromColumn(this._ctx.model.getLineContent(t.lineNumber),t.column,this._ctx.model.getTextModelOptions().tabSize)+1),new Dh(this.target,e,o,t,n,r)}withTarget(e){return new rq(this._ctx,this.editorPos,this.pos,e)}}const oee={isAfterLines:!0};function Y9(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Ws{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=lg.collect(t,this._viewHelper.viewDomNode);return!!(Ic.isChildOfContentWidgets(n)||Ic.isChildOfOverflowingContentWidgets(n)||Ic.isChildOfOverlayWidgets(n))}createMouseTarget(e,t,n,r){const o=new Yy(this._context,this._viewHelper,e),s=new rq(o,t,n,r);try{return Ws._createMouseTarget(o,s,!1)}catch{return s.fulfill(0)}}static _createMouseTarget(e,t,n){if(t.target===null){if(n)return t.fulfill(0);const s=Ws._doHitTest(e,t);return s.type===1?Ws.createMouseTargetFromHitTestPosition(e,t,s.spanNode,s.position,s.injectedText):this._createMouseTarget(e,t.withTarget(s.hitTarget),!0)}const r=t;let o=null;return o=o||Ws._hitTestContentWidget(e,r),o=o||Ws._hitTestOverlayWidget(e,r),o=o||Ws._hitTestMinimap(e,r),o=o||Ws._hitTestScrollbarSlider(e,r),o=o||Ws._hitTestViewZone(e,r),o=o||Ws._hitTestMargin(e,r),o=o||Ws._hitTestViewCursor(e,r),o=o||Ws._hitTestTextArea(e,r),o=o||Ws._hitTestViewLines(e,r,n),o=o||Ws._hitTestScrollbar(e,r),o||t.fulfill(0)}static _hitTestContentWidget(e,t){if(Ic.isChildOfContentWidgets(t.targetPath)||Ic.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(9,null,null,n):t.fulfill(0)}return null}static _hitTestOverlayWidget(e,t){if(Ic.isChildOfOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfill(12,null,null,n):t.fulfill(0)}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const r of n)if(t.target===r.domNode)return t.fulfill(6,r.position,null,{mightBeForeignElement:!1})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,r=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const s of n){if(r<s.contentLeft||r>s.contentLeft+s.width)continue;const a=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(a<=o&&o<=a+s.height)return t.fulfill(6,s.position,null,{mightBeForeignElement:!1})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const r=t.isInContentArea?8:5;return t.fulfill(r,n.position,null,n)}return null}static _hitTestTextArea(e,t){return Ic.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfill(6,e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1}):t.fulfill(1,e.lastRenderData.lastTextareaPosition):null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),r=n.range.getStartPosition();let o=Math.abs(t.pos.x-t.editorPos.x);const s={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};return o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth?t.fulfill(2,r,n.range,s):(o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfill(3,r,n.range,s):(o-=e.layoutInfo.lineNumbersWidth,t.fulfill(4,r,n.range,s)))}return null}static _hitTestViewLines(e,t,n){if(!Ic.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfill(7,new Le(1,1),null,oee);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const o=e.model.getLineCount(),s=e.model.getLineMaxColumn(o);return t.fulfill(7,new Le(o,s),null,oee)}if(n){if(Ic.isStrictChildOfViewLines(t.targetPath)){const o=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.model.getLineLength(o)===0){const a=e.getLineWidth(o),u=Y9(t.mouseContentHorizontalOffset-a);return t.fulfill(7,new Le(o,1),null,u)}const s=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>=s){const a=Y9(t.mouseContentHorizontalOffset-s),u=new Le(o,e.model.getLineMaxColumn(o));return t.fulfill(7,u,null,a)}}return t.fulfill(0)}const r=Ws._doHitTest(e,t);return r.type===1?Ws.createMouseTargetFromHitTestPosition(e,t,r.spanNode,r.position,r.injectedText):this._createMouseTarget(e,t.withTarget(r.hitTarget),!0)}static _hitTestMinimap(e,t){if(Ic.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new Le(n,r))}return null}static _hitTestScrollbarSlider(e,t){if(Ic.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const r=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.model.getLineMaxColumn(r);return t.fulfill(11,new Le(r,o))}}return null}static _hitTestScrollbar(e,t){if(Ic.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.model.getLineMaxColumn(n);return t.fulfill(11,new Le(n,r))}return null}getMouseColumn(e,t){const n=this._context.configuration.options,r=n.get(130),o=this._context.viewLayout.getCurrentScrollLeft()+t.x-e.x-r.contentLeft;return Ws._getMouseColumn(o,n.get(43).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,r,o){const s=r.lineNumber,a=r.column,u=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>u){const L=Y9(t.mouseContentHorizontalOffset-u);return t.fulfill(7,r,null,L)}const d=e.visibleRangeForPosition(s,a);if(!d)return t.fulfill(0,r);const h=d.left;if(t.mouseContentHorizontalOffset===h)return t.fulfill(6,r,null,{mightBeForeignElement:!!o});const f=[];if(f.push({offset:d.left,column:a}),a>1){const L=e.visibleRangeForPosition(s,a-1);L&&f.push({offset:L.left,column:a-1})}const p=e.model.getLineMaxColumn(s);if(a<p){const L=e.visibleRangeForPosition(s,a+1);L&&f.push({offset:L.left,column:a+1})}f.sort((L,S)=>L.offset-S.offset);const m=t.pos.toClientCoordinates(),v=n.getBoundingClientRect(),b=v.left<=m.clientX&&m.clientX<=v.right;for(let L=1;L<f.length;L++){const S=f[L-1],y=f[L];if(S.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=y.offset){const E=new Q(s,S.column,s,y.column);return t.fulfill(6,r,E,{mightBeForeignElement:!b||!!o})}}return t.fulfill(6,r,null,{mightBeForeignElement:!b||!!o})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(n)+Math.floor(e.lineHeight/2);let s=t.pos.y+(o-t.mouseVerticalOffset);s<=t.editorPos.y&&(s=t.editorPos.y+1),s>=t.editorPos.y+e.layoutInfo.height&&(s=t.editorPos.y+e.layoutInfo.height-1);const a=new BG(t.pos.x,s),u=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());return u.type===1?u:this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=m0(e.viewDomNode);let r;if(n?typeof n.caretRangeFromPoint>"u"?r=eAe(n,t.clientX,t.clientY):r=n.caretRangeFromPoint(t.clientX,t.clientY):r=document.caretRangeFromPoint(t.clientX,t.clientY),!r||!r.startContainer)return new Lv;const o=r.startContainer;if(o.nodeType===o.TEXT_NODE){const s=o.parentNode,a=s?s.parentNode:null,u=a?a.parentNode:null;return(u&&u.nodeType===u.ELEMENT_NODE?u.className:null)===Ff.CLASS_NAME?y1.createFromDOMInfo(e,s,r.startOffset):new Lv(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const s=o.parentNode,a=s?s.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Ff.CLASS_NAME?y1.createFromDOMInfo(e,o,o.textContent.length):new Lv(o)}return new Lv}static _doHitTestWithCaretPositionFromPoint(e,t){const n=document.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const r=n.offsetNode.parentNode,o=r?r.parentNode:null,s=o?o.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===Ff.CLASS_NAME?y1.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Lv(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const r=n.offsetNode.parentNode,o=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,s=r?r.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(o===Ff.CLASS_NAME){const u=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(u)return y1.createFromDOMInfo(e,u,0)}else if(a===Ff.CLASS_NAME)return y1.createFromDOMInfo(e,n.offsetNode,0)}return new Lv(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:r}=t.getTextModelOptions(),o=PA.atomicPosition(n,e.column-1,r,2);return o!==-1?new Le(e.lineNumber,o+1):e}static _doHitTest(e,t){let n=new Lv;if(typeof document.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),n.type===1){const r=e.model.getInjectedTextAt(n.position),o=e.model.normalizePosition(n.position,2);(r||!o.equals(n.position))&&(n=new HH(o,n.spanNode,r))}return n.type===1&&e.stickyTabStops&&(n=new HH(this._snapToSoftTabBoundary(n.position,e.model),n.spanNode,n.injectedText)),n}}function eAe(i,e,t){const n=document.createRange();let r=i.elementFromPoint(e,t);if(r!==null){for(;r&&r.firstChild&&r.firstChild.nodeType!==r.firstChild.TEXT_NODE&&r.lastChild&&r.lastChild.firstChild;)r=r.lastChild;const o=r.getBoundingClientRect(),s=window.getComputedStyle(r,null).getPropertyValue("font"),a=r.innerText;let u=o.left,d=0,h;if(e>o.left+o.width)d=a.length;else{const f=W1.getInstance();for(let p=0;p<a.length+1;p++){if(h=f.getCharWidth(a.charAt(p),s)/2,u+=h,e<u){d=p;break}u+=h}}n.setStart(r.firstChild,d),n.setEnd(r.firstChild,d)}return n}class W1{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return W1._INSTANCE||(W1._INSTANCE=new W1),W1._INSTANCE}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const r=this._canvas.getContext("2d");r.font=t;const s=r.measureText(e).width;return this._cache[n]=s,s}}W1._INSTANCE=null;function s3(i){return function(e,t){let n=!1;return i&&(n=i.mouseTargetIsWidget(t)),n||t.preventDefault(),t}}class Ab extends cM{constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Ws(this._context,n),this._mouseDownOperation=this._register(new tAe(this._context,this.viewController,this.viewHelper,(s,a)=>this._createMouseTarget(s,a),s=>this._getMouseColumn(s))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(130).height;const r=new rke(this.viewHelper.viewDomNode);this._register(r.onContextMenu(this.viewHelper.viewDomNode,s=>this._onContextMenu(s,!0))),this._register(r.onMouseMoveThrottled(this.viewHelper.viewDomNode,s=>this._onMouseMove(s),s3(this.mouseTargetFactory),Ab.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onMouseUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(r.onMouseLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s))),this._register(r.onMouseDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s)));const o=s=>{if(this.viewController.emitMouseWheel(s),!this._context.configuration.options.get(67))return;const a=new Wy(s);if(qn?(s.metaKey||s.ctrlKey)&&!s.shiftKey&&!s.altKey:s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey){const d=Op.getZoomLevel(),h=a.deltaY>0?1:-1;Op.setZoomLevel(d+h),a.preventDefault(),a.stopPropagation()}};this._register(qe(this.viewHelper.viewDomNode,Ht.MOUSE_WHEEL,o,{capture:!0,passive:!1})),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(130)){const t=this._context.configuration.options.get(130).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}onScrollChanged(e){return this._mouseDownOperation.onScrollChanged(),!1}getTargetAtClientPoint(e,t){const r=new gce(e,t).toPageCoordinates(),o=pce(this.viewHelper.viewDomNode);return r.y<o.y||r.y>o.y+o.height||r.x<o.x||r.x>o.x+o.width?null:this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const r=m0(this.viewHelper.viewDomNode);r&&(n=r.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.editorPos,e.pos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e){const t=this._createMouseTarget(e,!0),n=t.type===6||t.type===7,r=t.type===2||t.type===3||t.type===4,o=t.type===3,s=this._context.configuration.options.get(97),a=t.type===8||t.type===5,u=t.type===9;let d=e.leftButton||e.middleButton;qn&&e.leftButton&&e.ctrlKey&&(d=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(n||o&&s))h(),this._mouseDownOperation.start(t.type,e);else if(r)e.preventDefault();else if(a){const f=t.detail;this.viewHelper.shouldSuppressMouseDownOnViewZone(f.viewZoneId)&&(h(),this._mouseDownOperation.start(t.type,e),e.preventDefault())}else u&&this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:t})}}Ab.MOUSE_MOVE_MINIMUM_TIME=100;class tAe extends Oe{constructor(e,t,n,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new ske(this._viewHelper.viewDomNode)),this._onScrollTimeout=this._register(new Oa),this._mouseState=new j8,this._currentSelection=new yt(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!0);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):this._dispatchMouse(t,!0))}start(e,t){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const n=this._findMousePosition(t,!0);if(!n||!n.position)return;this._mouseState.trySetCount(t.detail,n.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(80)&&r.get(31)&&!r.get(18)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&n.type===6&&n.position&&this._currentSelection.containsPosition(n.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,s3(null),o=>this._onMouseDownThenMove(o),o=>{const s=this._findMousePosition(this._lastMouseEvent,!0);o&&o instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:s?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(n,t.shiftKey),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(t.target,t.buttons,s3(null),o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._onScrollTimeout.cancel()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onScrollChanged(){this._isActive&&this._onScrollTimeout.setIfNotSet(()=>{if(!this._lastMouseEvent)return;const e=this._findMousePosition(this._lastMouseEvent,!1);e&&(this._mouseState.isDragAndDrop||this._dispatchMouse(e,!0))},10)}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.model,r=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=Math.max(r.getCurrentScrollTop()-(t.y-e.posy),0),u=Yy.getZoneAtCoord(this._context,a);if(u){const h=this._helpPositionJumpOverViewZone(u);if(h)return new Dh(null,13,o,h)}const d=r.getLineNumberAtVerticalOffset(a);return new Dh(null,13,o,new Le(d,1))}if(e.posy>t.y+t.height){const a=r.getCurrentScrollTop()+(e.posy-t.y),u=Yy.getZoneAtCoord(this._context,a);if(u){const h=this._helpPositionJumpOverViewZone(u);if(h)return new Dh(null,13,o,h)}const d=r.getLineNumberAtVerticalOffset(a);return new Dh(null,13,o,new Le(d,n.getLineMaxColumn(d)))}const s=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+(e.posy-t.y));return e.posx<t.x?new Dh(null,13,o,new Le(s,1)):e.posx>t.x+t.width?new Dh(null,13,o,new Le(s,n.getLineMaxColumn(s))):null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const r=this._createMouseTarget(e,t);if(!r.position)return null;if(r.type===8||r.type===5){const s=this._helpPositionJumpOverViewZone(r.detail);if(s)return new Dh(r.element,r.type,r.mouseColumn,s,null,r.detail)}return r}_helpPositionJumpOverViewZone(e){const t=new Le(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,r=e.positionAfter;return n&&r?n.isBefore(t)?n:r:null}_dispatchMouse(e,t){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton})}}class j8{constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>j8.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}j8.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var $c;(function(i){i.text="text/plain",i.binary="application/octet-stream",i.unknown="application/unknown",i.markdown="text/markdown",i.latex="text/latex"})($c||($c={}));let rb=[],oq=[],a3=[];function BR(i,e=!1){const t=nAe(i);rb.push(t),t.userConfigured?a3.push(t):oq.push(t),e&&!t.userConfigured&&rb.forEach(n=>{n.mime===t.mime||n.userConfigured||(t.extension&&n.extension===t.extension&&console.warn(`Overwriting extension <<${t.extension}>> to now point to mime <<${t.mime}>>`),t.filename&&n.filename===t.filename&&console.warn(`Overwriting filename <<${t.filename}>> to now point to mime <<${t.mime}>>`),t.filepattern&&n.filepattern===t.filepattern&&console.warn(`Overwriting filepattern <<${t.filepattern}>> to now point to mime <<${t.mime}>>`),t.firstline&&n.firstline===t.firstline&&console.warn(`Overwriting firstline <<${t.firstline}>> to now point to mime <<${t.mime}>>`))})}function nAe(i){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:i.userConfigured,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?Rce(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Do.sep)>=0:!1}}function iAe(i){i?(rb=rb.filter(e=>!e.userConfigured),a3=[]):(rb=[],oq=[],a3=[])}function rAe(i,e){let t;if(i)switch(i.scheme){case kn.file:t=i.fsPath;break;case kn.data:t=w0.parseMetaData(i).get(w0.META_DATA_LABEL);break;default:t=i.path}if(!t)return[$c.unknown];t=t.toLowerCase();const n=G1(t),r=see(t,n,a3);if(r)return[r,$c.text];const o=see(t,n,oq);if(o)return[o,$c.text];if(e){const s=oAe(e);if(s)return[s,$c.text]}return[$c.unknown]}function see(i,e,t){var n;let r=null,o=null,s=null;for(let a=t.length-1;a>=0;a--){const u=t[a];if(e===u.filenameLowercase){r=u;break}if(u.filepattern&&(!o||u.filepattern.length>o.filepattern.length)){const d=u.filepatternOnPath?i:e;!((n=u.filepatternLowercase)===null||n===void 0)&&n.call(u,d)&&(o=u)}u.extension&&(!s||u.extension.length>s.extension.length)&&e.endsWith(u.extensionLowercase)&&(s=u)}return r?r.mime:o?o.mime:s?s.mime:null}function oAe(i){if(bG(i)&&(i=i.substr(1)),i.length>0)for(let e=rb.length-1;e>=0;e--){const t=rb[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t.mime}return null}class Xo{constructor(e,t,n,r,o){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selectionStartPosition=r,this.selectionEndPosition=o}toString(){return"[ <"+this.value+">, selectionStart: "+this.selectionStart+", selectionEnd: "+this.selectionEnd+"]"}static readFromTextArea(e){return new Xo(e.getValue(),e.getSelectionStart(),e.getSelectionEnd(),null,null)}collapseSelection(){return new Xo(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){const r=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,r,-1)}if(e>=this.selectionEnd){const r=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selectionEndPosition,r,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf(String.fromCharCode(8230))===-1)return this._finishDeduceEditorPosition(this.selectionStartPosition,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,n,-1)}_finishDeduceEditorPosition(e,t,n){let r=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)r++;return[e,n*t.length,r]}static selectedText(e){return new Xo(e,0,e.length,null,null)}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};let r=e.value,o=e.selectionStart,s=e.selectionEnd,a=t.value,u=t.selectionStart,d=t.selectionEnd;const h=r.substring(s),f=a.substring(d),p=TF(h,f);a=a.substring(0,a.length-p),r=r.substring(0,r.length-p);const m=r.substring(0,o),v=a.substring(0,u),b=$y(m,v);if(a=a.substring(b),r=r.substring(b),u-=b,o-=b,d-=b,s-=b,n&&u===d&&r.length>0){let S=null;if(u===a.length?a.startsWith(r)&&(S=a.substring(r.length)):a.endsWith(r)&&(S=a.substring(0,a.length-r.length)),S!==null&&S.length>0&&(/\uFE0F/.test(S)||zEe(S)))return{text:S,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}}if(u===d){if(r===a&&o===0&&s===r.length&&u===a.length&&a.indexOf(`
`)===-1&&jEe(a))return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const S=m.length-b;return{text:a,replacePrevCharCnt:S,replaceNextCharCnt:0,positionDelta:0}}const L=s-o;return{text:a,replacePrevCharCnt:L,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min($y(e.value,t.value),e.selectionEnd),r=Math.min(TF(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-r),s=t.value.substring(n,t.value.length-r);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const u=t.selectionEnd-n;return{text:s,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:u-s.length}}}Xo.EMPTY=new Xo("",0,0,null,null);class Fw{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,r=n+1,o=n+t;return new Q(r,1,o+1,1)}static fromEditorSelection(e,t,n,r,o){const s=Fw._getPageOfLine(n.startLineNumber,r),a=Fw._getRangeForPage(s,r),u=Fw._getPageOfLine(n.endLineNumber,r),d=Fw._getRangeForPage(u,r),h=a.intersectRanges(new Q(1,1,n.startLineNumber,n.startColumn));let f=t.getValueInRange(h,1);const p=t.getLineCount(),m=t.getLineMaxColumn(p),v=d.intersectRanges(new Q(n.endLineNumber,n.endColumn,p,m));let b=t.getValueInRange(v,1),L;if(s===u||s+1===u)L=t.getValueInRange(n,1);else{const S=a.intersectRanges(n),y=d.intersectRanges(n);L=t.getValueInRange(S,1)+String.fromCharCode(8230)+t.getValueInRange(y,1)}return o&&(f.length>500&&(f=f.substring(f.length-500,f.length)),b.length>500&&(b=b.substring(0,500)),L.length>2*500&&(L=L.substring(0,500)+String.fromCharCode(8230)+L.substring(L.length-500,L.length))),new Xo(f+L+b,f.length,f.length+L.length,new Le(n.startLineNumber,n.startColumn),new Le(n.endLineNumber,n.endColumn))}}var l3;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(l3||(l3={}));const $H={forceCopyWithSyntaxHighlighting:!1};class FA{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}FA.INSTANCE=new FA;class sAe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class aAe extends Oe{constructor(e,t,n,r){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=r,this._onFocus=this._register(new be),this.onFocus=this._onFocus.event,this._onBlur=this._register(new be),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new be),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new be),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new be),this.onCut=this._onCut.event,this._onPaste=this._register(new be),this.onPaste=this._onPaste.event,this._onType=this._register(new be),this.onType=this._onType.event,this._onCompositionStart=this._register(new be),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new be),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new be),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new be),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new er(()=>this._onCut.fire(),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new er(()=>this.writeScreenReaderContent("asyncFocusGain"),0)),this._textAreaState=Xo.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null,this._nextCommand=0;let o=null;this._register(this._textArea.onKeyDown(s=>{const a=new yr(s);(a.keyCode===109||this._currentComposition&&a.keyCode===1)&&a.stopPropagation(),a.equals(9)&&a.preventDefault(),o=a,this._onKeyDown.fire(a)})),this._register(this._textArea.onKeyUp(s=>{const a=new yr(s);this._onKeyUp.fire(a)})),this._register(this._textArea.onCompositionStart(s=>{const a=new sAe;if(this._currentComposition){this._currentComposition=a;return}if(this._currentComposition=a,this._OS===2&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===s.data&&(o&&o.equals(109)&&(o.code==="ArrowRight"||o.code==="ArrowLeft")||this._browser.isFirefox)){a.handleCompositionUpdate("x"),this._onCompositionStart.fire({revealDeltaColumns:-1});return}if(this._browser.isAndroid){this._onCompositionStart.fire({revealDeltaColumns:-this._textAreaState.selectionStart});return}this._onCompositionStart.fire({revealDeltaColumns:0})})),this._register(this._textArea.onCompositionUpdate(s=>{const a=this._currentComposition;if(!a)return;if(this._browser.isAndroid){const d=Xo.readFromTextArea(this._textArea),h=Xo.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(s);return}const u=a.handleCompositionUpdate(s.data);this._textAreaState=Xo.readFromTextArea(this._textArea),this._onType.fire(u),this._onCompositionUpdate.fire(s)})),this._register(this._textArea.onCompositionEnd(s=>{const a=this._currentComposition;if(!a)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Xo.readFromTextArea(this._textArea),h=Xo.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}const u=a.handleCompositionUpdate(s.data);this._textAreaState=Xo.readFromTextArea(this._textArea),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const a=Xo.readFromTextArea(this._textArea),u=Xo.deduceInput(this._textAreaState,a,this._OS===2);if(u.replacePrevCharCnt===0&&u.text.length===1&&Vo(u.text.charCodeAt(0)))return;this._textAreaState=a;const d=u.text===""&&u.replacePrevCharCnt===0&&u.replaceNextCharCnt===0&&u.positionDelta===0;this._nextCommand===0?d||this._onType.fire(u):(d||this._firePaste(u.text,null),this._nextCommand=0)})),this._register(this._textArea.onCut(s=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(s),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(s=>{this._ensureClipboardGetsEditorSelection(s)})),this._register(this._textArea.onPaste(s=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),kN.canUseTextData(s)){const[a,u]=kN.getTextData(s);a!==""&&this._firePaste(a,u)}else this._textArea.getSelectionStart()!==this._textArea.getSelectionEnd()&&this._setAndWriteTextAreaState("paste",Xo.EMPTY),this._nextCommand=1})),this._register(this._textArea.onFocus(()=>{const s=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!s&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return qe(document,"selectionchange",t=>{if(!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),r=n-e;if(e=n,r<5)return;const o=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const a=this._textArea.getSelectionStart(),u=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===u)return;const d=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(d[0],d[1],d[2]),f=this._textAreaState.deduceEditorPosition(u),p=this._host.deduceModelPosition(f[0],f[1],f[2]),m=new yt(h.lineNumber,h.column,p.lineNumber,p.column);this._onSelectionChangeRequest.fire(m)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(kN.canUseTextData(e)),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};if(FA.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),!kN.canUseTextData(e)){this._setAndWriteTextAreaState("copy or cut",Xo.selectedText(t.text));return}kN.setTextData(e,t.text,t.html,n)}_firePaste(e,t){t||(t=FA.INSTANCE.get(e)),this._onPaste.fire({text:e,metadata:t})}}class kN{static canUseTextData(e){return!!e.clipboardData}static getTextData(e){if(e.clipboardData){e.preventDefault();const t=e.clipboardData.getData($c.text);let n=null;const r=e.clipboardData.getData("vscode-editor-data");if(typeof r=="string")try{n=JSON.parse(r),n.version!==1&&(n=null)}catch{}return[t,n]}throw new Error("ClipboardEventUtils.getTextData: Cannot use text data!")}static setTextData(e,t,n,r){if(e.clipboardData){e.clipboardData.setData($c.text,t),typeof n=="string"&&e.clipboardData.setData("text/html",n),e.clipboardData.setData("vscode-editor-data",JSON.stringify(r)),e.preventDefault();return}throw new Error("ClipboardEventUtils.setTextData: Cannot use text data!")}}class lAe extends Oe{constructor(e){super(),this._actual=e,this.onKeyDown=this._register(_h(this._actual,"keydown")).event,this.onKeyUp=this._register(_h(this._actual,"keyup")).event,this.onCompositionStart=this._register(_h(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(_h(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(_h(this._actual,"compositionend")).event,this.onInput=this._register(_h(this._actual,"input")).event,this.onCut=this._register(_h(this._actual,"cut")).event,this.onCopy=this._register(_h(this._actual,"copy")).event,this.onPaste=this._register(_h(this._actual,"paste")).event,this.onFocus=this._register(_h(this._actual,"focus")).event,this.onBlur=this._register(_h(this._actual,"blur")).event,this._onSyntheticTap=this._register(new be),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(qe(this._actual,l3.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=m0(this._actual);return e?e.activeElement===this._actual:sG(this._actual)?document.activeElement===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const r=this._actual;let o=null;const s=m0(r);s?o=s.activeElement:o=document.activeElement;const a=o===r,u=r.selectionStart,d=r.selectionEnd;if(a&&u===t&&d===n){yl&&window.parent!==window&&r.focus();return}if(a){this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(t,n),yl&&window.parent!==window&&r.focus();return}try{const h=_Ee(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(t,n),vEe(r,h)}catch{}}}class uAe extends Ab{constructor(e,t,n){super(e,t,n),this._register(Hi.addTarget(this.viewHelper.linesContentDomNode)),this._register(qe(this.viewHelper.linesContentDomNode,lr.Tap,o=>this.onTap(o))),this._register(qe(this.viewHelper.linesContentDomNode,lr.Change,o=>this.onChange(o))),this._register(qe(this.viewHelper.linesContentDomNode,lr.Contextmenu,o=>this._onContextMenu(new kb(o,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(qe(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const s=o.pointerType;if(s==="mouse"){this._lastPointerType="mouse";return}else s==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const r=new oke(this.viewHelper.viewDomNode);this._register(r.onPointerMoveThrottled(this.viewHelper.viewDomNode,o=>this._onMouseMove(o),s3(this.mouseTargetFactory),Ab.MOUSE_MOVE_MINIMUM_TIME)),this._register(r.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(r.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(r.onPointerDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o)))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new kb(e,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1})}onChange(e){this._lastPointerType==="touch"&&this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e)}}class cAe extends Ab{constructor(e,t,n){super(e,t,n),this._register(Hi.addTarget(this.viewHelper.linesContentDomNode)),this._register(qe(this.viewHelper.linesContentDomNode,lr.Tap,r=>this.onTap(r))),this._register(qe(this.viewHelper.linesContentDomNode,lr.Change,r=>this.onChange(r))),this._register(qe(this.viewHelper.linesContentDomNode,lr.Contextmenu,r=>this._onContextMenu(new kb(r,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new kb(e,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(l3.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position)}}onChange(e){this._context.model.deltaScrollNow(-e.translationX,-e.translationY)}}class dAe extends Oe{constructor(e,t,n){super(),ig&&u8.pointerEvents?this.handler=this._register(new uAe(e,t,n)):window.TouchEvent?this.handler=this._register(new cAe(e,t,n)):this.handler=this._register(new Ab(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class zS extends cM{}class Zy extends zS{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Le(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(58);const t=e.get(59);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(83);const n=e.get(130);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getLineRenderLineNumber(e){const t=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Le(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const r=Math.abs(this._lastCursorModelPosition.lineNumber-n);return r===0?'<span class="relative-current-line-number">'+n+"</span>":String(r)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Xa?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o='<div class="'+Zy.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">',s=this._context.model.getLineCount(),a=[];for(let u=n;u<=r;u++){const d=u-n;if(!this._renderFinalNewline&&u===s&&this._context.model.getLineLength(u)===0){a[d]="";continue}const h=this._getLineRenderLineNumber(u);h?u===this._activeLineNumber?a[d]='<div class="active-line-number '+Zy.CLASS_NAME+t+'" style="left:'+this._lineNumbersLeft+"px;width:"+this._lineNumbersWidth+'px;">'+h+"</div>":a[d]=o+h+"</div>":a[d]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Zy.CLASS_NAME="line-numbers";hr((i,e)=>{const t=i.getColor(Qce);t&&e.addRule(`.monaco-editor .line-numbers { color: ${t}; }`);const n=i.getColor(l2e);n&&e.addRule(`.monaco-editor .line-numbers.active-line-number { color: ${n}; }`)});class Ob extends Cc{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=ri(document.createElement("div")),this._domNode.setClassName(Ob.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=ri(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Ob.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._canUseLayerHinting=!t.get(28),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Ob.CLASS_NAME="glyph-margin";Ob.OUTER_CLASS_NAME="margin";const ob="monaco-mouse-cursor-text";class sq{constructor(e,t,n){this._visibleTextAreaBrand=void 0,this.top=e,this.left=t,this.width=n}setWidth(e){return new sq(this.top,this.left,e)}}const TN=yl;class hAe extends Cc{constructor(e,t,n){super(e),this._primaryCursorPosition=new Le(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._viewHelper=n,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,o=r.get(130);this._setAccessibilityOptions(r),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=r.get(43),this._lineHeight=r.get(58),this._emptySelectionClipboard=r.get(32),this._copyWithSyntaxHighlighting=r.get(21),this._visibleTextArea=null,this._selections=[new yt(1,1,1,1)],this._modelSelections=[new yt(1,1,1,1)],this._lastRenderPosition=null,this.textArea=ri(document.createElement("textarea")),lg.write(this.textArea,6),this.textArea.setClassName(`inputarea ${ob}`),this.textArea.setAttribute("wrap","off"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("tabindex",String(r.get(111))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",C("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),r.get(30)&&r.get(80)&&this.textArea.setAttribute("readonly","true"),this.textAreaCover=ri(document.createElement("div")),this.textAreaCover.setPosition("absolute");const s={getLineCount:()=>this._context.model.getLineCount(),getLineMaxColumn:d=>this._context.model.getLineMaxColumn(d),getValueInRange:(d,h)=>this._context.model.getValueInRange(d,h)},a={getDataToCopy:d=>{const h=this._context.model.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,As),f=this._context.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),m=Array.isArray(h)?h:null,v=Array.isArray(h)?h.join(f):h;let b,L=null;if(d&&($H.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&v.length<65536)){const S=this._context.model.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);S&&(b=S.html,L=S.mode)}return{isFromEmptySelection:p,multicursorText:m,text:v,html:b,mode:L}},getScreenReaderContent:d=>{if(this._accessibilitySupport===1){if(qn){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition();let p=this._getWordBeforePosition(f);if(p.length===0&&(p=this._getCharacterBeforePosition(f)),p.length>0)return new Xo(p,p.length,p.length,f,f)}}return Xo.EMPTY}if(Fle){const h=this._selections[0];if(h.isEmpty()){const f=h.getStartPosition(),[p,m]=this._getAndroidWordAtPosition(f);if(p.length>0)return new Xo(p,m,m,f,f)}return Xo.EMPTY}return Fw.fromEditorSelection(d,s,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(d,h,f)=>this._context.model.deduceModelPositionRelativeToViewPosition(d,h,f)},u=this._register(new lAe(this.textArea.domNode));this._textAreaInput=this._register(new aAe(a,u,qu,ILe)),this._register(this._textAreaInput.onKeyDown(d=>{this._viewController.emitKeyDown(d)})),this._register(this._textAreaInput.onKeyUp(d=>{this._viewController.emitKeyUp(d)})),this._register(this._textAreaInput.onPaste(d=>{let h=!1,f=null,p=null;d.metadata&&(h=this._emptySelectionClipboard&&!!d.metadata.isFromEmptySelection,f=typeof d.metadata.multicursorText<"u"?d.metadata.multicursorText:null,p=d.metadata.mode),this._viewController.paste(d.text,h,f,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(d=>{d.replacePrevCharCnt||d.replaceNextCharCnt||d.positionDelta?this._viewController.compositionType(d.text,d.replacePrevCharCnt,d.replaceNextCharCnt,d.positionDelta):this._viewController.type(d.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(d=>{this._viewController.setSelection(d)})),this._register(this._textAreaInput.onCompositionStart(d=>{const h=this._selections[0].startLineNumber,f=this._selections[0].startColumn+d.revealDeltaColumns;this._context.model.revealRange("keyboard",!0,new Q(h,f,h,f),0,1);const p=this._viewHelper.visibleRangeForPositionRelativeToEditor(h,f);p&&(this._visibleTextArea=new sq(this._context.viewLayout.getVerticalOffsetForLineNumber(h),p.left,TN?0:1),this.textArea.domNode.scrollLeft=0,this._render()),this.textArea.setClassName(`inputarea ${ob} ime-input`),this._viewController.compositionStart(),this._context.model.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(d=>{this._visibleTextArea&&(this._visibleTextArea=this._visibleTextArea.setWidth(fAe(d.data,this._fontInfo)),this.textArea.domNode.scrollLeft=0,this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this._render(),this.textArea.setClassName(`inputarea ${ob}`),this._viewController.compositionEnd(),this._context.model.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.model.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.model.setHasFocus(!1)}))}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.model.getLineContent(e.lineNumber),r=pc(t);let o=!0,s=e.column,a=!0,u=e.column,d=0;for(;d<50&&(o||a);){if(o&&s<=1&&(o=!1),o){const h=n.charCodeAt(s-2);r.get(h)!==0?o=!1:s--}if(a&&u>n.length&&(a=!1),a){const h=n.charCodeAt(u-1);r.get(h)!==0?a=!1:u++}d++}return[n.substring(s-1,u-1),e.column-s]}_getWordBeforePosition(e){const t=this._context.model.getLineContent(e.lineNumber),n=pc(this._context.configuration.options.get(116));let r=e.column,o=0;for(;r>1;){const s=t.charCodeAt(r-2);if(n.get(s)!==0||o>50)return t.substring(r-1,e.column-1);o++,r--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.model.getLineContent(e.lineNumber).charAt(e.column-2);if(!Vo(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){return e.get(2)===1?C("accessibilityOffAriaLabel","The editor is not accessible at this time. Press {0} for options.",Xa?"Shift+Alt+F1":"Alt+F1"):e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===lf.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(43),this._lineHeight=t.get(58),this._emptySelectionClipboard=t.get(32),this._copyWithSyntaxHighlighting=t.get(21),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("tabindex",String(t.get(111))),(e.hasChanged(30)||e.hasChanged(80))&&(t.get(30)&&t.get(80)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}prepareRender(e){this._primaryCursorPosition=new Le(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){if(this._visibleTextArea){this._renderInsideEditor(null,this._visibleTextArea.top-this._scrollTop,this._contentLeft+this._visibleTextArea.left-this._scrollLeft,this._visibleTextArea.width,this._lineHeight);return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(qn){this._renderInsideEditor(this._primaryCursorPosition,t,e,TN?0:1,this._lineHeight),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._renderInsideEditor(this._primaryCursorPosition,t,e,TN?0:1,TN?0:1)}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderInsideEditor(e,t,n,r,o){this._lastRenderPosition=e;const s=this.textArea,a=this.textAreaCover;Na.applyFontInfo(s,this._fontInfo),s.setTop(t),s.setLeft(n),s.setWidth(r),s.setHeight(o),a.setTop(0),a.setLeft(0),a.setWidth(0),a.setHeight(0)}_renderAtTopLeft(){this._lastRenderPosition=null;const e=this.textArea,t=this.textAreaCover;if(Na.applyFontInfo(e,this._fontInfo),e.setTop(0),e.setLeft(0),t.setTop(0),t.setLeft(0),TN){e.setWidth(0),e.setHeight(0),t.setWidth(0),t.setHeight(0);return}e.setWidth(1),e.setHeight(1),t.setWidth(1),t.setHeight(1);const n=this._context.configuration.options;n.get(49)?t.setClassName("monaco-editor-background textAreaCover "+Ob.OUTER_CLASS_NAME):n.get(59).renderType!==0?t.setClassName("monaco-editor-background textAreaCover "+Zy.CLASS_NAME):t.setClassName("monaco-editor-background textAreaCover")}}function fAe(i,e){const n=document.createElement("canvas").getContext("2d");n.font=gAe(e);const r=n.measureText(i);return yl?r.width+2:r.width}function gAe(i){return pAe("normal",i.fontWeight,i.fontSize,i.lineHeight,i.fontFamily)}function pAe(i,e,t,n,r){return`${i} normal ${e} ${t}px / ${n}px ${r}`}class S1{static columnSelect(e,t,n,r,o,s){let a=Math.abs(o-n)+1,u=n>o,d=r>s,h=r<s,f=[];for(let p=0;p<a;p++){let m=n+(u?-p:p),v=ur.columnFromVisibleColumn2(e,t,m,r),b=ur.columnFromVisibleColumn2(e,t,m,s),L=ur.visibleColumnFromColumn2(e,t,new Le(m,v)),S=ur.visibleColumnFromColumn2(e,t,new Le(m,b));h&&(L>s||S<r)||d&&(S>r||L<s)||f.push(new ss(new Q(m,v,m,v),0,new Le(m,b),0))}if(f.length===0)for(let p=0;p<a;p++){const m=n+(u?-p:p),v=t.getLineMaxColumn(m);f.push(new ss(new Q(m,v,m,v),0,new Le(m,v),0))}return{viewStates:f,reversed:u,fromLineNumber:n,fromVisualColumn:r,toLineNumber:o,toVisualColumn:s}}static columnSelectLeft(e,t,n){let r=n.toViewVisualColumn;return r>0&&r--,S1.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,r)}static columnSelectRight(e,t,n){let r=0;const o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let u=o;u<=s;u++){const d=t.getLineMaxColumn(u),h=ur.visibleColumnFromColumn2(e,t,new Le(u,d));r=Math.max(r,h)}let a=n.toViewVisualColumn;return a<r&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,r){const o=r?e.pageSize:1,s=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}static columnSelectDown(e,t,n,r){const o=r?e.pageSize:1,s=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}}class xs{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return yt.fromPositions(r.getEndPosition())}}class mAe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return yt.fromRange(r,0)}}class WR{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return yt.fromPositions(r.getStartPosition())}}class l4{constructor(e,t,n,r,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return yt.fromPositions(r.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class aq{constructor(e,t,n,r=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=r,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class Z9{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class pi{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-VEe(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new Le(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const r=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=PA.atomicPosition(o,t.column-1,n,0);if(s!==-1&&s+1>=r)return new Le(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){const r=e.stickyTabStops?pi.leftPositionAtomicSoftTabs(t,n,e.tabSize):pi.leftPosition(t,n);return new Z9(r.lineNumber,r.column,0)}static moveLeft(e,t,n,r,o){let s,a;if(n.hasSelection()&&!r)s=n.selection.startLineNumber,a=n.selection.startColumn;else{const u=n.position.delta(void 0,-(o-1)),d=t.normalizePosition(pi.clipPositionColumn(u,t),0),h=pi.left(e,t,d);s=h.lineNumber,a=h.column}return n.move(r,s,a,0)}static clipPositionColumn(e,t){return new Le(e.lineNumber,pi.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+NF(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new Le(t,n)}static rightPositionAtomicSoftTabs(e,t,n,r,o){if(n<e.getLineIndentColumn(t)){const s=e.getLineContent(t),a=PA.atomicPosition(s,n-1,r,1);if(a!==-1)return new Le(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const r=e.stickyTabStops?pi.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):pi.rightPosition(t,n.lineNumber,n.column);return new Z9(r.lineNumber,r.column,0)}static moveRight(e,t,n,r,o){let s,a;if(n.hasSelection()&&!r)s=n.selection.endLineNumber,a=n.selection.endColumn;else{const u=n.position.delta(void 0,o-1),d=t.normalizePosition(pi.clipPositionColumn(u,t),1),h=pi.right(e,t,d);s=h.lineNumber,a=h.column}return n.move(r,s,a,0)}static vertical(e,t,n,r,o,s,a){const u=ur.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize)+o,d=t.getLineCount(),h=n===1&&r===1,f=n===d&&r===t.getLineMaxColumn(n),p=s<n?h:f;return n=s,n<1?(n=1,a?r=t.getLineMinColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):n>d?(n=d,a?r=t.getLineMaxColumn(n):r=Math.min(t.getLineMaxColumn(n),r)):r=ur.columnFromVisibleColumn2(e,t,n,u),p?o=0:o=u-ur.visibleColumnFromColumn(t.getLineContent(n),r,e.tabSize),new Z9(n,r,o)}static down(e,t,n,r,o,s,a){return this.vertical(e,t,n,r,o,n+s,a)}static moveDown(e,t,n,r,o){let s,a;n.hasSelection()&&!r?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let u=pi.down(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(r,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateDown(e,t,n){let r=n.selection,o=pi.down(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=pi.down(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new ss(new Q(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new Le(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,n,r,o,s,a){return this.vertical(e,t,n,r,o,n-s,a)}static moveUp(e,t,n,r,o){let s,a;n.hasSelection()&&!r?(s=n.selection.startLineNumber,a=n.selection.startColumn):(s=n.position.lineNumber,a=n.position.column);let u=pi.up(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(r,u.lineNumber,u.column,u.leftoverVisibleColumns)}static translateUp(e,t,n){let r=n.selection,o=pi.up(e,t,r.selectionStartLineNumber,r.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=pi.up(e,t,r.positionLineNumber,r.positionColumn,n.leftoverVisibleColumns,1,!1);return new ss(new Q(o.lineNumber,o.column,o.lineNumber,o.column),o.leftoverVisibleColumns,new Le(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,r){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(r,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,r){const o=t.getLineCount();let s=n.position.lineNumber;for(;s<o&&this._isBlankLine(t,s);)s++;for(;s<o&&!this._isBlankLine(t,s);)s++;return n.move(r,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,n,r){let o=n.position.lineNumber,s=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||s,u;return n.position.column===a?u=s:u=a,n.move(r,o,u,0)}static moveToEndOfLine(e,t,n,r,o){let s=n.position.lineNumber,a=t.getLineMaxColumn(s);return n.move(r,s,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,r){return n.move(r,1,1,0)}static moveToEndOfBuffer(e,t,n,r){let o=t.getLineCount(),s=t.getLineMaxColumn(o);return n.move(r,o,s,0)}}class Mb{static deleteRight(e,t,n,r){let o=[],s=e!==3;for(let a=0,u=r.length;a<u;a++){const d=r[a];let h=d;if(h.isEmpty()){let f=d.getPosition(),p=pi.right(t,n,f);h=new Q(p.lineNumber,p.column,f.lineNumber,f.column)}if(h.isEmpty()){o[a]=null;continue}h.startLineNumber!==h.endLineNumber&&(s=!0),o[a]=new xs(h,"")}return[s,o]}static isAutoClosingPairDelete(e,t,n,r,o,s,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let u=0,d=s.length;u<d;u++){const h=s[u],f=h.getPosition();if(!h.isEmpty())return!1;const p=o.getLineContent(f.lineNumber);if(f.column<2||f.column>=p.length+1)return!1;const m=p.charAt(f.column-2),v=r.get(m);if(!v)return!1;if(gw(m)){if(n==="never")return!1}else if(t==="never")return!1;const b=p.charAt(f.column-1);let L=!1;for(const S of v)S.open===m&&S.close===b&&(L=!0);if(!L)return!1;if(e==="auto"){let S=!1;for(let y=0,E=a.length;y<E;y++){const A=a[y];if(f.lineNumber===A.startLineNumber&&f.column===A.startColumn){S=!0;break}}if(!S)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++){const a=n[o].getPosition(),u=new Q(a.lineNumber,a.column-1,a.lineNumber,a.column+1);r[o]=new xs(u,"")}return[!0,r]}static deleteLeft(e,t,n,r,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,r,o))return this._runAutoClosingPairDelete(t,n,r);const s=[];let a=e!==2;for(let u=0,d=r.length;u<d;u++){let h=Mb.getDeleteRange(r[u],n,t);if(h.isEmpty()){s[u]=null;continue}h.startLineNumber!==h.endLineNumber&&(a=!0),s[u]=new xs(h,"")}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const r=e.getPosition();if(n.useTabStops&&r.column>1){const o=t.getLineContent(r.lineNumber),s=ka(o),a=s===-1?o.length+1:s+1;if(r.column<=a){const u=ur.visibleColumnFromColumn2(n,t,r),d=ur.prevIndentTabStop(u,n.indentSize),h=ur.columnFromVisibleColumn2(n,t,r.lineNumber,d);return new Q(r.lineNumber,h,r.lineNumber,r.column)}}return Q.fromPositions(Mb.getPositionAfterDeleteLeft(r,t),r)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=YEe(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new Le(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let r=[],o=null;n.sort((s,a)=>Le.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=n.length;s<a;s++){const u=n[s];if(u.isEmpty())if(e.emptySelectionClipboard){let d=u.getPosition(),h,f,p,m;d.lineNumber<t.getLineCount()?(h=d.lineNumber,f=1,p=d.lineNumber+1,m=1):d.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==d.lineNumber?(h=d.lineNumber-1,f=t.getLineMaxColumn(d.lineNumber-1),p=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber)):(h=d.lineNumber,f=1,p=d.lineNumber,m=t.getLineMaxColumn(d.lineNumber));let v=new Q(h,f,p,m);o=v,v.isEmpty()?r[s]=null:r[s]=new xs(v,"")}else r[s]=null;else r[s]=new xs(u,"")}return new ll(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class ii{static _createWord(e,t,n,r,o){return{start:r,end:o,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(r,e,n)}static _doFindPreviousWordOnLine(e,t,n){let r=0;for(let o=n.column-2;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===0){if(r===2)return this._createWord(e,r,a,o+1,this._findEndOfWord(e,t,r,o+1));r=1}else if(a===2){if(r===1)return this._createWord(e,r,a,o+1,this._findEndOfWord(e,t,r,o+1));r=2}else if(a===1&&r!==0)return this._createWord(e,r,a,o+1,this._findEndOfWord(e,t,r,o+1))}return r!==0?this._createWord(e,r,1,0,this._findEndOfWord(e,t,r,0)):null}static _findEndOfWord(e,t,n,r){let o=e.length;for(let s=r;s<o;s++){let a=e.charCodeAt(s),u=t.get(a);if(u===1||n===1&&u===2||n===2&&u===0)return s}return o}static _findNextWordOnLine(e,t,n){let r=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(r,e,n)}static _doFindNextWordOnLine(e,t,n){let r=0,o=e.length;for(let s=n.column-1;s<o;s++){let a=e.charCodeAt(s),u=t.get(a);if(u===0){if(r===2)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,s-1),s);r=1}else if(u===2){if(r===1)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,s-1),s);r=2}else if(u===1&&r!==0)return this._createWord(e,r,u,this._findStartOfWord(e,t,r,s-1),s)}return r!==0?this._createWord(e,r,1,this._findStartOfWord(e,t,r,o-1),o):null}static _findStartOfWord(e,t,n,r){for(let o=r;o>=0;o--){let s=e.charCodeAt(o),a=t.get(s);if(a===1||n===1&&a===2||n===2&&a===0)return o+1}return 0}static moveWordLeft(e,t,n,r){let o=n.lineNumber,s=n.column;s===1&&o>1&&(o=o-1,s=t.getLineMaxColumn(o));let a=ii._findPreviousWordOnLine(e,t,new Le(o,s));if(r===0)return new Le(o,a?a.start+1:1);if(r===1)return a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=ii._findPreviousWordOnLine(e,t,new Le(o,a.start+1))),new Le(o,a?a.start+1:1);if(r===3){for(;a&&a.wordType===2;)a=ii._findPreviousWordOnLine(e,t,new Le(o,a.start+1));return new Le(o,a?a.start+1:1)}return a&&s<=a.end+1&&(a=ii._findPreviousWordOnLine(e,t,new Le(o,a.start+1))),new Le(o,a?a.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===1)return n>1?new Le(n-1,e.getLineMaxColumn(n-1)):t;const o=e.getLineContent(n);for(let s=t.column-1;s>1;s--){const a=o.charCodeAt(s-2),u=o.charCodeAt(s-1);if(a===95&&u!==95)return new Le(n,s);if(Wv(a)&&kf(u))return new Le(n,s);if(kf(a)&&kf(u)&&s+1<r){const d=o.charCodeAt(s);if(Wv(d))return new Le(n,s)}}return new Le(n,1)}static moveWordRight(e,t,n,r){let o=n.lineNumber,s=n.column,a=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,s=1);let u=ii._findNextWordOnLine(e,t,new Le(o,s));if(r===2)u&&u.wordType===2&&u.end-u.start===1&&u.nextCharClass===0&&(u=ii._findNextWordOnLine(e,t,new Le(o,u.end+1))),u?s=u.end+1:s=t.getLineMaxColumn(o);else if(r===3){for(a&&(s=0);u&&(u.wordType===2||u.start+1<=s);)u=ii._findNextWordOnLine(e,t,new Le(o,u.end+1));u?s=u.start+1:s=t.getLineMaxColumn(o)}else u&&!a&&s>=u.start+1&&(u=ii._findNextWordOnLine(e,t,new Le(o,u.end+1))),u?s=u.start+1:s=t.getLineMaxColumn(o);return new Le(o,s)}static _moveWordPartRight(e,t){const n=t.lineNumber,r=e.getLineMaxColumn(n);if(t.column===r)return n<e.getLineCount()?new Le(n+1,1):t;const o=e.getLineContent(n);for(let s=t.column+1;s<r;s++){const a=o.charCodeAt(s-2),u=o.charCodeAt(s-1);if(a!==95&&u===95)return new Le(n,s);if(Wv(a)&&kf(u))return new Le(n,s);if(kf(a)&&kf(u)&&s+1<r){const d=o.charCodeAt(s);if(Wv(d))return new Le(n,s)}}return new Le(n,r)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-2,o=Jf(n,r);return o+1<r?new Q(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,r=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(Mb.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const f=e.selection.getPosition();return new Q(f.lineNumber,f.column-1,f.lineNumber,f.column+1)}const a=new Le(o.positionLineNumber,o.positionColumn);let u=a.lineNumber,d=a.column;if(u===1&&d===1)return null;if(s){let f=this._deleteWordLeftWhitespace(r,a);if(f)return f}let h=ii._findPreviousWordOnLine(n,r,a);return t===0?h?d=h.start+1:d>1?d=1:(u--,d=r.getLineMaxColumn(u)):(h&&d<=h.end+1&&(h=ii._findPreviousWordOnLine(n,r,new Le(u,h.start+1))),h?d=h.end+1:d>1?d=1:(u--,d=r.getLineMaxColumn(u))),new Q(u,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const r=new Le(n.positionLineNumber,n.positionColumn);let o=this._deleteInsideWordWhitespace(t,r);return o||this._deleteInsideWordDetermineDeleteRange(e,t,r)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=n.length;if(r===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let s=Math.min(t.column-1,r-1);if(!this._charAtIsWhitespace(n,s))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;s+1<r&&this._charAtIsWhitespace(n,s+1);)s++;return new Q(t.lineNumber,o+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const r=t.getLineContent(n.lineNumber),o=r.length;if(o===0)return n.lineNumber>1?new Q(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new Q(n.lineNumber,1,n.lineNumber+1,1):new Q(n.lineNumber,1,n.lineNumber,1);const s=f=>f.start+1<=n.column&&n.column<=f.end+1,a=(f,p)=>(f=Math.min(f,n.column),p=Math.max(p,n.column),new Q(n.lineNumber,f,n.lineNumber,p)),u=f=>{let p=f.start+1,m=f.end+1,v=!1;for(;m-1<o&&this._charAtIsWhitespace(r,m-1);)v=!0,m++;if(!v)for(;p>1&&this._charAtIsWhitespace(r,p-2);)p--;return a(p,m)},d=ii._findPreviousWordOnLine(e,t,n);if(d&&s(d))return u(d);const h=ii._findNextWordOnLine(e,t,n);return h&&s(h)?u(h):d&&h?a(d.end+1,h.start+1):d?a(d.start+1,d.end+1):h?a(h.start+1,h.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=ii._moveWordPartLeft(e,n);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let r=t;r<n;r++){let o=e.charAt(r);if(o!==" "&&o!=="	")return r}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),r=t.column-1,o=this._findFirstNonWhitespaceChar(n,r);return r+1<o?new Q(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,r=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new Le(o.positionLineNumber,o.positionColumn);let u=a.lineNumber,d=a.column;const h=r.getLineCount(),f=r.getLineMaxColumn(u);if(u===h&&d===f)return null;if(s){let m=this._deleteWordRightWhitespace(r,a);if(m)return m}let p=ii._findNextWordOnLine(n,r,a);return t===2?p?d=p.end+1:d<f||u===h?d=f:(u++,p=ii._findNextWordOnLine(n,r,new Le(u,1)),p?d=p.start+1:d=r.getLineMaxColumn(u)):(p&&d>=p.start+1&&(p=ii._findNextWordOnLine(n,r,new Le(u,p.end+1))),p?d=p.start+1:d<f||u===h?d=f:(u++,p=ii._findNextWordOnLine(n,r,new Le(u,1)),p?d=p.start+1:d=r.getLineMaxColumn(u))),new Q(u,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),r=ii._moveWordPartRight(e,n);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}static _createWordAtPosition(e,t,n){const r=new Q(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}}static getWordAtPosition(e,t,n){const r=pc(t),o=ii._findPreviousWordOnLine(r,e,n);if(o&&o.wordType===1&&o.start<=n.column-1&&n.column-1<=o.end)return ii._createWordAtPosition(e,n.lineNumber,o);const s=ii._findNextWordOnLine(r,e,n);return s&&s.wordType===1&&s.start<=n.column-1&&n.column-1<=s.end?ii._createWordAtPosition(e,n.lineNumber,s):null}static word(e,t,n,r,o){const s=pc(e.wordSeparators);let a=ii._findPreviousWordOnLine(s,t,o),u=ii._findNextWordOnLine(s,t,o);if(!r){let m,v;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(m=a.start+1,v=a.end+1):u&&u.wordType===1&&u.start<=o.column-1&&o.column-1<=u.end?(m=u.start+1,v=u.end+1):(a?m=a.end+1:m=1,u?v=u.start+1:v=t.getLineMaxColumn(o.lineNumber)),new ss(new Q(o.lineNumber,m,o.lineNumber,v),0,new Le(o.lineNumber,v),0)}let d,h;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(d=a.start+1,h=a.end+1):u&&u.wordType===1&&u.start<o.column-1&&o.column-1<u.end?(d=u.start+1,h=u.end+1):(d=o.column,h=o.column);let f=o.lineNumber,p;if(n.selectionStart.containsPosition(o))p=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){p=d;let m=new Le(f,p);n.selectionStart.containsPosition(m)&&(p=n.selectionStart.endColumn)}else{p=h;let m=new Le(f,p);n.selectionStart.containsPosition(m)&&(p=n.selectionStart.startColumn)}return n.move(!0,f,p,0)}}class K8 extends ii{static deleteWordPartLeft(e){const t=VR([ii.deleteWordLeft(e,0),ii.deleteWordLeft(e,2),ii._deleteWordPartLeft(e.model,e.selection)]);return t.sort(Q.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=VR([ii.deleteWordRight(e,0),ii.deleteWordRight(e,2),ii._deleteWordPartRight(e.model,e.selection)]);return t.sort(Q.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n){const r=VR([ii.moveWordLeft(e,t,n,0),ii.moveWordLeft(e,t,n,2),ii._moveWordPartLeft(t,n)]);return r.sort(Le.compare),r[2]}static moveWordPartRight(e,t,n){const r=VR([ii.moveWordRight(e,t,n,0),ii.moveWordRight(e,t,n,2),ii._moveWordPartRight(t,n)]);return r.sort(Le.compare),r[0]}}function VR(i){return i.filter(e=>!!e)}class os{static addCursorDown(e,t,n){let r=[],o=0;for(let s=0,a=t.length;s<a;s++){const u=t[s];r[o++]=new Bn(u.modelState,u.viewState),n?r[o++]=Bn.fromModelState(pi.translateDown(e.cursorConfig,e.model,u.modelState)):r[o++]=Bn.fromViewState(pi.translateDown(e.cursorConfig,e,u.viewState))}return r}static addCursorUp(e,t,n){let r=[],o=0;for(let s=0,a=t.length;s<a;s++){const u=t[s];r[o++]=new Bn(u.modelState,u.viewState),n?r[o++]=Bn.fromModelState(pi.translateUp(e.cursorConfig,e.model,u.modelState)):r[o++]=Bn.fromViewState(pi.translateUp(e.cursorConfig,e,u.viewState))}return r}static moveToBeginningOfLine(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];r[o]=this._moveToLineStart(e,a,n)}return r}static _moveToLineStart(e,t,n){const r=t.viewState.position.column,o=t.modelState.position.column,s=r===o,a=t.viewState.position.lineNumber,u=e.getLineFirstNonWhitespaceColumn(a);return!s&&!(r===u)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Bn.fromViewState(pi.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Bn.fromModelState(pi.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=this._moveToLineEnd(e,u,n,r)}return o}static _moveToLineEnd(e,t,n,r){const o=t.viewState.position,s=e.getLineMaxColumn(o.lineNumber),a=o.column===s,u=t.modelState.position,d=e.model.getLineMaxColumn(u.lineNumber),h=s-o.column===d-u.column;return a||h?this._moveToLineEndByModel(e,t,n,r):this._moveToLineEndByView(e,t,n,r)}static _moveToLineEndByView(e,t,n,r){return Bn.fromViewState(pi.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,r))}static _moveToLineEndByModel(e,t,n,r){return Bn.fromModelState(pi.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,r))}static expandLineSelection(e,t){let n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r],a=s.modelState.selection.startLineNumber,u=e.model.getLineCount();let d=s.modelState.selection.endLineNumber,h;d===u?h=e.model.getLineMaxColumn(u):(d++,h=1),n[r]=Bn.fromModelState(new ss(new Q(a,1,a,1),0,new Le(d,h),0))}return n}static moveToBeginningOfBuffer(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];r[o]=Bn.fromModelState(pi.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static moveToEndOfBuffer(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o];r[o]=Bn.fromModelState(pi.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return r}static selectAll(e,t){const n=e.model.getLineCount(),r=e.model.getLineMaxColumn(n);return Bn.fromModelState(new ss(new Q(1,1,1,1),0,new Le(n,r),0))}static line(e,t,n,r,o){const s=e.model.validatePosition(r),a=o?e.coordinatesConverter.validateViewPosition(new Le(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n||!t.modelState.hasSelection()){const d=e.model.getLineCount();let h=s.lineNumber+1,f=1;return h>d&&(h=d,f=e.model.getLineMaxColumn(h)),Bn.fromModelState(new ss(new Q(s.lineNumber,1,h,f),0,new Le(h,f),0))}const u=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<u)return Bn.fromViewState(t.viewState.move(t.modelState.hasSelection(),a.lineNumber,1,0));if(s.lineNumber>u){const d=e.getLineCount();let h=a.lineNumber+1,f=1;return h>d&&(h=d,f=e.getLineMaxColumn(h)),Bn.fromViewState(t.viewState.move(t.modelState.hasSelection(),h,f,0))}else{const d=t.modelState.selectionStart.getEndPosition();return Bn.fromModelState(t.modelState.move(t.modelState.hasSelection(),d.lineNumber,d.column,0))}}static word(e,t,n,r){const o=e.model.validatePosition(r);return Bn.fromModelState(ii.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Bn(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,r=t.viewState.position.column;return Bn.fromViewState(new ss(new Q(n,r,n,r),0,new Le(n,r),0))}static moveTo(e,t,n,r,o){const s=e.model.validatePosition(r),a=o?e.coordinatesConverter.validateViewPosition(new Le(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return Bn.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,r,o,s){switch(n){case 0:return s===4?this._moveHalfLineLeft(e,t,r):this._moveLeft(e,t,r,o);case 1:return s===4?this._moveHalfLineRight(e,t,r):this._moveRight(e,t,r,o);case 2:return s===2?this._moveUpByViewLines(e,t,r,o):this._moveUpByModelLines(e,t,r,o);case 3:return s===2?this._moveDownByViewLines(e,t,r,o):this._moveDownByModelLines(e,t,r,o);case 4:return s===2?t.map(a=>Bn.fromViewState(pi.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Bn.fromModelState(pi.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 5:return s===2?t.map(a=>Bn.fromViewState(pi.moveToNextBlankLine(e.cursorConfig,e,a.viewState,r))):t.map(a=>Bn.fromModelState(pi.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,r)));case 6:return this._moveToViewMinColumn(e,t,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,r);case 8:return this._moveToViewCenterColumn(e,t,r);case 9:return this._moveToViewMaxColumn(e,t,r);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,r);default:return null}}static viewportMove(e,t,n,r,o){const s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(n){case 11:{const u=this._firstLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 13:{const u=this._lastLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 12:{const u=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(e,t[0],r,u,d)]}case 14:{let u=[];for(let d=0,h=t.length;d<h;d++){const f=t[d];u[d]=this.findPositionInViewportIfOutside(e,f,s,r)}return u}default:return null}}static findPositionInViewportIfOutside(e,t,n,r){let o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new Bn(t.modelState,t.viewState);{let s;o>n.endLineNumber-1?s=n.endLineNumber-1:o<n.startLineNumber?s=n.startLineNumber:s=o;const a=pi.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return Bn.fromViewState(t.viewState.move(r,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.min(t.endLineNumber,r+n-1)}static _lastLineNumberInRange(e,t,n){let r=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(r)&&r++,Math.max(r,t.endLineNumber-n+1)}static _moveLeft(e,t,n,r){return t.map(o=>Bn.fromViewState(pi.moveLeft(e.cursorConfig,e,o.viewState,n,r)))}static _moveHalfLineLeft(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(u).length/2);r[o]=Bn.fromViewState(pi.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return r}static _moveRight(e,t,n,r){return t.map(o=>Bn.fromViewState(pi.moveRight(e.cursorConfig,e,o.viewState,n,r)))}static _moveHalfLineRight(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=Math.round(e.getLineContent(u).length/2);r[o]=Bn.fromViewState(pi.moveRight(e.cursorConfig,e,a.viewState,n,d))}return r}static _moveDownByViewLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Bn.fromViewState(pi.moveDown(e.cursorConfig,e,u.viewState,n,r))}return o}static _moveDownByModelLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Bn.fromModelState(pi.moveDown(e.cursorConfig,e.model,u.modelState,n,r))}return o}static _moveUpByViewLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Bn.fromViewState(pi.moveUp(e.cursorConfig,e,u.viewState,n,r))}return o}static _moveUpByModelLines(e,t,n,r){let o=[];for(let s=0,a=t.length;s<a;s++){const u=t[s];o[s]=Bn.fromModelState(pi.moveUp(e.cursorConfig,e.model,u.modelState,n,r))}return o}static _moveToViewPosition(e,t,n,r,o){return Bn.fromViewState(t.viewState.move(n,r,o,0))}static _moveToModelPosition(e,t,n,r,o){return Bn.fromModelState(t.modelState.move(n,r,o,0))}static _moveToViewMinColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineMinColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewCenterColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(u)+e.getLineMinColumn(u))/2);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewMaxColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineMaxColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}static _moveToViewLastNonWhitespaceColumn(e,t,n){let r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(u);r[o]=this._moveToViewPosition(e,a,n,u,d)}return r}}var u3;(function(i){const e=function(n){if(!Ga(n))return!1;let r=n;return!(!dc(r.to)||!pl(r.select)&&!uue(r.select)||!pl(r.by)&&!dc(r.by)||!pl(r.value)&&!Sb(r.value))};i.description={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let r;switch(n.to){case i.RawDirection.Left:r=0;break;case i.RawDirection.Right:r=1;break;case i.RawDirection.Up:r=2;break;case i.RawDirection.Down:r=3;break;case i.RawDirection.PrevBlankLine:r=4;break;case i.RawDirection.NextBlankLine:r=5;break;case i.RawDirection.WrappedLineStart:r=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:r=7;break;case i.RawDirection.WrappedLineColumnCenter:r=8;break;case i.RawDirection.WrappedLineEnd:r=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:r=10;break;case i.RawDirection.ViewPortTop:r=11;break;case i.RawDirection.ViewPortBottom:r=13;break;case i.RawDirection.ViewPortCenter:r=12;break;case i.RawDirection.ViewPortIfOutside:r=14;break;default:return null}let o=0;switch(n.by){case i.RawUnit.Line:o=1;break;case i.RawUnit.WrappedLine:o=2;break;case i.RawUnit.Character:o=3;break;case i.RawUnit.HalfLine:o=4;break}return{direction:r,unit:o,select:!!n.select,value:n.value||1}}i.parse=t})(u3||(u3={}));const X9=Object.create(null);function J0(i,e){if(e<=0)return"";X9[i]||(X9[i]=["",i]);const t=X9[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}class Iu{constructor(e,t){this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,r,o){const s=ur.visibleColumnFromColumn(e,t,n);if(o){const a=J0(" ",r),d=ur.prevIndentTabStop(s,r)/r;return J0(a,d)}else{const a="	",d=ur.prevRenderTabStop(s,n)/n;return J0(a,d)}}static shiftIndent(e,t,n,r,o){const s=ur.visibleColumnFromColumn(e,t,n);if(o){const a=J0(" ",r),d=ur.nextIndentTabStop(s,r)/r;return J0(a,d)}else{const a="	",d=ur.nextRenderTabStop(s,n)/n;return J0(a,d)}}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let r=this._selection.endLineNumber;this._selection.endColumn===1&&n!==r&&(r=r-1);const{tabSize:o,indentSize:s,insertSpaces:a}=this._opts,u=n===r;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,h=0;for(let f=n;f<=r;f++,d=h){h=0;let p=e.getLineContent(f),m=ka(p);if(this._opts.isUnshift&&(p.length===0||m===0)||!u&&!this._opts.isUnshift&&p.length===0)continue;if(m===-1&&(m=p.length),f>1&&ur.visibleColumnFromColumn(p,m+1,o)%s!==0&&e.isCheapToTokenize(f-1)){let L=vi.getEnterAction(this._opts.autoIndent,e,new Q(f-1,e.getLineMaxColumn(f-1),f-1,e.getLineMaxColumn(f-1)));if(L){if(h=d,L.appendText)for(let S=0,y=L.appendText.length;S<y&&h<s&&L.appendText.charCodeAt(S)===32;S++)h++;L.removeText&&(h=Math.max(0,h-L.removeText));for(let S=0;S<h&&!(m===0||p.charCodeAt(m-1)!==32);S++)m--}}if(this._opts.isUnshift&&m===0)continue;let v;this._opts.isUnshift?v=Iu.unshiftIndent(p,m+1,o,s,a):v=Iu.shiftIndent(p,m+1,o,s,a),this._addEditOperation(t,new Q(f,1,f,m+1),v),f===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=m+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const d=a?J0(" ",s):"	";for(let h=n;h<=r;h++){const f=e.getLineContent(h);let p=ka(f);if(!(this._opts.isUnshift&&(f.length===0||p===0))&&!(!u&&!this._opts.isUnshift&&f.length===0)&&(p===-1&&(p=f.length),!(this._opts.isUnshift&&p===0)))if(this._opts.isUnshift){p=Math.min(p,s);for(let m=0;m<p;m++)if(f.charCodeAt(m)===9){p=m+1;break}this._addEditOperation(t,new Q(h,1,h,p+1),"")}else this._addEditOperation(t,new Q(h,1,h,1),d),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let r=t.getInverseEditOperations()[0];return new yt(r.range.endLineNumber,r.range.endColumn,r.range.endLineNumber,r.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let r=this._selection.startColumn;return n.startColumn<=r?n:n.getDirection()===0?new yt(n.startLineNumber,r,n.endLineNumber,n.endColumn):new yt(n.endLineNumber,n.endColumn,n.startLineNumber,r)}return n}}class _Ae{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new Q(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new Q(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),r=n[0].range,o=n[1].range;return new yt(r.endLineNumber,r.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class xr{static indent(e,t,n){if(t===null||n===null)return[];let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=new Iu(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static outdent(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=new Iu(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent});return r}static shiftIndent(e,t,n){return n=n||1,Iu.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Iu.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,r){let o=[];for(let s=0,a=n.length;s<a;s++)o[s]=new xs(n[s],r[s]);return new ll(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,r,o){let s=[];for(let a=0,u=n.length;a<u;a++){const d=n[a];let h=d.getPosition();if(o&&!d.isEmpty()&&(o=!1),o&&r.indexOf(`
`)!==r.length-1&&(o=!1),o){let f=new Q(h.lineNumber,1,h.lineNumber,1);s[a]=new aq(f,r,d,!0)}else s[a]=new xs(d,r)}return new ll(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,r,o){if(r||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substr(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substr(0,n.length-1));let s=sg(n);if(s.length===t.length)return s}return null}static paste(e,t,n,r,o,s){const a=this._distributePasteToCursors(e,n,r,o,s);return a?(n=n.sort(Q.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,r,o)}static _goodIndentForLine(e,t,n){let r=null,o="";const s=vi.getInheritIndentForLine(e.autoIndent,t,n,!1);if(s)r=s.action,o=s.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const h=t.getLineContent(a);if(Jf(h)>=0)break}if(a<1)return null;const u=t.getLineMaxColumn(a),d=vi.getEnterAction(e.autoIndent,t,new Q(a,u,a,u));d&&(o=d.indentation+d.appendText)}return r&&(r===uo.Indent&&(o=xr.shiftIndent(e,o)),r===uo.Outdent&&(o=xr.unshiftIndent(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,r){let o="",s=n.getStartPosition();if(e.insertSpaces){let a=ur.visibleColumnFromColumn2(e,t,s),u=e.indentSize,d=u-a%u;for(let h=0;h<d;h++)o+=" "}else o="	";return new xs(n,o,r)}static tab(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++){const a=n[o];if(a.isEmpty()){let u=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(u)&&t.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";let h=e.normalizeIndentation(d);if(!u.startsWith(h)){r[o]=new xs(new Q(a.startLineNumber,1,a.startLineNumber,u.length+1),h,!0);continue}}r[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let u=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==u){r[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}r[o]=new Iu(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent})}}return r}static compositionType(e,t,n,r,o,s,a,u){const d=r.map(h=>this._compositionType(n,h,o,s,a,u));return new ll(4,d,{shouldPushStackElementBefore:HR(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,r,o,s){if(!t.isEmpty())return null;const a=t.getPosition(),u=Math.max(1,a.column-r),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),h=new Q(a.lineNumber,u,a.lineNumber,d);return e.getValueInRange(h)===n&&s===0?null:new l4(h,n,0,s)}static _typeCommand(e,t,n){return n?new WR(e,t,!0):new xs(e,t,!0)}static _enter(e,t,n,r){if(e.autoIndent===0)return xr._typeCommand(r,`
`,n);if(!t.isCheapToTokenize(r.getStartPosition().lineNumber)||e.autoIndent===1){let u=t.getLineContent(r.startLineNumber),d=zi(u).substring(0,r.startColumn-1);return xr._typeCommand(r,`
`+e.normalizeIndentation(d),n)}const o=vi.getEnterAction(e.autoIndent,t,r);if(o){if(o.indentAction===uo.None)return xr._typeCommand(r,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===uo.Indent)return xr._typeCommand(r,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===uo.IndentOutdent){const u=e.normalizeIndentation(o.indentation),d=e.normalizeIndentation(o.indentation+o.appendText),h=`
`+d+`
`+u;return n?new WR(r,h,!0):new l4(r,h,-1,d.length-u.length,!0)}else if(o.indentAction===uo.Outdent){const u=xr.unshiftIndent(e,o.indentation);return xr._typeCommand(r,`
`+e.normalizeIndentation(u+o.appendText),n)}}const s=t.getLineContent(r.startLineNumber),a=zi(s).substring(0,r.startColumn-1);if(e.autoIndent>=4){const u=vi.getIndentForEnter(e.autoIndent,t,r,{unshiftIndent:d=>xr.unshiftIndent(e,d),shiftIndent:d=>xr.shiftIndent(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)});if(u){let d=ur.visibleColumnFromColumn2(e,t,r.getEndPosition());const h=r.endColumn,f=t.getLineContent(r.endLineNumber),p=ka(f);if(p>=0?r=r.setEndPosition(r.endLineNumber,Math.max(r.endColumn,p+1)):r=r.setEndPosition(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),n)return new WR(r,`
`+e.normalizeIndentation(u.afterEnter),!0);{let m=0;return h<=p+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),m=Math.min(d+1-e.normalizeIndentation(u.afterEnter).length-1,0)),new l4(r,`
`+e.normalizeIndentation(u.afterEnter),0,m,!0)}}}return xr._typeCommand(r,`
`+e.normalizeIndentation(a),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let r=0,o=n.length;r<o;r++)if(!t.isCheapToTokenize(n[r].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,r){const o=vi.getIndentationAtPosition(t,n.startLineNumber,n.startColumn),s=vi.getIndentActionForType(e.autoIndent,t,n,r,{shiftIndent:a=>xr.shiftIndent(e,a),unshiftIndent:a=>xr.unshiftIndent(e,a)});if(s===null)return null;if(s!==e.normalizeIndentation(o)){const a=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return a===0?xr._typeCommand(new Q(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+r,!1):xr._typeCommand(new Q(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(s)+t.getLineContent(n.startLineNumber).substring(a-1,n.startColumn-1)+r,!1)}return null}static _isAutoClosingOvertype(e,t,n,r,o){if(e.autoClosingOvertype==="never"||!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(o))return!1;for(let s=0,a=n.length;s<a;s++){const u=n[s];if(!u.isEmpty())return!1;const d=u.getPosition(),h=t.getLineContent(d.lineNumber);if(h.charAt(d.column-1)!==o)return!1;const p=gw(o);if((d.column>2?h.charCodeAt(d.column-2):0)===92&&p)return!1;if(e.autoClosingOvertype==="auto"){let v=!1;for(let b=0,L=r.length;b<L;b++){const S=r[b];if(d.lineNumber===S.startLineNumber&&d.column===S.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,r,o){let s=[];for(let a=0,u=r.length;a<u;a++){const h=r[a].getPosition(),f=new Q(h.lineNumber,h.column,h.lineNumber,h.column+1);s[a]=new xs(f,o)}return new ll(4,s,{shouldPushStackElementBefore:HR(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),r=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],s=r.some(u=>t.startsWith(u.open)),a=o.some(u=>t.startsWith(u.close));return!s&&a}static _findAutoClosingPairOpen(e,t,n,r){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!o)return null;let s=null;for(const a of o)if(s===null||a.open.length>s.open.length){let u=!0;for(const d of n)if(t.getValueInRange(new Q(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+r!==a.open){u=!1;break}u&&(s=a)}return s}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),r=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const s of r)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!o||s.open.length>o.open.length)&&(o=s);return o}static _getAutoClosingPairClose(e,t,n,r,o){const s=gw(r),a=s?e.autoClosingQuotes:e.autoClosingBrackets,u=s?e.shouldAutoCloseBefore.quote:e.shouldAutoCloseBefore.bracket;if(a==="never")return null;for(const v of n)if(!v.isEmpty())return null;const d=n.map(v=>{const b=v.getPosition();return o?{lineNumber:b.lineNumber,beforeColumn:b.column-r.length,afterColumn:b.column}:{lineNumber:b.lineNumber,beforeColumn:b.column,afterColumn:b.column}}),h=this._findAutoClosingPairOpen(e,t,d.map(v=>new Le(v.lineNumber,v.beforeColumn)),r);if(!h)return null;const f=this._findContainedAutoClosingPair(e,h),p=f?f.close:"";let m=!0;for(const v of d){const{lineNumber:b,beforeColumn:L,afterColumn:S}=v,y=t.getLineContent(b),E=y.substring(0,L-1),A=y.substring(S-1);if(A.startsWith(p)||(m=!1),A.length>0){const M=A.charAt(0);if(!xr._isBeforeClosingBrace(e,A)&&!u(M))return null}if(h.open.length===1&&(r==="'"||r==='"')&&a!=="always"){const M=pc(e.wordSeparators);if(E.length>0){const K=E.charCodeAt(E.length-1);if(M.get(K)===0)return null}}if(!t.isCheapToTokenize(b))return null;t.forceTokenization(b);const N=t.getLineTokens(b),V=o4(N,L-1);if(!h.shouldAutoClose(V,L-V.firstCharOffset))return null;const R=h.findNeutralCharacter();if(R){const M=t.getTokenTypeIfInsertingCharacter(b,L,R);if(!h.isOK(M))return null}}return m?h.close.substring(0,h.close.length-p.length):h.close}static _runAutoClosingOpenCharType(e,t,n,r,o,s,a){let u=[];for(let d=0,h=r.length;d<h;d++){const f=r[d];u[d]=new cde(f,o,!s,a)}return new ll(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return gw(t)?e.autoSurround==="quotes"||e.autoSurround==="languageDefined":e.autoSurround==="brackets"||e.autoSurround==="languageDefined"}static _isSurroundSelectionType(e,t,n,r){if(!xr._shouldSurroundChar(e,r)||!e.surroundingPairs.hasOwnProperty(r))return!1;const o=gw(r);for(let s=0,a=n.length;s<a;s++){const u=n[s];if(u.isEmpty())return!1;let d=!0;for(let h=u.startLineNumber;h<=u.endLineNumber;h++){const f=t.getLineContent(h),p=h===u.startLineNumber?u.startColumn-1:0,m=h===u.endLineNumber?u.endColumn-1:f.length,v=f.substring(p,m);if(/[^ \t]/.test(v)){d=!1;break}}if(d)return!1;if(o&&u.startLineNumber===u.endLineNumber&&u.startColumn+1===u.endColumn){const h=t.getValueInRange(u);if(gw(h))return!1}}return!0}static _runSurroundSelectionType(e,t,n,r,o){let s=[];for(let a=0,u=r.length;a<u;a++){const d=r[a],h=t.surroundingPairs[o];s[a]=new _Ae(d,o,h)}return new ll(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,r,o){if(!t.electricChars.hasOwnProperty(o)||!r.isEmpty())return null;let s=r.getPosition();n.forceTokenization(s.lineNumber);let a=n.getLineTokens(s.lineNumber),u;try{u=vi.onElectricCharacter(o,a,s.column)}catch(d){return gn(d),null}if(!u)return null;if(u.matchOpenBracket){let d=(a.getLineContent()+o).lastIndexOf(u.matchOpenBracket)+1,h=n.bracketPairs.findMatchingBracketUp(u.matchOpenBracket,{lineNumber:s.lineNumber,column:d});if(h){if(h.startLineNumber===s.lineNumber)return null;let f=n.getLineContent(h.startLineNumber),p=zi(f),m=t.normalizeIndentation(p),v=n.getLineContent(s.lineNumber),b=n.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,L=v.substring(b-1,s.column-1),S=m+L+o,y=new Q(s.lineNumber,1,s.lineNumber,s.column);const E=new xs(y,S);return new ll(Q9(S,e),[E],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,r,o,s){if(!r||yt.selectionsArrEqual(r,o))return null;let a=null;for(const d of o){if(!d.isEmpty())return null;const h=d.getPosition(),f=n.getValueInRange(new Q(h.lineNumber,h.column-1,h.lineNumber,h.column));if(a===null)a=f;else if(a!==f)return null}if(!a)return null;if(this._isAutoClosingOvertype(t,n,o,s,a)){const d=o.map(h=>new xs(new Q(h.positionLineNumber,h.positionColumn,h.positionLineNumber,h.positionColumn+1),"",!1));return new ll(4,d,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=this._getAutoClosingPairClose(t,n,o,a,!0);return u!==null?this._runAutoClosingOpenCharType(e,t,n,o,a,!0,u):null}static typeWithInterceptors(e,t,n,r,o,s,a){if(!e&&a===`
`){let h=[];for(let f=0,p=o.length;f<p;f++)h[f]=xr._enter(n,r,!1,o[f]);return new ll(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,r,o)){let h=[],f=!1;for(let p=0,m=o.length;p<m;p++)if(h[p]=this._runAutoIndentType(n,r,o[p],a),!h[p]){f=!0;break}if(!f)return new ll(4,h,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoClosingOvertype(n,r,o,s,a))return this._runAutoClosingOvertype(t,n,r,o,a);if(!e){const h=this._getAutoClosingPairClose(n,r,o,a,!1);if(h)return this._runAutoClosingOpenCharType(t,n,r,o,a,!1,h)}if(this._isSurroundSelectionType(n,r,o,a))return this._runSurroundSelectionType(t,n,r,o,a);if(!e&&this._isTypeInterceptorElectricChar(n,r,o)){const h=this._typeInterceptorElectricChar(t,n,r,o[0],a);if(h)return h}let u=[];for(let h=0,f=o.length;h<f;h++)u[h]=new xs(o[h],a);const d=Q9(a,t);return new ll(d,u,{shouldPushStackElementBefore:HR(t,d),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,r,o){let s=[];for(let u=0,d=r.length;u<d;u++)s[u]=new xs(r[u],o);const a=Q9(o,e);return new ll(a,s,{shouldPushStackElementBefore:HR(e,a),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let r=[];for(let o=0,s=n.length;o<s;o++){let a=n[o].positionLineNumber;if(a===1)r[o]=new WR(new Q(1,1,1,1),`
`);else{a--;let u=t.getLineMaxColumn(a);r[o]=this._enter(e,t,!1,new Q(a,u,a,u))}}return r}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let r=[];for(let o=0,s=n.length;o<s;o++){const a=n[o].positionLineNumber;let u=t.getLineMaxColumn(a);r[o]=this._enter(e,t,!1,new Q(a,u,a,u))}return r}static lineBreakInsert(e,t,n){let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=this._enter(e,t,!0,n[o]);return r}}class cde extends l4{constructor(e,t,n,r){super(e,(n?t:"")+r,0,-r.length),this._openCharacter=t,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){let r=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Q(r.startLineNumber,r.endColumn-this._closeCharacter.length,r.endLineNumber,r.endColumn),this.enclosingRange=new Q(r.startLineNumber,r.endColumn-this._openCharacter.length-this._closeCharacter.length,r.endLineNumber,r.endColumn),super.computeCursorState(e,t)}}function Q9(i,e){return i===" "?e===5||e===6?6:5:4}function HR(i,e){return lee(i)&&!lee(e)?!0:i===5?!1:aee(i)!==aee(e)}function aee(i){return i===6||i===5?"space":i}function lee(i){return i===4||i===5||i===6}var de;(function(i){i.editorSimpleInput=new Dt("editorSimpleInput",!1,!0),i.editorTextFocus=new Dt("editorTextFocus",!1,C("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new Dt("editorFocus",!1,C("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new Dt("textInputFocus",!1,C("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new Dt("editorReadonly",!1,C("editorReadonly","Whether the editor is read only")),i.inDiffEditor=new Dt("inDiffEditor",!1,C("inDiffEditor","Whether the context is a diff editor")),i.columnSelection=new Dt("editorColumnSelection",!1,C("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new Dt("editorHasSelection",!1,C("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new Dt("editorHasMultipleSelections",!1,C("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new Dt("editorTabMovesFocus",!1,C("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInWalkThroughSnippet=new Dt("isInEmbeddedEditor",!1,!0),i.canUndo=new Dt("canUndo",!1,!0),i.canRedo=new Dt("canRedo",!1,!0),i.hoverVisible=new Dt("editorHoverVisible",!1,C("editorHoverVisible","Whether the editor hover is visible")),i.inCompositeEditor=new Dt("inCompositeEditor",void 0,C("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new Dt("editorLangId","",C("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new Dt("editorHasCompletionItemProvider",!1,C("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new Dt("editorHasCodeActionsProvider",!1,C("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new Dt("editorHasCodeLensProvider",!1,C("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new Dt("editorHasDefinitionProvider",!1,C("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new Dt("editorHasDeclarationProvider",!1,C("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new Dt("editorHasImplementationProvider",!1,C("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new Dt("editorHasTypeDefinitionProvider",!1,C("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new Dt("editorHasHoverProvider",!1,C("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new Dt("editorHasDocumentHighlightProvider",!1,C("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new Dt("editorHasDocumentSymbolProvider",!1,C("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new Dt("editorHasReferenceProvider",!1,C("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new Dt("editorHasRenameProvider",!1,C("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new Dt("editorHasSignatureHelpProvider",!1,C("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new Dt("editorHasInlayHintsProvider",!1,C("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new Dt("editorHasDocumentFormattingProvider",!1,C("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new Dt("editorHasDocumentSelectionFormattingProvider",!1,C("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new Dt("editorHasMultipleDocumentFormattingProvider",!1,C("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new Dt("editorHasMultipleDocumentSelectionFormattingProvider",!1,C("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(de||(de={}));const _i=0;class go extends Ps{runEditorCommand(e,t,n){const r=t._getViewModel();r&&this.runCoreEditorCommand(r,n||{})}}var c3;(function(i){const e=function(n){if(!Ga(n))return!1;const r=n;return!(!dc(r.to)||!pl(r.by)&&!dc(r.by)||!pl(r.value)&&!Sb(r.value)||!pl(r.revealCursor)&&!uue(r.revealCursor))};i.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Down:"down"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage"};function t(n){let r;switch(n.to){case i.RawDirection.Up:r=1;break;case i.RawDirection.Down:r=2;break;default:return null}let o;switch(n.by){case i.RawUnit.Line:o=1;break;case i.RawUnit.WrappedLine:o=2;break;case i.RawUnit.Page:o=3;break;case i.RawUnit.HalfPage:o=4;break;default:o=2}const s=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:r,unit:o,value:s,revealCursor:a,select:!!n.select}}i.parse=t})(c3||(c3={}));var Bw;(function(i){const e=function(t){if(!Ga(t))return!1;const n=t;return!(!Sb(n.lineNumber)&&!dc(n.lineNumber)||!pl(n.at)&&!dc(n.at))};i.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(Bw||(Bw={}));class zH{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(ki).getFocusedCodeEditor();return r&&r.hasTextFocus()?this._runEditorCommand(t,r,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const r=document.activeElement;return r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0?(this.runDOMCommand(),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const r=t.get(ki).getActiveCodeEditor();return r?(r.focus(),this._runEditorCommand(t,r,n)):!1})}_runEditorCommand(e,t,n){const r=this.runEditorCommand(e,t,n);return r||!0}}var Go;(function(i){class e extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,[os.moveTo(y,y.getPrimaryCursorState(),this._inSelectionMode,E.position,E.viewPosition)]),y.revealPrimaryCursor(E.source,!0)}}i.MoveTo=nt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=nt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends go{runCoreEditorCommand(y,E){y.model.pushStackElement();const A=this._getColumnSelectResult(y,y.getPrimaryCursorState(),y.getCursorColumnSelectData(),E);y.setCursorStates(E.source,3,A.viewStates.map(N=>Bn.fromViewState(N))),y.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:A.fromLineNumber,fromViewVisualColumn:A.fromVisualColumn,toViewLineNumber:A.toLineNumber,toViewVisualColumn:A.toVisualColumn}),A.reversed?y.revealTopMostCursor(E.source):y.revealBottomMostCursor(E.source)}}i.ColumnSelect=nt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(S,y,E,A){const N=S.model.validatePosition(A.position),V=S.coordinatesConverter.validateViewPosition(new Le(A.viewPosition.lineNumber,A.viewPosition.column),N);let R=A.doColumnSelect?E.fromViewLineNumber:V.lineNumber,M=A.doColumnSelect?E.fromViewVisualColumn:A.mouseColumn-1;return S1.columnSelect(S.cursorConfig,S,R,M,V.lineNumber,A.mouseColumn-1)}}),i.CursorColumnSelectLeft=nt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(S,y,E,A){return S1.columnSelectLeft(S.cursorConfig,S,E)}}),i.CursorColumnSelectRight=nt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(S,y,E,A){return S1.columnSelectRight(S.cursorConfig,S,E)}});class n extends t{constructor(y){super(y),this._isPaged=y.isPaged}_getColumnSelectResult(y,E,A,N){return S1.columnSelectUp(y.cursorConfig,y,A,this._isPaged)}}i.CursorColumnSelectUp=nt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=nt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3595,linux:{primary:0}}}));class r extends t{constructor(y){super(y),this._isPaged=y.isPaged}_getColumnSelectResult(y,E,A,N){return S1.columnSelectDown(y.cursorConfig,y,A,this._isPaged)}}i.CursorColumnSelectDown=nt(new r({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=nt(new r({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends go{constructor(){super({id:"cursorMove",precondition:void 0,description:u3.description})}runCoreEditorCommand(y,E){const A=u3.parse(E);A&&this._runCursorMove(y,E.source,A)}_runCursorMove(y,E,A){y.model.pushStackElement(),y.setCursorStates(E,3,o._move(y,y.getCursorStates(),A)),y.revealPrimaryCursor(E,!0)}static _move(y,E,A){const N=A.select,V=A.value;switch(A.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return os.simpleMove(y,E,A.direction,N,V,A.unit);case 11:case 13:case 12:case 14:return os.viewportMove(y,E,A.direction,N,V);default:return null}}}i.CursorMoveImpl=o,i.CursorMove=nt(new o);class s extends go{constructor(y){super(y),this._staticArgs=y.args}runCoreEditorCommand(y,E){let A=this._staticArgs;this._staticArgs.value===-1&&(A={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:y.cursorConfig.pageSize}),y.model.pushStackElement(),y.setCursorStates(E.source,3,os.simpleMove(y,y.getCursorStates(),A.direction,A.select,A.value,A.unit)),y.revealPrimaryCursor(E.source,!0)}}i.CursorLeft=nt(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=nt(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1039}})),i.CursorRight=nt(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=nt(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1041}})),i.CursorUp=nt(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=nt(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=nt(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:11}})),i.CursorPageUpSelect=nt(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1035}})),i.CursorDown=nt(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=nt(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=nt(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:12}})),i.CursorPageDownSelect=nt(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1036}})),i.CreateCursor=nt(new class extends go{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(S,y){let E;y.wholeLine?E=os.line(S,S.getPrimaryCursorState(),!1,y.position,y.viewPosition):E=os.moveTo(S,S.getPrimaryCursorState(),!1,y.position,y.viewPosition);const A=S.getCursorStates();if(A.length>1){const N=E.modelState?E.modelState.position:null,V=E.viewState?E.viewState.position:null;for(let R=0,M=A.length;R<M;R++){const K=A[R];if(!(N&&!K.modelState.selection.containsPosition(N))&&!(V&&!K.viewState.selection.containsPosition(V))){A.splice(R,1),S.model.pushStackElement(),S.setCursorStates(y.source,3,A);return}}}A.push(E),S.model.pushStackElement(),S.setCursorStates(y.source,3,A)}}),i.LastCursorMoveToSelect=nt(new class extends go{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(S,y){const E=S.getLastAddedCursorIndex(),A=S.getCursorStates(),N=A.slice(0);N[E]=os.moveTo(S,A[E],!0,y.position,y.viewPosition),S.model.pushStackElement(),S.setCursorStates(y.source,3,N)}});class a extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,os.moveToBeginningOfLine(y,y.getCursorStates(),this._inSelectionMode)),y.revealPrimaryCursor(E.source,!0)}}i.CursorHome=nt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=nt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class u extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,this._exec(y.getCursorStates())),y.revealPrimaryCursor(E.source,!0)}_exec(y){const E=[];for(let A=0,N=y.length;A<N;A++){const V=y[A],R=V.modelState.position.lineNumber;E[A]=Bn.fromModelState(V.modelState.move(this._inSelectionMode,R,1,0))}return E}}i.CursorLineStart=nt(new u({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=nt(new u({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:0,mac:{primary:1311}}}));class d extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,os.moveToEndOfLine(y,y.getCursorStates(),this._inSelectionMode,E.sticky||!1)),y.revealPrimaryCursor(E.source,!0)}}i.CursorEnd=nt(new d({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:_i,kbExpr:de.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=nt(new d({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:_i,kbExpr:de.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:C("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class h extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,this._exec(y,y.getCursorStates())),y.revealPrimaryCursor(E.source,!0)}_exec(y,E){const A=[];for(let N=0,V=E.length;N<V;N++){const R=E[N],M=R.modelState.position.lineNumber,K=y.model.getLineMaxColumn(M);A[N]=Bn.fromModelState(R.modelState.move(this._inSelectionMode,M,K,0))}return A}}i.CursorLineEnd=nt(new h({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=nt(new h({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:0,mac:{primary:1315}}}));class f extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,os.moveToBeginningOfBuffer(y,y.getCursorStates(),this._inSelectionMode)),y.revealPrimaryCursor(E.source,!0)}}i.CursorTop=nt(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=nt(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3086,mac:{primary:3088}}}));class p extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,os.moveToEndOfBuffer(y,y.getCursorStates(),this._inSelectionMode)),y.revealPrimaryCursor(E.source,!0)}}i.CursorBottom=nt(new p({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=nt(new p({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:3085,mac:{primary:3090}}}));class m extends go{constructor(){super({id:"editorScroll",precondition:void 0,description:c3.description})}runCoreEditorCommand(y,E){const A=c3.parse(E);A&&this._runEditorScroll(y,E.source,A)}_runEditorScroll(y,E,A){const N=this._computeDesiredScrollTop(y,A);if(A.revealCursor){const V=y.getCompletelyVisibleViewRangeAtScrollTop(N);y.setCursorStates(E,3,[os.findPositionInViewportIfOutside(y,y.getPrimaryCursorState(),V,A.select)])}y.setScrollTop(N,0)}_computeDesiredScrollTop(y,E){if(E.unit===1){const V=y.getCompletelyVisibleViewRange(),R=y.coordinatesConverter.convertViewRangeToModelRange(V);let M;E.direction===1?M=Math.max(1,R.startLineNumber-E.value):M=Math.min(y.model.getLineCount(),R.startLineNumber+E.value);const K=y.coordinatesConverter.convertModelPositionToViewPosition(new Le(M,1));return y.getVerticalOffsetForLineNumber(K.lineNumber)}let A;E.unit===3?A=y.cursorConfig.pageSize*E.value:E.unit===4?A=Math.round(y.cursorConfig.pageSize/2)*E.value:A=E.value;const N=(E.direction===1?-1:1)*A;return y.getScrollTop()+N*y.cursorConfig.lineHeight}}i.EditorScrollImpl=m,i.EditorScroll=nt(new m),i.ScrollLineUp=nt(new class extends go{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:1,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageUp=nt(new class extends go{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:1,unit:3,value:1,revealCursor:!1,select:!1})}}),i.ScrollLineDown=nt(new class extends go{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:2,unit:2,value:1,revealCursor:!1,select:!1})}}),i.ScrollPageDown=nt(new class extends go{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(S,y){i.EditorScroll._runEditorScroll(S,y.source,{direction:2,unit:3,value:1,revealCursor:!1,select:!1})}});class v extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,[os.word(y,y.getPrimaryCursorState(),this._inSelectionMode,E.position)]),y.revealPrimaryCursor(E.source,!0)}}i.WordSelect=nt(new v({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=nt(new v({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=nt(new class extends go{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(S,y){const E=S.getLastAddedCursorIndex(),A=S.getCursorStates(),N=A.slice(0),V=A[E];N[E]=os.word(S,V,V.modelState.hasSelection(),y.position),S.model.pushStackElement(),S.setCursorStates(y.source,3,N)}});class b extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){y.model.pushStackElement(),y.setCursorStates(E.source,3,[os.line(y,y.getPrimaryCursorState(),this._inSelectionMode,E.position,E.viewPosition)]),y.revealPrimaryCursor(E.source,!1)}}i.LineSelect=nt(new b({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=nt(new b({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class L extends go{constructor(y){super(y),this._inSelectionMode=y.inSelectionMode}runCoreEditorCommand(y,E){const A=y.getLastAddedCursorIndex(),N=y.getCursorStates(),V=N.slice(0);V[A]=os.line(y,N[A],this._inSelectionMode,E.position,E.viewPosition),y.model.pushStackElement(),y.setCursorStates(E.source,3,V)}}i.LastCursorLineSelect=nt(new L({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=nt(new L({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=nt(new class extends go{constructor(){super({id:"cancelSelection",precondition:de.hasNonEmptySelection,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates(y.source,3,[os.cancelSelection(S,S.getPrimaryCursorState())]),S.revealPrimaryCursor(y.source,!0)}}),i.RemoveSecondaryCursors=nt(new class extends go{constructor(){super({id:"removeSecondaryCursors",precondition:de.hasMultipleSelections,kbOpts:{weight:_i+1,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates(y.source,3,[S.getPrimaryCursorState()]),S.revealPrimaryCursor(y.source,!0),EF(C("removedCursor","Removed secondary cursors"))}}),i.RevealLine=nt(new class extends go{constructor(){super({id:"revealLine",precondition:void 0,description:Bw.description})}runCoreEditorCommand(S,y){const E=y,A=E.lineNumber||0;let N=typeof A=="number"?A+1:parseInt(A)+1;N<1&&(N=1);const V=S.model.getLineCount();N>V&&(N=V);const R=new Q(N,1,N,S.model.getLineMaxColumn(N));let M=0;if(E.at)switch(E.at){case Bw.RawAtArgument.Top:M=3;break;case Bw.RawAtArgument.Center:M=1;break;case Bw.RawAtArgument.Bottom:M=4;break}const K=S.coordinatesConverter.convertModelRangeToViewRange(R);S.revealRange(y.source,!1,K,M,0)}}),i.SelectAll=new class extends zH{constructor(){super(fxe)}runDOMCommand(){yl&&(document.activeElement.focus(),document.activeElement.select()),document.execCommand("selectAll")}runEditorCommand(S,y,E){const A=y._getViewModel();A&&this.runCoreEditorCommand(A,E)}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates("keyboard",3,[os.selectAll(S,S.getPrimaryCursorState())])}},i.SetSelection=nt(new class extends go{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(S,y){S.model.pushStackElement(),S.setCursorStates(y.source,3,[Bn.fromModelSelection(y.selection)])}})})(Go||(Go={}));const vAe=_t.and(de.textInputFocus,de.columnSelection);function US(i,e){Os.registerKeybindingRule({id:i,primary:e,when:vAe,weight:_i+1})}US(Go.CursorColumnSelectLeft.id,1039);US(Go.CursorColumnSelectRight.id,1041);US(Go.CursorColumnSelectUp.id,1040);US(Go.CursorColumnSelectPageUp.id,1035);US(Go.CursorColumnSelectDown.id,1042);US(Go.CursorColumnSelectPageDown.id,1036);function uee(i){return i.register(),i}var _y;(function(i){class e extends Ps{runEditorCommand(n,r,o){const s=r._getViewModel();s&&this.runCoreEditingCommand(r,s,o||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=nt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:de.writable,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,xr.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection)))}}),i.Outdent=nt(new class extends e{constructor(){super({id:"outdent",precondition:de.writable,kbOpts:{weight:_i,kbExpr:_t.and(de.editorTextFocus,de.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,xr.outdent(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),i.Tab=nt(new class extends e{constructor(){super({id:"tab",precondition:de.writable,kbOpts:{weight:_i,kbExpr:_t.and(de.editorTextFocus,de.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,r){t.pushUndoStop(),t.executeCommands(this.id,xr.tab(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=nt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,r){const[o,s]=Mb.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(2)}}),i.DeleteRight=nt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:_i,kbExpr:de.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,r){const[o,s]=Mb.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,s),n.setPrevEditOperationType(3)}}),i.Undo=new class extends zH{constructor(){super(kue)}runDOMCommand(){document.execCommand("undo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().undo()}},i.Redo=new class extends zH{constructor(){super(Tue)}runDOMCommand(){document.execCommand("redo")}runEditorCommand(t,n,r){if(!(!n.hasModel()||n.getOption(80)===!0))return n.getModel().redo()}}})(_y||(_y={}));class cee extends y8{constructor(e,t,n){super({id:e,precondition:void 0,description:n}),this._handlerId=t}runCommand(e,t){const n=e.get(ki).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function LC(i,e){uee(new cee("default:"+i,i)),uee(new cee(i,i,e))}LC("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});LC("replacePreviousChar");LC("compositionType");LC("compositionStart");LC("compositionEnd");LC("paste");LC("cut");class bAe{constructor(e,t,n,r){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=r}paste(e,t,n,r){this.commandDelegate.paste(e,t,n,r)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,r){this.commandDelegate.compositionType(e,t,n,r)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Go.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Le(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(69)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Xa&&t.get(95),r=t.get(18);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position):this._lastCursorLineSelect(e.position):e.inSelectionMode?this._lineSelectDrag(e.position):this._lineSelect(e.position):e.mouseDownCount===2?this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position):e.inSelectionMode?this._wordSelectDrag(e.position):this._wordSelect(e.position):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):r?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position):this.moveTo(e.position)}_usualArgs(e){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e}}moveTo(e){Go.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_moveToSelect(e){Go.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Go.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Go.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e){Go.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelect(e){Go.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_wordSelectDrag(e){Go.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorWordSelect(e){Go.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelect(e){Go.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lineSelectDrag(e){Go.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelect(e){Go.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_lastCursorLineSelectDrag(e){Go.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e))}_selectAll(){Go.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class G8{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown&&this.onKeyDown(e)}emitKeyUp(e){this.onKeyUp&&this.onKeyUp(e)}emitContextMenu(e){this.onContextMenu&&this.onContextMenu(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove&&this.onMouseMove(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave&&this.onMouseLeave(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown&&this.onMouseDown(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp&&this.onMouseUp(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag&&this.onMouseDrag(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop&&this.onMouseDrop(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled&&this.onMouseDropCanceled()}emitMouseWheel(e){this.onMouseWheel&&this.onMouseWheel(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return G8.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){return new CAe(e.element,e.type,e.mouseColumn,e.position?t.convertViewPositionToModelPosition(e.position):null,e.range?t.convertViewRangeToModelRange(e.range):null,e.detail)}}class CAe{constructor(e,t,n,r,o,s){this.element=e,this.type=t,this.mouseColumn=n,this.position=r,this.range=o,this.detail=s}toString(){return Dh.toString(this)}}var J9;class dde{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Error("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),r=this.getEndLineNumber();if(t<n){const u=t-e+1;return this._rendLineNumberStart-=u,null}if(e>r)return null;let o=0,s=0;for(let u=n;u<=r;u++){const d=u-this._rendLineNumberStart;e<=u&&u<=t&&(s===0?(o=d,s=1):s++)}if(e<n){let u=0;t<n?u=t-e+1:u=n-e,this._rendLineNumberStart-=u}return this._lines.splice(o,s)}onLinesChanged(e,t){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let s=e;s<=t;s++)s>=n&&s<=r&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,r=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=r)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const s=[];for(let f=0;f<n;f++)s[f]=this._createLine();const a=e-this._rendLineNumberStart,u=this._lines.slice(0,a),d=this._lines.slice(a,this._lines.length-n),h=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=u.concat(s).concat(d),h}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let r=!1;for(let o=0,s=e.length;o<s;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const u=Math.max(t,a.fromLineNumber),d=Math.min(n,a.toLineNumber);for(let h=u;h<=d;h++){const f=h-this._rendLineNumberStart;this._lines[f].onTokensChanged(),r=!0}}return r}}class hde{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new dde(()=>this._host.createVisibleLine())}_createDomNode(){const e=ri(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(130)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,r=t.length;n<r;n++){const o=t[n].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new op(this.domNode.domNode,this._host,e),r={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(r,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}class op{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,r){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let s=t;s<=n;s++)o.lines[s-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,r),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),r,t),o.rendLineNumberStart>t){const s=t,a=Math.min(n,o.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(o,s,a,r,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart<t){const s=Math.min(o.linesLength,t-o.rendLineNumberStart);s>0&&(this._removeLinesBefore(o,s),o.linesLength-=s)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){const s=o.rendLineNumberStart+o.linesLength,a=n;s<=a&&(this._insertLinesAfter(o,s,a,r,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){const s=Math.max(0,n-o.rendLineNumberStart+1),u=o.linesLength-1-s+1;u>0&&(this._removeLinesAfter(o,u),o.linesLength-=u)}return this._finishRendering(o,!1,r),o}_renderUntouchedLines(e,t,n,r,o){const s=e.rendLineNumberStart,a=e.lines;for(let u=t;u<=n;u++){const d=s+u;a[u].layoutLine(d,r[d-o])}}_insertLinesBefore(e,t,n,r,o){const s=[];let a=0;for(let u=t;u<=n;u++)s[a++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const r=e.lines[n].getDomNode();r&&this.domNode.removeChild(r)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,r,o){const s=[];let a=0;for(let u=t;u<=n;u++)s[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let r=0;r<t;r++){const o=e.lines[n+r].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,r){op._ttPolicy&&(n=op._ttPolicy.createHTML(n));const o=this.domNode.lastChild;t||!o?this.domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let s=this.domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const u=e.lines[a];r[a]&&(u.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const r=document.createElement("div");op._ttPolicy&&(t=op._ttPolicy.createHTML(t)),r.innerHTML=t;for(let o=0;o<e.linesLength;o++){const s=e.lines[o];if(n[o]){const a=r.firstChild,u=s.getDomNode();u.parentNode.replaceChild(a,u),s.setDomNode(a)}}}_finishRendering(e,t,n){const r=op._sb,o=e.linesLength,s=e.lines,a=e.rendLineNumberStart,u=[];{r.reset();let d=!1;for(let h=0;h<o;h++){const f=s[h];u[h]=!1,!(f.getDomNode()||!f.renderLine(h+a,n[h],this.viewportData,r))&&(u[h]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,r.build(),u)}{r.reset();let d=!1;const h=[];for(let f=0;f<o;f++){const p=s[f];h[f]=!1,!(u[f]||!p.renderLine(f+a,n[f],this.viewportData,r))&&(h[f]=!0,d=!0)}d&&this._finishRenderingInvalidLines(e,r.build(),h)}}}op._ttPolicy=(J9=window.trustedTypes)===null||J9===void 0?void 0:J9.createPolicy("editorViewLayer",{createHTML:i=>i});op._sb=Tb(1e5);class fde extends Cc{constructor(e){super(e),this._visibleLines=new hde(this),this.domNode=this._visibleLines.domNode,this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new wAe(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onConfigurationChanged(e);return!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,r=t.length;n<r;n++){const o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class wAe{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(58),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=ri(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(58)}renderLine(e,t,n,r){let o="";for(let s=0,a=this._dynamicOverlays.length;s<a;s++){const u=this._dynamicOverlays[s];o+=u.render(n.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendASCIIString('<div style="position:absolute;top:'),r.appendASCIIString(String(t)),r.appendASCIIString("px;width:100%;height:"),r.appendASCIIString(String(this._lineHeight)),r.appendASCIIString('px;">'),r.appendASCIIString(o),r.appendASCIIString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class yAe extends fde{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class SAe extends fde{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Na.applyFontInfo(this.domNode,t.get(43))}onConfigurationChanged(e){const t=this._context.configuration.options;Na.applyFontInfo(this.domNode,t.get(43));const n=t.get(130);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class NN{constructor(e,t){this._coordinateBrand=void 0,this.top=e,this.left=t}}class LAe extends Cc{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=ri(document.createElement("div")),lg.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=ri(document.createElement("div")),lg.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onLineMappingChanged(e);return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}addWidget(e){const t=new EAe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n){this._widgets[e.getId()].setPosition(t,n),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const r=n.domNode.domNode;r.parentNode.removeChild(r),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}let EAe=class{constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=ri(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const r=this._context.configuration.options,o=r.get(130);this._fixedOverflowWidgets=r.get(36),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=r.get(58),this._range=null,this._viewRange=null,this._preference=[],this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(58),e.hasChanged(130)){const n=t.get(130);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}onLineMappingChanged(e){this._setPosition(this._range)}_setPosition(e){if(this._range=e,this._viewRange=null,this._range){const t=this._context.model.validateModelRange(this._range);(this._context.model.coordinatesConverter.modelPositionIsVisible(t.getStartPosition())||this._context.model.coordinatesConverter.modelPositionIsVisible(t.getEndPosition()))&&(this._viewRange=this._context.model.coordinatesConverter.convertModelRangeToViewRange(t))}}_getMaxWidth(){return this.allowEditorOverflow?window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:this._contentWidth}setPosition(e,t){this._setPosition(e),this._preference=t,this._viewRange&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeClientWidth=-1,this._cachedDomNodeClientHeight=-1}_layoutBoxInViewport(e,t,n,r,o){const s=e.top,a=s,u=t.top+this._lineHeight,d=o.viewportHeight-u,h=s-r,f=a>=r,p=u,m=d>=r;let v=e.left,b=t.left;return v+n>o.scrollLeft+o.viewportWidth&&(v=o.scrollLeft+o.viewportWidth-n),b+n>o.scrollLeft+o.viewportWidth&&(b=o.scrollLeft+o.viewportWidth-n),v<o.scrollLeft&&(v=o.scrollLeft),b<o.scrollLeft&&(b=o.scrollLeft),{fitsAbove:f,aboveTop:h,aboveLeft:v,fitsBelow:m,belowTop:p,belowLeft:b}}_layoutHorizontalSegmentInPage(e,t,n,r){const o=Math.max(0,t.left-r),s=Math.min(t.left+t.width+r,e.width);let a=t.left+n-mp.scrollX;if(a+r>s){const u=a-(s-r);a-=u,n-=u}if(a<o){const u=a-o;a-=u,n-=u}return[n,a]}_layoutBoxInPage(e,t,n,r,o){const s=e.top-r,a=t.top+this._lineHeight,u=Us(this._viewDomNode.domNode),d=u.top+s-mp.scrollY,h=u.top+a-mp.scrollY,f=c8(document.body),[p,m]=this._layoutHorizontalSegmentInPage(f,u,e.left-o.scrollLeft+this._contentLeft,n),[v,b]=this._layoutHorizontalSegmentInPage(f,u,t.left-o.scrollLeft+this._contentLeft,n),L=22,S=22,y=d>=L,E=h+r<=f.height-S;return this._fixedOverflowWidgets?{fitsAbove:y,aboveTop:Math.max(d,L),aboveLeft:m,fitsBelow:E,belowTop:h,belowLeft:b}:{fitsAbove:y,aboveTop:s,aboveLeft:p,fitsBelow:E,belowTop:a,belowLeft:v}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new NN(e.top,e.left+this._contentLeft)}_getTopAndBottomLeft(e){if(!this._viewRange)return[null,null];const t=e.linesVisibleRangesForRange(this._viewRange,!1);if(!t||t.length===0)return[null,null];let n=t[0],r=t[0];for(const f of t)f.lineNumber<n.lineNumber&&(n=f),f.lineNumber>r.lineNumber&&(r=f);let o=1073741824;for(const f of n.ranges)f.left<o&&(o=f.left);let s=1073741824;for(const f of r.ranges)f.left<s&&(s=f.left);const a=e.getVerticalOffsetForLineNumber(n.lineNumber)-e.scrollTop,u=new NN(a,o),d=e.getVerticalOffsetForLineNumber(r.lineNumber)-e.scrollTop,h=new NN(d,s);return[u,h]}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const[t,n]=this._getTopAndBottomLeft(e);if(!t||!n)return null;if(this._cachedDomNodeClientWidth===-1||this._cachedDomNodeClientHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=e6(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeClientWidth=o.width,this._cachedDomNodeClientHeight=o.height;else{const s=this.domNode.domNode;this._cachedDomNodeClientWidth=s.clientWidth,this._cachedDomNodeClientHeight=s.clientHeight}}let r;this.allowEditorOverflow?r=this._layoutBoxInPage(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e):r=this._layoutBoxInViewport(t,n,this._cachedDomNodeClientWidth,this._cachedDomNodeClientHeight,e);for(let o=1;o<=2;o++)for(const s of this._preference)if(s===1){if(!r)return null;if(o===2||r.fitsAbove)return{coordinate:new NN(r.aboveTop,r.aboveLeft),position:1}}else if(s===2){if(!r)return null;if(o===2||r.fitsBelow)return{coordinate:new NN(r.belowTop,r.belowLeft),position:2}}else return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(t),position:0}:{coordinate:t,position:0};return null}onBeforeRender(e){!this._viewRange||!this._preference||this._viewRange.endLineNumber<e.startLineNumber||this._viewRange.startLineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&e6(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&e6(this._actual.afterRender,this._actual,this._renderData.position)}};function e6(i,e,...t){try{return i.call(e,...t)}catch{return null}}let UH=!0;class gde extends zS{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new yt(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=UH?this._selections.slice(0,1):this._selections,n=t.map(o=>o.positionLineNumber);n.sort((o,s)=>o-s),oc(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const r=t.every(o=>o.isEmpty());return this._selectionIsEmpty!==r&&(this._selectionIsEmpty=r,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._renderLineHighlight=t.get(84),this._renderLineHighlightOnlyWhenFocus=t.get(85),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=this._renderOne(e),n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o=this._cursorLineNumbers.length;let s=0;const a=[];for(let u=n;u<=r;u++){const d=u-n;for(;s<o&&this._cursorLineNumbers[s]<u;)s++;s<o&&this._cursorLineNumbers[s]===u?a[d]=t:a[d]=""}this._renderData=a}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}}class xAe extends gde{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderOther()?" current-line-both":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px; height:${this._lineHeight}px;"></div>`}_shouldRenderThis(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderOther(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class DAe extends gde{_renderOne(e){return`<div class="${"current-line"+(this._shouldRenderMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")}" style="width:${this._contentLeft}px; height:${this._lineHeight}px;"></div>`}_shouldRenderMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderThis(){return!0}_shouldRenderOther(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}hr((i,e)=>{UH=!1;const t=i.getColor(n2e);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(QJ)){const n=i.getColor(QJ);n&&(UH=!0,e.addRule(`.monaco-editor .view-overlays .current-line { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid ${n}; }`),i.type==="hc"&&(e.addRule(".monaco-editor .view-overlays .current-line { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-margin { border-width: 1px; }")))}});class IAe extends zS{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let u=0,d=t.length;u<d;u++){const h=t[u];h.options.className&&(n[r++]=h)}n=n.sort((u,d)=>{if(u.options.zIndex<d.options.zIndex)return-1;if(u.options.zIndex>d.options.zIndex)return 1;const h=u.options.className,f=d.options.className;return h<f?-1:h>f?1:Q.compareRangesUsingStarts(u.range,d.range)});const o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,a=[];for(let u=o;u<=s;u++){const d=u-o;a[d]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const r=String(this._lineHeight),o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let a=0,u=t.length;a<u;a++){const d=t[a];if(!d.options.isWholeLine)continue;const h='<div class="cdr '+d.options.className+'" style="left:0;width:100%;height:'+r+'px;"></div>',f=Math.max(d.range.startLineNumber,o),p=Math.min(d.range.endLineNumber,s);for(let m=f;m<=p;m++){const v=m-o;n[v]+=h}}}_renderNormalDecorations(e,t,n){const r=String(this._lineHeight),o=e.visibleRange.startLineNumber;let s=null,a=!1,u=null;for(let d=0,h=t.length;d<h;d++){const f=t[d];if(f.options.isWholeLine)continue;const p=f.options.className,m=!!f.options.showIfCollapsed;let v=f.range;if(m&&v.endColumn===1&&v.endLineNumber!==v.startLineNumber&&(v=new Q(v.startLineNumber,v.startColumn,v.endLineNumber-1,this._context.model.getLineMaxColumn(v.endLineNumber-1))),s===p&&a===m&&Q.areIntersectingOrTouching(u,v)){u=Q.plusRange(u,v);continue}s!==null&&this._renderNormalDecoration(e,u,s,a,r,o,n),s=p,a=m,u=v}s!==null&&this._renderNormalDecoration(e,u,s,a,r,o,n)}_renderNormalDecoration(e,t,n,r,o,s,a){const u=e.linesVisibleRangesForRange(t,n==="findMatch");if(u)for(let d=0,h=u.length;d<h;d++){const f=u[d];if(f.outsideRenderedLine)continue;const p=f.lineNumber-s;if(r&&f.ranges.length===1){const m=f.ranges[0];if(m.width<this._typicalHalfwidthCharacterWidth){const v=Math.round(m.left+m.width/2),b=Math.max(0,Math.round(v-this._typicalHalfwidthCharacterWidth/2));f.ranges[0]=new N8(b,this._typicalHalfwidthCharacterWidth)}}for(let m=0,v=f.ranges.length;m<v;m++){const b=f.ranges[m],L='<div class="cdr '+n+'" style="left:'+String(b.left)+"px;width:"+String(b.width)+"px;height:"+o+'px;"></div>';a[p]+=L}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Vu extends Oe{onclick(e,t){this._register(qe(e,Ht.CLICK,n=>t(new Ju(n))))}onmousedown(e,t){this._register(qe(e,Ht.MOUSE_DOWN,n=>t(new Ju(n))))}onmouseover(e,t){this._register(qe(e,Ht.MOUSE_OVER,n=>t(new Ju(n))))}onnonbubblingmouseout(e,t){this._register(lG(e,n=>t(new Ju(n))))}onkeydown(e,t){this._register(qe(e,Ht.KEY_DOWN,n=>t(new yr(n))))}onkeyup(e,t){this._register(qe(e,Ht.KEY_UP,n=>t(new yr(n))))}oninput(e,t){this._register(qe(e,Ht.INPUT,t))}onblur(e,t){this._register(qe(e,Ht.BLUR,t))}onfocus(e,t){this._register(qe(e,Ht.FOCUS,t))}ignoreGesture(e){Hi.ignoreTarget(e)}}const Xy=11;class kAe extends Vu{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...e.icon.classNamesArray),this.domNode.style.position="absolute",this.domNode.style.width=Xy+"px",this.domNode.style.height=Xy+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._mouseMoveMonitor=this._register(new yC),this.onmousedown(this.bgDomNode,t=>this._arrowMouseDown(t)),this.onmousedown(this.domNode,t=>this._arrowMouseDown(t)),this._mousedownRepeatTimer=this._register(new sM),this._mousedownScheduleRepeatTimer=this._register(new Oa)}_arrowMouseDown(e){const t=()=>{this._mousedownRepeatTimer.cancelAndSet(()=>this._onActivate(),41.666666666666664)};this._onActivate(),this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancelAndSet(t,200),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,VS,n=>{},()=>{this._mousedownRepeatTimer.cancel(),this._mousedownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class TAe extends Oe{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Oa)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode&&this._domNode.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode&&this._domNode.setClassName(this._invisibleClassName+(e?" fade":"")))}}const NAe=140;class pde extends Vu{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new TAe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._mouseMoveMonitor=this._register(new yC),this._shouldRender=!0,this.domNode=ri(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this.onmousedown(this.domNode.domNode,t=>this._domNodeMouseDown(t))}_createArrow(e){const t=this._register(new kAe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,r){this.slider=ri(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this.onmousedown(this.slider.domNode,o=>{o.leftButton&&(o.preventDefault(),this._sliderMouseDown(o,()=>{}))}),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodeMouseDown(e){e.target===this.domNode.domNode&&this._onMouseDown(e)}delegateMouseDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderMousePosition(e);n<=o&&o<=r?e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{})):this._onMouseDown(e)}_onMouseDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.browserEvent.offsetX=="number"&&typeof e.browserEvent.offsetY=="number")t=e.browserEvent.offsetX,n=e.browserEvent.offsetY;else{const o=Us(this.domNode.domNode);t=e.posx-o.left,n=e.posy-o.top}const r=this._mouseDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.leftButton&&(e.preventDefault(),this._sliderMouseDown(e,()=>{}))}_sliderMouseDown(e,t){const n=this._sliderMousePosition(e),r=this._sliderOrthogonalMousePosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._mouseMoveMonitor.startMonitoring(e.target,e.buttons,VS,s=>{const a=this._sliderOrthogonalMousePosition(s),u=Math.abs(a-r);if(As&&u>NAe){this._setDesiredScrollPositionNow(o.getScrollPosition());return}const h=this._sliderMousePosition(s)-n;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(h))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd(),t()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const AAe=20;class BA{constructor(e,t,n,r,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=r,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new BA(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,r,o){const s=Math.max(0,n-e),a=Math.max(0,s-2*t),u=r>0&&r>n;if(!u)return{computedAvailableSize:Math.round(s),computedIsNeeded:u,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const d=Math.round(Math.max(AAe,Math.floor(n*a/r))),h=(a-d)/(r-n),f=o*h;return{computedAvailableSize:Math.round(s),computedIsNeeded:u,computedSliderSize:Math.round(d),computedSliderRatio:h,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){const e=BA._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class OAe extends pde{constructor(e,t,n){const r=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new BA(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const s=(t.arrowSize-Xy)/2,a=(t.horizontalScrollbarSize-Xy)/2;this._createArrow({className:"scra",icon:_e.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Wy(null,1,0))}),this._createArrow({className:"scra",icon:_e.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Wy(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return e}_sliderMousePosition(e){return e.posx}_sliderOrthogonalMousePosition(e){return e.posy}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class MAe extends pde{constructor(e,t,n){const r=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new BA(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const s=(t.arrowSize-Xy)/2,a=(t.verticalScrollbarSize-Xy)/2;this._createArrow({className:"scra",icon:_e.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Wy(null,0,1))}),this._createArrow({className:"scra",icon:_e.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Wy(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_mouseDownRelativePosition(e,t){return t}_sliderMousePosition(e){return e.posy}_sliderOrthogonalMousePosition(e){return e.posx}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class d3{constructor(e,t,n,r,o,s){this._scrollStateBrand=void 0,e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,s=s|0,this.rawScrollLeft=n,this.rawScrollTop=s,e<0&&(e=0),n+e>t&&(n=t-e),n<0&&(n=0),r<0&&(r=0),s+r>o&&(s=o-r),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=n,this.height=r,this.scrollHeight=o,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new d3(typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new d3(this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,r=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,u=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:r,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:u}}}class q8 extends Oe{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new d3(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let r;t?r=new WA(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=WA.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class dee{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function t6(i,e){const t=e-i;return function(n){return i+t*FAe(n)}}function RAe(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class WA{constructor(e,t,n,r){this.from=e,this.to=t,this.duration=r,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,s;return e<t?(o=e+.75*n,s=t-.75*n):(o=e-.75*n,s=t+.75*n),RAe(t6(e,o),t6(s,t),.33)}return t6(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),r=this.scrollTop(t);return new dee(n,r,!1)}return new dee(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return WA.start(e,t,n)}static start(e,t,n){n=n+10;const r=Date.now()-10;return new WA(e,t,r,n)}}function PAe(i){return Math.pow(i,3)}function FAe(i){return 1-PAe(1-i)}const BAe=500,hee=50;class WAe{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class jH{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,r=this._rear;do{const o=r===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[r].score*o,r===this._front)break;r=(this._capacity+r-1)%this._capacity,n++}while(!0);return t<=.5}accept(e,t,n){const r=new WAe(e,t,n);r.score=this._computeScore(r),this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;return this._front===-1&&this._rear===-1||this._memory[this._rear],(!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}jH.INSTANCE=new jH;class mde extends Vu{constructor(e,t,n){super(),this._onScroll=this._register(new be),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new be),e.style.overflow="hidden",this._options=VAe(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const r={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new MAe(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new OAe(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ri(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ri(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ri(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onnonbubblingmouseout(this._listenOnDomNode,o=>this._onMouseOut(o)),this._hideTimeout=this._register(new Oa),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=oi(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarMouseDown(e){this._verticalScrollbar.delegateMouseDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,qn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=oi(this._mouseWheelToDispose),e)){const n=r=>{this._onMouseWheel(new Wy(r))};this._mouseWheelToDispose.push(qe(this._listenOnDomNode,Ht.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){const t=jH.INSTANCE;{const o=window.devicePixelRatio/Rle();As||Xa?t.accept(Date.now(),e.deltaX/o,e.deltaY/o):t.accept(Date.now(),e.deltaX,e.deltaY)}let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);const a=!qn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const u=this._scrollable.getFutureScrollPosition();let d={};if(o){const h=hee*o,f=u.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(d,f)}if(s){const h=hee*s,f=u.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(d,f)}d=this._scrollable.validateScrollPosition(d),(u.scrollLeft!==d.scrollLeft||u.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let r=n;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,r=n?" left":"",o=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseOut(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),BAe)}}class lq extends mde{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new q8(0,r=>og(r));super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class uq extends mde{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class pM extends lq{constructor(e,t){super(e,t),this._element=e,this.onScroll(n=>{n.scrollTopChanged&&(this._element.scrollTop=n.scrollTop),n.scrollLeftChanged&&(this._element.scrollLeft=n.scrollLeft)}),this.scanDomNode()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function VAe(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,qn&&(e.className+=" mac"),e}class HAe extends Cc{constructor(e,t,n,r){super(e);const o=this._context.configuration.options,s=o.get(91),a=o.get(66),u=o.get(34),d=o.get(94),h={listenOnDomNode:n.domNode,className:"editor-scrollable "+PF(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:u,scrollPredominantAxis:d,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new uq(t.domNode,h,this._context.viewLayout.getScrollable())),lg.write(this.scrollbar.getDomNode(),5),this.scrollbarDomNode=ri(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const f=(p,m,v)=>{const b={};if(m){const L=p.scrollTop;L&&(b.scrollTop=this._context.viewLayout.getCurrentScrollTop()+L,p.scrollTop=0)}if(v){const L=p.scrollLeft;L&&(b.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+L,p.scrollLeft=0)}this._context.model.setScrollPosition(b,1)};this._register(qe(n.domNode,"scroll",p=>f(n.domNode,!0,!0))),this._register(qe(t.domNode,"scroll",p=>f(t.domNode,!0,!1))),this._register(qe(r.domNode,"scroll",p=>f(r.domNode,!0,!1))),this._register(qe(this.scrollbarDomNode.domNode,"scroll",p=>f(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(130);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(64).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarMouseDown(e){this.scrollbar.delegateVerticalScrollbarMouseDown(e)}onConfigurationChanged(e){if(e.hasChanged(91)||e.hasChanged(66)||e.hasChanged(34)){const t=this._context.configuration.options,n=t.get(91),r=t.get(66),o=t.get(34),s=t.get(94),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:o,scrollPredominantAxis:s};this.scrollbar.updateOptions(a)}return e.hasChanged(130)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+PF(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}hr((i,e)=>{const t=i.getColor(HS);t&&e.addRule(`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.getColor(cy);n&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const r=i.getColor(dy);r&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${r};
			}
		`);const o=i.getColor(hy);o&&e.addRule(`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`)});class h3{constructor(e,t,n){this._decorationToRenderBrand=void 0,this.startLineNumber=+e,this.endLineNumber=+t,this.className=String(n)}}class cq extends zS{_render(e,t,n){const r=[];for(let a=e;a<=t;a++){const u=a-e;r[u]=[]}if(n.length===0)return r;n.sort((a,u)=>a.className===u.className?a.startLineNumber===u.startLineNumber?a.endLineNumber-u.endLineNumber:a.startLineNumber-u.startLineNumber:a.className<u.className?-1:1);let o=null,s=0;for(let a=0,u=n.length;a<u;a++){const d=n[a],h=d.className;let f=Math.max(d.startLineNumber,e)-e;const p=Math.min(d.endLineNumber,t)-e;o===h?(f=Math.max(s+1,f),s=Math.max(s,p)):(o=h,s=p);for(let m=f;m<=s;m++)r[m].push(o)}return r}}class $Ae extends cq{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._glyphMargin=t.get(49),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.options.glyphMarginClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u))}return n}prepareRender(e){if(!this._glyphMargin){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),o=this._lineHeight.toString(),s=this._glyphMarginLeft.toString(),a=this._glyphMarginWidth.toString(),u='" style="left:'+s+"px;width:"+a+"px;height:"+o+'px;"></div>',d=[];for(let h=t;h<=n;h++){const f=h-t,p=r[f];p.length===0?d[f]="":d[f]='<div class="cgmr codicon '+p.join(" ")+u}this._renderResult=d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class zAe extends zS{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(131),r=t.get(43);this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(131),r=t.get(43);return this._lineHeight=t.get(58),this._spaceWidth=r.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(13),!0}onCursorStateChanged(e){var t;const r=e.selections[0].getPosition();return!((t=this._primaryPosition)===null||t===void 0)&&t.equals(r)?!1:(this._primaryPosition=r,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,r,o;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const s=e.visibleRange.startLineNumber,a=e.visibleRange.endLineNumber,u=e.scrollWidth,d=this._lineHeight,h=this._primaryPosition,f=this.getGuidesByLine(s,a,h),p=[];for(let m=s;m<=a;m++){const v=m-s,b=f[v];let L="";const S=(n=(t=e.visibleRangeForPosition(new Le(m,1)))===null||t===void 0?void 0:t.left)!==null&&n!==void 0?n:0;for(const y of b){const E=S+(y.visibleColumn-1)*this._spaceWidth;if(E>u||this._maxIndentLeft>0&&E>this._maxIndentLeft)break;const A=y.horizontalLine?y.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",N=y.horizontalLine?((o=(r=e.visibleRangeForPosition(new Le(m,y.horizontalLine.endColumn)))===null||r===void 0?void 0:r.left)!==null&&o!==void 0?o:E+this._spaceWidth)-E:this._spaceWidth;L+=`<div class="core-guide ${y.className} ${A}" style="left:${E}px;height:${d}px;width:${N}px"></div>`}p[v]=L}this._renderResult=p}getGuidesByLine(e,t,n){const r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.model.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?J1.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?J1.EnabledForActive:J1.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.model.getLinesIndentGuides(e,t):null;let s=0,a=0,u=0;if(this._bracketPairGuideOptions.highlightActiveIndentation&&n){const f=this._context.model.getActiveIndentGuide(n.lineNumber,e,t);s=f.startLineNumber,a=f.endLineNumber,u=f.indent}const{indentSize:d}=this._context.model.getTextModelOptions(),h=[];for(let f=e;f<=t;f++){const p=new Array;h.push(p);const m=r?r[f-e]:[],v=new ly(m),b=o?o[f-e]:[];for(let L=1;L<=b;L++){const S=(L-1)*d+1,y=m.length===0&&s<=f&&f<=a&&L===u;p.push(...v.takeWhile(A=>A.visibleColumn<S)||[]);const E=v.peek();(!E||E.visibleColumn!==S||E.horizontalLine)&&p.push(new Ow(S,y?"core-guide-indent-active":"core-guide-indent",null))}p.push(...v.takeWhile(L=>!0)||[])}return h}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function $R(i){if(!(i&&i.isTransparent()))return i}hr((i,e)=>{const t=i.getColor(z8);t&&e.addRule(`.monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 ${t} inset; }`);const n=i.getColor(U8)||t;n&&e.addRule(`.monaco-editor .lines-content .core-guide-indent-active { box-shadow: 1px 0 0 0 ${n} inset; }`);const r=[{bracketColor:ede,guideColor:L2e,guideColorActive:T2e},{bracketColor:tde,guideColor:E2e,guideColorActive:N2e},{bracketColor:nde,guideColor:x2e,guideColorActive:A2e},{bracketColor:ide,guideColor:D2e,guideColorActive:O2e},{bracketColor:rde,guideColor:I2e,guideColorActive:M2e},{bracketColor:ode,guideColor:k2e,guideColorActive:R2e}],o=new ade;let s=r.map(a=>{var u,d;const h=i.getColor(a.bracketColor),f=i.getColor(a.guideColor),p=i.getColor(a.guideColorActive),m=$R((u=$R(f))!==null&&u!==void 0?u:h==null?void 0:h.transparent(.3)),v=$R((d=$R(p))!==null&&d!==void 0?d:h);if(!(!m||!v))return{guideColor:m,guideColorActive:v}}).filter(TEe);if(s.length>0){for(let a=0;a<30;a++){const u=s[a%s.length];e.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${u.guideColor}; --guide-color-active: ${u.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}});class UAe{constructor(){this._currentVisibleRange=new Q(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class jAe{constructor(e,t,n,r,o,s){this.lineNumber=e,this.startColumn=t,this.endColumn=n,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=s,this.type="range",this.minLineNumber=e,this.maxLineNumber=e}}class KAe{constructor(e,t,n,r){this.selections=e,this.startScrollTop=t,this.stopScrollTop=n,this.scrollType=r,this.type="selections";let o=e[0].startLineNumber,s=e[0].endLineNumber;for(let a=1,u=e.length;a<u;a++){const d=e[a];o=Math.min(o,d.startLineNumber),s=Math.max(s,d.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=s}}class Y8 extends Cc{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new hde(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,r=this._context.configuration.options,o=r.get(43),s=r.get(131);this._lineHeight=r.get(58),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=r.get(88),this._cursorSurroundingLines=r.get(25),this._cursorSurroundingLinesStyle=r.get(26),this._canUseLayerHinting=!r.get(28),this._viewLineOptions=new vJ(n,this._context.theme.type),lg.write(this.domNode,7),this.domNode.setClassName(`view-lines ${ob}`),Na.applyFontInfo(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new er(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new er(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new UAe,this._horizontalRevealRequest=null}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Ff(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(131)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(43),r=t.get(131);return this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=t.get(88),this._cursorSurroundingLines=t.get(25),this._cursorSurroundingLinesStyle=t.get(26),this._canUseLayerHinting=!t.get(28),Na.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(130)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new vJ(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let o=n;o<=r;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=!1;for(let o=t;o<=n;o++)r=this._visibleLines.getVisibleLine(o).onSelectionChanged()||r;return r}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new jAe(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new KAe(e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.model.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.model.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const r=this._getLineNumberFor(n);if(r===-1||r<1||r>this._context.model.getLineCount())return null;if(this._context.model.getLineMaxColumn(r)===1)return new Le(r,1);const o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(r<o||r>s)return null;let a=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(r,e,t);const u=this._context.model.getLineMinColumn(r);return a<u&&(a=u),new Le(r,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Ff.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let r=t;r<=n;r++){const o=this._visibleLines.getVisibleLine(r);if(e===o.getDomNode())return r}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();return e<t||e>n?-1:this._visibleLines.getVisibleLine(e).getWidth()}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,r=Q.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;let o=[],s=0;const a=new _J(this.domNode.domNode,this._textRangeRestingSpot);let u=0;t&&(u=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Le(r.startLineNumber,1)).lineNumber);const d=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(let f=r.startLineNumber;f<=r.endLineNumber;f++){if(f<d||f>h)continue;const p=f===r.startLineNumber?r.startColumn:1,m=f===r.endLineNumber?r.endColumn:this._context.model.getLineMaxColumn(f),v=this._visibleLines.getVisibleLine(f).getVisibleRangesForRange(f,p,m,a);if(v){if(t&&f<n){const b=u;u=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new Le(f+1,1)).lineNumber,b!==u&&(v.ranges[v.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[s++]=new dke(v.outsideRenderedLine,f,N8.from(v.ranges))}}return s===0?null:o}_visibleRangesForLineRange(e,t,n){return this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,new _J(this.domNode.domNode,this._textRangeRestingSpot))}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new hke(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let r=1,o=!0;for(let s=t;s<=n;s++){const a=this._visibleLines.getVisibleLine(s);if(e&&!a.getWidthIsFast()){o=!1;continue}r=Math.max(r,a.getWidth())}return o&&t===1&&n===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let o=n;o<=r;o++){const s=this._visibleLines.getVisibleLine(o);if(s.needsMonospaceFontCheck()){const a=s.getWidth();a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=r;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const r=this._computeScrollLeftToReveal(n);r&&(this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),this._context.model.setScrollPosition({scrollLeft:r.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),Xa&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let o=n;o<=r;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.model.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,r,o){const s=e.top,a=e.height,u=s+a;let d,h,f;if(r&&r.length>0){let v=r[0].startLineNumber,b=r[0].endLineNumber;for(let L=1,S=r.length;L<S;L++){const y=r[L];v=Math.min(v,y.startLineNumber),b=Math.max(b,y.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(v),f=this._context.viewLayout.getVerticalOffsetForLineNumber(b)+this._lineHeight}else if(n)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(n.startLineNumber),f=this._context.viewLayout.getVerticalOffsetForLineNumber(n.endLineNumber)+this._lineHeight;else return-1;if(!(t==="mouse"&&this._cursorSurroundingLinesStyle==="default")){const v=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);h-=v*this._lineHeight,f+=Math.max(0,v-1)*this._lineHeight}(o===0||o===4)&&(f+=this._lineHeight);let m;if(f-h>a){if(!d)return-1;m=h}else if(o===5||o===6)if(o===6&&s<=h&&f<=u)m=s;else{const v=Math.max(5*this._lineHeight,a*.2),b=h-v,L=f-a;m=Math.max(L,b)}else if(o===1||o===2)if(o===2&&s<=h&&f<=u)m=s;else{const v=(h+f)/2;m=Math.max(0,v-a/2)}else m=this._computeMinimumScrolling(s,u,h,f,o===3,o===4);return m}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=t.left,r=n+t.width;let o=1073741824,s=0;if(e.type==="range"){const u=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!u)return null;for(const d of u.ranges)o=Math.min(o,Math.round(d.left)),s=Math.max(s,Math.round(d.left+d.width))}else for(const u of e.selections){if(u.startLineNumber!==u.endLineNumber)return null;const d=this._visibleRangesForLineRange(u.startLineNumber,u.startColumn,u.endColumn);if(!d)return null;for(const h of d.ranges)o=Math.min(o,Math.round(h.left)),s=Math.max(s,Math.round(h.left+h.width))}return o=Math.max(0,o-Y8.HORIZONTAL_EXTRA_PX),s+=this._revealHorizontalRightPadding,e.type==="selections"&&s-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(n,r,o,s),maxHorizontalOffset:s}}_computeMinimumScrolling(e,t,n,r,o,s){e=e|0,t=t|0,n=n|0,r=r|0,o=!!o,s=!!s;const a=t-e;if(r-n<a){if(o)return n;if(s)return Math.max(0,r-a);if(n<e)return n;if(r>t)return Math.max(0,r-a)}else return n;return e}}Y8.HORIZONTAL_EXTRA_PX=30;class GAe extends cq{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(130);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.options.linesDecorationsClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u));const d=a.options.firstLineDecorationClassName;d&&(n[r++]=new h3(a.range.startLineNumber,a.range.startLineNumber,d))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+s+'px;"></div>',u=[];for(let d=t;d<=n;d++){const h=d-t,f=r[h];let p="";for(let m=0,v=f.length;m<v;m++)p+='<div class="cldr '+f[m]+a;u[h]=p}this._renderResult=u}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class qAe extends cq{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let n=[],r=0;for(let o=0,s=t.length;o<s;o++){const a=t[o],u=a.options.marginClassName;u&&(n[r++]=new h3(a.range.startLineNumber,a.range.endLineNumber,u))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,r=this._render(t,n,this._getDecorations(e)),o=[];for(let s=t;s<=n;s++){const a=s-t,u=r[a];let d="";for(let h=0,f=u.length;h<f;h++)d+='<div class="cmdr '+u[h]+'" style=""></div>';o[a]=d}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class tc{constructor(e,t,n,r){this._rgba8Brand=void 0,this.r=tc._clamp(e),this.g=tc._clamp(t),this.b=tc._clamp(n),this.a=tc._clamp(r)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}}tc.Empty=new tc(0,0,0,0);class mM extends Oe{constructor(){super(),this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Wr.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}static getInstance(){return this._INSTANCE||(this._INSTANCE=new mM),this._INSTANCE}_updateColorMap(){const e=Wr.getColorMap();if(!e){this._colors=[tc.Empty],this._backgroundIsLight=!0;return}this._colors=[tc.Empty];for(let n=1;n<e.length;n++){const r=e[n].rgba;this._colors[n]=new tc(r.r,r.g,r.b,Math.round(r.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}mM._INSTANCE=null;class fee{constructor(e,t,n,r){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=r|0}}class YAe{constructor(e,t){this.tabSize=e,this.data=t}}class dq{constructor(e,t,n,r,o,s,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=r,this.startVisibleColumn=o,this.tokens=s,this.inlineDecorations=a}}class Fu{constructor(e,t,n,r,o,s,a,u,d,h){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=r,this.isBasicASCII=Fu.isBasicASCII(n,s),this.containsRTL=Fu.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=u,this.tabSize=d,this.startVisibleColumn=h}static isBasicASCII(e,t){return t?vG(e):!0}static containsRTL(e,t,n){return!t&&n?g8(e):!1}}class R2{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class ZAe{constructor(e,t,n,r){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=r}toInlineDecoration(e){return new R2(new Q(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class _de{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class vde{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static cmp(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}}const XAe=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),QAe=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:96-1:i);class VA{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=VA.soften(e,12/15),this.charDataLight=VA.soften(e,50/60)}static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let r=0,o=e.length;r<o;r++)n[r]=zF(e[r]*t);return n}renderChar(e,t,n,r,o,s,a,u,d,h,f){const p=1*this.scale,m=2*this.scale,v=f?1:m;if(t+p>e.width||n+v>e.height){console.warn("bad render request outside image data");return}const b=h?this.charDataLight:this.charDataNormal,L=QAe(r,d),S=e.width*4,y=a.r,E=a.g,A=a.b,N=o.r-y,V=o.g-E,R=o.b-A,M=Math.max(s,u),K=e.data;let X=L*p*m,$=n*S+t*4;for(let D=0;D<v;D++){let T=$;for(let F=0;F<p;F++){const B=b[X++]/255*(s/255);K[T++]=y+N*B,K[T++]=E+V*B,K[T++]=A+R*B,K[T++]=M}$+=S}}blockRenderChar(e,t,n,r,o,s,a,u){const d=1*this.scale,h=2*this.scale,f=u?1:h;if(t+d>e.width||n+f>e.height){console.warn("bad render request outside image data");return}const p=e.width*4,m=.5*(o/255),v=s.r,b=s.g,L=s.b,S=r.r-v,y=r.g-b,E=r.b-L,A=v+S*m,N=b+y*m,V=L+E*m,R=Math.max(o,a),M=e.data;let K=n*p+t*4;for(let X=0;X<f;X++){let $=K;for(let D=0;D<d;D++)M[$++]=A,M[$++]=N,M[$++]=V,M[$++]=R;K+=p}}}const gee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},pee=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=gee[i[t]]<<4|gee[i[t+1]]&15;return e},mee={1:Np(()=>pee("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Np(()=>pee("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class P2{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return mee[e]?n=new VA(mee[e](),e):n=P2.createFromSampleData(P2.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let r=0;for(const o of XAe)n.fillText(String.fromCharCode(o),r,16/2),r+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");let r=P2._downsample(e,t);return new VA(r,t)}static _downsampleChar(e,t,n,r,o){const s=1*o,a=2*o;let u=r,d=0;for(let h=0;h<a;h++){const f=h/a*16,p=(h+1)/a*16;for(let m=0;m<s;m++){const v=m/s*10,b=(m+1)/s*10;let L=0,S=0;for(let E=f;E<p;E++){const A=t+Math.floor(E)*3840,N=1-(E-Math.floor(E));for(let V=v;V<b;V++){const R=1-(V-Math.floor(V)),M=A+Math.floor(V)*4,K=R*N;S+=K,L+=e[M]*e[M+3]/255*K}}const y=L/S;d=Math.max(d,y),n[u++]=zF(y)}}return d}static _downsample(e,t){const n=2*t*1*t,r=n*96,o=new Uint8ClampedArray(r);let s=0,a=0,u=0;for(let d=0;d<96;d++)u=Math.max(u,this._downsampleChar(e,a,o,s,t)),s+=n,a+=10*4;if(u>0){const d=255/u;for(let h=0;h<r;h++)o[h]*=d}return o}}const JAe=140,eOe=2;class HA{constructor(e,t,n){const r=e.options,o=r.get(128),s=r.get(130),a=s.minimap,u=r.get(43),d=r.get(64);this.renderMinimap=a.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=r.get(93),this.showSlider=d.showSlider,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=u.typicalHalfwidthCharacterWidth,this.lineHeight=r.get(58),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=s.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Np(()=>P2.create(this.fontScale,u.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=HA._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=HA._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(GIe);return n?new tc(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(qIe);return t?tc._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class F2{constructor(e,t,n,r,o,s,a,u){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=r,this.sliderTop=o,this.sliderHeight=s,this.startLineNumber=a,this.endLineNumber=u}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,n,r,o,s,a,u,d,h,f){const p=e.pixelRatio,m=e.minimapLineHeight,v=Math.floor(e.canvasInnerHeight/m),b=e.lineHeight;if(e.minimapHeightIsEditorHeight){const N=u*e.lineHeight+(e.scrollBeyondLastLine?o-e.lineHeight:0),V=Math.max(1,Math.floor(o*o/N)),R=Math.max(0,e.minimapHeight-V),M=R/(h-o),K=d*M,X=R>0,$=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new F2(d,h,X,M,K,V,1,Math.min(a,$))}let L;if(s&&n!==a){const N=n-t+1;L=Math.floor(N*m/p)}else{const N=o/b;L=Math.floor(N*m/p)}let S;e.scrollBeyondLastLine?S=(a-1)*m/p:S=Math.max(0,a*m/p-L),S=Math.min(e.minimapHeight-L,S);const y=S/(h-o),E=d*y;let A=0;if(e.scrollBeyondLastLine&&(A=o/b-1),v>=a+A){const V=a,R=S>0;return new F2(d,h,R,y,E,L,1,V)}else{let N=Math.max(1,Math.floor(t-E*p/m));f&&f.scrollHeight===h&&(f.scrollTop>d&&(N=Math.min(N,f.startLineNumber)),f.scrollTop<d&&(N=Math.max(N,f.startLineNumber)));const V=Math.min(a,N+v-1),R=(d-r)/b,M=(t-N+R)*m/p;return new F2(d,h,!0,y,M,L,N,V)}}}class f3{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}f3.INVALID=new f3(-1);class _ee{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new dde(()=>f3.INVALID),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let r=0,o=n.length;r<o;r++)if(n[r].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class hq{constructor(e,t,n,r){this._backgroundFillData=hq._createBackgroundFillData(t,n,r),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const r=n.r,o=n.g,s=n.b,a=n.a,u=new Uint8ClampedArray(e*t*4);let d=0;for(let h=0;h<t;h++)for(let f=0;f<e;f++)u[d]=r,u[d+1]=o,u[d+2]=s,u[d+3]=a,d+=4;return u}}class $A{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const r=e.pixelRatio,o=e.lineHeight,s=e.scrollBeyondLastLine,{minimapLineCount:a}=uy.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:s,height:e.editorHeight,lineHeight:o,pixelRatio:r}),u=t/a,d=u/2;if(!n||n.minimapLines.length===0){let E=[];if(E[0]=1,a>1){for(let A=0,N=a-1;A<N;A++)E[A]=Math.round(A*u+d);E[a-1]=t}return[new $A(u,E),[]]}const h=n.minimapLines,f=h.length;let p=[],m=0,v=0,b=1;const L=10;let S=[],y=null;for(let E=0;E<a;E++){const A=Math.max(b,Math.round(E*u)),N=Math.max(A,Math.round((E+1)*u));for(;m<f&&h[m]<A;){if(S.length<L){const R=m+1+v;y&&y.type==="deleted"&&y._oldIndex===m-1?y.deleteToLineNumber++:(y={type:"deleted",_oldIndex:m,deleteFromLineNumber:R,deleteToLineNumber:R},S.push(y)),v--}m++}let V;if(m<f&&h[m]<=N)V=h[m],m++;else if(E===0?V=1:E+1===a?V=t:V=Math.round(E*u+d),S.length<L){const R=m+1+v;y&&y.type==="inserted"&&y._i===E-1?y.insertToLineNumber++:(y={type:"inserted",_i:E,insertFromLineNumber:R,insertToLineNumber:R},S.push(y)),v++}p[E]=V,b=V}if(S.length<L)for(;m<f;){const E=m+1+v;y&&y.type==="deleted"&&y._oldIndex===m-1?y.deleteToLineNumber++:(y={type:"deleted",_oldIndex:m,deleteFromLineNumber:E,deleteToLineNumber:E},S.push(y)),v--,m++}else S=[{type:"flush"}];return[new $A(u,p),S]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let r=this.modelLineToMinimapLine(t)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=t;)r++;if(n===r){const o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,r+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),r=this.modelLineToMinimapLine(t);return e!==t&&r===n&&(r===this.minimapLines.length?n>1&&n--:r++),[n,r]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,r=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),r=Math.max(r,o)):this.minimapLines[o]-=t;return[n,r]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class tOe extends Cc{constructor(e){super(e),this.tokensColorTracker=mM.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new HA(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=$A.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new g3(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new HA(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return t?this._actual.onLinesChanged(t[0],t[1]):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const n of e.ranges){const r=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);r&&t.push({fromLineNumber:r[0],toLineNumber:r[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const r={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(r)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=$A.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const r of n)switch(r.type){case"deleted":this._actual.onLinesDeleted(r.deleteFromLineNumber,r.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(r.insertFromLineNumber,r.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.model.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.model.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let r=[];for(let o=0,s=t-e+1;o<s;o++)n[o]?r[o]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+o-1]):r[o]=null;return r}return this._context.model.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new yt(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const o=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];n=new Q(o,1,s,this._context.model.getLineMaxColumn(s))}else n=new Q(e,1,t,this._context.model.getLineMaxColumn(t));const r=this._context.model.getDecorationsInViewport(n);if(this._samplingState){let o=[];for(const s of r){if(!s.options.minimap)continue;const a=s.range,u=this._samplingState.modelLineToMinimapLine(a.startLineNumber),d=this._samplingState.modelLineToMinimapLine(a.endLineNumber);o.push(new _de(new Q(u,a.startColumn,d,a.endColumn),s.options))}return o}return r}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new Q(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class g3 extends Oe{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(cJ),this._domNode=ri(document.createElement("div")),lg.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=ri(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=ri(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=ri(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=ri(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=ri(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=ts(this._domNode.domNode,"mousedown",n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.leftButton&&this._lastRenderData){const d=Us(this._slider.domNode),h=d.top+d.height/2;this._startSliderDragging(n.buttons,n.posx,h,n.posy,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,s=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.browserEvent.offsetY;let u=Math.floor(s/o)+this._lastRenderData.renderedLayout.startLineNumber;u=Math.min(u,this._model.getLineCount()),this._model.revealLineNumber(u)}),this._sliderMouseMoveMonitor=new yC,this._sliderMouseDownListener=ts(this._slider.domNode,"mousedown",n=>{n.preventDefault(),n.stopPropagation(),n.leftButton&&this._lastRenderData&&this._startSliderDragging(n.buttons,n.posx,n.posy,n.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Hi.addTarget(this._domNode.domNode),this._sliderTouchStartListener=qe(this._domNode.domNode,lr.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=qe(this._domNode.domNode,lr.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=ts(this._domNode.domNode,lr.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n,r,o){this._slider.toggleClassName("active",!0);const s=(a,u)=>{const d=Math.abs(u-t);if(As&&d>JAe){this._model.setScrollTop(o.scrollTop);return}const h=a-n;this._model.setScrollTop(o.getDesiredScrollTopFromDelta(h))};r!==n&&s(r,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,VS,a=>s(a.posy,a.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return this._model.options.showSlider==="always"?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new hq(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(cJ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=F2.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(Q.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((p,m)=>(p.options.zIndex||0)-(m.options.zIndex||0));const{canvasInnerWidth:r,canvasInnerHeight:o}=this._model.options,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,u=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,r,o);const h=new vee(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,h,e,s),this._renderDecorationsLineHighlights(d,n,h,e,s);const f=new vee(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,f,e,s,u,a,r),this._renderDecorationsHighlights(d,n,f,e,s,u,a,r)}}_renderSelectionLineHighlights(e,t,n,r,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,a=0;for(const u of t){const d=Math.max(r.startLineNumber,u.startLineNumber),h=Math.min(r.endLineNumber,u.endLineNumber);if(d>h)continue;for(let m=d;m<=h;m++)n.set(m,!0);const f=(d-r.startLineNumber)*o,p=(h-r.startLineNumber)*o+o;a>=f||(a>s&&e.fillRect(yv,s,e.canvas.width,a-s),s=f),a=p}a>s&&e.fillRect(yv,s,e.canvas.width,a-s)}_renderDecorationsLineHighlights(e,t,n,r,o){const s=new Map;for(let a=t.length-1;a>=0;a--){const u=t[a],d=u.options.minimap;if(!d||d.position!==bl.Inline)continue;const h=Math.max(r.startLineNumber,u.range.startLineNumber),f=Math.min(r.endLineNumber,u.range.endLineNumber);if(h>f)continue;const p=d.getColor(this._theme);if(!p||p.isTransparent())continue;let m=s.get(p.toString());m||(m=p.transparent(.5).toString(),s.set(p.toString(),m)),e.fillStyle=m;for(let v=h;v<=f;v++){if(n.has(v))continue;n.set(v,!0);const b=(h-r.startLineNumber)*o;e.fillRect(yv,b,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,r,o,s,a,u){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const d of t){const h=Math.max(r.startLineNumber,d.startLineNumber),f=Math.min(r.endLineNumber,d.endLineNumber);if(!(h>f))for(let p=h;p<=f;p++)this.renderDecorationOnLine(e,n,d,this._selectionColor,r,p,o,o,s,a,u)}}_renderDecorationsHighlights(e,t,n,r,o,s,a,u){for(const d of t){const h=d.options.minimap;if(!h)continue;const f=Math.max(r.startLineNumber,d.range.startLineNumber),p=Math.min(r.endLineNumber,d.range.endLineNumber);if(f>p)continue;const m=h.getColor(this._theme);if(!(!m||m.isTransparent()))for(let v=f;v<=p;v++)switch(h.position){case bl.Inline:this.renderDecorationOnLine(e,n,d.range,m,r,v,o,o,s,a,u);continue;case bl.Gutter:const b=(v-r.startLineNumber)*o,L=2;this.renderDecoration(e,m,L,b,eOe,o);continue}}}renderDecorationOnLine(e,t,n,r,o,s,a,u,d,h,f){const p=(s-o.startLineNumber)*u;if(p+a<0||p>this._model.options.canvasInnerHeight)return;const{startLineNumber:m,endLineNumber:v}=n,b=m===s?n.startColumn:1,L=v===s?n.endColumn:this._model.getLineMaxColumn(s),S=this.getXOffsetForPosition(t,s,b,d,h,f),y=this.getXOffsetForPosition(t,s,L,d,h,f);this.renderDecoration(e,r,S,p,y-S,a)}getXOffsetForPosition(e,t,n,r,o,s){if(n===1)return yv;if((n-1)*o>=s)return s;let u=e.get(t);if(!u){const d=this._model.getLineContent(t);u=[yv];let h=yv;for(let f=1;f<d.length+1;f++){const p=d.charCodeAt(f-1),m=p===9?r*o:ag(p)?2*o:o,v=h+m;if(v>=s){u[f]=s;break}u[f]=v,h=v}e.set(t,u)}return n-1<u.length?u[n-1]:s}renderDecoration(e,t,n,r,o,s){e.fillStyle=t&&t.toString()||"",e.fillRect(n,r,o,s)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,r=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const B=this._lastRenderData._get();return new _ee(e,B.imageData,B.lines)}const o=this._getBuffer();if(!o)return null;let[s,a,u]=g3._renderUntouchedLines(o,t,n,r,this._lastRenderData);const d=this._model.getMinimapLinesRenderingData(t,n,u),h=this._model.getOptions().tabSize,f=this._model.options.defaultBackgroundColor,p=this._model.options.backgroundColor,m=this._model.options.foregroundAlpha,v=this._model.tokensColorTracker,b=v.backgroundIsLight(),L=this._model.options.renderMinimap,S=this._model.options.charRenderer(),y=this._model.options.fontScale,E=this._model.options.minimapCharWidth,N=(L===1?2:2+1)*y,V=r>N?Math.floor((r-N)/2):0,R=p.a/255,M=new tc(Math.round((p.r-f.r)*R+f.r),Math.round((p.g-f.g)*R+f.g),Math.round((p.b-f.b)*R+f.b),255);let K=0;const X=[];for(let B=0,U=n-t+1;B<U;B++)u[B]&&g3._renderLine(o,M,p.a,b,L,E,v,m,S,K,V,h,d[B],y,r),X[B]=new f3(K),K+=r;const $=s===-1?0:s,T=(a===-1?o.height:a)-$;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,$,o.width,T),new _ee(e,o,X)}static _renderUntouchedLines(e,t,n,r,o){const s=[];if(!o){for(let M=0,K=n-t+1;M<K;M++)s[M]=!0;return[-1,-1,s]}const a=o._get(),u=a.imageData.data,d=a.rendLineNumberStart,h=a.lines,f=h.length,p=e.width,m=e.data,v=(n-t+1)*r*p*4;let b=-1,L=-1,S=-1,y=-1,E=-1,A=-1,N=0;for(let M=t;M<=n;M++){const K=M-t,X=M-d,$=X>=0&&X<f?h[X].dy:-1;if($===-1){s[K]=!0,N+=r;continue}const D=$*p*4,T=($+r)*p*4,F=N*p*4,B=(N+r)*p*4;y===D&&A===F?(y=T,A=B):(S!==-1&&(m.set(u.subarray(S,y),E),b===-1&&S===0&&S===E&&(b=y),L===-1&&y===v&&S===E&&(L=S)),S=D,y=T,E=F,A=B),s[K]=!1,N+=r}S!==-1&&(m.set(u.subarray(S,y),E),b===-1&&S===0&&S===E&&(b=y),L===-1&&y===v&&S===E&&(L=S));const V=b===-1?-1:b/(p*4),R=L===-1?-1:L/(p*4);return[V,R,s]}static _renderLine(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){const L=m.content,S=m.tokens,y=e.width-s,E=b===1;let A=yv,N=0,V=0;for(let R=0,M=S.getCount();R<M;R++){const K=S.getEndOffset(R),X=S.getForeground(R),$=a.getColor(X);for(;N<K;N++){if(A>y)return;const D=L.charCodeAt(N);if(D===9){const T=p-(N+V)%p;V+=T-1,A+=T*s}else if(D===32)A+=s;else{const T=ag(D)?2:1;for(let F=0;F<T;F++)if(o===2?d.blockRenderChar(e,A,h+f,$,u,t,n,E):d.renderChar(e,A,h+f,D,$,u,t,n,v,r,E),A+=s,A>y)return}}}}}class vee{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let r=0,o=this._endLineNumber-this._startLineNumber+1;r<o;r++)this._values[r]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}hr((i,e)=>{const t=i.getColor(ZIe);t&&e.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${t}; }`);const n=i.getColor(XIe);n&&e.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${n}; }`);const r=i.getColor(QIe);r&&e.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${r}; }`);const o=i.getColor(HS);o&&e.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${o} -6px 0 6px -6px inset; }`)});class nOe extends Cc{constructor(e){super(e);const n=this._context.configuration.options.get(130);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._domNode=ri(document.createElement("div")),lg.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(130);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=ri(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const r=this._widgets[t].domNode.domNode;delete this._widgets[t],r.parentNode.removeChild(r),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(e.preference===null){t.unsetTop();return}if(e.preference===0)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(e.preference===1){const n=t.domNode.clientHeight;t.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else e.preference===2&&(t.setTop(0),t.domNode.style.right="50%")}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,r=t.length;n<r;n++){const o=t[n];this._renderWidget(this._widgets[o])}}}class iOe{constructor(e,t){const n=e.options;this.lineHeight=n.get(58),this.pixelRatio=n.get(128),this.overviewRulerLanes=n.get(73),this.renderBorder=n.get(72);const r=t.getColor(d2e);this.borderColor=r?r.toString():null,this.hideCursor=n.get(51);const o=t.getColor(Xce);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const s=n.get(64),a=s.enabled,u=s.side,d=a?t.getColor(h2e)||Wr.getDefaultBackground():null;d===null||u==="left"?this.backgroundColor=null:this.backgroundColor=ye.Format.CSS.formatHex(d);const f=n.get(130).overviewRuler;this.top=f.top,this.right=f.right,this.domWidth=f.width,this.domHeight=f.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,m]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=m}_initLanes(e,t,n){const r=t-e;if(n>=3){const o=Math.floor(r/3),s=Math.floor(r/3),a=r-o-s,u=e,d=u+o,h=u+o+a;return[[0,u,d,u,h,u,d,u],[0,o,a,o+a,s,o+a+s,a+s,o+a+s]]}else if(n===2){const o=Math.floor(r/2),s=r-o,a=e,u=a+o;return[[0,a,a,a,u,a,a,a],[0,o,o,o,s,o+s,o+s,o+s]]}else{const o=e,s=r;return[[0,o,o,o,o,o,o,o],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class rOe extends Cc{constructor(e){super(e),this._domNode=ri(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Wr.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new iOe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Le.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");return}const e=this._settings.canvasWidth,t=this._settings.canvasHeight,n=this._settings.lineHeight,r=this._context.viewLayout,o=this._context.viewLayout.getScrollHeight(),s=t/o,a=this._context.model.getAllOverviewRulerDecorations(this._context.theme),u=6*this._settings.pixelRatio|0,d=u/2|0,h=this._domNode.domNode.getContext("2d");this._settings.backgroundColor===null?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const f=this._settings.x,p=this._settings.w;a.sort(vde.cmp);for(const m of a){const v=m.color,b=m.data;h.fillStyle=v;let L=0,S=0,y=0;for(let E=0,A=b.length/3;E<A;E++){const N=b[3*E],V=b[3*E+1],R=b[3*E+2];let M=r.getVerticalOffsetForLineNumber(V)*s|0,K=(r.getVerticalOffsetForLineNumber(R)+n)*s|0;if(K-M<u){let $=(M+K)/2|0;$<d?$=d:$+d>t&&($=t-d),M=$-d,K=$+d}M>y+1||N!==L?(E!==0&&h.fillRect(f[L],S,p[L],y-S),L=N,S=M,y=K):K>y&&(y=K)}h.fillRect(f[L],S,p[L],y-S)}if(!this._settings.hideCursor&&this._settings.cursorColor){const m=2*this._settings.pixelRatio|0,v=m/2|0,b=this._settings.x[7],L=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let S=-100,y=-100;for(let E=0,A=this._cursorPositions.length;E<A;E++){const N=this._cursorPositions[E];let V=r.getVerticalOffsetForLineNumber(N.lineNumber)*s|0;V<v?V=v:V+v>t&&(V=t-v);const R=V-v,M=R+m;R>y+1?(E!==0&&h.fillRect(b,S,L,y-S),S=R,y=M):M>y&&(y=M)}h.fillRect(b,S,L,y-S)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}class bee{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class zA{constructor(e,t,n){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.color=n,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class oOe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(zA.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),r=Math.floor(this._outerHeight),o=n/r,s=Math.floor(4*this._pixelRatio/2);let a=[];for(let u=0,d=this._zones.length;u<d;u++){const h=this._zones[u];if(!e){const y=h.getColorZones();if(y){a.push(y);continue}}const f=Math.floor(o*this._getVerticalOffsetForLine(h.startLineNumber)),p=Math.floor(o*(this._getVerticalOffsetForLine(h.endLineNumber)+t));let m=Math.floor((f+p)/2),v=p-m;v<s&&(v=s),m-v<0&&(m=v),m+v>n&&(m=n-v);const b=h.color;let L=this._color2Id[b];L||(L=++this._lastAssignedId,this._color2Id[b]=L,this._id2Color[L]=b);const S=new bee(m-v,m+v,L);h.setColorZone(S),a.push(S)}return this._colorZonesInvalid=!1,a.sort(bee.compare),a}}class sOe extends cM{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=ri(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new oOe(r=>this._context.viewLayout.getVerticalOffsetForLineNumber(r)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(58)),this._zoneManager.setPixelRatio(n.get(128)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(58)&&(this._zoneManager.setLineHeight(t.get(58)),this._render()),e.hasChanged(128)&&(this._zoneManager.setPixelRatio(t.get(128)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,r,e),!0}_renderOneLane(e,t,n,r){let o=0,s=0,a=0;for(const u of t){const d=u.colorId,h=u.from,f=u.to;d!==o?(e.fillRect(0,s,r,a-s),o=d,e.fillStyle=n[o],s=h,a=f):a>=h?a=Math.max(a,f):(e.fillRect(0,s,r,a-s),s=h,a=f)}e.fillRect(0,s,r,a-s)}}class aOe extends Cc{constructor(e){super(e),this.domNode=ri(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(90),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:r}=this._context.model.getTextModelOptions(),o=r;let s=t-e;for(;s>0;){const a=ri(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}let n=e-t;for(;n>0;){const r=this._renderedRulers.pop();this.domNode.removeChild(r),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const r=this._renderedRulers[t],o=this._rulers[t];r.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),r.setHeight(Math.min(e.scrollHeight,1e6)),r.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}hr((i,e)=>{const t=i.getColor(u2e);t&&e.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${t} inset; }`)});class lOe extends Cc{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(91);this._useShadows=n.useShadows,this._domNode=ri(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(130);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(91);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}hr((i,e)=>{const t=i.getColor(HS);t&&e.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${t} 0 6px 6px -6px inset; }`)});class uOe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class cOe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function dOe(i){return new uOe(i)}function hOe(i){return new cOe(i.lineNumber,i.ranges.map(dOe))}class $r extends zS{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(58),this._roundedSelection=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(43).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const r=this._typicalHalfwidthCharacterWidth/4;let o=null,s=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let d=0;!o&&d<n.length;d++)n[d].lineNumber===a&&(o=n[d].ranges[0]);const u=t[t.length-1].lineNumber;if(u===e.endLineNumber)for(let d=n.length-1;!s&&d>=0;d--)n[d].lineNumber===u&&(s=n[d].ranges[0]);o&&!o.startStyle&&(o=null),s&&!s.startStyle&&(s=null)}for(let a=0,u=t.length;a<u;a++){const d=t[a].ranges[0],h=d.left,f=d.left+d.width,p={top:0,bottom:0},m={top:0,bottom:0};if(a>0){const v=t[a-1].ranges[0].left,b=t[a-1].ranges[0].left+t[a-1].ranges[0].width;zR(h-v)<r?p.top=2:h>v&&(p.top=1),zR(f-b)<r?m.top=2:v<f&&f<b&&(m.top=1)}else o&&(p.top=o.startStyle.top,m.top=o.endStyle.top);if(a+1<u){const v=t[a+1].ranges[0].left,b=t[a+1].ranges[0].left+t[a+1].ranges[0].width;zR(h-v)<r?p.bottom=2:v<h&&h<b&&(p.bottom=1),zR(f-b)<r?m.bottom=2:f<b&&(m.bottom=1)}else s&&(p.bottom=s.startStyle.bottom,m.bottom=s.endStyle.bottom);d.startStyle=p,d.endStyle=m}}_getVisibleRangesWithStyle(e,t,n){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(hOe);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,r,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+r.toString()+"px;width:"+o.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,r){if(r.length===0)return;const o=!!r[0].ranges[0].startStyle,s=this._lineHeight.toString(),a=(this._lineHeight-1).toString(),u=r[0].lineNumber,d=r[r.length-1].lineNumber;for(let h=0,f=r.length;h<f;h++){const p=r[h],m=p.lineNumber,v=m-t,b=n&&(m===d||m===u)?a:s,L=n&&m===u?1:0;let S="",y="";for(let E=0,A=p.ranges.length;E<A;E++){const N=p.ranges[E];if(o){const R=N.startStyle,M=N.endStyle;if(R.top===1||R.bottom===1){S+=this._createSelectionPiece(L,b,$r.SELECTION_CLASS_NAME,N.left-$r.ROUNDED_PIECE_WIDTH,$r.ROUNDED_PIECE_WIDTH);let K=$r.EDITOR_BACKGROUND_CLASS_NAME;R.top===1&&(K+=" "+$r.SELECTION_TOP_RIGHT),R.bottom===1&&(K+=" "+$r.SELECTION_BOTTOM_RIGHT),S+=this._createSelectionPiece(L,b,K,N.left-$r.ROUNDED_PIECE_WIDTH,$r.ROUNDED_PIECE_WIDTH)}if(M.top===1||M.bottom===1){S+=this._createSelectionPiece(L,b,$r.SELECTION_CLASS_NAME,N.left+N.width,$r.ROUNDED_PIECE_WIDTH);let K=$r.EDITOR_BACKGROUND_CLASS_NAME;M.top===1&&(K+=" "+$r.SELECTION_TOP_LEFT),M.bottom===1&&(K+=" "+$r.SELECTION_BOTTOM_LEFT),S+=this._createSelectionPiece(L,b,K,N.left+N.width,$r.ROUNDED_PIECE_WIDTH)}}let V=$r.SELECTION_CLASS_NAME;if(o){const R=N.startStyle,M=N.endStyle;R.top===0&&(V+=" "+$r.SELECTION_TOP_LEFT),R.bottom===0&&(V+=" "+$r.SELECTION_BOTTOM_LEFT),M.top===0&&(V+=" "+$r.SELECTION_TOP_RIGHT),M.bottom===0&&(V+=" "+$r.SELECTION_BOTTOM_RIGHT)}y+=this._createSelectionPiece(L,b,V,N.left,N.width)}e[v][0]+=S,e[v][1]+=y}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let s=n;s<=r;s++){const a=s-n;t[a]=["",""]}const o=[];for(let s=0,a=this._selections.length;s<a;s++){const u=this._selections[s];if(u.isEmpty()){o[s]=null;continue}const d=this._getVisibleRangesWithStyle(u,e,this._previousFrameVisibleRangesWithStyle[s]);o[s]=d,this._actualRenderOneSelection(t,n,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([s,a])=>s+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}$r.SELECTION_CLASS_NAME="selected-text";$r.SELECTION_TOP_LEFT="top-left-radius";$r.SELECTION_BOTTOM_LEFT="bottom-left-radius";$r.SELECTION_TOP_RIGHT="top-right-radius";$r.SELECTION_BOTTOM_RIGHT="bottom-right-radius";$r.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";$r.ROUNDED_PIECE_WIDTH=10;hr((i,e)=>{const t=i.getColor(o0);t&&e.addRule(`.monaco-editor .focused .selected-text { background-color: ${t}; }`);const n=i.getColor(OG);n&&e.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const r=i.getColor(QDe);r&&!r.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${r}; }`)});function zR(i){return i<0?-i:i}class Cee{constructor(e,t,n,r,o,s){this.top=e,this.left=t,this.width=n,this.height=r,this.textContent=o,this.textContentClassName=s}}class wee{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(43);this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=ri(document.createElement("div")),this._domNode.setClassName(`cursor ${ob}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Na.applyFontInfo(this._domNode,n),this._domNode.setDisplay("none"),this._position=new Le(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(43);return this._cursorStyle=t.get(24),this._lineHeight=t.get(58),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(27),this._typicalHalfwidthCharacterWidth),Na.applyFontInfo(this._domNode,n),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===ls.Line||this._cursorStyle===ls.LineThin){const p=e.visibleRangeForPosition(this._position);if(!p||p.outsideRenderedLine)return null;let m;if(this._cursorStyle===ls.Line){if(m=ZQ(this._lineCursorWidth>0?this._lineCursorWidth:2),m>2){const L=this._context.model.getLineContent(this._position.lineNumber),S=NF(L,this._position.column-1);t=L.substr(this._position.column-1,S)}}else m=ZQ(1);let v=p.left;m>=2&&v>=1&&(v-=1);const b=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new Cee(b,v,m,this._lineHeight,t,"")}const n=this._context.model.getLineContent(this._position.lineNumber),r=NF(n,this._position.column-1),o=e.linesVisibleRangesForRange(new Q(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+r),!1);if(!o||o.length===0)return null;const s=o[0];if(s.outsideRenderedLine||s.ranges.length===0)return null;const a=s.ranges[0],u=a.width<1?this._typicalHalfwidthCharacterWidth:a.width;let d="";if(this._cursorStyle===ls.Block){const p=this._context.model.getViewLineData(this._position.lineNumber);t=n.substr(this._position.column-1,r);const m=p.tokens.findTokenIndexAtOffset(this._position.column-1);d=p.tokens.getClassName(m)}let h=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,f=this._lineHeight;return(this._cursorStyle===ls.Underline||this._cursorStyle===ls.UnderlineThin)&&(h+=this._lineHeight-2,f=2),new Cee(h,a.left,u,f,t,d)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${ob} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class UA extends Cc{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new wee(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=ri(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Oa,this._cursorFlatBlinkInterval=new sM,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(80),this._cursorBlinking=t.get(22),this._cursorStyle=t.get(24),this._cursorSmoothCaretAnimation=t.get(23),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,r=this._secondaryCursors.length;n<r;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const n=t.length-this._secondaryCursors.length;for(let r=0;r<n;r++){const o=new wee(this._context);this._domNode.domNode.insertBefore(o.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(o)}}else if(this._secondaryCursors.length>t.length){const n=this._secondaryCursors.length-t.length;for(let r=0;r<n;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let n=0;n<t.length;n++)this._secondaryCursors[n].onCursorPositionChanged(t[n])}onCursorStateChanged(e){const t=[];for(let r=0,o=e.selections.length;r<o;r++)t[r]=e.selections[r].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let r=0,o=e.ranges.length;r<o;r++)if(e.ranges[r].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[r].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},UA.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},UA.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ls.Line:e+=" cursor-line-style";break;case ls.Block:e+=" cursor-block-style";break;case ls.Underline:e+=" cursor-underline-style";break;case ls.LineThin:e+=" cursor-line-thin-style";break;case ls.BlockOutline:e+=" cursor-block-outline-style";break;case ls.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0;const r=this._primaryCursor.render(e);r&&(t[n++]=r);for(let o=0,s=this._secondaryCursors.length;o<s;o++){const a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}}UA.BLINK_INTERVAL=500;hr((i,e)=>{const t=i.getColor(Xce);if(t){let n=i.getColor(a2e);n||(n=t.opposite()),e.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${t}; border-color: ${t}; color: ${n}; }`),i.type==="hc"&&e.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}});const n6=()=>{throw new Error("Invalid change accessor")};class fOe extends Cc{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(130);this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=ri(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=ri(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const r of e)t.set(r.id,r);let n=!1;return this._context.model.changeWhitespace(r=>{const o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){const u=o[s],d=this._zones[u],h=this._computeWhitespaceProps(d.delegate);d.isInHiddenArea=h.isInHiddenArea;const f=t.get(u);f&&(f.afterLineNumber!==h.afterViewLineNumber||f.height!==h.heightInPx)&&(r.changeOneWhitespace(u,h.afterViewLineNumber,h.heightInPx),this._safeCallOnComputedHeight(d.delegate,h.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(130);return this._lineHeight=t.get(58),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(58)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return typeof e.afterColumn<"u"?e.afterColumn:1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const s=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Le(s,this._context.model.getModelLineMaxColumn(s))}let n;t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?n=this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),o=this._context.model.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:r.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(n=>{const r={addZone:o=>(t=!0,this._addZone(n,o)),removeZone:o=>{o&&(t=this._removeZone(n,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(n,o)||t)}};gOe(e,r),r.addZone=n6,r.removeZone=n6,r.layoutZone=n6}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:ri(t.domNode),marginDomNode:t.marginDomNode?ri(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],r=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=r.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(n.delegate,r.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){gn(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){gn(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let r=!1;for(const s of t)this._zones[s.id].isInHiddenArea||(n[s.id]=s,r=!0);const o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){const u=o[s],d=this._zones[u];let h=0,f=0,p="none";n.hasOwnProperty(u)?(h=n[u].verticalOffset-e.bigNumbersDelta,f=n[u].height,p="block",d.isVisible||(d.domNode.setAttribute("monaco-visible-view-zone","true"),d.isVisible=!0),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(n[u].verticalOffset))):(d.isVisible&&(d.domNode.removeAttribute("monaco-visible-view-zone"),d.isVisible=!1),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),d.domNode.setTop(h),d.domNode.setHeight(f),d.domNode.setDisplay(p),d.marginDomNode&&(d.marginDomNode.setTop(h),d.marginDomNode.setHeight(f),d.marginDomNode.setDisplay(p))}r&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function gOe(i,e){try{return i(e)}catch(t){gn(t)}}class pOe{constructor(e){this._theme=e}get type(){return this._theme.type}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class mOe{constructor(e,t,n){this.configuration=e,this.theme=new pOe(t),this.model=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.model.addViewEventHandler(e)}removeEventHandler(e){this.model.removeViewEventHandler(e)}}class _Oe{constructor(e,t,n,r){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.whitespaceViewportData=n,this._model=r,this.visibleRange=new Q(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class vOe extends cM{constructor(e,t,n,r,o,s){super(),this._selections=[new yt(1,1,1,1)],this._renderAnimationFrame=null;const a=new bAe(t,r,o,e);this._context=new mOe(t,n.getColorTheme(),r),this._configPixelRatio=this._context.configuration.options.get(128),this._context.addEventHandler(this),this._register(n.onDidColorThemeChange(b=>{this._context.theme.update(b),this._context.model.onDidColorThemeChange(),this.render(!0,!1)})),this._viewParts=[],this._textAreaHandler=new hAe(this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=ri(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=ri(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=ri(document.createElement("div")),lg.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new HAe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Y8(this._context,this._linesContent),this._viewZones=new fOe(this._context),this._viewParts.push(this._viewZones);const u=new rOe(this._context);this._viewParts.push(u);const d=new lOe(this._context);this._viewParts.push(d);const h=new yAe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new xAe(this._context)),h.addDynamicOverlay(new $r(this._context)),h.addDynamicOverlay(new zAe(this._context)),h.addDynamicOverlay(new IAe(this._context));const f=new SAe(this._context);this._viewParts.push(f),f.addDynamicOverlay(new DAe(this._context)),f.addDynamicOverlay(new $Ae(this._context)),f.addDynamicOverlay(new qAe(this._context)),f.addDynamicOverlay(new GAe(this._context)),f.addDynamicOverlay(new Zy(this._context));const p=new Ob(this._context);p.getDomNode().appendChild(this._viewZones.marginDomNode),p.getDomNode().appendChild(f.getDomNode()),this._viewParts.push(p),this._contentWidgets=new LAe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new UA(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new nOe(this._context),this._viewParts.push(this._overlayWidgets);const m=new aOe(this._context);this._viewParts.push(m);const v=new tOe(this._context);if(this._viewParts.push(v),u){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(u.getDomNode(),b.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(m.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(v.getDomNode()),this.domNode.appendChild(this._overflowGuardContainer),s?s.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode):this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this._applyLayout(),this._pointerHandler=this._register(new dAe(this._context,a,this._createPointerHandlerHelper()))}_flushAccumulatedAndRenderNow(){this._renderNow()}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Q2e(e,t)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Le(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPositionRelativeToEditor:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Le(e,t)))}}_applyLayout(){const t=this._context.configuration.options.get(130);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(127)+" "+PF(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this._configPixelRatio=this._context.configuration.options.get(128),this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){this._renderAnimationFrame===null&&(this._renderAnimationFrame=Jle(this._onRenderScheduled.bind(this),100))}_onRenderScheduled(){this._renderAnimationFrame=null,this._flushAccumulatedAndRenderNow()}_renderNow(){bOe(()=>this._actualRender())}_getViewPartsToRender(){let e=[],t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_actualRender(){if(!sG(this.domNode.domNode))return;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return;const t=this._context.viewLayout.getLinesViewportData();this._context.model.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new _Oe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.model);this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender());const r=new cke(this._context.viewLayout,n,this._viewLines);for(const o of e)o.prepareRender(r);for(const o of e)o.render(r),o.onDidRender();Math.abs(vA()-this._configPixelRatio)>.001&&this._context.configuration.updatePixelRatio()}delegateVerticalScrollbarMouseDown(e){this._scrollbar.delegateVerticalScrollbarMouseDown(e)}restoreState(e){this._context.model.setScrollPosition({scrollTop:e.scrollTop},1),this._context.model.tokenizeViewport(),this._renderNow(),this._viewLines.updateLineWidths(),this._context.model.setScrollPosition({scrollLeft:e.scrollLeft},1)}getOffsetForColumn(e,t){const n=this._context.model.validateModelPosition({lineNumber:e,column:t}),r=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new Le(r.lineNumber,r.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?G8.convertViewToModelMouseTarget(n,this._context.model.coordinatesConverter):null}createOverviewRuler(e){return new sOe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){let t=e.position&&e.position.range||null;if(t===null){const r=e.position?e.position.position:null;r!==null&&(t=new Q(r.lineNumber,r.column,r.lineNumber,r.column))}const n=e.position?e.position.preference:null;this._contentWidgets.setWidgetPosition(e.widget,t,n),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}}function bOe(i){try{return i()}catch(e){gn(e)}}class p3{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ss(new Q(1,1,1,1),0,new Le(1,1),0),new ss(new Q(1,1,1,1),0,new Le(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Bn(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return yt.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,r){return t.equals(n)?r:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,r=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),s=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,r,n,s),u=this._validatePositionWithCache(e,o,r,a);return n.equals(s)&&r.equals(a)&&o.equals(u)?t:new ss(Q.fromPositions(a,u),t.selectionStartLeftoverVisibleColumns+r.column-a.column,s,t.leftoverVisibleColumns+n.column-s.column)}_setState(e,t,n){if(n&&(n=p3._validateViewState(e.viewModel,n)),t){const r=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(r)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),a=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new ss(r,o,s,a)}else{if(!n)return;const r=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new ss(r,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const r=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new ss(r,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const r=e.coordinatesConverter.convertModelPositionToViewPosition(new Le(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new Le(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new Q(r.lineNumber,r.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new ss(s,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class yee{constructor(e){this.context=e,this.primaryCursor=new p3(e),this.secondaryCursors=[],this.lastAddedCursorIndex=0}dispose(){this.primaryCursor.dispose(this.context),this.killSecondaryCursors()}startTrackingSelections(){this.primaryCursor.startTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].startTrackingSelection(this.context)}stopTrackingSelections(){this.primaryCursor.stopTrackingSelection(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){this.primaryCursor.ensureValidState(this.context);for(let e=0,t=this.secondaryCursors.length;e<t;e++)this.secondaryCursors[e].ensureValidState(this.context)}readSelectionFromMarkers(){let e=[];e[0]=this.primaryCursor.readSelectionFromMarkers(this.context);for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].readSelectionFromMarkers(this.context);return e}getAll(){let e=[];e[0]=this.primaryCursor.asCursorState();for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].asCursorState();return e}getViewPositions(){let e=[];e[0]=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.position;return e}getTopMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const r=this.secondaryCursors[t].viewState.position;r.isBefore(e)&&(e=r)}return e}getBottomMostViewPosition(){let e=this.primaryCursor.viewState.position;for(let t=0,n=this.secondaryCursors.length;t<n;t++){const r=this.secondaryCursors[t].viewState.position;e.isBeforeOrEqual(r)&&(e=r)}return e}getSelections(){let e=[];e[0]=this.primaryCursor.modelState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].modelState.selection;return e}getViewSelections(){let e=[];e[0]=this.primaryCursor.viewState.selection;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t].viewState.selection;return e}setSelections(e){this.setStates(Bn.fromModelSelections(e))}getPrimaryCursor(){return this.primaryCursor.asCursorState()}setStates(e){e!==null&&(this.primaryCursor.setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.secondaryCursors.length,n=e.length;if(t<n){let r=n-t;for(let o=0;o<r;o++)this._addSecondaryCursor()}else if(t>n){let r=t-n;for(let o=0;o<r;o++)this._removeSecondaryCursor(this.secondaryCursors.length-1)}for(let r=0;r<n;r++)this.secondaryCursors[r].setState(this.context,e[r].modelState,e[r].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.secondaryCursors.push(new p3(this.context)),this.lastAddedCursorIndex=this.secondaryCursors.length}getLastAddedCursorIndex(){return this.secondaryCursors.length===0||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.secondaryCursors[e].dispose(this.context),this.secondaryCursors.splice(e,1)}_getAll(){let e=[];e[0]=this.primaryCursor;for(let t=0,n=this.secondaryCursors.length;t<n;t++)e[t+1]=this.secondaryCursors[t];return e}normalize(){if(this.secondaryCursors.length===0)return;let e=this._getAll(),t=[];for(let n=0,r=e.length;n<r;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort((n,r)=>n.selection.startLineNumber===r.selection.startLineNumber?n.selection.startColumn-r.selection.startColumn:n.selection.startLineNumber-r.selection.startLineNumber);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1],s=r.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let u;if(a.isEmpty()||s.isEmpty()?u=a.getStartPosition().isBeforeOrEqual(s.getEndPosition()):u=a.getStartPosition().isBefore(s.getEndPosition()),u){const d=r.index<o.index?n:n+1,h=r.index<o.index?n+1:n,f=t[h].index,p=t[d].index,m=t[h].selection,v=t[d].selection;if(!m.equalsSelection(v)){const b=m.plusRange(v),L=m.selectionStartLineNumber===m.startLineNumber&&m.selectionStartColumn===m.startColumn,S=v.selectionStartLineNumber===v.startLineNumber&&v.selectionStartColumn===v.startColumn;let y;f===this.lastAddedCursorIndex?(y=L,this.lastAddedCursorIndex=p):y=S;let E;y?E=new yt(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):E=new yt(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn),t[d].selection=E;const A=Bn.fromModelSelection(E);e[p].setState(this.context,A.modelState,A.viewState)}for(const b of t)b.index>f&&b.index--;e.splice(f,1),t.splice(h,1),this._removeSecondaryCursor(f-1),n--}}}}class COe{constructor(){this.type=0}}class wOe{constructor(){this.type=1}}class yOe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class SOe{constructor(e,t){this.type=3,this.selections=e,this.modelSelections=t}}class YC{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0)}}class UR{constructor(){this.type=5}}class LOe{constructor(e){this.type=6,this.isFocused=e}}class EOe{constructor(){this.type=7}}class jR{constructor(){this.type=8}}class bde{constructor(e,t){this.type=9,this.fromLineNumber=e,this.toLineNumber=t}}class KH{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class GH{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class u4{constructor(e,t,n,r,o,s){this.type=12,this.source=e,this.range=t,this.selections=n,this.verticalType=r,this.revealHorizontal=o,this.scrollType=s}}class xOe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class DOe{constructor(){this.type=14}}class IOe{constructor(e){this.type=15,this.ranges=e}}class kOe{constructor(){this.type=16}}let TOe=class{constructor(){this.type=17}};class NOe extends Oe{constructor(){super(),this._onEvent=this._register(new be),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++)if(this._outgoingEvents[t].kind===e.kind){this._outgoingEvents[t]=this._outgoingEvents[t].merge(e);return}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new AOe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class AOe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class fq{constructor(e,t,n,r){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}merge(e){return e.kind!==0?this:new fq(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class gq{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}merge(e){return e.kind!==1?this:new gq(this.oldHasFocus,e.hasFocus)}}class pq{constructor(e,t,n,r,o,s,a,u){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=r,this.scrollWidth=o,this.scrollLeft=s,this.scrollHeight=a,this.scrollTop=u,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}merge(e){return e.kind!==2?this:new pq(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class See{constructor(){this.kind=3}isNoOp(){return!1}merge(e){return this}}class m3{constructor(e,t,n,r,o,s,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=r,this.source=o,this.reason=s,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,r=t.length;if(n!==r)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return m3._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}merge(e){return e.kind!==6?this:new m3(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class OOe{constructor(){this.kind=5}isNoOp(){return!1}merge(e){return this}}class i6{constructor(e,t){this.modelVersionId=e.getVersionId(),this.cursorState=t.getCursorStates()}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class Lee{constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(r&&(t.push(r),r.startLineNumber!==r.endLineNumber))return!1}t.sort(Q.compareRangesUsingStarts),e.sort(Q.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class Qy extends Oe{constructor(e,t,n,r){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new ree(this._model,this._viewModel,this._coordinatesConverter,r),this._cursors=new yee(this.context),this._hasFocus=!1,this._isHandling=!1,this._isDoingComposition=!1,this._selectionsWhenCompositionStarted=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=oi(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new ree(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,r){let o=!1;r!==null&&r.length>Qy.MAX_CURSOR_COUNT&&(r=r.slice(0,Qy.MAX_CURSOR_COUNT),o=!0);const s=new i6(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,s,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,r){const o=this._cursors.getViewPositions();if(o.length>1){this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),0,n,r);return}else{const s=o[0],a=new Q(s.lineNumber,s.column,s.lineNumber,s.column);this._emitCursorRevealRange(e,t,a,null,0,n,r)}}_revealPrimaryCursor(e,t,n,r,o){const s=this._cursors.getViewPositions();if(s.length>1)this._emitCursorRevealRange(e,t,null,this._cursors.getViewSelections(),n,r,o);else{const a=s[0],u=new Q(a.lineNumber,a.column,a.lineNumber,a.column);this._emitCursorRevealRange(e,t,u,null,n,r,o)}}_emitCursorRevealRange(e,t,n,r,o,s,a){e.emitViewEvent(new u4(t,n,r,o,s,a))}saveState(){let e=[];const t=this._cursors.getSelections();for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){let n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];let a=1,u=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(u=s.position.column);let d=a,h=u;s.selectionStart&&s.selectionStart.lineNumber&&(d=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(h=s.selectionStart.column),n.push({selectionStartLineNumber:d,selectionStartColumn:h,positionLineNumber:a,positionColumn:u})}this.setStates(e,"restoreState",0,Bn.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!0,1)}onModelContentChanged(e,t){if(t instanceof Vce){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{if(this._knownModelVersionId=t.versionId,this._isHandling)return;const n=t.containsEvent(1);if(this._prevEditOperationType=0,n)this._cursors.dispose(),this._cursors=new yee(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&t.resultingSelection&&t.resultingSelection.length>0){const r=Bn.fromModelSelections(t.resultingSelection);this.setStates(e,"modelChange",t.isUndoing?5:t.isRedoing?6:2,r)&&this._revealPrimaryCursor(e,"modelChange",0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Bn.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:ur.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:ur.visibleColumnFromColumn2(this.context.cursorConfig,this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,r){this.setStates(e,t,r,Bn.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],r=[];for(let a=0,u=e.length;a<u;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),s=this._model.deltaDecorations([],r);this._autoClosedActions.push(new Lee(this._model,o,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=MOe.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],r=[];for(let o=0;o<e.commands.length;o++){const s=e.commands[o];s instanceof cde&&s.enclosingRange&&s.closeCharacterRange&&(n.push(s.closeCharacterRange),r.push(s.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,r),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,r,o){const s=new i6(this._model,this);if(s.equals(r))return!1;const a=this._cursors.getSelections(),u=this._cursors.getViewSelections();if(e.emitViewEvent(new SOe(u,a)),!r||r.cursorState.length!==s.cursorState.length||s.cursorState.some((d,h)=>!d.modelState.equals(r.cursorState[h].modelState))){const d=r?r.cursorState.map(f=>f.modelState.selection):null,h=r?r.modelVersionId:0;e.emitOutgoingEvent(new m3(d,a,h,s.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,r=e.length;n<r;n++){const o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;const s=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;const a=s[1],u=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!u||u.length!==1)return null;const d=u[0].open,h=o.text.length-s[2].length-1,f=o.text.lastIndexOf(d,h-1);if(f===-1)return null;t.push([f,h])}return t}executeEdits(e,t,n,r){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);let s=[],a=[];const u=this._model.pushEditOperations(this.getSelections(),n,d=>{if(o)for(let f=0,p=o.length;f<p;f++){const[m,v]=o[f],b=d[f],L=b.range.startLineNumber,S=b.range.startColumn-1+m,y=b.range.startColumn-1+v;s.push(new Q(L,y+1,L,y+2)),a.push(new Q(L,S+1,L,y+2))}const h=r(d);return h&&(this._isHandling=!0),h});u&&(this._isHandling=!1,this.setSelections(e,t,u,0)),s.length>0&&this._pushAutoClosedAction(s,a)}_executeEdit(e,t,n,r=0){if(this.context.cursorConfig.readOnly)return;const o=new i6(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){gn(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,r,o,!1)&&this._revealPrimaryCursor(t,n,0,!0,0)}setIsDoingComposition(e){this._isDoingComposition=e}getAutoClosedCharacters(){return Lee.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._selectionsWhenCompositionStarted=this.getSelections().slice(0)}endComposition(e,t){this._executeEdit(()=>{t==="keyboard"&&(this._executeEditOperation(xr.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this._selectionsWhenCompositionStarted,this.getSelections(),this.getAutoClosedCharacters())),this._selectionsWhenCompositionStarted=null)},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const r=t.length;let o=0;for(;o<r;){const s=NF(t,o),a=t.substr(o,s);this._executeEditOperation(xr.typeWithInterceptors(this._isDoingComposition,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=s}}else this._executeEditOperation(xr.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,r,o,s){if(t.length===0&&n===0&&r===0){if(o!==0){const a=this.getSelections().map(u=>{const d=u.getPosition();return new yt(d.lineNumber,d.column+o,d.lineNumber,d.column+o)});this.setSelections(e,s,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(xr.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,r,o))},e,s)}paste(e,t,n,r,o){this._executeEdit(()=>{this._executeEditOperation(xr.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,r||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(Mb.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ll(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new ll(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}Qy.MAX_CURSOR_COUNT=1e4;class MOe{static executeCommands(e,t,n){const r={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(r,n);for(let s=0,a=r.trackedRanges.length;s<a;s++)r.model._setTrackedRange(r.trackedRanges[s],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const r=n.operations,o=this._getLoserCursorMap(r);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let d=0,h=r.length;d<h;d++)o.hasOwnProperty(r[d].identifier.major.toString())||s.push(r[d]);n.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,s,d=>{let h=[];for(let m=0;m<e.selectionsBefore.length;m++)h[m]=[];for(const m of d)m.identifier&&h[m.identifier.major].push(m);const f=(m,v)=>m.identifier.minor-v.identifier.minor;let p=[];for(let m=0;m<e.selectionsBefore.length;m++)h[m].length>0?(h[m].sort(f),p[m]=t[m].computeCursorState(e.model,{getInverseEditOperations:()=>h[m],getTrackedSelection:v=>{const b=parseInt(v,10),L=e.model._getTrackedRange(e.trackedRanges[b]);return e.trackedRangesDirection[b]===0?new yt(L.startLineNumber,L.startColumn,L.endLineNumber,L.endColumn):new yt(L.endLineNumber,L.endColumn,L.startLineNumber,L.startColumn)}})):p[m]=e.selectionsBefore[m];return p});a||(a=e.selectionsBefore);let u=[];for(let d in o)o.hasOwnProperty(d)&&u.push(parseInt(d,10));u.sort((d,h)=>h-d);for(const d of u)a.splice(d,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],r=!1;for(let o=0,s=t.length;o<s;o++){const a=t[o];if(a){const u=this._getEditOperationsFromCommand(e,o,a);n=n.concat(u.operations),r=r||u.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:r}}static _getEditOperationsFromCommand(e,t,n){let r=[],o=0;const s=(f,p,m=!1)=>{Q.isEmpty(f)&&p===""||r.push({identifier:{major:t,minor:o++},range:f,text:p,forceMoveMarkers:m,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const h={addEditOperation:s,addTrackedEditOperation:(f,p,m)=>{a=!0,s(f,p,m)},trackSelection:(f,p)=>{const m=yt.liftSelection(f);let v;if(m.isEmpty())if(typeof p=="boolean")p?v=2:v=3;else{const S=e.model.getLineMaxColumn(m.startLineNumber);m.startColumn===S?v=2:v=3}else v=1;const b=e.trackedRanges.length,L=e.model._setTrackedRange(null,m,v);return e.trackedRanges[b]=L,e.trackedRangesDirection[b]=m.getDirection(),b.toString()}};try{n.getEditOperations(e.model,h)}catch(f){return gn(f),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,r)=>-Q.compareRangesUsingEnds(n.range,r.range));let t={};for(let n=1;n<e.length;n++){const r=e[n-1],o=e[n];if(Q.getStartPosition(r.range).isBefore(Q.getEndPosition(o.range))){let s;r.identifier.major>o.identifier.major?s=r.identifier.major:s=o.identifier.major,t[s.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class Cde{constructor(e,t,n,r,o,s){this.id=e,this.label=t,this.alias=n,this._precondition=r,this._run=o,this._contextKeyService=s}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(){return this.isSupported()?this._run():Promise.resolve(void 0)}}const _M={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Eee={getInitialState:()=>dM,tokenize2:(i,e,t,n)=>QG(0,i,t,n)};function wde(i,e,t=Eee){return POe(i,e,t||Eee)}function ROe(i,e,t,n,r,o,s){let a="<div>",u=n,d=0,h=!0;for(let f=0,p=e.getCount();f<p;f++){const m=e.getEndOffset(f);if(m<=n)continue;let v="";for(;u<m&&u<r;u++){const b=i.charCodeAt(u);switch(b){case 9:let L=o-(u+d)%o;for(d+=L-1;L>0;)s&&h?(v+="&#160;",h=!1):(v+=" ",h=!0),L--;break;case 60:v+="&lt;",h=!1;break;case 62:v+="&gt;",h=!1;break;case 38:v+="&amp;",h=!1;break;case 0:v+="&#00;",h=!1;break;case 65279:case 8232:case 8233:case 133:v+="�",h=!1;break;case 13:v+="&#8203",h=!1;break;case 32:s&&h?(v+="&#160;",h=!1):(v+=" ",h=!0);break;default:v+=String.fromCharCode(b),h=!1}}if(a+=`<span style="${e.getInlineStyle(f,t)}">${v}</span>`,m>r||u>=r)break}return a+="</div>",a}function POe(i,e,t){let n='<div class="monaco-tokenized-source">';const r=sg(i);let o=t.getInitialState();for(let s=0,a=r.length;s<a;s++){const u=r[s];s>0&&(n+="<br/>");const d=t.tokenize2(u,!0,o,0);es.convertToEndOffset(d.tokens,u.length);const f=new es(d.tokens,u,e).inflate();let p=0;for(let m=0,v=f.getCount();m<v;m++){const b=f.getClassName(m),L=f.getEndOffset(m);n+=`<span class="${b}">${fG(u.substring(p,L))}</span>`,p=L}o=d.endState}return n+="</div>",n}class FOe{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,r)}}class BOe{constructor(e,t,n,r,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=r,this.minWidth=o,this.prefixSum=0}}class jA{constructor(e,t,n,r){this._instanceId=mue(++jA.INSTANCE_COUNT),this._pendingChanges=new FOe,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=r}static findInsertionIndex(e,t,n){let r=0,o=e.length;for(;r<o;){const s=r+o>>>1;t===e[s].afterLineNumber?n<e[s].ordinal?o=s:r=s+1:t<e[s].afterLineNumber?o=s:r=s+1}return r}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(r,o,s,a)=>{t=!0,r=r|0,o=o|0,s=s|0,a=a|0;const u=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new BOe(u,r,o,s,a)),u},changeOneWhitespace:(r,o,s)=>{t=!0,o=o|0,s=s|0,this._pendingChanges.change({id:r,newAfterLineNumber:o,newHeight:s})},removeWhitespace:r=>{t=!0,this._pendingChanges.remove({id:r})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const u of e)this._insertWhitespace(u);for(const u of t)this._changeOneWhitespace(u.id,u.newAfterLineNumber,u.newHeight);for(const u of n){const d=this._findWhitespaceIndex(u.id);d!==-1&&this._removeWhitespace(d)}return}const r=new Set;for(const u of n)r.add(u.id);const o=new Map;for(const u of t)o.set(u.id,u);const s=u=>{let d=[];for(const h of u)if(!r.has(h.id)){if(o.has(h.id)){const f=o.get(h.id);h.afterLineNumber=f.newAfterLineNumber,h.height=f.newHeight}d.push(h)}return d},a=s(this._arr).concat(s(e));a.sort((u,d)=>u.afterLineNumber===d.afterLineNumber?u.ordinal-d.ordinal:u.afterLineNumber-d.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=jA.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,r=t.length;n<r;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const r=this._findWhitespaceIndex(e);if(r!==-1&&(this._arr[r].height!==n&&(this._arr[r].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==t)){const o=this._arr[r];this._removeWhitespace(r),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,r=this._arr.length;n<r;n++){const o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,r=t.length-1;for(;n<=r;){const s=(r-n|0)/2|0,a=n+s|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else r=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){this._checkPendingChanges(),e=e|0;let t;e>1?t=this._lineHeight*(e-1):t=0;const n=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e);return t+n+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let r=1,o=t;for(;r<o;){const s=(r+o)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+n)r=s+1;else{if(e>=a)return s;o=s}}return r>t?t:r}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,r=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(r)|0;let s=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(r)|0;const u=this.getWhitespacesCount()|0;let d,h;a===-1?(a=u,h=s+1,d=0):(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);let f=o,p=f;const m=5e5;let v=0;o>=m&&(v=Math.floor(o/m)*m,v=Math.floor(v/n)*n,p-=v);const b=[],L=e+(t-e)/2;let S=-1;for(let N=r;N<=s;N++){if(S===-1){const V=f,R=f+n;(V<=L&&L<R||V>L)&&(S=N)}for(f+=n,b[N-r]=p,p+=n;h===N;)p+=d,f+=d,a++,a>=u?h=s+1:(h=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);if(f>=t){s=N;break}}S===-1&&(S=s);const y=this.getVerticalOffsetForLineNumber(s)|0;let E=r,A=s;return E<A&&o<e&&E++,E<A&&y+n>t&&A--,{bigNumbersDelta:v,startLineNumber:r,endLineNumber:s,relativeVerticalOffset:b,centeredLineNumber:S,completelyVisibleStartLineNumber:E,completelyVisibleEndLineNumber:A}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let r;return e>0?r=this.getWhitespacesAccumulatedHeight(e-1):r=0,n+r+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const r=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=r+o)return-1;for(;t<n;){const s=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(s),u=this.getHeightForWhitespaceIndex(s);if(e>=a+u)t=s+1;else{if(e>=a)return s;n=s}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const r=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),s=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:s,verticalOffset:n,height:r}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),r=this.getWhitespacesCount()-1;if(n<0)return[];let o=[];for(let s=n;s<=r;s++){const a=this.getVerticalOffsetForWhitespaceIndex(s),u=this.getHeightForWhitespaceIndex(s);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:u})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}}jA.INSTANCE_COUNT=0;const WOe=125;class i2{constructor(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=r,this.scrollHeight=Math.max(n,r)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class VOe extends Oe{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new be),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new i2(0,0,0,0),this._scrollable=this._register(new q8(e,t)),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,r=t.contentHeight!==e.contentHeight;(n||r)&&this._onDidContentSizeChange.fire(new fq(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}}class HOe extends Oe{constructor(e,t,n){super(),this._configuration=e;const r=this._configuration.options,o=r.get(130),s=r.get(74);this._linesLayout=new jA(t,r.get(58),s.top,s.bottom),this._scrollable=this._register(new VOe(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new i2(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(102)?WOe:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(58)&&this._linesLayout.setLineHeight(t.get(58)),e.hasChanged(74)){const n=t.get(74);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(130)){const n=t.get(130),r=n.contentWidth,o=n.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new i2(r,s.contentWidth,o,this._getContentHeight(r,o,a)))}else this._updateHeight();e.hasChanged(102)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const r=this._configuration.options.get(91);return r.horizontal===2||e>=t?0:r.horizontalScrollbarSize}_getContentHeight(e,t,n){const r=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return r.get(93)?o+=Math.max(0,t-r.get(58)-r.get(74).bottom):o+=this._getHorizontalScrollbarHeight(e,n),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,r=e.contentWidth;this._scrollable.setScrollDimensions(new i2(t,e.contentWidth,n,this._getContentHeight(t,n,r)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new fee(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new fee(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(e){const t=this._configuration.options,n=t.get(131),r=t.get(43);if(n.isViewportWrapping){const o=t.get(130),s=t.get(64);return e>o.contentWidth+r.typicalHalfwidthCharacterWidth&&s.enabled&&s.side==="right"?e+o.verticalScrollbarWidth:e}else{const o=t.get(92)*r.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(e+o,s)}}setMaxLineWidth(e){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new i2(t.width,this._computeContentWidth(e),t.height,t.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition();let t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),r=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-r,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){return this._linesLayout.getVerticalOffsetForLineNumber(e)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}function r6(i,e){return i===null?e?_3.INSTANCE:v3.INSTANCE:new $Oe(i,e)}class $Oe{constructor(e,t){this._lineBreakData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getLineBreakData(){return this._lineBreakData}getViewLineCount(){return this._isVisible?this._lineBreakData.getOutputLineCount():0}getInputStartOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,0)}getInputEndOffsetOfOutputLineIndex(e){return this._lineBreakData.translateToInputOffset(e,this._lineBreakData.getMaxOutputOffset(e))}getViewLineContent(e,t,n){this.assertVisible();const r=n>0?this._lineBreakData.breakOffsets[n-1]:0,o=n<this._lineBreakData.breakOffsets.length?this._lineBreakData.breakOffsets[n]:this._lineBreakData.breakOffsets[this._lineBreakData.breakOffsets.length-1];let s;if(this._lineBreakData.injectionOffsets!==null){const a=this._lineBreakData.injectionOffsets.map((u,d)=>new nf(0,0,u+1,this._lineBreakData.injectionOptions[d],0));s=nf.applyInjectedText(e.getLineContent(t),a).substring(r,o)}else s=e.getValueInRange({startLineNumber:t,startColumn:r+1,endLineNumber:t,endColumn:o+1});return n>0&&(s=xee(this._lineBreakData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,n){return this.assertVisible(),this._lineBreakData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this.assertVisible(),this._lineBreakData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){this.assertVisible();const r=this._lineBreakData,o=n>0?r.wrappedTextIndentLength:0,s=r.injectionOffsets,a=r.injectionOptions;let u,d;if(s){const b=e.getLineTokens(t).withInserted(s.map((E,A)=>({offset:E,text:a[A].content,tokenMetadata:es.defaultTokenMetadata}))),L=n>0?r.breakOffsets[n-1]:0,S=r.breakOffsets[n];u=b.sliceAndInflate(L,S,o),d=new Array;let y=0;for(let E=0;E<s.length;E++){const A=a[E].content.length,N=s[E]+y,V=s[E]+y+A;if(N>S)break;if(L<V){const R=a[E];if(R.inlineClassName){const M=n>0?r.wrappedTextIndentLength:0,K=M+Math.max(N-L,0),X=M+Math.min(V-L,S);K!==X&&d.push(new ZAe(K,X,R.inlineClassName,R.inlineClassNameAffectsLetterSpacing))}}y+=A}}else{const b=this.getInputStartOffsetOfOutputLineIndex(n),L=this.getInputEndOffsetOfOutputLineIndex(n);u=e.getLineTokens(t).sliceAndInflate(b,L,o),d=null}let h=u.getLineContent();n>0&&(h=xee(r.wrappedTextIndentLength)+h);const f=this._lineBreakData.getMinOutputOffset(n)+1,p=h.length+1,m=n+1<this.getViewLineCount(),v=n===0?0:r.breakOffsetsVisibleColumn[n-1];return new dq(h,m,f,p,v,u,d)}getViewLinesData(e,t,n,r,o,s,a){this.assertVisible();for(let u=n;u<r;u++){let d=o+u-n;if(!s[d]){a[d]=null;continue}a[d]=this.getViewLineData(e,t,u)}}getModelColumnOfViewPosition(e,t){return this.assertVisible(),this._lineBreakData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this.assertVisible(),this._lineBreakData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this.assertVisible();const n=this._lineBreakData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const r=t.lineNumber-e;return this._lineBreakData.normalizeOutputPosition(e,t.column-1,n).toPosition(r)}getInjectedTextAt(e,t){return this._lineBreakData.getInjectedText(e,t-1)}assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class _3{constructor(){}isVisible(){return!0}setVisible(e){return e?this:v3.INSTANCE}getLineBreakData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let r=e.getLineTokens(t),o=r.getLineContent();return new dq(o,!1,1,o.length+1,0,r.inflate(),null)}getViewLinesData(e,t,n,r,o,s,a){if(!s[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Le(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}_3.INSTANCE=new _3;class v3{constructor(){}isVisible(){return!1}setVisible(e){return e?_3.INSTANCE:this}getLineBreakData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,r,o,s,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}v3.INSTANCE=new v3;let o6=[""];function xee(i){if(i>=o6.length)for(let e=1;e<=i;e++)o6[e]=zOe(e);return o6[i]}function zOe(i){return new Array(i+1).join(" ")}class UOe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=qC(e);const n=this.values,r=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=qC(e),t=qC(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=qC(e),t=qC(t);const n=this.values,r=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=qC(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,r=0,o=0,s=0;for(;t<=n;)if(r=t+(n-t)/2|0,o=this.prefixSum[r],s=o-this.values[r],e<s)n=r-1;else if(e>=o)t=r+1;else break;return new yde(r,e-s)}}class jOe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new yde(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=LA(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],r=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=r+n;for(let o=0;o<n;o++)this._indexBySum[r+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class yde{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class KOe{constructor(e,t,n,r,o,s,a,u,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=o,this.tabSize=s,this.wrappingStrategy=a,this.wrappingColumn=u,this.wrappingIndent=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new qOe(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),r=this.model.getInjectedTextDecorations(this._editorId),o=n.length,s=this.createLineBreaksComputer(),a=new ly(nf.fromDecorations(r));for(let b=0;b<o;b++){const L=a.takeWhile(S=>S.lineNumber===b+1);s.addRequest(n[b],L,t?t[b]:null)}const u=s.finalize();let d=[],h=this.hiddenAreasDecorationIds.map(b=>this.model.getDecorationRange(b)).sort(Q.compareRangesUsingStarts),f=1,p=0,m=-1,v=m+1<h.length?p+1:o+2;for(let b=0;b<o;b++){let L=b+1;L===v&&(m++,f=h[m].startLineNumber,p=h[m].endLineNumber,v=m+1<h.length?p+1:o+2);let S=L>=f&&L<=p,y=r6(u[b],!S);d[b]=y.getViewLineCount(),this.modelLineProjections[b]=y}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new jOe(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(p=>this.model.validateRange(p));let n=GOe(t),r=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(Q.compareRangesUsingStarts);if(n.length===r.length){let p=!1;for(let m=0;m<n.length;m++)if(!n[m].equalsRange(r[m])){p=!0;break}if(!p)return!1}const o=n.map(p=>({range:p,options:Sn.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);let s=n,a=1,u=0,d=-1,h=d+1<s.length?u+1:this.modelLineProjections.length+2,f=!1;for(let p=0;p<this.modelLineProjections.length;p++){let m=p+1;m===h&&(d++,a=s[d].startLineNumber,u=s[d].endLineNumber,h=d+1<s.length?u+1:this.modelLineProjections.length+2);let v=!1;if(m>=a&&m<=u?this.modelLineProjections[p].isVisible()&&(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!1),v=!0):(f=!0,this.modelLineProjections[p].isVisible()||(this.modelLineProjections[p]=this.modelLineProjections[p].setVisible(!0),v=!0)),v){let b=this.modelLineProjections[p].getViewLineCount();this.projectedModelLineLineCounts.setValue(p,b)}}return f||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,r){const o=this.fontInfo.equals(e),s=this.wrappingStrategy===t,a=this.wrappingColumn===n,u=this.wrappingIndent===r;if(o&&s&&a&&u)return!1;const d=o&&s&&!a&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=r;let h=null;if(d){h=[];for(let f=0,p=this.modelLineProjections.length;f<p;f++)h[f]=this.modelLineProjections[f].getLineBreakData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new KH(r,o)}onModelLinesInserted(e,t,n,r){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible();let s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,u=[],d=[];for(let h=0,f=r.length;h<f;h++){let p=r6(r[h],!o);u.push(p);let m=p.getViewLineCount();a+=m,d[h]=m}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(u).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new GH(s,s+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let r=t-1,o=this.modelLineProjections[r].getViewLineCount(),s=this.modelLineProjections[r].isVisible(),a=r6(n,s);this.modelLineProjections[r]=a;let u=this.modelLineProjections[r].getViewLineCount(),d=!1,h=0,f=-1,p=0,m=-1,v=0,b=-1;o>u?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+u-1,v=f+1,b=v+(o-u)-1,d=!0):o<u?(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+o-1,p=f+1,m=p+(u-o)-1,d=!0):(h=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,f=h+u-1),this.projectedModelLineLineCounts.setValue(r,u);const L=h<=f?new bde(h,f):null,S=p<=m?new GH(p,m):null,y=v<=b?new KH(v,b):null;return[d,L,S,y]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const r=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.getActiveIndentGuide(r.lineNumber,o.lineNumber,s.lineNumber),u=this.convertModelPositionToViewPosition(a.startLineNumber,1),d=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:u.lineNumber,endLineNumber:d.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,r=t.remainder;return new Dee(n+1,r)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Le(e.modelLineNumber,r)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),r=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Le(e.modelLineNumber,r)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),r=this.getViewLineInfo(t),o=new Array;let s=this.getModelStartPositionOfViewLine(n),a=new Array;for(let u=n.modelLineNumber;u<=r.modelLineNumber;u++){const d=this.modelLineProjections[u-1];if(d.isVisible()){let h=u===n.modelLineNumber?n.modelLineWrappedLineIdx:0,f=u===r.modelLineNumber?r.modelLineWrappedLineIdx+1:d.getViewLineCount();for(let p=h;p<f;p++)a.push(new Dee(u,p))}if(!d.isVisible()&&s){const h=new Le(u-1,this.model.getLineMaxColumn(u-1)+1),f=Q.fromPositions(s,h);o.push(new Iee(f,a)),a=[],s=null}else d.isVisible()&&!s&&(s=new Le(u,1))}if(s){const u=Q.fromPositions(s,this.getModelEndPositionOfViewLine(r));o.push(new Iee(u,a))}return o}getViewLinesBracketGuides(e,t,n,r){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,s=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const u=a.modelRange.startLineNumber,d=this.model.getLinesBracketGuides(u,a.modelRange.endLineNumber,o,r);for(const h of a.viewLines)if(h.isWrappedLineContinuation&&this.getMinColumnOfViewLine(h)===1)s.push([]);else{let f=d[h.modelLineNumber-u];f=f.map(p=>p.horizontalLine?new Ow(p.visibleColumn,p.className,new RH(p.horizontalLine.top,this.convertModelPositionToViewPosition(h.modelLineNumber,p.horizontalLine.endColumn).column)):p),s.push(f)}}return s}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[],s=[],a=[];const u=n.lineNumber-1,d=r.lineNumber-1;let h=null;for(let v=u;v<=d;v++){const b=this.modelLineProjections[v];if(b.isVisible()){let L=b.getViewLineNumberOfModelPosition(0,v===u?n.column:1),S=b.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(v+1)),y=S-L+1,E=0;y>1&&b.getViewLineMinColumn(this.model,v+1,S)===1&&(E=L===0?1:2),s.push(y),a.push(E),h===null&&(h=new Le(v+1,0))}else h!==null&&(o=o.concat(this.model.getLinesIndentGuides(h.lineNumber,v)),h=null)}h!==null&&(o=o.concat(this.model.getLinesIndentGuides(h.lineNumber,r.lineNumber)),h=null);const f=t-e+1;let p=new Array(f),m=0;for(let v=0,b=o.length;v<b;v++){let L=o[v],S=Math.min(f-m,s[v]),y=a[v],E;y===2?E=0:y===1?E=1:E=S;for(let A=0;A<S;A++)A===E&&(L=0),p[m++]=L}return p}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let r=this.projectedModelLineLineCounts.getIndexOf(e-1),o=e,s=r.index,a=r.remainder,u=[];for(let d=s,h=this.model.getLineCount();d<h;d++){let f=this.modelLineProjections[d];if(!f.isVisible())continue;let p=d===s?a:0,m=f.getViewLineCount()-p,v=!1;o+m>t&&(v=!0,m=t-o+1);let b=p+m;if(f.getViewLinesData(this.model,d+1,p,b,o-e,n,u),o+=m,v)break}return u}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let r=this.projectedModelLineLineCounts.getIndexOf(e-1),o=r.index,s=r.remainder,a=this.modelLineProjections[o],u=a.getViewLineMinColumn(this.model,o+1,s),d=a.getViewLineMaxColumn(this.model,o+1,s);t<u&&(t=u),t>d&&(t=d);let h=a.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new Le(o+1,h)).equals(n)?new Le(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),r=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e);let r=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Le(n.modelLineNumber,r))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new Q(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2){const r=this.model.validatePosition(new Le(e,t)),o=r.lineNumber,s=r.column;let a=o-1,u=!1;for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,u=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new Le(1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(a);let h;return u?h=this.modelLineProjections[a].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(a+1),n):h=this.modelLineProjections[o-1].getViewPositionOfModelPosition(d,s,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return Q.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),r=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new Q(n.lineNumber,n.column,r.lineNumber,r.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new Q(r.lineNumber,1,o.lineNumber,o.column),t,n);let s=[];const a=r.lineNumber-1,u=o.lineNumber-1;let d=null;for(let m=a;m<=u;m++)if(this.modelLineProjections[m].isVisible())d===null&&(d=new Le(m+1,m===a?r.column:1));else if(d!==null){const b=this.model.getLineMaxColumn(m);s=s.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,m,b),t,n)),d=null}d!==null&&(s=s.concat(this.model.getDecorationsInRange(new Q(d.lineNumber,d.column,o.lineNumber,o.column),t,n)),d=null),s.sort((m,v)=>{const b=Q.compareRangesUsingStarts(m.range,v.range);return b===0?m.id<v.id?-1:m.id>v.id?1:0:b});let h=[],f=0,p=null;for(const m of s){const v=m.id;p!==v&&(p=v,h[f++]=m)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function GOe(i){if(i.length===0)return[];const e=i.slice();e.sort(Q.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,r=e[0].endLineNumber;for(let o=1,s=e.length;o<s;o++){let a=e[o];a.startLineNumber>r+1?(t.push(new Q(n,1,r,1)),n=a.startLineNumber,r=a.endLineNumber):a.endLineNumber>r&&(r=a.endLineNumber)}return t.push(new Q(n,1,r,1)),t}class Dee{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}}class Iee{constructor(e,t){this.modelRange=e,this.viewLines=t}}class qOe{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class YOe{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new ZOe(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,r){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,r)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new KH(t,n)}onModelLinesInserted(e,t,n,r){return new GH(t,n)}onModelLineChanged(e,t,n){return[!1,new bde(t,t),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1;let r=new Array(n);for(let o=0;o<n;o++)r[o]=0;return r}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.getLineTokens(e),n=t.getLineContent();return new dq(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const r=this.model.getLineCount();e=Math.min(Math.max(1,e),r),t=Math.min(Math.max(1,t),r);let o=[];for(let s=e;s<=t;s++){let a=s-e;n[a]||(o[a]=null),o[a]=this.getViewLineData(s)}return o}getDecorationsInRange(e,t,n){return this.model.getDecorationsInRange(e,t,n)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class ZOe{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}class XOe{constructor(e,t,n,r,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=r,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const r=e.range,o=e.options;let s;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new Le(r.startLineNumber,1),0),u=this._coordinatesConverter.convertModelPositionToViewPosition(new Le(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);s=new Q(a.lineNumber,a.column,u.lineNumber,u.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new _de(s,o),this._decorationsCache[t]=n}return n}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsViewportData(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}_getDecorationsViewportData(e){const t=this._linesCollection.getDecorationsInRange(e,this.editorId,xG(this.configuration.options)),n=e.startLineNumber,r=e.endLineNumber;let o=[],s=0,a=[];for(let u=n;u<=r;u++)a[u-n]=[];for(let u=0,d=t.length;u<d;u++){let h=t[u],f=h.options;if(!mq(this.model,h))continue;let p=this._getOrCreateViewModelDecoration(h),m=p.range;if(o[s++]=p,f.inlineClassName){let v=new R2(m,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(n,m.startLineNumber),L=Math.min(r,m.endLineNumber);for(let S=b;S<=L;S++)a[S-n].push(v)}if(f.beforeContentClassName&&n<=m.startLineNumber&&m.startLineNumber<=r){let v=new R2(new Q(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),f.beforeContentClassName,1);a[m.startLineNumber-n].push(v)}if(f.afterContentClassName&&n<=m.endLineNumber&&m.endLineNumber<=r){let v=new R2(new Q(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),f.afterContentClassName,2);a[m.endLineNumber-n].push(v)}}return{decorations:o,inlineDecorations:a}}}function mq(i,e){return!(e.options.hideInCommentTokens&&QOe(i,e.range,n=>n===1))}function QOe(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const r=i.getLineTokens(n),o=n===e.startLineNumber,s=n===e.endLineNumber;let a=o?r.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<r.getCount()&&!(s&&r.getStartOffset(a)>e.endColumn-1);){if(!t(r.getStandardTokenType(a)))return!1;a++}}return!0}const JOe={ModesRegistry:"editor.modesRegistry"};class eMe{constructor(){this._onDidChangeLanguages=new be,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[],this._dynamicLanguages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return[].concat(this._languages).concat(this._dynamicLanguages)}}const sb=new eMe;Zr.add(JOe.ModesRegistry,sb);const jS="plaintext",tMe=".txt";sb.registerLanguage({id:jS,extensions:[tMe],aliases:[C("plainText.alias","Plain Text"),"text"],mimetypes:[$c.text]});vi.register(jS,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0);Zr.as(wC.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1}}}]);class nMe extends Oe{constructor(e,t,n,r,o,s){if(super(),this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new NOe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new Vc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._tokenizeViewportSoon=this._register(new er(()=>this.tokenizeViewport(),50)),this._updateConfigurationViewLineCount=this._register(new er(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStartLine=-1,this._viewportStartLineTrackedRange=null,this._viewportStartLineDelta=0,this.model.isTooLargeForTokenization())this._lines=new YOe(this.model);else{const a=this._configuration.options,u=a.get(43),d=a.get(124),h=a.get(131),f=a.get(123);this._lines=new KOe(this._editorId,this.model,r,o,u,this.model.getOptions().tabSize,d,h.wrappingColumn,f)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Qy(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new HOe(this._configuration,this.getLineCount(),s)),this._register(this.viewLayout.onDidScroll(a=>{a.scrollTopChanged&&this._tokenizeViewportSoon.schedule(),this._eventDispatcher.emitSingleViewEvent(new xOe(a)),this._eventDispatcher.emitOutgoingEvent(new pq(a.oldScrollWidth,a.oldScrollLeft,a.oldScrollHeight,a.oldScrollTop,a.scrollWidth,a.scrollLeft,a.scrollHeight,a.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(a=>{this._eventDispatcher.emitOutgoingEvent(a)})),this._decorations=new XOe(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(a=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,a)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(mM.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new kOe)})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this.invalidateMinimapColorCache(),this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,null,1),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}tokenizeViewport(){const e=this.viewLayout.getLinesViewportData(),t=new Q(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber)),n=this._toModelVisibleRanges(t);for(const r of n)this.model.tokenizeViewport(r.startLineNumber,r.endLineNumber)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new LOe(e)),this._eventDispatcher.emitOutgoingEvent(new gq(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new COe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new wOe)}onDidColorThemeChange(){this._eventDispatcher.emitSingleViewEvent(new DOe)}_onConfigurationChanged(e,t){let n=null;if(this._viewportStartLine!==-1){let h=new Le(this._viewportStartLine,this.getLineMinColumn(this._viewportStartLine));n=this.coordinatesConverter.convertViewPositionToModelPosition(h)}let r=!1;const o=this._configuration.options,s=o.get(43),a=o.get(124),u=o.get(131),d=o.get(123);if(this._lines.setWrappingSettings(s,a,u.wrappingColumn,d)&&(e.emitViewEvent(new UR),e.emitViewEvent(new jR),e.emitViewEvent(new YC(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.getCurrentScrollTop()!==0&&(r=!0),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(80)&&(this._decorations.reset(),e.emitViewEvent(new YC(null))),e.emitViewEvent(new yOe(t)),this.viewLayout.onConfigurationChanged(t),r&&n){const h=this.coordinatesConverter.convertModelPositionToViewPosition(n),f=this.viewLayout.getVerticalOffsetForLineNumber(h.lineNumber);this.viewLayout.setScrollPosition({scrollTop:f+this._viewportStartLineDelta},1)}Vc.shouldRecreate(t)&&(this.cursorConfig=new Vc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,r=!1;const o=e.changes,s=e instanceof tb?e.versionId:null,a=this._lines.createLineBreaksComputer();for(const h of o)switch(h.changeType){case 4:{for(let f=0;f<h.detail.length;f++){const p=h.detail[f];let m=h.injectedTexts[f];m&&(m=m.filter(v=>!v.ownerId||v.ownerId===this._editorId)),a.addRequest(p,m,null)}break}case 2:{let f=null;h.injectedText&&(f=h.injectedText.filter(p=>!p.ownerId||p.ownerId===this._editorId)),a.addRequest(h.detail,f,null);break}}const u=a.finalize(),d=new ly(u);for(const h of o)switch(h.changeType){case 1:{this._lines.onModelFlushed(),t.emitViewEvent(new UR),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break}case 3:{const f=this._lines.onModelLinesDeleted(s,h.fromLineNumber,h.toLineNumber);f!==null&&(t.emitViewEvent(f),this.viewLayout.onLinesDeleted(f.fromLineNumber,f.toLineNumber)),n=!0;break}case 4:{const f=d.takeCount(h.detail.length),p=this._lines.onModelLinesInserted(s,h.fromLineNumber,h.toLineNumber,f);p!==null&&(t.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),n=!0;break}case 2:{const f=d.dequeue(),[p,m,v,b]=this._lines.onModelLineChanged(s,h.lineNumber,f);r=p,m&&t.emitViewEvent(m),v&&(t.emitViewEvent(v),this.viewLayout.onLinesInserted(v.fromLineNumber,v.toLineNumber)),b&&(t.emitViewEvent(b),this.viewLayout.onLinesDeleted(b.fromLineNumber,b.toLineNumber));break}case 5:break}s!==null&&this._lines.acceptVersionId(s),this.viewLayout.onHeightMaybeChanged(),!n&&r&&(t.emitViewEvent(new jR),t.emitViewEvent(new YC(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}if(this._viewportStartLine=-1,this._configuration.setMaxLineNumber(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&this._viewportStartLineTrackedRange){const t=this.model._getTrackedRange(this._viewportStartLineTrackedRange);if(t){const n=this.coordinatesConverter.convertModelPositionToViewPosition(t.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStartLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(this.model.onDidChangeTokens(e=>{let t=[];for(let n=0,r=e.ranges.length;n<r;n++){const o=e.ranges[n],s=this.coordinatesConverter.convertModelPositionToViewPosition(new Le(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new Le(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[n]={fromLineNumber:s,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new IOe(t)),e.tokenizationSupportChanged&&this._tokenizeViewportSoon.schedule()})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new EOe),this.cursorConfig=new Vc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new Vc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new UR),t.emitViewEvent(new jR),t.emitViewEvent(new YC(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new Vc(this.model.getLanguageId(),this.model.getOptions(),this._configuration),this._cursor.updateConfiguration(this.cursorConfig)})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new YC(e))}))}setHiddenAreas(e){let t=!1;try{const n=this._eventDispatcher.beginEmitViewEvents();t=this._lines.setHiddenAreas(e),t&&(n.emitViewEvent(new UR),n.emitViewEvent(new jR),n.emitViewEvent(new YC(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),t&&this._eventDispatcher.emitOutgoingEvent(new See)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(130),t=this._configuration.options.get(58),n=Math.max(20,Math.round(e.height/t)),r=this.viewLayout.getLinesViewportData(),o=Math.max(1,r.completelyVisibleStartLineNumber-n),s=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new Q(o,this.getLineMinColumn(o),s,this.getLineMaxColumn(s)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];let r=[],o=0,s=t.startLineNumber,a=t.startColumn,u=t.endLineNumber,d=t.endColumn;for(let h=0,f=n.length;h<f;h++){const p=n[h].startLineNumber,m=n[h].endLineNumber;m<s||p>u||(s<p&&(r[o++]=new Q(s,a,p-1,this.model.getLineMaxColumn(p-1))),s=m+1,a=1)}return(s<u||s===u&&a<d)&&(r[o++]=new Q(s,a,u,d)),r}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new Q(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,r=t.completelyVisibleEndLineNumber;return new Q(n,this.getLineMinColumn(n),r,this.getLineMaxColumn(r))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),r=this.coordinatesConverter.convertViewPositionToModelPosition(new Le(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:r,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),r=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:r}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getTextModelOptions(){return this.model.getOptions()}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStartLine=e;let r=this.coordinatesConverter.convertViewPositionToModelPosition(new Le(e,this.getLineMinColumn(e)));this._viewportStartLineTrackedRange=this.model._setTrackedRange(this._viewportStartLineTrackedRange,new Q(r.lineNumber,r.column,r.lineNumber,r.column),1);const o=this.viewLayout.getVerticalOffsetForLineNumber(e),s=this.viewLayout.getCurrentScrollTop();this._viewportStartLineDelta=s-o}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,r){return this._lines.getViewLinesBracketGuides(e,t,n,r)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=ka(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Jf(this.getLineContent(e));return t===-1?0:t+2}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewLineRenderingData(e,t){let n=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),s=this._lines.getViewLineData(t),u=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return s.inlineDecorations&&(u=[...u,...s.inlineDecorations.map(d=>d.toInlineDecoration(t))]),new Fu(s.minColumn,s.maxColumn,s.content,s.continuesWithWrappedLine,n,r,s.tokens,u,o,s.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){let r=this._lines.getViewLinesData(e,t,n);return new YAe(this.getTabSize(),r)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,xG(this._configuration.options)),n=new iMe;for(const r of t){const o=r.options,s=o.overviewRuler;if(!s)continue;const a=s.position;if(a===0)continue;const u=s.getColor(e),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.startLineNumber,r.range.startColumn),h=this.coordinatesConverter.getViewLineNumberOfModelPosition(r.range.endLineNumber,r.range.endColumn);n.accept(u,o.zIndex,d,h,a)}return n.asArray}invalidateOverviewRulerColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n&&n.invalidateCachedColor()}}invalidateMinimapColorCache(){const e=this.model.getAllDecorations();for(const t of e){const n=t.options.minimap;n&&n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getModelLineMaxColumn(e){return this.model.getLineMaxColumn(e)}validateModelPosition(e){return this.model.validatePosition(e)}validateModelRange(e){return this.model.validateRange(e)}deduceModelPositionRelativeToViewPosition(e,t,n){const r=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const s=this.model.getOffsetAt(r)+t;return this.model.getPositionAt(s)}getEOL(){return this.model.getEOL()}getPlainTextToCopy(e,t,n){const r=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(Q.compareRangesUsingStarts);let o=!1,s=!1;for(const u of e)u.isEmpty()?o=!0:s=!0;if(!s){if(!t)return"";const u=e.map(h=>h.startLineNumber);let d="";for(let h=0;h<u.length;h++)h>0&&u[h-1]===u[h]||(d+=this.model.getLineContent(u[h])+r);return d}if(o&&t){let u=[],d=0;for(const h of e){const f=h.startLineNumber;h.isEmpty()?f!==d&&u.push(this.model.getLineContent(f)):u.push(this.model.getValueInRange(h,n?2:0)),d=f}return u.length===1?u[0]:u}let a=[];for(const u of e)u.isEmpty()||a.push(this.model.getValueInRange(u,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===jS||e.length!==1)return null;let r=e[0];if(r.isEmpty()){if(!t)return null;const h=r.startLineNumber;r=new Q(h,this.model.getLineMinColumn(h),h,this.model.getLineMaxColumn(h))}const o=this._configuration.options.get(43),s=this._getColorMap(),u=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===js.fontFamily;let d;return u?d=js.fontFamily:(d=o.fontFamily,d=d.replace(/"/g,"'"),/[,']/.test(d)||/[+ ]/.test(d)&&(d=`'${d}'`),d=`${d}, ${js.fontFamily}`),{mode:n,html:`<div style="color: ${s[1]};background-color: ${s[2]};font-family: ${d};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(r,s)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=this.getTabSize();let u="";for(let d=n;d<=o;d++){const h=this.model.getLineTokens(d),f=h.getLineContent(),p=d===n?r-1:0,m=d===o?s-1:f.length;f===""?u+="<br>":u+=ROe(f,h.inflate(),t,p,m,a,As)}return u}_getColorMap(){let e=Wr.getColorMap(),t=["#000000"];if(e)for(let n=1,r=e.length;n<r;n++)t[n]=ye.Format.CSS.formatHex(e[n]);return t}pushStackElement(){this.model.pushStackElement()}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){this._withViewEventsCollector(r=>this._cursor.setStates(r,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(r=>this._cursor.setSelections(r,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new OOe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(r=>this._cursor.executeEdits(r,e,t,n))}startComposition(){this._cursor.setIsDoingComposition(!0),this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._cursor.setIsDoingComposition(!1),this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,r,o){this._executeCursorEdit(s=>this._cursor.compositionType(s,e,t,n,r,o))}paste(e,t,n,r){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,n,r))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealPrimaryCursor(e,t){this._withViewEventsCollector(n=>this._cursor.revealPrimary(n,e,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new u4(e,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(r=>r.emitViewEvent(new u4(e,n,null,0,!0,0)))}revealRange(e,t,n,r,o){this._withViewEventsCollector(s=>s.emitViewEvent(new u4(e,n,null,r,t,o)))}getVerticalOffsetForLineNumber(e){return this.viewLayout.getVerticalOffsetForLineNumber(e)}getScrollTop(){return this.viewLayout.getCurrentScrollTop()}setScrollTop(e,t){this.viewLayout.setScrollPosition({scrollTop:e},t)}setScrollPosition(e,t){this.viewLayout.setScrollPosition(e,t)}deltaScrollNow(e,t){this.viewLayout.deltaScrollNow(e,t)}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new TOe),this._eventDispatcher.emitOutgoingEvent(new See))}setMaxLineWidth(e){this.viewLayout.setMaxLineWidth(e)}_withViewEventsCollector(e){try{const t=this._eventDispatcher.beginEmitViewEvents();e(t)}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class iMe{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,r,o){const s=this._asMap[e];if(s){const a=s.data,u=a[a.length-3],d=a[a.length-1];if(u===o&&d+1>=n){r>d&&(a[a.length-1]=r);return}a.push(o,n,r)}else{const a=new vde(e,t,[o,n,r]);this._asMap[e]=a,this.asArray.push(a)}}}class KA{constructor(...e){this._entries=new Map;for(let[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}var GA;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(GA||(GA={}));(function(i){const e="error",t="warning",n="warn",r="info",o="ignore";function s(u){return u?JN(e,u)?i.Error:JN(t,u)||JN(n,u)?i.Warning:JN(r,u)?i.Info:i.Ignore:i.Ignore}i.fromValue=s;function a(u){switch(u){case i.Error:return e;case i.Warning:return t;case i.Info:return r;default:return o}}i.toString=a})(GA||(GA={}));const Ur=GA,fo=gi("notificationService");class rMe{}const il=gi("accessibilityService"),vM=new Dt("accessibilityModeEnabled",!1);class B2{constructor(e,t,n,r,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let r=this.breakOffsets[e]-t;return e>0&&(r+=this.wrappedTextIndentLength),r}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let r=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&r>this.injectionOffsets[o];o++)r<this.injectionOffsets[o]+this.injectionOptions[o].content.length?r=this.injectionOffsets[o]:r-=this.injectionOptions[o].content.length;return r}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&!(e<this.injectionOffsets[r]||t!==1&&e===this.injectionOffsets[r]);r++)n+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,r=this.breakOffsets.length-1,o=0,s=0;for(;n<=r;){o=n+(r-n)/2|0;const u=this.breakOffsets[o];if(s=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=s)r=o-1;else if(e>u)n=o+1;else break;else if(e<s)r=o-1;else if(e>=u)n=o+1;else break}let a=e-s;return o>0&&(a+=this.wrappedTextIndentLength),new KR(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const r=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,n);if(o!==r)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new KR(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const r=this.getOutputLineCount()-1;if(e<r&&t===this.getMaxOutputOffset(e))return new KR(e+1,this.getMinOutputOffset(e+1))}return new KR(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2)return e===n.offsetInInputWithInjections+n.length?n.offsetInInputWithInjections+n.length:n.offsetInInputWithInjections;if(t===1){let s=n.offsetInInputWithInjections+n.length,a=n.injectedTextIndex;for(;a+1<this.injectionOffsets.length&&this.injectionOffsets[a+1]===this.injectionOffsets[a];)s+=this.injectionOptions[a+1].content.length,a++;return s}let r=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)r-=this.injectionOptions[o-1].content.length,o++;return r}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.getInjectedTextAtOffset(n);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let r=0;for(let o=0;o<t.length;o++){const s=n[o].content.length,a=t[o]+r,u=t[o]+r+s;if(a>e)break;if(e<=u)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:s};r+=s}}}}class KR{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new Le(e+this.outputLineIndex,this.outputOffset+1)}}class _q{constructor(e,t){this.classifier=new oMe(e,t)}static create(e){return new _q(e.get(119),e.get(118))}createLineBreaksComputer(e,t,n,r){const o=[],s=[],a=[];return{addRequest:(u,d,h)=>{o.push(u),s.push(d),a.push(h)},finalize:()=>{const u=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth;let d=[];for(let h=0,f=o.length;h<f;h++){const p=s[h],m=a[h];m&&!m.injectionOptions&&!p?d[h]=sMe(this.classifier,m,o[h],t,n,u,r):d[h]=aMe(this.classifier,o[h],p,t,n,u,r)}return qH.length=0,YH.length=0,d}}}}class oMe extends $S{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let qH=[],YH=[];function sMe(i,e,t,n,r,o,s){if(r===-1)return null;const a=t.length;if(a<=1)return null;const u=e.breakOffsets,d=e.breakOffsetsVisibleColumn,h=Sde(t,n,r,o,s),f=r-h;let p=qH,m=YH,v=0,b=0,L=0,S=r;const y=u.length;let E=0;if(E>=0){let A=Math.abs(d[E]-S);for(;E+1<y;){const N=Math.abs(d[E+1]-S);if(N>=A)break;A=N,E++}}for(;E<y;){let A=E<0?0:u[E],N=E<0?0:d[E];b>A&&(A=b,N=L);let V=0,R=0,M=0,K=0;if(N<=S){let $=N,D=A===0?0:t.charCodeAt(A-1),T=A===0?0:i.get(D),F=!0;for(let B=A;B<a;B++){const U=B,G=t.charCodeAt(B);let Z,z;if(Vo(G)?(B++,Z=0,z=2):(Z=i.get(G),z=W2(G,$,n,o)),U>b&&ZH(D,T,G,Z)&&(V=U,R=$),$+=z,$>S){U>b?(M=U,K=$-z):(M=B+1,K=$),$-R>f&&(V=0),F=!1;break}D=G,T=Z}if(F){v>0&&(p[v]=u[u.length-1],m[v]=d[u.length-1],v++);break}}if(V===0){let $=N,D=t.charCodeAt(A),T=i.get(D),F=!1;for(let B=A-1;B>=b;B--){const U=B+1,G=t.charCodeAt(B);if(G===9){F=!0;break}let Z,z;if(zy(G)?(B--,Z=0,z=2):(Z=i.get(G),z=ag(G)?o:1),$<=S){if(M===0&&(M=U,K=$),$<=S-f)break;if(ZH(G,Z,D,T)){V=U,R=$;break}}$-=z,D=G,T=Z}if(V!==0){const B=f-(K-R);if(B<=n){const U=t.charCodeAt(M);let G;Vo(U)?G=2:G=W2(U,K,n,o),B-G<0&&(V=0)}}if(F){E--;continue}}if(V===0&&(V=M,R=K),V<=b){const $=t.charCodeAt(b);Vo($)?(V=b+2,R=L+2):(V=b+1,R=L+W2($,L,n,o))}for(b=V,p[v]=V,L=R,m[v]=R,v++,S=R+f;E<0||E<y&&d[E]<R;)E++;let X=Math.abs(d[E]-S);for(;E+1<y;){const $=Math.abs(d[E+1]-S);if($>=X)break;X=$,E++}}return v===0?null:(p.length=v,m.length=v,qH=e.breakOffsets,YH=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function aMe(i,e,t,n,r,o,s){const a=nf.applyInjectedText(e,t);let u,d;if(t&&t.length>0?(u=t.map(R=>R.options),d=t.map(R=>R.column-1)):(u=null,d=null),r===-1)return u?new B2(d,u,[a.length],[],0):null;const h=a.length;if(h<=1)return u?new B2(d,u,[a.length],[],0):null;const f=Sde(a,n,r,o,s),p=r-f;let m=[],v=[],b=0,L=0,S=0,y=r,E=a.charCodeAt(0),A=i.get(E),N=W2(E,0,n,o),V=1;Vo(E)&&(N+=1,E=a.charCodeAt(1),A=i.get(E),V++);for(let R=V;R<h;R++){const M=R,K=a.charCodeAt(R);let X,$;Vo(K)?(R++,X=0,$=2):(X=i.get(K),$=W2(K,N,n,o)),ZH(E,A,K,X)&&(L=M,S=N),N+=$,N>y&&((L===0||N-S>p)&&(L=M,S=N-$),m[b]=L,v[b]=S,b++,y=S+p,L=0),E=K,A=X}return b===0&&(!t||t.length===0)?null:(m[b]=h,v[b]=N,new B2(d,u,m,v,f))}function W2(i,e,t,n){return i===9?t-e%t:ag(i)||i<32?n:1}function kee(i,e){return e-i%e}function ZH(i,e,t,n){return t!==32&&(e===2||e===3&&n!==2||n===1||n===3&&e!==1)}function Sde(i,e,t,n,r){let o=0;if(r!==0){const s=ka(i);if(s!==-1){for(let u=0;u<s;u++){const d=i.charCodeAt(u)===9?kee(o,e):1;o+=d}const a=r===3?2:r===2?1:0;for(let u=0;u<a;u++){const d=kee(o,e);o+=d}o+n>t&&(o=0)}}return o}var s6;const a6=(s6=window.trustedTypes)===null||s6===void 0?void 0:s6.createPolicy("domLineBreaksComputer",{createHTML:i=>i});class vq{static create(){return new vq}constructor(){}createLineBreaksComputer(e,t,n,r){let o=[],s=[];return{addRequest:(a,u,d)=>{o.push(a),s.push(u)},finalize:()=>lMe(o,e,t,n,r,s)}}}function lMe(i,e,t,n,r,o){var s;function a(M){const K=o[M];if(K){const X=nf.applyInjectedText(i[M],K),$=K.map(T=>T.options),D=K.map(T=>T.column-1);return new B2(D,$,[X.length],[],0)}else return null}if(n===-1){const M=[];for(let K=0,X=i.length;K<X;K++)M[K]=a(K);return M}const u=Math.round(n*e.typicalHalfwidthCharacterWidth),h=Math.round(t*(r===3?2:r===2?1:0)),f=Math.ceil(e.spaceWidth*h),p=document.createElement("div");Na.applyFontInfoSlow(p,e);const m=Tb(1e4),v=[],b=[],L=[],S=[],y=[];for(let M=0;M<i.length;M++){const K=nf.applyInjectedText(i[M],o[M]);let X=0,$=0,D=u;if(r!==0)if(X=ka(K),X===-1)X=0;else{for(let U=0;U<X;U++){const G=K.charCodeAt(U)===9?t-$%t:1;$+=G}const B=Math.ceil(e.spaceWidth*$);B+e.typicalFullwidthCharacterWidth>u?(X=0,$=0):D=u-B}const T=K.substr(X),F=uMe(T,$,t,D,m,f);v[M]=X,b[M]=$,L[M]=T,S[M]=F[0],y[M]=F[1]}const E=m.build(),A=(s=a6==null?void 0:a6.createHTML(E))!==null&&s!==void 0?s:E;p.innerHTML=A,p.style.position="absolute",p.style.top="10000",p.style.wordWrap="break-word",document.body.appendChild(p);let N=document.createRange();const V=Array.prototype.slice.call(p.children,0);let R=[];for(let M=0;M<i.length;M++){const K=V[M],X=cMe(N,K,L[M],S[M]);if(X===null){R[M]=a(M);continue}const $=v[M],D=b[M]+h,T=y[M],F=[];for(let Z=0,z=X.length;Z<z;Z++)F[Z]=T[X[Z]];if($!==0)for(let Z=0,z=X.length;Z<z;Z++)X[Z]+=$;let B,U;const G=o[M];G?(B=G.map(Z=>Z.options),U=G.map(Z=>Z.column-1)):(B=null,U=null),R[M]=new B2(U,B,X,F,D)}return document.body.removeChild(p),R}function uMe(i,e,t,n,r,o){if(o!==0){let p=String(o);r.appendASCIIString('<div style="text-indent: -'),r.appendASCIIString(p),r.appendASCIIString("px; padding-left: "),r.appendASCIIString(p),r.appendASCIIString("px; box-sizing: border-box; width:")}else r.appendASCIIString('<div style="width:');r.appendASCIIString(String(n)),r.appendASCIIString('px;">');const s=i.length;let a=e,u=0,d=[],h=[],f=0<s?i.charCodeAt(0):0;r.appendASCIIString("<span>");for(let p=0;p<s;p++){p!==0&&p%16384===0&&r.appendASCIIString("</span><span>"),d[p]=u,h[p]=a;const m=f;f=p+1<s?i.charCodeAt(p+1):0;let v=1,b=1;switch(m){case 9:v=t-a%t,b=v;for(let L=1;L<=v;L++)L<v?r.write1(160):r.appendASCII(32);break;case 32:f===32?r.write1(160):r.appendASCII(32);break;case 60:r.appendASCIIString("&lt;");break;case 62:r.appendASCIIString("&gt;");break;case 38:r.appendASCIIString("&amp;");break;case 0:r.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.write1(65533);break;default:ag(m)&&b++,m<32?r.write1(9216+m):r.write1(m)}u+=v,a+=b}return r.appendASCIIString("</span>"),d[i.length]=u,h[i.length]=a,r.appendASCIIString("</div>"),[d,h]}function cMe(i,e,t,n){if(t.length<=1)return null;const r=Array.prototype.slice.call(e.children,0),o=[];try{XH(i,r,n,0,null,t.length-1,null,o)}catch(s){return console.log(s),null}return o.length===0?null:(o.push(t.length),o)}function XH(i,e,t,n,r,o,s,a){if(n===o||(r=r||l6(i,e,t[n],t[n+1]),s=s||l6(i,e,t[o],t[o+1]),Math.abs(r[0].top-s[0].top)<=.1))return;if(n+1===o){a.push(o);return}const u=n+(o-n)/2|0,d=l6(i,e,t[u],t[u+1]);XH(i,e,t,n,r,u,d,a),XH(i,e,t,u,d,o,s,a)}function l6(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}var dMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},e1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let hMe=0,fMe=class{constructor(e,t,n,r,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=r,this.listenersToRemove=o}dispose(){oi(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}},qA=class c4 extends Oe{constructor(e,t,n,r,o,s,a,u,d,h){super(),this._onDidDispose=this._register(new be),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new be),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new be),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new be),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new be),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new be),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeConfiguration=this._register(new be),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new be),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new be),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new be),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new be),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new be),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Tee),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Tee),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new be),this.onWillType=this._onWillType.event,this._onDidType=this._register(new be),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new be),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new be),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new be),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new be),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new be),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new be),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new be),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new be),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onContextMenu=this._register(new be),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new be),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new be),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new be),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new be),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new be),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new be),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new be),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new be),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new be),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null;const f=Object.assign({},t);this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++hMe,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this.isSimpleWidget=n.isSimpleWidget||!1,this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(f,h)),this._register(this._configuration.onDidChange(m=>{this._onDidChangeConfiguration.fire(m);const v=this._configuration.options;if(m.hasChanged(130)){const b=v.get(130);this._onDidLayoutChange.fire(b)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=d,this._codeEditorService=o,this._commandService=s,this._themeService=u,this._register(new gMe(this,this._contextKeyService)),this._register(new pMe(this,this._contextKeyService)),this._instantiationService=r.createChild(new KA([dn,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new mMe(e),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=ay.getEditorContributions();for(const m of p){if(this._contributions[m.id]){gn(new Error(`Cannot have two contributions with the same id ${m.id}`));continue}try{const v=this._instantiationService.createInstance(m.ctor,this);this._contributions[m.id]=v}catch(v){gn(v)}}ay.getEditorActions().forEach(m=>{if(this._actions[m.id]){gn(new Error(`Cannot have two actions with the same id ${m.id}`));return}const v=new Cde(m.id,m.label,m.alias,ml(m.precondition),()=>this._instantiationService.invokeFunction(b=>Promise.resolve(m.runEditorCommand(b,this,null))),this._contextKeyService);this._actions[v.id]=v}),this._codeEditorService.addCodeEditor(this)}_createConfiguration(e,t){return new Na(this.isSimpleWidget,e,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _M.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let t=0,n=e.length;t<n;t++){const r=e[t];this._contributions[r].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e)}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?ii.getWordAtPosition(this._modelData.model,this._configuration.options.get(116),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const t=e;if(this._modelData===null&&t===null||this._modelData&&this._modelData.model===t)return;const n=this.hasTextFocus(),r=this._detachModel();this._attachModel(t),n&&this.hasModel()&&this.focus();const o={oldModelUrl:r?r.uri:null,newModelUrl:t?t.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(r)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(let n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetForPosition(e,t,n){const r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}getTopForLineNumber(e){return this._modelData?c4._getVerticalOffsetForPosition(this._modelData,e,1):-1}getTopForPosition(e,t){return this._modelData?c4._getVerticalOffsetForPosition(this._modelData,e,t):-1}setHiddenAreas(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map(t=>Q.lift(t)))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return ur.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){if(this._modelData){if(!Le.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,r){if(!this._modelData)return;if(!Q.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",n,s,t,r)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,r){if(!Le.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new Q(e.lineNumber,e.column,e.lineNumber,e.column),t,n,r)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){const t=yt.isISelection(e),n=Q.isIRange(e);if(!t&&!n)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e);else if(n){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r)}}_setSelectionImpl(e){if(!this._modelData)return;const t=new yt(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[t])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,r){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Q(e,1,t,1),n,!1,r)}revealRange(e,t=0,n=!1,r=!0){this._revealRange(e,n?1:0,r,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,r){if(!Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(Q.lift(e),t,n,r)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let r=0,o=e.length;r<o;r++)if(!yt.isISelection(e[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.setScrollPosition(e,t)}saveViewState(){if(!this._modelData)return null;const e={},t=Object.keys(this._contributions);for(const o of t){const s=this._contributions[o];typeof s.saveViewState=="function"&&(e[o]=s.saveViewState())}const n=this._modelData.viewModel.saveCursorState(),r=this._modelData.viewModel.saveState();return{cursorState:n,viewState:r,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]);const r=t.contributionsState||{},o=Object.keys(this._contributions);for(let a=0,u=o.length;a<u;a++){const d=o[a],h=this._contributions[d];typeof h.restoreViewState=="function"&&h.restoreViewState(r[d])}const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],t=Object.keys(this._actions);for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions[e]||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=n;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=n;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=n;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=n;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null);return}case"cut":this._cut(e);return}const r=this.getAction(t);if(r){Promise.resolve(r.run()).then(void 0,gn);return}this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,r,o){this._modelData&&this._modelData.viewModel.compositionType(t,n,r,o,e)}_paste(e,t,n,r,o){if(!this._modelData||t.length===0)return;const s=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(t,n,r,e);const a=this._modelData.viewModel.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({range:new Q(s.lineNumber,s.column,a.lineNumber,a.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const r=ay.getEditorCommand(t);return r?(n=n||{},n.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(r.runEditorCommand(o,this,n)).then(void 0,gn)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(80)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(80))return!1;let r;return n?Array.isArray(n)?r=()=>n:r=n:r=()=>null,this._modelData.viewModel.executeEdits(e,t,r),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,xG(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(130)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarMouseDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarMouseDown(e)}layout(e){this._configuration.observeReferenceElement(e),this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,r=n.get(130),o=c4._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),s=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft();return{top:o,left:s,height:n.get(58)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.view.render(!0,e)}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Na.applyFontInfoSlow(e,this._configuration.options.get(43))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.reserveHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setMaxLineNumber(e.getLineCount()),e.onBeforeAttached();const n=new nMe(this._id,this._configuration,e,vq.create(),_q.create(this._configuration.options),s=>og(s));t.push(e.onDidChangeDecorations(s=>this._onDidChangeModelDecorations.fire(s))),t.push(e.onDidChangeLanguage(s=>{this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(s)})),t.push(e.onDidChangeLanguageConfiguration(s=>this._onDidChangeModelLanguageConfiguration.fire(s))),t.push(e.onDidChangeContent(s=>this._onDidChangeModelContent.fire(s))),t.push(e.onDidChangeOptions(s=>this._onDidChangeModelOptions.fire(s))),t.push(e.onWillDispose(()=>this.setModel(null))),t.push(n.onEvent(s=>{switch(s.kind){case 0:this._onDidContentSizeChange.fire(s);break;case 1:this._editorTextFocus.setValue(s.hasFocus);break;case 2:this._onDidScrollChange.fire(s);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{s.reachedMaxCursorCount&&this._notificationService.warn(C("cursors.maximum","The number of cursors has been limited to {0}.",Qy.MAX_CURSOR_COUNT));const a=[];for(let h=0,f=s.selections.length;h<f;h++)a[h]=s.selections[h].getPosition();const u={position:a[0],secondaryPositions:a.slice(1),reason:s.reason,source:s.source};this._onDidChangeCursorPosition.fire(u);const d={selection:s.selections[0],secondarySelections:s.selections.slice(1),modelVersionId:s.modelVersionId,oldSelections:s.oldSelections,oldModelVersionId:s.oldModelVersionId,source:s.source,reason:s.reason};this._onDidChangeCursorSelection.fire(d);break}}}));const[r,o]=this._createView(n);if(o){this._domElement.appendChild(r.domNode.domNode);let s=Object.keys(this._contentWidgets);for(let a=0,u=s.length;a<u;a++){const d=s[a];r.addContentWidget(this._contentWidgets[d])}s=Object.keys(this._overlayWidgets);for(let a=0,u=s.length;a<u;a++){const d=s[a];r.addOverlayWidget(this._overlayWidgets[d])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new fMe(e,n,r,o,t)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,s,a,u)=>{this._paste("keyboard",o,s,a,u)},type:o=>{this._type("keyboard",o)},compositionType:(o,s,a,u)=>{this._compositionType("keyboard",o,s,a,u)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,s,a,u)=>{const d={text:o,pasteOnNewLine:s,multicursorText:a,mode:u};this._commandService.executeCommand("paste",d)},type:o=>{const s={text:o};this._commandService.executeCommand("type",s)},compositionType:(o,s,a,u)=>{if(a||u){const d={text:o,replacePrevCharCnt:s,replaceNextCharCnt:a,positionDelta:u};this._commandService.executeCommand("compositionType",d)}else{const d={text:o,replaceCharCnt:s};this._commandService.executeCommand("replacePreviousChar",d)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new G8(e.coordinatesConverter);return n.onKeyDown=o=>this._onKeyDown.fire(o),n.onKeyUp=o=>this._onKeyUp.fire(o),n.onContextMenu=o=>this._onContextMenu.fire(o),n.onMouseMove=o=>this._onMouseMove.fire(o),n.onMouseLeave=o=>this._onMouseLeave.fire(o),n.onMouseDown=o=>this._onMouseDown.fire(o),n.onMouseUp=o=>this._onMouseUp.fire(o),n.onMouseDrag=o=>this._onMouseDrag.fire(o),n.onMouseDrop=o=>this._onMouseDrop.fire(o),n.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),n.onMouseWheel=o=>this._onMouseWheel.fire(o),[new vOe(t,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}};qA=dMe([e1(3,An),e1(4,ki),e1(5,kr),e1(6,dn),e1(7,Er),e1(8,fo),e1(9,il)],qA);class Tee extends Oe{constructor(){super(),this._onDidChangeToTrue=this._register(new be),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new be),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class gMe extends Oe{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=de.editorSimpleInput.bindTo(t),this._editorFocus=de.focus.bindTo(t),this._textInputFocus=de.textInputFocus.bindTo(t),this._editorTextFocus=de.editorTextFocus.bindTo(t),this._editorTabMovesFocus=de.tabMovesFocus.bindTo(t),this._editorReadonly=de.readOnly.bindTo(t),this._inDiffEditor=de.inDiffEditor.bindTo(t),this._editorColumnSelection=de.columnSelection.bindTo(t),this._hasMultipleSelections=de.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=de.hasNonEmptySelection.bindTo(t),this._canUndo=de.canUndo.bindTo(t),this._canRedo=de.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(129)),this._editorReadonly.set(e.get(80)),this._inDiffEditor.set(e.get(53)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class pMe extends Oe{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this._langId=de.languageId.bindTo(t),this._hasCompletionItemProvider=de.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=de.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=de.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=de.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=de.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=de.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=de.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=de.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=de.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=de.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=de.hasReferenceProvider.bindTo(t),this._hasRenameProvider=de.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=de.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=de.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=de.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=de.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=de.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=de.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=de.isInWalkThroughSnippet.bindTo(t);const n=()=>this._update();this._register(e.onDidChangeModel(n)),this._register(e.onDidChangeModelLanguage(n)),this._register(Oh.onDidChange(n)),this._register(ng.onDidChange(n)),this._register(rp.onDidChange(n)),this._register(TA.onDidChange(n)),this._register(YF.onDidChange(n)),this._register(ZF.onDidChange(n)),this._register(XF.onDidChange(n)),this._register(kA.onDidChange(n)),this._register(jy.onDidChange(n)),this._register(Yc.onDidChange(n)),this._register(KF.onDidChange(n)),this._register(GF.onDidChange(n)),this._register(O2.onDidChange(n)),this._register(Mh.onDidChange(n)),this._register(eb.onDidChange(n)),this._register(Hv.onDidChange(n)),n()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(Oh.has(e)),this._hasCodeActionsProvider.set(ng.has(e)),this._hasCodeLensProvider.set(rp.has(e)),this._hasDefinitionProvider.set(TA.has(e)),this._hasDeclarationProvider.set(YF.has(e)),this._hasImplementationProvider.set(ZF.has(e)),this._hasTypeDefinitionProvider.set(XF.has(e)),this._hasHoverProvider.set(kA.has(e)),this._hasDocumentHighlightProvider.set(jy.has(e)),this._hasDocumentSymbolProvider.set(Yc.has(e)),this._hasReferenceProvider.set(KF.has(e)),this._hasRenameProvider.set(GF.has(e)),this._hasSignatureHelpProvider.set(eb.has(e)),this._hasInlayHintsProvider.set(Hv.has(e)),this._hasDocumentFormattingProvider.set(O2.has(e)||Mh.has(e)),this._hasDocumentSelectionFormattingProvider.set(Mh.has(e)),this._hasMultipleDocumentFormattingProvider.set(O2.all(e).length+Mh.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(Mh.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===kn.walkThroughSnippet)})}}class mMe extends Oe{constructor(e){super(),this._onChange=this._register(new be),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(Vy(e)),this._register(this._domFocusTracker.onDidFocus(()=>{this._hasFocus=!0,this._onChange.fire(void 0)})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasFocus=!1,this._onChange.fire(void 0)}))}hasFocus(){return this._hasFocus}}const _Me=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),vMe=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function u6(i){return _Me+encodeURIComponent(i.toString())+vMe}const bMe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),CMe=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function wMe(i){return bMe+encodeURIComponent(i.toString())+CMe}hr((i,e)=>{const t=i.getColor(oce);t&&e.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const n=i.getColor(I2);n&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${u6(n)}") repeat-x bottom left; }`);const r=i.getColor(BDe);r&&e.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${r}; }`);const o=i.getColor(I8);o&&e.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${o}; }`);const s=i.getColor(bp);s&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${u6(s)}") repeat-x bottom left; }`);const a=i.getColor(WDe);a&&e.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const u=i.getColor(AG);u&&e.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${u}; }`);const d=i.getColor(qh);d&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${u6(d)}") repeat-x bottom left; }`);const h=i.getColor(VDe);h&&e.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${h}; }`);const f=i.getColor($De);f&&e.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${f}; }`);const p=i.getColor(HDe);p&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${wMe(p)}") no-repeat bottom left; }`);const m=i.getColor(p2e);m&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${m.rgba.a}; }`);const v=i.getColor(g2e);v&&e.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${v}; }`);const b=i.getColor(uM)||"inherit";e.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${b}}`)});class Ui{constructor(e,t,n){const r=o=>this.emitter.fire(o);this.emitter=new be({onFirstListenerAdd:()=>e.addEventListener(t,r,n),onLastListenerRemove:()=>e.removeEventListener(t,r,n)})}get event(){return this.emitter.event}dispose(){this.emitter.dispose()}}function Nee(i){return i.preventDefault(),i.stopPropagation(),i}var KS=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o};let yMe=!1;var b3;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(b3||(b3={}));let SMe=4;const LMe=new be;let EMe=300;const xMe=new be;class bq{constructor(){this.disposables=new Qe}get onPointerMove(){return this.disposables.add(new Ui(window,"mousemove")).event}get onPointerUp(){return this.disposables.add(new Ui(window,"mouseup")).event}dispose(){this.disposables.dispose()}}KS([ko],bq.prototype,"onPointerMove",null);KS([ko],bq.prototype,"onPointerUp",null);class Cq{constructor(e){this.el=e,this.disposables=new Qe}get onPointerMove(){return this.disposables.add(new Ui(this.el,lr.Change)).event}get onPointerUp(){return this.disposables.add(new Ui(this.el,lr.End)).event}dispose(){this.disposables.dispose()}}KS([ko],Cq.prototype,"onPointerMove",null);KS([ko],Cq.prototype,"onPointerUp",null);class C3{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}}KS([ko],C3.prototype,"onPointerMove",null);KS([ko],C3.prototype,"onPointerUp",null);class Hs extends Oe{constructor(e,t,n){super(),this.hoverDelay=EMe,this.hoverDelayer=this._register(new Ap(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new be),this._onDidStart=this._register(new be),this._onDidChange=this._register(new be),this._onDidReset=this._register(new be),this._onDidEnd=this._register(new be),this.orthogonalStartSashDisposables=this._register(new Qe),this.orthogonalStartDragHandleDisposables=this._register(new Qe),this.orthogonalEndSashDisposables=this._register(new Qe),this.orthogonalEndDragHandleDisposables=this._register(new Qe),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Be(e,Ge(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),qn&&this.el.classList.add("mac");const r=this._register(new Ui(this.el,"mousedown")).event;this._register(r(f=>this.onPointerStart(f,new bq),this));const o=this._register(new Ui(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const s=this._register(new Ui(this.el,"mouseenter")).event;this._register(s(()=>Hs.onMouseEnter(this)));const a=this._register(new Ui(this.el,"mouseleave")).event;this._register(a(()=>Hs.onMouseLeave(this))),this._register(Hi.addTarget(this.el));const u=Rt.map(this._register(new Ui(this.el,lr.Start)).event,f=>{var p;return Object.assign(Object.assign({},f),{target:(p=f.initialTarget)!==null&&p!==void 0?p:null})});this._register(u(f=>this.onPointerStart(f,new Cq(this.el)),this));const d=this._register(new Ui(this.el,lr.Tap)).event,h=Rt.map(Rt.filter(Rt.debounce(d,(f,p)=>{var m;return{event:p,count:((m=f==null?void 0:f.count)!==null&&m!==void 0?m:0)+1}},250),({count:f})=>f===2),({event:f})=>{var p;return Object.assign(Object.assign({},f),{target:(p=f.initialTarget)!==null&&p!==void 0?p:null})});this._register(h(this.onPointerDoublePress,this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=SMe,this._register(LMe.event(f=>{this.size=f,this.layout()}))),this._register(xMe.event(f=>this.hoverDelay=f)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",yMe),this.layout()}get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Be(this.el,Ge(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Kn(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Ui(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Hs.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Ui(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Hs.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}set orthogonalEndSash(e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Be(this.el,Ge(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Kn(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Ui(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Hs.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ui(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Hs.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}onPointerStart(e,t){Ni.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const v=this.getOrthogonalSash(e);v&&(n=!0,e.__orthogonalSashEvent=!0,v.onPointerStart(e,new C3(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new C3(t))),!this.state)return;const r=wEe("iframe");for(const v of r)v.style.pointerEvents="none";const o=e.pageX,s=e.pageY,a=e.altKey,u={startX:o,currentX:o,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(u);const d=cc(this.el),h=()=>{let v="";n?v="all-scroll":this.orientation===1?this.state===1?v="s-resize":this.state===2?v="n-resize":v=qn?"row-resize":"ns-resize":this.state===1?v="e-resize":this.state===2?v="w-resize":v=qn?"col-resize":"ew-resize",d.textContent=`* { cursor: ${v} !important; }`},f=new Qe;h(),n||this.onDidEnablementChange.event(h,null,f);const p=v=>{Ni.stop(v,!1);const b={startX:o,currentX:v.pageX,startY:s,currentY:v.pageY,altKey:a};this._onDidChange.fire(b)},m=v=>{Ni.stop(v,!1),this.el.removeChild(d),this.el.classList.remove("active"),this._onDidEnd.fire(),f.dispose();for(const b of r)b.style.pointerEvents="auto"};t.onPointerMove(p,null,f),t.onPointerUp(m,null,f),f.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Hs.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Hs.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Hs.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){if(!(!e.target||!(e.target instanceof HTMLElement))&&e.target.classList.contains("orthogonal-drag-handle"))return e.target.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const wq=gi("IEditorCancelService"),Lde=new Dt("cancellableOperation",!1,C("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));z0(wq,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(r=>{const o=Lde.bindTo(r.get(dn)),s=new Tu;return{key:o,tokens:s}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},!0);class DMe extends oa{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(wq).add(e,this))}dispose(){this._unregister(),super.dispose()}}nt(new class extends Ps{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Lde})}runEditorCommand(i,e){i.get(wq).cancel(e)}});let Ede=class QH{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?ec("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof QH))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new QH(e,this.flags))}};class YA extends DMe{constructor(e,t,n,r){super(e,r),this._listener=new Qe,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!n||!Q.containsPosition(n,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!n||!Q.containsRange(n,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class yq extends oa{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}class L0{constructor(e,t,n){this._visiblePosition=e,this._visiblePositionScrollDelta=t,this._cursorPosition=n}static capture(e){let t=null,n=0;if(e.getScrollTop()!==0){const r=e.getVisibleRanges();if(r.length>0){t=r[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}}return new L0(t,n,e.getPosition())}restore(e){if(this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}const xde={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:$c.text,TERMINALS:"Terminals"};class IMe{constructor(e){this.data=e}update(){}getData(){return this.data}}const Gg={CurrentDragAndDropData:void 0};class Nf extends Oe{constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof rc&&this._register(t.onDidChange(r=>{this.element&&this.handleActionChangeEvent(r)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Hy)),this._actionRunner}set actionRunner(e){this._actionRunner=e}getAction(){return this._action}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Hi.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,yl&&this._register(qe(e,Ht.DRAG_START,r=>{var o;return(o=r.dataTransfer)===null||o===void 0?void 0:o.setData(xde.TEXT,this._action.label)}))),this._register(qe(t,lr.Tap,r=>this.onClick(r,!0))),this._register(qe(t,Ht.MOUSE_DOWN,r=>{n||Ni.stop(r,!0),this._action.enabled&&r.button===0&&t.classList.add("active")})),qn&&this._register(qe(t,Ht.CONTEXT_MENU,r=>{r.button===0&&r.ctrlKey===!0&&this.onClick(r)})),this._register(qe(t,Ht.CLICK,r=>{Ni.stop(r,!0),this.options&&this.options.isMenu||this.onClick(r)})),this._register(qe(t,Ht.DBLCLICK,r=>{Ni.stop(r,!0)})),[Ht.MOUSE_UP,Ht.MOUSE_OUT].forEach(r=>{this._register(qe(t,r,o=>{Ni.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var n;Ni.stop(e,!0);const r=xu(this._context)?!((n=this.options)===null||n===void 0)&&n.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,r)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}updateTooltip(){}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),super.dispose()}}class ZA extends Nf{constructor(e,t,n={}){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),this.element&&(this.label=Be(this.element,Ge("a.action-label"))),this.label&&(this._action.id===Qc.ID?this.label.setAttribute("role","presentation"):this.options.isMenu?this.label.setAttribute("role","menuitem"):this.label.setAttribute("role","button")),this.options.label&&this.options.keybinding&&this.element&&(Be(this.element,Ge("span.keybinding")).textContent=this.options.keybinding),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.getAction().label)}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.label&&(this.label.title=e)}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getAction().class,this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label&&this.label.classList.remove("codicon")}updateEnabled(){this.getAction().enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element&&this.element.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element&&this.element.classList.add("disabled"))}updateChecked(){this.label&&(this.getAction().checked?this.label.classList.add("checked"):this.label.classList.remove("checked"))}}var kMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class cg extends Oe{constructor(e,t={}){var n,r,o,s,a,u;super(),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new be),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new be({onFirstListenerAdd:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new be),this.onDidRun=this._onDidRun.event,this._onBeforeRun=this._register(new be),this.onBeforeRun=this._onBeforeRun.event,this.options=t,this._context=(n=t.context)!==null&&n!==void 0?n:null,this._orientation=(r=this.options.orientation)!==null&&r!==void 0?r:0,this._triggerKeys={keyDown:(s=(o=this.options.triggerKeys)===null||o===void 0?void 0:o.keyDown)!==null&&s!==void 0?s:!1,keys:(u=(a=this.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&u!==void 0?u:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Hy,this._register(this._actionRunner)),this._register(this._actionRunner.onDidRun(f=>this._onDidRun.fire(f))),this._register(this._actionRunner.onBeforeRun(f=>this._onBeforeRun.fire(f))),this._actionIds=[],this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",t.animated!==!1&&this.domNode.classList.add("animated");let d,h;switch(this._orientation){case 0:d=[15],h=[17];break;case 1:d=[16],h=[18],this.domNode.className+=" vertical";break}this._register(qe(this.domNode,Ht.KEY_DOWN,f=>{const p=new yr(f);let m=!0;const v=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;d&&(p.equals(d[0])||p.equals(d[1]))?m=this.focusPrevious():h&&(p.equals(h[0])||p.equals(h[1]))?m=this.focusNext():p.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():p.equals(14)?m=this.focusFirst():p.equals(13)?m=this.focusLast():p.equals(2)&&v instanceof Nf&&v.trapsArrowNavigation?m=this.focusNext():this.isTriggerKeyEvent(p)?this._triggerKeys.keyDown?this.doTrigger(p):this.triggerKeyDown=!0:m=!1,m&&(p.preventDefault(),p.stopPropagation())})),this._register(qe(this.domNode,Ht.KEY_UP,f=>{const p=new yr(f);this.isTriggerKeyEvent(p)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(p)),p.preventDefault(),p.stopPropagation()):(p.equals(2)||p.equals(1026))&&this.updateFocusedItem()})),this.focusTracker=this._register(Vy(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(ry()===this.domNode||!_p(ry(),this.domNode))&&(this._onDidBlur.fire(),this.focusedItem=void 0,this.previouslyFocusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.actionsList.setAttribute("role","toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Nf&&n.isEnabled());t instanceof Nf&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Nf&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(_p(ry(),t)){this.focusedItem=e;break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){e&&(this._actionRunner=e,this.viewItems.forEach(t=>t.actionRunner=e))}getContainer(){return this.domNode}push(e,t={}){const n=Array.isArray(e)?e:[e];let r=Sb(t.index)?t.index:null;n.forEach(o=>{const s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation"),this.options.allowContextMenu||this._register(qe(s,Ht.CONTEXT_MENU,u=>{Ni.stop(u,!0)}));let a;this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o)),a||(a=new ZA(this.context,o,t)),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof Nf&&this.viewItems.length===0&&a.setFocusable(!0),r===null||r<0||r>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a),this._actionIds.push(o.id)):(this.actionsList.insertBefore(s,this.actionsList.children[r]),this.viewItems.splice(r,0,a),this._actionIds.splice(r,0,o.id),r++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem)}clear(){oi(this.viewItems),this.viewItems=[],this._actionIds=[],$o(this.actionsList)}length(){return this.viewItems.length}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const r=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&this.options.focusOnlyEnabledItems&&!n.isEnabled());return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])===null||r===void 0||r.blur());const o=this.focusedItem!==void 0&&this.viewItems[this.focusedItem];if(o){let s=!0;kF(o.focus)||(s=!1),this.options.focusOnlyEnabledItems&&kF(o.isEnabled)&&!o.isEnabled()&&(s=!1),s?(n||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0)}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Nf){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}run(e,t){return kMe(this,void 0,void 0,function*(){yield this._actionRunner.run(e,t)})}dispose(){oi(this.viewItems),this.viewItems=[],this._actionIds=[],this.getContainer().remove(),super.dispose()}}const TMe={IconContribution:"base.contributions.icons"};class NMe{constructor(){this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:C("iconDefintion.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:C("iconDefintion.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${ja.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,r){const o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const u=this.iconReferenceSchema.enum.indexOf(e);u!==-1&&(this.iconReferenceSchema.enumDescriptions[u]=n),this._onDidChange.fire()}return o}let s={id:e,description:n,defaults:t,deprecationMessage:r};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return r&&(a.deprecationMessage=r),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;pr.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`};let n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of r.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${pr.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const o of r.filter(s=>!pr.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}}const Rb=new NMe;Zr.add(TMe.IconContribution,Rb);function ds(i,e,t,n){return Rb.registerIcon(i,e,t,n)}function AMe(){return Rb}function OMe(){for(const i of IF.all)Rb.registerIcon(i.id,i.definition,i.description);IF.onDidRegister(i=>Rb.registerIcon(i.id,i.definition,i.description))}OMe();const Dde="vscode://schemas/icons";let Ide=Zr.as(L8.JSONContribution);Ide.registerSchema(Dde,Rb.getIconSchema());const Aee=new er(()=>Ide.notifySchemaChanged(Dde),200);Rb.onDidChange(()=>{Aee.isScheduled()||Aee.schedule()});const kde=ds("widget-close",_e.close,C("widgetClose","Icon for the close action in widgets."));var MMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},RMe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},PMe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},c6;const GR=3;class AN{constructor(e,t,n,r){this.originalLineStart=e,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=r}getType(){return this.originalLineStart===0?1:this.modifiedLineStart===0?2:0}}class d6{constructor(e){this.entries=e}}const FMe=ds("diff-review-insert",_e.add,C("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),BMe=ds("diff-review-remove",_e.remove,C("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),WMe=ds("diff-review-close",_e.close,C("diffReviewCloseIcon","Icon for 'Close' in diff review."));let w3=class f1 extends Oe{constructor(e,t){super(),this._modeService=t,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=ri(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=ri(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new cg(this.actionBarContainer.domNode)),this._actionBar.push(new rc("diffreview.close",C("label.close","Close"),"close-diff-review "+pr.asClassName(WMe),!0,()=>PMe(this,void 0,void 0,function*(){return this.hide()})),{label:!1,icon:!0}),this.domNode=ri(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=ri(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new pM(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff(()=>{this._isVisible&&(this._diffs=this._compute(),this._render())})),this._register(e.getModifiedEditor().onDidChangeCursorPosition(()=>{this._isVisible&&this._render()})),this._register(ts(this.domNode.domNode,"click",n=>{n.preventDefault();let r=tue(n.target,"diff-review-row");r&&this._goToRow(r)})),this._register(ts(this.domNode.domNode,"keydown",n=>{(n.equals(18)||n.equals(2066)||n.equals(530))&&(n.preventDefault(),this._goToRow(this._getNextRow())),(n.equals(16)||n.equals(2064)||n.equals(528))&&(n.preventDefault(),this._goToRow(this._getPrevRow())),(n.equals(9)||n.equals(2057)||n.equals(521)||n.equals(1033))&&(n.preventDefault(),this.hide()),(n.equals(10)||n.equals(3))&&(n.preventDefault(),this.accept())})),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let r=0,o=this._diffs.length;r<o;r++)if(this._diffs[r]===this._currentDiff){n=r;break}e=this._diffs.length+n-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Le(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let n=-1;for(let r=0,o=this._diffs.length;r<o;r++)if(this._diffs[r]===this._currentDiff){n=r;break}e=n+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs.length===0)return;e=e%this._diffs.length;const t=this._diffs[e].entries;this._diffEditor.setPosition(new Le(t[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:t[0].modifiedLineStart,endColumn:1073741824,endLineNumber:t[t.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1,t=this._getCurrentFocusedRow();if(t){let n=parseInt(t.getAttribute("data-line"),10);isNaN(n)||(e=n)}this.hide(),e!==-1&&(this._diffEditor.setPosition(new Le(e,1)),this._diffEditor.revealPosition(new Le(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){let e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){let e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){let e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){let t=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),t&&t!==e&&(t.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,t,n){this._width=t,this.shadow.setTop(e-6),this.shadow.setWidth(t),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(t),this.domNode.setHeight(n),this._content.setHeight(n),this._content.setWidth(t),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const e=this._diffEditor.getLineChanges();if(!e||e.length===0)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return!t||!n?[]:f1._mergeAdjacent(e,t.getLineCount(),n.getLineCount())}static _mergeAdjacent(e,t,n){if(!e||e.length===0)return[];let r=[],o=0;for(let d=0,h=e.length;d<h;d++){const f=e[d],p=f.originalStartLineNumber,m=f.originalEndLineNumber,v=f.modifiedStartLineNumber,b=f.modifiedEndLineNumber;let L=[],S=0;{const y=m===0?p:p-1,E=b===0?v:v-1;let A=1,N=1;if(d>0){const M=e[d-1];M.originalEndLineNumber===0?A=M.originalStartLineNumber+1:A=M.originalEndLineNumber+1,M.modifiedEndLineNumber===0?N=M.modifiedStartLineNumber+1:N=M.modifiedEndLineNumber+1}let V=y-GR+1,R=E-GR+1;if(V<A){const M=A-V;V=V+M,R=R+M}if(R<N){const M=N-R;V=V+M,R=R+M}L[S++]=new AN(V,y,R,E)}m!==0&&(L[S++]=new AN(p,m,0,0)),b!==0&&(L[S++]=new AN(0,0,v,b));{const y=m===0?p+1:m+1,E=b===0?v+1:b+1;let A=t,N=n;if(d+1<h){const M=e[d+1];M.originalEndLineNumber===0?A=M.originalStartLineNumber:A=M.originalStartLineNumber-1,M.modifiedEndLineNumber===0?N=M.modifiedStartLineNumber:N=M.modifiedStartLineNumber-1}let V=y+GR-1,R=E+GR-1;if(V>A){const M=A-V;V=V+M,R=R+M}if(R>N){const M=N-R;V=V+M,R=R+M}L[S++]=new AN(y,V,E,R)}r[o++]=new d6(L)}let s=r[0].entries,a=[],u=0;for(let d=1,h=r.length;d<h;d++){const f=r[d].entries,p=s[s.length-1],m=f[0];if(p.getType()===0&&m.getType()===0&&m.originalLineStart<=p.originalLineEnd){s[s.length-1]=new AN(p.originalLineStart,m.originalLineEnd,p.modifiedLineStart,m.modifiedLineEnd),s=s.concat(f.slice(1));continue}a[u++]=new d6(s),s=f}return a[u++]=new d6(s),a}_findDiffIndex(e){const t=e.lineNumber;for(let n=0,r=this._diffs.length;n<r;n++){const o=this._diffs[n].entries,s=o[o.length-1].modifiedLineEnd;if(t<=s)return n}return 0}_render(){const e=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),r=this._diffEditor.getModifiedEditor().getModel(),o=n.getOptions(),s=r.getOptions();if(!this._isVisible||!n||!r){$o(this._content.domNode),this._currentDiff=null,this.scrollbar.scanDomNode();return}this._diffEditor.updateOptions({readOnly:!0});const a=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[a]===this._currentDiff)return;this._currentDiff=this._diffs[a];const u=this._diffs[a].entries;let d=document.createElement("div");d.className="diff-review-table",d.setAttribute("role","list"),d.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),Na.applyFontInfoSlow(d,t.get(43));let h=0,f=0,p=0,m=0;for(let R=0,M=u.length;R<M;R++){const K=u[R],X=K.originalLineStart,$=K.originalLineEnd,D=K.modifiedLineStart,T=K.modifiedLineEnd;X!==0&&(h===0||X<h)&&(h=X),$!==0&&(f===0||$>f)&&(f=$),D!==0&&(p===0||D<p)&&(p=D),T!==0&&(m===0||T>m)&&(m=T)}let v=document.createElement("div");v.className="diff-review-row";let b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const L=f-h+1,S=m-p+1;b.appendChild(document.createTextNode(`${a+1}/${this._diffs.length}: @@ -${h},${L} +${p},${S} @@`)),v.setAttribute("data-line",String(p));const y=R=>R===0?C("no_lines_changed","no lines changed"):R===1?C("one_line_changed","1 line changed"):C("more_lines_changed","{0} lines changed",R),E=y(L),A=y(S);v.setAttribute("aria-label",C({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",a+1,this._diffs.length,h,E,p,A)),v.appendChild(b),v.setAttribute("role","listitem"),d.appendChild(v);const N=t.get(58);let V=p;for(let R=0,M=u.length;R<M;R++){const K=u[R];f1._renderSection(d,K,V,N,this._width,e,n,o,t,r,s,this._modeService.languageIdCodec),K.modifiedLineStart!==0&&(V=K.modifiedLineEnd)}$o(this._content.domNode),this._content.domNode.appendChild(d),this.scrollbar.scanDomNode()}static _renderSection(e,t,n,r,o,s,a,u,d,h,f,p){const m=t.getType();let v="diff-review-row",b="";const L="diff-review-spacer";let S=null;switch(m){case 1:v="diff-review-row line-insert",b=" char-insert",S=FMe;break;case 2:v="diff-review-row line-delete",b=" char-delete",S=BMe;break}const y=t.originalLineStart,E=t.originalLineEnd,A=t.modifiedLineStart,N=t.modifiedLineEnd,V=Math.max(N-A,E-y),R=s.get(130),M=R.glyphMarginWidth+R.lineNumbersWidth,K=d.get(130),X=10+K.glyphMarginWidth+K.lineNumbersWidth;for(let $=0;$<=V;$++){const D=y===0?0:y+$,T=A===0?0:A+$,F=document.createElement("div");F.style.minWidth=o+"px",F.className=v,F.setAttribute("role","listitem"),T!==0&&(n=T),F.setAttribute("data-line",String(n));let B=document.createElement("div");B.className="diff-review-cell",B.style.height=`${r}px`,F.appendChild(B);const U=document.createElement("span");U.style.width=M+"px",U.style.minWidth=M+"px",U.className="diff-review-line-number"+b,D!==0?U.appendChild(document.createTextNode(String(D))):U.innerText=" ",B.appendChild(U);const G=document.createElement("span");G.style.width=X+"px",G.style.minWidth=X+"px",G.style.paddingRight="10px",G.className="diff-review-line-number"+b,T!==0?G.appendChild(document.createTextNode(String(T))):G.innerText=" ",B.appendChild(G);const Z=document.createElement("span");if(Z.className=L,S){const Y=document.createElement("span");Y.className=pr.asClassName(S),Y.innerText="  ",Z.appendChild(Y)}else Z.innerText="  ";B.appendChild(Z);let z;if(T!==0){let Y=this._renderLine(h,d,f.tabSize,T,p);f1._ttPolicy&&(Y=f1._ttPolicy.createHTML(Y)),B.insertAdjacentHTML("beforeend",Y),z=h.getLineContent(T)}else{let Y=this._renderLine(a,s,u.tabSize,D,p);f1._ttPolicy&&(Y=f1._ttPolicy.createHTML(Y)),B.insertAdjacentHTML("beforeend",Y),z=a.getLineContent(D)}z.length===0&&(z=C("blankLine","blank"));let O="";switch(m){case 0:D===T?O=C({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",z,D):O=C("equalLine","{0} original line {1} modified line {2}",z,D,T);break;case 1:O=C("insertLine","+ {0} modified line {1}",z,T);break;case 2:O=C("deleteLine","- {0} original line {1}",z,D);break}F.setAttribute("aria-label",O),e.appendChild(F)}}static _renderLine(e,t,n,r,o){const s=e.getLineContent(r),a=t.get(43),u=es.createEmpty(s,o),d=Fu.isBasicASCII(s,e.mightContainNonBasicASCII()),h=Fu.containsRTL(s,d,e.mightContainRTL());return M8(new SC(a.isMonospace&&!t.get(29),a.canUseHalfwidthRightwardsArrow,s,!1,d,h,0,u,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(104),t.get(87),t.get(82),t.get(44)!==Du.OFF,null)).html}};w3._ttPolicy=(c6=window.trustedTypes)===null||c6===void 0?void 0:c6.createPolicy("diffReview",{createHTML:i=>i});w3=MMe([RMe(1,Fs)],w3);hr((i,e)=>{const t=i.getColor(Qce);t&&e.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=i.getColor(HS);n&&e.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)});class VMe extends Et{constructor(){super({id:"editor.action.diffReview.next",label:C("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:_t.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,t){const n=Tde(e);n&&n.diffReviewNext()}}class HMe extends Et{constructor(){super({id:"editor.action.diffReview.prev",label:C("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:_t.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,t){const n=Tde(e);n&&n.diffReviewPrev()}}function Tde(i){const e=i.get(ki),t=e.listDiffEditors(),n=e.getActiveCodeEditor();if(!n)return null;for(let r=0,o=t.length;r<o;r++){const s=t[r];if(s.getModifiedEditor().getId()===n.getId()||s.getOriginalEditor().getId()===n.getId())return s}return null}it(VMe);it(HMe);const $Me="editorWorkerService",Hu=gi($Me),$p=gi("contextViewService"),U0=gi("contextMenuService");var h6=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class zMe extends Oe{constructor(e,t,n,r,o,s){super(),this._viewZoneId=e,this._marginDomNode=t,this.editor=n,this.diff=r,this._contextMenuService=o,this._clipboardService=s,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=_e.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const a=n.getOption(58),u=n.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${a}px`,this._diffActions.style.lineHeight=`${a}px`,this._marginDomNode.appendChild(this._diffActions);const d=[],h=r.modifiedEndLineNumber===0;d.push(new rc("diff.clipboard.copyDeletedContent",h?r.originalEndLineNumber>r.modifiedStartLineNumber?C("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):C("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.originalEndLineNumber>r.modifiedStartLineNumber?C("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):C("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,()=>h6(this,void 0,void 0,function*(){const b=new Q(r.originalStartLineNumber,1,r.originalEndLineNumber+1,1),L=r.originalModel.getValueInRange(b);yield this._clipboardService.writeText(L)})));let f=0,p;r.originalEndLineNumber>r.modifiedStartLineNumber&&(p=new rc("diff.clipboard.copyDeletedLineContent",h?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber),void 0,!0,()=>h6(this,void 0,void 0,function*(){const b=r.originalModel.getLineContent(r.originalStartLineNumber+f);if(b===""){const L=r.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(L===0?`
`:`\r
`)}else yield this._clipboardService.writeText(b)})),d.push(p)),n.getOption(80)||d.push(new rc("diff.inline.revertChange",C("diff.inline.revertChange.label","Revert this change"),void 0,!0,()=>h6(this,void 0,void 0,function*(){const b=new Q(r.originalStartLineNumber,1,r.originalEndLineNumber,r.originalModel.getLineMaxColumn(r.originalEndLineNumber)),L=r.originalModel.getValueInRange(b);if(r.modifiedEndLineNumber===0){const S=n.getModel().getLineMaxColumn(r.modifiedStartLineNumber);n.executeEdits("diffEditor",[{range:new Q(r.modifiedStartLineNumber,S,r.modifiedStartLineNumber,S),text:u+L}])}else{const S=n.getModel().getLineMaxColumn(r.modifiedEndLineNumber);n.executeEdits("diffEditor",[{range:new Q(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,S),text:L}])}})));const v=(b,L)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:b,y:L}),getActions:()=>(p&&(p.label=h?C("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber+f):C("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber+f)),d),autoSelectFirstItem:!0})};this._register(ts(this._diffActions,"mousedown",b=>{const{top:L,height:S}=Us(this._diffActions);let y=Math.floor(a/3);b.preventDefault(),v(b.posx,L+S+y)})),this._register(n.onMouseMove(b=>{b.target.type===8||b.target.type===5?b.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,f=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a)):this.visibility=!1:this.visibility=!1})),this._register(n.onMouseDown(b=>{b.event.rightButton&&(b.target.type===8||b.target.type===5)&&b.target.detail.viewZoneId===this._viewZoneId&&(b.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,b.event.browserEvent.y,a),v(b.event.posx,b.event.posy+a))}))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,e?this._diffActions.style.visibility="visible":this._diffActions.style.visibility="hidden")}_updateLightBulbPosition(e,t,n){const{top:r}=Us(e),o=t-r,s=Math.floor(o/n),a=s*n;if(this._diffActions.style.top=`${a}px`,this.diff.viewLineCounts){let u=0;for(let d=0;d<this.diff.viewLineCounts.length;d++)if(u+=this.diff.viewLineCounts[d],s<u)return d}return s}}const j0=gi("clipboardService");class EC{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}EC.None=Object.freeze({report(){}});const zp=gi("editorProgressService");var UMe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Bg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},f6;class Oee{constructor(e,t){this._contextMenuService=e,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter(t=>!this._zonesMap[String(t.id)])}clean(e){this._zones.length>0&&e.changeViewZones(t=>{for(const n of this._zones)t.removeZone(n)}),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}apply(e,t,n,r){const o=r?L0.capture(e):null;e.changeViewZones(s=>{var a;for(const u of this._zones)s.removeZone(u);for(const u of this._inlineDiffMargins)u.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let u=0,d=n.zones.length;u<d;u++){const h=n.zones[u];h.suppressMouseDown=!0;const f=s.addZone(h);this._zones.push(f),this._zonesMap[String(f)]=!0,n.zones[u].diff&&h.marginDomNode&&(h.suppressMouseDown=!1,((a=n.zones[u].diff)===null||a===void 0?void 0:a.originalModel.getValueLength())!==0&&this._inlineDiffMargins.push(new zMe(f,h.marginDomNode,e,n.zones[u].diff,this._contextMenuService,this._clipboardService)))}}),o&&o.restore(e),this._decorations=e.deltaDecorations(this._decorations,n.decorations),t&&t.setZones(n.overviewZones)}}let jMe=0;const KMe=ds("diff-insert",_e.add,C("diffInsertIcon","Line decoration for inserts in the diff editor.")),Nde=ds("diff-remove",_e.remove,C("diffRemoveIcon","Line decoration for removals in the diff editor.")),Mee=(f6=window.trustedTypes)===null||f6===void 0?void 0:f6.createPolicy("diffEditorWidget",{createHTML:i=>i});let E0=class Bs extends Oe{constructor(e,t,n,r,o,s,a,u,d,h,f,p){super(),this._editorProgressService=p,this._onDidDispose=this._register(new be),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new be),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new be),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=o,this._codeEditorService=u,this._contextKeyService=this._register(s.createScoped(e)),this._instantiationService=a.createChild(new KA([dn,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=d,this._notificationService=h,this._id=++jMe,this._state=0,this._updatingDiffProgress=null,this._domElement=e,t=t||{},this._options=Fee(t,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),typeof t.isInEmbeddedEditor<"u"?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new er(()=>this._updateDecorations(),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=Bs._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=ri(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(ts(this._overviewDomElement,"mousedown",v=>{this._modifiedEditor.delegateVerticalScrollbarMouseDown(v)})),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new Oee(f,r),this._modifiedEditorState=new Oee(f,r),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new Vue(this._containerDomElement,t.dimension,()=>this._onDidContainerSizeChanged())),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,n.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,n.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=a.createInstance(w3,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new sp(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Pee(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(d.onDidColorThemeChange(v=>{this._strategy&&this._strategy.applyColors(v)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=Bs._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)}));const m=ay.getDiffEditorContributions();for(const v of m)try{this._register(a.createInstance(v.ctor,this))}catch(b){gn(b)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),this._state===1&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,t){let n="monaco-diff-editor monaco-editor-background ";return t&&(n+="side-by-side "),n+=PF(e.type),n}_recreateOverviewRulers(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{n.getModel()&&(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}));const r=this._contextKeyService.createKey("isInDiffLeftEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),this._register(n.onDidContentSizeChange(o=>{const s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bs.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createRightHandSideEditor(e,t){const n=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),t);this._register(n.onDidScrollChange(o=>{this._isHandlingScrollEvent||!o.scrollTopChanged&&!o.scrollLeftChanged&&!o.scrollHeightChanged||(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())})),this._register(n.onDidChangeViewZones(()=>{this._onViewZonesChanged()})),this._register(n.onDidChangeConfiguration(o=>{n.getModel()&&(o.hasChanged(43)&&this._updateDecorationsRunner.schedule(),o.hasChanged(131)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))})),this._register(n.onDidChangeHiddenAreas(()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()})),this._register(n.onDidChangeModelContent(()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})),this._register(n.onDidChangeModelOptions(o=>{o.tabSize&&this._updateDecorationsRunner.schedule()}));const r=this._contextKeyService.createKey("isInDiffRightEditor",n.hasWidgetFocus());return this._register(n.onDidFocusEditorWidget(()=>r.set(!0))),this._register(n.onDidBlurEditorWidget(()=>r.set(!1))),this._register(n.onDidContentSizeChange(o=>{const s=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+Bs.ONE_OVERVIEW_WIDTH,a=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:a,contentWidth:s,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),n}_createInnerEditor(e,t,n,r){return e.createInstance(qA,t,n,r)}dispose(){this._codeEditorService.removeDiffEditor(this),this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return _M.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(e){const t=Fee(e,this._options),n=ZMe(this._options,t);this._options=t;const r=n.ignoreTrimWhitespace||n.renderIndicators,o=this._isVisible&&(n.maxComputationTime||n.maxFileSize);r?this._beginUpdateDecorations():o&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),n.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new sp(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Pee(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=Bs._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),n.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e){this._modifiedEditor.setPosition(e)}revealLine(e,t=0){this._modifiedEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._modifiedEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._modifiedEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._modifiedEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._modifiedEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._modifiedEditor.revealPositionNearTop(e,t)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e){this._modifiedEditor.setSelection(e)}setSelections(e){this._modifiedEditor.setSelections(e)}revealLines(e,t,n=0){this._modifiedEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._modifiedEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._modifiedEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,r=!0){this._modifiedEditor.revealRange(e,t,n,r)}revealRangeInCenter(e,t=0){this._modifiedEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._modifiedEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._modifiedEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){const e=this._originalEditor.saveViewState(),t=this._modifiedEditor.saveViewState();return{original:e,modified:t}}restoreViewState(e){if(e&&e.original&&e.modified){const t=e;this._originalEditor.restoreViewState(t.original),this._modifiedEditor.restoreViewState(t.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,t,n){this._modifiedEditor.trigger(e,t,n)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler||!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const e=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),n=Bs.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Bs.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:Bs.ONE_OVERVIEW_WIDTH,right:n+Bs.ONE_OVERVIEW_WIDTH,height:e-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:Bs.ONE_OVERVIEW_WIDTH,height:e-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){this._beginUpdateDecorationsTimeout!==-1&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout(()=>this._beginUpdateDecorations(),Bs.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,t){return!e&&!t?!0:!e||!t?!1:e.toString()===t.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const e=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!e||!t)return;this._diffComputationToken++;const n=this._diffComputationToken,r=this._options.maxFileSize*1024*1024,o=s=>{const a=s.getValueLength();return r===0||a<=r};if(!o(e)||!o(t)){(!Bs._equals(e.uri,this._lastOriginalWarning)||!Bs._equals(t.uri,this._lastModifiedWarning))&&(this._lastOriginalWarning=e.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(C("diff.tooLarge","Cannot compare files because one file is too large.")));return}this._setState(1),this._editorWorkerService.computeDiff(e.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then(s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=s,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())},s=>{n===this._diffComputationToken&&e===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())})}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],t=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),n=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),r=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,t,n);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,r.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,r.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const t=Object.assign({},e);return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar=Object.assign({},t.scrollbar||{}),t.scrollbar.vertical="visible",t.folding=!1,t.codeLens=this._options.diffCodeLens,t.fixedOverflowWidgets=!0,t.minimap=Object.assign({},t.minimap||{}),t.minimap.enabled=!1,t}_adjustOptionsForLeftHandSide(e){const t=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?t.wordWrapOverride1=this._options.diffWordWrap:t.wordWrapOverride1="off",e.originalAriaLabel&&(t.ariaLabel=e.originalAriaLabel),t.readOnly=!this._options.originalEditable,t.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(e){const t=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(t.ariaLabel=e.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=lf.revealHorizontalRightPadding.defaultValue+Bs.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const e=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),r=this._strategy.layout();this._originalDomNode.style.width=r+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-r+"px",this._modifiedDomNode.style.left=r+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-n+"px",this._overviewDomElement.style.width=Bs.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-Bs.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(Bs.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:r,height:t-n}),this._modifiedEditor.layout({width:e-r-(this._options.renderOverviewRuler?Bs.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-n,e,n),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const t=this._modifiedEditor.getScrollTop(),n=this._modifiedEditor.getScrollHeight(),r=Math.max(0,e.height),o=Math.max(0,r-2*0),s=n>0?o/n:0,a=Math.max(0,Math.floor(e.height*s)),u=Math.floor(t*s);return{height:a,top:u}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,t){const n=this._diffComputationResult?this._diffComputationResult.changes:[];if(n.length===0||e<t(n[0]))return null;let r=0,o=n.length-1;for(;r<o;){const s=Math.floor((r+o)/2),a=t(n[s]),u=s+1<=o?t(n[s+1]):1073741824;e<a?o=s-1:e>=u?r=s+1:(r=s,o=s)}return n[r]}_getEquivalentLineForOriginalLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,u=>u.originalStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-n;return a<=o?r+Math.min(a,s):r+s-o+a}_getEquivalentLineForModifiedLineNumber(e){const t=this._getLineChangeAtOrBeforeLineNumber(e,u=>u.modifiedStartLineNumber);if(!t)return e;const n=t.originalStartLineNumber+(t.originalEndLineNumber>0?-1:0),r=t.modifiedStartLineNumber+(t.modifiedEndLineNumber>0?-1:0),o=t.originalEndLineNumber>0?t.originalEndLineNumber-t.originalStartLineNumber+1:0,s=t.modifiedEndLineNumber>0?t.modifiedEndLineNumber-t.modifiedStartLineNumber+1:0,a=e-r;return a<=s?n+Math.min(a,o):n+o-s+a}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};E0.ONE_OVERVIEW_WIDTH=15;E0.ENTIRE_DIFF_OVERVIEW_WIDTH=30;E0.UPDATE_DIFF_DECORATIONS_DELAY=200;E0=UMe([Bg(3,j0),Bg(4,Hu),Bg(5,dn),Bg(6,An),Bg(7,ki),Bg(8,Er),Bg(9,fo),Bg(10,U0),Bg(11,zp)],E0);class Ade extends Oe{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const t=(e.getColor(ace)||TH).transparent(2),n=(e.getColor(lce)||NH).transparent(2),r=!t.equals(this._insertColor)||!n.equals(this._removeColor);return this._insertColor=t,this._removeColor=n,r}getEditorsDiffDecorations(e,t,n,r,o){o=o.sort((d,h)=>d.afterLineNumber-h.afterLineNumber),r=r.sort((d,h)=>d.afterLineNumber-h.afterLineNumber);const s=this._getViewZones(e,r,o,n),a=this._getOriginalEditorDecorations(e,t,n),u=this._getModifiedEditorDecorations(e,t,n);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:u.decorations,overviewZones:u.overviewZones,zones:s.modified}}}}class Ree{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class V1{constructor(e,t,n,r,o){this._lineChanges=e,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=r,this._modifiedEditor=o}static _getViewLineCount(e,t,n){const r=e.getModel(),o=e._getViewModel();if(r&&o){const s=XA(r,o,t,n);return s.endLineNumber-s.startLineNumber+1}return n-t+1}getViewZones(){const e=this._originalEditor.getOption(58),t=this._modifiedEditor.getOption(58),n=this._originalEditor.getOption(131).wrappingColumn!==-1,r=this._modifiedEditor.getOption(131).wrappingColumn!==-1,o=n||r,s=this._originalEditor.getModel(),a=this._originalEditor._getViewModel().coordinatesConverter,u=this._modifiedEditor._getViewModel().coordinatesConverter,d={original:[],modified:[]};let h=0,f=0,p=0,m=0,v=0,b=0;const L=(V,R)=>V.afterLineNumber-R.afterLineNumber,S=(V,R)=>{if(R.domNode===null&&V.length>0){const M=V[V.length-1];if(M.afterLineNumber===R.afterLineNumber&&M.domNode===null){M.heightInLines+=R.heightInLines;return}}V.push(R)},y=new Ree(this._modifiedForeignVZ),E=new Ree(this._originalForeignVZ);let A=1,N=1;for(let V=0,R=this._lineChanges.length;V<=R;V++){const M=V<R?this._lineChanges[V]:null;M!==null?(p=M.originalStartLineNumber+(M.originalEndLineNumber>0?-1:0),m=M.modifiedStartLineNumber+(M.modifiedEndLineNumber>0?-1:0),f=M.originalEndLineNumber>0?V1._getViewLineCount(this._originalEditor,M.originalStartLineNumber,M.originalEndLineNumber):0,h=M.modifiedEndLineNumber>0?V1._getViewLineCount(this._modifiedEditor,M.modifiedStartLineNumber,M.modifiedEndLineNumber):0,v=Math.max(M.originalStartLineNumber,M.originalEndLineNumber),b=Math.max(M.modifiedStartLineNumber,M.modifiedEndLineNumber)):(p+=1e7+f,m+=1e7+h,v=p,b=m);let K=[],X=[];if(o){let T;M?M.originalEndLineNumber>0?T=M.originalStartLineNumber-A:T=M.modifiedStartLineNumber-N:T=s.getLineCount()-A;for(let F=0;F<T;F++){const B=A+F,U=N+F,G=a.getModelLineViewLineCount(B),Z=u.getModelLineViewLineCount(U);G<Z?K.push({afterLineNumber:B,heightInLines:Z-G,domNode:null,marginDomNode:null}):G>Z&&X.push({afterLineNumber:U,heightInLines:G-Z,domNode:null,marginDomNode:null})}M&&(A=(M.originalEndLineNumber>0?M.originalEndLineNumber:M.originalStartLineNumber)+1,N=(M.modifiedEndLineNumber>0?M.modifiedEndLineNumber:M.modifiedStartLineNumber)+1)}for(;y.current&&y.current.afterLineNumber<=b;){let T;y.current.afterLineNumber<=m?T=p-m+y.current.afterLineNumber:T=v;let F=null;M&&M.modifiedStartLineNumber<=y.current.afterLineNumber&&y.current.afterLineNumber<=M.modifiedEndLineNumber&&(F=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),K.push({afterLineNumber:T,heightInLines:y.current.height/t,domNode:null,marginDomNode:F}),y.advance()}for(;E.current&&E.current.afterLineNumber<=v;){let T;E.current.afterLineNumber<=p?T=m-p+E.current.afterLineNumber:T=b,X.push({afterLineNumber:T,heightInLines:E.current.height/e,domNode:null}),E.advance()}if(M!==null&&vy(M)){const T=this._produceOriginalFromDiff(M,f,h);T&&K.push(T)}if(M!==null&&by(M)){const T=this._produceModifiedFromDiff(M,f,h);T&&X.push(T)}let $=0,D=0;for(K=K.sort(L),X=X.sort(L);$<K.length&&D<X.length;){const T=K[$],F=X[D],B=T.afterLineNumber-p,U=F.afterLineNumber-m;B<U?(S(d.original,T),$++):U<B?(S(d.modified,F),D++):T.shouldNotShrink?(S(d.original,T),$++):F.shouldNotShrink?(S(d.modified,F),D++):T.heightInLines>=F.heightInLines?(T.heightInLines-=F.heightInLines,D++):(F.heightInLines-=T.heightInLines,$++)}for(;$<K.length;)S(d.original,K[$]),$++;for(;D<X.length;)S(d.modified,X[D]),D++}return{original:V1._ensureDomNodes(d.original),modified:V1._ensureDomNodes(d.modified)}}static _ensureDomNodes(e){return e.map(t=>(t.domNode||(t.domNode=Ode()),t))}}function tp(i,e,t,n,r){return{range:new Q(i,e,t,n),options:r}}const Ha={charDelete:Sn.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:Sn.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:Sn.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:Sn.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:Sn.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:Sn.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+pr.asClassName(KMe),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:Sn.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:Sn.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+pr.asClassName(Nde),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:Sn.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})};class sp extends Ade{constructor(e,t){super(e),this._disableSash=t===!1,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new Hs(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart(()=>this._onSashDragStart()),this._sash.onDidChange(n=>this._onSashDrag(n)),this._sash.onDidEnd(()=>this._onSashDragEnd()),this._sash.onDidReset(()=>this._onSashReset())}setEnableSplitViewResizing(e){const t=e===!1;this._disableSash!==t&&(this._disableSash=t,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?E0.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let r=Math.floor((e||.5)*n);const o=Math.floor(.5*n);return r=this._disableSash?o:r||o,n>sp.MINIMUM_EDITOR_WIDTH*2?(r<sp.MINIMUM_EDITOR_WIDTH&&(r=sp.MINIMUM_EDITOR_WIDTH),r>n-sp.MINIMUM_EDITOR_WIDTH&&(r=n-sp.MINIMUM_EDITOR_WIDTH)):r=o,this._sashPosition!==r&&(this._sashPosition=r,this._sash.layout()),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const n=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?E0.ENTIRE_DIFF_OVERVIEW_WIDTH:0),r=this.layout((this._startSashPosition+(e.currentX-e.startX))/n);this._sashRatio=r/n,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,t,n){const r=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new GMe(e,t,n,r,o).getViewZones()}_getOriginalEditorDecorations(e,t,n){const r=this._dataSource.getOriginalEditor(),o=String(this._removeColor),s={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(by(d)){s.decorations.push({range:new Q(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:n?Ha.lineDeleteWithSign:Ha.lineDelete}),(!vy(d)||!d.charChanges)&&s.decorations.push(tp(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824,Ha.charDeleteWholeLine));const h=XA(a,u,d.originalStartLineNumber,d.originalEndLineNumber);if(s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,o)),d.charChanges){for(const f of d.charChanges)if(by(f))if(t)for(let p=f.originalStartLineNumber;p<=f.originalEndLineNumber;p++){let m,v;p===f.originalStartLineNumber?m=f.originalStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.originalEndLineNumber?v=f.originalEndColumn:v=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(tp(p,m,p,v,Ha.charDelete))}else s.decorations.push(tp(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn,Ha.charDelete))}}return s}_getModifiedEditorDecorations(e,t,n){const r=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(vy(d)){s.decorations.push({range:new Q(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:n?Ha.lineInsertWithSign:Ha.lineInsert}),(!by(d)||!d.charChanges)&&s.decorations.push(tp(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,Ha.charInsertWholeLine));const h=XA(a,u,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,o)),d.charChanges){for(const f of d.charChanges)if(vy(f))if(t)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let m,v;p===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(tp(p,m,p,v,Ha.charInsert))}else s.decorations.push(tp(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Ha.charInsert))}}return s}}sp.MINIMUM_EDITOR_WIDTH=100;class GMe extends V1{constructor(e,t,n,r,o){super(e,t,n,r,o)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,t,n){return n>t?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n-t,domNode:null}:null}_produceModifiedFromDiff(e,t,n){return t>n?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:t-n,domNode:null}:null}}class Pee extends Ade{constructor(e,t){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange(n=>{this._decorationsLeft!==n.decorationsLeft&&(this._decorationsLeft=n.decorationsLeft,e.relayoutEditors())}))}setEnableSplitViewResizing(e){}_getViewZones(e,t,n,r){const o=this._dataSource.getOriginalEditor(),s=this._dataSource.getModifiedEditor();return new qMe(e,t,n,o,s,r).getViewZones()}_getOriginalEditorDecorations(e,t,n){const r=String(this._removeColor),o={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),a=s.getModel(),u=s._getViewModel();for(const d of e)if(by(d)){o.decorations.push({range:new Q(d.originalStartLineNumber,1,d.originalEndLineNumber,1073741824),options:Ha.lineDeleteMargin});const h=XA(a,u,d.originalStartLineNumber,d.originalEndLineNumber);o.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,r))}return o}_getModifiedEditorDecorations(e,t,n){const r=this._dataSource.getModifiedEditor(),o=String(this._insertColor),s={decorations:[],overviewZones:[]},a=r.getModel(),u=r._getViewModel();for(const d of e)if(vy(d)){s.decorations.push({range:new Q(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824),options:n?Ha.lineInsertWithSign:Ha.lineInsert});const h=XA(a,u,d.modifiedStartLineNumber,d.modifiedEndLineNumber);if(s.overviewZones.push(new zA(h.startLineNumber,h.endLineNumber,o)),d.charChanges){for(const f of d.charChanges)if(vy(f))if(t)for(let p=f.modifiedStartLineNumber;p<=f.modifiedEndLineNumber;p++){let m,v;p===f.modifiedStartLineNumber?m=f.modifiedStartColumn:m=a.getLineFirstNonWhitespaceColumn(p),p===f.modifiedEndLineNumber?v=f.modifiedEndColumn:v=a.getLineLastNonWhitespaceColumn(p),s.decorations.push(tp(p,m,p,v,Ha.charInsert))}else s.decorations.push(tp(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn,Ha.charInsert))}else s.decorations.push(tp(d.modifiedStartLineNumber,1,d.modifiedEndLineNumber,1073741824,Ha.charInsertWholeLine))}return s}layout(){return Math.max(5,this._decorationsLeft)}}class qMe extends V1{constructor(e,t,n,r,o,s){super(e,t,n,r,o),this._originalModel=r.getModel(),this._renderIndicators=s,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,t,n){const r=document.createElement("div");return r.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:n,domNode:document.createElement("div"),marginDomNode:r}}_produceModifiedFromDiff(e,t,n){const r=document.createElement("div");r.className=`view-lines line-delete ${ob}`;const o=document.createElement("div");o.className="inline-deleted-margin-view-zone";const s={shouldNotShrink:!0,afterLineNumber:e.modifiedEndLineNumber===0?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:t,minWidthInPx:0,domNode:r,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(s),s}_finalize(e){const t=this._modifiedEditor.getOptions(),n=this._modifiedEditor.getModel().getOptions().tabSize,r=t.get(43),o=t.get(29),s=r.typicalHalfwidthCharacterWidth,a=t.get(92),u=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),h=t.get(58),p=t.get(130).decorationsWidth,m=t.get(104),v=t.get(87),b=t.get(82),L=t.get(44),S=this._lineBreaksComputer.finalize();let y=0;for(let E=0;E<this._pendingLineChange.length;E++){const A=this._pendingLineChange[E],N=this._pendingViewZones[E],V=N.domNode;Na.applyFontInfoSlow(V,r);const R=N.marginDomNode;Na.applyFontInfoSlow(R,r);const M=[];if(A.charChanges)for(const U of A.charChanges)by(U)&&M.push(new R2(new Q(U.originalStartLineNumber,U.originalStartColumn,U.originalEndLineNumber,U.originalEndColumn),"char-delete",0));const K=M.length>0,X=Tb(1e4);let $=0,D=0,T=null;for(let U=A.originalStartLineNumber;U<=A.originalEndLineNumber;U++){const G=U-A.originalStartLineNumber,Z=this._originalModel.getLineTokens(U),z=Z.getLineContent(),O=S[y++],Y=Nu.filter(M,U,1,z.length+1);if(O){let fe=0;for(const we of O.breakOffsets){const Ie=Z.sliceAndInflate(fe,we,0),je=z.substring(fe,we);$=Math.max($,this._renderOriginalLine(D++,je,Ie,Nu.extractWrapped(Y,fe,we),K,u,d,r,o,h,p,m,v,b,L,n,X,R)),fe=we}for(T||(T=[]);T.length<G;)T[T.length]=1;T[G]=O.breakOffsets.length,N.heightInLines+=O.breakOffsets.length-1;const ne=document.createElement("div");ne.className="line-delete",e.original.push({afterLineNumber:U,afterColumn:0,heightInLines:O.breakOffsets.length-1,domNode:Ode(),marginDomNode:ne})}else $=Math.max($,this._renderOriginalLine(D++,z,Z,Y,K,u,d,r,o,h,p,m,v,b,L,n,X,R))}$+=a;const F=X.build(),B=Mee?Mee.createHTML(F):F;if(V.innerHTML=B,N.minWidthInPx=$*s,T){const U=A.originalEndLineNumber-A.originalStartLineNumber;for(;T.length<=U;)T[T.length]=1}N.diff.viewLineCounts=T}e.original.sort((E,A)=>E.afterLineNumber-A.afterLineNumber)}_renderOriginalLine(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b,L,S,y){S.appendASCIIString('<div class="view-line'),o||S.appendASCIIString(" char-delete"),S.appendASCIIString('" style="top:'),S.appendASCIIString(String(e*h)),S.appendASCIIString('px;width:1000000px;">');const E=Fu.isBasicASCII(t,s),A=Fu.containsRTL(t,E,a),N=O8(new SC(u.isMonospace&&!d,u.canUseHalfwidthRightwardsArrow,t,!1,E,A,0,n,r,L,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,p,m,v,b!==Du.OFF,null),S);if(S.appendASCIIString("</div>"),this._renderIndicators){const V=document.createElement("div");V.className=`delete-sign ${pr.asClassName(Nde)}`,V.setAttribute("style",`position:absolute;top:${e*h}px;width:${f}px;height:${h}px;right:0;`),y.appendChild(V)}return N.characterMapping.getAbsoluteOffset(N.characterMapping.length)}}function YMe(i,e){return Ua(i,e,["off","on","inherit"])}function vy(i){return i.modifiedEndLineNumber>0}function by(i){return i.originalEndLineNumber>0}function Ode(){const i=document.createElement("div");return i.className="diagonal-fill",i}function XA(i,e,t,n){const r=i.getLineCount();return t=Math.min(r,Math.max(1,t)),n=Math.min(r,Math.max(1,n)),e.coordinatesConverter.convertModelRangeToViewRange(new Q(t,i.getLineMinColumn(t),n,i.getLineMaxColumn(n)))}function Fee(i,e){return{enableSplitViewResizing:Yt(i.enableSplitViewResizing,e.enableSplitViewResizing),renderSideBySide:Yt(i.renderSideBySide,e.renderSideBySide),maxComputationTime:SH(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:SH(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:Yt(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:Yt(i.renderIndicators,e.renderIndicators),originalEditable:Yt(i.originalEditable,e.originalEditable),diffCodeLens:Yt(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:Yt(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:YMe(i.diffWordWrap,e.diffWordWrap)}}function ZMe(i,e){return{enableSplitViewResizing:i.enableSplitViewResizing!==e.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==e.renderSideBySide,maxComputationTime:i.maxComputationTime!==e.maxComputationTime,maxFileSize:i.maxFileSize!==e.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==e.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==e.renderIndicators,originalEditable:i.originalEditable!==e.originalEditable,diffCodeLens:i.diffCodeLens!==e.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==e.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==e.diffWordWrap}}hr((i,e)=>{const t=i.getColor(ace);t&&(e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`),e.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${t}; }`));const n=i.getColor(lce);n&&(e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ${n}; }`),e.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${n}; }`));const r=i.getColor(fIe);r&&e.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${i.type==="hc"?"dashed":"solid"} ${r}; }`);const o=i.getColor(gIe);o&&e.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${i.type==="hc"?"dashed":"solid"} ${o}; }`);const s=i.getColor(HS);s&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${s}; }`);const a=i.getColor(pIe);a&&e.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${a}; }`);const u=i.getColor(cy);u&&e.addRule(`
			.monaco-diff-editor .diffViewport {
				background: ${u};
			}
		`);const d=i.getColor(dy);d&&e.addRule(`
			.monaco-diff-editor .diffViewport:hover {
				background: ${d};
			}
		`);const h=i.getColor(hy);h&&e.addRule(`
			.monaco-diff-editor .diffViewport:active {
				background: ${h};
			}
		`);const f=i.getColor(mIe);e.addRule(`
	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			${f} 12.5%,
			#0000 12.5%, #0000 50%,
			${f} 50%, ${f} 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	`)});function dg(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===_M.ICodeEditor:!1}function Mde(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===_M.IDiffEditor:!1}function Rde(i){return dg(i)?i:Mde(i)?i.getModifiedEditor():null}const Sq=gi("IWorkspaceEditService");function XMe(i){return Ga(i)&&(!!i.newUri||!!i.oldUri)}function QMe(i){return Ga(i)&&sn.isUri(i.resource)&&Ga(i.edit)}class Z8{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(QMe(t))return new Pde(t.resource,t.edit,t.modelVersionId,t.metadata);if(XMe(t))return new JMe(t.oldUri,t.newUri,t.options,t.metadata);throw new Error("Unsupported edit")})}}class Pde extends Z8{constructor(e,t,n,r){super(r),this.resource=e,this.textEdit=t,this.versionId=n}}class JMe extends Z8{constructor(e,t,n,r){super(r),this.oldResource=e,this.newResource=t,this.options=n}}class jr{static insert(e,t){return{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}class Gu{constructor(e={},t=[],n=[]){this._contents=e,this._keys=t,this._overrides=n,this.isFrozen=!1,this.overrideConfigurations=new Map}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?wNe(this.contents,e):this.contents}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=Qg(this.contents),n=Qg(this.overrides),r=[...this.keys];for(const o of e){this.mergeContents(t,o.contents);for(const s of o.overrides){const[a]=n.filter(u=>oc(u.identifiers,s.identifiers));a?(this.mergeContents(a.contents,s.contents),a.keys.push(...s.keys),a.keys=Eb(a.keys)):n.push(Qg(s))}for(const s of o.keys)r.indexOf(s)===-1&&r.push(s)}return new Gu(t,r,n)}freeze(){return this.isFrozen=!0,this}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;let n={};for(const r of Eb([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[r],s=t[r];s&&(typeof o=="object"&&typeof s=="object"?(o=Qg(o),this.mergeContents(o,s)):o=s),n[r]=o}return new Gu(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Ga(e[n])&&Ga(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Qg(t[n])}}checkAndFreeze(e){return this.isFrozen&&!Object.isFrozen(e)?Sxe(e):e}getContentsForOverrideIdentifer(e){let t=null,n=null;const r=o=>{o&&(n?this.mergeContents(n,o):n=Qg(o))};for(const o of this.overrides)oc(o.identifiers,[e])?t=o.contents:o.identifiers.includes(e)&&r(o.contents);return r(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.addKey(e),eq(this.contents,e,t,n=>{throw new Error(n)})}removeValue(e){this.removeKey(e)&&CNe(this.contents,e)}addKey(e){let t=this.keys.length;for(let n=0;n<t;n++)e.indexOf(this.keys[n])===0&&(t=n);this.keys.splice(t,1,e)}removeKey(e){let t=this.keys.indexOf(e);return t!==-1?(this.keys.splice(t,1),!0):!1}}class eRe extends Gu{constructor(e={}){const t=Zr.as(wC.Configuration).getConfigurationProperties(),n=Object.keys(t),r=Object.create(null),o=[];for(const s in t){const a=e[s],u=a!==void 0?a:t[s].default;eq(r,s,u,d=>console.error(`Conflict in default settings: ${d}`))}for(const s of Object.keys(r))EA.test(s)&&o.push({identifiers:$ue(s),keys:Object.keys(r[s]),contents:Uce(r[s],a=>console.error(`Conflict in default settings file: ${a}`))});super(r,n,o)}}class X8{constructor(e,t,n=new Gu,r=new Gu,o=new ta,s=new Gu,a=new ta,u=!0){this._defaultConfiguration=e,this._localUserConfiguration=t,this._remoteUserConfiguration=n,this._workspaceConfiguration=r,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new ta,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidateConfigurationModel(t,n).getValue(e)}updateValue(e,t,n={}){let r;n.resource?(r=this._memoryConfigurationByResource.get(n.resource),r||(r=new Gu,this._memoryConfigurationByResource.set(n.resource,r))):r=this._memoryConfiguration,t===void 0?r.removeValue(e):r.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}getConsolidateConfigurationModel(e,t){let n=this.getConsolidatedConfigurationModelForResource(e,t);return e.overrideIdentifier?n.override(e.overrideIdentifier):n}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const r=t.getFolder(e);r&&(n=this.getFolderConsolidatedConfiguration(r.uri)||n);const o=this._memoryConfigurationByResource.get(e);o&&(n=n.merge(o))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(e);r?(t=n.merge(r),this._freeze&&(t=t.freeze()),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:r,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:r,keys:o}]),e},[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),o=e.folders.reduce((s,a)=>(s.set(sn.revive(a[0]),this.parseConfigurationModel(a[1])),s),new ta);return new X8(t,n,new Gu,r,o,new Gu,new ta,!1)}static parseConfigurationModel(e){return new Gu(e.contents,e.keys,e.overrides).freeze()}}class tRe{constructor(e,t,n,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=r,this._previousConfiguration=void 0;const o=new Set;e.keys.forEach(a=>o.add(a)),e.overrides.forEach(([,a])=>a.forEach(u=>o.add(u))),this.affectedKeys=[...o.values()];const s=new Gu;this.affectedKeys.forEach(a=>s.setValue(a,{})),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=X8.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,e)){if(t){const r=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(n=this.previous)===null||n===void 0?void 0:n.workspace):void 0,o=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!ed(r,o)}return!0}return!1}doesAffectedKeysTreeContains(e,t){let n=Uce({[t]:!0},()=>{}),r;for(;typeof n=="object"&&(r=Object.keys(n)[0]);){if(e=e[r],!e)return!1;n=n[r]}return!0}}const nRe=/^(cursor|delete)/;class iRe extends Oe{constructor(e,t,n,r,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=r,this._logService=o,this._onDidUpdateKeybindings=this._register(new be),this._currentChord=null,this._currentChordChecker=new sM,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Ww.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new Oa,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Rt.None}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){const n=this.resolveKeyboardEvent(e);if(n.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[r]=n.getDispatchParts();if(r===null)return null;const o=this._contextKeyService.getContext(t),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,s,r)}_enterChordMode(e,t){this._currentChord={keypress:e,label:t},this._currentChordStatusMessage=this._notificationService.status(C("first.chord","({0}) was pressed. Waiting for second key of chord...",t));const n=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-n>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[r]=n.getSingleModifierDispatchParts();if(r)return this._ignoreSingleModifiers.has(r)?(this._log(`+ Ignoring single modifier ${r} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Ww.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Ww.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${r}.`),this._currentSingleModifier=r,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):r===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${r} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${r}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=n.getParts();return this._ignoreSingleModifiers=new Ww(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let r=!1;if(e.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,s=null;if(n){const[h]=e.getSingleModifierDispatchParts();o=h,s=h}else[o]=e.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),r;const a=this._contextKeyService.getContext(t),u=e.getLabel(),d=this._getResolver().resolve(a,s,o);return this._logService.trace("KeybindingService#dispatch",u,d==null?void 0:d.commandId),d&&d.enterChord?(r=!0,this._enterChordMode(o,u),r):(this._currentChord&&(!d||!d.commandId)&&(this._notificationService.status(C("missing.chord","The key combination ({0}, {1}) is not a command.",this._currentChord.label,u),{hideAfter:10*1e3}),r=!0),this._leaveChordMode(),d&&d.commandId&&(d.bubble||(r=!0),typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,h=>this._notificationService.warn(h)),nRe.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding"})),r)}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}class Ww{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}Ww.EMPTY=new Ww(null);class Cy{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(let r=0,o=e.length;r<o;r++){const s=e[r].command;s&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=Cy.combine(e,t);for(let r=0,o=this._keybindings.length;r<o;r++){let s=this._keybindings[r];s.keypressParts.length!==0&&(s.when&&s.when.type===0||this._addKeyPress(s.keypressParts[0],s))}}static _isTargetedForRemoval(e,t,n,r,o){return!(e.command!==r||t&&e.keypressParts[0]!==t||n&&e.keypressParts[1]!==n||o&&(!e.when||!exe(o,e.when)))}static combine(e,t){e=e.slice(0);let n=[];for(const r of t){if(!r.command||r.command.length===0||r.command.charAt(0)!=="-"){n.push(r);continue}const o=r.command.substr(1),s=r.keypressParts[0],a=r.keypressParts[1],u=r.when;for(let d=e.length-1;d>=0;d--)this._isTargetedForRemoval(e[d],s,a,o,u)&&e.splice(d,1)}return e.concat(n)}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let r=n.length-1;r>=0;r--){let o=n[r];if(o.command===t.command)continue;const s=o.keypressParts.length>1,a=t.keypressParts.length>1;s&&a&&o.keypressParts[1]!==t.keypressParts[1]||Cy.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,r=t.length;n<r;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:bue(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let r=n.length-1;r>=0;r--){const o=n[r];if(t.contextMatchesRules(o.when))return o}return n[n.length-1]}resolve(e,t,n){this._log(`| Resolving ${n}${t?` chorded from ${t}`:""}`);let r=null;if(t!==null){const s=this._map.get(t);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;r=[];for(let a=0,u=s.length;a<u;a++){let d=s[a];d.keypressParts[1]===n&&r.push(d)}}else{const s=this._map.get(n);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;r=s}let o=this._findCommand(e,r);return o?t===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${r.length} keybinding entries, matched chord, when: ${Bee(o.when)}, source: ${Wee(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${r.length} keybinding entries, matched ${o.command}, when: ${Bee(o.when)}, source: ${Wee(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){let r=t[n];if(Cy.contextMatchesRules(e,r.when))return r}return null}static contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function Bee(i){return i?`${i.serialize()}`:"no when condition"}function Wee(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}class Vee{constructor(e,t,n,r,o,s,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.keypressParts=e?JH(e.getDispatchParts()):[],e&&this.keypressParts.length===0&&(this.keypressParts=JH(e.getSingleModifierDispatchParts())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=r,this.isDefault=o,this.extensionId=s,this.isBuiltinExtension=a}}function JH(i){let e=[];for(let t=0,n=i.length;t<n;t++){const r=i[t];if(!r)return e;e.push(r)}return e}class Lq{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const r=[];for(let o=0,s=t.length;o<s;o++){const a=t[o],u=n(a);if(u===null)return null;r[o]=sRe(a,u,this.modifierLabels[e])}return r.join(" ")}}const Eq=new Lq({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:C({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),rRe=new Lq({ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:C({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:C({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:C({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:C({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:C({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),oRe=new Lq({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"});function sRe(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class aRe extends ALe{constructor(e,t){if(super(),t.length===0)throw Kh("parts");this._os=e,this._parts=t}getLabel(){return Eq.toLabel(this._os,this._parts,e=>this._getLabel(e))}getAriaLabel(){return rRe.toLabel(this._os,this._parts,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._parts.length>1||this._parts[0].isDuplicateModifierCase()?null:oRe.toLabel(this._os,this._parts,e=>this._getElectronAccelerator(e))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(e=>this._getPart(e))}_getPart(e){return new NLe(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchParts(){return this._parts.map(e=>this._getDispatchPart(e))}getSingleModifierDispatchParts(){return this._parts.map(e=>this._getSingleModifierDispatchPart(e))}}class QA extends aRe{constructor(e,t){super(t,e.parts)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return R1.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":R1.toString(e.keyCode)}_getElectronAccelerator(e){return R1.toElectronAccelerator(e.keyCode)}_getDispatchPart(e){return QA.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=R1.toString(e.keyCode),t}_getSingleModifierDispatchPart(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=iG[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 83;case 52:return 81;case 53:return 87;case 54:return 89;case 55:return 88;case 56:return 0;case 57:return 80;case 58:return 90;case 59:return 86;case 60:return 82;case 61:return 84;case 62:return 85;case 106:return 92}return 0}static _resolveSimpleUserBinding(e){if(!e)return null;if(e instanceof Cb)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new Cb(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveUserBinding(e,t){const n=JH(e.map(r=>this._resolveSimpleUserBinding(r)));return n.length>0?[new QA(new wF(n),t)]:[]}}const Fde=gi("contextService");class lRe{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}var _o;(function(i){i.noSelection=C("noSelection","No selection"),i.singleSelectionRange=C("singleSelectionRange","Line {0}, Column {1} ({2} selected)"),i.singleSelection=C("singleSelection","Line {0}, Column {1}"),i.multiSelectionRange=C("multiSelectionRange","{0} selections ({1} characters selected)"),i.multiSelection=C("multiSelection","{0} selections"),i.emergencyConfOn=C("emergencyConfOn","Now changing the setting `accessibilitySupport` to 'on'."),i.openingDocs=C("openingDocs","Now opening the Editor Accessibility documentation page."),i.readonlyDiffEditor=C("readonlyDiffEditor"," in a read-only pane of a diff editor."),i.editableDiffEditor=C("editableDiffEditor"," in a pane of a diff editor."),i.readonlyEditor=C("readonlyEditor"," in a read-only code editor"),i.editableEditor=C("editableEditor"," in a code editor"),i.changeConfigToOnMac=C("changeConfigToOnMac","To configure the editor to be optimized for usage with a Screen Reader press Command+E now."),i.changeConfigToOnWinLinux=C("changeConfigToOnWinLinux","To configure the editor to be optimized for usage with a Screen Reader press Control+E now."),i.auto_on=C("auto_on","The editor is configured to be optimized for usage with a Screen Reader."),i.auto_off=C("auto_off","The editor is configured to never be optimized for usage with a Screen Reader, which is not the case at this time."),i.tabFocusModeOnMsg=C("tabFocusModeOnMsg","Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior by pressing {0}."),i.tabFocusModeOnMsgNoKb=C("tabFocusModeOnMsgNoKb","Pressing Tab in the current editor will move focus to the next focusable element. The command {0} is currently not triggerable by a keybinding."),i.tabFocusModeOffMsg=C("tabFocusModeOffMsg","Pressing Tab in the current editor will insert the tab character. Toggle this behavior by pressing {0}."),i.tabFocusModeOffMsgNoKb=C("tabFocusModeOffMsgNoKb","Pressing Tab in the current editor will insert the tab character. The command {0} is currently not triggerable by a keybinding."),i.openDocMac=C("openDocMac","Press Command+H now to open a browser window with more information related to editor accessibility."),i.openDocWinLinux=C("openDocWinLinux","Press Control+H now to open a browser window with more information related to editor accessibility."),i.outroMsg=C("outroMsg","You can dismiss this tooltip and return to the editor by pressing Escape or Shift+Escape."),i.showAccessibilityHelpAction=C("showAccessibilityHelpAction","Show Accessibility Help")})(_o||(_o={}));var e$;(function(i){i.inspectTokensAction=C("inspectTokens","Developer: Inspect Tokens")})(e$||(e$={}));var y3;(function(i){i.gotoLineActionLabel=C("gotoLineActionLabel","Go to Line/Column...")})(y3||(y3={}));var t$;(function(i){i.helpQuickAccessActionLabel=C("helpQuickAccess","Show all Quick Access Providers")})(t$||(t$={}));var JA;(function(i){i.quickCommandActionLabel=C("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=C("quickCommandActionHelp","Show And Run Commands")})(JA||(JA={}));var eO;(function(i){i.quickOutlineActionLabel=C("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=C("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(eO||(eO={}));var S3;(function(i){i.editorViewAccessibleLabel=C("editorViewAccessibleLabel","Editor content"),i.accessibilityHelpMessage=C("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")})(S3||(S3={}));var n$;(function(i){i.toggleHighContrast=C("toggleHighContrast","Toggle High Contrast Theme")})(n$||(n$={}));var i$;(function(i){i.bulkEditServiceSummary=C("bulkEditServiceSummary","Made {0} edits in {1} files")})(i$||(i$={}));var Bde=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Wde=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Vde=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class uRe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new be}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}function cRe(i,e,t){return dg(i)?e(i):t(i)}let L3=class{constructor(e){this.modelService=e}setEditor(e){this.editor=e}createModelReference(e){let t=null;return this.editor&&(t=cRe(this.editor,n=>this.findModel(n,e),n=>this.findModel(n.getOriginalEditor(),e)||this.findModel(n.getModifiedEditor(),e))),t?Promise.resolve(new vLe(new uRe(t))):Promise.reject(new Error("Model not found"))}findModel(e,t){let n=this.modelService.getModel(t);return n&&n.uri.toString()!==t.toString()?null:n}};L3=Bde([Wde(0,Io)],L3);class Q8{show(){return Q8.NULL_PROGRESS_RUNNER}showWhile(e,t){return Vde(this,void 0,void 0,function*(){yield e})}}Q8.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class dRe{confirm(e){return this.doConfirm(e).then(t=>({confirmed:t,checkboxChecked:!1}))}doConfirm(e){let t=e.message;return e.detail&&(t=t+`

`+e.detail),Promise.resolve(window.confirm(t))}show(e,t,n,r){return Promise.resolve({choice:0})}}class J8{info(e){return this.notify({severity:Ur.Info,message:e})}warn(e){return this.notify({severity:Ur.Warning,message:e})}error(e){return this.notify({severity:Ur.Error,message:e})}notify(e){switch(e.severity){case Ur.Error:console.error(e.message);break;case Ur.Warning:console.warn(e.message);break;default:console.log(e.message);break}return J8.NO_OP}status(e,t){return Oe.None}}J8.NO_OP=new rMe;class hRe{constructor(e){this._onWillExecuteCommand=new be,this._onDidExecuteCommand=new be,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Qn.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}}class Hde extends iRe{constructor(e,t,n,r,o,s){super(e,t,n,r,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(qe(s,Ht.KEY_DOWN,a=>{const u=new yr(a);this._dispatch(u,u.target)&&(u.preventDefault(),u.stopPropagation())})),this._register(qe(window,Ht.KEY_UP,a=>{const u=new yr(a);this._singleModifierDispatch(u,u.target)&&u.preventDefault()}))}addDynamicKeybinding(e,t,n,r){const o=aH(t,qu),s=new Qe;return o&&(this._dynamicKeybindings.push({keybinding:o.parts,command:e,when:r,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),s.add(Kn(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===e){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:1});return}}))),s.add(Qn.registerCommand(e,n)),this.updateResolver({source:1}),s}updateResolver(e){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(e)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Os.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new Cy(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(e,t){let n=[],r=0;for(const o of e){const s=o.when||void 0,a=o.keybinding;if(!a)n[r++]=new Vee(void 0,o.command,o.commandArgs,s,t,null,!1);else{const u=QA.resolveUserBinding(a,qu);for(const d of u)n[r++]=new Vee(d,o.command,o.commandArgs,s,t,null,!1)}}return n}resolveKeyboardEvent(e){let t=new Cb(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode).toChord();return new QA(t,qu)}}function Hee(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof sn)}class $de{constructor(){this._onDidChangeConfiguration=new be,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new X8(new eRe,new Gu)}getValue(e,t){const n=typeof e=="string"?e:void 0,r=Hee(e)?e:Hee(t)?t:{};return this._configuration.getValue(n,r,void 0)}updateValues(e){const t={data:this._configuration.toData()};let n=[];for(const r of e){const[o,s]=r;this.getValue(o)!==s&&(this._configuration.updateValue(o,s),n.push(o))}if(n.length>0){const r=new tRe({keys:n,overrides:[]},t,this._configuration);r.source=7,r.sourceConfig=null,this._onDidChangeConfiguration.fire(r)}return Promise.resolve()}updateValue(e,t,n,r){return this.updateValues([[e,t]])}}class fRe{constructor(e){this.configurationService=e,this._onDidChangeConfiguration=new be,this.configurationService.onDidChangeConfiguration(t=>{this._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:(n,r)=>t.affectsConfiguration(r)})})}getValue(e,t,n){const o=(Le.isIPosition(t)?t:null)?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0;return typeof o>"u"?this.configurationService.getValue():this.configurationService.getValue(o)}}let r$=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Xa||qn?`
`:`\r
`}};r$=Bde([Wde(0,nr)],r$);class gRe{publicLog(e,t){return Promise.resolve(void 0)}publicLog2(e,t){return this.publicLog(e,t)}}class eB{constructor(){const e=sn.from({scheme:eB.SCHEME,authority:"model",path:"/"});this.workspace={id:"4064f6ec-cb38-4ad0-af64-ee6467e63c82",folders:[new lRe({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}}eB.SCHEME="inmemory";function E3(i,e,t){if(!e||!(i instanceof $de))return;let n=[];Object.keys(e).forEach(r=>{kDe(r)&&n.push([`editor.${r}`,e[r]]),t&&TDe(r)&&n.push([`diffEditor.${r}`,e[r]])}),n.length>0&&i.updateValues(n)}class pRe{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}apply(e,t){return Vde(this,void 0,void 0,function*(){const n=new Map;for(let s of e){if(!(s instanceof Pde))throw new Error("bad edit - only text edits are supported");const a=this._modelService.getModel(s.resource);if(!a)throw new Error("bad edit - model not found");if(typeof s.versionId=="number"&&a.getVersionId()!==s.versionId)throw new Error("bad state - model changed in the meantime");let u=n.get(a);u||(u=[],n.set(a,u)),u.push(jr.replaceMove(Q.lift(s.textEdit.range),s.textEdit.text))}let r=0,o=0;for(const[s,a]of n)s.pushStackElement(),s.pushEditOperations([],a,()=>[]),s.pushStackElement(),o+=1,r+=a.length;return{ariaSummary:ec(i$.bulkEditServiceSummary,r,o)}})}}class mRe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}}class zde{constructor(e,t){this._codeEditorService=e,this._container=t,this.onDidLayout=Rt.None}get dimension(){return this._dimension||(this._dimension=c8(window.document.body)),this._dimension}get container(){return this._container}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())===null||e===void 0||e.focus()}}class _Re{constructor(){this._neverEmitter=new be,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}const K0=gi("themeService"),Sr=gi("keybindingService");class vRe extends Oe{constructor(){super(),this._onCodeEditorAdd=this._register(new be),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new be),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new be),this._onDiffEditorRemove=this._register(new be),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null)}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}setModelProperty(e,t,n){const r=e.toString();let o;this._modelProperties.has(r)?o=this._modelProperties.get(r):(o=new Map,this._modelProperties.set(r,o)),o.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}}var bRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},CRe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let o$=class extends vRe{constructor(e,t){super(),this._decorationOptionProviders=new Map,this._globalStyleSheet=e||null,this._themeService=t}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorations(e))))}};o$=bRe([CRe(1,Er)],o$);var wRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},$ee=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let x3=class extends o${constructor(e,t,n){super(e,n),this.onCodeEditorAdd(()=>this._checkContextKey()),this.onCodeEditorRemove(()=>this._checkContextKey()),this._editorIsOpen=t.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,n){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===kn.http||o===kn.https)return sue(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")e.setSelection(r),e.revealRangeInCenter(r,1);else{const o={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};x3=wRe([$ee(1,dn),$ee(2,Er)],x3);var xq=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Cr=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let yRe=0,zee=!1;function SRe(i){if(!i){if(zee)return;zee=!0}LEe(i||document.body)}let D3=class extends qA{constructor(e,t,n,r,o,s,a,u,d,h){const f=Object.assign({},t);f.ariaLabel=f.ariaLabel||S3.editorViewAccessibleLabel,f.ariaLabel=f.ariaLabel+";"+S3.accessibilityHelpMessage,super(e,f,{},n,r,o,s,u,d,h),a instanceof Hde?this._standaloneKeybindingService=a:this._standaloneKeybindingService=null,SRe(f.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;let r="DYNAMIC_"+ ++yRe,o=_t.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(r,e,t,o),r}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Oe.None;const t=e.id,n=e.label,r=_t.and(_t.equals("editorId",this.getId()),_t.deserialize(e.precondition)),o=e.keybindings,s=_t.and(r,_t.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,u=e.contextMenuOrder||0,d=(m,...v)=>Promise.resolve(e.run(this,...v)),h=new Qe,f=this.getId()+":"+t;if(h.add(Qn.registerCommand(f,d)),a){let m={command:{id:f,title:n},when:r,group:a,order:u};h.add(ia.appendMenuItem(Mt.EditorContext,m))}if(Array.isArray(o))for(const m of o)h.add(this._standaloneKeybindingService.addDynamicKeybinding(f,m,d,s));let p=new Cde(f,n,n,r,d,this._contextKeyService);return this._actions[t]=p,h.add(Kn(()=>{delete this._actions[t]})),h}_triggerCommand(e,t){if(this._codeEditorService instanceof x3)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};D3=xq([Cr(2,An),Cr(3,ki),Cr(4,kr),Cr(5,dn),Cr(6,Sr),Cr(7,Er),Cr(8,fo),Cr(9,il)],D3);let tO=class extends D3{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){const L=Object.assign({},t);E3(p,L,!1);const S=h.registerEditorContainer(e);typeof L.theme=="string"&&h.setTheme(L.theme),typeof L.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!L.autoDetectHighContrast);let y=L.model;delete L.model,super(e,L,r,o,s,a,u,h,f,m),this._contextViewService=d,this._configurationService=p,this._standaloneThemeService=h,this._register(n),this._register(S);let E;if(typeof y>"u"?(E=Ude(v,b,L.value||"",L.language||$c.text,void 0),this._ownsModel=!0):(E=y,this._ownsModel=!1),this._attachModel(E),E){let A={oldModelUrl:null,newModelUrl:E.uri};this._onDidChangeModel.fire(A)}}dispose(){super.dispose()}updateOptions(e){E3(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_attachModel(e){super._attachModel(e),this._modelData&&this._contextViewService.setContainer(this._modelData.view.domNode.domNode)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};tO=xq([Cr(3,An),Cr(4,ki),Cr(5,kr),Cr(6,dn),Cr(7,Sr),Cr(8,$p),Cr(9,K0),Cr(10,fo),Cr(11,nr),Cr(12,il),Cr(13,Io),Cr(14,Fs)],tO);let s$=class extends E0{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b){const L=Object.assign({},t);E3(p,L,!0);const S=h.registerEditorContainer(e);typeof L.theme=="string"&&h.setTheme(L.theme),typeof L.autoDetectHighContrast<"u"&&h.setAutoDetectHighContrast(!!L.autoDetectHighContrast),super(e,L,{},b,u,o,r,d,h,f,m,v),this._contextViewService=a,this._configurationService=p,this._standaloneThemeService=h,this._register(n),this._register(S),this._contextViewService.setContainer(this._containerDomElement)}dispose(){super.dispose()}updateOptions(e){E3(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(D3,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};s$=xq([Cr(3,An),Cr(4,dn),Cr(5,Sr),Cr(6,$p),Cr(7,Hu),Cr(8,ki),Cr(9,K0),Cr(10,fo),Cr(11,nr),Cr(12,U0),Cr(13,zp),Cr(14,j0)],s$);function Ude(i,e,t,n,r){if(t=t||"",!n){const o=t.indexOf(`
`);let s=t;return o!==-1&&(s=t.substring(0,o)),Uee(i,t,e.createByFilepathOrFirstLine(r||null,s),r)}return Uee(i,t,e.create(n),r)}function Uee(i,e,t,n){return i.createModel(e,t,n)}const LRe="$initialize";let jee=!1;function a$(i){PS&&(jee||(jee=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class ERe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.method=n,this.args=r,this.type=0}}class Kee{constructor(e,t,n,r){this.vsWorker=e,this.seq=t,this.res=n,this.err=r,this.type=1}}class xRe{constructor(e,t,n,r){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=r,this.type=2}}class DRe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class IRe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class kRe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[n]={resolve:r,reject:o},this._send(new ERe(this._workerId,n,e,t))})}listen(e,t){let n=null;const r=new be({onFirstListenerAdd:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,r),this._send(new xRe(this._workerId,n,e,t))},onLastListenerRemove:()=>{this._pendingEmitters.delete(n),this._send(new IRe(this._workerId,n)),n=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.method,e.args).then(r=>{this._send(new Kee(this._workerId,t,r,void 0))},r=>{r.detail instanceof Error&&(r.detail=HQ(r.detail)),this._send(new Kee(this._workerId,t,void 0,HQ(r)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)(r=>{this._send(new DRe(this._workerId,t,r))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class TRe extends Oe{constructor(e,t,n){super();let r=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",d=>{this._protocol.handleMessage(d)},d=>{r&&r(d)})),this._protocol=new kRe({sendMessage:(d,h)=>{this._worker.postMessage(d,h)},handleMessage:(d,h)=>{if(typeof n[d]!="function")return Promise.reject(new Error("Missing method "+d+" on main thread host."));try{return Promise.resolve(n[d].apply(n,h))}catch(f){return Promise.reject(f)}},handleEvent:(d,h)=>{if(Kde(d)){const f=n[d].call(n,h);if(typeof f!="function")throw new Error(`Missing dynamic event ${d} on main thread host.`);return f}if(jde(d)){const f=n[d];if(typeof f!="function")throw new Error(`Missing event ${d} on main thread host.`);return f}throw new Error(`Malformed event name ${d}`)}}),this._protocol.setWorkerId(this._worker.getId());let o=null;typeof qr.require<"u"&&typeof qr.require.getConfig=="function"?o=qr.require.getConfig():typeof qr.requirejs<"u"&&(o=qr.requirejs.s.contexts._.config);const s=hG(n);this._onModuleLoaded=this._protocol.sendMessage(LRe,[this._worker.getId(),JSON.parse(JSON.stringify(o)),t,s]);const a=(d,h)=>this._request(d,h),u=(d,h)=>this._protocol.listen(d,h);this._lazyProxy=new Promise((d,h)=>{r=h,this._onModuleLoaded.then(f=>{d(NRe(f,a,u))},f=>{h(f),this._onError("Worker failed to load "+t,f)})})}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise((n,r)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(e,t).then(n,r)},r)})}_onError(e,t){console.error(e),console.info(t)}}function jde(i){return i[0]==="o"&&i[1]==="n"&&kf(i.charCodeAt(2))}function Kde(i){return/^onDynamic/.test(i)&&kf(i.charCodeAt(9))}function NRe(i,e,t){const n=s=>function(){const a=Array.prototype.slice.call(arguments,0);return e(s,a)},r=s=>function(a){return t(s,a)};let o={};for(const s of i){if(Kde(s)){o[s]=r(s);continue}if(jde(s)){o[s]=t(s,void 0);continue}o[s]=n(s)}return o}var g6;const Gee=(g6=window.trustedTypes)===null||g6===void 0?void 0:g6.createPolicy("defaultWorkerFactory",{createScriptURL:i=>i});function ARe(i,e){if(qr.MonacoEnvironment){if(typeof qr.MonacoEnvironment.getWorker=="function")return qr.MonacoEnvironment.getWorker(i,e);if(typeof qr.MonacoEnvironment.getWorkerUrl=="function"){const t=qr.MonacoEnvironment.getWorkerUrl(i,e);return new Worker(Gee?Gee.createScriptURL(t):t,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function ORe(i){return typeof i.then=="function"}class MRe{constructor(e,t,n,r,o){this.id=t;const s=ARe("workerMain.js",n);ORe(s)?this.worker=s:this.worker=Promise.resolve(s),this.postMessage(e,[]),this.worker.then(a=>{a.onmessage=function(u){r(u.data)},a.onmessageerror=o,typeof a.addEventListener=="function"&&a.addEventListener("error",o)})}getId(){return this.id}postMessage(e,t){this.worker&&this.worker.then(n=>n.postMessage(e,t))}dispose(){this.worker&&this.worker.then(e=>e.terminate()),this.worker=null}}class tB{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){let r=++tB.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new MRe(e,r,this._label||"anonymous"+r,t,o=>{a$(o),this._webWorkerFailedBeforeError=o,n(o)})}}tB.LAST_WORKER_ID=0;class Ev{constructor(e,t,n,r){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=r}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class qee{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}}function RRe(i,e,t){return new Wf(new qee(i),new qee(e)).ComputeDiff(t).changes}class ZC{static Assert(e,t){if(!e)throw new Error(t)}}class XC{static Copy(e,t,n,r,o){for(let s=0;s<o;s++)n[r+s]=e[t+s]}static Copy2(e,t,n,r,o){for(let s=0;s<o;s++)n[r+s]=e[t+s]}}class Yee{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ev(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Wf{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[r,o,s]=Wf._getElements(e),[a,u,d]=Wf._getElements(t);this._hasStrings=s&&d,this._originalStringElements=r,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=u,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Wf._isStringArray(t)){const n=new Int32Array(t.length);for(let r=0,o=t.length;r<o;r++)n[r]=KG(t[r],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Wf._getStrictElement(this._originalSequence,e),r=Wf._getStrictElement(this._modifiedSequence,t);return n===r}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,r,o){const s=[!1];let a=this.ComputeDiffRecursive(e,t,n,r,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,r,o){for(o[0]=!1;e<=t&&n<=r&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&r>=n&&this.ElementsAreEqual(t,r);)t--,r--;if(e>t||n>r){let f;return n<=r?(ZC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),f=[new Ev(e,0,n,r-n+1)]):e<=t?(ZC.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),f=[new Ev(e,t-e+1,n,0)]):(ZC.Assert(e===t+1,"originalStart should only be one more than originalEnd"),ZC.Assert(n===r+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}const s=[0],a=[0],u=this.ComputeRecursionPoint(e,t,n,r,s,a,o),d=s[0],h=a[0];if(u!==null)return u;if(!o[0]){const f=this.ComputeDiffRecursive(e,d,n,h,o);let p=[];return o[0]?p=[new Ev(d+1,t-(d+1)+1,h+1,r-(h+1)+1)]:p=this.ComputeDiffRecursive(d+1,t,h+1,r,o),this.ConcatenateChanges(f,p)}return[new Ev(e,t-e+1,n,r-n+1)]}WALKTRACE(e,t,n,r,o,s,a,u,d,h,f,p,m,v,b,L,S,y){let E=null,A=null,N=new Yee,V=t,R=n,M=m[0]-L[0]-r,K=-1073741824,X=this.m_forwardHistory.length-1;do{const $=M+e;$===V||$<R&&d[$-1]<d[$+1]?(f=d[$+1],v=f-M-r,f<K&&N.MarkNextChange(),K=f,N.AddModifiedElement(f+1,v),M=$+1-e):(f=d[$-1]+1,v=f-M-r,f<K&&N.MarkNextChange(),K=f-1,N.AddOriginalElement(f,v+1),M=$-1-e),X>=0&&(d=this.m_forwardHistory[X],e=d[0],V=1,R=d.length-1)}while(--X>=-1);if(E=N.getReverseChanges(),y[0]){let $=m[0]+1,D=L[0]+1;if(E!==null&&E.length>0){const T=E[E.length-1];$=Math.max($,T.getOriginalEnd()),D=Math.max(D,T.getModifiedEnd())}A=[new Ev($,p-$+1,D,b-D+1)]}else{N=new Yee,V=s,R=a,M=m[0]-L[0]-u,K=1073741824,X=S?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const $=M+o;$===V||$<R&&h[$-1]>=h[$+1]?(f=h[$+1]-1,v=f-M-u,f>K&&N.MarkNextChange(),K=f+1,N.AddOriginalElement(f+1,v+1),M=$+1-o):(f=h[$-1],v=f-M-u,f>K&&N.MarkNextChange(),K=f,N.AddModifiedElement(f+1,v+1),M=$-1-o),X>=0&&(h=this.m_reverseHistory[X],o=h[0],V=1,R=h.length-1)}while(--X>=-1);A=N.getChanges()}return this.ConcatenateChanges(E,A)}ComputeRecursionPoint(e,t,n,r,o,s,a){let u=0,d=0,h=0,f=0,p=0,m=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const v=t-e+(r-n),b=v+1,L=new Int32Array(b),S=new Int32Array(b),y=r-n,E=t-e,A=e-n,N=t-r,R=(E-y)%2===0;L[y]=e,S[E]=t,a[0]=!1;for(let M=1;M<=v/2+1;M++){let K=0,X=0;h=this.ClipDiagonalBound(y-M,M,y,b),f=this.ClipDiagonalBound(y+M,M,y,b);for(let D=h;D<=f;D+=2){D===h||D<f&&L[D-1]<L[D+1]?u=L[D+1]:u=L[D-1]+1,d=u-(D-y)-A;const T=u;for(;u<t&&d<r&&this.ElementsAreEqual(u+1,d+1);)u++,d++;if(L[D]=u,u+d>K+X&&(K=u,X=d),!R&&Math.abs(D-E)<=M-1&&u>=S[D])return o[0]=u,s[0]=d,T<=S[D]&&1447>0&&M<=1447+1?this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,o,d,r,s,R,a):null}const $=(K-e+(X-n)-M)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(K,$))return a[0]=!0,o[0]=K,s[0]=X,$>0&&1447>0&&M<=1447+1?this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,o,d,r,s,R,a):(e++,n++,[new Ev(e,t-e+1,n,r-n+1)]);p=this.ClipDiagonalBound(E-M,M,E,b),m=this.ClipDiagonalBound(E+M,M,E,b);for(let D=p;D<=m;D+=2){D===p||D<m&&S[D-1]>=S[D+1]?u=S[D+1]-1:u=S[D-1],d=u-(D-E)-N;const T=u;for(;u>e&&d>n&&this.ElementsAreEqual(u,d);)u--,d--;if(S[D]=u,R&&Math.abs(D-y)<=M&&u<=L[D])return o[0]=u,s[0]=d,T>=L[D]&&1447>0&&M<=1447+1?this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,o,d,r,s,R,a):null}if(M<=1447){let D=new Int32Array(f-h+2);D[0]=y-h+1,XC.Copy2(L,h,D,1,f-h+1),this.m_forwardHistory.push(D),D=new Int32Array(m-p+2),D[0]=E-p+1,XC.Copy2(S,p,D,1,m-p+1),this.m_reverseHistory.push(D)}}return this.WALKTRACE(y,h,f,A,E,p,m,N,L,S,u,t,o,d,r,s,R,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],r=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<r&&n.modifiedStart+n.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let u=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],u)){e[t]=u[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let r=0,o=0;if(t>0){const f=e[t-1];r=f.originalStart+f.originalLength,o=f.modifiedStart+f.modifiedLength}const s=n.originalLength>0,a=n.modifiedLength>0;let u=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let f=1;;f++){const p=n.originalStart-f,m=n.modifiedStart-f;if(p<r||m<o||s&&!this.OriginalElementsAreEqual(p,p+n.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+n.modifiedLength))break;const b=(p===r&&m===o?5:0)+this._boundaryScore(p,n.originalLength,m,n.modifiedLength);b>d&&(d=b,u=f)}n.originalStart-=u,n.modifiedStart-=u;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const r=e[t-1],o=e[t],s=o.originalStart-r.originalStart-r.originalLength,a=r.originalStart,u=o.originalStart+o.originalLength,d=u-a,h=r.modifiedStart,f=o.modifiedStart+o.modifiedLength,p=f-h;if(s<5&&d<20&&p<20){const m=this._findBetterContiguousSequence(a,d,h,p,s);if(m){const[v,b]=m;(v!==r.originalStart+r.originalLength||b!==r.modifiedStart+r.modifiedLength)&&(r.originalLength=v-r.originalStart,r.modifiedLength=b-r.modifiedStart,o.originalStart=v+s,o.modifiedStart=b+s,o.originalLength=u-o.originalStart,o.modifiedLength=f-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,r,o){if(t<o||r<o)return null;const s=e+t-o+1,a=n+r-o+1;let u=0,d=0,h=0;for(let f=e;f<s;f++)for(let p=n;p<a;p++){const m=this._contiguousSequenceScore(f,p,o);m>0&&m>u&&(u=m,d=f,h=p)}return u>0?[d,h]:null}_contiguousSequenceScore(e,t,n){let r=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;r+=this._originalStringElements[e+o].length}return r}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,r){const o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,r)?1:0;return o+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const r=new Array(e.length+t.length-1);return XC.Copy(e,0,r,0,e.length-1),r[e.length-1]=n[0],XC.Copy(t,1,r,e.length,t.length-1),r}else{const r=new Array(e.length+t.length);return XC.Copy(e,0,r,0,e.length),XC.Copy(t,0,r,e.length,t.length),r}}ChangesOverlap(e,t,n){if(ZC.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),ZC.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const r=e.originalStart;let o=e.originalLength;const s=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Ev(r,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,r){if(e>=0&&e<r)return e;const o=n,s=r-n-1,a=t%2===0;if(e<0){const u=o%2===0;return a===u?0:1}else{const u=s%2===0;return a===u?r-1:r-2}}}const PRe=3;function Gde(i,e,t,n){return new Wf(i,e,t).ComputeDiff(n)}class Zee{constructor(e){const t=[],n=[];for(let r=0,o=e.length;r<o;r++)t[r]=l$(e[r],1),n[r]=u$(e[r],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const r=[],o=[],s=[];let a=0;for(let u=t;u<=n;u++){const d=this.lines[u],h=e?this._startColumns[u]:1,f=e?this._endColumns[u]:d.length+1;for(let p=h;p<f;p++)r[a]=d.charCodeAt(p-1),o[a]=u+1,s[a]=p,a++}return new FRe(r,o,s)}}class FRe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}getElements(){return this._charCodes}getStartLineNumber(e){return this._lineNumbers[e]}getStartColumn(e){return this._columns[e]}getEndLineNumber(e){return this._lineNumbers[e]}getEndColumn(e){return this._columns[e]+1}}class nO{constructor(e,t,n,r,o,s,a,u){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=r,this.modifiedStartLineNumber=o,this.modifiedStartColumn=s,this.modifiedEndLineNumber=a,this.modifiedEndColumn=u}static createFromDiffChange(e,t,n){let r,o,s,a,u,d,h,f;return e.originalLength===0?(r=0,o=0,s=0,a=0):(r=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),s=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1)),e.modifiedLength===0?(u=0,d=0,h=0,f=0):(u=n.getStartLineNumber(e.modifiedStart),d=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),f=n.getEndColumn(e.modifiedStart+e.modifiedLength-1)),new nO(r,o,s,a,u,d,h,f)}}function BRe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,r=i.length;n<r;n++){const o=i[n],s=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(s,a)<PRe?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class V2{constructor(e,t,n,r,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=r,this.charChanges=o}static createFromDiffResult(e,t,n,r,o,s,a){let u,d,h,f,p;if(t.originalLength===0?(u=n.getStartLineNumber(t.originalStart)-1,d=0):(u=n.getStartLineNumber(t.originalStart),d=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=r.getStartLineNumber(t.modifiedStart)-1,f=0):(h=r.getStartLineNumber(t.modifiedStart),f=r.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),s&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const m=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),v=r.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);let b=Gde(m,v,o,!0).changes;a&&(b=BRe(b)),p=[];for(let L=0,S=b.length;L<S;L++)p.push(nO.createFromDiffChange(b[L],m,v))}return new V2(u,d,h,f,p)}}class WRe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new Zee(e),this.modified=new Zee(t),this.continueLineDiff=Xee(n.maxComputationTime),this.continueCharDiff=Xee(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}]};const e=Gde(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let u=0,d=t.length;u<d;u++)a.push(V2.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[u],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const r=[];let o=0,s=0;for(let a=-1,u=t.length;a<u;a++){const d=a+1<u?t[a+1]:null,h=d?d.originalStart:this.originalLines.length,f=d?d.modifiedStart:this.modifiedLines.length;for(;o<h&&s<f;){const p=this.originalLines[o],m=this.modifiedLines[s];if(p!==m){{let v=l$(p,1),b=l$(m,1);for(;v>1&&b>1;){const L=p.charCodeAt(v-2),S=m.charCodeAt(b-2);if(L!==S)break;v--,b--}(v>1||b>1)&&this._pushTrimWhitespaceCharChange(r,o+1,1,v,s+1,1,b)}{let v=u$(p,1),b=u$(m,1);const L=p.length+1,S=m.length+1;for(;v<L&&b<S;){const y=p.charCodeAt(v-1),E=p.charCodeAt(b-1);if(y!==E)break;v++,b++}(v<L||b<S)&&this._pushTrimWhitespaceCharChange(r,o+1,v,L,s+1,b,S)}}o++,s++}d&&(r.push(V2.createFromDiffResult(this.shouldIgnoreTrimWhitespace,d,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=d.originalLength,s+=d.modifiedLength)}return{quitEarly:n,changes:r}}_pushTrimWhitespaceCharChange(e,t,n,r,o,s,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,r,o,s,a))return;let u;this.shouldComputeCharChanges&&(u=[new nO(t,n,t,r,o,s,o,a)]),e.push(new V2(t,t,o,o,u))}_mergeTrimWhitespaceCharChange(e,t,n,r,o,s,a){const u=e.length;if(u===0)return!1;const d=e[u-1];return d.originalEndLineNumber===0||d.modifiedEndLineNumber===0?!1:d.originalEndLineNumber+1===t&&d.modifiedEndLineNumber+1===o?(d.originalEndLineNumber=t,d.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&d.charChanges&&d.charChanges.push(new nO(t,n,t,r,o,s,o,a)),!0):!1}}function l$(i,e){const t=ka(i);return t===-1?e:t+1}function u$(i,e){const t=Jf(i);return t===-1?e:t+2}function Xee(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class VRe{constructor(e,t,n,r){this._uri=e,this._lines=t,this._eol=n,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new Le(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let r=0;r<t;r++)n[r]=this._lines[r].length+e;this._lineStarts=new UOe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;let n=sg(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);let r=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.lineNumber+o-1,0,n[o]),r[o-1]=n[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}class HRe{constructor(e,t,n){const r=new Uint8Array(e*t);for(let o=0,s=e*t;o<s;o++)r[o]=n;this._data=r,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class $Re{constructor(e){let t=0,n=0;for(let o=0,s=e.length;o<s;o++){let[a,u,d]=e[o];u>t&&(t=u),a>n&&(n=a),d>n&&(n=d)}t++,n++;let r=new HRe(n,t,0);for(let o=0,s=e.length;o<s;o++){let[a,u,d]=e[o];r.set(a,u,d)}this._states=r,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let p6=null;function zRe(){return p6===null&&(p6=new $Re([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),p6}let ON=null;function URe(){if(ON===null){ON=new $S(0);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)ON.set(i.charCodeAt(t),1);const e=".,;";for(let t=0;t<e.length;t++)ON.set(e.charCodeAt(t),2)}return ON}class I3{static _createLink(e,t,n,r,o){let s=o-1;do{const a=t.charCodeAt(s);if(e.get(a)!==2)break;s--}while(s>r);if(r>0){const a=t.charCodeAt(r-1),u=t.charCodeAt(s);(a===40&&u===41||a===91&&u===93||a===123&&u===125)&&s--}return{range:{startLineNumber:n,startColumn:r+1,endLineNumber:n,endColumn:s+2},url:t.substring(r,s+1)}}static computeLinks(e,t=zRe()){const n=URe();let r=[];for(let o=1,s=e.getLineCount();o<=s;o++){const a=e.getLineContent(o),u=a.length;let d=0,h=0,f=0,p=1,m=!1,v=!1,b=!1,L=!1;for(;d<u;){let S=!1;const y=a.charCodeAt(d);if(p===13){let E;switch(y){case 40:m=!0,E=0;break;case 41:E=m?0:1;break;case 91:b=!0,v=!0,E=0;break;case 93:b=!1,E=v?0:1;break;case 123:L=!0,E=0;break;case 125:E=L?0:1;break;case 39:E=f===34||f===96?0:1;break;case 34:E=f===39||f===96?0:1;break;case 96:E=f===39||f===34?0:1;break;case 42:E=f===42?1:0;break;case 124:E=f===124?1:0;break;case 32:E=b?0:1;break;default:E=n.get(y)}E===1&&(r.push(I3._createLink(n,a,o,h,d)),S=!0)}else if(p===12){let E;y===91?(v=!0,E=0):E=n.get(y),E===1?S=!0:p=13}else p=t.nextState(p,y),p===0&&(S=!0);S&&(p=1,m=!1,v=!1,L=!1,h=d+1,f=y),d++}p===13&&r.push(I3._createLink(n,a,o,h,u))}return r}}function jRe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:I3.computeLinks(i)}class c${constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,r,o){if(e&&t){let s=this.doNavigateValueSet(t,o);if(s)return{range:e,value:s}}if(n&&r){let s=this.doNavigateValueSet(r,o);if(s)return{range:n,value:s}}return null}doNavigateValueSet(e,t){let n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){let n=Math.pow(10,e.length-(e.lastIndexOf(".")+1)),r=Number(e),o=parseFloat(e);return!isNaN(r)&&!isNaN(o)&&r===o?r===0&&!t?null:(r=Math.floor(r*n),r+=t?n:-n,String(r/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let r=null;for(let o=0,s=e.length;r===null&&o<s;o++)r=this.valueSetReplace(e[o],t,n);return r}valueSetReplace(e,t,n){let r=e.indexOf(t);return r>=0?(r+=n?1:-1,r<0?r=e.length-1:r%=e.length,e[r]):null}}c$.INSTANCE=new c$;var d$;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(d$||(d$={}));var h$;(function(i){i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(h$||(h$={}));var f$;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(f$||(f$={}));var g$;(function(i){i[i.Deprecated=1]="Deprecated"})(g$||(g$={}));var p$;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(p$||(p$={}));var m$;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(m$||(m$={}));var _$;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(_$||(_$={}));var v$;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(v$||(v$={}));var b$;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(b$||(b$={}));var C$;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(C$||(C$={}));var w$;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.autoClosingBrackets=5]="autoClosingBrackets",i[i.autoClosingDelete=6]="autoClosingDelete",i[i.autoClosingOvertype=7]="autoClosingOvertype",i[i.autoClosingQuotes=8]="autoClosingQuotes",i[i.autoIndent=9]="autoIndent",i[i.automaticLayout=10]="automaticLayout",i[i.autoSurround=11]="autoSurround",i[i.bracketPairColorization=12]="bracketPairColorization",i[i.guides=13]="guides",i[i.codeLens=14]="codeLens",i[i.codeLensFontFamily=15]="codeLensFontFamily",i[i.codeLensFontSize=16]="codeLensFontSize",i[i.colorDecorators=17]="colorDecorators",i[i.columnSelection=18]="columnSelection",i[i.comments=19]="comments",i[i.contextmenu=20]="contextmenu",i[i.copyWithSyntaxHighlighting=21]="copyWithSyntaxHighlighting",i[i.cursorBlinking=22]="cursorBlinking",i[i.cursorSmoothCaretAnimation=23]="cursorSmoothCaretAnimation",i[i.cursorStyle=24]="cursorStyle",i[i.cursorSurroundingLines=25]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=26]="cursorSurroundingLinesStyle",i[i.cursorWidth=27]="cursorWidth",i[i.disableLayerHinting=28]="disableLayerHinting",i[i.disableMonospaceOptimizations=29]="disableMonospaceOptimizations",i[i.domReadOnly=30]="domReadOnly",i[i.dragAndDrop=31]="dragAndDrop",i[i.emptySelectionClipboard=32]="emptySelectionClipboard",i[i.extraEditorClassName=33]="extraEditorClassName",i[i.fastScrollSensitivity=34]="fastScrollSensitivity",i[i.find=35]="find",i[i.fixedOverflowWidgets=36]="fixedOverflowWidgets",i[i.folding=37]="folding",i[i.foldingStrategy=38]="foldingStrategy",i[i.foldingHighlight=39]="foldingHighlight",i[i.foldingImportsByDefault=40]="foldingImportsByDefault",i[i.unfoldOnClickAfterEndOfLine=41]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=42]="fontFamily",i[i.fontInfo=43]="fontInfo",i[i.fontLigatures=44]="fontLigatures",i[i.fontSize=45]="fontSize",i[i.fontWeight=46]="fontWeight",i[i.formatOnPaste=47]="formatOnPaste",i[i.formatOnType=48]="formatOnType",i[i.glyphMargin=49]="glyphMargin",i[i.gotoLocation=50]="gotoLocation",i[i.hideCursorInOverviewRuler=51]="hideCursorInOverviewRuler",i[i.hover=52]="hover",i[i.inDiffEditor=53]="inDiffEditor",i[i.inlineSuggest=54]="inlineSuggest",i[i.letterSpacing=55]="letterSpacing",i[i.lightbulb=56]="lightbulb",i[i.lineDecorationsWidth=57]="lineDecorationsWidth",i[i.lineHeight=58]="lineHeight",i[i.lineNumbers=59]="lineNumbers",i[i.lineNumbersMinChars=60]="lineNumbersMinChars",i[i.linkedEditing=61]="linkedEditing",i[i.links=62]="links",i[i.matchBrackets=63]="matchBrackets",i[i.minimap=64]="minimap",i[i.mouseStyle=65]="mouseStyle",i[i.mouseWheelScrollSensitivity=66]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=67]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=68]="multiCursorMergeOverlapping",i[i.multiCursorModifier=69]="multiCursorModifier",i[i.multiCursorPaste=70]="multiCursorPaste",i[i.occurrencesHighlight=71]="occurrencesHighlight",i[i.overviewRulerBorder=72]="overviewRulerBorder",i[i.overviewRulerLanes=73]="overviewRulerLanes",i[i.padding=74]="padding",i[i.parameterHints=75]="parameterHints",i[i.peekWidgetDefaultFocus=76]="peekWidgetDefaultFocus",i[i.definitionLinkOpensInPeek=77]="definitionLinkOpensInPeek",i[i.quickSuggestions=78]="quickSuggestions",i[i.quickSuggestionsDelay=79]="quickSuggestionsDelay",i[i.readOnly=80]="readOnly",i[i.renameOnType=81]="renameOnType",i[i.renderControlCharacters=82]="renderControlCharacters",i[i.renderFinalNewline=83]="renderFinalNewline",i[i.renderLineHighlight=84]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=85]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=86]="renderValidationDecorations",i[i.renderWhitespace=87]="renderWhitespace",i[i.revealHorizontalRightPadding=88]="revealHorizontalRightPadding",i[i.roundedSelection=89]="roundedSelection",i[i.rulers=90]="rulers",i[i.scrollbar=91]="scrollbar",i[i.scrollBeyondLastColumn=92]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=93]="scrollBeyondLastLine",i[i.scrollPredominantAxis=94]="scrollPredominantAxis",i[i.selectionClipboard=95]="selectionClipboard",i[i.selectionHighlight=96]="selectionHighlight",i[i.selectOnLineNumbers=97]="selectOnLineNumbers",i[i.showFoldingControls=98]="showFoldingControls",i[i.showUnused=99]="showUnused",i[i.snippetSuggestions=100]="snippetSuggestions",i[i.smartSelect=101]="smartSelect",i[i.smoothScrolling=102]="smoothScrolling",i[i.stickyTabStops=103]="stickyTabStops",i[i.stopRenderingLineAfter=104]="stopRenderingLineAfter",i[i.suggest=105]="suggest",i[i.suggestFontSize=106]="suggestFontSize",i[i.suggestLineHeight=107]="suggestLineHeight",i[i.suggestOnTriggerCharacters=108]="suggestOnTriggerCharacters",i[i.suggestSelection=109]="suggestSelection",i[i.tabCompletion=110]="tabCompletion",i[i.tabIndex=111]="tabIndex",i[i.unicodeHighlighting=112]="unicodeHighlighting",i[i.unusualLineTerminators=113]="unusualLineTerminators",i[i.useShadowDOM=114]="useShadowDOM",i[i.useTabStops=115]="useTabStops",i[i.wordSeparators=116]="wordSeparators",i[i.wordWrap=117]="wordWrap",i[i.wordWrapBreakAfterCharacters=118]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=119]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=120]="wordWrapColumn",i[i.wordWrapOverride1=121]="wordWrapOverride1",i[i.wordWrapOverride2=122]="wordWrapOverride2",i[i.wrappingIndent=123]="wrappingIndent",i[i.wrappingStrategy=124]="wrappingStrategy",i[i.showDeprecated=125]="showDeprecated",i[i.inlayHints=126]="inlayHints",i[i.editorClassName=127]="editorClassName",i[i.pixelRatio=128]="pixelRatio",i[i.tabFocusMode=129]="tabFocusMode",i[i.layoutInfo=130]="layoutInfo",i[i.wrappingInfo=131]="wrappingInfo"})(w$||(w$={}));var y$;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(y$||(y$={}));var S$;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(S$||(S$={}));var L$;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(L$||(L$={}));var E$;(function(i){i[i.Other=0]="Other",i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(E$||(E$={}));var x$;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(x$||(x$={}));var D$;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.NumLock=78]="NumLock",i[i.ScrollLock=79]="ScrollLock",i[i.Semicolon=80]="Semicolon",i[i.Equal=81]="Equal",i[i.Comma=82]="Comma",i[i.Minus=83]="Minus",i[i.Period=84]="Period",i[i.Slash=85]="Slash",i[i.Backquote=86]="Backquote",i[i.BracketLeft=87]="BracketLeft",i[i.Backslash=88]="Backslash",i[i.BracketRight=89]="BracketRight",i[i.Quote=90]="Quote",i[i.OEM_8=91]="OEM_8",i[i.IntlBackslash=92]="IntlBackslash",i[i.Numpad0=93]="Numpad0",i[i.Numpad1=94]="Numpad1",i[i.Numpad2=95]="Numpad2",i[i.Numpad3=96]="Numpad3",i[i.Numpad4=97]="Numpad4",i[i.Numpad5=98]="Numpad5",i[i.Numpad6=99]="Numpad6",i[i.Numpad7=100]="Numpad7",i[i.Numpad8=101]="Numpad8",i[i.Numpad9=102]="Numpad9",i[i.NumpadMultiply=103]="NumpadMultiply",i[i.NumpadAdd=104]="NumpadAdd",i[i.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=106]="NumpadSubtract",i[i.NumpadDecimal=107]="NumpadDecimal",i[i.NumpadDivide=108]="NumpadDivide",i[i.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",i[i.ABNT_C1=110]="ABNT_C1",i[i.ABNT_C2=111]="ABNT_C2",i[i.AudioVolumeMute=112]="AudioVolumeMute",i[i.AudioVolumeUp=113]="AudioVolumeUp",i[i.AudioVolumeDown=114]="AudioVolumeDown",i[i.BrowserSearch=115]="BrowserSearch",i[i.BrowserHome=116]="BrowserHome",i[i.BrowserBack=117]="BrowserBack",i[i.BrowserForward=118]="BrowserForward",i[i.MediaTrackNext=119]="MediaTrackNext",i[i.MediaTrackPrevious=120]="MediaTrackPrevious",i[i.MediaStop=121]="MediaStop",i[i.MediaPlayPause=122]="MediaPlayPause",i[i.LaunchMediaPlayer=123]="LaunchMediaPlayer",i[i.LaunchMail=124]="LaunchMail",i[i.LaunchApp2=125]="LaunchApp2",i[i.MAX_VALUE=126]="MAX_VALUE"})(D$||(D$={}));var I$;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(I$||(I$={}));var k$;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(k$||(k$={}));var T$;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(T$||(T$={}));var N$;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(N$||(N$={}));var A$;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(A$||(A$={}));var O$;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(O$||(O$={}));var M$;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(M$||(M$={}));var R$;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(R$||(R$={}));var P$;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(P$||(P$={}));var F$;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(F$||(F$={}));var B$;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(B$||(B$={}));var W$;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(W$||(W$={}));var V$;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(V$||(V$={}));var H$;(function(i){i[i.Deprecated=1]="Deprecated"})(H$||(H$={}));var $$;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})($$||($$={}));var z$;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(z$||(z$={}));var U$;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(U$||(U$={}));var j$;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(j$||(j$={}));let bM=class{static chord(e,t){return Yr(e,t)}};bM.CtrlCmd=2048;bM.Shift=1024;bM.Alt=512;bM.WinCtrl=256;function qde(){return{editor:void 0,languages:void 0,CancellationTokenSource:oa,Emitter:be,KeyCode:D$,KeyMod:bM,Position:Le,Range:Q,Selection:yt,SelectionDirection:B$,MarkerSeverity:I$,MarkerTag:k$,Uri:sn,Token:W8}}class Dq{static computeUnicodeHighlights(e,t,n){const r=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),s=new Qee(t),a=s.getCandidateCodePoints();let u;a==="allNonBasicAscii"?u=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):u=new RegExp(`${KRe(Array.from(a))}`,"g");const d=new Rw(null,u),h=[];let f=!1,p,m=0,v=0,b=0;e:for(let L=r,S=o;L<=S;L++){const y=e.getLineContent(L),E=y.length;d.reset(0);do if(p=d.next(y),p){let A=p.index,N=p.index+p[0].length;if(A>0){const M=y.charCodeAt(A-1);Vo(M)&&A--}if(N+1<E){const M=y.charCodeAt(N-1);Vo(M)&&N++}const V=y.substring(A,N),R=s.shouldHighlightNonBasicASCII(V);if(R!==0){R===3?m++:R===2?v++:R===1?b++:cue();const M=1e3;if(h.length>=M){f=!0;break e}h.push(new Q(L,A+1,L,N+1))}}while(p)}return{ranges:h,hasMore:f,ambiguousCharacterCount:m,invisibleCharacterCount:v,nonBasicAsciiCharacterCount:b}}static computeUnicodeHighlightReason(e,t){switch(new Qee(t).shouldHighlightNonBasicASCII(e)){case 0:return null;case 2:return{kind:1};case 3:const o=xh.getPrimaryConfusable(e.codePointAt(0));return{kind:0,confusableWith:String.fromCodePoint(o)};case 1:return{kind:2}}}}function KRe(i,e){return`[${hc(i.map(n=>String.fromCodePoint(n)).join(""))}]`}class Qee{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints)}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of vp.codePoints)e.add(t);if(this.options.ambiguousCharacters)for(const t of xh.getPrimaryConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e){const t=e.codePointAt(0);return this.allowedCodePoints.has(t)?0:this.options.nonBasicASCII?1:this.options.invisibleCharacters&&!(e===" "||e===`
`||e==="	")&&vp.isInvisibleCharacter(t)?2:this.options.ambiguousCharacters&&xh.isAmbiguous(t)?3:0}}var t1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class GRe extends VRe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){let n=WF(e.column,BF(t),this._lines[e.lineNumber-1],0);return n?new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let r=0,o="",s=0,a=[];return{*[Symbol.iterator](){for(;;)if(s<a.length){const u=o.substring(a[s].start,a[s].end);s+=1,yield u}else if(r<t.length)o=t[r],a=n(o,e),s=0,r+=1;else break}}}getLineWords(e,t){let n=this._lines[e-1],r=this._wordenize(n,t),o=[];for(const s of r)o.push({word:n.substring(s.start,s.end),startColumn:s.start+1,endColumn:s.end+1});return o}_wordenize(e,t){const n=[];let r;for(t.lastIndex=0;(r=t.exec(e))&&r[0].length!==0;)n.push({start:r.index,end:r.index+r[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);let t=this._eol,n=e.startLineNumber-1,r=e.endLineNumber-1,o=[];o.push(this._lines[n].substring(e.startColumn-1));for(let s=n+1;s<r;s++)o.push(this._lines[s]);return o.push(this._lines[r].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!Le.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,r=!1;if(t<1)t=1,n=1,r=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,r=!0;else{let o=this._lines[t-1].length+1;n<1?(n=1,r=!0):n>o&&(n=o,r=!0)}return r?{lineNumber:t,column:n}:e}}class Pb{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){let e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}acceptNewModel(e){this._models[e.url]=new GRe(sn.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}computeUnicodeHighlights(e,t,n){return t1(this,void 0,void 0,function*(){const r=this._getModel(e);return r?Dq.computeUnicodeHighlights(r,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}})}computeDiff(e,t,n,r){return t1(this,void 0,void 0,function*(){const o=this._getModel(e),s=this._getModel(t);if(!o||!s)return null;const a=o.getLinesContent(),u=s.getLinesContent(),h=new WRe(a,u,{shouldComputeCharChanges:!0,shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:r}).computeDiff(),f=h.changes.length>0?!1:this._modelsAreIdentical(o,s);return{quitEarly:h.quitEarly,identical:f,changes:h.changes}})}_modelsAreIdentical(e,t){const n=e.getLineCount(),r=t.getLineCount();if(n!==r)return!1;for(let o=1;o<=n;o++){const s=e.getLineContent(o),a=t.getLineContent(o);if(s!==a)return!1}return!0}computeMoreMinimalEdits(e,t){return t1(this,void 0,void 0,function*(){const n=this._getModel(e);if(!n)return t;const r=[];let o;t=t.slice(0).sort((s,a)=>{if(s.range&&a.range)return Q.compareRangesUsingStarts(s.range,a.range);let u=s.range?0:1,d=a.range?0:1;return u-d});for(let{range:s,text:a,eol:u}of t){if(typeof u=="number"&&(o=u),Q.isEmpty(s)&&!a)continue;const d=n.getValueInRange(s);if(a=a.replace(/\r\n|\n|\r/g,n.eol),d===a)continue;if(Math.max(a.length,d.length)>Pb._diffLimit){r.push({range:s,text:a});continue}const h=RRe(d,a,!1),f=n.offsetAt(Q.lift(s).getStartPosition());for(const p of h){const m=n.positionAt(f+p.originalStart),v=n.positionAt(f+p.originalStart+p.originalLength),b={text:a.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:v.lineNumber,endColumn:v.column}};n.getValueInRange(b.range)!==b.text&&r.push(b)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r})}computeLinks(e){return t1(this,void 0,void 0,function*(){let t=this._getModel(e);return t?jRe(t):null})}textualSuggest(e,t,n,r){return t1(this,void 0,void 0,function*(){const o=new rg(!0),s=new RegExp(n,r),a=new Set;e:for(let u of e){const d=this._getModel(u);if(d){for(let h of d.words(s))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>Pb._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}})}computeWordRanges(e,t,n,r){return t1(this,void 0,void 0,function*(){let o=this._getModel(e);if(!o)return Object.create(null);const s=new RegExp(n,r),a=Object.create(null);for(let u=t.startLineNumber;u<t.endLineNumber;u++){let d=o.getLineWords(u,s);for(const h of d){if(!isNaN(Number(h.word)))continue;let f=a[h.word];f||(f=[],a[h.word]=f),f.push({startLineNumber:u,startColumn:h.startColumn,endLineNumber:u,endColumn:h.endColumn})}}return a})}navigateValueSet(e,t,n,r,o){return t1(this,void 0,void 0,function*(){let s=this._getModel(e);if(!s)return null;let a=new RegExp(r,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});let u=s.getValueInRange(t),d=s.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!d)return null;let h=s.getValueInRange(d);return c$.INSTANCE.navigateValueSet(t,u,d,h,n)})}loadForeignModule(e,t,n){let s={host:MEe(n,(a,u)=>this._host.fhr(a,u)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve(hG(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}Pb._diffLimit=1e5;Pb._suggestionsLimit=1e4;typeof importScripts=="function"&&(qr.monaco=qde());const Iq=gi("textResourceConfigurationService"),Yde=gi("textResourcePropertiesService");var qRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},m6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},K$=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Jee=60*1e3,ete=5*60*1e3;function L1(i,e){let t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let G$=class extends Oe{constructor(e,t,n){super(),this._modelService=e,this._workerManager=this._register(new ZRe(this._modelService)),this._logService=n,this._register(NA.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(r,o)=>L1(this._modelService,r.uri)?this._workerManager.withWorker().then(s=>s.computeLinks(r.uri)).then(s=>s&&{links:s}):Promise.resolve({links:[]})})),this._register(Oh.register("*",new YRe(this._workerManager,t,this._modelService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return L1(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then(r=>r.computedUnicodeHighlights(e,t,n))}computeDiff(e,t,n,r){return this._workerManager.withWorker().then(o=>o.computeDiff(e,t,n,r))}computeMoreMinimalEdits(e,t){if(vl(t)){if(!L1(this._modelService,e))return Promise.resolve(t);const n=rg.create(!0),r=this._workerManager.withWorker().then(o=>o.computeMoreMinimalEdits(e,t));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),n.elapsed())),Promise.race([r,p0(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return L1(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then(r=>r.navigateValueSet(e,t,n))}canComputeWordRanges(e){return L1(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then(n=>n.computeWordRanges(e,t))}};G$=qRe([m6(0,Io),m6(1,Iq),m6(2,Sg)],G$);class YRe{constructor(e,t,n){this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}provideCompletionItems(e,t){return K$(this,void 0,void 0,function*(){const n=this._configurationService.getValue(e.uri,t,"editor");if(!n.wordBasedSuggestions)return;const r=[];if(n.wordBasedSuggestionsMode==="currentDocument")L1(this._modelService,e.uri)&&r.push(e.uri);else for(const f of this._modelService.getModels())L1(this._modelService,f.uri)&&(f===e?r.unshift(f.uri):(n.wordBasedSuggestionsMode==="allDocuments"||f.getLanguageId()===e.getLanguageId())&&r.push(f.uri));if(r.length===0)return;const o=vi.getWordDefinition(e.getLanguageId()),s=e.getWordAtPosition(t),a=s?new Q(t.lineNumber,s.startColumn,t.lineNumber,s.endColumn):Q.fromPositions(t),u=a.setEndPosition(t.lineNumber,t.column),h=yield(yield this._workerManager.withWorker()).textualSuggest(r,s==null?void 0:s.word,o);if(h)return{duration:h.duration,suggestions:h.words.map(f=>({kind:18,label:f,insertText:f,range:{insert:u,replace:a}}))}})}}let ZRe=class extends Oe{constructor(e){super(),this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new sM).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(ete/2)),this._register(this._modelService.onModelRemoved(n=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>ete&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Zde(this._modelService,!1,"editorWorkerService")),Promise.resolve(this._editorWorkerClient)}};class XRe extends Oe{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){let r=new sM;r.cancelAndSet(()=>this._checkStopModelSync(),Math.round(Jee/2)),this._register(r)}}dispose(){for(let e in this._syncedModels)oi(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){let r=n.toString();this._syncedModels[r]||this._beginModelSync(n,t),this._syncedModels[r]&&(this._syncedModelsLastUsedTime[r]=new Date().getTime())}}_checkStopModelSync(){let e=new Date().getTime(),t=[];for(let n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>Jee&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){let n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;let r=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const o=new Qe;o.add(n.onDidChangeContent(s=>{this._proxy.acceptModelChanged(r.toString(),s)})),o.add(n.onWillDispose(()=>{this._stopModelSync(r)})),o.add(Kn(()=>{this._proxy.acceptRemovedModel(r)})),this._syncedModels[r]=o}_stopModelSync(e){let t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],oi(t)}}class tte{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class _6{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class Zde extends Oe{constructor(e,t,n){super(),this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new tB(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new TRe(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new _6(this)))}catch(e){a$(e),this._worker=new tte(new Pb(new _6(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,e=>(a$(e),this._worker=new tte(new Pb(new _6(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new XRe(e,this._modelService,this._keepIdleModels))),this._modelManager}_withSyncedResources(e,t=!1){return K$(this,void 0,void 0,function*(){return this._disposed?Promise.reject(mC()):this._getProxy().then(n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n))})}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then(r=>r.computeUnicodeHighlights(e.toString(),t,n))}computeDiff(e,t,n,r){return this._withSyncedResources([e,t],!0).then(o=>o.computeDiff(e.toString(),t.toString(),n,r))}computeMoreMinimalEdits(e,t){return this._withSyncedResources([e]).then(n=>n.computeMoreMinimalEdits(e.toString(),t))}computeLinks(e){return this._withSyncedResources([e]).then(t=>t.computeLinks(e.toString()))}textualSuggest(e,t,n){return K$(this,void 0,void 0,function*(){const r=yield this._withSyncedResources(e),o=n.source,s=w9(n);return r.textualSuggest(e.map(a=>a.toString()),t,o,s)})}computeWordRanges(e,t){return this._withSyncedResources([e]).then(n=>{let r=this._modelService.getModel(e);if(!r)return Promise.resolve(null);let o=vi.getWordDefinition(r.getLanguageId()),s=o.source,a=w9(o);return n.computeWordRanges(e.toString(),t,s,a)})}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then(r=>{let o=this._modelService.getModel(e);if(!o)return null;let s=vi.getWordDefinition(o.getLanguageId()),a=s.source,u=w9(s);return r.navigateValueSet(e.toString(),t,n,a,u)})}dispose(){super.dispose(),this._disposed=!0}}const n1=Object.prototype.hasOwnProperty;class QRe{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(S0,0),this._register(jS,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||S0}}class iO extends Oe{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new be),this.onDidChange=this._onDidChange.event,iO.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new QRe,this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(sb.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){iO.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},iAe();const e=sb.getLanguages();this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(r=>{this._lowercaseNameMap[r.toLowerCase()]=n.identifier}),n.mimetypes.forEach(r=>{this._mimeTypesMap[r]=n.identifier})}),Zr.as(wC.Configuration).registerOverrideIdentifiers(sb.getLanguages().map(t=>t.id)),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;n1.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let r=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),r=t.mimetypes[0]),r||(r=`text/x-${n}`,e.mimetypes.push(r)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)BR({id:n,mime:r,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)BR({id:n,mime:r,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)BR({id:n,mime:r,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let u=new RegExp(a);WEe(u)||BR({id:n,mime:r,firstline:u},this._warnOnOverwrite)}catch(u){gn(u)}}e.aliases.push(n);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);let s=o!==null&&o.length>0;if(!(s&&o[0]===null)){let a=(s?o[0]:null)||n;(s||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration)}isRegisteredMode(e){return n1.call(this._mimeTypesMap,e)?!0:n1.call(this._languages,e)}getModeIdForLanguageNameLowercase(e){return n1.call(this._lowercaseNameMap,e)?this._lowercaseNameMap[e]:null}extractModeIds(e){return e?e.split(",").map(t=>t.trim()).map(t=>n1.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:t).filter(t=>n1.call(this._languages,t)):[]}validateLanguageId(e){return!e||e===S0?S0:n1.call(this._languages,e)?e:null}getModeIdsFromFilepathOrFirstLine(e,t){if(!e&&!t)return[];let n=rAe(e,t);return this.extractModeIds(n.join(","))}}iO.instanceCount=0;class nte{constructor(e,t){this._selector=t,this.languageId=this._selector();let n;this._onDidChange=new be({onFirstListenerAdd:()=>{n=e(()=>this._evaluate())},onLastListenerRemove:()=>{n.dispose()}}),this.onDidChange=this._onDidChange.event}_evaluate(){const e=this._selector();e!==this.languageId&&(this.languageId=e,this._onDidChange.fire(this.languageId))}}class rO extends Oe{constructor(e=!1){super(),this._onDidEncounterLanguage=this._register(new be),this.onDidEncounterLanguage=this._onDidEncounterLanguage.event,this._onLanguagesMaybeChanged=this._register(new be({leakWarningThreshold:200})),this.onLanguagesMaybeChanged=this._onLanguagesMaybeChanged.event,rO.instanceCount++,this._encounteredLanguages=new Set,this._registry=this._register(new iO(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onLanguagesMaybeChanged.fire()))}dispose(){rO.instanceCount--,super.dispose()}isRegisteredMode(e){return this._registry.isRegisteredMode(e)}getModeIdForLanguageName(e){return this._registry.getModeIdForLanguageNameLowercase(e)}getModeIdByFilepathOrFirstLine(e,t){const n=this._registry.getModeIdsFromFilepathOrFirstLine(e,t);return wH(n,null)}getModeId(e){const t=this._registry.extractModeIds(e);return wH(t,null)}validateLanguageId(e){return this._registry.validateLanguageId(e)}create(e){return new nte(this.onLanguagesMaybeChanged,()=>{const t=this.getModeId(e);return this._createModeAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new nte(this.onLanguagesMaybeChanged,()=>{const n=this.getModeIdByFilepathOrFirstLine(e,t);return this._createModeAndGetLanguageIdentifier(n)})}_createModeAndGetLanguageIdentifier(e){const t=this.validateLanguageId(e||"plaintext")||S0;return this._getOrCreateMode(t),t}triggerMode(e){const t=this.getModeId(e);this._getOrCreateMode(t||"plaintext")}_getOrCreateMode(e){if(!this._encounteredLanguages.has(e)){this._encounteredLanguages.add(e);const t=this.validateLanguageId(e)||S0;this._onDidEncounterLanguage.fire(t)}}}rO.instanceCount=0;var JRe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},v6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let q$=class{constructor(e,t,n,r){this._legend=e,this._themeService=t,this._modeService=n,this._logService=r,this._hashTable=new np,this._hasWarnedOverlappingTokens=!1}getMetadata(e,t,n){const r=this._modeService.languageIdCodec.encodeLanguageId(n),o=this._hashTable.get(e,t,r);let s;if(o)s=o.metadata,this._logService.getLevel()===Fh.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${e} / ${t}: foreground ${na.getForeground(s)}, fontStyle ${na.getFontStyle(s).toString(2)}`);else{let a=this._legend.tokenTypes[e];const u=[];if(a){let d=t;for(let f=0;d>0&&f<this._legend.tokenModifiers.length;f++)d&1&&u.push(this._legend.tokenModifiers[f]),d=d>>1;d>0&&this._logService.getLevel()===Fh.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${t.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),u.push("not-in-legend"));const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,u,n);if(typeof h>"u")s=2147483647;else{if(s=0,typeof h.italic<"u"){const f=(h.italic?1:0)<<11;s|=f|1}if(typeof h.bold<"u"){const f=(h.bold?2:0)<<11;s|=f|2}if(typeof h.underline<"u"){const f=(h.underline?4:0)<<11;s|=f|4}if(h.foreground){const f=h.foreground<<14;s|=f|8}s===0&&(s=2147483647)}}else this._logService.getLevel()===Fh.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${e} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),s=2147483647,a="not-in-legend";this._hashTable.add(e,t,r,s),this._logService.getLevel()===Fh.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${e} (${a}) / ${t} (${u.join(" ")}): foreground ${na.getForeground(s)}, fontStyle ${na.getFontStyle(s).toString(2)}`)}return s}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,console.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}};q$=JRe([v6(1,Er),v6(2,Fs),v6(3,Sg)],q$);function Xde(i,e,t){const n=i.data,r=i.data.length/5|0,o=Math.max(Math.ceil(r/1024),400),s=[];let a=0,u=1,d=0;for(;a<r;){const h=a;let f=Math.min(h+o,r);if(f<r){let E=f;for(;E-1>h&&n[5*E]===0;)E--;if(E-1===h){let A=f;for(;A+1<r&&n[5*A]===0;)A++;f=A}else f=E}let p=new Uint32Array((f-h)*4),m=0,v=0,b=0,L=0,S=0;for(;a<f;){const E=5*a,A=n[E],N=n[E+1],V=u+A|0,R=A===0?d+N|0:N,M=n[E+2],K=n[E+3],X=n[E+4],$=e.getMetadata(K,X,t);$!==2147483647&&(v===0&&(v=V),b===V&&S>R&&(e.warnOverlappingSemanticTokens(V,R+1),L<R?p[m-4+2]=R:m-=4),p[m]=V-v,p[m+1]=R,p[m+2]=R+M,p[m+3]=$,m+=4,b=V,L=R,S=R+M),u=V,d=R,a++}m!==p.length&&(p=p.subarray(0,m));const y=new e3(v,new JF(p));s.push(y)}return s}class ePe{constructor(e,t,n,r){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=r,this.next=null}}class np{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=np._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<np._SIZES.length?2/3*this._currentLength:0),this._elements=[],np._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const r=this._hashFunc(e,t,n);let o=this._elements[r];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===n)return o;o=o.next}return null}add(e,t,n,r){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=np._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<np._SIZES.length?2/3*this._currentLength:0),this._elements=[],np._nullOutEntries(this._elements,this._currentLength);for(const s of o){let a=s;for(;a;){const u=a.next;a.next=null,this._add(a),a=u}}}this._add(new ePe(e,t,n,r))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}np._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];function tPe(i){for(let e=0,t=i.length;e<t;e+=4){const n=i[e+0],r=i[e+1],o=i[e+2],s=i[e+3];i[e+0]=s,i[e+1]=o,i[e+2]=r,i[e+3]=n}}function nPe(i){const e=new Uint8Array(i.buffer,i.byteOffset,i.length*4);return Ole()||tPe(e),A8.wrap(e)}function Qde(i){const e=new Uint32Array(iPe(i));let t=0;if(e[t++]=i.id,i.type==="full")e[t++]=1,e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length;else{e[t++]=2,e[t++]=i.deltas.length;for(const n of i.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return nPe(e)}function iPe(i){let e=0;if(e+=1+1,i.type==="full")e+=1+i.data.length;else{e+=1,e+=(1+1+1)*i.deltas.length;for(const t of i.deltas)t.data&&(e+=t.data.length)}return e}var x0=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function nB(i){return i&&!!i.data}function Jde(i){return i&&Array.isArray(i.edits)}class rPe{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function ehe(i){return Gy.has(i)}function oPe(i){const e=Gy.orderedGroups(i);return e.length>0?e[0]:[]}function the(i,e,t,n){return x0(this,void 0,void 0,function*(){const r=oPe(i),o=yield Promise.all(r.map(s=>x0(this,void 0,void 0,function*(){let a,u=null;try{a=yield s.provideDocumentSemanticTokens(i,s===e?t:null,n)}catch(d){u=d,a=null}return(!a||!nB(a)&&!Jde(a))&&(a=null),new rPe(s,a,u)})));for(const s of o){if(s.error)throw s.error;if(s.tokens)return s}return o.length>0?o[0]:null})}function sPe(i){const e=Gy.orderedGroups(i);return e.length>0?e[0]:null}class aPe{constructor(e,t){this.provider=e,this.tokens=t}}function lPe(i){return B8.has(i)}function nhe(i){const e=B8.orderedGroups(i);return e.length>0?e[0]:[]}function kq(i,e,t){return x0(this,void 0,void 0,function*(){const n=nhe(i),r=yield Promise.all(n.map(o=>x0(this,void 0,void 0,function*(){let s;try{s=yield o.provideDocumentRangeSemanticTokens(i,e,t)}catch(a){Rs(a),s=null}return(!s||!nB(s))&&(s=null),new aPe(o,s)})));for(const o of r)if(o.tokens)return o;return r.length>0?r[0]:null})}Qn.registerCommand("_provideDocumentSemanticTokensLegend",(i,...e)=>x0(void 0,void 0,void 0,function*(){const[t]=e;Gi(t instanceof sn);const n=i.get(Io).getModel(t);if(!n)return;const r=sPe(n);return r?r[0].getLegend():i.get(kr).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)}));Qn.registerCommand("_provideDocumentSemanticTokens",(i,...e)=>x0(void 0,void 0,void 0,function*(){const[t]=e;Gi(t instanceof sn);const n=i.get(Io).getModel(t);if(!n)return;if(!ehe(n))return i.get(kr).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const r=yield the(n,null,null,Vn.None);if(!r)return;const{provider:o,tokens:s}=r;if(!s||!nB(s))return;const a=Qde({id:0,type:"full",data:s.data});return s.resultId&&o.releaseDocumentSemanticTokens(s.resultId),a}));Qn.registerCommand("_provideDocumentRangeSemanticTokensLegend",(i,...e)=>x0(void 0,void 0,void 0,function*(){const[t,n]=e;Gi(t instanceof sn);const r=i.get(Io).getModel(t);if(!r)return;const o=nhe(r);if(o.length===0)return;if(o.length===1)return o[0].getLegend();if(!n||!Q.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),o[0].getLegend();const s=yield kq(r,Q.lift(n),Vn.None);if(s)return s.provider.getLegend()}));Qn.registerCommand("_provideDocumentRangeSemanticTokens",(i,...e)=>x0(void 0,void 0,void 0,function*(){const[t,n]=e;Gi(t instanceof sn),Gi(Q.isIRange(n));const r=i.get(Io).getModel(t);if(!r)return;const o=yield kq(r,Q.lift(n),Vn.None);if(!(!o||!o.tokens))return Qde({id:0,type:"full",data:o.tokens.data})}));var uPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},i1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function vv(i){return i.toString()}function ite(i){const e=new P8,t=i.createSnapshot();let n;for(;n=t.read();)e.update(n);return e.digest()}class cPe{constructor(e,t,n){this._modelEventListeners=new Qe,this.model=e,this._languageSelection=null,this._languageSelectionListener=null,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(r=>n(e,r)))}_disposeLanguageSelection(){this._languageSelectionListener&&(this._languageSelectionListener.dispose(),this._languageSelectionListener=null)}dispose(){this._modelEventListeners.dispose(),this._disposeLanguageSelection()}setLanguage(e){this._disposeLanguageSelection(),this._languageSelection=e,this._languageSelectionListener=this._languageSelection.onDidChange(()=>this.model.setMode(e.languageId)),this.model.setMode(e.languageId)}}const dPe=Xa||qn?1:2;class hPe{constructor(e,t,n,r,o,s,a,u){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=r,this.heapSize=o,this.sha1=s,this.versionId=a,this.alternativeVersionId=u}}let k3=class r2 extends Oe{constructor(e,t,n,r,o,s,a){super(),this._configurationService=e,this._resourcePropertiesService=t,this._themeService=n,this._logService=r,this._undoRedoService=o,this._modeService=s,this._languageConfigurationService=a,this._onModelAdded=this._register(new be),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new be),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new be),this.onModelModeChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._semanticStyling=this._register(new gPe(this._themeService,this._modeService,this._logService)),this._register(this._configurationService.onDidChangeConfiguration(()=>this._updateModelOptions())),this._updateModelOptions(),this._register(new fPe(this,this._themeService,this._configurationService,this._semanticStyling))}static _readModelOptions(e,t){var n;let r=Qs.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const m=parseInt(e.editor.tabSize,10);isNaN(m)||(r=m),r<1&&(r=1)}let o=r;if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const m=parseInt(e.editor.indentSize,10);isNaN(m)||(o=m),o<1&&(o=1)}let s=Qs.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(s=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let a=dPe;const u=e.eol;u===`\r
`?a=2:u===`
`&&(a=1);let d=Qs.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(d=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let h=Qs.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(h=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let f=Qs.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(f=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let p=Qs.bracketPairColorizationOptions;return!((n=e.editor)===null||n===void 0)&&n.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(p={enabled:!!e.editor.bracketPairColorization.enabled}),{isForSimpleWidget:t,tabSize:r,indentSize:o,insertSpaces:s,detectIndentation:h,defaultEOL:a,trimAutoWhitespace:d,largeFileOptimizations:f,bracketPairColorizationOptions:p}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:qu===3||qu===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){let r=this._modelCreationOptionsByLanguageAndResource[e+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:t}),s=this._getEOL(t,e);r=r2._readModelOptions({editor:o,eol:s},n),this._modelCreationOptionsByLanguageAndResource[e+t]=r}return r}_updateModelOptions(){const e=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const o=t[n],s=this._models[o],a=s.model.getLanguageId(),u=s.model.uri,d=e[a+u],h=this.getCreationOptions(a,u,s.model.isForSimpleWidget);r2._setModelOptionsForModel(s.model,h,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&ed(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(vv(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(vv(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(vv(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,r)=>n.time-r.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,r){const o=this.getCreationOptions(t,n,r),s=new Ll(e,o,t,n,this._undoRedoService,this._modeService,this._languageConfigurationService);if(n&&this._disposedModels.has(vv(n))){const d=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),f=ite(s)===d.sha1;if(f||d.sharesUndoRedoStack){for(const p of h.past)Jg(p)&&p.matchesResource(n)&&p.setModel(s);for(const p of h.future)Jg(p)&&p.matchesResource(n)&&p.setModel(s);this._undoRedoService.setElementsValidFlag(n,!0,p=>Jg(p)&&p.matchesResource(n)),f&&(s._overwriteVersionId(d.versionId),s._overwriteAlternativeVersionId(d.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(d.initialUndoRedoSnapshot))}else d.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(d.initialUndoRedoSnapshot)}const a=vv(s.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const u=new cPe(s,d=>this._onWillDispose(d),(d,h)=>this._onDidChangeLanguage(d,h));return this._models[a]=u,u}createModel(e,t,n,r=!1){let o;return t?(o=this._createModelData(e,t.languageId,n,r),this.setMode(o.model,t)):o=this._createModelData(e,jS,n,r),this._onModelAdded.fire(o.model),o.model}setMode(e,t){if(!t)return;const n=this._models[vv(e.uri)];n&&n.setLanguage(t)}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push(this._models[o].model)}return e}getModel(e){const t=vv(e),n=this._models[t];return n?n.model:null}getSemanticTokensProviderStyling(e){return this._semanticStyling.get(e)}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===kn.file||e.scheme===kn.vscodeRemote||e.scheme===kn.userData||e.scheme===kn.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=vv(e.uri),n=this._models[t],r=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,s=0;if(r||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const u=this._undoRedoService.getElements(e.uri);if(u.past.length>0||u.future.length>0){for(const d of u.past)Jg(d)&&d.matchesResource(e.uri)&&(o=!0,s+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of u.future)Jg(d)&&d.matchesResource(e.uri)&&(o=!0,s+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=r2.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK;if(o)if(!r&&s>a){const u=n.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}else this._ensureDisposedModelsHeapSize(a-s),this._undoRedoService.setElementsValidFlag(e.uri,!1,u=>Jg(u)&&u.matchesResource(e.uri)),this._insertDisposedModel(new hPe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),r,s,ite(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!r){const u=n.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,r=e.getLanguageId(),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),s=this.getCreationOptions(r,e.uri,e.isForSimpleWidget);r2._setModelOptionsForModel(e,s,o),this._onModelModeChanged.fire({model:e,oldModeId:n})}};k3.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024;k3=uPe([i1(0,nr),i1(1,Yde),i1(2,Er),i1(3,Sg),i1(4,gM),i1(5,Fs),i1(6,fM)],k3);const Tq="editor.semanticHighlighting";function Y$(i,e,t){var n;const r=(n=t.getValue(Tq,{overrideIdentifier:i.getLanguageId(),resource:i.uri}))===null||n===void 0?void 0:n.enabled;return typeof r=="boolean"?r:e.getColorTheme().semanticHighlighting}class fPe extends Oe{constructor(e,t,n,r){super(),this._watchers=Object.create(null),this._semanticStyling=r;const o=u=>{this._watchers[u.uri.toString()]=new H1(u,t,this._semanticStyling)},s=(u,d)=>{d.dispose(),delete this._watchers[u.uri.toString()]},a=()=>{for(let u of e.getModels()){const d=this._watchers[u.uri.toString()];Y$(u,t,n)?d||o(u):d&&s(u,d)}};this._register(e.onModelAdded(u=>{Y$(u,t,n)&&o(u)})),this._register(e.onModelRemoved(u=>{const d=this._watchers[u.uri.toString()];d&&s(u,d)})),this._register(n.onDidChangeConfiguration(u=>{u.affectsConfiguration(Tq)&&a()})),this._register(t.onDidColorThemeChange(a))}}class gPe extends Oe{constructor(e,t,n){super(),this._themeService=e,this._modeService=t,this._logService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}get(e){return this._caches.has(e)||this._caches.set(e,new q$(e.getLegend(),this._themeService,this._modeService,this._logService)),this._caches.get(e)}}class pPe{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}class H1 extends Oe{constructor(e,t,n){super(),this._isDisposed=!1,this._model=e,this._semanticStyling=n,this._fetchDocumentSemanticTokens=this._register(new er(()=>this._fetchDocumentSemanticTokensNow(),H1.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule()})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{oi(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const o of Gy.all(e))typeof o.onDidChange=="function"&&this._documentProvidersChangeListeners.push(o.onDidChange(()=>this._fetchDocumentSemanticTokens.schedule(0)))};r(),this._register(Gy.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule()})),this._register(t.onDidColorThemeChange(o=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule()})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!ehe(this._model)){this._currentDocumentResponse&&this._model.setSemanticTokens(null,!1);return}const e=new oa,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,r=the(this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e;const o=[],s=this._model.onDidChangeContent(a=>{o.push(a)});r.then(a=>{if(this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),!a)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:u,tokens:d}=a,h=this._semanticStyling.get(u);this._setDocumentSemanticTokens(u,d||null,h,o)}},a=>{a&&(wg(a)||typeof a.message=="string"&&a.message.indexOf("busy")!==-1)||gn(a),this._currentDocumentRequestCancellationTokenSource=null,s.dispose(),o.length>0&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule())})}static _copy(e,t,n,r,o){for(let s=0;s<o;s++)n[r+s]=e[t+s]}_setDocumentSemanticTokens(e,t,n,r){const o=this._currentDocumentResponse,s=()=>{r.length>0&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule()};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.setSemanticTokens(null,!1);return}if(!t){this._model.setSemanticTokens(null,!0),s();return}if(Jde(t)){if(!o){this._model.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const p of t.edits)a+=(p.data?p.data.length:0)-p.deleteCount;const u=o.data,d=new Uint32Array(u.length+a);let h=u.length,f=d.length;for(let p=t.edits.length-1;p>=0;p--){const m=t.edits[p],v=h-(m.start+m.deleteCount);v>0&&(H1._copy(u,h-v,d,f-v,v),f-=v),m.data&&(H1._copy(m.data,0,d,f-m.data.length,m.data.length),f-=m.data.length),h=m.start}h>0&&H1._copy(u,0,d,0,h),t={resultId:t.resultId,data:d}}}if(nB(t)){this._currentDocumentResponse=new pPe(e,t.resultId,t.data);const a=Xde(t,n,this._model.getLanguageId());if(r.length>0)for(const u of r)for(const d of a)for(const h of u.changes)d.applyEdit(h.range,h.text);this._model.setSemanticTokens(a,!0)}else this._model.setSemanticTokens(null,!0);s()}}H1.FETCH_DOCUMENT_SEMANTIC_TOKENS_DELAY=300;class mPe{constructor(e,t,n,r,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=r,this.background=o}}function _Pe(i){if(!i||!Array.isArray(i))return[];let e=[],t=0;for(let n=0,r=i.length;n<r;n++){let o=i[n],s=-1;if(typeof o.fontStyle=="string"){s=0;let d=o.fontStyle.split(" ");for(let h=0,f=d.length;h<f;h++)switch(d[h]){case"italic":s=s|1;break;case"bold":s=s|2;break;case"underline":s=s|4;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let u=null;typeof o.background=="string"&&(u=o.background),e[t++]=new mPe(o.token||"",n,s,a,u)}return e}function vPe(i,e){i.sort((h,f)=>{let p=SPe(h.token,f.token);return p!==0?p:h.index-f.index});let t=0,n="000000",r="ffffff";for(;i.length>=1&&i[0].token==="";){let h=i.shift();h.fontStyle!==-1&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(r=h.background)}let o=new CPe;for(let h of e)o.getId(h);let s=o.getId(n),a=o.getId(r),u=new Nq(t,s,a),d=new Aq(u);for(let h=0,f=i.length;h<f;h++){let p=i[h];d.insert(p.token,p.fontStyle,o.getId(p.foreground),o.getId(p.background))}return new ihe(o,d)}const bPe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class CPe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(bPe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=ye.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class ihe{constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(_Pe(e),t)}static createFromParsedTokenTheme(e,t){return vPe(e,t)}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){let r=this._match(t),o=yPe(t);n=(r.metadata|o<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const wPe=/\b(comment|string|regex|regexp)\b/;function yPe(i){let e=i.match(wPe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"regexp":return 4}throw new Error("Unexpected match for standard token type!")}function SPe(i,e){return i<e?-1:i>e?1:0}class Nq{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}clone(){return new Nq(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<14|this._background<<23)>>>0}}class Aq{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;let t=e.indexOf("."),n,r;t===-1?(n=e,r=""):(n=e.substring(0,t),r=e.substring(t+1));let o=this._children.get(n);return typeof o<"u"?o.match(r):this._mainRule}insert(e,t,n,r){if(e===""){this._mainRule.acceptOverwrite(t,n,r);return}let o=e.indexOf("."),s,a;o===-1?(s=e,a=""):(s=e.substring(0,o),a=e.substring(o+1));let u=this._children.get(s);typeof u>"u"&&(u=new Aq(this._mainRule.clone()),this._children.set(s,u)),u.insert(a,t,n,r)}}function LPe(i){let e=[];for(let t=1,n=i.length;t<n;t++){let r=i[t];e[t]=`.mtk${t} { color: ${r}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.join(`
`)}const EPe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[sc]:"#FFFFFE",[uM]:"#000000",[OG]:"#E5EBF1",[z8]:"#D3D3D3",[U8]:"#939393",[MG]:"#ADD6FF4D"}},xPe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[sc]:"#1E1E1E",[uM]:"#D4D4D4",[OG]:"#3A3D41",[z8]:"#404040",[U8]:"#707070",[MG]:"#ADD6FF26"}},DPe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[sc]:"#000000",[uM]:"#FFFFFF",[z8]:"#FFFFFF",[U8]:"#FFFFFF"}};function IPe(){const i=new be,e=AMe();return e.onDidChange(()=>i.fire()),{onDidChange:i.event,getCSS(){const t={},n=o=>{let s=o.defaults;for(;pr.isThemeIcon(s);){const u=e.getIcon(s.id);if(!u)return;s=u.defaults}const a=s.fontId;if(a){const u=e.getIconFont(a);if(u)return t[a]=u,`.codicon-${o.id}:before { content: '${s.fontCharacter}'; font-family: ${XQ(a)}; }`}return`.codicon-${o.id}:before { content: '${s.fontCharacter}'; }`},r=[];for(let o of e.getIcons()){const s=n(o);s&&r.push(s)}for(let o in t){const a=t[o].definition.src.map(u=>`${yb(u.location)} format('${u.format}')`).join(", ");r.push(`@font-face { src: ${a}; font-family: ${XQ(o)}; font-display: block; }`)}return r.join(`
`)}}}const $1="vs",T3="vs-dark",wy="hc-black",rhe=Zr.as(que.ColorContribution),kPe=Zr.as(Cue.ThemingContribution);class ohe{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;let n=t.base;e.length>0?(d4(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(let t in this.themeData.colors)e.set(t,ye.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){let t=Z$(this.themeData.base);for(let n in t.colors)e.has(n)||e.set(n,ye.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=rhe.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return Object.prototype.hasOwnProperty.call(this.getColors(),e)}get type(){switch(this.base){case $1:return Jc.LIGHT;case wy:return Jc.HIGH_CONTRAST;default:return Jc.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){let o=Z$(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],r=this.themeData.colors["editor.background"];if(n||r){const o={token:""};n&&(o.foreground=n),r&&(o.background=r),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=ihe.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=na.getForeground(o),a=na.getFontStyle(o);return{foreground:s,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4)}}}function d4(i){return i===$1||i===T3||i===wy}function Z$(i){switch(i){case $1:return EPe;case T3:return xPe;case wy:return DPe}}function b6(i){let e=Z$(i);return new ohe(i,e)}class TPe extends Oe{constructor(){super(),this._onColorThemeChange=this._register(new be),this.onDidColorThemeChange=this._onColorThemeChange.event,this._environment=Object.create(null),this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set($1,b6($1)),this._knownThemes.set(T3,b6(T3)),this._knownThemes.set(wy,b6(wy));const e=IPe();this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme($1),e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}),SEe("(forced-colors: active)",()=>{this._updateActualTheme()})}registerEditorContainer(e){return d8(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=cc(),this._globalStyleElement.className="monaco-colors",this._globalStyleElement.textContent=this._allCSS,this._styleElements.push(this._globalStyleElement)),Oe.None}_registerShadowDomContainer(e){const t=cc(e);return t.className="monaco-colors",t.textContent=this._allCSS,this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!d4(t.base)&&!d4(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new ohe(e,t)),d4(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get($1),this._desiredTheme=t,this._updateActualTheme()}_updateActualTheme(){const e=this._autoDetectHighContrast&&window.matchMedia("(forced-colors: active)").matches?this._knownThemes.get(wy):this._desiredTheme;this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._updateActualTheme()}_updateThemeOrColorMap(){let e=[],t={},n={addRule:s=>{t[s]||(e.push(s),t[s]=!0)}};kPe.getThemingParticipants().forEach(s=>s(this._theme,n,this._environment));const r=[];for(const s of rhe.getColors()){const a=this._theme.getColor(s.id,!0);a&&r.push(`${Gue(s.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor { ${r.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(LPe(o)),this._themeCSS=e.join(`
`),this._updateCSS(),Wr.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}}var NPe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},APe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const H2="data-keybinding-context";let Oq=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};class Jy extends Oq{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}Jy.INSTANCE=new Jy;class oO extends Oq{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=py.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===6){const o=Array.from(Jn.map(this._values,([s])=>s));this._values.clear(),n.fire(new ote(o))}else{const o=[];for(const s of r.affectedKeys){const a=`config.${s}`,u=this._values.findSuperstr(a);u!==void 0&&(o.push(...Jn.map(u,([d])=>d)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}n.fire(new ote(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(oO._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(oO._keyPrefix.length),n=this._configurationService.getValue(t);let r;switch(typeof n){case"number":case"boolean":case"string":r=n;break;default:Array.isArray(n)?r=JSON.stringify(n):r=n}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}oO._keyPrefix="config.";class OPe{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class rte{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}}class ote{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}}class MPe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}}class she{constructor(e){this._onDidChangeContext=new bF({merge:t=>new MPe(t)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new OPe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new RPe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return Cy.contextMatchesRules(t,e)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new rte(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new rte(e))}getContext(e){return this._isDisposed?Jy.INSTANCE:this.getContextValuesContainer(PPe(e))}}let X$=class extends she{constructor(e){super(0),this._contexts=new Map,this._toDispose=new Qe,this._lastContextId=0;const t=new oO(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?Jy.INSTANCE:this._contexts.get(e)||Jy.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new Oq(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};X$=NPe([APe(0,nr)],X$);class RPe extends she{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=new Aa,this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(H2)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(H2,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(H2),this._isDisposed=!0)}getContextValuesContainer(e){return this._isDisposed?Jy.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function PPe(i){for(;i;){if(i.hasAttribute(H2)){const e=i.getAttribute(H2);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}Qn.registerCommand(txe,function(i,e,t){i.get(dn).createKey(String(e),t)});Qn.registerCommand({id:"getContextKeyInfo",handler(){return[...Dt.all()].sort((i,e)=>i.key.localeCompare(e.key))},description:{description:C("getContextKeyInfo","A command that returns information about context keys"),args:[]}});Qn.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(let t of Dt.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});function ste(i){let e=i.definition;for(;e instanceof _e;)e=e.definition;return`.codicon-${i.id}:before { content: '${e.fontCharacter}'; }`}var Vs;(function(i){function e(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,s.start),u=Math.min(o.end,s.end);return u-a<=0?{start:0,end:0}:{start:a,end:u}}i.intersect=e;function t(o){return o.end-o.start<=0}i.isEmpty=t;function n(o,s){return!t(e(o,s))}i.intersects=n;function r(o,s){const a=[],u={start:o.start,end:Math.min(s.start,o.end)},d={start:Math.max(s.end,o.start),end:o.end};return t(u)||a.push(u),t(d)||a.push(d),a}i.relativeComplement=r})(Vs||(Vs={}));var $v;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})($v||($v={}));function Vw(i,e,t){const n=t.mode===$v.ALIGN?t.offset:t.offset+t.size,r=t.mode===$v.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=r?r-e:Math.max(i-e,0):e<=r?r-e:e<=i-n?n:0}class eS extends Oe{constructor(e,t){super(),this.container=null,this.delegate=null,this.toDisposeOnClean=Oe.None,this.toDisposeOnSetContainer=Oe.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Ge(".context-view"),this.useFixedPosition=!1,this.useShadowDOM=!1,za(this.view),this.setContainer(e,t),this._register(Kn(()=>this.setContainer(null,1)))}setContainer(e,t){var n;if(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(n=this.shadowRootHostElement)===null||n===void 0||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e){if(this.container=e,this.useFixedPosition=t!==1,this.useShadowDOM=t===3,this.useShadowDOM){this.shadowRootHostElement=Ge(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=FPe,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Ge("slot"))}else this.container.appendChild(this.view);const r=new Qe;eS.BUBBLE_UP_EVENTS.forEach(o=>{r.add(ts(this.container,o,s=>{this.onDOMEvent(s,!1)}))}),eS.BUBBLE_DOWN_EVENTS.forEach(o=>{r.add(ts(this.container,o,s=>{this.onDOMEvent(s,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){this.isVisible()&&this.hide(),$o(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2500",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Eu(this.view),this.toDisposeOnClean=e.render(this.view)||Oe.None,this.delegate=e,this.doLayout(),this.delegate.focus&&this.delegate.focus()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ig&&u8.pointerEvents)){this.hide();return}this.delegate.layout&&this.delegate.layout(),this.doLayout()}}doLayout(){if(!this.isVisible())return;let e=this.delegate.getAnchor(),t;if(rue(e)){let f=Us(e);t={top:f.top,left:f.left,width:f.width,height:f.height}}else t={top:e.y,left:e.x,width:e.width||1,height:e.height||2};const n=Oc(this.view),r=gH(this.view),o=this.delegate.anchorPosition||0,s=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let u,d;if(a===0){const f={offset:t.top-window.pageYOffset,size:t.height,position:o===0?0:1},p={offset:t.left,size:t.width,position:s===0?0:1,mode:$v.ALIGN};u=Vw(window.innerHeight,r,f)+window.pageYOffset,Vs.intersects({start:u,end:u+r},{start:f.offset,end:f.offset+f.size})&&(p.mode=$v.AVOID),d=Vw(window.innerWidth,n,p)}else{const f={offset:t.left,size:t.width,position:s===0?0:1},p={offset:t.top,size:t.height,position:o===0?0:1,mode:$v.ALIGN};d=Vw(window.innerWidth,n,f),Vs.intersects({start:d,end:d+n},{start:f.offset,end:f.offset+f.size})&&(p.mode=$v.AVOID),u=Vw(window.innerHeight,r,p)+window.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(s===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Us(this.container);this.view.style.top=`${u-(this.useFixedPosition?Us(this.view).top:h.top)}px`,this.view.style.left=`${d-(this.useFixedPosition?Us(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),za(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,document.activeElement):t&&!_p(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}eS.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"];eS.BUBBLE_DOWN_EVENTS=["click"];let FPe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	@font-face {
		font-family: "codicon";
		font-display: block;
		src: url("./codicon.ttf?5d4d76ab2ce5108968ad644d591a16a6") format("truetype");
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;function Mq(...i){return function(e,t){for(let n=0,r=i.length;n<r;n++){const o=i[n](e,t);if(o)return o}return null}}const iB=BPe.bind(void 0,!0);function BPe(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=mG(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function ahe(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function WPe(i,e){return Q$(i.toLowerCase(),e.toLowerCase(),0,0)}function Q$(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let r=null;return(r=Q$(i,e,t+1,n+1))?Fq({start:n,end:n+1},r):null}return Q$(i,e,t,n+1)}function Rq(i){return 97<=i&&i<=122}function rB(i){return 65<=i&&i<=90}function Pq(i){return 48<=i&&i<=57}function lhe(i){return i===32||i===9||i===10||i===13}const uhe=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>uhe.add(i.charCodeAt(0)));function N3(i){return lhe(i)||uhe.has(i)}function VPe(i,e){return i===e||N3(i)&&N3(e)}function che(i){return Rq(i)||rB(i)||Pq(i)}function Fq(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function dhe(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(rB(n)||Pq(n)||t>0&&!che(i.charCodeAt(t-1)))return t}return i.length}function J$(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let r=null,o=n+1;for(r=J$(i,e,t+1,n+1);!r&&(o=dhe(e,o))<e.length;)r=J$(i,e,t+1,o),o++;return r===null?null:Fq({start:n,end:n+1},r)}}function HPe(i){let e=0,t=0,n=0,r=0,o=0;for(let h=0;h<i.length;h++)o=i.charCodeAt(h),rB(o)&&e++,Rq(o)&&t++,che(o)&&n++,Pq(o)&&r++;const s=e/i.length,a=t/i.length,u=n/i.length,d=r/i.length;return{upperPercent:s,lowerPercent:a,alphaPercent:u,numericPercent:d}}function $Pe(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function zPe(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:r}=i;return t>.2&&e<.8&&n>.6&&r<.2}function UPe(i){let e=0,t=0,n=0,r=0;for(let o=0;o<i.length;o++)n=i.charCodeAt(o),rB(n)&&e++,Rq(n)&&t++,lhe(n)&&r++;return(e===0||t===0)&&r===0?i.length<=30:e<=5}function hhe(i,e){if(!e||(e=e.trim(),e.length===0)||!UPe(i)||e.length>60)return null;const t=HPe(e);if(!zPe(t)){if(!$Pe(t))return null;e=e.toLowerCase()}let n=null,r=0;for(i=i.toLowerCase();r<e.length&&(n=J$(i,e,0,r))===null;)r=dhe(e,r+1);return n}function jPe(i,e,t=!1){if(!e||e.length===0)return null;let n=null,r=0;for(i=i.toLowerCase(),e=e.toLowerCase();r<e.length&&(n=ez(i,e,0,r,t))===null;)r=fhe(e,r+1);return n}function ez(i,e,t,n,r){if(t===i.length)return[];if(n===e.length)return null;if(VPe(i.charCodeAt(t),e.charCodeAt(n))){let o=null,s=n+1;if(o=ez(i,e,t+1,n+1,r),!r)for(;!o&&(s=fhe(e,s))<e.length;)o=ez(i,e,t+1,s,r),s++;return o===null?null:Fq({start:n,end:n+1},o)}else return null}function fhe(i,e){for(let t=e;t<i.length;t++)if(N3(i.charCodeAt(t))||t>0&&N3(i.charCodeAt(t-1)))return t;return i.length}const KPe=Mq(iB,hhe,ahe),GPe=Mq(iB,hhe,WPe),ate=new $0(1e4);function lte(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=ate.get(i);n||(n=new RegExp(FEe(i),"i"),ate.set(i,n));const r=n.exec(e);return r?[{start:r.index,end:r.index+r[0].length}]:t?GPe(i,e):KPe(i,e)}function qPe(i,e,t,n,r,o){const s=Math.min(13,i.length);for(;t<s;t++){const a=tS(i,e,t,n,r,o,!1);if(a)return a}return[0,o]}function oB(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const r=i[n]+t,o=e[e.length-1];o&&o.end===r?o.end=r+1:e.push({start:r,end:r+1})}return e}const zv=128;function Bq(){const i=[],e=[];for(let t=0;t<=zv;t++)e[t]=0;for(let t=0;t<=zv;t++)i.push(e.slice(0));return i}function ghe(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const phe=ghe(2*zv),tz=ghe(2*zv),Wg=Bq(),r1=Bq(),qR=Bq();function YR(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 40:case 91:return!0;case void 0:return!1;default:return!!AF(t)}}function ute(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function h4(i,e,t){return e[i]!==t[i]}function YPe(i,e,t,n,r,o,s=!1){for(;e<t&&r<o;)i[e]===n[r]&&(s&&(phe[e]=r),e+=1),r+=1;return e===t}var Zh;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(Zh||(Zh={}));function tS(i,e,t,n,r,o,s){const a=i.length>zv?zv:i.length,u=n.length>zv?zv:n.length;if(t>=a||o>=u||a-t>u-o||!YPe(e,t,a,r,o,u,!0))return;ZPe(a,u,t,o,e,r);let d=1,h=1,f=t,p=o;const m=[!1];for(d=1,f=t;f<a;d++,f++){const y=phe[f],E=tz[f],A=f+1<a?tz[f+1]:u;for(h=y-o+1,p=y;p<A;h++,p++){let N=Number.MIN_SAFE_INTEGER,V=!1;p<=E&&(N=XPe(i,e,f,t,n,r,p,u,o,Wg[d-1][h-1]===0,m));let R=0;N!==Number.MAX_SAFE_INTEGER&&(V=!0,R=N+r1[d-1][h-1]);const M=p>y,K=M?r1[d][h-1]+(Wg[d][h-1]>0?-5:0):0,X=p>y+1&&Wg[d][h-1]>0,$=X?r1[d][h-2]+(Wg[d][h-2]>0?-5:0):0;if(X&&(!M||$>=K)&&(!V||$>=R))r1[d][h]=$,qR[d][h]=3,Wg[d][h]=0;else if(M&&(!V||K>=R))r1[d][h]=K,qR[d][h]=2,Wg[d][h]=0;else if(V)r1[d][h]=R,qR[d][h]=1,Wg[d][h]=Wg[d-1][h-1]+1;else throw new Error("not possible")}}if(!m[0]&&!s)return;d--,h--;const v=[r1[d][h],o];let b=0,L=0;for(;d>=1;){let y=h;do{const E=qR[d][y];if(E===3)y=y-2;else if(E===2)y=y-1;else break}while(y>=1);b>1&&e[t+d-1]===r[o+h-1]&&!h4(y+o-1,n,r)&&b+1>Wg[d][y]&&(y=h),y===h?b++:b=1,L||(L=y),d--,h=y-1,v.push(h)}u===a&&(v[0]+=2);const S=L-a;return v[0]-=S,v}function ZPe(i,e,t,n,r,o){let s=i-1,a=e-1;for(;s>=t&&a>=n;)r[s]===o[a]&&(tz[s]=a,s--),a--}function XPe(i,e,t,n,r,o,s,a,u,d,h){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let f=1,p=!1;return s===t-n?f=i[t]===r[s]?7:5:h4(s,r,o)&&(s===0||!h4(s-1,r,o))?(f=i[t]===r[s]?7:5,p=!0):YR(o,s)&&(s===0||!YR(o,s-1))?f=5:(YR(o,s-1)||ute(o,s-1))&&(f=5,p=!0),f>1&&t===n&&(h[0]=!0),p||(p=h4(s,r,o)||YR(o,s-1)||ute(o,s-1)),t===n?s>u&&(f-=p?3:5):d?f+=p?2:0:f+=p?0:1,s+1===a&&(f-=p?3:5),f}function QPe(i,e,t,n,r,o,s){return JPe(i,e,t,n,r,o,!0,s)}function JPe(i,e,t,n,r,o,s,a){let u=tS(i,e,t,n,r,o,a);if(u&&!s)return u;if(i.length>=3){const d=Math.min(7,i.length-1);for(let h=t+1;h<d;h++){const f=e4e(i,h);if(f){const p=tS(f,f.toLowerCase(),t,n,r,o,a);p&&(p[0]-=3,(!u||p[0]>u[0])&&(u=p))}}}return u}function e4e(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const $2="$(",Wq=new RegExp(`\\$\\(${ja.iconNameExpression}(?:${ja.iconModifierExpression})?\\)`,"g"),t4e=new RegExp(ja.iconNameCharacter),n4e=new RegExp(`(\\\\)?${Wq.source}`,"g");function i4e(i){return i.replace(n4e,(e,t)=>t?e:`\\${e}`)}const r4e=new RegExp(`\\\\${Wq.source}`,"g");function o4e(i){return i.replace(r4e,e=>`\\${e}`)}const s4e=new RegExp(`(\\s)?(\\\\)?${Wq.source}(\\s)?`,"g");function Vq(i){return i.indexOf($2)===-1?i:i.replace(s4e,(e,t,n,r)=>n?e:t||r||"")}function ZR(i){const e=i.indexOf($2);return e===-1?{text:i}:a4e(i,e)}function a4e(i,e){const t=[];let n="";function r(p){if(p){n+=p;for(const m of p)t.push(a)}}let o=-1,s="",a=0,u,d,h=e;const f=i.length;for(r(i.substr(0,e));h<f;){if(u=i[h],d=i[h+1],u===$2[0]&&d===$2[1])o=h,r(s),s=$2,h++;else if(u===")"&&o!==-1){const p=h-o+1;a+=p,o=-1,s=""}else o!==-1?t4e.test(u)?s+=u:(r(s),o=-1,s=""):r(u);h++}return r(s),{text:n,iconOffsets:t}}function XR(i,e,t=!1){const{text:n,iconOffsets:r}=e;if(!r||r.length===0)return lte(i,n,t);const o=gG(n," "),s=n.length-o.length,a=lte(i,o,t);if(a)for(const u of a){const d=r[u.start+s]+s;u.start+=d,u.end+=d}return a}const nz=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,C6=/(&amp;)?(&amp;)([^\s&])/g;var A3;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(A3||(A3={}));let mhe=class f4 extends cg{constructor(e,t,n={}){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:a=>this.doGetActionViewItem(a,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...qn||Xa?[10]:[]],keyDown:!0}}),this.menuElement=r,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new Qe),this._register(Hi.addTarget(r)),qe(r,Ht.KEY_DOWN,a=>{new yr(a).equals(2)&&a.preventDefault()}),n.enableMnemonics&&this.menuDisposables.add(qe(r,Ht.KEY_DOWN,a=>{const u=a.key.toLocaleLowerCase();if(this.mnemonics.has(u)){Ni.stop(a,!0);const d=this.mnemonics.get(u);if(d.length===1&&(d[0]instanceof cte&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(a)),d.length>1){const h=d.shift();h&&h.container&&(this.focusItemByElement(h.container),d.push(h)),this.mnemonics.set(u,d)}}})),Xa&&this._register(qe(r,Ht.KEY_DOWN,a=>{const u=new yr(a);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Ni.stop(a,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Ni.stop(a,!0))})),this._register(qe(this.domNode,Ht.MOUSE_OUT,a=>{let u=a.relatedTarget;_p(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),a.stopPropagation())})),this._register(qe(this.actionsList,Ht.MOUSE_OVER,a=>{let u=a.target;if(!(!u||!_p(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}})),this._register(Hi.addTarget(this.actionsList)),this._register(qe(this.actionsList,lr.Tap,a=>{let u=a.initialTarget;if(!(!u||!_p(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}}));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new pM(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const s=this.scrollableElement.getDomNode();s.style.position="",this._register(qe(r,lr.Change,a=>{Ni.stop(a,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-a.translationY})})),this._register(qe(s,Ht.MOUSE_UP,a=>{a.preventDefault()})),r.style.maxHeight=`${Math.max(10,window.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter(a=>{var u;return!((u=n.submenuIds)===null||u===void 0)&&u.has(a.id)?(console.warn(`Found submenu cycle: ${a.id}`),!1):!0}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(a=>!(a instanceof w6)).forEach((a,u,d)=>{a.updatePositionInSet(u+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(d8(e)?this.styleSheet=cc(e):(f4.globalStyleSheet||(f4.globalStyleSheet=cc()),this.styleSheet=f4.globalStyleSheet)),this.styleSheet.textContent=u4e(t)}style(e){const t=this.getContainer();this.initializeOrUpdateStyleSheet(t,e);const n=e.foregroundColor?`${e.foregroundColor}`:"",r=e.backgroundColor?`${e.backgroundColor}`:"",o=e.borderColor?`1px solid ${e.borderColor}`:"",s=e.shadowColor?`0 2px 4px ${e.shadowColor}`:"";t.style.border=o,this.domNode.style.color=n,this.domNode.style.backgroundColor=r,t.style.boxShadow=s,this.viewItems&&this.viewItems.forEach(a=>{(a instanceof iz||a instanceof w6)&&a.style(e)})}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){let n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Qc)return new w6(t.context,e,{icon:!0});if(e instanceof h8){const r=new cte(e,e.actions,n,Object.assign(Object.assign({},t),{submenuIds:new Set([...t.submenuIds||[],e.id])}));if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let s=[];this.mnemonics.has(o)&&(s=this.mnemonics.get(o)),s.push(r),this.mnemonics.set(o,s)}}return r}else{const r={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const s=t.getKeyBinding(e);if(s){const a=s.getLabel();a&&(r.keybinding=a)}}const o=new iz(t.context,e,r);if(t.enableMnemonics){const s=o.getMnemonic();if(s&&o.isEnabled()){let a=[];this.mnemonics.has(s)&&(a=this.mnemonics.get(s)),a.push(o),this.mnemonics.set(s,a)}}return o}}};class iz extends Nf{constructor(e,t,n={}){if(n.isMenu=!0,super(t,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){let r=this.getAction().label;if(r){let o=nz.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new er(()=>{this.element&&(this._register(qe(this.element,Ht.MOUSE_UP,r=>{if(Ni.stop(r,!0),yl){if(new Ju(r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(qe(this.element,Ht.CONTEXT_MENU,r=>{Ni.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Be(this.element,Ge("a.action-menu-item")),this._action.id===Qc.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Be(this.item,Ge("span.menu-item-check"+_e.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=Be(this.item,Ge("span.action-label")),this.options.label&&this.options.keybinding&&(Be(this.item,Ge("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){$o(this.label);let e=Vq(this.getAction().label);if(e){const t=l4e(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=nz.exec(e);if(n){e=fG(e),C6.lastIndex=0;let r=C6.exec(e);for(;r&&r[1];)r=C6.exec(e);const o=s=>s.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(gG(o(e.substr(0,r.index))," "),Ge("u",{"aria-hidden":"true"},r[3]),hue(o(e.substr(r.index+r[0].length))," ")):this.label.innerText=o(e).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){let e=null;this.getAction().tooltip?e=this.getAction().tooltip:!this.options.label&&this.getAction().label&&this.options.icon&&(e=this.getAction().label,this.options.keybinding&&(e=C({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e&&this.item&&(this.item.title=e)}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.getAction().checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=e&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=t?t.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=t?t.toString():""),this.container&&(this.container.style.border=r)}style(e){this.menuStyle=e,this.applyStyle()}}class cte extends iz{constructor(e,t,n,r){super(e,e,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=r,this.mysubmenu=null,this.submenuDisposables=this._register(new Qe),this.mouseOver=!1,this.expandDirection=r&&r.expandDirection!==void 0?r.expandDirection:A3.Right,this.showScheduler=new er(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new er(()=>{this.element&&!_p(ry(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Be(this.item,Ge("span.submenu-indicator"+_e.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(qe(this.element,Ht.KEY_UP,t=>{let n=new yr(t);(n.equals(17)||n.equals(3))&&(Ni.stop(t,!0),this.createSubmenu(!0))})),this._register(qe(this.element,Ht.KEY_DOWN,t=>{let n=new yr(t);ry()===this.item&&(n.equals(17)||n.equals(3))&&Ni.stop(t,!0)})),this._register(qe(this.element,Ht.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(qe(this.element,Ht.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(qe(this.element,Ht.FOCUS_OUT,t=>{this.element&&!_p(ry(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)})))}updateEnabled(){}onClick(e){Ni.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,r){const o={top:0,left:0};return o.left=Vw(e.width,t.width,{position:r===A3.Right?0:1,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=Vw(e.height,t.height,{position:0,offset:n.top,size:0}),o.top+t.height===n.top&&o.top+n.height+t.height<=e.height&&(o.top+=n.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Be(this.element,Ge("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new mhe(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new f8],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const r=this.element.getBoundingClientRect(),o={top:r.top-n,left:r.left,height:r.height+2*n,width:r.width},s=this.submenuContainer.getBoundingClientRect(),{top:a,left:u}=this.calculateSubmenuMenuLayout(new cr(window.innerWidth,window.innerHeight),cr.lift(s),o,this.expandDirection);this.submenuContainer.style.left=`${u-s.left}px`,this.submenuContainer.style.top=`${a-s.top}px`,this.submenuDisposables.add(qe(this.submenuContainer,Ht.KEY_UP,d=>{new yr(d).equals(15)&&(Ni.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(qe(this.submenuContainer,Ht.KEY_DOWN,d=>{new yr(d).equals(15)&&Ni.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)===null||t===void 0||t.setAttribute("aria-expanded",e))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t?`${t}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class w6 extends ZA{style(e){this.label&&(this.label.style.borderBottomColor=e.separatorColor?`${e.separatorColor}`:"")}}function l4e(i){const e=nz,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function u4e(i){let e=`
.monaco-menu {
	font-size: 13px;

}

${ste(_e.menuSelection)}
${ste(_e.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar.animated .action-item.active {
	transform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.4;
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	padding: 0.5em 0 0 0;
	margin-bottom: 0.5em;
	width: 100%;
	height: 0px !important;
	margin-left: .8em !important;
	margin-right: .8em !important;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	border: thin solid transparent; /* prevents jumping behaviour on hover or focus */
}


/* High Contrast Theming */
:host-context(.hc-black) .context-view.monaco-menu-container {
	box-shadow: none;
}

:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: .5em 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 1.8em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	padding: 0.2em 0 0 0;
	margin-bottom: 0.2em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
`;const t=i.scrollbarShadow;t&&(e+=`
			.monaco-scrollable-element > .shadow.top {
				box-shadow: ${t} 0 6px 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.left {
				box-shadow: ${t} 6px 0 6px -6px inset;
			}

			.monaco-scrollable-element > .shadow.top.left {
				box-shadow: ${t} 6px 6px 6px -6px inset;
			}
		`);const n=i.scrollbarSliderBackground;n&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider {
				background: ${n};
			}
		`);const r=i.scrollbarSliderHoverBackground;r&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider:hover {
				background: ${r};
			}
		`);const o=i.scrollbarSliderActiveBackground;return o&&(e+=`
			.monaco-scrollable-element > .scrollbar > .slider.active {
				background: ${o};
			}
		`),e}function Ih(i,e){const t=Object.create(null);for(let n in e){const r=e[n];r&&(t[n]=jg(r,i))}return t}function Hq(i,e,t){function n(){const r=Ih(i.getColorTheme(),e);typeof t=="function"?t(r):t.style(r)}return n(),i.onDidColorThemeChange(n)}function c4e(i,e,t){return Hq(e,{badgeBackground:(t==null?void 0:t.badgeBackground)||x2,badgeForeground:(t==null?void 0:t.badgeForeground)||D2,badgeBorder:ho},i)}function Fb(i,e,t){return Hq(e,Object.assign(Object.assign({},sB),t||{}),i)}const sB={listFocusBackground:_Ie,listFocusForeground:vIe,listFocusOutline:bIe,listActiveSelectionBackground:Q1,listActiveSelectionForeground:s0,listActiveSelectionIconForeground:JP,listFocusAndSelectionBackground:Q1,listFocusAndSelectionForeground:s0,listInactiveSelectionBackground:CIe,listInactiveSelectionIconForeground:yIe,listInactiveSelectionForeground:wIe,listInactiveFocusBackground:SIe,listInactiveFocusOutline:LIe,listHoverBackground:EIe,listHoverForeground:xIe,listDropBackground:DIe,listSelectionOutline:Ja,listHoverOutline:Ja,listFilterWidgetBackground:IIe,listFilterWidgetOutline:kIe,listFilterWidgetNoMatchesOutline:TIe,listMatchesShadow:C0,treeIndentGuidesStroke:NIe,tableColumnsBorder:AIe,tableOddRowsBackgroundColor:OIe},d4e={shadowColor:C0,borderColor:PIe,foregroundColor:FIe,backgroundColor:BIe,selectionForegroundColor:WIe,selectionBackgroundColor:VIe,selectionBorderColor:HIe,separatorColor:$Ie,scrollbarShadow:HS,scrollbarSliderBackground:cy,scrollbarSliderHoverBackground:dy,scrollbarSliderActiveBackground:hy};function h4e(i,e,t){return Hq(e,Object.assign(Object.assign({},d4e),t),i)}class f4e{constructor(e,t,n,r,o){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=r,this.themeService=o,this.focusToReturn=null,this.block=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=document.activeElement;let n,r=rue(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{let s=e.getMenuClassName?e.getMenuClassName():"";s&&(o.className+=" "+s),this.options.blockMouse&&(this.block=o.appendChild(Ge(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",qe(this.block,Ht.MOUSE_DOWN,d=>d.stopPropagation()));const a=new Qe,u=e.actionRunner||new Hy;return u.onBeforeRun(this.onActionRun,this,a),u.onDidRun(this.onDidActionRun,this,a),n=new mhe(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:u,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)}),a.add(h4e(n,this.themeService)),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a),a.add(qe(window,Ht.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(qe(window,Ht.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;let h=new Ju(d),f=h.target;if(!h.rightButton){for(;f;){if(f===o)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),t0(a,n)},focus:()=>{n&&n.focus(!!e.autoSelectFirstItem)},onHide:o=>{e.onHide&&e.onHide(!!o),this.block&&(this.block.remove(),this.block=null),this.focusToReturn&&this.focusToReturn.focus()}},r,!!r)}onActionRun(e){this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1),this.focusToReturn&&this.focusToReturn.focus()}onDidActionRun(e){e.error&&!wg(e.error)&&this.notificationService.error(e.error)}}var g4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},MN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let rz=class extends Oe{constructor(e,t,n,r,o){super(),this._onDidShowContextMenu=new be,this._onDidHideContextMenu=new be,this.contextMenuHandler=new f4e(n,e,t,r,o)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({},e),{onHide:t=>{e.onHide&&e.onHide(t),this._onDidHideContextMenu.fire()}})),P1.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};rz=g4e([MN(0,yg),MN(1,fo),MN(2,$p),MN(3,Sr),MN(4,Er)],rz);const CM=gi("layoutService");var p4e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},m4e=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let oz=class extends Oe{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=Oe.None,this.container=e.container,this.contextView=this._register(new eS(this.container,1)),this.layout(),this._register(e.onDidLayout(()=>this.layout()))}setContainer(e,t){this.contextView.setContainer(e,t||1)}showContextView(e,t,n){t?t!==this.container&&(this.container=t,this.setContainer(t,n?3:2)):this.container!==this.layoutService.container&&(this.container=this.layoutService.container,this.setContainer(this.container,1)),this.contextView.show(e);const r=Kn(()=>{this.currentViewDisposable===r&&this.hideContextView()});return this.currentViewDisposable=r,r}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}};oz=p4e([m4e(0,CM)],oz);const wM=gi("dialogService");let _4e=class{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}};class v4e{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);n.outgoing.set(this._hashFn(t),r),r.incoming.set(this._hashFn(e),n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(let n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new _4e(e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[t,n]of this._nodes)e.push(`${t}, (incoming)[${[...n.incoming.keys()].join(", ")}], (outgoing)[${[...n.outgoing.keys()].join(",")}]`);return e.join(`
`)}findCycleSlow(){for(let[e,t]of this._nodes){const n=new Set([e]),r=this._findCycle(t,n);if(r)return r}}_findCycle(e,t){for(let[n,r]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const o=this._findCycle(r,t);if(o)return o;t.delete(n)}}}class dte extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=(t=e.findCycleSlow())!==null&&t!==void 0?t:`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class O3{constructor(e=new KA,t=!1,n){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=n,this._services.set(An,this)}createChild(e){return new O3(e,this._strict,this)}invokeFunction(e,...t){let n=zc.traceInvocation(e),r=!1;try{return e({get:s=>{if(r)throw pLe("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(s,n);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...t)}finally{r=!0,n.stop()}}createInstance(e,...t){let n,r;return e instanceof kv?(n=zc.traceCreation(e.ctor),r=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=zc.traceCreation(e),r=this._createInstance(e,t,n)),n.stop(),r}_createInstance(e,t=[],n){let r=Ph.getServiceDependencies(e).sort((a,u)=>a.index-u.index),o=[];for(const a of r){let u=this._getOrCreateServiceInstance(a.id,n);if(!u&&this._strict&&!a.optional)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`);o.push(u)}let s=r.length>0?r[0].index:t.length;if(t.length!==s){console.warn(`[createInstance] First service dependency of ${e.name} at position ${s+1} conflicts with ${t.length} static arguments`);let a=s-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,s)}return new e(...t,...o)}_setServiceInstance(e,t){if(this._services.get(e)instanceof kv)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let n=this._getServiceInstanceOrDescriptor(e);return n instanceof kv?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const r=new v4e(a=>a.id.toString());let o=0;const s=[{id:e,desc:t,_trace:n}];for(;s.length;){const a=s.pop();if(r.lookupOrInsertNode(a),o++>1e3)throw new dte(r);for(let u of Ph.getServiceDependencies(a.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(!d&&!u.optional&&console.warn(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`),d instanceof kv){const h={id:u.id,desc:d,_trace:a._trace.branch(u.id,!0)};r.insertEdge(a,h),s.push(h)}}}for(;;){const a=r.roots();if(a.length===0){if(!r.isEmpty())throw new dte(r);break}for(const{data:u}of a){if(this._getServiceInstanceOrDescriptor(u.id)instanceof kv){const h=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setServiceInstance(u.id,h)}r.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],r,o){if(this._services.get(e)instanceof kv)return this._createServiceInstance(t,n,r,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,r,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t=[],n,r){if(n){const o=new ny(()=>this._createInstance(e,t,r));return new Proxy(Object.create(null),{get(s,a){if(a in s)return s[a];let u=o.value,d=u[a];return typeof d!="function"||(d=d.bind(u),s[a]=d),d},set(s,a,u){return o.value[a]=u,!0}})}else return this._createInstance(e,t,r)}}class zc{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return zc._None}static traceCreation(e){return zc._None}branch(e,t){let n=new zc(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;zc._totals+=e;let t=!1;function n(o,s){let a=[],u=new Array(o+1).join("	");for(const[d,h,f]of s._dep)if(h&&f){t=!0,a.push(`${u}CREATES -> ${d}`);let p=n(o+1,f);p&&a.push(p)}else a.push(`${u}uses -> ${d}`);return a.join(`
`)}let r=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${zc._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(r.join(`
`))}}zc._None=new class extends zc{constructor(){super(-1,null)}stop(){}branch(){return this}};zc._totals=0;const yM=gi("labelService");class b4e{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(r=>r.splice(e,t,n))}}class o1 extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function hte(i,e){const t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const r=Vs.intersect(i,n.range);Vs.isEmpty(r)||t.push({range:r,size:n.size})}return t}function sz({start:i,end:e},t){return{start:i+t,end:e+t}}function C4e(i){const e=[];let t=null;for(let n of i){const r=n.range.start,o=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:r,end:o},size:s},e.push(t)}return e}function w4e(...i){return C4e(i.reduce((e,t)=>e.concat(t),[]))}class fte{constructor(){this.groups=[],this._size=0}splice(e,t,n=[]){const r=n.length-t,o=hte({start:0,end:e},this.groups),s=hte({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(u=>({range:sz(u.range,r),size:u.size})),a=n.map((u,d)=>({range:{start:e+d,end:e+d+1},size:u.size}));this.groups=w4e(o,a,s),this._size=this.groups.reduce((u,d)=>u+d.size*(d.range.end-d.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){const o=r.range.end-r.range.start,s=n+o*r.size;if(e<s)return t+Math.floor((e-n)/r.size);t+=o,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let r of this.groups){const o=r.range.end-r.range.start,s=n+o;if(e<s)return t+(e-n)*r.size;t+=o*r.size,n=s}return-1}}function y4e(i){try{i.parentElement&&i.parentElement.removeChild(i)}catch{}}class S4e{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const n=Ge(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(n);t={domNode:n,templateId:e,templateData:o}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(t.classList.remove("scrolling"),y4e(t)),this.getTemplateCache(n).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var xC=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o};const pf={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class SM{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class L4e{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class E4e{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function x4e(i,e){return Array.isArray(i)&&Array.isArray(e)?oc(i,e):i===e}class D4e{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,r)=>r,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class uf{constructor(e,t,n,r=pf){if(this.virtualDelegate=t,this.domId=`list_id_${++uf.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Ap(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Oe.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Oe.None,this.onDragLeaveTimeout=Oe.None,this.disposables=new Qe,this._onDidChangeContentHeight=new be,this._horizontalScrolling=!1,r.horizontalScrolling&&r.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new fte;for(const s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new S4e(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof r.mouseSupport=="boolean"?r.mouseSupport:!0),this._horizontalScrolling=gf(r,s=>s.horizontalScrolling,pf.horizontalScrolling),this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=typeof r.additionalScrollHeight>"u"?0:r.additionalScrollHeight,this.accessibilityProvider=new D4e(r.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",gf(r,s=>s.transformOptimization,pf.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(Hi.addTarget(this.rowsContainer)),this.scrollable=new q8(gf(r,s=>s.smoothScrolling,!1)?125:0,s=>og(s)),this.scrollableElement=this.disposables.add(new uq(this.rowsContainer,{alwaysConsumeMouseWheel:gf(r,s=>s.alwaysConsumeMouseWheel,pf.alwaysConsumeMouseWheel),horizontal:1,vertical:gf(r,s=>s.verticalScrollMode,pf.verticalScrollMode),useShadows:gf(r,s=>s.useShadows,pf.useShadows),mouseWheelScrollSensitivity:r.mouseWheelScrollSensitivity,fastScrollSensitivity:r.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(qe(this.rowsContainer,lr.Change,s=>this.onTouchChange(s))),this.disposables.add(qe(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(qe(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(qe(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(qe(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(qe(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=gf(r,s=>s.setRowLineHeight,pf.setRowLineHeight),this.setRowHeight=gf(r,s=>s.setRowHeight,pf.setRowHeight),this.supportDynamicHeights=gf(r,s=>s.supportDynamicHeights,pf.supportDynamicHeights),this.dnd=gf(r,s=>s.dnd,pf.dnd),this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:b9(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.additionalScrollHeight!==void 0&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling),e.mouseWheelScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=Vs.intersect(r,o),a=new Map;for(let V=s.start;V<s.end;V++){const R=this.items[V];if(R.dragStartDisposable.dispose(),R.row){let M=a.get(R.templateId);M||(M=[],a.set(R.templateId,M));const K=this.renderers.get(R.templateId);K&&K.disposeElement&&K.disposeElement(R.element,V,R.row.templateData,R.size),M.push(R.row)}R.row=null}const u={start:e+t,end:this.items.length},d=Vs.intersect(u,r),h=Vs.relativeComplement(u,r),f=n.map(V=>({id:String(this.itemId++),element:V,templateId:this.virtualDelegate.getTemplateId(V),size:this.virtualDelegate.getHeight(V),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(V),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Oe.None}));let p;e===0&&t>=this.items.length?(this.rangeMap=new fte,this.rangeMap.splice(0,0,f),p=this.items,this.items=f):(this.rangeMap.splice(e,t,f),p=this.items.splice(e,t,...f));const m=n.length-t,v=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=sz(d,m),L=Vs.intersect(v,b);for(let V=L.start;V<L.end;V++)this.updateItemInDOM(this.items[V],V);const S=Vs.relativeComplement(b,v);for(const V of S)for(let R=V.start;R<V.end;R++)this.removeItemFromDOM(R);const y=h.map(V=>sz(V,m)),A=[{start:e,end:e+n.length},...y].map(V=>Vs.intersect(v,V)),N=this.getNextToLastElement(A);for(const V of A)for(let R=V.start;R<V.end;R++){const M=this.items[R],K=a.get(M.templateId),X=K==null?void 0:K.pop();this.insertItemInDOM(R,N,X)}for(const V of a.values())for(const R of V)this.cache.release(R);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),p.map(V=>V.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=og(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:pEe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:b9(this.domNode)})}render(e,t,n,r,o,s=!1){const a=this.getRenderRange(t,n),u=Vs.relativeComplement(a,e),d=Vs.relativeComplement(e,a),h=this.getNextToLastElement(u);if(s){const f=Vs.intersect(e,a);for(let p=f.start;p<f.end;p++)this.updateItemInDOM(this.items[p],p)}for(const f of u)for(let p=f.start;p<f.end;p++)this.insertItemInDOM(p,h);for(const f of d)for(let p=f.start;p<f.end;p++)this.removeItemFromDOM(p);r!==void 0&&(this.rowsContainer.style.left=`-${r}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const r=this.items[e];r.row||(r.row=n??this.cache.alloc(r.templateId));const o=this.accessibilityProvider.getRole(r.element)||"listitem";r.row.domNode.setAttribute("role",o);const s=this.accessibilityProvider.isChecked(r.element);typeof s<"u"&&r.row.domNode.setAttribute("aria-checked",String(!!s)),r.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(r.row.domNode,t):this.rowsContainer.appendChild(r.row.domNode)),this.updateItemInDOM(r,e);const a=this.renderers.get(r.templateId);if(!a)throw new Error(`No renderer found for template id ${r.templateId}`);a&&a.renderElement(r.element,e,r.row.templateData,r.size);const u=this.dnd.getDragURI(r.element);r.dragStartDisposable.dispose(),r.row.domNode.draggable=!!u,u&&(r.dragStartDisposable=qe(r.row.domNode,"dragstart",d=>this.onDragStart(r.element,u,d))),this.horizontalScrolling&&(this.measureItemWidth(r),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=yl?"-moz-fit-content":"fit-content",e.width=b9(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return Rt.map(this.disposables.add(new Ui(this.domNode,"click")).event,e=>this.toMouseEvent(e))}get onMouseDblClick(){return Rt.map(this.disposables.add(new Ui(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e))}get onMouseMiddleClick(){return Rt.filter(Rt.map(this.disposables.add(new Ui(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e)),e=>e.browserEvent.button===1)}get onMouseDown(){return Rt.map(this.disposables.add(new Ui(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e))}get onContextMenu(){return Rt.any(Rt.map(this.disposables.add(new Ui(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e)),Rt.map(this.disposables.add(new Ui(this.domNode,lr.Contextmenu)).event,e=>this.toGestureEvent(e)))}get onTouchStart(){return Rt.map(this.disposables.add(new Ui(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e))}get onTap(){return Rt.map(this.disposables.add(new Ui(this.rowsContainer,lr.Tap)).event,e=>this.toGestureEvent(e))}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],r=n&&n.element;return{browserEvent:e,index:t,element:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(xde.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(r,n)),typeof o>"u"&&(o=String(r.length));const s=Ge(".monaco-drag-image");s.textContent=o,document.body.appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>document.body.removeChild(s),0)}this.currentDragData=new SM(r),Gg.CurrentDragAndDropData=new L4e(r),this.dnd.onDragStart&&this.dnd.onDragStart(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Gg.CurrentDragAndDropData&&Gg.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Gg.CurrentDragAndDropData)this.currentDragData=Gg.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new E4e}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect===0?"copy":"move";let n;if(typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Eb(n).filter(r=>r>=-1&&r<this.length).sort((r,o)=>r-o),n=n[0]===-1?[-1]:n,x4e(this.currentDragFeedback,n))return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=Kn(()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")});else{for(const r of n){const o=this.items[r];o.dropTarget=!0,o.row&&o.row.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=Kn(()=>{for(const r of n){const o=this.items[r];o.dropTarget=!1,o.row&&o.row.domNode.classList.remove("drop-target")}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=wb(()=>this.clearDragOverFeedback(),100),this.currentDragData&&((n=(t=this.dnd).onDragLeave)===null||n===void 0||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Gg.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,Gg.CurrentDragAndDropData=void 0,this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Oe.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=eue(this.domNode).top;this.dragOverAnimationDisposable=yEe(this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=wb(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const r=n.getAttribute("data-index");if(r){const o=Number(r);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const r=this.getRenderRange(e,t);let o,s;e===this.elementTop(r.start)?(o=r.start,s=0):r.end-r.start>1&&(o=r.start+1,s=this.elementTop(o)-e);let a=0;for(;;){const u=this.getRenderRange(e,t);let d=!1;for(let h=u.start;h<u.end;h++){const f=this.probeDynamicHeight(h);f!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=f,d=d||f!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();const h=Vs.relativeComplement(r,u);for(const p of h)for(let m=p.start;m<p.end;m++)this.items[m].row&&this.removeItemFromDOM(m);const f=Vs.relativeComplement(u,r);for(const p of f)for(let m=p.start;m<p.end;m++){const v=m+1,b=v<this.items.length?this.items[v].row:null,L=b?b.domNode:null;this.insertItemInDOM(m,L)}for(let p=u.start;p<u.end;p++)this.items[p].row&&this.updateItemInDOM(this.items[p],p);if(typeof o=="number"){const p=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(o)-s+p;this.setScrollTop(m,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){const a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(!this.setRowHeight&&t.row){let s=t.row.domNode.offsetHeight;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-n}const r=this.cache.alloc(t.templateId);r.domNode.style.height="",this.rowsContainer.appendChild(r.domNode);const o=this.renderers.get(t.templateId);return o&&(o.renderElement(t.element,e,r.templateData,void 0),o.disposeElement&&o.disposeElement(t.element,e,r.templateData,void 0)),t.size=r.domNode.offsetHeight,this.virtualDelegate.setDynamicHeight&&this.virtualDelegate.setDynamicHeight(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(r.domNode),this.cache.release(r),t.size-n}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return!n||!n.row?null:n.row.domNode}getElementDomId(e){return`${this.domId}_${e}`}dispose(){if(this.items){for(const e of this.items)if(e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement&&t.disposeElement(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),oi(this.disposables)}}uf.InstanceCount=0;xC([ko],uf.prototype,"onMouseClick",null);xC([ko],uf.prototype,"onMouseDblClick",null);xC([ko],uf.prototype,"onMouseMiddleClick",null);xC([ko],uf.prototype,"onMouseDown",null);xC([ko],uf.prototype,"onContextMenu",null);xC([ko],uf.prototype,"onTouchStart",null);xC([ko],uf.prototype,"onTap",null);var DC=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class I4e{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.trait}`}renderTemplate(e){return e}renderElement(e,t,n){const r=this.renderedElements.findIndex(o=>o.templateData===n);if(r>=0){const o=this.renderedElements[r];this.trait.unrender(n),o.index=t}else{const o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){const r=[];for(const o of this.renderedElements)o.index<e?r.push(o):o.index>=e+t&&r.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=r}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let M3=class{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new be,this.onChange=this._onChange.event}get trait(){return this._trait}get renderer(){return new I4e(this)}splice(e,t,n){var r;t=Math.max(0,Math.min(t,this.length-e));const o=n.length-t,s=e+t,a=[...this.sortedIndexes.filter(d=>d<e),...n.map((d,h)=>d?h+e:-1).filter(d=>d!==-1),...this.sortedIndexes.filter(d=>d>=s).map(d=>d+o)],u=this.length+o;if(this.sortedIndexes.length>0&&a.length===0&&u>0){const d=(r=this.sortedIndexes.find(h=>h>=e))!==null&&r!==void 0?r:u-1;a.push(Math.min(d,u-1))}this.renderer.splice(e,t,n.length),this._set(a,a),this.length=u}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(mte),t)}_set(e,t,n){const r=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const s=az(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),r}get(){return this.indexes}contains(e){return LG(this.sortedIndexes,e,mte)>=0}dispose(){oi(this._onChange)}};DC([ko],M3.prototype,"renderer",null);class k4e extends M3{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class y6{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,n.map(()=>!1));const r=this.trait.get().map(s=>this.identityProvider.getId(this.view.element(s)).toString()),o=n.map(s=>r.indexOf(this.identityProvider.getId(s).toString())>-1);this.trait.splice(e,t,o)}}function D0(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function Hw(i){return i.classList.contains("monaco-editor")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Hw(i.parentElement)}class _he{constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Qe,this.multipleSelectionDisposables=new Qe,this.onKeyDown.filter(r=>r.keyCode===3).on(this.onEnter,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===16).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===18).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===11).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===12).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter(r=>r.keyCode===9).on(this.onEscape,this,this.disposables),n.multipleSelectionSupport!==!1&&this.onKeyDown.filter(r=>(qn?r.metaKey:r.ctrlKey)&&r.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return Rt.chain(this.disposables.add(new Ui(this.view.domNode,"keydown")).event).filter(e=>!D0(e.target)).map(e=>new yr(e))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter(t=>(qn?t.metaKey:t.ctrlKey)&&t.keyCode===31).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(xa(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}DC([ko],_he.prototype,"onKeyDown",null);var $w;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})($w||($w={}));const vhe=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=93&&i.keyCode<=102||i.keyCode>=80&&i.keyCode<=90}};class T4e{constructor(e,t,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.delegate=r,this.enabled=!1,this.state=$w.Idle,this.automaticKeyboardNavigation=!0,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Qe,this.disposables=new Qe,this.updateOptions(e.options)}updateOptions(e){(typeof e.enableKeyboardNavigation>"u"?!0:!!e.enableKeyboardNavigation)?this.enable():this.disable(),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation)}enable(){if(this.enabled)return;const e=Rt.chain(this.enabledDisposables.add(new Ui(this.view.domNode,"keydown")).event).filter(r=>!D0(r.target)).filter(()=>this.automaticKeyboardNavigation||this.triggered).map(r=>new yr(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>r.preventDefault()).map(r=>r.browserEvent.key).event,t=Rt.debounce(e,()=>null,800);Rt.reduce(Rt.any(e,t),(r,o)=>o===null?null:(r||"")+o)(this.onInput,this,this.enabledDisposables),t(this.onClear,this,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=(e=this.list.options.accessibilityProvider)===null||e===void 0?void 0:e.getAriaLabel(this.list.element(t[0]));n&&ks(n)}this.previouslyFocused=-1}onInput(e){if(!e){this.state=$w.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,r=this.state===$w.Idle?1:0;this.state=$w.Typing;for(let o=0;o<this.list.length;o++){const s=(n+o+r)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),u=a&&a.toString();if(typeof u>"u"||iB(e,u)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class N4e{constructor(e,t){this.list=e,this.view=t,this.disposables=new Qe,Rt.chain(this.disposables.add(new Ui(t.domNode,"keydown")).event).filter(r=>!D0(r.target)).map(r=>new yr(r)).filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const r=n.querySelector("[tabIndex]");if(!r||!(r instanceof HTMLElement)||r.tabIndex===-1)return;const o=window.getComputedStyle(r);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),r.focus())}dispose(){this.disposables.dispose()}}function bhe(i){return qn?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function Che(i){return i.browserEvent.shiftKey}function A4e(i){return i instanceof MouseEvent&&i.button===2}const pte={isSelectionSingleChangeEvent:bhe,isSelectionRangeChangeEvent:Che};class whe{constructor(e){this.list=e,this.disposables=new Qe,this._onPointer=new be,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||pte),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Hi.addTarget(e.getHTMLElement()))),Rt.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||pte))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Hw(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Hw(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||D0(e.browserEvent.target)||Hw(e.browserEvent.target))return;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionRangeChangeEvent(e))return this.changeSelection(e);if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),A4e(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(D0(e.browserEvent.target)||Hw(e.browserEvent.target)||this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(typeof n>"u"){const h=this.list.getFocus()[0];n=h??t,this.list.setAnchor(n)}const r=Math.min(n,t),o=Math.max(n,t),s=xa(r,o+1),a=this.list.getSelection(),u=R4e(az(a,[n]),n);if(u.length===0)return;const d=az(s,P4e(a,u));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const r=this.list.getSelection(),o=r.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),r.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class yhe{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&(e.listBackground.isOpaque()?n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):qn||console.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`)),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }
			`),e.listFilterWidgetBackground&&n.push(`.monaco-list-type-filter { background-color: ${e.listFilterWidgetBackground} }`),e.listFilterWidgetOutline&&n.push(`.monaco-list-type-filter { border: 1px solid ${e.listFilterWidgetOutline}; }`),e.listFilterWidgetNoMatchesOutline&&n.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${e.listFilterWidgetNoMatchesOutline}; }`),e.listMatchesShadow&&n.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${e.listMatchesShadow}; }`),e.tableColumnsBorder&&n.push(`
				.monaco-table:hover > .monaco-split-view2,
				.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
			}`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const O4e={listFocusBackground:ye.fromHex("#7FB0D0"),listActiveSelectionBackground:ye.fromHex("#0E639C"),listActiveSelectionForeground:ye.fromHex("#FFFFFF"),listActiveSelectionIconForeground:ye.fromHex("#FFFFFF"),listFocusAndSelectionBackground:ye.fromHex("#094771"),listFocusAndSelectionForeground:ye.fromHex("#FFFFFF"),listInactiveSelectionBackground:ye.fromHex("#3F3F46"),listInactiveSelectionIconForeground:ye.fromHex("#FFFFFF"),listHoverBackground:ye.fromHex("#2A2D2E"),listDropBackground:ye.fromHex("#383B3D"),treeIndentGuidesStroke:ye.fromHex("#a9a9a9"),tableColumnsBorder:ye.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:ye.fromHex("#cccccc").transparent(.04)},M4e={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function R4e(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let r=t-1;for(;r>=0&&i[r]===e-(t-r);)n.push(i[r--]);for(n.reverse(),r=t;r<i.length&&i[r]===e+(r-t);)n.push(i[r++]);return n}function az(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){t.push(i[n]),n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):t.push(e[r++]);return t}function P4e(i,e){const t=[];let n=0,r=0;for(;n<i.length||r<e.length;)if(n>=i.length)t.push(e[r++]);else if(r>=e.length)t.push(i[n++]);else if(i[n]===e[r]){n++,r++;continue}else i[n]<e[r]?t.push(i[n++]):r++;return t}const mte=(i,e)=>i-e;class F4e{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,r){let o=0;for(const s of this.renderers)s.renderElement(e,t,n[o++],r)}disposeElement(e,t,n,r){let o=0;for(const s of this.renderers)s.disposeElement&&s.disposeElement(e,t,n[o],r),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class B4e{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const r=this.accessibilityProvider.getAriaLabel(e);r?n.setAttribute("aria-label",r):n.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.setAttribute("aria-level",`${o}`):n.removeAttribute("aria-level")}disposeTemplate(e){}}class W4e{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(e,t)}onDragOver(e,t,n,r){return this.dnd.onDragOver(e,t,n,r)}onDragLeave(e,t,n,r){var o,s;(s=(o=this.dnd).onDragLeave)===null||s===void 0||s.call(o,e,t,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}drop(e,t,n,r){this.dnd.drop(e,t,n,r)}}class xg{constructor(e,t,n,r,o=M4e){var s;this.user=e,this._options=o,this.focus=new M3("focused"),this.anchor=new M3("anchor"),this.eventBufferer=new QK,this._ariaLabel="",this.disposables=new Qe,this._onDidDispose=new be,this.onDidDispose=this._onDidDispose.event;const a=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(s=this._options.accessibilityProvider)===null||s===void 0?void 0:s.getWidgetRole():"list";this.selection=new k4e(a!=="listbox"),Eg(o,O4e,!1);const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(u.push(new B4e(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant&&this.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map(h=>new F4e(h.templateId,[...u,h]));const d=Object.assign(Object.assign({},o),{dnd:o.dnd&&new W4e(this,o.dnd)});if(this.view=new uf(t,n,r,d),this.view.domNode.setAttribute("role",a),o.styleController)this.styleController=o.styleController(this.view.domId);else{const h=cc(this.view.domNode);this.styleController=new yhe(h,this.view.domId)}if(this.spliceable=new b4e([new y6(this.focus,this.view,o.identityProvider),new y6(this.selection,this.view,o.identityProvider),new y6(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new N4e(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new _he(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const h=o.keyboardNavigationDelegate||vhe;this.typeLabelController=new T4e(this,this.view,o.keyboardNavigationLabelProvider,h),this.disposables.add(this.typeLabelController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return Rt.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e))}get onDidChangeSelection(){return Rt.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e))}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Rt.chain(this.disposables.add(new Ui(this.view.domNode,"keydown")).event).map(o=>new yr(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(Nee).filter(()=>!1).event,n=Rt.chain(this.disposables.add(new Ui(this.view.domNode,"keyup")).event).forEach(()=>e=!1).map(o=>new yr(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(Nee).map(({browserEvent:o})=>{const s=this.getFocus(),a=s.length?s[0]:void 0,u=typeof a<"u"?this.view.element(a):void 0,d=typeof a<"u"?this.view.domElement(a):this.view.domNode;return{index:a,element:u,anchor:d,browserEvent:o}}).event,r=Rt.chain(this.view.onContextMenu).filter(o=>!e).map(({element:o,index:s,browserEvent:a})=>({element:o,index:s,anchor:{x:a.pageX+1,y:a.pageY},browserEvent:a})).event;return Rt.any(t,n,r)}get onKeyDown(){return this.disposables.add(new Ui(this.view.domNode,"keydown")).event}get onDidFocus(){return Rt.signal(this.disposables.add(new Ui(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new whe(this)}updateOptions(e={}){var t;this._options=Object.assign(Object.assign({},this._options),e),this.typeLabelController&&this.typeLabelController.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(t=this.keyboardController)===null||t===void 0||t.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new o1(this.user,`Invalid start index: ${e}`);if(t<0)throw new o1(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new o1(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new o1(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return wH(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new o1(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,r){if(this.length===0)return;const o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,r);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,r){if(this.length===0)return;const o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,r);s>-1&&this.setFocus([s],n)}focusNextPage(e,t){return gte(this,void 0,void 0,function*(){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const r=this.view.element(n),o=this.getFocusedElements()[0];if(o!==r){const s=this.findPreviousIndex(n,!1,t);s>-1&&o!==this.view.element(s)?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();this.view.setScrollTop(s+this.view.renderHeight-this.view.elementHeight(n)),this.view.getScrollTop()!==s&&(this.setFocus([]),yield p0(0),yield this.focusNextPage(e,t))}})}focusPreviousPage(e,t){return gte(this,void 0,void 0,function*(){let n;const r=this.view.getScrollTop();r===0?n=this.view.indexAt(r):n=this.view.indexAfter(r-1);const o=this.view.element(n),s=this.getFocusedElements()[0];if(s!==o){const a=this.findNextIndex(n,!1,t);a>-1&&s!==this.view.element(a)?this.setFocus([a],e):this.setFocus([n],e)}else{const a=r;this.view.setScrollTop(r-this.view.renderHeight),this.view.getScrollTop()!==a&&(this.setFocus([]),yield p0(0),yield this.focusPreviousPage(e,t))}})}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const r=this.findNextIndex(e,!1,n);r>-1&&this.setFocus([r],t)}findNextIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let r=0;r<this.length;r++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t){if(e<0||e>=this.length)throw new o1(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(Sb(t)){const s=o-this.view.renderHeight;this.view.setScrollTop(s*Pc(t,0,1)+r)}else{const s=r+o,a=n+this.view.renderHeight;r<n&&s>=a||(r<n||s>=a&&o>=this.view.renderHeight?this.view.setScrollTop(r):s>=a&&this.view.setScrollTop(s-this.view.renderHeight))}}getRelativeTop(e){if(e<0||e>=this.length)throw new o1(this.user,`Invalid index ${e}`);const t=this.view.getScrollTop(),n=this.view.elementTop(e),r=this.view.elementHeight(e);if(n<t||n+r>t+this.view.renderHeight)return null;const o=r-this.view.renderHeight;return Math.abs((t-n)/o)}getHTMLElement(){return this.view.domNode}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;!((e=this.accessibilityProvider)===null||e===void 0)&&e.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}DC([ko],xg.prototype,"onDidChangeFocus",null);DC([ko],xg.prototype,"onDidChangeSelection",null);DC([ko],xg.prototype,"onContextMenu",null);DC([ko],xg.prototype,"onKeyDown",null);DC([ko],xg.prototype,"onDidFocus",null);class V4e{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Oe.None}}renderElement(e,t,n,r){if(n.disposable&&n.disposable.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,r);const s=new oa,a=o.resolve(e,s.token);n.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(u=>this.renderer.renderElement(u,e,n.data,r))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class H4e{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function $4e(i,e){return Object.assign(Object.assign({},e),{accessibilityProvider:e.accessibilityProvider&&new H4e(i,e.accessibilityProvider)})}class z4e{constructor(e,t,n,r,o={}){const s=()=>this.model,a=r.map(u=>new V4e(u,s));this.list=new xg(e,t,n,a,$4e(s,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Rt.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Rt.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Rt.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(r=>this._model.get(r)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,xa(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const U4e={separatorBorder:ye.transparent};class She{constructor(e,t,n,r){this.container=e,this.view=t,this.disposable=r,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){e!==this.visible&&(e?(this.size=Pc(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e),this.view.setVisible&&this.view.setVisible(e))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e),this.view.layout(this.size,e,t)}dispose(){return this.disposable.dispose(),this.view}}class j4e extends She{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class K4e extends She{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var qg;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(qg||(qg={}));var R3;(function(i){i.Distribute={type:"distribute"};function e(n){return{type:"split",index:n}}i.Split=e;function t(n){return{type:"invisible",cachedVisibleSize:n}}i.Invisible=t})(R3||(R3={}));class Lhe extends Oe{constructor(e,t={}){var n,r,o,s,a;super(),this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=qg.Idle,this._onDidSashChange=this._register(new be),this._onDidSashReset=this._register(new be),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=(n=t.orientation)!==null&&n!==void 0?n:0,this.inverseAltBehavior=(r=t.inverseAltBehavior)!==null&&r!==void 0?r:!1,this.proportionalLayout=(o=t.proportionalLayout)!==null&&o!==void 0?o:!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Be(this.el,Ge(".sash-container")),this.viewContainer=Ge(".split-view-container"),this.scrollable=new q8(125,og),this.scrollableElement=this._register(new uq(this.viewContainer,{vertical:this.orientation===0?(s=t.scrollbarVisibility)!==null&&s!==void 0?s:1:2,horizontal:this.orientation===1?(a=t.scrollbarVisibility)!==null&&a!==void 0?a:1:2},this.scrollable)),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(u=>{this.viewContainer.scrollTop=u.scrollTop,this.viewContainer.scrollLeft=u.scrollLeft})),Be(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||U4e),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((u,d)=>{const h=pl(u.visible)||u.visible?u.size:{type:"invisible",cachedVisibleSize:u.size},f=u.view;this.doAddView(f,h,d,!0)}),this.contentSize=this.viewItems.reduce((u,d)=>u+d.size,0),this.saveProportions())}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,r){this.doAddView(e,t,n,r)}layout(e,t){const n=Math.max(this.size,this.contentSize);if(this.size=e,this.layoutContext=t,this.proportions)for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r];o.size=Pc(Math.round(this.proportions[r]*e),o.minimumSize,o.maximumSize)}else{const r=xa(this.viewItems.length),o=r.filter(a=>this.viewItems[a].priority===1),s=r.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(e=>e.size/this.contentSize))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const r=this.sashItems.findIndex(a=>a.sash===e),o=t0(qe(document.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),qe(document.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,u)=>{const d=this.viewItems.map(v=>v.size);let h=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(u=!u),u)if(r===this.sashItems.length-1){const b=this.viewItems[r];h=(b.minimumSize-b.size)/2,f=(b.maximumSize-b.size)/2}else{const b=this.viewItems[r+1];h=(b.size-b.maximumSize)/2,f=(b.size-b.minimumSize)/2}let p,m;if(!u){const v=xa(r,-1),b=xa(r+1,this.viewItems.length),L=v.reduce((M,K)=>M+(this.viewItems[K].minimumSize-d[K]),0),S=v.reduce((M,K)=>M+(this.viewItems[K].viewMaximumSize-d[K]),0),y=b.length===0?Number.POSITIVE_INFINITY:b.reduce((M,K)=>M+(d[K]-this.viewItems[K].minimumSize),0),E=b.length===0?Number.NEGATIVE_INFINITY:b.reduce((M,K)=>M+(d[K]-this.viewItems[K].viewMaximumSize),0),A=Math.max(L,E),N=Math.min(y,S),V=this.findFirstSnapIndex(v),R=this.findFirstSnapIndex(b);if(typeof V=="number"){const M=this.viewItems[V],K=Math.floor(M.viewMinimumSize/2);p={index:V,limitDelta:M.visible?A-K:A+K,size:M.size}}if(typeof R=="number"){const M=this.viewItems[R],K=Math.floor(M.viewMinimumSize/2);m={index:R,limitDelta:M.visible?N+K:N-K,size:M.size}}}this.sashDragState={start:a,current:a,index:r,sizes:d,minDelta:h,maxDelta:f,alt:u,snapBefore:p,snapAfter:m,disposable:o}};s(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:r,alt:o,minDelta:s,maxDelta:a,snapBefore:u,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;const h=e-n,f=this.resize(t,h,r,void 0,void 0,s,a,u,d);if(o){const p=t===this.sashItems.length-1,m=this.viewItems.map(E=>E.size),v=p?t:t+1,b=this.viewItems[v],L=b.size-b.maximumSize,S=b.size-b.minimumSize,y=p?t-1:t+1;this.resize(y,-f,m,void 0,void 0,L,S)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=Pc(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(this.state!==qg.Idle)throw new Error("Cant modify splitview");if(this.state=qg.Busy,e<0||e>=this.viewItems.length)return;const n=xa(this.viewItems.length).filter(a=>a!==e),r=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=Pc(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(r,o),this.state=qg.Idle}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=Pc(n,a.minimumSize,a.maximumSize);const r=xa(this.viewItems.length),o=r.filter(a=>this.viewItems[a].priority===1),s=r.filter(a=>this.viewItems[a].priority===2);this.relayout(o,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,r){if(this.state!==qg.Idle)throw new Error("Cant modify splitview");this.state=qg.Busy;const o=Ge(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));const s=e.onDidChange(p=>this.onViewChange(h,p)),a=Kn(()=>this.viewContainer.removeChild(o)),u=t0(s,a);let d;typeof t=="number"?d=t:t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize;const h=this.orientation===0?new j4e(o,e,d,u):new K4e(o,e,d,u);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){let p={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash};const m=this.orientation===0?new Hs(this.sashContainer,{getHorizontalSashTop:M=>this.getSashPosition(M),getHorizontalSashWidth:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:1})):new Hs(this.sashContainer,{getVerticalSashLeft:M=>this.getSashPosition(M),getVerticalSashHeight:this.getSashOrthogonalSize},Object.assign(Object.assign({},p),{orientation:0})),v=this.orientation===0?M=>({sash:m,start:M.startY,current:M.currentY,alt:M.altKey}):M=>({sash:m,start:M.startX,current:M.currentX,alt:M.altKey}),L=Rt.map(m.onDidStart,v)(this.onSashStart,this),y=Rt.map(m.onDidChange,v)(this.onSashChange,this),A=Rt.map(m.onDidEnd,()=>this.sashItems.findIndex(M=>M.sash===m))(this.onSashEnd,this),N=m.onDidReset(()=>{const M=this.sashItems.findIndex(T=>T.sash===m),K=xa(M,-1),X=xa(M+1,this.viewItems.length),$=this.findFirstSnapIndex(K),D=this.findFirstSnapIndex(X);typeof $=="number"&&!this.viewItems[$].visible||typeof D=="number"&&!this.viewItems[D].visible||this._onDidSashReset.fire(M)}),V=t0(L,y,A,N,m),R={sash:m,disposable:V};this.sashItems.splice(n-1,0,R)}o.appendChild(e.element);let f;typeof t!="number"&&t.type==="split"&&(f=[t.index]),r||this.relayout([n],f),this.state=qg.Idle,!r&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}relayout(e,t){const n=this.viewItems.reduce((r,o)=>r+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),r,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u,d){if(e<0||e>=this.viewItems.length)return 0;const h=xa(e,-1),f=xa(e+1,this.viewItems.length);if(o)for(const R of o)y9(h,R),y9(f,R);if(r)for(const R of r)ER(h,R),ER(f,R);const p=h.map(R=>this.viewItems[R]),m=h.map(R=>n[R]),v=f.map(R=>this.viewItems[R]),b=f.map(R=>n[R]),L=h.reduce((R,M)=>R+(this.viewItems[M].minimumSize-n[M]),0),S=h.reduce((R,M)=>R+(this.viewItems[M].maximumSize-n[M]),0),y=f.length===0?Number.POSITIVE_INFINITY:f.reduce((R,M)=>R+(n[M]-this.viewItems[M].minimumSize),0),E=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((R,M)=>R+(n[M]-this.viewItems[M].maximumSize),0),A=Math.max(L,E,s),N=Math.min(y,S,a);let V=!1;if(u){const R=this.viewItems[u.index],M=t>=u.limitDelta;V=M!==R.visible,R.setVisible(M,u.size)}if(!V&&d){const R=this.viewItems[d.index],M=t<d.limitDelta;V=M!==R.visible,R.setVisible(M,d.size)}if(V)return this.resize(e,t,n,r,o,s,a);t=Pc(t,A,N);for(let R=0,M=t;R<p.length;R++){const K=p[R],X=Pc(m[R]+M,K.minimumSize,K.maximumSize),$=X-m[R];M-=$,K.size=X}for(let R=0,M=t;R<v.length;R++){const K=v[R],X=Pc(b[R]-M,K.minimumSize,K.maximumSize),$=X-b[R];M+=$,K.size=X}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,u)=>a+u.size,0);let n=this.size-t;const r=xa(this.viewItems.length-1,-1),o=r.filter(a=>this.viewItems[a].priority===1),s=r.filter(a=>this.viewItems[a].priority===2);for(const a of s)y9(r,a);for(const a of o)ER(r,a);typeof e=="number"&&ER(r,e);for(let a=0;n!==0&&a<r.length;a++){const u=this.viewItems[r[a]],d=Pc(u.size+n,u.minimumSize,u.maximumSize),h=d-u.size;n-=h,u.size=d}}layoutViews(){this.contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this.contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this.contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(u=>e=u.size-u.minimumSize>0||e);e=!1;const n=this.viewItems.map(u=>e=u.maximumSize-u.size>0||e),r=[...this.viewItems].reverse();e=!1;const o=r.map(u=>e=u.size-u.minimumSize>0||e).reverse();e=!1;const s=r.map(u=>e=u.maximumSize-u.size>0||e).reverse();let a=0;for(let u=0;u<this.sashItems.length;u++){const{sash:d}=this.sashItems[u],h=this.viewItems[u];a+=h.size;const f=!(t[u]&&s[u+1]),p=!(n[u]&&o[u+1]);if(f&&p){const m=xa(u,-1),v=xa(u+1,this.viewItems.length),b=this.findFirstSnapIndex(m),L=this.findFirstSnapIndex(v),S=typeof b=="number"&&!this.viewItems[b].visible,y=typeof L=="number"&&!this.viewItems[L].visible;S&&o[u]&&(a>0||this.startSnappingEnabled)?d.state=1:y&&t[u]&&(a<this.contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else f&&!p?d.state=1:!f&&p?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}dispose(){super.dispose(),this.viewItems.forEach(e=>e.dispose()),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[]}}class LM{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=LM.TemplateId,this.renderedTemplates=new Set;const r=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const s=r.get(o.templateId);if(!s)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(s)}}renderTemplate(e){const t=Be(e,Ge(".monaco-table-tr")),n=[],r=[];for(let s=0;s<this.columns.length;s++){const a=this.renderers[s],u=Be(t,Ge(".monaco-table-td",{"data-col-index":s}));u.style.width=`${this.getColumnSize(s)}px`,n.push(u),r.push(a.renderTemplate(u))}const o={container:e,cellContainers:n,cellTemplateData:r};return this.renderedTemplates.add(o),o}renderElement(e,t,n,r){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],r)}}disposeElement(e,t,n,r){for(let o=0;o<this.columns.length;o++){const s=this.renderers[o];if(s.disposeElement){const u=this.columns[o].project(e);s.disposeElement(u,t,n.cellTemplateData[o],r)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);$o(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}LM.TemplateId="row";function G4e(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return LM.TemplateId}}}class q4e{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new be,this.onDidLayout=this._onDidLayout.event,this.element=Ge(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return(e=this.column.minimumWidth)!==null&&e!==void 0?e:120}get maximumSize(){var e;return(e=this.column.maximumWidth)!==null&&e!==void 0?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return(e=this.column.onDidChangeWidthConstraints)!==null&&e!==void 0?e:Rt.None}layout(e){this._onDidLayout.fire([this.index,e])}}class aB{constructor(e,t,n,r,o,s){this.virtualDelegate=n,this.domId=`table_id_${++aB.InstanceCount}`,this.disposables=new Qe,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Be(t,Ge(`.monaco-table.${this.domId}`));const a=r.map((h,f)=>new q4e(h,f)),u={size:a.reduce((h,f)=>h+f.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new Lhe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:u})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const d=new LM(r,o,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new xg(e,this.domNode,G4e(n),[d],s)),Rt.any(...a.map(h=>h.onDidLayout))(([h,f])=>d.layoutColumn(h,f),null,this.disposables),this.splitview.onDidSashReset(h=>{const f=r.reduce((m,v)=>m+v.weight,0),p=r[h].weight/f*this.cachedWidth;this.splitview.resizeView(h,p)},null,this.disposables),this.styleElement=cc(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}aB.InstanceCount=0;var z2;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element"})(z2||(z2={}));class Xu extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class $q{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function zq(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function sO(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function S6(i){return typeof i.collapsible=="boolean"}class Y4e{constructor(e,t,n,r={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new QK,this._onDidChangeCollapseState=new be,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new be,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new be,this.onDidSplice=this._onDidSplice.event,this.collapseByDefault=typeof r.collapseByDefault>"u"?!1:r.collapseByDefault,this.filter=r.filter,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=Jn.empty(),r={}){if(e.length===0)throw new Xu(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,n,r):this.spliceSimple(e,t,n,r)}spliceSmart(e,t,n,r,o,s){var a;r===void 0&&(r=Jn.empty()),s===void 0&&(s=(a=o.diffDepth)!==null&&a!==void 0?a:0);const{parentNode:u}=this.getParentNodeWithListIndex(t);if(!u.lastDiffIds)return this.spliceSimple(t,n,r,o);const d=[...r],h=t[t.length-1],f=new Wf({getElements:()=>u.lastDiffIds},{getElements:()=>[...u.children.slice(0,h),...d,...u.children.slice(h+n)].map(L=>e.getId(L.element).toString())}).ComputeDiff(!1);if(f.quitEarly)return u.lastDiffIds=void 0,this.spliceSimple(t,n,d,o);const p=t.slice(0,-1),m=(L,S,y)=>{if(s>0)for(let E=0;E<y;E++)L--,S--,this.spliceSmart(e,[...p,L,0],Number.MAX_SAFE_INTEGER,d[S].children,o,s-1)};let v=Math.min(u.children.length,h+n),b=d.length;for(const L of f.changes.sort((S,y)=>y.originalStart-S.originalStart))m(v,b,v-(L.originalStart+L.originalLength)),v=L.originalStart,b=L.modifiedStart-h,this.spliceSimple([...p,v],L.originalLength,Jn.slice(d,b,b+L.modifiedLength),o);m(v,b,v)}spliceSimple(e,t,n=Jn.empty(),{onDidCreateNode:r,onDidDeleteNode:o,diffIdentityProvider:s}){const{parentNode:a,listIndex:u,revealed:d,visible:h}=this.getParentNodeWithListIndex(e),f=[],p=Jn.map(n,R=>this.createTreeNode(R,a,a.visible?1:0,d,f,r)),m=e[e.length-1],v=a.children.length>0;let b=0;for(let R=m;R>=0&&R<a.children.length;R--){const M=a.children[R];if(M.visible){b=M.visibleChildIndex;break}}const L=[];let S=0,y=0;for(const R of p)L.push(R),y+=R.renderNodeCount,R.visible&&(R.visibleChildIndex=b+S++);const E=tJ(a.children,m,t,L);s?a.lastDiffIds?tJ(a.lastDiffIds,m,t,L.map(R=>s.getId(R.element).toString())):a.lastDiffIds=a.children.map(R=>s.getId(R.element).toString()):a.lastDiffIds=void 0;let A=0;for(const R of E)R.visible&&A++;if(A!==0)for(let R=m+L.length;R<a.children.length;R++){const M=a.children[R];M.visible&&(M.visibleChildIndex-=A)}if(a.visibleChildrenCount+=S-A,d&&h){const R=E.reduce((M,K)=>M+(K.visible?K.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,y-R),this.list.splice(u,R,f)}if(E.length>0&&o){const R=M=>{o(M),M.children.forEach(R)};E.forEach(R)}const N=a.children.length>0;v!==N&&this.setCollapsible(e.slice(0,-1),N),this._onDidSplice.fire({insertedNodes:L,deletedNodes:E});let V=a;for(;V;){if(V.visibility===2){this.refilter();break}V=V.parent}}rerender(e){if(e.length===0)throw new Xu(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:r}=this.getTreeNodeWithListIndex(e);return n&&r?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const r={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const r=this.getTreeNode(e);typeof t>"u"&&(t=!r.collapsed);const o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:n,listIndex:r,revealed:o}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(n,r,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&s&&!S6(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let u=0;u<n.children.length;u++)if(n.children[u].visible)if(a>-1){a=-1;break}else a=u;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,n,r){const o=this._setNodeCollapseState(e,r,!1);if(!n||!e.visible||!o)return o;const s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),u=s-(t===-1?0:1);return this.list.splice(t+1,u,a.slice(1)),o}_setNodeCollapseState(e,t,n){let r;if(e===this.root?r=!1:(S6(t)?(r=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(r=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!S6(t)&&t.recursive)for(const o of e.children)r=this._setNodeCollapseState(o,t,!0)||r;return r}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t)}createTreeNode(e,t,n,r,o,s){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},u=this._filterNode(a,n);a.visibility=u,r&&o.push(a);const d=e.children||Jn.empty(),h=r&&u!==0&&!a.collapsed,f=Jn.map(d,v=>this.createTreeNode(v,a,u,h,o,s));let p=0,m=1;for(const v of f)a.children.push(v),m+=v.renderNodeCount,v.visible&&(v.visibleChildIndex=p++);return a.collapsible=a.collapsible||a.children.length>0,a.visibleChildrenCount=p,a.visible=u===2?p>0:u===1,a.visible?a.collapsed||(a.renderNodeCount=m):(a.renderNodeCount=0,r&&o.pop()),s&&s(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,r=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;r&&n.push(e)}const s=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let u=0;for(const d of e.children)a=this._updateNodeAfterFilterChange(d,o,n,r&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=u++);e.visibleChildrenCount=u}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-s):(e.renderNodeCount=0,r&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):zq(n)?(e.filterData=n.data,sO(n.visibility)):(e.filterData=void 0,sO(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...r]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(r,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...r]=e;if(n<0||n>t.children.length)throw new Xu(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:r,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new Xu(this.user,"Invalid tree location");const a=t.children[s];return{node:a,listIndex:n,revealed:r,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,r=!0,o=!0){const[s,...a]=e;if(s<0||s>t.children.length)throw new Xu(this.user,"Invalid tree location");for(let u=0;u<s;u++)n+=t.children[u].renderNodeCount;return r=r&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:r,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],n+1,r,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:bxe(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class Z4e extends SM{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function L6(i){return i instanceof SM?new Z4e(i):i}class X4e{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Oe.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(L6(e),t)}onDragOver(e,t,n,r,o=!0){const s=this.dnd.onDragOver(L6(e),t&&t.element,n,r),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return s;if(a&&typeof s!="boolean"&&s.autoExpand&&(this.autoExpandDisposable=wb(()=>{const p=this.modelProvider(),m=p.getNodeLocation(t);p.isCollapsed(m)&&p.setCollapsed(m,!1),this.autoExpandNode=void 0},500)),typeof s=="boolean"||!s.accept||typeof s.bubble>"u"||s.feedback){if(!o){const p=typeof s=="boolean"?s:s.accept,m=typeof s=="boolean"?void 0:s.effect;return{accept:p,effect:m,feedback:[n]}}return s}if(s.bubble===1){const p=this.modelProvider(),m=p.getNodeLocation(t),v=p.getParentNodeLocation(m),b=p.getNode(v),L=v&&p.getListIndex(v);return this.onDragOver(e,b,L,r,!1)}const u=this.modelProvider(),d=u.getNodeLocation(t),h=u.getListIndex(d),f=u.getListRenderCount(d);return Object.assign(Object.assign({},s),{feedback:xa(h,h+f)})}drop(e,t,n,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(L6(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function Q4e(i,e){return e&&Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new X4e(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getSetSize(t){const n=i(),r=n.getNodeLocation(t),o=n.getParentNodeLocation(r);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),enableKeyboardNavigation:e.simpleKeyboardNavigation})}class Uq{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight&&this.delegate.setDynamicHeight(e.element,t)}}var aO;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(aO||(aO={}));class J4e{constructor(e,t=[]){this._elements=t,this.onDidChange=Rt.forEach(e,n=>this._elements=n)}get elements(){return this._elements}}class lO{constructor(e,t,n,r,o={}){this.renderer=e,this.modelProvider=t,this.activeNodes=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=lO.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new wDe,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Oe.None,this.disposables=new Qe,this.templateId=e.templateId,this.updateOptions(o),Rt.map(n,s=>s.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState&&e.onDidChangeTwistieState(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"&&(this.indent=Pc(e.indent,0,40)),typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==aO.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const n=new Qe;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Be(e,Ge(".monaco-tl-row")),n=Be(t,Ge(".monaco-tl-indent")),r=Be(t,Ge(".monaco-tl-twistie")),o=Be(t,Ge(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:r,indentGuidesDisposable:Oe.None,templateData:s}}renderElement(e,t,n,r){typeof r=="number"&&(this.renderedNodes.set(e,{templateData:n,height:r}),this.renderedElements.set(e.element,e));const o=lO.DefaultIndent+(e.depth-1)*this.indent;n.twistie.style.paddingLeft=`${o}px`,n.indent.style.width=`${o+this.indent-16}px`,this.renderTwistie(e,n),typeof r=="number"&&this.renderIndentGuides(e,n),this.renderer.renderElement(e,t,n.templateData,r)}disposeElement(e,t,n,r){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(..._e.treeItemExpanded.classNamesArray);let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(..._e.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if($o(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Qe,r=this.modelProvider();let o=e;for(;;){const s=r.getNodeLocation(o),a=r.getParentNodeLocation(s);if(!a)break;const u=r.getNode(a),d=Ge(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(u)&&d.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(d):t.indent.insertBefore(d,t.indent.firstElementChild),this.renderedIndentGuides.add(u,d),n.add(Kn(()=>this.renderedIndentGuides.delete(u,d))),o=u}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(r=>{const o=n.getNodeLocation(r);try{const s=n.getParentNodeLocation(o);r.collapsible&&r.children.length>0&&!r.collapsed?t.add(r):s&&t.add(n.getNode(s))}catch{}}),this.activeIndentNodes.forEach(r=>{t.has(r)||this.renderedIndentGuides.forEach(r,o=>o.classList.remove("active"))}),t.forEach(r=>{this.activeIndentNodes.has(r)||this.renderedIndentGuides.forEach(r,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),oi(this.disposables)}}lO.DefaultIndent=8;class eFe{constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Qe,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){if(this._filter){const o=this._filter.filter(e,t);if(this.tree.options.simpleKeyboardNavigation)return o;let s;if(typeof o=="boolean"?s=o?1:0:zq(o)?s=sO(o.visibility):s=o,s===0)return!1}if(this._totalCount++,this.tree.options.simpleKeyboardNavigation||!this._pattern)return this._matchCount++,{data:Zh.Default,visibility:!0};const n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(n)?n:[n];for(const o of r){const s=o&&o.toString();if(typeof s>"u")return{data:Zh.Default,visibility:!0};const a=tS(this._pattern,this._lowercasePattern,0,s,s.toLowerCase(),0,!0);if(a)return this._matchCount++,r.length===1?{data:a,visibility:!0}:{data:{label:s,score:a},visibility:!0}}return this.tree.options.filterOnType?2:{data:Zh.Default,visibility:!0}}reset(){this._totalCount=0,this._matchCount=0}dispose(){oi(this.disposables)}}class tFe{constructor(e,t,n,r,o){this.tree=e,this.view=n,this.filter=r,this.keyboardNavigationDelegate=o,this._enabled=!1,this._pattern="",this._empty=!1,this._onDidChangeEmptyState=new be,this.positionClassName="ne",this.automaticKeyboardNavigation=!0,this.triggered=!1,this._onDidChangePattern=new be,this.enabledDisposables=new Qe,this.disposables=new Qe,this.domNode=Ge(`.monaco-list-type-filter.${this.positionClassName}`),this.domNode.draggable=!0,this.disposables.add(qe(this.domNode,"dragstart",()=>this.onDragStart())),this.messageDomNode=Be(n.getHTMLElement(),Ge(".monaco-list-type-filter-message")),this.labelDomNode=Be(this.domNode,Ge("span.label"));const s=Be(this.domNode,Ge(".controls"));this._filterOnType=!!e.options.filterOnType,this.filterOnTypeDomNode=Be(s,Ge("input.filter")),this.filterOnTypeDomNode.type="checkbox",this.filterOnTypeDomNode.checked=this._filterOnType,this.filterOnTypeDomNode.tabIndex=-1,this.updateFilterOnTypeTitleAndIcon(),this.disposables.add(qe(this.filterOnTypeDomNode,"input",()=>this.onDidChangeFilterOnType())),this.clearDomNode=Be(s,Ge("button.clear"+_e.treeFilterClear.cssSelector)),this.clearDomNode.tabIndex=-1,this.clearDomNode.title=C("clear","Clear"),this.keyboardNavigationEventFilter=e.options.keyboardNavigationEventFilter,t.onDidSplice(this.onDidSpliceModel,this,this.disposables),this.updateOptions(e.options)}get enabled(){return this._enabled}get pattern(){return this._pattern}get filterOnType(){return this._filterOnType}updateOptions(e){e.simpleKeyboardNavigation?this.disable():this.enable(),typeof e.filterOnType<"u"&&(this._filterOnType=!!e.filterOnType,this.filterOnTypeDomNode.checked=this._filterOnType,this.updateFilterOnTypeTitleAndIcon()),typeof e.automaticKeyboardNavigation<"u"&&(this.automaticKeyboardNavigation=e.automaticKeyboardNavigation),this.tree.refilter(),this.render(),this.automaticKeyboardNavigation||this.onEventOrInput("")}enable(){if(this._enabled)return;const e=this.enabledDisposables.add(new Ui(this.view.getHTMLElement(),"keydown")),t=Rt.chain(e.event).filter(r=>!D0(r.target)||r.target===this.filterOnTypeDomNode).filter(r=>r.key!=="Dead"&&!/^Media/.test(r.key)).map(r=>new yr(r)).filter(this.keyboardNavigationEventFilter||(()=>!0)).filter(()=>this.automaticKeyboardNavigation||this.triggered).filter(r=>this.keyboardNavigationDelegate.mightProducePrintableCharacter(r)&&!(r.keyCode===18||r.keyCode===16||r.keyCode===15||r.keyCode===17)||(this.pattern.length>0||this.triggered)&&(r.keyCode===9||r.keyCode===1)&&!r.altKey&&!r.ctrlKey&&!r.metaKey||r.keyCode===1&&(qn?r.altKey&&!r.metaKey:r.ctrlKey)&&!r.shiftKey).forEach(r=>{r.stopPropagation(),r.preventDefault()}).event,n=this.enabledDisposables.add(new Ui(this.clearDomNode,"click"));Rt.chain(Rt.any(t,n.event)).event(this.onEventOrInput,this,this.enabledDisposables),this.filter.pattern="",this.tree.refilter(),this.render(),this._enabled=!0,this.triggered=!1}disable(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.clear(),this.tree.refilter(),this.render(),this._enabled=!1,this.triggered=!1)}onEventOrInput(e){typeof e=="string"?this.onInput(e):e instanceof MouseEvent||e.keyCode===9||e.keyCode===1&&(qn?e.altKey:e.ctrlKey)?this.onInput(""):e.keyCode===1?this.onInput(this.pattern.length===0?"":this.pattern.substr(0,this.pattern.length-1)):this.onInput(this.pattern+e.browserEvent.key)}onInput(e){const t=this.view.getHTMLElement();e&&!this.domNode.parentElement?t.append(this.domNode):!e&&this.domNode.parentElement&&(this.domNode.remove(),this.tree.domFocus()),this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,r=>!Zh.isDefault(r.filterData));const n=this.tree.getFocus();if(n.length>0){const r=n[0];this.tree.getRelativeTop(r)===null&&this.tree.reveal(r,.5)}this.render(),e||(this.triggered=!1)}onDragStart(){const e=this.view.getHTMLElement(),{left:t}=Us(e),n=e.clientWidth,r=n/2,o=this.domNode.clientWidth,s=new Qe;let a=this.positionClassName;const u=()=>{switch(a){case"nw":this.domNode.style.top="4px",this.domNode.style.left="4px";break;case"ne":this.domNode.style.top="4px",this.domNode.style.left=`${n-o-6}px`;break}},d=f=>{f.preventDefault();const p=f.clientX-t;f.dataTransfer&&(f.dataTransfer.dropEffect="none"),p<r?a="nw":a="ne",u()},h=()=>{this.positionClassName=a,this.domNode.className=`monaco-list-type-filter ${this.positionClassName}`,this.domNode.style.top="",this.domNode.style.left="",oi(s)};u(),this.domNode.classList.remove(a),this.domNode.classList.add("dragging"),s.add(Kn(()=>this.domNode.classList.remove("dragging"))),s.add(qe(document,"dragover",f=>d(f))),s.add(qe(this.domNode,"dragend",()=>h())),Gg.CurrentDragAndDropData=new IMe("vscode-ui"),s.add(Kn(()=>Gg.CurrentDragAndDropData=void 0))}onDidSpliceModel(){!this._enabled||this.pattern.length===0||(this.tree.refilter(),this.render())}onDidChangeFilterOnType(){this.tree.updateOptions({filterOnType:this.filterOnTypeDomNode.checked}),this.tree.refilter(),this.tree.domFocus(),this.render(),this.updateFilterOnTypeTitleAndIcon()}updateFilterOnTypeTitleAndIcon(){this.filterOnType?(this.filterOnTypeDomNode.classList.remove(..._e.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.classList.add(..._e.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.title=C("disable filter on type","Disable Filter on Type")):(this.filterOnTypeDomNode.classList.remove(..._e.treeFilterOnTypeOn.classNamesArray),this.filterOnTypeDomNode.classList.add(..._e.treeFilterOnTypeOff.classNamesArray),this.filterOnTypeDomNode.title=C("enable filter on type","Enable Filter on Type"))}render(){const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&this.tree.options.filterOnType&&e?(this.messageDomNode.textContent=C("empty","No elements found"),this._empty=!0):(this.messageDomNode.innerText="",this._empty=!1),this.domNode.classList.toggle("no-matches",e),this.domNode.title=C("found","Matched {0} out of {1} elements",this.filter.matchCount,this.filter.totalCount),this.labelDomNode.textContent=this.pattern.length>16?"…"+this.pattern.substr(this.pattern.length-16):this.pattern,this._onDidChangeEmptyState.fire(this._empty)}shouldAllowFocus(e){return!this.enabled||!this.pattern||this.filterOnType||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Zh.isDefault(e.filterData)}dispose(){this._enabled&&(this.domNode.remove(),this.enabledDisposables.dispose(),this._enabled=!1,this.triggered=!1),this._onDidChangePattern.dispose(),oi(this.disposables)}}function _te(i){let e=z2.Unknown;return qQ(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=z2.Twistie:qQ(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")&&(e=z2.Element),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function g4(i,e){e(i),i.children.forEach(t=>g4(t,e))}class E6{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new be,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){var n;!(!((n=t)===null||n===void 0)&&n.__forceEvent)&&oc(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const u=this.createNodeSet(),d=h=>u.delete(h);t.forEach(h=>g4(h,d)),this.set([...u.values()]);return}const n=new Set,r=u=>n.add(this.identityProvider.getId(u.element).toString());t.forEach(u=>g4(u,r));const o=new Map,s=u=>o.set(this.identityProvider.getId(u.element).toString(),u);e.forEach(u=>g4(u,s));const a=[];for(const u of this.nodes){const d=this.identityProvider.getId(u.element).toString();if(!n.has(d))a.push(u);else{const f=o.get(d);f&&a.push(f)}}if(this.nodes.length>0&&a.length===0){const u=this.getFirstViewElementWithTrait();u&&a.push(u)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class nFe extends whe{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if(D0(e.browserEvent.target)||Hw(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,r=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let o=!1;if(typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,o&&!r&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e);if(t.collapsible){const s=this.tree.model,a=s.getNodeLocation(t),u=e.browserEvent.altKey;if(this.tree.setFocus([a]),s.setCollapsed(a,void 0,u),o&&r)return}super.onViewPointer(e)}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||super.onDoubleClick(e)}}class iFe extends xg{constructor(e,t,n,r,o,s,a,u){super(e,t,n,r,u),this.focusTrait=o,this.selectionTrait=s,this.anchorTrait=a}createMouseController(e){return new nFe(this,e.tree)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const r=[],o=[];let s;n.forEach((a,u)=>{this.focusTrait.has(a)&&r.push(e+u),this.selectionTrait.has(a)&&o.push(e+u),this.anchorTrait.has(a)&&(s=e+u)}),r.length>0&&super.setFocus(Eb([...super.getFocus(),...r])),o.length>0&&super.setSelection(Eb([...super.getSelection(),...o])),typeof s=="number"&&super.setAnchor(s)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(r=>this.element(r)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(r=>this.element(r)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Ehe{constructor(e,t,n,r,o={}){this._options=o,this.eventBufferer=new QK,this.disposables=new Qe,this._onWillRefilter=new be,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new be;const s=new Uq(n),a=new UQ,u=new UQ,d=new J4e(u.event);this.renderers=r.map(p=>new lO(p,()=>this.model,a.event,d,o));for(let p of this.renderers)this.disposables.add(p);let h;o.keyboardNavigationLabelProvider&&(h=new eFe(this,o.keyboardNavigationLabelProvider,o.filter),o=Object.assign(Object.assign({},o),{filter:h}),this.disposables.add(h)),this.focus=new E6(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new E6(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new E6(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new iFe(e,t,s,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},Q4e(()=>this.model,o)),{tree:this})),this.model=this.createModel(e,this.view,o),a.input=this.model.onDidChangeCollapseState;const f=Rt.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})});if(f(()=>null,null,this.disposables),u.input=Rt.chain(Rt.any(f,this.focus.onDidChange,this.selection.onDidChange)).debounce(()=>null,0).map(()=>{const p=new Set;for(const m of this.focus.getNodes())p.add(m);for(const m of this.selection.getNodes())p.add(m);return[...p.values()]}).event,o.keyboardSupport!==!1){const p=Rt.chain(this.view.onKeyDown).filter(m=>!D0(m.target)).map(m=>new yr(m));p.filter(m=>m.keyCode===15).on(this.onLeftArrow,this,this.disposables),p.filter(m=>m.keyCode===17).on(this.onRightArrow,this,this.disposables),p.filter(m=>m.keyCode===10).on(this.onSpace,this,this.disposables)}if(o.keyboardNavigationLabelProvider){const p=o.keyboardNavigationDelegate||vhe;this.typeFilterController=new tFe(this,this.model,this.view,h,p),this.focusNavigationFilter=m=>this.typeFilterController.shouldAllowFocus(m),this.disposables.add(this.typeFilterController)}this.styleElement=cc(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aO.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Rt.map(this.view.onMouseDblClick,_te)}get onPointer(){return Rt.map(this.view.onPointer,_te)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Rt.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(Object.assign(Object.assign({},this._options),{enableKeyboardNavigation:this._options.simpleKeyboardNavigation})),this.typeFilterController&&this.typeFilterController.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===aO.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);const r=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(r,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);const r=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(r,t,!0)}focusNext(e=1,t=!1,n,r=this.focusNavigationFilter){this.view.focusNext(e,t,n,r)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);n!==-1&&this.view.reveal(n,t)}getRelativeTop(e){const t=this.model.getListIndex(e);return t===-1?null:this.view.getRelativeTop(t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!0)){const s=this.model.getParentNodeLocation(r);if(!s)return;const a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n);if(!this.model.setCollapsed(r,!1)){if(!n.children.some(u=>u.visible))return;const[s]=this.view.getFocus(),a=s+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],r=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(r,void 0,o)}dispose(){oi(this.disposables),this.view.dispose()}}class jq{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Y4e(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(r,o){return n.sorter.compare(r.element,o.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=Jn.empty(),n={}){const r=this.getElementLocation(e);this._setChildren(r,this.preserveCollapseState(t),n)}_setChildren(e,t=Jn.empty(),n){const r=new Set,o=new Set,s=u=>{var d;if(u.element===null)return;const h=u;if(r.add(h.element),this.nodes.set(h.element,h),this.identityProvider){const f=this.identityProvider.getId(h.element).toString();o.add(f),this.nodesByIdentity.set(f,h)}(d=n.onDidCreateNode)===null||d===void 0||d.call(n,h)},a=u=>{var d;if(u.element===null)return;const h=u;if(r.has(h.element)||this.nodes.delete(h.element),this.identityProvider){const f=this.identityProvider.getId(h.element).toString();o.has(f)||this.nodesByIdentity.delete(f)}(d=n.onDidDeleteNode)===null||d===void 0||d.call(n,h)};this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},n),{onDidCreateNode:s,onDidDeleteNode:a}))}preserveCollapseState(e=Jn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Jn.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const s=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(s)}if(!n)return Object.assign(Object.assign({},t),{children:this.preserveCollapseState(t.children)});const r=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,o=typeof t.collapsed<"u"?t.collapsed:n.collapsed;return Object.assign(Object.assign({},t),{collapsible:r,collapsed:o,children:this.preserveCollapseState(t.children)})})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getElementLocation(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Xu(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),r=this.model.getParentNodeLocation(n);return this.model.getNode(r).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function p4(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:Jn.map(Jn.from(i.children),p4),collapsible:i.collapsible,collapsed:i.collapsed}}function m4(i){const e=[i.element],t=i.incompressible||!1;let n,r;for(;[r,n]=Jn.consume(Jn.from(i.children),2),!(r.length!==1||r[0].incompressible);)i=r[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:Jn.map(Jn.concat(r,n),m4),collapsible:i.collapsible,collapsed:i.collapsed}}function lz(i,e=0){let t;return e<i.element.elements.length-1?t=[lz(i,e+1)]:t=Jn.map(Jn.from(i.children),n=>lz(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function vte(i){return lz(i,0)}function xhe(i,e,t){return i.element===e?Object.assign(Object.assign({},i),{children:t}):Object.assign(Object.assign({},i),{children:Jn.map(Jn.from(i.children),n=>xhe(n,e,t))})}const rFe=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class oFe{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new jq(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=Jn.empty(),n){const r=n.diffIdentityProvider&&rFe(n.diffIdentityProvider);if(e===null){const m=Jn.map(t,this.enabled?m4:p4);this._setChildren(null,m,{diffIdentityProvider:r,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");const s=this.model.getNode(o),a=this.model.getParentNodeLocation(o),u=this.model.getNode(a),d=vte(s),h=xhe(d,e,t),f=(this.enabled?m4:p4)(h),p=u.children.map(m=>m===s?f:m);this._setChildren(u.element,p,{diffIdentityProvider:r,diffDepth:s.depth-u.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,r=Jn.map(n,vte),o=Jn.map(r,e?m4:p4);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const r=new Set,o=a=>{for(const u of a.element.elements)r.add(u),this.nodes.set(u,a.element)},s=a=>{for(const u of a.element.elements)r.has(u)||this.nodes.delete(u)};this.model.setChildren(e,t,Object.assign(Object.assign({},n),{onDidCreateNode:o,onDidDeleteNode:s}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const r=this.getCompressedNode(e);return this.model.setCollapsed(r,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Xu(this.user,`Tree element not found: ${e}`);return t}}const sFe=i=>i[i.length-1];class Kq{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new Kq(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}function aFe(i,e){return{splice(t,n,r){e.splice(t,n,r.map(o=>i.map(o)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function lFe(i,e){return Object.assign(Object.assign({},e),{identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}})}class uFe{constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||sFe;const r=o=>this.elementMapper(o.elements);this.nodeMapper=new $q(o=>new Kq(r,o)),this.model=new oFe(e,aFe(this.nodeMapper,t),lFe(r,n))}get onDidSplice(){return Rt.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Rt.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Rt.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}setChildren(e,t=Jn.empty(),n={}){this.model.setChildren(e,t,n)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var cFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o};class Gq extends Ehe{constructor(e,t,n,r,o={}){super(e,t,n,r,o)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=Jn.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new jq(e,t,n)}}class Dhe{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){const o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,r)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,r))}disposeElement(e,t,n,r){n.compressedTreeNode?this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(n.compressedTreeNode,t,n.data,r):this.renderer.disposeElement&&this.renderer.disposeElement(e,t,n.data,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}cFe([ko],Dhe.prototype,"compressedTreeNodeProvider",null);function dFe(i,e){return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}class Ihe extends Gq{constructor(e,t,n,r,o={}){const s=()=>this,a=r.map(u=>new Dhe(s,u));super(e,t,n,a,dFe(s,o))}setChildren(e,t=Jn.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new uFe(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}var bv=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function x6(i){return Object.assign(Object.assign({},i),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function uz(i,e){return e.parent?e.parent===i?!0:uz(i,e.parent):!1}function hFe(i,e){return i===e||uz(i,e)||uz(e,i)}class qq{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new qq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class fFe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(..._e.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._e.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function bte(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function Cte(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class gFe extends SM{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function D6(i){return i instanceof SM?new gFe(i):i}class pFe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart&&this.dnd.onDragStart(D6(e),t)}onDragOver(e,t,n,r,o=!0){return this.dnd.onDragOver(D6(e),t&&t.element,n,r)}drop(e,t,n,r){this.dnd.drop(D6(e),t&&t.element,n,r)}onDragEnd(e){this.dnd.onDragEnd&&this.dnd.onDragEnd(e)}}function khe(i){return i&&Object.assign(Object.assign({},i),{collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new pFe(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:i.accessibilityProvider&&Object.assign(Object.assign({},i.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!(!((t=i.accessibilityProvider)===null||t===void 0)&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))}),filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},i.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}),sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),additionalScrollHeight:i.additionalScrollHeight})}function cz(i,e){e(i),i.children.forEach(t=>cz(t,e))}class The{constructor(e,t,n,r,o,s={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new be,this._onDidChangeNodeSlowState=new be,this.nodeMapper=new $q(a=>new qq(a)),this.disposables=new Qe,this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.collapseByDefault=s.collapseByDefault,this.tree=this.createTree(e,t,n,r,s),this.root=x6({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return Rt.map(this.tree.onDidChangeFocus,bte)}get onDidChangeSelection(){return Rt.map(this.tree.onDidChangeSelection,bte)}get onMouseDblClick(){return Rt.map(this.tree.onMouseDblClick,Cte)}get onPointer(){return Rt.map(this.tree.onPointer,Cte)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,r,o){const s=new Uq(n),a=r.map(d=>new fFe(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),u=khe(o)||{};return new Gq(e,t,s,a,u)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return bv(this,void 0,void 0,function*(){this.refreshPromises.forEach(r=>r.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)})}_updateChildren(e=this.root.element,t=!0,n=!1,r,o){return bv(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Xu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event));const s=this.getDataNode(e);if(yield this.refreshAndRenderNode(s,t,r,o),n)try{this.tree.rerender(s)}catch{}})}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}expand(e,t=!1){return bv(this,void 0,void 0,function*(){if(typeof this.root.element>"u")throw new Xu(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const r=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(yield this.root.refreshPromise,yield Rt.toPromise(this._onDidRender.event)),r})}setSelection(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(r=>this.getDataNode(r));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Xu(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,n,r){return bv(this,void 0,void 0,function*(){yield this.refreshNode(e,t,n),this.render(e,n,r)})}refreshNode(e,t,n){return bv(this,void 0,void 0,function*(){let r;return this.subTreeRefreshPromises.forEach((o,s)=>{!r&&hFe(s,e)&&(r=o.then(()=>this.refreshNode(e,t,n)))}),r||this.doRefreshSubTree(e,t,n)})}doRefreshSubTree(e,t,n){return bv(this,void 0,void 0,function*(){let r;e.refreshPromise=new Promise(o=>r=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=yield this.doRefreshNode(e,t,n);e.stale=!1,yield cH.settled(o.map(s=>this.doRefreshSubTree(s,t,n)))}finally{r()}})}doRefreshNode(e,t,n){return bv(this,void 0,void 0,function*(){e.hasChildren=!!this.dataSource.hasChildren(e.element);let r;if(!e.hasChildren)r=Promise.resolve(Jn.empty());else{const o=p0(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},s=>null),r=this.doGetChildren(e).finally(()=>o.cancel())}try{const o=yield r;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),wg(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}})}doGetChildren(e){let t=this.refreshPromises.get(e);return t||(t=cs(()=>bv(this,void 0,void 0,function*(){const n=yield this.dataSource.getChildren(e.element);return this.processChildren(n)})),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(gn))}setChildren(e,t,n,r){const o=[...t];if(e.children.length===0&&o.length===0)return[];const s=new Map,a=new Map;for(const h of e.children)if(s.set(h.element,h),this.identityProvider){const f=this.tree.isCollapsed(h);a.set(h.id,{node:h,collapsed:f})}const u=[],d=o.map(h=>{const f=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const b=x6({element:h,parent:e,hasChildren:f});return f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(b.collapsedByDefault=!1,u.push(b)),b}const p=this.identityProvider.getId(h).toString(),m=a.get(p);if(m){const b=m.node;return s.delete(b.element),this.nodes.delete(b.element),this.nodes.set(h,b),b.element=h,b.hasChildren=f,n?m.collapsed?(b.children.forEach(L=>cz(L,S=>this.nodes.delete(S.element))),b.children.splice(0,b.children.length),b.stale=!0):u.push(b):f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(b.collapsedByDefault=!1,u.push(b)),b}const v=x6({element:h,parent:e,id:p,hasChildren:f});return r&&r.viewState.focus&&r.viewState.focus.indexOf(p)>-1&&r.focus.push(v),r&&r.viewState.selection&&r.viewState.selection.indexOf(p)>-1&&r.selection.push(v),r&&r.viewState.expanded&&r.viewState.expanded.indexOf(p)>-1?u.push(v):f&&this.collapseByDefault&&!this.collapseByDefault(h)&&(v.collapsedByDefault=!1,u.push(v)),v});for(const h of s.values())cz(h,f=>this.nodes.delete(f.element));for(const h of d)this.nodes.set(h.element,h);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&u.length===0&&(d[0].collapsedByDefault=!1,u.push(d[0])),u}render(e,t,n){const r=e.children.map(s=>this.asTreeElement(s,t)),o=n&&Object.assign(Object.assign({},n),{diffIdentityProvider:n.diffIdentityProvider&&{getId(s){return n.diffIdentityProvider.getId(s.element)}}});this.tree.setChildren(e===this.root?null:e,r,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:n=e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?Jn.map(e.children,r=>this.asTreeElement(r,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class Yq{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new Yq(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class mFe{constructor(e,t,n,r){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,r){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,r)}renderCompressedElements(e,t,n,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}renderTwistie(e,t){return e.slow?(t.classList.add(..._e.treeItemLoading.classNamesArray),!0):(t.classList.remove(..._e.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,n,r){this.renderer.disposeElement&&this.renderer.disposeElement(this.nodeMapper.map(e),t,n.templateData,r)}disposeCompressedElements(e,t,n,r){this.renderer.disposeCompressedElements&&this.renderer.disposeCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,r)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=oi(this.disposables)}}function _Fe(i){const e=i&&khe(i);return e&&Object.assign(Object.assign({},e),{keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}})})}class vFe extends The{constructor(e,t,n,r,o,s,a={}){super(e,t,n,o,s,a),this.compressionDelegate=r,this.compressibleNodeMapper=new $q(u=>new Yq(u)),this.filter=a.filter}createTree(e,t,n,r,o){const s=new Uq(n),a=r.map(d=>new mFe(d,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),u=_Fe(o)||{};return new Ihe(e,t,s,a,u)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const n=p=>this.identityProvider.getId(p).toString(),r=p=>{const m=new Set;for(const v of p){const b=this.tree.getCompressedTreeNode(v===this.root?null:v);if(b.element)for(const L of b.element.elements)m.add(n(L.element))}return m},o=r(this.tree.getSelection()),s=r(this.tree.getFocus());super.render(e,t);const a=this.getSelection();let u=!1;const d=this.getFocus();let h=!1;const f=p=>{const m=p.element;if(m)for(let v=0;v<m.elements.length;v++){const b=n(m.elements[v].element),L=m.elements[m.elements.length-1].element;o.has(b)&&a.indexOf(L)===-1&&(a.push(L),u=!0),s.has(b)&&d.indexOf(L)===-1&&(d.push(L),h=!0)}p.children.forEach(f)};f(this.tree.getCompressedTreeNode(e===this.root?null:e)),u&&this.setSelection(a),h&&this.setFocus(d)}processChildren(e){return this.filter&&(e=Jn.filter(e,t=>{const n=this.filter.filter(t,1),r=bFe(n);if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1})),super.processChildren(e)}}function bFe(i){return typeof i=="boolean"?i?1:0:zq(i)?sO(i.visibility):sO(i)}class CFe extends Ehe{constructor(e,t,n,r,o,s={}){super(e,t,n,r,s),this.user=e,this.dataSource=o,this.identityProvider=s.identityProvider}createModel(e,t,n){return new jq(e,t,n)}}const lB=new Dt("isWindows",As,C("isWindows","Whether the operating system is Windows")),wFe="inputFocus";var Dg=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Nn=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const wc=gi("listService");let dz=class{constructor(e){this._themeService=e,this.disposables=new Qe,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}get lastFocusedList(){return this._lastFocusedWidget}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)===null||t===void 0||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;const r=new yhe(cc(),"");this.disposables.add(Fb(r,this._themeService))}if(this.lists.some(r=>r.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),e.getHTMLElement()===document.activeElement&&this.setLastFocusedList(e),t0(e.onDidFocus(()=>this.setLastFocusedList(e)),Kn(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(r=>r!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}};dz=Dg([Nn(0,Er)],dz);const Nhe=new Dt("listFocus",!0),uB=new Dt("listSupportsMultiselect",!0),Ahe=_t.and(Nhe,_t.not(wFe)),Zq=new Dt("listHasSelectionOrFocus",!1),Xq=new Dt("listDoubleSelection",!1),Qq=new Dt("listMultiSelection",!1),cB=new Dt("listSelectionNavigation",!1),yFe=new Dt("treeElementCanCollapse",!1),SFe=new Dt("treeElementHasParent",!1),LFe=new Dt("treeElementCanExpand",!1),EFe=new Dt("treeElementHasChild",!1),Ohe="listAutomaticKeyboardNavigation";function dB(i,e){const t=i.createScoped(e.getHTMLElement());return Nhe.bindTo(t),t}const IC="workbench.list.multiSelectModifier",hz="workbench.list.openMode",ac="workbench.list.horizontalScrolling",P3="workbench.list.keyboardNavigation",Jq="workbench.list.automaticKeyboardNavigation",uO="workbench.tree.indent",F3="workbench.tree.renderIndentGuides",rf="workbench.list.smoothScrolling",hg="workbench.list.mouseWheelScrollSensitivity",fg="workbench.list.fastScrollSensitivity",B3="workbench.tree.expandMode";function gg(i){return i.getValue(IC)==="alt"}class xFe extends Oe{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=gg(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(IC)&&(this.useAltAsMultipleSelectionModifier=gg(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:bhe(e)}isSelectionRangeChangeEvent(e){return Che(e)}}function hB(i,e,t){var n;const r=new Qe;return[Object.assign(Object.assign({},i),{keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return t.mightProducePrintableCharacter(s)}},smoothScrolling:!!e.getValue(rf),mouseWheelScrollSensitivity:e.getValue(hg),fastScrollSensitivity:e.getValue(fg),multipleSelectionController:(n=i.multipleSelectionController)!==null&&n!==void 0?n:r.add(new xFe(e))}),r]}let fz=class extends xg{constructor(e,t,n,r,o,s,a,u,d,h){const f=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!d.getValue(ac),[p,m]=hB(o,d,h);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ih(u.getColorTheme(),sB)),p),{horizontalScrolling:f})),this.disposables.add(m),this.contextKeyService=dB(s,this),this.themeService=u,this.listSupportsMultiSelect=uB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),cB.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=Zq.bindTo(this.contextKeyService),this.listDoubleSelection=Xq.bindTo(this.contextKeyService),this.listMultiSelection=Qq.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=gg(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const b=this.getSelection(),L=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(b.length>0||L.length>0),this.listMultiSelection.set(b.length>1),this.listDoubleSelection.set(b.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const b=this.getSelection(),L=this.getFocus();this.listHasSelectionOrFocus.set(b.length>0||L.length>0)})),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(IC)&&(this._useAltAsMultipleSelectionModifier=gg(d));let L={};if(b.affectsConfiguration(ac)&&this.horizontalScrolling===void 0){const S=!!d.getValue(ac);L=Object.assign(Object.assign({},L),{horizontalScrolling:S})}if(b.affectsConfiguration(rf)){const S=!!d.getValue(rf);L=Object.assign(Object.assign({},L),{smoothScrolling:S})}if(b.affectsConfiguration(hg)){const S=d.getValue(hg);L=Object.assign(Object.assign({},L),{mouseWheelScrollSensitivity:S})}if(b.affectsConfiguration(fg)){const S=d.getValue(fg);L=Object.assign(Object.assign({},L),{fastScrollSensitivity:S})}Object.keys(L).length>0&&this.updateOptions(L)})),this.navigator=new Mhe(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Fb(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),super.dispose()}};fz=Dg([Nn(5,dn),Nn(6,wc),Nn(7,Er),Nn(8,nr),Nn(9,Sr)],fz);let wte=class extends z4e{constructor(e,t,n,r,o,s,a,u,d,h){const f=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!d.getValue(ac),[p,m]=hB(o,d,h);super(e,t,n,r,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ih(u.getColorTheme(),sB)),p),{horizontalScrolling:f})),this.disposables=new Qe,this.disposables.add(m),this.contextKeyService=dB(s,this),this.themeService=u,this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=uB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),cB.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=gg(d),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),o.overrideStyles&&this.updateStyles(o.overrideStyles),o.overrideStyles&&this.disposables.add(Fb(this,u,o.overrideStyles)),this.disposables.add(d.onDidChangeConfiguration(b=>{b.affectsConfiguration(IC)&&(this._useAltAsMultipleSelectionModifier=gg(d));let L={};if(b.affectsConfiguration(ac)&&this.horizontalScrolling===void 0){const S=!!d.getValue(ac);L=Object.assign(Object.assign({},L),{horizontalScrolling:S})}if(b.affectsConfiguration(rf)){const S=!!d.getValue(rf);L=Object.assign(Object.assign({},L),{smoothScrolling:S})}if(b.affectsConfiguration(hg)){const S=d.getValue(hg);L=Object.assign(Object.assign({},L),{mouseWheelScrollSensitivity:S})}if(b.affectsConfiguration(fg)){const S=d.getValue(fg);L=Object.assign(Object.assign({},L),{fastScrollSensitivity:S})}Object.keys(L).length>0&&this.updateOptions(L)})),this.navigator=new Mhe(this,Object.assign({configurationService:d},o)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Fb(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};wte=Dg([Nn(5,dn),Nn(6,wc),Nn(7,Er),Nn(8,nr),Nn(9,Sr)],wte);let yte=class extends aB{constructor(e,t,n,r,o,s,a,u,d,h,f){const p=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!h.getValue(ac),[m,v]=hB(s,h,f);super(e,t,n,r,o,Object.assign(Object.assign(Object.assign({keyboardSupport:!1},Ih(d.getColorTheme(),sB)),m),{horizontalScrolling:p})),this.disposables.add(v),this.contextKeyService=dB(a,this),this.themeService=d,this.listSupportsMultiSelect=uB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),cB.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=Zq.bindTo(this.contextKeyService),this.listDoubleSelection=Xq.bindTo(this.contextKeyService),this.listMultiSelection=Qq.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=gg(h),this.disposables.add(this.contextKeyService),this.disposables.add(u.register(this)),s.overrideStyles&&this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const L=this.getSelection(),S=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(L.length>0||S.length>0),this.listMultiSelection.set(L.length>1),this.listDoubleSelection.set(L.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const L=this.getSelection(),S=this.getFocus();this.listHasSelectionOrFocus.set(L.length>0||S.length>0)})),this.disposables.add(h.onDidChangeConfiguration(L=>{L.affectsConfiguration(IC)&&(this._useAltAsMultipleSelectionModifier=gg(h));let S={};if(L.affectsConfiguration(ac)&&this.horizontalScrolling===void 0){const y=!!h.getValue(ac);S=Object.assign(Object.assign({},S),{horizontalScrolling:y})}if(L.affectsConfiguration(rf)){const y=!!h.getValue(rf);S=Object.assign(Object.assign({},S),{smoothScrolling:y})}if(L.affectsConfiguration(hg)){const y=h.getValue(hg);S=Object.assign(Object.assign({},S),{mouseWheelScrollSensitivity:y})}if(L.affectsConfiguration(fg)){const y=h.getValue(fg);S=Object.assign(Object.assign({},S),{fastScrollSensitivity:y})}Object.keys(S).length>0&&this.updateOptions(S)})),this.navigator=new DFe(this,Object.assign({configurationService:h},s)),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){var t;(t=this._styler)===null||t===void 0||t.dispose(),this._styler=Fb(this,this.themeService,e)}dispose(){var e;(e=this._styler)===null||e===void 0||e.dispose(),this.disposables.dispose(),super.dispose()}};yte=Dg([Nn(6,dn),Nn(7,wc),Nn(8,Er),Nn(9,nr),Nn(10,Sr)],yte);class eY extends Oe{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new be),this.onDidOpen=this._onDidOpen.event,this._register(Rt.filter(this.widget.onDidChangeSelection,r=>r.browserEvent instanceof KeyboardEvent)(r=>this.onSelectionFromKeyboard(r))),this._register(this.widget.onPointer(r=>this.onPointer(r.element,r.browserEvent))),this._register(this.widget.onMouseDblClick(r=>this.onMouseDblClick(r.element,r.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(hz))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(()=>{this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(hz))!=="doubleClick"}))):this.openOnSingleClick=(n=t==null?void 0:t.openOnSingleClick)!==null&&n!==void 0?n:!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,r=typeof t.pinned=="boolean"?t.pinned:!n,o=!1;this._open(this.getSelectedElement(),n,r,o,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const r=t.button===1,o=!0,s=r,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,s=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,s,a,t)}_open(e,t,n,r,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:r,element:e,browserEvent:o})}}class Mhe extends eY{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class DFe extends eY{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class IFe extends eY{constructor(e,t){super(e,t)}getSelectedElement(){var e;return(e=this.widget.getSelection()[0])!==null&&e!==void 0?e:void 0}}function kFe(i,e){let t=!1;return n=>{if(t)return t=!1,!1;const r=e.softDispatch(n,i);return r&&r.enterChord?(t=!0,!1):(t=!1,!0)}}let Ste=class extends Gq{constructor(e,t,n,r,o,s,a,u,d,h,f){const{options:p,getAutomaticKeyboardNavigation:m,disposable:v}=EM(t,o,s,d,h,f);super(e,t,n,r,p),this.disposables.add(v),this.internals=new Bb(this,o,m,o.overrideStyles,s,a,u,d,f),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Ste=Dg([Nn(5,dn),Nn(6,wc),Nn(7,Er),Nn(8,nr),Nn(9,Sr),Nn(10,il)],Ste);let Lte=class extends Ihe{constructor(e,t,n,r,o,s,a,u,d,h,f){const{options:p,getAutomaticKeyboardNavigation:m,disposable:v}=EM(t,o,s,d,h,f);super(e,t,n,r,p),this.disposables.add(v),this.internals=new Bb(this,o,m,o.overrideStyles,s,a,u,d,f),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Lte=Dg([Nn(5,dn),Nn(6,wc),Nn(7,Er),Nn(8,nr),Nn(9,Sr),Nn(10,il)],Lte);let Ete=class extends CFe{constructor(e,t,n,r,o,s,a,u,d,h,f,p){const{options:m,getAutomaticKeyboardNavigation:v,disposable:b}=EM(t,s,a,h,f,p);super(e,t,n,r,o,m),this.disposables.add(b),this.internals=new Bb(this,s,v,s.overrideStyles,a,u,d,h,p),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Ete=Dg([Nn(6,dn),Nn(7,wc),Nn(8,Er),Nn(9,nr),Nn(10,Sr),Nn(11,il)],Ete);let gz=class extends The{constructor(e,t,n,r,o,s,a,u,d,h,f,p){const{options:m,getAutomaticKeyboardNavigation:v,disposable:b}=EM(t,s,a,h,f,p);super(e,t,n,r,o,m),this.disposables.add(b),this.internals=new Bb(this,s,v,s.overrideStyles,a,u,d,h,p),this.disposables.add(this.internals)}get onDidOpen(){return this.internals.onDidOpen}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};gz=Dg([Nn(6,dn),Nn(7,wc),Nn(8,Er),Nn(9,nr),Nn(10,Sr),Nn(11,il)],gz);let xte=class extends vFe{constructor(e,t,n,r,o,s,a,u,d,h,f,p,m){const{options:v,getAutomaticKeyboardNavigation:b,disposable:L}=EM(t,a,u,f,p,m);super(e,t,n,r,o,s,v),this.disposables.add(L),this.internals=new Bb(this,a,b,a.overrideStyles,u,d,h,f,m),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};xte=Dg([Nn(7,dn),Nn(8,wc),Nn(9,Er),Nn(10,nr),Nn(11,Sr),Nn(12,il)],xte);function EM(i,e,t,n,r,o){var s;const a=()=>{let v=!!t.getContextKeyValue(Ohe);return v&&(v=!!n.getValue(Jq)),v},u=o.isScreenReaderOptimized(),d=e.simpleKeyboardNavigation||u?"simple":n.getValue(P3),h=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!n.getValue(ac),[f,p]=hB(e,n,r),m=e.additionalScrollHeight;return{getAutomaticKeyboardNavigation:a,disposable:p,options:Object.assign(Object.assign({keyboardSupport:!1},f),{indent:typeof n.getValue(uO)=="number"?n.getValue(uO):void 0,renderIndentGuides:n.getValue(F3),smoothScrolling:!!n.getValue(rf),automaticKeyboardNavigation:a(),simpleKeyboardNavigation:d==="simple",filterOnType:d==="filter",horizontalScrolling:h,keyboardNavigationEventFilter:kFe(i,r),additionalScrollHeight:m,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(s=e.expandOnlyOnTwistieClick)!==null&&s!==void 0?s:n.getValue(B3)==="doubleClick"})}}let Bb=class{constructor(e,t,n,r,o,s,a,u,d){this.tree=e,this.themeService=a,this.disposables=[],this.contextKeyService=dB(o,e),this.listSupportsMultiSelect=uB.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),cB.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.hasSelectionOrFocus=Zq.bindTo(this.contextKeyService),this.hasDoubleSelection=Xq.bindTo(this.contextKeyService),this.hasMultiSelection=Qq.bindTo(this.contextKeyService),this.treeElementCanCollapse=yFe.bindTo(this.contextKeyService),this.treeElementHasParent=SFe.bindTo(this.contextKeyService),this.treeElementCanExpand=LFe.bindTo(this.contextKeyService),this.treeElementHasChild=EFe.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=gg(u);const f=new Set;f.add(Ohe);const p=()=>{const b=d.isScreenReaderOptimized()?"simple":u.getValue(P3);e.updateOptions({simpleKeyboardNavigation:b==="simple",filterOnType:b==="filter"})};this.updateStyleOverrides(r);const m=()=>{const v=e.getFocus()[0];if(!v)return;const b=e.getNode(v);this.treeElementCanCollapse.set(b.collapsible&&!b.collapsed),this.treeElementHasParent.set(!!e.getParentElement(v)),this.treeElementCanExpand.set(b.collapsible&&b.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(v))};this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection(()=>{const v=e.getSelection(),b=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(v.length>0||b.length>0),this.hasMultiSelection.set(v.length>1),this.hasDoubleSelection.set(v.length===2)})}),e.onDidChangeFocus(()=>{const v=e.getSelection(),b=e.getFocus();this.hasSelectionOrFocus.set(v.length>0||b.length>0),m()}),e.onDidChangeCollapseState(m),e.onDidChangeModel(m),u.onDidChangeConfiguration(v=>{let b={};if(v.affectsConfiguration(IC)&&(this._useAltAsMultipleSelectionModifier=gg(u)),v.affectsConfiguration(uO)){const L=u.getValue(uO);b=Object.assign(Object.assign({},b),{indent:L})}if(v.affectsConfiguration(F3)){const L=u.getValue(F3);b=Object.assign(Object.assign({},b),{renderIndentGuides:L})}if(v.affectsConfiguration(rf)){const L=!!u.getValue(rf);b=Object.assign(Object.assign({},b),{smoothScrolling:L})}if(v.affectsConfiguration(P3)&&p(),v.affectsConfiguration(Jq)&&(b=Object.assign(Object.assign({},b),{automaticKeyboardNavigation:n()})),v.affectsConfiguration(ac)&&t.horizontalScrolling===void 0){const L=!!u.getValue(ac);b=Object.assign(Object.assign({},b),{horizontalScrolling:L})}if(v.affectsConfiguration(B3)&&t.expandOnlyOnTwistieClick===void 0&&(b=Object.assign(Object.assign({},b),{expandOnlyOnTwistieClick:u.getValue(B3)==="doubleClick"})),v.affectsConfiguration(hg)){const L=u.getValue(hg);b=Object.assign(Object.assign({},b),{mouseWheelScrollSensitivity:L})}if(v.affectsConfiguration(fg)){const L=u.getValue(fg);b=Object.assign(Object.assign({},b),{fastScrollSensitivity:L})}Object.keys(b).length>0&&e.updateOptions(b)}),this.contextKeyService.onDidChangeContext(v=>{v.affectsSome(f)&&e.updateOptions({automaticKeyboardNavigation:n()})}),d.onDidChangeScreenReaderOptimized(()=>p())),this.navigator=new IFe(e,Object.assign({configurationService:u},t)),this.disposables.push(this.navigator)}get onDidOpen(){return this.navigator.onDidOpen}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){oi(this.styler),this.styler=e?Fb(this.tree,this.themeService,e):Oe.None}dispose(){this.disposables=oi(this.disposables),oi(this.styler),this.styler=void 0}};Bb=Dg([Nn(4,dn),Nn(5,wc),Nn(6,Er),Nn(7,nr),Nn(8,il)],Bb);const TFe=Zr.as(wC.Configuration);TFe.registerConfiguration({id:"workbench",order:7,title:C("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[IC]:{type:"string",enum:["ctrlCmd","alt"],enumDescriptions:[C("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),C("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:C({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[hz]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[ac]:{type:"boolean",default:!1,description:C("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[uO]:{type:"number",default:8,minimum:0,maximum:40,description:C("tree indent setting","Controls tree indentation in pixels.")},[F3]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:C("render tree indent guides","Controls whether the tree should render indent guides.")},[rf]:{type:"boolean",default:!1,description:C("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[hg]:{type:"number",default:1,description:C("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[fg]:{type:"number",default:5,description:C("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[P3]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[C("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),C("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),C("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:C("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.")},[Jq]:{type:"boolean",default:!0,markdownDescription:C("automatic keyboard navigation setting","Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.")},[B3]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:C("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")}}});var Ir;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Ir||(Ir={}));(function(i){function e(s,a){return a-s}i.compare=e;const t=Object.create(null);t[i.Error]=C("sev.error","Error"),t[i.Warning]=C("sev.warning","Warning"),t[i.Info]=C("sev.info","Info");function n(s){return t[s]||""}i.toString=n;function r(s){switch(s){case Ur.Error:return i.Error;case Ur.Warning:return i.Warning;case Ur.Info:return i.Info;case Ur.Ignore:return i.Hint}}i.fromSeverity=r;function o(s){switch(s){case i.Error:return Ur.Error;case i.Warning:return Ur.Warning;case i.Info:return Ur.Info;case i.Hint:return Ur.Ignore}}i.toSeverity=o})(Ir||(Ir={}));var W3;(function(i){const e="";function t(r){return n(r,!0)}i.makeKey=t;function n(r,o){let s=[e];return r.source?s.push(r.source.replace("¦","\\¦")):s.push(e),r.code?typeof r.code=="string"?s.push(r.code.replace("¦","\\¦")):s.push(r.code.value.replace("¦","\\¦")):s.push(e),r.severity!==void 0&&r.severity!==null?s.push(Ir.toString(r.severity)):s.push(e),r.message&&o?s.push(r.message.replace("¦","\\¦")):s.push(e),r.startLineNumber!==void 0&&r.startLineNumber!==null?s.push(r.startLineNumber.toString()):s.push(e),r.startColumn!==void 0&&r.startColumn!==null?s.push(r.startColumn.toString()):s.push(e),r.endLineNumber!==void 0&&r.endLineNumber!==null?s.push(r.endLineNumber.toString()):s.push(e),r.endColumn!==void 0&&r.endColumn!==null?s.push(r.endColumn.toString()):s.push(e),s.push(e),s.join("¦")}i.makeKeyOptionalMessage=n})(W3||(W3={}));const xM=gi("markerService");class NFe{constructor(){this._byResource=new ta,this._byOwner=new Map}set(e,t,n){let r=this._byResource.get(e);r||(r=new Map,this._byResource.set(e,r)),r.set(t,n);let o=this._byOwner.get(t);o||(o=new ta,this._byOwner.set(t,o)),o.set(e,n)}get(e,t){let n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,r=!1,o=this._byResource.get(e);o&&(n=o.delete(t));let s=this._byOwner.get(t);if(s&&(r=s.delete(e)),n!==r)throw new Error("illegal state");return n&&r}values(e){var t,n,r,o;return typeof e=="string"?(n=(t=this._byOwner.get(e))===null||t===void 0?void 0:t.values())!==null&&n!==void 0?n:Jn.empty():sn.isUri(e)?(o=(r=this._byResource.get(e))===null||r===void 0?void 0:r.values())!==null&&o!==void 0?o:Jn.empty():Jn.map(Jn.concat(...this._byOwner.values()),s=>s[1])}}class AFe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new ta,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const r=this._resourceStats(t);this._add(r),this._data.set(t,r)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(e.scheme===kn.inMemory||e.scheme===kn.walkThrough||e.scheme===kn.walkThroughSnippet)return t;for(const{severity:n}of this._service.read({resource:e}))n===Ir.Error?t.errors+=1:n===Ir.Warning?t.warnings+=1:n===Ir.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class E1{constructor(){this._onMarkerChanged=new DLe({delay:0,merge:E1._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new NFe,this._stats=new AFe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(Mue(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const r=[];for(const o of n){const s=E1._toMarker(e,t,o);s&&r.push(s)}this._data.set(t,e,r),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:r,severity:o,message:s,source:a,startLineNumber:u,startColumn:d,endLineNumber:h,endColumn:f,relatedInformation:p,tags:m}=n;if(s)return u=u>0?u:1,d=d>0?d:1,h=h>=u?h:u,f=f>0?f:d,{resource:t,owner:e,code:r,severity:o,message:s,source:a,startLineNumber:u,startColumn:d,endLineNumber:h,endColumn:f,relatedInformation:p,tags:m}}read(e=Object.create(null)){let{owner:t,resource:n,severities:r,take:o}=e;if((!o||o<0)&&(o=-1),t&&n){const s=this._data.get(n,t);if(s){const a=[];for(const u of s)if(E1._accept(u,r)){const d=a.push(u);if(o>0&&d===o)break}return a}else return[]}else if(!t&&!n){const s=[];for(let a of this._data.values())for(let u of a)if(E1._accept(u,r)){const d=s.push(u);if(o>0&&d===o)return s}return s}else{const s=this._data.values(n??t),a=[];for(const u of s)for(const d of u)if(E1._accept(d,r)){const h=a.push(d);if(o>0&&h===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new ta;for(let n of e)for(let r of n)t.set(r,!0);return Array.from(t.keys())}}var o2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},zw;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(zw||(zw={}));class cO extends Oe{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new be),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=zw.None,this.cache=new Map,this.flushDelayer=new HLe(cO.DEFAULT_FLUSH_DELAY),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;(t=e.changed)===null||t===void 0||t.forEach((r,o)=>this.accept(o,r)),(n=e.deleted)===null||n===void 0||n.forEach(r=>this.accept(r,void 0))}accept(e,t){if(this.state===zw.Closed)return;let n=!1;xu(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire(e)}get(e,t){const n=this.cache.get(e);return xu(n)?t:n}getBoolean(e,t){const n=this.get(e);return xu(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return xu(n)?t:parseInt(n,10)}set(e,t){return o2(this,void 0,void 0,function*(){if(this.state===zw.Closed)return;if(xu(t))return this.delete(e);const n=String(t);if(this.cache.get(e)!==n)return this.cache.set(e,n),this.pendingInserts.set(e,n),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}delete(e){return o2(this,void 0,void 0,function*(){if(!(this.state===zw.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire(e),this.doFlush()})}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}flushPending(){return o2(this,void 0,void 0,function*(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())===null||t===void 0||t()})})}doFlush(e){return o2(this,void 0,void 0,function*(){return this.flushDelayer.trigger(()=>this.flushPending(),e)})}dispose(){this.flushDelayer.dispose(),super.dispose()}}cO.DEFAULT_FLUSH_DELAY=100;class Dte{constructor(){this.onDidChangeItemsExternal=Rt.None,this.items=new Map}updateItems(e){return o2(this,void 0,void 0,function*(){e.insert&&e.insert.forEach((t,n)=>this.items.set(n,t)),e.delete&&e.delete.forEach(t=>this.items.delete(t))})}}const QR="__$__targetStorageMarker",Ig=gi("storageService");var V3;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(V3||(V3={}));class fB extends Oe{constructor(e={flushInterval:fB.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new bF),this._onDidChangeTarget=this._register(new bF),this._onWillSaveState=this._register(new be),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._globalKeyTargets=void 0}emitDidChangeValue(e,t){t===QR?(e===0?this._globalKeyTargets=void 0:e===1&&(this._workspaceKeyTargets=void 0),this._onDidChangeTarget.fire({scope:e})):this._onDidChangeValue.fire({scope:e,key:t,target:this.getKeyTargets(e)[t]})}get(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.get(e,n)}getBoolean(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getBoolean(e,n)}getNumber(e,t,n){var r;return(r=this.getStorage(t))===null||r===void 0?void 0:r.getNumber(e,n)}store(e,t,n,r){if(xu(t)){this.remove(e,n);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,r),(o=this.getStorage(n))===null||o===void 0||o.set(e,t)})}remove(e,t){this.withPausedEmitters(()=>{var n;this.updateKeyTarget(e,t,void 0),(n=this.getStorage(t))===null||n===void 0||n.delete(e)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){var r,o;const s=this.getKeyTargets(t);typeof n=="number"?s[e]!==n&&(s[e]=n,(r=this.getStorage(t))===null||r===void 0||r.set(QR,JSON.stringify(s))):typeof s[e]=="number"&&(delete s[e],(o=this.getStorage(t))===null||o===void 0||o.set(QR,JSON.stringify(s)))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get globalKeyTargets(){return this._globalKeyTargets||(this._globalKeyTargets=this.loadKeyTargets(0)),this._globalKeyTargets}getKeyTargets(e){return e===0?this.globalKeyTargets:this.workspaceKeyTargets}loadKeyTargets(e){const t=this.get(QR,e);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}}fB.DEFAULT_FLUSH_INTERVAL=60*1e3;class OFe extends fB{constructor(){super(),this.globalStorage=this._register(new cO(new Dte)),this.workspaceStorage=this._register(new cO(new Dte)),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.globalStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e)))}getStorage(e){return e===0?this.globalStorage:this.workspaceStorage}}var Rhe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},_4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let pz=class{constructor(e){this._commandService=e}createMenu(e,t,n){return new mz(e,Object.assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},n),this._commandService,t,this)}};pz=Rhe([_4(0,kr)],pz);let mz=class pw{constructor(e,t,n,r,o){this._id=e,this._options=t,this._commandService=n,this._contextKeyService=r,this._menuService=o,this._disposables=new Qe,this._menuGroups=[],this._contextKeys=new Set,this._build();const s=new er(()=>{this._build(),this._onDidChange.fire(this)},t.eventDebounceDelay);this._disposables.add(s),this._disposables.add(ia.onDidChangeMenu(d=>{d.has(e)&&s.schedule()}));const a=this._disposables.add(new Qe),u=()=>{const d=new er(()=>this._onDidChange.fire(this),t.eventDebounceDelay);a.add(d),a.add(r.onDidChangeContext(h=>{h.affectsSome(this._contextKeys)&&d.schedule()}))};this._onDidChange=new be({onFirstListenerAdd:u,onLastListenerRemove:a.clear.bind(a)}),this.onDidChange=this._onDidChange.event}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}_build(){this._menuGroups.length=0,this._contextKeys.clear();const e=ia.getMenuItems(this._id);let t;e.sort(pw._compareMenuItems);for(const n of e){const r=n.group||"";(!t||t[0]!==r)&&(t=[r,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(pw._fillInKbExprKeys(e.when,this._contextKeys),e2(e)){if(e.command.precondition&&pw._fillInKbExprKeys(e.command.precondition,this._contextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;pw._fillInKbExprKeys(t,this._contextKeys)}}else this._options.emitEventsForSubmenuChanges&&ia.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}getActions(e){const t=[];for(let n of this._menuGroups){const[r,o]=n,s=[];for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const u=e2(a)?new b0(a.command,a.alt,e,this._contextKeyService,this._commandService):new SG(a,this._menuService,this._contextKeyService,e);s.push(u)}s.length>0&&t.push([r,s])}return t}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}static _compareMenuItems(e,t){let n=e.group,r=t.group;if(n!==r){if(n){if(!r)return-1}else return 1;if(n==="navigation")return-1;if(r==="navigation")return 1;let a=n.localeCompare(r);if(a!==0)return a}let o=e.order||0,s=t.order||0;return o<s?-1:o>s?1:pw._compareTitles(e2(e)?e.command.title:e.title,e2(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,r=typeof t=="string"?t:t.original;return n.localeCompare(r)}};mz=Rhe([_4(2,kr),_4(3,dn),_4(4,bC)],mz);var MFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ite=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class RFe extends Oe{constructor(e){super(),this.model=e,this._markersData=new Map,this._register(Kn(()=>{this.model.deltaDecorations([...this._markersData.keys()],[]),this._markersData.clear()}))}update(e,t){const n=[...this._markersData.keys()];this._markersData.clear();const r=this.model.deltaDecorations(n,t);for(let o=0;o<r.length;o++)this._markersData.set(r[o],e[o]);return n.length!==0||r.length!==0}getMarker(e){return this._markersData.get(e.id)}}let _z=class extends Oe{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new be),this._markerDecorations=new ta,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new RFe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===kn.inMemory||e.uri.scheme===kn.internal||e.uri.scheme===kn.vscode)&&this._markerService&&this._markerService.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});let n=t.map(r=>({range:this._createDecorationRange(e.model,r),options:this._createDecorationOption(r)}));e.update(t,n)&&this._onDidChangeMarker.fire(e.model)}_createDecorationRange(e,t){let n=Q.lift(t);return t.severity===Ir.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),e.validateRange(n)}_createDecorationOption(e){let t,n,r,o,s;switch(e.severity){case Ir.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",r=0;break;case Ir.Warning:t="squiggly-warning",n=Lr(w2e),r=20,s={color:Lr(KIe),position:bl.Inline};break;case Ir.Info:t="squiggly-info",n=Lr(y2e),r=10;break;case Ir.Error:default:t="squiggly-error",n=Lr(C2e),r=30,s={color:Lr(jIe),position:bl.Inline};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Sl.Right},minimap:s,zIndex:r,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}};_z=MFe([Ite(0,Io),Ite(1,xM)],_z);var PFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},kte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let vz=class extends Oe{constructor(e,t){super(),this._contextKeyService=e,this._configurationService=t,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new be,this._accessibilityModeEnabledContext=vM.bindTo(this._contextKeyService);const n=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(n(),this._onDidChangeScreenReaderOptimized.fire())})),n(),this.onDidChangeScreenReaderOptimized(()=>n())}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}getAccessibilitySupport(){return this._accessibilitySupport}};vz=PFe([kte(0,dn),kte(1,nr)],vz);var JR=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class FFe{constructor(){this.mapTextToType=new Map,this.findText=""}writeText(e,t){return JR(this,void 0,void 0,function*(){if(t){this.mapTextToType.set(t,e);return}try{return yield navigator.clipboard.writeText(e)}catch(o){console.error(o)}const n=document.activeElement,r=document.body.appendChild(Ge("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=e,r.focus(),r.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(r)})}readText(e){return JR(this,void 0,void 0,function*(){if(e)return this.mapTextToType.get(e)||"";try{return yield navigator.clipboard.readText()}catch(t){return console.error(t),""}})}readFindText(){return JR(this,void 0,void 0,function*(){return this.findText})}writeFindText(e){return JR(this,void 0,void 0,function*(){this.findText=e})}}var BFe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Tte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},eP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function tP(i){return i.scheme===kn.file?i.fsPath:i.path}let Phe=0;class nP{constructor(e,t,n,r,o,s,a){this.id=++Phe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Nte{constructor(e,t){this.resourceLabel=e,this.reason=t}}class Ate{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,r]of this.elements)(r.reason===0?e:t).push(r.resourceLabel);let n=[];return e.length>0&&n.push(C({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(C({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class WFe{constructor(e,t,n,r,o,s,a){this.id=++Phe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=r,this.groupOrder=o,this.sourceId=s,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new Ate),this.removedResources.has(t)||this.removedResources.set(t,new Nte(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new Ate),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new Nte(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class Fhe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){let e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,r=this._past.length;n<r;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new qce(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,r=0,o=-1;for(let a=0,u=this._past.length;a<u;a++,r++){const d=this._past[a];n&&(r>=t||d.id!==e.elements[r])&&(n=!1,o=0),!n&&d.type===1&&d.removeResource(this.resourceLabel,this.strResource,0)}let s=-1;for(let a=this._future.length-1;a>=0;a--,r++){const u=this._future[a];n&&(r>=t||u.id!==e.elements[r])&&(n=!1,s=a),!n&&u.type===1&&u.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),s!==-1&&(this._future=this._future.slice(s+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class I6{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Bhe=new Fhe("","");Bhe.locked=!0;let H3=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);let t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=qy.None,n=Bf.None){if(e.type===0){const r=tP(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new nP(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const r=new Set,o=[],s=[];for(const a of e.resources){const u=tP(a),d=this.getUriComparisonKey(a);r.has(d)||(r.add(d),o.push(u),s.push(d))}o.length===1?this._pushElement(new nP(e,o[0],s[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new WFe(e,o,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const r=e.resourceLabels[t],o=e.strResources[t];let s;this._editStacks.has(o)?s=this._editStacks.get(o):(s=new Fhe(r,o),this._editStacks.set(o,s)),s.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const r=n.getClosestPastElement();return r?r.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const o of n){const s=tP(o.resource),a=this.getUriComparisonKey(o.resource),u=new nP(o,s,a,0,0,0,0);r.set(u.strResource,u)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,r)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),r=new Map;for(const o of n){const s=tP(o.resource),a=this.getUriComparisonKey(o.resource),u=new nP(o,s,a,0,0,0,0);r.set(u.strResource,u)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,r)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const r=this.getUriComparisonKey(e);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new qce(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestPastElement();s&&s.sourceId===e&&(!t||s.sourceOrder>t.sourceOrder)&&(t=s,n=r)}return[t,n]}canUndo(e){if(e instanceof Bf){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){gn(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,r,o){const s=this._acquireLocks(n);let a;try{a=t()}catch(u){return s(),r.dispose(),this._onError(u,e)}return a?a.then(()=>(s(),r.dispose(),o()),u=>(s(),r.dispose(),this._onError(u,e))):(s(),r.dispose(),o())}_invokeWorkspacePrepare(e){return eP(this,void 0,void 0,function*(){if(typeof e.actual.prepareUndoRedo>"u")return Oe.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?Oe.None:t})}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(Oe.None);const n=e.actual.prepareUndoRedo();return n?ZK(n)?t(n):n.then(r=>t(r)):t(Oe.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||Bhe);return new I6(t)}_tryToSplitAndUndo(e,t,n,r){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(r),new iP(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(r),new iP}_checkWorkspaceUndo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const s=[];for(const a of n.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,C({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const r=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,r,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,r,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const r=t.getSecondClosestPastElement();if(r&&r.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}_confirmAndExecuteWorkspaceUndo(e,t,n,r){return eP(this,void 0,void 0,function*(){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){const a=yield this._dialogService.show(Ur.Info,C("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),[C({key:"ok",comment:["{0} denotes a number that is > 1"]},"Undo in {0} Files",n.editStacks.length),C("nok","Undo this File"),C("cancel","Cancel")],{cancelId:2});if(a.choice===2)return;if(a.choice===1)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const u=this._checkWorkspaceUndo(e,t,n,!1);if(u)return u.returnValue;r=!0}let o;try{o=yield this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const s=this._checkWorkspaceUndo(e,t,n,!0);if(s)return o.dispose(),s.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,o,()=>this._continueUndoInGroup(t.groupId,r))})}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const r=C({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(r);return}return this._invokeResourcePrepare(t,r=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new I6([e]),r,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestPastElement();s&&s.groupId===e&&(!t||s.groupOrder>t.groupOrder)&&(t=s,n=r)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Bf){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const r=this._editStacks.get(e),o=r.getClosestPastElement();if(!o)return;if(o.groupId){const[a,u]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&u)return this._undo(u,t,n)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,n):this._resourceUndo(r,o,n)}finally{}}_confirmAndContinueUndo(e,t,n){return eP(this,void 0,void 0,function*(){if((yield this._dialogService.show(Ur.Info,C("confirmDifferentSource","Would you like to undo '{0}'?",n.label),[C("confirmDifferentSource.yes","Yes"),C("cancel","Cancel")],{cancelId:1})).choice!==1)return this._undo(e,t,!0)})}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestFutureElement();s&&s.sourceId===e&&(!t||s.sourceOrder<t.sourceOrder)&&(t=s,n=r)}return[t,n]}canRedo(e){if(e instanceof Bf){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,r){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(r),new iP(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(r),new iP}_checkWorkspaceRedo(e,t,n,r){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(r&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,C({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const s=[];for(const a of n.editStacks)a.locked&&s.push(a.resourceLabel);return s.length>0?this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,s.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,C({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),r=this._checkWorkspaceRedo(e,t,n,!1);return r?r.returnValue:this._executeWorkspaceRedo(e,t,n)}_executeWorkspaceRedo(e,t,n){return eP(this,void 0,void 0,function*(){let r;try{r=yield this._invokeWorkspacePrepare(t)}catch(s){return this._onError(s,t)}const o=this._checkWorkspaceRedo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const s of n.editStacks)s.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,r,()=>this._continueRedoInGroup(t.groupId))})}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=C({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new I6([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[r,o]of this._editStacks){const s=o.getClosestFutureElement();s&&s.groupId===e&&(!t||s.groupOrder<t.groupOrder)&&(t=s,n=r)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Bf){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[r,o]=this._findClosestRedoElementInGroup(n.groupId);if(n!==r&&o)return this._redo(o)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};H3=BFe([Tte(0,wM),Tte(1,fo)],H3);class iP{constructor(e){this.returnValue=e}}z0(gM,H3);const VFe=new RegExp(`(\\\\)?\\$\\((${ja.iconNameExpression}(?:${ja.iconModifierExpression})?)\\)`,"g");function ab(i){const e=new Array;let t,n=0,r=0;for(;(t=VFe.exec(i))!==null;){r=t.index||0,e.push(i.substring(n,r)),n=(t.index||0)+t[0].length;const[,o,s]=t;e.push(o?`$(${s})`:HFe({id:s}))}return n<i.length&&e.push(i.substring(n)),e}function HFe(i){const e=Ge("span");return e.classList.add(...ja.asClassNameArray(i)),e}const $Fe={buttonBackground:ye.fromHex("#0E639C"),buttonHoverBackground:ye.fromHex("#006BB3"),buttonForeground:ye.white};class Ote extends Oe{constructor(e,t){super(),this._onDidClick=this._register(new be),this.options=t||Object.create(null),Eg(this.options,$Fe,!1),this.buttonForeground=this.options.buttonForeground,this.buttonBackground=this.options.buttonBackground,this.buttonHoverBackground=this.options.buttonHoverBackground,this.buttonSecondaryForeground=this.options.buttonSecondaryForeground,this.buttonSecondaryBackground=this.options.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=this.options.buttonSecondaryHoverBackground,this.buttonBorder=this.options.buttonBorder,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),e.appendChild(this._element),this._register(Hi.addTarget(this._element)),[Ht.CLICK,lr.Tap].forEach(n=>{this._register(qe(this._element,n,r=>{if(!this.enabled){Ni.stop(r);return}this._onDidClick.fire(r)}))}),this._register(qe(this._element,Ht.KEY_DOWN,n=>{const r=new yr(n);let o=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(n),o=!0):r.equals(9)&&(this._element.blur(),o=!0),o&&Ni.stop(r,!0)})),this._register(qe(this._element,Ht.MOUSE_OVER,n=>{this._element.classList.contains("disabled")||this.setHoverBackground()})),this._register(qe(this._element,Ht.MOUSE_OUT,n=>{this.applyStyles()})),this.focusTracker=this._register(Vy(this._element)),this._register(this.focusTracker.onDidFocus(()=>this.setHoverBackground())),this._register(this.focusTracker.onDidBlur(()=>this.applyStyles())),this.applyStyles()}get onDidClick(){return this._onDidClick.event}setHoverBackground(){let e;this.options.secondary?e=this.buttonSecondaryHoverBackground?this.buttonSecondaryHoverBackground.toString():null:e=this.buttonHoverBackground?this.buttonHoverBackground.toString():null,e&&(this._element.style.backgroundColor=e)}style(e){this.buttonForeground=e.buttonForeground,this.buttonBackground=e.buttonBackground,this.buttonHoverBackground=e.buttonHoverBackground,this.buttonSecondaryForeground=e.buttonSecondaryForeground,this.buttonSecondaryBackground=e.buttonSecondaryBackground,this.buttonSecondaryHoverBackground=e.buttonSecondaryHoverBackground,this.buttonBorder=e.buttonBorder,this.applyStyles()}applyStyles(){if(this._element){let e,t;this.options.secondary?(t=this.buttonSecondaryForeground?this.buttonSecondaryForeground.toString():"",e=this.buttonSecondaryBackground?this.buttonSecondaryBackground.toString():""):(t=this.buttonForeground?this.buttonForeground.toString():"",e=this.buttonBackground?this.buttonBackground.toString():"");const n=this.buttonBorder?this.buttonBorder.toString():"";this._element.style.color=t,this._element.style.backgroundColor=e,this._element.style.borderWidth=n?"1px":"",this._element.style.borderStyle=n?"solid":"",this._element.style.borderColor=n}}get element(){return this._element}set label(e){this._element.classList.add("monaco-text-button"),this.options.supportIcons?_0(this._element,...ab(e)):this._element.textContent=e,typeof this.options.title=="string"?this._element.title=this.options.title:this.options.title&&(this._element.title=e)}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}const zFe={badgeBackground:ye.fromHex("#4D4D4D"),badgeForeground:ye.fromHex("#FFFFFF")};class bz{constructor(e,t){this.count=0,this.options=t||Object.create(null),Eg(this.options,zFe,!1),this.badgeBackground=this.options.badgeBackground,this.badgeForeground=this.options.badgeForeground,this.badgeBorder=this.options.badgeBorder,this.element=Be(e,Ge(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=ec(this.countFormat,this.count),this.element.title=ec(this.titleFormat,this.count),this.applyStyles()}style(e){this.badgeBackground=e.badgeBackground,this.badgeForeground=e.badgeForeground,this.badgeBorder=e.badgeBorder,this.applyStyles()}applyStyles(){if(this.element){const e=this.badgeBackground?this.badgeBackground.toString():"",t=this.badgeForeground?this.badgeForeground.toString():"",n=this.badgeBorder?this.badgeBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}}}const Mte="done",Rte="active",k6="infinite",Pte="discrete",UFe={progressBarBackground:ye.fromHex("#0E70C0")};class jFe extends Oe{constructor(e,t){super(),this.options=t||Object.create(null),Eg(this.options,UFe,!1),this.workedVal=0,this.progressBarBackground=this.options.progressBarBackground,this._register(this.showDelayedScheduler=new er(()=>Eu(this.element),0)),this.create(e)}create(e){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.element.appendChild(this.bit),this.applyStyles()}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(Rte,k6,Pte),this.workedVal=0,this.totalWork=void 0}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(Mte),this.element.classList.contains(k6)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(Pte,Mte),this.element.classList.add(Rte,k6),this}getContainer(){return this.element}style(e){this.progressBarBackground=e.progressBarBackground,this.applyStyles()}applyStyles(){if(this.bit){const e=this.progressBarBackground?this.progressBarBackground.toString():"";this.bit.style.backgroundColor=e}}}class tY{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const Whe=new tY("id#");const T6={},KFe=new tY("quick-input-button-icon-");function Cz(i){if(!i)return;let e;const t=i.dark.toString();return T6[t]?e=T6[t]:(e=KFe.nextId(),pH(`.${e}`,`background-image: ${yb(i.light||i.dark)}`),pH(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${yb(i.dark)}`),T6[t]=e),e}const GFe={ctrlCmd:!1,alt:!1};var dO;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(dO||(dO={}));var Sh;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(Sh||(Sh={}));function qFe(i,e={}){const t=nY(e);return t.textContent=i,t}function Vhe(i,e={}){const t=nY(e);return Hhe(t,ZFe(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function nY(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class YFe{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function Hhe(i,e,t,n){let r;if(e.type===2)r=document.createTextNode(e.content||"");else if(e.type===3)r=document.createElement("b");else if(e.type===4)r=document.createElement("i");else if(e.type===7&&n)r=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");o.href="#",t.disposables.add(ts(o,"click",s=>{t.callback(String(e.index),s)})),r=o}else e.type===8?r=document.createElement("br"):e.type===1&&(r=i);r&&i!==r&&i.appendChild(r),r&&Array.isArray(e.children)&&e.children.forEach(o=>{Hhe(r,o,t,n)})}function ZFe(i,e){const t={type:1,children:[]};let n=0,r=t;const o=[],s=new YFe(i);for(;!s.eos();){let a=s.next();const u=a==="\\"&&wz(s.peek(),e)!==0;if(u&&(a=s.next()),!u&&XFe(a,e)&&a===s.peek()){s.advance(),r.type===2&&(r=o.pop());const d=wz(a,e);if(r.type===d||r.type===5&&d===6)r=o.pop();else{const h={type:d,children:[]};d===5&&(h.index=n,n++),r.children.push(h),o.push(r),r=h}}else if(a===`
`)r.type===2&&(r=o.pop()),r.children.push({type:8});else if(r.type!==2){const d={type:2,content:a};r.children.push(d),o.push(r),r=d}else r.content+=a}return r.type===2&&(r=o.pop()),t}function XFe(i,e){return wz(i,e)!==0}function wz(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}class QFe{constructor(e,t=0,n=e.length,r=t-1){this.items=e,this.start=t,this.end=n,this.index=r}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class JFe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new QFe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const RN=Ge,e3e={inputBackground:ye.fromHex("#3C3C3C"),inputForeground:ye.fromHex("#CCCCCC"),inputValidationInfoBorder:ye.fromHex("#55AAFF"),inputValidationInfoBackground:ye.fromHex("#063B49"),inputValidationWarningBorder:ye.fromHex("#B89500"),inputValidationWarningBackground:ye.fromHex("#352A05"),inputValidationErrorBorder:ye.fromHex("#BE1100"),inputValidationErrorBackground:ye.fromHex("#5A1D1D")};class $he extends Vu{constructor(e,t,n){var r;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new be),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new be),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n||Object.create(null),Eg(this.options,e3e,!1),this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=(r=this.options.tooltip)!==null&&r!==void 0?r:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.inputBackground=this.options.inputBackground,this.inputForeground=this.options.inputForeground,this.inputBorder=this.options.inputBorder,this.inputValidationInfoBorder=this.options.inputValidationInfoBorder,this.inputValidationInfoBackground=this.options.inputValidationInfoBackground,this.inputValidationInfoForeground=this.options.inputValidationInfoForeground,this.inputValidationWarningBorder=this.options.inputValidationWarningBorder,this.inputValidationWarningBackground=this.options.inputValidationWarningBackground,this.inputValidationWarningForeground=this.options.inputValidationWarningForeground,this.inputValidationErrorBorder=this.options.inputValidationErrorBorder,this.inputValidationErrorBackground=this.options.inputValidationErrorBackground,this.inputValidationErrorForeground=this.options.inputValidationErrorForeground,this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Be(e,RN(".monaco-inputbox.idle"));let o=this.options.flexibleHeight?"textarea":"input",s=Be(this.element,RN(".ibwrapper"));if(this.input=Be(s,RN(o+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Be(s,RN("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new lq(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Be(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(d=>this.input.scrollTop=d.scrollTop));const a=this._register(new Ui(document,"selectionchange")),u=Rt.filter(a.event,()=>{const d=document.getSelection();return(d==null?void 0:d.anchorNode)===s});this._register(u(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this.ignoreGesture(this.input),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new cg(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:gH(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return document.activeElement===this.input}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}get width(){return Oc(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,r=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+r}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=n.border?`1px solid ${n.border}`:"",(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){switch(e){case 1:return{border:this.inputValidationInfoBorder,background:this.inputValidationInfoBackground,foreground:this.inputValidationInfoForeground};case 2:return{border:this.inputValidationWarningBorder,background:this.inputValidationWarningBackground,foreground:this.inputValidationWarningForeground};default:return{border:this.inputValidationErrorBorder,background:this.inputValidationErrorBackground,foreground:this.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Oc(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:r=>{if(!this.message)return null;e=Be(r,RN(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?Vhe(this.message.content,o):qFe(this.message.content,o);s.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background?a.background.toString():"",s.style.color=a.foreground?a.foreground.toString():"",s.style.border=a.border?`1px solid ${a.border}`:"",Be(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=C("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=C("alertWarningMessage","Warning: {0}",this.message.content):n=C("alertInfoMessage","Info: {0}",this.message.content),ks(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}style(e){this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){const e=this.inputBackground?this.inputBackground.toString():"",t=this.inputForeground?this.inputForeground.toString():"",n=this.inputBorder?this.inputBorder.toString():"";this.element.style.backgroundColor=e,this.element.style.color=t,this.input.style.backgroundColor="inherit",this.input.style.color=t,this.element.style.borderWidth=n?"1px":"",this.element.style.borderStyle=n?"solid":"",this.element.style.borderColor=n}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=gH(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,r=t.selectionEnd,o=t.value;n!==null&&r!==null&&(this.value=o.substr(0,n)+e+o.substr(r),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar&&this.actionbar.dispose(),super.dispose()}}class zhe extends $he{constructor(e,t,n){const r=C({key:"history.inputbox.hint",comment:["Text will be prefixed with ⇅ plus a single space, then used as a hint where input field keeps history"]},"for history"),o=` or ⇅ ${r}`,s=` (⇅ ${r})`;super(e,t,n),this.history=new JFe(n.history,100);const a=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(o)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const u=this.placeholder.endsWith(")")?o:s,d=this.placeholder+u;n.showPlaceholderOnFocus&&document.activeElement!==this.input?this.placeholder=d:this.setPlaceHolder(d)}};this.observer=new MutationObserver((u,d)=>{u.forEach(h=>{h.target.textContent||a()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>a()),this.onblur(this.input,()=>{const u=d=>{if(this.placeholder.endsWith(d)){const h=this.placeholder.slice(0,this.placeholder.length-d.length);return n.showPlaceholderOnFocus?this.placeholder=h:this.setPlaceHolder(h),!0}else return!1};u(s)||u(o)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(){this.value&&this.value!==this.getCurrentValue()&&this.history.add(this.value)}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),e&&(this.value=e,EF(this.value))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,EF(this.value))}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()||this.history.last()}}const t3e=Ge;class n3e extends Oe{constructor(e){super(),this.parent=e,this.onKeyDown=t=>qe(this.inputBox.inputElement,Ht.KEY_DOWN,n=>{t(new yr(n))}),this.onMouseDown=t=>qe(this.inputBox.inputElement,Ht.MOUSE_DOWN,n=>{t(new Ju(n))}),this.onDidChange=t=>this.inputBox.onDidChange(t),this.container=Be(this.parent,t3e(".quick-input-box")),this.inputBox=this._register(new $he(this.container,void 0))}get value(){return this.inputBox.value}set value(e){this.inputBox.value=e}select(e=null){this.inputBox.select(e)}isSelectionAtEnd(){return this.inputBox.isSelectionAtEnd()}get placeholder(){return this.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.inputBox.setPlaceHolder(e)}get ariaLabel(){return this.inputBox.getAriaLabel()}set ariaLabel(e){this.inputBox.setAriaLabel(e)}get password(){return this.inputBox.inputElement.type==="password"}set password(e){this.inputBox.inputElement.type=e?"password":"text"}setAttribute(e,t){this.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===Ur.Ignore?this.inputBox.hideMessage():this.inputBox.showMessage({type:e===Ur.Info?1:e===Ur.Warning?2:3,content:""})}stylesForType(e){return this.inputBox.stylesForType(e===Ur.Info?1:e===Ur.Warning?2:3)}setFocus(){this.inputBox.focus()}layout(){this.inputBox.layout()}style(e){this.inputBox.style(e)}}class Wb{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(n=t==null?void 0:t.supportIcons)!==null&&n!==void 0?n:!1,this.domNode=Be(e,Ge("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",r){e||(e=""),r&&(e=Wb.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&ed(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const s=this.text.substring(t,n.start);e.push(Ge("span",void 0,...this.supportIcons?ab(s):[s])),t=n.end}const r=this.text.substring(n.start,n.end),o=Ge("span.highlight",void 0,...this.supportIcons?ab(r):[r]);n.extraClasses&&o.classList.add(...n.extraClasses),e.push(o),t=n.end}if(t<this.text.length){const n=this.text.substring(t);e.push(Ge("span",void 0,...this.supportIcons?ab(n):[n]))}_0(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,r=0;return e.replace(/\r\n|\r|\n/g,(o,s)=>{r=o===`\r
`?-1:0,s+=n;for(const a of t)a.end<=s||(a.start>=s&&(a.start+=r),a.end>=s&&(a.end+=r));return n+=r,"⏎"})}}class Rp{constructor(e="",t=!1){var n,r,o;if(this.value=e,typeof this.value!="string")throw Kh("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(n=t.isTrusted)!==null&&n!==void 0?n:void 0,this.supportThemeIcons=(r=t.supportThemeIcons)!==null&&r!==void 0?r:!1,this.supportHtml=(o=t.supportHtml)!==null&&o!==void 0?o:!1)}appendText(e,t=0){return this.value+=i3e(this.supportThemeIcons?i4e(e):e).replace(/([ \t]+)/g,(n,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n```",this.value+=e,this.value+=`
`,this.value+=t,this.value+="\n```\n",this}}function hO(i){return Uhe(i)?!i.value:Array.isArray(i)?i.every(hO):!0}function Uhe(i){return i instanceof Rp?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function i3e(i){return i.replace(/[\\`*_{}[\]()#+\-!]/g,"\\$&")}function N6(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1")}function r3e(i){const e=[],t=i.split("|").map(r=>r.trim());i=t[0];const n=t[1];if(n){const r=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),s=r?r[1]:"",a=o?o[1]:"",u=isFinite(parseInt(a)),d=isFinite(parseInt(s));u&&e.push(`width="${a}"`),d&&e.push(`height="${s}"`)}return{href:i,dimensions:e}}var yz=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function o3e(i,e){dc(e)?i.title=e:e!=null&&e.markdownNotSupportedFallback?i.title=e.markdownNotSupportedFallback:i.removeAttribute("title")}class s3e{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}update(e,t){var n;return yz(this,void 0,void 0,function*(){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let r;if(e===void 0||dc(e)||e instanceof HTMLElement)r=e;else if(!kF(e.markdown))r=(n=e.markdown)!==null&&n!==void 0?n:e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(C("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new oa;const o=this._cancellationTokenSource.token;if(r=yield e.markdown(o),this.isDisposed||o.isCancellationRequested)return}this.show(r,t)})}show(e,t){const n=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,showPointer:this.hoverDelegate.placement==="element",hoverPosition:2,skipFadeInAnimation:!this.fadeInAnimation||!!n};this._hoverWidget=this.hoverDelegate.showHover(r,t)}n==null||n.dispose()}hasContent(e){return e?Uhe(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)===null||e===void 0?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)===null||e===void 0||e.dispose(),(t=this._cancellationTokenSource)===null||t===void 0||t.dispose(!0),this._cancellationTokenSource=void 0}}function a3e(i,e,t){let n,r;const o=(h,f)=>{var p;h&&(r==null||r.dispose(),r=void 0),f&&(n==null||n.dispose(),n=void 0),(p=i.onDidHideHover)===null||p===void 0||p.call(i)},s=(h,f,p)=>new Oa(()=>yz(this,void 0,void 0,function*(){(!r||r.isDisposed)&&(r=new s3e(i,p||e,h>0),yield r.update(t,f))}),h),a=()=>{if(n)return;const h=new Qe,f=v=>o(!1,v.fromElement===e);h.add(qe(e,Ht.MOUSE_LEAVE,f,!0));const p=()=>o(!0,!0);h.add(qe(e,Ht.MOUSE_DOWN,p,!0));const m={targetElements:[e],dispose:()=>{}};if(i.placement===void 0||i.placement==="mouse"){const v=b=>m.x=b.x+10;h.add(qe(e,Ht.MOUSE_MOVE,v,!0))}h.add(s(i.delay,!1,m)),n=h},u=qe(e,Ht.MOUSE_OVER,a,!0);return{show:h=>{o(!1,!0),s(0,h)},hide:()=>{o(!0,!0)},update:h=>yz(this,void 0,void 0,function*(){t=h,yield r==null?void 0:r.update(t)}),dispose:()=>{u.dispose(),o(!0,!0)}}}class A6{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class $3 extends Oe{constructor(e,t){super(),this.customHovers=new Map,this.domNode=this._register(new A6(Be(e,Ge(".monaco-icon-label")))),this.labelContainer=Be(this.domNode.element,Ge(".monaco-icon-label-container"));const n=Be(this.labelContainer,Ge("span.monaco-icon-name-container"));this.descriptionContainer=this._register(new A6(Be(this.labelContainer,Ge("span.monaco-icon-description-container")))),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=new c3e(n,!!t.supportIcons):this.nameNode=new l3e(n),t!=null&&t.supportDescriptionHighlights?this.descriptionNodeFactory=()=>new Wb(Be(this.descriptionContainer.element,Ge("span.label-description")),{supportIcons:!!t.supportIcons}):this.descriptionNodeFactory=()=>this._register(new A6(Be(this.descriptionContainer.element,Ge("span.label-description")))),this.hoverDelegate=t==null?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){const r=["monaco-icon-label"];n&&(n.extraClasses&&r.push(...n.extraClasses),n.italic&&r.push("italic"),n.strikethrough&&r.push("strikethrough")),this.domNode.className=r.join(" "),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),(t||this.descriptionNode)&&(this.descriptionNode||(this.descriptionNode=this.descriptionNodeFactory()),this.descriptionNode instanceof Wb?(this.descriptionNode.set(t||"",n?n.descriptionMatches:void 0),this.setupHover(this.descriptionNode.element,n==null?void 0:n.descriptionTitle)):(this.descriptionNode.textContent=t||"",this.setupHover(this.descriptionNode.element,(n==null?void 0:n.descriptionTitle)||""),this.descriptionNode.empty=!t))}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(!this.hoverDelegate)o3e(e,t);else{const r=a3e(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}}class l3e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ed(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Be(this.container,Ge("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const r=e[n],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;Be(this.container,Ge("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},r)),n<e.length-1&&Be(this.container,Ge("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function u3e(i,e,t){if(!t)return;let n=0;return i.map(r=>{const o={start:n,end:n+r.length},s=t.map(a=>Vs.intersect(o,a)).filter(a=>!Vs.isEmpty(a)).map(({start:a,end:u})=>({start:a-n,end:u-n}));return n=o.end+e.length,s})}class c3e{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&ed(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new Wb(Be(this.container,Ge("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",r=u3e(e,n,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const s=e[o],a=r?r[o]:void 0,u=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,d=Ge("a.label-name",{id:u,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});new Wb(Be(this.container,d),{supportIcons:this.supportIcons}).set(s,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&Be(d,Ge("span.label-separator",void 0,n))}}}}const rP=Ge;class iY{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=Be(e,rP(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&iY.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){let[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(Be(this.domNode,rP("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){$o(this.domNode),this.keyElements.clear()}renderPart(e,t,n){const r=Eq.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,r.ctrlKey,!!(n!=null&&n.ctrlKey),r.separator),t.shiftKey&&this.renderKey(e,r.shiftKey,!!(n!=null&&n.shiftKey),r.separator),t.altKey&&this.renderKey(e,r.altKey,!!(n!=null&&n.altKey),r.separator),t.metaKey&&this.renderKey(e,r.metaKey,!!(n!=null&&n.metaKey),r.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,r){Be(e,this.createKeyElement(t,n?".highlight":"")),r&&Be(e,rP("span.monaco-keybinding-key-separator",void 0,r))}renderUnbound(e){Be(e,this.createKeyElement(C("unbound","Unbound")))}createKeyElement(e,t=""){const n=rP("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),n}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=(e=this.labelBackground)===null||e===void 0?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&ed(e.firstPart,t.firstPart)&&ed(e.chordPart,t.chordPart)}}const Fte=new ny(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function d3e(i,e,t=!1){const n=i||"",r=e||"",o=Fte.value.collator.compare(n,r);return Fte.value.collatorIsNumeric&&o===0&&n!==r?n<r?-1:1:o}function h3e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),o=f3e(i,e,t);if(o)return o;const s=n.endsWith(t),a=r.endsWith(t);if(s!==a)return s?-1:1;const u=d3e(n,r);return u!==0?u:n.localeCompare(r)}function f3e(i,e,t){const n=i.toLowerCase(),r=e.toLowerCase(),o=n.startsWith(t),s=r.startsWith(t);if(o!==s)return o?-1:1;if(o&&s){if(n.length<r.length)return-1;if(n.length>r.length)return 1}return 0}var jhe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},g3e=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const yf=Ge;class p3e{constructor(e){this.hidden=!1,this._onChecked=new be,this.onChecked=this._onChecked.event,Object.assign(this,e)}get checked(){return!!this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire(e))}dispose(){this._onChecked.dispose()}}class DM{get templateId(){return DM.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Be(e,yf(".quick-input-list-entry"));const n=Be(t.entry,yf("label.quick-input-list-label"));t.toDisposeTemplate.push(ts(n,Ht.CLICK,d=>{t.checkbox.offsetParent||d.preventDefault()})),t.checkbox=Be(n,yf("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(ts(t.checkbox,Ht.CHANGE,d=>{t.element.checked=t.checkbox.checked}));const r=Be(n,yf(".quick-input-list-rows")),o=Be(r,yf(".quick-input-list-row")),s=Be(r,yf(".quick-input-list-row"));t.label=new $3(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0});const a=Be(o,yf(".quick-input-list-entry-keybinding"));t.keybinding=new iY(a,qu);const u=Be(s,yf(".quick-input-list-label-meta"));return t.detail=new $3(u,{supportHighlights:!0,supportIcons:!0}),t.separator=Be(t.entry,yf(".quick-input-list-separator")),t.actionBar=new cg(t.entry),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){n.toDisposeElement=oi(n.toDisposeElement),n.element=e,n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked(d=>n.checkbox.checked=d));const{labelHighlights:r,descriptionHighlights:o,detailHighlights:s}=e,a=Object.create(null);a.matches=r||[],a.descriptionTitle=e.saneDescription,a.descriptionMatches=o||[],a.extraClasses=e.item.iconClasses,a.italic=e.item.italic,a.strikethrough=e.item.strikethrough,n.label.setLabel(e.saneLabel,e.saneDescription,a),n.keybinding.set(e.item.keybinding),e.saneDetail&&n.detail.setLabel(e.saneDetail,void 0,{matches:s,title:e.saneDetail}),e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator),n.actionBar.clear();const u=e.item.buttons;u&&u.length?(n.actionBar.push(u.map((d,h)=>{let f=d.iconClass||(d.iconPath?Cz(d.iconPath):void 0);d.alwaysVisible&&(f=f?`${f} always-visible`:"always-visible");const p=new rc(`id-${h}`,"",f,!0,()=>g3e(this,void 0,void 0,function*(){e.fireButtonTriggered({button:d,item:e.item})}));return p.tooltip=d.tooltip||"",p}),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=oi(n.toDisposeElement)}disposeTemplate(e){e.toDisposeElement=oi(e.toDisposeElement),e.toDisposeTemplate=oi(e.toDisposeTemplate)}}DM.ID="listelement";class m3e{getHeight(e){return e.saneDetail?44:22}getTemplateId(e){return DM.ID}}var lo;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage"})(lo||(lo={}));class rY{constructor(e,t,n){this.parent=e,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnMeta=!0,this.sortByLabel=!0,this._onChangedAllVisibleChecked=new be,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new be,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new be,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new be,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new be,this.onButtonTriggered=this._onButtonTriggered.event,this._onKeyDown=new be,this.onKeyDown=this._onKeyDown.event,this._onLeave=new be,this.onLeave=this._onLeave.event,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Be(this.parent,yf(".quick-input-list"));const r=new m3e,o=new v3e;this.list=n.createList("QuickInput",this.container,r,[new DM],{identityProvider:{getId:s=>s.saneLabel},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:o}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown(s=>{const a=new yr(s);switch(a.keyCode){case 10:this.toggleCheckbox();break;case 31:(qn?s.metaKey:s.ctrlKey)&&this.list.setFocus(xa(this.list.length));break;case 16:const u=this.list.getFocus();u.length===1&&u[0]===0&&this._onLeave.fire();break;case 18:const d=this.list.getFocus();d.length===1&&d[0]===this.list.length-1&&this._onLeave.fire();break}this._onKeyDown.fire(a)})),this.disposables.push(this.list.onMouseDown(s=>{s.browserEvent.button!==2&&s.browserEvent.preventDefault()})),this.disposables.push(qe(this.container,Ht.CLICK,s=>{(s.x||s.y)&&this._onLeave.fire()})),this.disposables.push(this.list.onMouseMiddleClick(s=>{this._onLeave.fire()})),this.disposables.push(this.list.onContextMenu(s=>{typeof s.index=="number"&&(s.browserEvent.preventDefault(),this.list.setSelection([s.index]))})),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return Rt.map(this.list.onDidChangeFocus,e=>e.elements.map(t=>t.item))}get onDidChangeSelection(){return Rt.map(this.list.onDidChangeSelection,e=>({items:e.elements.map(t=>t.item),event:e.browserEvent}))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e,t=!0){for(let n=0,r=e.length;n<r;n++){const o=e[n];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,r=t.length;n<r;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach(t=>{t.hidden||(t.checked=e)})}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=oi(this.elementDisposables);const t=n=>this.fireButtonTriggered(n);this.inputElements=e,this.elements=e.reduce((n,r,o)=>{var s,a,u;if(r.type!=="separator"){const d=o&&e[o-1],h=r.label&&r.label.replace(/\r?\n/g," "),f=r.meta&&r.meta.replace(/\r?\n/g," "),p=r.description&&r.description.replace(/\r?\n/g," "),m=r.detail&&r.detail.replace(/\r?\n/g," "),v=r.ariaLabel||[h,p,m].map(b=>kEe(b)).filter(b=>!!b).join(", ");n.push(new p3e({index:o,item:r,saneLabel:h,saneMeta:f,saneAriaLabel:v,saneDescription:p,saneDetail:m,labelHighlights:(s=r.highlights)===null||s===void 0?void 0:s.label,descriptionHighlights:(a=r.highlights)===null||a===void 0?void 0:a.description,detailHighlights:(u=r.highlights)===null||u===void 0?void 0:u.detail,checked:!1,separator:d&&d.type==="separator"?d:void 0,fireButtonTriggered:t}))}return n},[]),this.elementDisposables.push(...this.elements),this.elementDisposables.push(...this.elements.map(n=>n.onChecked(()=>this.fireCheckedEvents()))),this.elementsToIndexes=this.elements.reduce((n,r,o)=>(n.set(r.item,o),n),new Map),this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map(e=>e.item)}setFocusedElements(e){if(this.list.setFocus(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t))),e.length>0){const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter(t=>this.elementsToIndexes.has(t)).map(t=>this.elementsToIndexes.get(t)))}getCheckedElements(){return this.elements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const n of this.elements)n.checked=t.has(n.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===lo.Next&&this.list.getFocus()[0]===this.list.length-1&&(e=lo.First),e===lo.Previous&&this.list.getFocus()[0]===0&&(e=lo.Last),e===lo.Second&&this.list.length<2&&(e=lo.First),e){case lo.First:this.list.focusFirst();break;case lo.Second:this.list.focusNth(1);break;case lo.Last:this.list.focusLast();break;case lo.Next:this.list.focusNext();break;case lo.Previous:this.list.focusPrevious();break;case lo.NextPage:this.list.focusNextPage();break;case lo.PreviousPage:this.list.focusPreviousPage();break}const t=this.list.getFocus()[0];typeof t=="number"&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}layout(e){this.list.getHTMLElement().style.maxHeight=e?`calc(${Math.floor(e/44)*44}px)`:"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this.elements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const r=n.index&&this.inputElements[n.index-1];n.separator=r&&r.type==="separator"?r:void 0});else{let n;this.elements.forEach(r=>{const o=this.matchOnLabel?ml(XR(e,ZR(r.saneLabel))):void 0,s=this.matchOnDescription?ml(XR(e,ZR(r.saneDescription||""))):void 0,a=this.matchOnDetail?ml(XR(e,ZR(r.saneDetail||""))):void 0,u=this.matchOnMeta?ml(XR(e,ZR(r.saneMeta||""))):void 0;if(o||s||a||u?(r.labelHighlights=o,r.descriptionHighlights=s,r.detailHighlights=a,r.hidden=!1):(r.labelHighlights=void 0,r.descriptionHighlights=void 0,r.detailHighlights=void 0,r.hidden=!r.item.alwaysShow),r.separator=void 0,!this.sortByLabel){const d=r.index&&this.inputElements[r.index-1];n=d&&d.type==="separator"?d:n,n&&!r.hidden&&(r.separator=n,n=void 0)}})}const t=this.elements.filter(n=>!n.hidden);if(this.sortByLabel&&e){const n=e.toLowerCase();t.sort((r,o)=>_3e(r,o,n))}return this.elementsToIndexes=t.reduce((n,r,o)=>(n.set(r.item,o),n),new Map),this.list.splice(0,this.list.length,t),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(t.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return this.container.style.display!=="none"}dispose(){this.elementDisposables=oi(this.elementDisposables),this.disposables=oi(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}style(e){this.list.style(e)}}jhe([ko],rY.prototype,"onDidChangeFocus",null);jhe([ko],rY.prototype,"onDidChangeSelection",null);function _3e(i,e,t){const n=i.labelHighlights||[],r=e.labelHighlights||[];return n.length&&!r.length?-1:!n.length&&r.length?1:n.length===0&&r.length===0?0:h3e(i.saneLabel,e.saneLabel,t)}class v3e{getWidgetAriaLabel(){return C("quickInput","Quick Input")}getAriaLabel(e){return e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(){return"option"}}var Bte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Cu=Ge,Sz={iconClass:_e.quickInputBack.classNames,tooltip:C("quickInput.back","Back"),handle:-1};class gB extends Oe{constructor(e){super(),this.ui=e,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=gB.noPromptMessage,this._severity=Ur.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new be),this.onDidHideEmitter=this._register(new be),this.onDisposeEmitter=this._register(new be),this.visibleDisposables=this._register(new Qe),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ig;this._ignoreFocusOut=e&&!ig,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=dO.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this.busy&&!this.busyDelay&&(this.busyDelay=new Oa,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this.buttons.filter(s=>s===Sz);this.ui.leftActionBar.push(r.map((s,a)=>{const u=new rc(`id-${a}`,"",s.iconClass||Cz(s.iconPath),!0,()=>Bte(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return u.tooltip=s.tooltip||"",u}),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this.buttons.filter(s=>s!==Sz);this.ui.rightActionBar.push(o.map((s,a)=>{const u=new rc(`id-${a}`,"",s.iconClass||Cz(s.iconPath),!0,()=>Bte(this,void 0,void 0,function*(){this.onDidTriggerButtonEmitter.fire(s)}));return u.tooltip=s.tooltip||"",u}),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,_0(this.ui.message,...ab(n))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?C("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Ur.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.paddingBottom="4px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.paddingBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}gB.noPromptMessage=C("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class fO extends gB{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new be),this.onWillAcceptEmitter=this._register(new be),this.onDidAcceptEmitter=this._register(new be),this.onDidCustomEmitter=this._register(new be),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?Sh.NONE:Sh.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new be),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new be),this.onDidTriggerItemButtonEmitter=this._register(new be),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e||"",this.update(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(e){this._autoFocusOnList=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?GFe:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(lo.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{if(e===this.value)return;this._value=e,this.ui.list.filter(this.filterValue(this.ui.inputBox.value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(e)})),this.visibleDisposables.add(this.ui.inputBox.onMouseDown(e=>{this.autoFocusOnList||this.ui.list.clearFocus()})),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown(e=>{switch(e.keyCode){case 18:this.ui.list.focus(lo.Next),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(lo.Previous):this.ui.list.focus(lo.Last),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 12:this.ui.list.focus(lo.NextPage),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 11:this.ui.list.focus(lo.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),Ni.stop(e,!0);break;case 17:if(!this._canAcceptInBackground||!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(lo.First),Ni.stop(e,!0));break;case 13:(e.ctrlKey||e.metaKey)&&!e.shiftKey&&!e.altKey&&(this.ui.list.focus(lo.Last),Ni.stop(e,!0));break}})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this.ui.list.onDidChangeFocus(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&oc(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&oc(e,this._selectedItems,(n,r)=>n===r)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(t instanceof MouseEvent&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&oc(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return qe(this.ui.container,Ht.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new yr(e),n=t.keyCode;this._quickNavigate.keybindings.some(s=>{const[a,u]=s.getParts();return u?!1:a.shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a.altKey&&n===6||a.ctrlKey&&n===5||a.metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",t&&!this.description);const n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!t,progressBar:!t,visibleCount:!0,count:this.canSelectMany,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");const r=this.ariaLabel||this.placeholder||fO.DEFAULT_ARIA_LABEL;if(this.ui.inputBox.ariaLabel!==r&&(this.ui.inputBox.ariaLabel=r),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case Sh.NONE:this._itemActivation=Sh.FIRST;break;case Sh.SECOND:this.ui.list.focus(lo.Second),this._itemActivation=Sh.FIRST;break;case Sh.LAST:this.ui.list.focus(lo.Last),this._itemActivation=Sh.FIRST;break;default:this.trySelectFirst();break}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(lo.First)),this.keepScrollPosition&&(this.scrollTop=e)}}fO.DEFAULT_ARIA_LABEL=C("quickInputBox.ariaLabel","Type to narrow down results.");class pB extends Oe{constructor(e){super(),this.options=e,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new be),this.onDidCustomEmitter=this._register(new be),this.onDidTriggerButtonEmitter=this._register(new be),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new be),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new be),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const e=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(qe(window,Ht.KEY_DOWN,e,!0)),this._register(qe(window,Ht.KEY_UP,e,!0)),this._register(qe(window,Ht.MOUSE_DOWN,e,!0))}getUI(){if(this.ui)return this.ui;const e=Be(this.parentElement,Cu(".quick-input-widget.show-file-icons"));e.tabIndex=-1,e.style.display="none";const t=cc(e),n=Be(e,Cu(".quick-input-titlebar")),r=this._register(new cg(n));r.domNode.classList.add("quick-input-left-action-bar");const o=Be(n,Cu(".quick-input-title")),s=this._register(new cg(n));s.domNode.classList.add("quick-input-right-action-bar");const a=Be(e,Cu(".quick-input-description")),u=Be(e,Cu(".quick-input-header")),d=Be(u,Cu("input.quick-input-check-all"));d.type="checkbox",this._register(ts(d,Ht.CHANGE,X=>{const $=d.checked;R.setAllVisibleChecked($)})),this._register(qe(d,Ht.CLICK,X=>{(X.x||X.y)&&m.setFocus()}));const h=Be(u,Cu(".quick-input-description")),f=Be(u,Cu(".quick-input-and-message")),p=Be(f,Cu(".quick-input-filter")),m=this._register(new n3e(p));m.setAttribute("aria-describedby",`${this.idPrefix}message`);const v=Be(p,Cu(".quick-input-visible-count"));v.setAttribute("aria-live","polite"),v.setAttribute("aria-atomic","true");const b=new bz(v,{countFormat:C({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),L=Be(p,Cu(".quick-input-count"));L.setAttribute("aria-live","polite");const S=new bz(L,{countFormat:C({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),y=Be(u,Cu(".quick-input-action")),E=new Ote(y);E.label=C("ok","OK"),this._register(E.onDidClick(X=>{this.onDidAcceptEmitter.fire()}));const A=Be(u,Cu(".quick-input-action")),N=new Ote(A);N.label=C("custom","Custom"),this._register(N.onDidClick(X=>{this.onDidCustomEmitter.fire()}));const V=Be(f,Cu(`#${this.idPrefix}message.quick-input-message`)),R=this._register(new rY(e,this.idPrefix+"list",this.options));this._register(R.onChangedAllVisibleChecked(X=>{d.checked=X})),this._register(R.onChangedVisibleCount(X=>{b.setCount(X)})),this._register(R.onChangedCheckedCount(X=>{S.setCount(X)})),this._register(R.onLeave(()=>{setTimeout(()=>{m.setFocus(),this.controller instanceof fO&&this.controller.canSelectMany&&R.clearFocus()},0)})),this._register(R.onDidChangeFocus(()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")}));const M=new jFe(e);M.getContainer().classList.add("quick-input-progress");const K=Vy(e);return this._register(K),this._register(qe(e,Ht.FOCUS,X=>{this.previousFocusElement=X.relatedTarget instanceof HTMLElement?X.relatedTarget:void 0},!0)),this._register(K.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(dO.Blur),this.previousFocusElement=void 0})),this._register(qe(e,Ht.FOCUS,X=>{m.setFocus()})),this._register(qe(e,Ht.KEY_DOWN,X=>{const $=new yr(X);switch($.keyCode){case 3:Ni.stop(X,!0),this.onDidAcceptEmitter.fire();break;case 9:Ni.stop(X,!0),this.hide(dO.Gesture);break;case 2:if(!$.altKey&&!$.ctrlKey&&!$.metaKey){const D=[".action-label.codicon"];e.classList.contains("show-checkboxes")?D.push("input"):D.push("input[type=text]"),this.getUI().list.isDisplayed()&&D.push(".monaco-list");const T=e.querySelectorAll(D.join(", "));$.shiftKey&&$.target===T[0]?(Ni.stop(X,!0),T[T.length-1].focus()):!$.shiftKey&&$.target===T[T.length-1]&&(Ni.stop(X,!0),T[0].focus())}break}})),this.ui={container:e,styleSheet:t,leftActionBar:r,titleBar:n,title:o,description1:a,description2:h,rightActionBar:s,checkAll:d,filterContainer:p,inputBox:m,visibleCountContainer:v,visibleCount:b,countContainer:L,count:S,okContainer:y,ok:E,message:V,customButtonContainer:A,customButton:N,list:R,progressBar:M,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:X=>this.show(X),hide:()=>this.hide(),setVisibilities:X=>this.setVisibilities(X),setComboboxAccessibility:X=>this.setComboboxAccessibility(X),setEnabled:X=>this.setEnabled(X),setContextKey:X=>this.options.setContextKey(X)},this.updateStyles(),this.ui}pick(e,t={},n=Vn.None){return new Promise((r,o)=>{let s=h=>{s=r,t.onKeyMods&&t.onKeyMods(a.keyMods),r(h)};if(n.isCancellationRequested){s(void 0);return}const a=this.createQuickPick();let u;const d=[a,a.onDidAccept(()=>{if(a.canSelectMany)s(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(s(h),a.hide())}}),a.onDidChangeActive(h=>{const f=h[0];f&&t.onDidFocus&&t.onDidFocus(f)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const f=h[0];f&&(s(f),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton(Object.assign(Object.assign({},h),{removeItem:()=>{const f=a.items.indexOf(h.item);if(f!==-1){const p=a.items.slice(),m=p.splice(f,1),v=a.activeItems.filter(L=>L!==m[0]),b=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=p,v&&(a.activeItems=v),a.keepScrollPosition=b}}}))),a.onDidChangeValue(h=>{u&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==u)&&(a.activeItems=[u])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{oi(d),s(void 0)})];a.title=t.title,a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.autoFocusOnList=t.autoFocusOnList===void 0||t.autoFocusOnList,a.quickNavigate=t.quickNavigate,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,f])=>{u=f,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(p=>p.type!=="separator"&&p.picked)),u&&(a.activeItems=[u])}),a.show(),Promise.resolve(e).then(void 0,h=>{o(h),a.hide()})})}createQuickPick(){const e=this.getUI();return new fO(e)}show(e){const t=this.getUI();this.onShowEmitter.fire();const n=this.controller;this.controller=e,n&&n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Ur.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),_0(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),t.inputBox.ariaLabel="";const r=this.options.backKeybindingLabel();Sz.tooltip=r?C("quickInput.backWithKeybinding","Back ({0})",r):C("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList[e.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(e){if(e!==this.comboboxAccessibility){const t=this.getUI();this.comboboxAccessibility=e,this.comboboxAccessibility?(t.inputBox.setAttribute("role","combobox"),t.inputBox.setAttribute("aria-haspopup","true"),t.inputBox.setAttribute("aria-autocomplete","list"),t.inputBox.setAttribute("aria-activedescendant",t.list.getActiveDescendant()||"")):(t.inputBox.removeAttribute("role"),t.inputBox.removeAttribute("aria-haspopup"),t.inputBox.removeAttribute("aria-autocomplete"),t.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.getAction().enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.getAction().enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t;const n=this.controller;if(n){const r=!(!((t=this.ui)===null||t===void 0)&&t.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!r){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=ml(o.parentElement);o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}n.didHide(e)}}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,pB.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,contrastBorder:r,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e?e.toString():"",this.ui.container.style.backgroundColor=t?t.toString():"",this.ui.container.style.color=n?n.toString():"",this.ui.container.style.border=r?`1px solid ${r}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const s=[];this.styles.list.pickerGroupBorder&&s.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&s.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&s.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&s.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&s.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),s.push("}"));const a=s.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}}pB.MAX_WIDTH=600;var Lz;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(Lz||(Lz={}));const G0={Quickaccess:"workbench.contributions.quickaccess"};let b3e=class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Kn(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return BS([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}};Zr.add(G0.Quickaccess,new b3e);const yc=gi("quickInputService");var C3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Wte=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Ez=class extends Oe{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=Zr.as(G0.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var r;const[o,s]=this.getOrInstantiateProvider(e),a=this.visibleQuickAccess,u=a==null?void 0:a.descriptor;if(a&&s&&u===s){e!==s.prefix&&!(n!=null&&n.preserveValue)&&(a.picker.value=e),this.adjustValueSelection(a.picker,s,n);return}if(s&&!(n!=null&&n.preserveValue)){let m;if(a&&u&&u!==s){const v=a.value.substr(u.prefix.length);v&&(m=`${s.prefix}${v}`)}if(!m){const v=o==null?void 0:o.defaultFilterValue;v===Lz.LAST?m=this.lastAcceptedPickerValues.get(s):typeof v=="string"&&(m=`${s.prefix}${v}`)}typeof m=="string"&&(e=m)}const d=new Qe,h=d.add(this.quickInputService.createQuickPick());h.value=e,this.adjustValueSelection(h,s,n),h.placeholder=s==null?void 0:s.placeholder,h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!a,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(r=n==null?void 0:n.itemActivation)!==null&&r!==void 0?r:Sh.SECOND),h.contextKey=s==null?void 0:s.contextKey,h.filterValue=m=>m.substring(s?s.prefix.length:0),s!=null&&s.placeholder&&(h.ariaLabel=s==null?void 0:s.placeholder);let f;t&&(f=new Hle,d.add(Np(h.onWillAccept)(m=>{m.veto(),h.hide()}))),d.add(this.registerPickerListeners(h,o,s,e));const p=d.add(new oa);if(o&&d.add(o.provide(h,p.token)),Np(h.onDidHide)(()=>{h.selectedItems.length===0&&p.cancel(),d.dispose(),f==null||f.complete(h.selectedItems.slice(0))}),h.show(),t)return f==null?void 0:f.p}adjustValueSelection(e,t,n){var r;let o;n!=null&&n.preserveValue?o=[e.value.length,e.value.length]:o=[(r=t==null?void 0:t.prefix.length)!==null&&r!==void 0?r:0,e.value.length],e.valueSelection=o}registerPickerListeners(e,t,n,r){const o=new Qe,s=this.visibleQuickAccess={picker:e,descriptor:n,value:r};return o.add(Kn(()=>{s===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(a=>{const[u]=this.getOrInstantiateProvider(a);u!==t?this.show(a,{preserveValue:!0}):s.value=a})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};Ez=C3e([Wte(0,yc),Wte(1,An)],Ez);var w3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},PN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let z3=class extends rxe{constructor(e,t,n,r,o){super(n),this.instantiationService=e,this.contextKeyService=t,this.accessibilityService=r,this.layoutService=o,this.contexts=new Map}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(Ez))),this._quickAccess}createController(e=this.layoutService,t){var n,r;const o={idPrefix:"quickInput_",container:e.container,ignoreFocusOut:()=>!1,isScreenReaderOptimized:()=>this.accessibilityService.isScreenReaderOptimized(),backKeybindingLabel:()=>{},setContextKey:a=>this.setContextKey(a),returnFocus:()=>e.focus(),createList:(a,u,d,h,f)=>this.instantiationService.createInstance(fz,a,u,d,h,f),styles:this.computeStyles()},s=this._register(new pB(Object.assign(Object.assign({},o),t)));return s.layout(e.dimension,(r=(n=e.offset)===null||n===void 0?void 0:n.top)!==null&&r!==void 0?r:0),this._register(e.onDidLayout(a=>{var u,d;return s.layout(a,(d=(u=e.offset)===null||u===void 0?void 0:u.top)!==null&&d!==void 0?d:0)})),this._register(s.onShow(()=>this.resetContextKeys())),this._register(s.onHide(()=>this.resetContextKeys())),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new Dt(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t&&t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t={},n=Vn.None){return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}updateStyles(){this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:Object.assign({},Ih(this.theme,{quickInputBackground:lJ,quickInputForeground:UDe,quickInputTitleBackground:jDe,contrastBorder:ho,widgetShadow:C0})),inputBox:Ih(this.theme,{inputForeground:TG,inputBackground:kG,inputBorder:NG,inputValidationInfoBackground:Zue,inputValidationInfoForeground:Xue,inputValidationInfoBorder:Que,inputValidationWarningBackground:Jue,inputValidationWarningForeground:ece,inputValidationWarningBorder:tce,inputValidationErrorBackground:nce,inputValidationErrorForeground:ice,inputValidationErrorBorder:rce}),countBadge:Ih(this.theme,{badgeBackground:x2,badgeForeground:D2,badgeBorder:ho}),button:Ih(this.theme,{buttonForeground:RDe,buttonBackground:IH,buttonHoverBackground:PDe,buttonBorder:ho}),progressBar:Ih(this.theme,{progressBarBackground:FDe}),keybindingLabel:Ih(this.theme,{keybindingLabelBackground:qDe,keybindingLabelForeground:YDe,keybindingLabelBorder:ZDe,keybindingLabelBottomBorder:XDe,keybindingLabelShadow:C0}),list:Ih(this.theme,{listBackground:lJ,listInactiveFocusForeground:MIe,listInactiveSelectionIconForeground:RIe,listInactiveFocusBackground:e4,listFocusOutline:Ja,listInactiveFocusOutline:Ja,pickerGroupBorder:GDe,pickerGroupForeground:KDe})}}};z3=w3e([PN(0,An),PN(1,dn),PN(2,Er),PN(3,il),PN(4,CM)],z3);var Khe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},x1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let xz=class extends z3{constructor(e,t,n,r,o,s){super(t,n,r,o,s),this.host=void 0;const a=nS.get(e);this.host={_serviceBrand:void 0,get container(){return a.widget.getDomNode()},get dimension(){return e.getLayoutInfo()},get onDidLayout(){return e.onDidLayoutChange},focus:()=>e.focus()}}createController(){return super.createController(this.host)}};xz=Khe([x1(1,An),x1(2,dn),x1(3,Er),x1(4,il),x1(5,CM)],xz);let Dz=class{constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(xz,e);this.mapEditorToService.set(e,t),Np(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get quickAccess(){return this.activeService.quickAccess}pick(e,t={},n=Vn.None){return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}};Dz=Khe([x1(0,An),x1(1,ki)],Dz);class nS{constructor(e){this.editor=e,this.widget=new mB(this.editor)}static get(e){return e.getContribution(nS.ID)}dispose(){this.widget.dispose()}}nS.ID="editor.controller.quickInput";class mB{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return mB.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}mB.ID="editor.contrib.quickInputWidget";Ti(nS.ID,nS);const Ghe=gi("workspaceTrustManagementService");var Ci;(function(i){const e=new KA;class t{constructor(u,d){this._serviceId=u,this._factory=d,this._value=null}get id(){return this._serviceId}get(u){if(!this._value){if(u&&(this._value=u[this._serviceId.toString()]),this._value||(this._value=this._factory(u)),!this._value)throw new Error("Service "+this._serviceId+" is missing!");e.set(this._serviceId,this._value)}return this._value}}i.LazyStaticService=t;let n=[];function r(a,u){let d=new t(a,u);return n.push(d),d}function o(a){let u=new KA;for(const[h,f]of yNe())u.set(h,f);for(let h in a)a.hasOwnProperty(h)&&u.set(gi(h),a[h]);n.forEach(h=>u.set(h.id,h.get(a)));let d=new O3(u,!0);return u.set(An,d),[u,d]}i.init=o,i.instantiationService=r(An,()=>new O3(e,!0));const s=new $de;i.configurationService=r(nr,()=>s),i.resourceConfigurationService=r(Iq,()=>new fRe(s)),i.resourcePropertiesService=r(Yde,()=>new r$(s)),i.contextService=r(Fde,()=>new eB),i.labelService=r(yM,()=>new mRe),i.telemetryService=r(yg,()=>new gRe),i.dialogService=r(wM,()=>new dRe),i.notificationService=r(fo,()=>new J8),i.markerService=r(xM,()=>new E1),i.modeService=r(Fs,a=>new rO),i.standaloneThemeService=r(K0,()=>new TPe),i.logService=r(Sg,()=>new cxe(new uxe)),i.undoRedoService=r(gM,a=>new H3(i.dialogService.get(a),i.notificationService.get(a))),i.languageConfigurationService=r(fM,a=>new i3(i.configurationService.get(a),i.modeService.get(a))),i.modelService=r(Io,a=>new k3(i.configurationService.get(a),i.resourcePropertiesService.get(a),i.standaloneThemeService.get(a),i.logService.get(a),i.undoRedoService.get(a),i.modeService.get(a),i.languageConfigurationService.get(a))),i.markerDecorationsService=r(dG,a=>new _z(i.modelService.get(a),i.markerService.get(a))),i.contextKeyService=r(dn,a=>new X$(i.configurationService.get(a))),i.codeEditorService=r(ki,a=>new x3(null,i.contextKeyService.get(a),i.standaloneThemeService.get(a))),i.editorProgressService=r(zp,()=>new Q8),i.storageService=r(Ig,()=>new OFe),i.editorWorkerService=r(Hu,a=>new G$(i.modelService.get(a),i.resourceConfigurationService.get(a),i.logService.get(a)))})(Ci||(Ci={}));class qhe extends Oe{constructor(e,t){super();const[n,r]=Ci.init(t);this._serviceCollection=n,this._instantiationService=r;const o=this.get(nr),s=this.get(fo),a=this.get(yg),u=this.get(Er),d=this.get(Sg),h=this.get(dn);let f=(L,S)=>{let y=null;return t&&(y=t[L.toString()]),y||(y=S()),this._serviceCollection.set(L,y),y};f(il,()=>new vz(h,o)),f(wc,()=>new dz(u));let p=f(kr,()=>new hRe(this._instantiationService)),m=f(Sr,()=>this._register(new Hde(h,p,a,s,d,e))),v=f(CM,()=>new zde(Ci.codeEditorService.get(ki),e));f(yc,()=>new Dz(r,Ci.codeEditorService.get(ki)));let b=f($p,()=>this._register(new oz(v)));f(j0,()=>new FFe),f(U0,()=>{const L=new rz(a,s,b,m,u);return L.configure({blockMouse:!1}),this._register(L)}),f(bC,()=>new pz(p)),f(Sq,()=>new pRe(Ci.modelService.get(Io))),f(Ghe,()=>new _Re)}get(e){let t=this._serviceCollection.get(e);if(!t)throw new Error("Missing service "+e);return t}set(e,t){this._serviceCollection.set(e,t)}has(e){return this._serviceCollection.has(e)}}var Vte=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const El=gi("openerService"),y3e=Object.freeze({_serviceBrand:void 0,registerOpener(){return Oe.None},registerValidator(){return Oe.None},registerExternalUriResolver(){return Oe.None},setDefaultExternalOpener(){},registerExternalOpener(){return Oe.None},open(){return Vte(this,void 0,void 0,function*(){return!1})},resolveExternalUri(i){return Vte(this,void 0,void 0,function*(){return{resolved:i,dispose(){}}})}});function Yhe(i,e){return sn.isUri(i)?JN(i.scheme,e):mG(i,e+":")}function Hte(i,...e){return e.some(t=>Yhe(i,t))}function Iz(i){let e=JSON.parse(i);return e=kz(e),e}function kz(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return sn.revive(i);case 2:return new RegExp(i.source,i.flags)}if(i instanceof A8||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=kz(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=kz(i[t],e+1))}return i}var U3;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(U3||(U3={}));var oY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},j3=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},D1=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let Tz=class{constructor(e){this._commandService=e}open(e,t){return D1(this,void 0,void 0,function*(){if(!Yhe(e,kn.command))return!1;if(!(t!=null&&t.allowCommands))return!0;typeof e=="string"&&(e=sn.parse(e));let n=[];try{n=Iz(decodeURIComponent(e.query))}catch{try{n=Iz(e.query)}catch{}}return Array.isArray(n)||(n=[n]),yield this._commandService.executeCommand(e.path,...n),!0})}};Tz=oY([j3(0,kr)],Tz);let Nz=class{constructor(e){this._editorService=e}open(e,t){return D1(this,void 0,void 0,function*(){typeof e=="string"&&(e=sn.parse(e));let n;const r=/^L?(\d+)(?:,(\d+))?/.exec(e.fragment);return r&&(n={startLineNumber:parseInt(r[1]),startColumn:r[2]?parseInt(r[2]):1},e=e.with({fragment:""})),e.scheme===kn.file&&(e=Gke(e)),yield this._editorService.openCodeEditor({resource:e,options:Object.assign({selection:n,context:t!=null&&t.fromUserGesture?U3.USER:U3.API},t==null?void 0:t.editorOptions)},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0})}};Nz=oY([j3(0,ki)],Nz);let K3=class{constructor(e,t){this._openers=new Tu,this._validators=new Tu,this._resolvers=new Tu,this._resolvedUriTargets=new ta(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new Tu,this._defaultExternalOpener={openExternal:n=>D1(this,void 0,void 0,function*(){return Hte(n,kn.http,kn.https)?sue(n):window.location.href=n,!0})},this._openers.push({open:(n,r)=>D1(this,void 0,void 0,function*(){return r!=null&&r.openExternal||Hte(n,kn.mailto,kn.http,kn.https,kn.vsls)?(yield this._doOpenExternal(n,r),!0):!1})}),this._openers.push(new Tz(t)),this._openers.push(new Nz(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}open(e,t){var n;return D1(this,void 0,void 0,function*(){const r=typeof e=="string"?sn.parse(e):e,o=(n=this._resolvedUriTargets.get(r))!==null&&n!==void 0?n:e;for(const s of this._validators)if(!(yield s.shouldOpen(o)))return!1;for(const s of this._openers)if(yield s.open(e,t))return!0;return!1})}resolveExternalUri(e,t){return D1(this,void 0,void 0,function*(){for(const n of this._resolvers)try{const r=yield n.resolveExternalUri(e,t);if(r)return this._resolvedUriTargets.has(r.resolved)||this._resolvedUriTargets.set(r.resolved,e),r}catch{}throw new Error("Could not resolve external URI: "+e.toString())})}_doOpenExternal(e,t){return D1(this,void 0,void 0,function*(){const n=typeof e=="string"?sn.parse(e):e;let r;try{r=(yield this.resolveExternalUri(n,t)).resolved}catch{r=n}let o;if(typeof e=="string"&&n.toString()===r.toString()?o=e:o=encodeURI(r.toString(!0)),t!=null&&t.allowContributedOpeners){const s=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(yield a.openExternal(o,{sourceUri:n,preferredOpenerId:s},Vn.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:n},Vn.None)})}dispose(){this._validators.clear()}};K3=oY([j3(0,ki),j3(1,kr)],K3);var S3e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},L3e=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let pg=class{constructor(){this.simpleEditorModelResolverService=null}initWorkspace(e){this._container=e,this._services=this.createStandaloneServices()}get container(){return this._container}get services(){return this._services}get commandService(){return this.services.get(kr)}mergeEditorServices(e){if(e){const t=this.services;for(const n in e)n&&t.get(n)&&e[n]&&t.set(n,e[n])}}create(e,t,n){const r=this.services;this.mergeEditorServices(n),r.has(Qa)||(this.simpleEditorModelResolverService=new L3(Ci.modelService.get()),r.set(Qa,this.simpleEditorModelResolverService));const o=new tO(e,t,r,r.get(An),r.get(ki),r.get(kr),r.get(dn),r.get(Sr),r.get($p),r.get(K0),r.get(fo),r.get(nr),r.get(il),r.get(Io),r.get(Fs));return this.simpleEditorModelResolverService&&this.simpleEditorModelResolverService.setEditor(o),o}createStandaloneServices(){const e=new qhe(this.container),t=e.get(An);e.has(El)||e.set(El,new K3(e.get(ki),e.get(kr)));const n=t.createInstance(z3),r=new zde(Ci.codeEditorService.get(ki),this.container);return e.set(CM,r),e.set(yc,n),e}};pg=S3e([ji(),L3e("design:paramtypes",[])],pg);const E3e=`${j5}-monaco-editor`;class sY extends he.PureComponent{constructor(e){super(e),this.monacoService=Ue.resolve(pg)}componentDidMount(){var e;const{options:t={},override:n,editorInstanceRef:r}=this.props;this.monacoInstance||(this.monacoInstance=(e=this.monacoService)===null||e===void 0?void 0:e.create(this.monacoDom,t,n),r==null||r(this.monacoInstance))}componentDidUpdate(e){const{onChangeEditorProps:t}=this.props;!wr.isEqual(e,this.props)&&(t==null||t(e,this.props))}render(){const{style:e}=this.props;let t={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return t=e?Object.assign(t,e):t,re.createElement("div",{style:t,className:E3e,ref:n=>{this.monacoDom=n}})}}const IM=Hn("scrollBar"),x3e=gt(IM,"wrapper"),aY=gt(IM,"container"),Zhe=gt(IM,"shadow"),_B=gt(IM,"track"),D3e=gt(IM,"thumb"),I3e=_n(aY,"horizontal"),k3e=_n(aY,"vertical"),T3e=_n(_B,"hidden"),N3e=_n(_B,"vertical"),A3e=_n(_B,"horizontal"),O3e=_n(Zhe,"hidden");var iS;(function(i){i.vertical="vertical",i.horizontal="horizontal"})(iS||(iS={}));function bh(i){return i===iS.vertical}function QC(i,e){const t=bh(i)?"height":"width";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}function oP(i,e){const t=bh(i)?"top":"left";if(!e)return t;const n=`${t.substring(0,1).toUpperCase()}${t.substring(1)}`;return`${e}${n}`}const GS=he.forwardRef(function({children:i,style:e,trackStyle:t,className:n,isShowShadow:r=!1,inactiveHidden:o=!0,direction:s=iS.vertical,onScroll:a,onScrollStart:u,onScrollEnd:d},h){const[f,p]=he.useState(.1),[m,v]=he.useState(!0),[b,L]=he.useState(!1),[S,y]=he.useState(!1),E=he.useRef(null),A=he.useRef(null),N=he.useRef(null),V=he.useRef(null),R=he.useRef({y:0,startOffset:0}),M=()=>{var Y;return((Y=A.current)===null||Y===void 0?void 0:Y[QC(s,"scroll")])||0},K=()=>{var Y;return((Y=E.current)===null||Y===void 0?void 0:Y[QC(s,"client")])||0},X=()=>{var Y;return((Y=E.current)===null||Y===void 0?void 0:Y[oP(s,"scroll")])||0},$=()=>{var Y;return((Y=N.current)===null||Y===void 0?void 0:Y.getBoundingClientRect()[QC(s)])||0},D=()=>{var Y;return((Y=V.current)===null||Y===void 0?void 0:Y.getBoundingClientRect()[QC(s)])||0},T=()=>{var Y;return((Y=V.current)===null||Y===void 0?void 0:Y[oP(s,"offset")])||0};he.useImperativeHandle(h,()=>{var Y;return{scrollTo:fe=>{if(F()&&typeof fe=="number"){const ne=fe/M()*$();U(fe),B(ne)}},scrollHeight:((Y=E.current)===null||Y===void 0?void 0:Y.scrollHeight)||0}}),he.useEffect(()=>{const Y=new ResizeObserver(fe=>{for(const ne of fe){const Ie=ne.contentRect[QC(s)],je=M();let dt=Ie/je;Number.isNaN(dt)&&(dt=1);const At=X(),Me=At/je*$();U(At),B(Me),p(dt>1?1:dt)}});return Y.observe(E.current),()=>{Y.disconnect()}},[]),he.useEffect(()=>{const Y=new ResizeObserver(fe=>{for(const ne of fe){const we=M(),je=K()/we;p(je>1?1:je)}});return Y.observe(A.current),()=>{Y.disconnect()}},[]),he.useEffect(()=>{var Y;let fe=0;function ne(we){if(!F())return;we.preventDefault();const Ie=X();fe?window.clearTimeout(fe):(u==null||u({scrollTop:Ie},we),L(!0)),fe=window.setTimeout(()=>{d==null||d({scrollTop:Ie},we),fe=0,L(!1)},150);const dt=5*(we[bh(s)?"deltaY":"deltaX"]/10),At=Ie/this[bh(s)?"scrollHeight":"scrollWidth"]*$();B(At),U(Ie+dt),a==null||a({scrollTop:Ie},we)}return(Y=E.current)===null||Y===void 0||Y.addEventListener("wheel",ne),()=>{var we;(we=E.current)===null||we===void 0||we.removeEventListener("wheel",ne)}},[]);const F=()=>M()>K(),B=Y=>{const fe=$(),ne=D();requestAnimationFrame(()=>{const we=oP(s);Y<=0?V.current.style[we]="0px":Y>=fe-ne?V.current.style[we]=`${fe-ne}px`:V.current.style[we]=`${Y}px`})},U=Y=>{requestAnimationFrame(()=>{var fe,ne,we;const Ie=oP(s);Y<=0?((fe=E.current)===null||fe===void 0||fe.scrollTo({[Ie]:0}),v(!0)):Y>=M()-$()?((ne=E.current)===null||ne===void 0||ne.scrollTo({[Ie]:M()}),v(!1)):((we=E.current)===null||we===void 0||we.scrollTo({[Ie]:Y}),v(!1))})},G=Y=>{if(Y.stopPropagation(),!F())return;const{y:fe,height:ne,x:we,width:Ie}=Y.target.getBoundingClientRect(),dt=D()/2,At=M(),st=Y[bh(s)?"clientY":"clientX"]-(bh(s)?fe:we)-dt,bt=st/(bh(s)?ne:Ie);u==null||u({scrollTop:X()},Y),U(At*bt),B(st),a==null||a({scrollTop:X()},Y),d==null||d({scrollTop:X()},Y)},Z=he.useCallback(Y=>{const ne=Y[bh(s)?"clientY":"clientX"]-R.current.y,we=R.current.startOffset,Ie=$(),je=we+ne,dt=je/Ie,At=M();U(At*dt),B(je),a==null||a({scrollTop:X()},Y)},[]),z=Y=>{F()&&(L(!0),u==null||u({scrollTop:X()},Y),R.current={y:Y[bh(s)?"clientY":"clientX"],startOffset:T()},document.body.style.userSelect="none",window.addEventListener("mouseup",fe=>{fe.stopPropagation(),fe.preventDefault(),L(!1),d==null||d({scrollTop:X()},fe),document.body.style.removeProperty("user-select"),window.removeEventListener("mousemove",Z)},{once:!0}),window.addEventListener("mousemove",Z,{passive:!1}))},O=he.useMemo(()=>{const Y=M(),fe=K();return Y<=fe?!0:!b&&!S},[b,S]);return re.createElement("div",{className:mn(x3e,n),ref:E,style:e,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},r&&re.createElement("div",{className:mn(Zhe,m&&O3e)}),re.createElement("div",{className:mn(aY,bh(s)?k3e:I3e),ref:A},i),re.createElement("div",{className:mn(_B,bh(s)?N3e:A3e,o&&O&&T3e),ref:N,onClick:G,style:t},re.createElement("div",{className:D3e,style:{[QC(s)]:`calc(100% * ${f})`},ref:V,onClick:Y=>Y.stopPropagation(),onMouseDown:z})))}),kg=Hn("search"),$te=gt(kg,"input"),M3e=gt(kg,"group"),R3e=gt(kg,"toolbar"),Xhe=gt(kg,"replace"),P3e=gt(kg,"target"),F3e=gt(Xhe,"button"),B3e=gt(kg,"base"),W3e=gt(kg,"info"),V3e=gt(kg,"warning"),H3e=gt(kg,"error");var yy;(function(i){i.info="info",i.warning="warning",i.error="error"})(yy||(yy={}));function v4(i){const{className:e,placeholder:t,toolbarData:n=[],onChange:r,value:o,info:s}=i,[a,u]=he.useState(!1),d=he.useRef(null),h=(L,S)=>{var y,E;(y=d.current)===null||y===void 0||y.focus(),(E=i.onToolbarClick)===null||E===void 0||E.call(i,S)},f=L=>{switch(L){case yy.info:return W3e;case yy.warning:return V3e;case yy.error:return H3e;default:return""}},p=()=>{u(!0)},m=()=>{u(!1)},v=L=>{if(d.current){d.current.style.height="24px";const y=d.current.scrollHeight/24,E=5;y>E?d.current.style.height=`${24*E}px`:d.current.style.height=`${d.current.scrollHeight}px`}r==null||r(L.target.value||"")},b=L=>{L.keyCode===13&&(r==null||r(L.target.value||""),L.preventDefault())};return re.createElement("div",{className:e},re.createElement("textarea",{ref:d,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",className:mn((s==null?void 0:s.text)&&f((s==null?void 0:s.type)||"")),value:o||"",placeholder:t,title:t,onKeyDown:b,onFocus:p,onBlur:m,onChange:v}),(s==null?void 0:s.text)&&a&&re.createElement("div",{className:mn(B3e,f(s.type))},s.text),re.createElement(eM,{className:R3e,data:n,onClick:h}))}function $3e({children:i}){return re.createElement("div",{className:M3e},i)}v4.Group=$3e;function Qhe(i){const{className:e="",style:t,placeholders:n=[],validationInfo:r,addons:o=[],values:s=[],onAddonClick:a,onButtonClick:u,onChange:d,onSearch:h}=i,[f="Search",p="Replace"]=n,[m,v]=o,[b,L]=s,[S,y]=he.useState(!1),E=()=>{y(!S),u==null||u(!S),h==null||h([b,L])},A=(M,K)=>{if(d){const X=K==="search"?[M,L]:[b,M];d(X),h==null||h(X)}},N=M=>{a==null||a(M),h==null||h([b,L])},R=(()=>{if(r)return typeof r=="string"?{type:yy.info,text:r}:r})();return re.createElement("div",{style:t,className:mn(kg,e)},re.createElement(dr,{className:F3e,type:S?"chevron-down":"chevron-right",onClick:E}),re.createElement(v4.Group,null,re.createElement(v4,{value:b,className:mn($te,P3e),info:R,placeholder:f,onChange:M=>A(M,"search"),toolbarData:m,onToolbarClick:N}),S&&re.createElement(v4,{value:L,className:mn($te,Xhe),placeholder:p,onChange:M=>A(M,"replace"),toolbarData:v,onToolbarClick:N})))}var z3e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const U3e={isOpen:!1,option:{name:"",value:"",description:""}},q0=Hn("select"),j3e=gt(q0,"container"),K3e=gt(q0,"options"),zte=gt(q0,"descriptor"),G3e=gt(q0,"input"),Ute=_n(q0,"active"),q3e=gt(q0,"arrow");class gO extends he.PureComponent{constructor(e){super(e),this.handleOnClickOption=t=>{const n=t.target,r=hR(n,"data-value"),o=hR(n,"data-name"),s=hR(n,"data-desc");if(o){const a={value:r,name:o,description:s};this.setState({option:a},()=>{var u,d;(d=(u=this.props).onSelect)===null||d===void 0||d.call(u,t,a),this.contextView.hide()})}},this.handleOnHoverOption=t=>{const n=t.target,r=hR(n,"data-desc"),o=this.contextView.view.querySelector("."+zte);if(o){const s=r||"None";o.innerHTML=s,o.setAttribute("title",s)}},this.handleOnClickSelect=t=>{const n=this.selectElm.current,{children:r}=this.props;if(n){const o=n==null?void 0:n.getBoundingClientRect();o.y=o.y+o.height,this.setState({isOpen:!0}),this.contextView.show(o,()=>re.createElement("div",{style:{width:o.width},className:mn(j3e,Ute),onMouseOver:this.handleOnHoverOption},re.createElement("div",{className:K3e},ZO(r,{onClick:this.handleOnClickOption})),re.createElement("div",{className:zte},"None")))}},this.contextView=NS({shadowOutline:!1}),this.state=this.getDefaultState(this.props),this.selectElm=re.createRef(),this.selectInput=re.createRef()}static getDerivedStateFromProps(e,t){return e.value!==t.value?{option:gO.getSelectOption(e)}:null}componentDidMount(){this.contextView.onHide(()=>{this.state.isOpen&&this.setState({isOpen:!1})})}componentWillUnmount(){this.contextView.dispose()}static getSelectOption(e){let t={};const n=e.value||e.defaultValue,r=he.Children.toArray(e.children);for(const o of r)if(he.isValidElement(o)){const s=o.props;if(s.value&&s.value===n){t=Object.assign(Object.assign({},s),{name:s.name||s.children});break}}return t}getDefaultState(e){return Object.assign(Object.assign({},U3e),{option:Object.assign({},gO.getSelectOption(e))})}render(){const{option:e,isOpen:t}=this.state,n=this.props,{className:r,placeholder:o,onSelect:s}=n,a=z3e(n,["className","placeholder","onSelect"]),d=mn(q0,r,t?Ute:"");return re.createElement("div",Object.assign({ref:this.selectElm,className:d},a),re.createElement("input",{onClick:this.handleOnClickSelect,ref:this.selectInput,autoComplete:"off",placeholder:o,className:G3e,value:e.name,readOnly:!0}),re.createElement("span",{className:q3e},re.createElement(dr,{type:"chevron-down"})))}}var Y3e=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Jhe=gt(q0,"option"),Z3e=_n(Jhe,"disabled");function efe(i){const{className:e,value:t,title:n,name:r,description:o,disabled:s,children:a,onClick:u}=i,d=Y3e(i,["className","value","title","name","description","disabled","children","onClick"]),h=mn(Jhe,e,s?Z3e:""),f=p=>{s||u==null||u(p)};return re.createElement("div",Object.assign({className:h,title:n,"data-name":r||a,"data-value":t,"data-desc":o,onClick:f},d),a)}var Az={exports:{}};(function(i,e){Object.defineProperty(e,"__esModule",{value:!0});function t(R){return typeof R=="object"&&!("toString"in R)?Object.prototype.toString.call(R).slice(8,-1):R}var n=typeof process=="object"&&!0;function r(R,M){if(!R)throw n?new Error("Invariant failed"):new Error(M())}e.invariant=r;var o=Object.prototype.hasOwnProperty,s=Array.prototype.splice,a=Object.prototype.toString;function u(R){return a.call(R).slice(8,-1)}var d=Object.assign||function(R,M){return h(M).forEach(function(K){o.call(M,K)&&(R[K]=M[K])}),R},h=typeof Object.getOwnPropertySymbols=="function"?function(R){return Object.keys(R).concat(Object.getOwnPropertySymbols(R))}:function(R){return Object.keys(R)};function f(R){return Array.isArray(R)?d(R.constructor(R.length),R):u(R)==="Map"?new Map(R):u(R)==="Set"?new Set(R):R&&typeof R=="object"?d(Object.create(Object.getPrototypeOf(R)),R):R}var p=function(){function R(){this.commands=d({},m),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(M,K){return M===K},this.update.newContext=function(){return new R().update}}return Object.defineProperty(R.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(M){this.update.isEquals=M},enumerable:!0,configurable:!0}),R.prototype.extend=function(M,K){this.commands[M]=K},R.prototype.update=function(M,K){var X=this,$=typeof K=="function"?{$apply:K}:K;Array.isArray(M)&&Array.isArray($)||r(!Array.isArray($),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),r(typeof $=="object"&&$!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(X.commands).join(", ")+".")});var D=M;return h($).forEach(function(T){if(o.call(X.commands,T)){var F=M===D;D=X.commands[T]($[T],D,$,M),F&&X.isEquals(D,M)&&(D=M)}else{var B=u(M)==="Map"?X.update(M.get(T),$[T]):X.update(M[T],$[T]),U=u(D)==="Map"?D.get(T):D[T];(!X.isEquals(B,U)||typeof B>"u"&&!o.call(M,T))&&(D===M&&(D=f(M)),u(D)==="Map"?D.set(T,B):D[T]=B)}}),D},R}();e.Context=p;var m={$push:function(R,M,K){return b(M,K,"$push"),R.length?M.concat(R):M},$unshift:function(R,M,K){return b(M,K,"$unshift"),R.length?R.concat(M):M},$splice:function(R,M,K,X){return S(M,K),R.forEach(function($){y($),M===X&&$.length&&(M=f(X)),s.apply(M,$)}),M},$set:function(R,M,K){return A(K),R},$toggle:function(R,M){L(R,"$toggle");var K=R.length?f(M):M;return R.forEach(function(X){K[X]=!M[X]}),K},$unset:function(R,M,K,X){return L(R,"$unset"),R.forEach(function($){Object.hasOwnProperty.call(M,$)&&(M===X&&(M=f(X)),delete M[$])}),M},$add:function(R,M,K,X){return V(M,"$add"),L(R,"$add"),u(M)==="Map"?R.forEach(function($){var D=$[0],T=$[1];M===X&&M.get(D)!==T&&(M=f(X)),M.set(D,T)}):R.forEach(function($){M===X&&!M.has($)&&(M=f(X)),M.add($)}),M},$remove:function(R,M,K,X){return V(M,"$remove"),L(R,"$remove"),R.forEach(function($){M===X&&M.has($)&&(M=f(X)),M.delete($)}),M},$merge:function(R,M,K,X){return N(M,R),h(R).forEach(function($){R[$]!==M[$]&&(M===X&&(M=f(X)),M[$]=R[$])}),M},$apply:function(R,M){return E(R),R(M)}},v=new p;e.isEquals=v.update.isEquals,e.extend=v.extend,e.default=v.update,e.default.default=i.exports=d(e.default,e);function b(R,M,K){r(Array.isArray(R),function(){return"update(): expected target of "+t(K)+" to be an array; got "+t(R)+"."}),L(M[K],K)}function L(R,M){r(Array.isArray(R),function(){return"update(): expected spec of "+t(M)+" to be an array; got "+t(R)+". Did you forget to wrap your parameter in an array?"})}function S(R,M){r(Array.isArray(R),function(){return"Expected $splice target to be an array; got "+t(R)}),y(M.$splice)}function y(R){r(Array.isArray(R),function(){return"update(): expected spec of $splice to be an array of arrays; got "+t(R)+". Did you forget to wrap your parameters in an array?"})}function E(R){r(typeof R=="function",function(){return"update(): expected spec of $apply to be a function; got "+t(R)+"."})}function A(R){r(Object.keys(R).length===1,function(){return"Cannot have more than one key in an object with $set"})}function N(R,M){r(M&&typeof M=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+t(M)}),r(R&&typeof R=="object",function(){return"update(): $merge expects a target of type 'object'; got "+t(R)})}function V(R,M){var K=u(R);r(K==="Map"||K==="Set",function(){return"update(): "+t(M)+" expects a target of type Set or Map; got "+t(K)})}})(Az,Az.exports);var X3e=Az.exports;const Q3e=Vp(X3e),tfe=he.createContext({dragDropManager:void 0});function kc(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var jte=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),O6=function(){return Math.random().toString(36).substring(7).split("").join(".")},Kte={INIT:"@@redux/INIT"+O6(),REPLACE:"@@redux/REPLACE"+O6(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+O6()}};function J3e(i){if(typeof i!="object"||i===null)return!1;for(var e=i;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function nfe(i,e,t){var n;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(kc(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(kc(1));return t(nfe)(i,e)}if(typeof i!="function")throw new Error(kc(2));var r=i,o=e,s=[],a=s,u=!1;function d(){a===s&&(a=s.slice())}function h(){if(u)throw new Error(kc(3));return o}function f(b){if(typeof b!="function")throw new Error(kc(4));if(u)throw new Error(kc(5));var L=!0;return d(),a.push(b),function(){if(L){if(u)throw new Error(kc(6));L=!1,d();var y=a.indexOf(b);a.splice(y,1),s=null}}}function p(b){if(!J3e(b))throw new Error(kc(7));if(typeof b.type>"u")throw new Error(kc(8));if(u)throw new Error(kc(9));try{u=!0,o=r(o,b)}finally{u=!1}for(var L=s=a,S=0;S<L.length;S++){var y=L[S];y()}return b}function m(b){if(typeof b!="function")throw new Error(kc(10));r=b,p({type:Kte.REPLACE})}function v(){var b,L=f;return b={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(kc(11));function E(){y.next&&y.next(h())}E();var A=L(E);return{unsubscribe:A}}},b[jte]=function(){return this},b}return p({type:Kte.INIT}),n={dispatch:p,subscribe:f,getState:h,replaceReducer:m},n[jte]=v,n}function bi(i,e,...t){if(e5e()&&e===void 0)throw new Error("invariant requires an error message argument");if(!i){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let r=0;n=new Error(e.replace(/%s/g,function(){return t[r++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function e5e(){return typeof process<"u"&&process.env.NODE_ENV==="production"}function t5e(i,e,t){return e.split(".").reduce((n,r)=>n&&n[r]?n[r]:t||null,i)}function n5e(i,e){return i.filter(t=>t!==e)}function ife(i){return typeof i=="object"}function i5e(i,e){const t=new Map,n=o=>{t.set(o,t.has(o)?t.get(o)+1:1)};i.forEach(n),e.forEach(n);const r=[];return t.forEach((o,s)=>{o===1&&r.push(s)}),r}function r5e(i,e){return i.filter(t=>e.indexOf(t)>-1)}const lY="dnd-core/INIT_COORDS",vB="dnd-core/BEGIN_DRAG",uY="dnd-core/PUBLISH_DRAG_SOURCE",bB="dnd-core/HOVER",CB="dnd-core/DROP",wB="dnd-core/END_DRAG";function Gte(i,e){return{type:lY,payload:{sourceClientOffset:e||null,clientOffset:i||null}}}const o5e={type:lY,payload:{clientOffset:null,sourceClientOffset:null}};function s5e(i){return function(t=[],n={publishSource:!0}){const{publishSource:r=!0,clientOffset:o,getSourceClientOffset:s}=n,a=i.getMonitor(),u=i.getRegistry();i.dispatch(Gte(o)),a5e(t,a,u);const d=c5e(t,a);if(d==null){i.dispatch(o5e);return}let h=null;if(o){if(!s)throw new Error("getSourceClientOffset must be defined");l5e(s),h=s(d)}i.dispatch(Gte(o,h));const p=u.getSource(d).beginDrag(a,d);if(p==null)return;u5e(p),u.pinSource(d);const m=u.getSourceType(d);return{type:vB,payload:{itemType:m,item:p,sourceId:d,clientOffset:o||null,sourceClientOffset:h||null,isSourcePublic:!!r}}}}function a5e(i,e,t){bi(!e.isDragging(),"Cannot call beginDrag while dragging."),i.forEach(function(n){bi(t.getSource(n),"Expected sourceIds to be registered.")})}function l5e(i){bi(typeof i=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function u5e(i){bi(ife(i),"Item must be an object.")}function c5e(i,e){let t=null;for(let n=i.length-1;n>=0;n--)if(e.canDragSource(i[n])){t=i[n];break}return t}function d5e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function h5e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){d5e(i,r,t[r])})}return i}function f5e(i){return function(t={}){const n=i.getMonitor(),r=i.getRegistry();g5e(n),_5e(n).forEach((s,a)=>{const u=p5e(s,a,r,n),d={type:CB,payload:{dropResult:h5e({},t,u)}};i.dispatch(d)})}}function g5e(i){bi(i.isDragging(),"Cannot call drop while not dragging."),bi(!i.didDrop(),"Cannot call drop twice during one drag operation.")}function p5e(i,e,t,n){const r=t.getTarget(i);let o=r?r.drop(n,i):void 0;return m5e(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function m5e(i){bi(typeof i>"u"||ife(i),"Drop result must either be an object or undefined.")}function _5e(i){const e=i.getTargetIds().filter(i.canDropOnTarget,i);return e.reverse(),e}function v5e(i){return function(){const t=i.getMonitor(),n=i.getRegistry();b5e(t);const r=t.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource()),{type:wB}}}function b5e(i){bi(i.isDragging(),"Cannot call endDrag while not dragging.")}function Oz(i,e){return e===null?i===null:Array.isArray(i)?i.some(t=>t===e):i===e}function C5e(i){return function(t,{clientOffset:n}={}){w5e(t);const r=t.slice(0),o=i.getMonitor(),s=i.getRegistry(),a=o.getItemType();return S5e(r,s,a),y5e(r,o,s),L5e(r,o,s),{type:bB,payload:{targetIds:r,clientOffset:n||null}}}}function w5e(i){bi(Array.isArray(i),"Expected targetIds to be an array.")}function y5e(i,e,t){bi(e.isDragging(),"Cannot call hover while not dragging."),bi(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<i.length;n++){const r=i[n];bi(i.lastIndexOf(r)===n,"Expected targetIds to be unique in the passed array.");const o=t.getTarget(r);bi(o,"Expected targetIds to be registered.")}}function S5e(i,e,t){for(let n=i.length-1;n>=0;n--){const r=i[n],o=e.getTargetType(r);Oz(o,t)||i.splice(n,1)}}function L5e(i,e,t){i.forEach(function(n){t.getTarget(n).hover(e,n)})}function E5e(i){return function(){if(i.getMonitor().isDragging())return{type:uY}}}function x5e(i){return{beginDrag:s5e(i),publishDragSource:E5e(i),hover:C5e(i),drop:f5e(i),endDrag:v5e(i)}}class D5e{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function n(o){return(...s)=>{const a=o.apply(e,s);typeof a<"u"&&t(a)}}const r=x5e(this);return Object.keys(r).reduce((o,s)=>{const a=r[s];return o[s]=n(a),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function I5e(i,e){return{x:i.x+e.x,y:i.y+e.y}}function rfe(i,e){return{x:i.x-e.x,y:i.y-e.y}}function k5e(i){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:n}=i;return!e||!t||!n?null:rfe(I5e(e,n),t)}function T5e(i){const{clientOffset:e,initialClientOffset:t}=i;return!e||!t?null:rfe(e,t)}const U2=[],cY=[];U2.__IS_NONE__=!0;cY.__IS_ALL__=!0;function N5e(i,e){return i===U2?!1:i===cY||typeof e>"u"?!0:r5e(e,i).length>0}class A5e{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;bi(typeof e=="function","listener must be a function."),bi(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let r=this.store.getState().stateId;const o=()=>{const s=this.store.getState(),a=s.stateId;try{a===r||a===r+1&&!N5e(s.dirtyHandlerIds,n)||e()}finally{r=a}};return this.store.subscribe(o)}subscribeToOffsetChange(e){bi(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const n=()=>{const r=this.store.getState().dragOffset;r!==t&&(t=r,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return bi(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(bi(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),r=this.getItemType();return Oz(n,r)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(bi(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),r=this.getItemType();return n!==r?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const r=this.registry.getTargetType(e),o=this.getItemType();if(o&&!Oz(r,o))return!1;const s=this.getTargetIds();if(!s.length)return!1;const a=s.indexOf(e);return n?a===s.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return k5e(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return T5e(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const qte=typeof global<"u"?global:self,ofe=qte.MutationObserver||qte.WebKitMutationObserver;function sfe(i){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),i()}}}function O5e(i){let e=1;const t=new ofe(i),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const M5e=typeof ofe=="function"?O5e:sfe;class R5e{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let n=0,r=e.length-this.index;n<r;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=M5e(this.flush),this.requestErrorThrow=sfe(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class P5e{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class F5e{create(e){const t=this.freeTasks,n=t.length?t.pop():new P5e(this.onError,r=>t[t.length]=r);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const afe=new R5e,B5e=new F5e(afe.registerPendingError);function W5e(i){afe.enqueueTask(B5e.create(i))}const dY="dnd-core/ADD_SOURCE",hY="dnd-core/ADD_TARGET",fY="dnd-core/REMOVE_SOURCE",yB="dnd-core/REMOVE_TARGET";function V5e(i){return{type:dY,payload:{sourceId:i}}}function H5e(i){return{type:hY,payload:{targetId:i}}}function $5e(i){return{type:fY,payload:{sourceId:i}}}function z5e(i){return{type:yB,payload:{targetId:i}}}function U5e(i){bi(typeof i.canDrag=="function","Expected canDrag to be a function."),bi(typeof i.beginDrag=="function","Expected beginDrag to be a function."),bi(typeof i.endDrag=="function","Expected endDrag to be a function.")}function j5e(i){bi(typeof i.canDrop=="function","Expected canDrop to be a function."),bi(typeof i.hover=="function","Expected hover to be a function."),bi(typeof i.drop=="function","Expected beginDrag to be a function.")}function Mz(i,e){if(e&&Array.isArray(i)){i.forEach(t=>Mz(t,!1));return}bi(typeof i=="string"||typeof i=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Hc;(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(Hc||(Hc={}));let K5e=0;function G5e(){return K5e++}function q5e(i){const e=G5e().toString();switch(i){case Hc.SOURCE:return`S${e}`;case Hc.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${i}`)}}function Yte(i){switch(i[0]){case"S":return Hc.SOURCE;case"T":return Hc.TARGET;default:throw new Error(`Cannot parse handler ID: ${i}`)}}function Zte(i,e){const t=i.entries();let n=!1;do{const{done:r,value:[,o]}=t.next();if(o===e)return!0;n=!!r}while(!n);return!1}class Y5e{addSource(e,t){Mz(e),U5e(t);const n=this.addHandler(Hc.SOURCE,e,t);return this.store.dispatch(V5e(n)),n}addTarget(e,t){Mz(e,!0),j5e(t);const n=this.addHandler(Hc.TARGET,e,t);return this.store.dispatch(H5e(n)),n}containsHandler(e){return Zte(this.dragSources,e)||Zte(this.dropTargets,e)}getSource(e,t=!1){return bi(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return bi(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return bi(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return bi(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Yte(e)===Hc.SOURCE}isTargetId(e){return Yte(e)===Hc.TARGET}removeSource(e){bi(this.getSource(e),"Expected an existing source."),this.store.dispatch($5e(e)),W5e(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){bi(this.getTarget(e),"Expected an existing target."),this.store.dispatch(z5e(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);bi(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){bi(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const r=q5e(e);return this.types.set(r,t),e===Hc.SOURCE?this.dragSources.set(r,n):e===Hc.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Z5e=(i,e)=>i===e;function X5e(i,e){return!i&&!e?!0:!i||!e?!1:i.x===e.x&&i.y===e.y}function Q5e(i,e,t=Z5e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;++n)if(!t(i[n],e[n]))return!1;return!0}function J5e(i=U2,e){switch(e.type){case bB:break;case dY:case hY:case yB:case fY:return U2;case vB:case uY:case wB:case CB:default:return cY}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,r=i5e(t,n);if(!(r.length>0||!Q5e(t,n)))return U2;const s=n[n.length-1],a=t[t.length-1];return s!==a&&(s&&r.push(s),a&&r.push(a)),r}function e8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function t8e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){e8e(i,r,t[r])})}return i}const Xte={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function n8e(i=Xte,e){const{payload:t}=e;switch(e.type){case lY:case vB:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case bB:return X5e(i.clientOffset,t.clientOffset)?i:t8e({},i,{clientOffset:t.clientOffset});case wB:case CB:return Xte;default:return i}}function i8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function JC(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){i8e(i,r,t[r])})}return i}const r8e={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function o8e(i=r8e,e){const{payload:t}=e;switch(e.type){case vB:return JC({},i,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case uY:return JC({},i,{isSourcePublic:!0});case bB:return JC({},i,{targetIds:t.targetIds});case yB:return i.targetIds.indexOf(t.targetId)===-1?i:JC({},i,{targetIds:n5e(i.targetIds,t.targetId)});case CB:return JC({},i,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case wB:return JC({},i,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return i}}function s8e(i=0,e){switch(e.type){case dY:case hY:return i+1;case fY:case yB:return i-1;default:return i}}function a8e(i=0){return i+1}function l8e(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function u8e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){l8e(i,r,t[r])})}return i}function c8e(i={},e){return{dirtyHandlerIds:J5e(i.dirtyHandlerIds,{type:e.type,payload:u8e({},e.payload,{prevTargetIds:t5e(i,"dragOperation.targetIds",[])})}),dragOffset:n8e(i.dragOffset,e),refCount:s8e(i.refCount,e),dragOperation:o8e(i.dragOperation,e),stateId:a8e(i.stateId)}}function d8e(i,e=void 0,t={},n=!1){const r=h8e(n),o=new A5e(r,new Y5e(r)),s=new D5e(r,o),a=i(s,e,t);return s.receiveBackend(a),s}function h8e(i){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return nfe(c8e,i&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function f8e(i,e){if(i==null)return{};var t=g8e(i,e),n,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(r=0;r<o.length;r++)n=o[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function g8e(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}let Qte=0;const b4=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var p8e=he.memo(function(e){var{children:t}=e,n=f8e(e,["children"]);const[r,o]=m8e(n);return he.useEffect(()=>{if(o){const s=lfe();return++Qte,()=>{--Qte===0&&(s[b4]=null)}}},[]),Fc.jsx(tfe.Provider,{value:r,children:t})});function m8e(i){if("manager"in i)return[{dragDropManager:i.manager},!1];const e=_8e(i.backend,i.context,i.options,i.debugMode),t=!i.context;return[e,t]}function _8e(i,e=lfe(),t,n){const r=e;return r[b4]||(r[b4]={dragDropManager:d8e(i,e,t,n)}),r[b4]}function lfe(){return typeof global<"u"?global:window}var v8e=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!i(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){var s=o[r];if(!i(e[s],t[s]))return!1}return!0}return e!==e&&t!==t};const b8e=Vp(v8e),Vb=typeof window<"u"?he.useLayoutEffect:he.useEffect;function C8e(i,e,t){const[n,r]=he.useState(()=>e(i)),o=he.useCallback(()=>{const s=e(i);b8e(n,s)||(r(s),t&&t())},[n,i,t]);return Vb(o),[n,o]}function w8e(i,e,t){const[n,r]=C8e(i,e,t);return Vb(function(){const s=i.getHandlerId();if(s!=null)return i.subscribeToStateChange(r,{handlerIds:[s]})},[i,r]),n}function ufe(i,e,t){return w8e(e,i||(()=>({})),()=>t.reconnect())}function cfe(i,e){const t=[...e||[]];return e==null&&typeof i!="function"&&t.push(i),he.useMemo(()=>typeof i=="function"?i():i,t)}function y8e(i){return he.useMemo(()=>i.hooks.dragSource(),[i])}function S8e(i){return he.useMemo(()=>i.hooks.dragPreview(),[i])}let M6=!1,R6=!1;class L8e{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){bi(!M6,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return M6=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{M6=!1}}isDragging(){if(!this.sourceId)return!1;bi(!R6,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return R6=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{R6=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let P6=!1;class E8e{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;bi(!P6,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return P6=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{P6=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function x8e(i,e,t){const n=t.getRegistry(),r=n.addTarget(i,e);return[r,()=>n.removeTarget(r)]}function D8e(i,e,t){const n=t.getRegistry(),r=n.addSource(i,e);return[r,()=>n.removeSource(r)]}function Rz(i,e,t,n){let r=t?t.call(n,i,e):void 0;if(r!==void 0)return!!r;if(i===e)return!0;if(typeof i!="object"||!i||typeof e!="object"||!e)return!1;const o=Object.keys(i),s=Object.keys(e);if(o.length!==s.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<o.length;u++){const d=o[u];if(!a(d))return!1;const h=i[d],f=e[d];if(r=t?t.call(n,h,f,d):void 0,r===!1||r===void 0&&h!==f)return!1}return!0}function Pz(i){return i!==null&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function I8e(i){if(typeof i.type=="string")return;const e=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function k8e(i){return(e=null,t=null)=>{if(!he.isValidElement(e)){const o=e;return i(o,t),o}const n=e;return I8e(n),T8e(n,t?o=>i(o,t):i)}}function dfe(i){const e={};return Object.keys(i).forEach(t=>{const n=i[t];if(t.endsWith("Ref"))e[t]=i[t];else{const r=k8e(n);e[t]=()=>r}}),e}function Jte(i,e){typeof i=="function"?i(e):i.current=e}function T8e(i,e){const t=i.ref;return bi(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?he.cloneElement(i,{ref:n=>{Jte(t,n),Jte(e,n)}}):he.cloneElement(i,{ref:e})}class N8e{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Rz(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Rz(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=dfe({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,Pz(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,Pz(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class A8e{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Rz(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=dfe({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,Pz(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function qS(){const{dragDropManager:i}=he.useContext(tfe);return bi(i!=null,"Expected drag drop context"),i}function O8e(i,e){const t=qS(),n=he.useMemo(()=>new N8e(t.getBackend()),[t]);return Vb(()=>(n.dragSourceOptions=i||null,n.reconnect(),()=>n.disconnectDragSource()),[n,i]),Vb(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function M8e(){const i=qS();return he.useMemo(()=>new L8e(i),[i])}class R8e{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,r=this.monitor,{isDragging:o}=n;return o?o(r):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function P8e(i,e,t){const n=he.useMemo(()=>new R8e(i,e,t),[e,t]);return he.useEffect(()=>{n.spec=i},[i]),n}function F8e(i){return he.useMemo(()=>{const e=i.type;return bi(e!=null,"spec.type must be defined"),e},[i])}function B8e(i,e,t){const n=qS(),r=P8e(i,e,t),o=F8e(i);Vb(function(){if(o!=null){const[a,u]=D8e(o,r,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),u}},[n,e,t,r,o])}function W8e(i,e){const t=cfe(i,e);bi(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=M8e(),r=O8e(t.options,t.previewOptions);return B8e(t,n,r),[ufe(t.collect,n,r),y8e(r),S8e(r)]}function V8e(i){return he.useMemo(()=>i.hooks.dropTarget(),[i])}function H8e(i){const e=qS(),t=he.useMemo(()=>new A8e(e.getBackend()),[e]);return Vb(()=>(t.dropTargetOptions=i||null,t.reconnect(),()=>t.disconnectDropTarget()),[i]),t}function $8e(){const i=qS();return he.useMemo(()=>new E8e(i),[i])}function z8e(i){const{accept:e}=i;return he.useMemo(()=>(bi(i.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class U8e{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function j8e(i,e){const t=he.useMemo(()=>new U8e(i,e),[e]);return he.useEffect(()=>{t.spec=i},[i]),t}function K8e(i,e,t){const n=qS(),r=j8e(i,e),o=z8e(i);Vb(function(){const[a,u]=x8e(o,r,n);return e.receiveHandlerId(a),t.receiveHandlerId(a),u},[n,e,r,t,o.map(s=>s.toString()).join("|")])}function G8e(i,e){const t=cfe(i,e),n=$8e(),r=H8e(t.options);return K8e(t,n,r),[ufe(t.collect,n,r),V8e(r)]}function hfe(i){let e=null;return()=>(e==null&&(e=i()),e)}function q8e(i,e){return i.filter(t=>t!==e)}function Y8e(i,e){const t=new Set,n=o=>t.add(o);i.forEach(n),e.forEach(n);const r=[];return t.forEach(o=>r.push(o)),r}class Z8e{enter(e){const t=this.entered.length,n=r=>this.isNodeInDocument(r)&&(!r.contains||r.contains(e));return this.entered=Y8e(this.entered.filter(n),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=q8e(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class X8e{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const r=this.config.exposeProperties[n];r!=null&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const ffe="__NATIVE_FILE__",gfe="__NATIVE_URL__",pfe="__NATIVE_TEXT__",mfe="__NATIVE_HTML__",ene=Object.freeze(Object.defineProperty({__proto__:null,FILE:ffe,HTML:mfe,TEXT:pfe,URL:gfe},Symbol.toStringTag,{value:"Module"}));function F6(i,e,t){const n=e.reduce((r,o)=>r||i.getData(o),"");return n??t}const Fz={[ffe]:{exposeProperties:{files:i=>Array.prototype.slice.call(i.files),items:i=>i.items,dataTransfer:i=>i},matchesTypes:["Files"]},[mfe]:{exposeProperties:{html:(i,e)=>F6(i,e,""),dataTransfer:i=>i},matchesTypes:["Html","text/html"]},[gfe]:{exposeProperties:{urls:(i,e)=>F6(i,e,"").split(`
`),dataTransfer:i=>i},matchesTypes:["Url","text/uri-list"]},[pfe]:{exposeProperties:{text:(i,e)=>F6(i,e,""),dataTransfer:i=>i},matchesTypes:["Text","text/plain"]}};function Q8e(i,e){const t=Fz[i];if(!t)throw new Error(`native type ${i} has no configuration`);const n=new X8e(t);return n.loadDataTransfer(e),n}function B6(i){if(!i)return null;const e=Array.prototype.slice.call(i.types||[]);return Object.keys(Fz).filter(t=>{const n=Fz[t];return n!=null&&n.matchesTypes?n.matchesTypes.some(r=>e.indexOf(r)>-1):!1})[0]||null}const J8e=hfe(()=>/firefox/i.test(navigator.userAgent)),_fe=hfe(()=>!!window.safari);class tne{interpolate(e){const{xs:t,ys:n,c1s:r,c2s:o,c3s:s}=this;let a=t.length-1;if(e===t[a])return n[a];let u=0,d=s.length-1,h;for(;u<=d;){h=Math.floor(.5*(u+d));const m=t[h];if(m<e)u=h+1;else if(m>e)d=h-1;else return n[h]}a=Math.max(0,d);const f=e-t[a],p=f*f;return n[a]+r[a]*f+o[a]*p+s[a]*f*p}constructor(e,t){const{length:n}=e,r=[];for(let m=0;m<n;m++)r.push(m);r.sort((m,v)=>e[m]<e[v]?-1:1);const o=[],s=[];let a,u;for(let m=0;m<n-1;m++)a=e[m+1]-e[m],u=t[m+1]-t[m],o.push(a),s.push(u/a);const d=[s[0]];for(let m=0;m<o.length-1;m++){const v=s[m],b=s[m+1];if(v*b<=0)d.push(0);else{a=o[m];const L=o[m+1],S=a+L;d.push(3*S/((S+L)/v+(S+a)/b))}}d.push(s[s.length-1]);const h=[],f=[];let p;for(let m=0;m<d.length-1;m++){p=s[m];const v=d[m],b=1/o[m],L=v+d[m+1]-p-p;h.push((p-v-L)*b),f.push(L*b*b)}this.xs=e,this.ys=t,this.c1s=d,this.c2s=h,this.c3s=f}}const eBe=1;function vfe(i){const e=i.nodeType===eBe?i:i.parentElement;if(!e)return null;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function sP(i){return{x:i.clientX,y:i.clientY}}function tBe(i){var e;return i.nodeName==="IMG"&&(J8e()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(i)))}function nBe(i,e,t,n){let r=i?e.width:t,o=i?e.height:n;return _fe()&&i&&(o/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:o}}function iBe(i,e,t,n,r){const o=tBe(e),a=vfe(o?i:e),u={x:t.x-a.x,y:t.y-a.y},{offsetWidth:d,offsetHeight:h}=i,{anchorX:f,anchorY:p}=n,{dragPreviewWidth:m,dragPreviewHeight:v}=nBe(o,e,d,h),b=()=>{let V=new tne([0,.5,1],[u.y,u.y/h*v,u.y+v-h]).interpolate(p);return _fe()&&o&&(V+=(window.devicePixelRatio-1)*v),V},L=()=>new tne([0,.5,1],[u.x,u.x/d*m,u.x+m-d]).interpolate(f),{offsetX:S,offsetY:y}=r,E=S===0||S,A=y===0||y;return{x:E?S:L(),y:A?y:b()}}class rBe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function oBe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function nne(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.forEach(function(r){oBe(i,r,t[r])})}return i}class sBe{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const r=s=>this.handleDragStart(s,e),o=s=>this.handleSelectStart(s);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",r),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",r),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=s=>this.handleDragEnter(s,e),r=s=>this.handleDragOver(s,e),o=s=>this.handleDrop(s,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",r),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",r),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return nne({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return nne({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ene).some(t=>ene[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Q8e(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=r=>{const o=this.sourceNodes.get(r);return o&&vfe(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=r=>!!(r&&this.document&&this.document.body&&this.document.body.contains(r)),this.endDragIfSourceWasRemovedFromDOM=()=>{const r=this.currentDragSourceNode;r==null||this.isNodeInDocument(r)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=r=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(r||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=r=>{if(r.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const s=sP(r);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:a}=r,u=B6(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const h=this.monitor.getSourceId(),f=this.sourceNodes.get(h),p=this.sourcePreviewNodes.get(h)||f;if(p){const{anchorX:m,anchorY:v,offsetX:b,offsetY:L}=this.getCurrentSourcePreviewNodeOptions(),E=iBe(f,p,s,{anchorX:m,anchorY:v},{offsetX:b,offsetY:L});a.setDragImage(p,E.x,E.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(r.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(a&&!a.types&&(r.target&&!r.target.hasAttribute||!r.target.hasAttribute("draggable")))return;r.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=r=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(r.dataTransfer)}if(!this.enterLeaveCounter.enter(r.target)||this.monitor.isDragging())return;const{dataTransfer:a}=r,u=B6(a);u&&this.beginDragNativeItem(u,a)},this.handleTopDragEnter=r=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=r.altKey,o.length>0&&this.actions.hover(o,{clientOffset:sP(r)}),o.some(a=>this.monitor.canDropOnTarget(a))&&(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=r=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(r.dataTransfer)}},this.handleTopDragOver=r=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none");return}this.altKeyPressed=r.altKey,this.lastClientOffset=sP(r),this.scheduleHover(o),(o||[]).some(a=>this.monitor.canDropOnTarget(a))?(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?r.preventDefault():(r.preventDefault(),r.dataTransfer&&(r.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=r=>{this.isDraggingNativeItem()&&r.preventDefault(),this.enterLeaveCounter.leave(r.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=r=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;r.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(r.dataTransfer)}else B6(r.dataTransfer)&&r.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=r=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:sP(r)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=r=>{const o=r.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(r.preventDefault(),o.dragDrop()))},this.options=new rBe(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Z8e(this.isNodeInDocument)}}const aBe=function(e,t,n){return new sBe(e,t,n)},lBe=({onClick:i,classNames:e="",renderStatus:t})=>{const[n,r]=he.useState(!1),o=()=>{r(!0)},s=()=>{r(!1)};return re.createElement("div",{role:"button",className:e,onClick:i,onMouseOver:o,onMouseOut:s},t==null?void 0:t(n))};var uBe=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const cBe=Hn("tab"),SB=gt(cBe,"item"),Bz=_n(SB,"active"),dBe=gt(SB,"label"),hBe=gt(SB,"extra");function bfe(i){var{tab:e,active:t}=i,n=uBe(i,["tab","active"]);const{name:r,closable:o,id:s,icon:a,status:u}=e,{onCloseTab:d,onSelectTab:h,onContextMenu:f,onDrag:p}=n,m=he.useRef(null),v=E=>{E.preventDefault(),f==null||f(E,e)},[,b]=W8e({collect:E=>({isDragging:E.isDragging()}),type:"DND_NODE",item:e}),[,L]=G8e({accept:"DND_NODE",hover(E,A){if(!m.current)return;const N=m.current,V=N==null?void 0:N.getBoundingClientRect(),R=(V.right-V.left)/2,K=A.getClientOffset().x-V.left,X={hoverMiddleX:R,hoverClientX:K};p==null||p(E,e,X)}});b(L(m));const S=E=>typeof E=="string"?re.createElement(dr,{type:E}):E,y=(E,A)=>{if(E&&!A){if(typeof E=="function")return E(e);switch(E){case"edited":return re.createElement(dr,{type:"primitive-dot"});default:return re.createElement(dr,{type:"close"})}}return re.createElement(dr,{type:"close"})};return re.createElement("div",{ref:m,className:mn(SB,{[Bz]:t}),onClick:E=>h==null?void 0:h(s),onContextMenu:v},a&&re.createElement("span",{className:dBe},S(a)),r,(typeof o>"u"||o)&&re.createElement(lBe,{classNames:hBe,onClick:E=>{E.stopPropagation(),d==null||d(s)},renderStatus:E=>y(u,E)}))}const Wz=Hn("tabs"),fBe=gt(Wz,"header");function gY(i){var e;const{role:t,activeTab:n,className:r,data:o=[],type:s="line",style:a,onMoveTab:u,onCloseTab:d,onSelectTab:h,onContextMenu:f}=i,p=he.useRef(null),m=he.useRef(null),v=he.useCallback((L,S)=>{const y=o[L];u==null||u(Q3e(o,{$splice:[[L,1],[S,0,y]]}))},[o]),b=(L,S,y)=>{const E=o.indexOf(L),A=o.indexOf(S),{hoverClientX:N,hoverMiddleX:V}=y;E!==A&&(E<A&&N<V||E>A&&N>V||v==null||v(E,A))};return he.useEffect(()=>{var L,S;const y=(L=p.current)===null||L===void 0?void 0:L.querySelector(`.${Bz}`);if(y){const E=((S=p.current)===null||S===void 0?void 0:S.clientWidth)||0,A=y.offsetLeft;A>E&&setTimeout(()=>{var N;(N=m.current)===null||N===void 0||N.scrollTo(A+y.clientWidth)},0)}},[(e=p.current)===null||e===void 0?void 0:e.querySelector(`.${Bz}`)]),re.createElement(p8e,{backend:aBe,context:window},re.createElement("div",{style:a,className:mn(Wz,_n(Wz,s),r),role:t,ref:p},re.createElement(GS,{className:fBe,direction:iS.horizontal,ref:m,trackStyle:{height:3}},o.map((L,S)=>re.createElement(bfe,{key:L.id,active:n===L.id,tab:L,onDrag:b,onCloseTab:d,onContextMenu:f,onSelectTab:h})))))}const pY=Hn("tree"),kM=gt(pY,"treenode"),gBe=_n(kM,"active"),pBe=_n(kM,"open"),mBe=_n(kM,"close"),Cfe=gt(pY,"indent"),_Be=gt(Cfe,"guide"),vBe=gt(kM,"title"),bBe=8,CBe=({data:i,indent:e,className:t,name:n,renderIcon:r,renderTitle:o,draggable:s,onContextMenu:a,onClick:u,onNodeDragStart:d,onNodeDragEnter:h,onNodeDragOver:f,onNodeDrop:p,onNodeDragEnd:m})=>{const v=i.id,b=he.useRef(null),L=V=>{V.stopPropagation(),d==null||d(V,i);try{V.dataTransfer.setData("text/plain","")}catch{}},S=V=>{V.preventDefault(),V.stopPropagation(),h==null||h(V,i)},y=V=>{V.preventDefault(),V.stopPropagation(),f==null||f(V,i)},E=V=>{V.preventDefault(),V.stopPropagation(),p==null||p(V,i)},A=V=>{V.stopPropagation(),m==null||m(V,i)},N=`${e?e+"_":""}${i.id}`;return re.createElement("div",{ref:b,key:`${v}-${e}`,tabIndex:0,"data-indent":e,"data-key":v,"data-id":`mo_treeNode_${N}`,className:t,title:n,draggable:s,onContextMenu:a,onClick:u,onDragStart:L,onDragOver:y,onDragEnter:S,onDragEnd:A,onDrop:E},re.createElement("div",{className:Cfe,style:{width:bBe*e}},new Array(e).fill("").map((V,R)=>re.createElement("div",{key:R,className:_Be}))),r(),re.createElement("span",{className:vBe},o()))};function wBe(){this.__data__=[],this.size=0}var yBe=wBe;function SBe(i,e){return i===e||i!==i&&e!==e}var mY=SBe,LBe=mY;function EBe(i,e){for(var t=i.length;t--;)if(LBe(i[t][0],e))return t;return-1}var LB=EBe,xBe=LB,DBe=Array.prototype,IBe=DBe.splice;function kBe(i){var e=this.__data__,t=xBe(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():IBe.call(e,t,1),--this.size,!0}var TBe=kBe,NBe=LB;function ABe(i){var e=this.__data__,t=NBe(e,i);return t<0?void 0:e[t][1]}var OBe=ABe,MBe=LB;function RBe(i){return MBe(this.__data__,i)>-1}var PBe=RBe,FBe=LB;function BBe(i,e){var t=this.__data__,n=FBe(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var WBe=BBe,VBe=yBe,HBe=TBe,$Be=OBe,zBe=PBe,UBe=WBe;function YS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}YS.prototype.clear=VBe;YS.prototype.delete=HBe;YS.prototype.get=$Be;YS.prototype.has=zBe;YS.prototype.set=UBe;var EB=YS,jBe=EB;function KBe(){this.__data__=new jBe,this.size=0}var GBe=KBe;function qBe(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var YBe=qBe;function ZBe(i){return this.__data__.get(i)}var XBe=ZBe;function QBe(i){return this.__data__.has(i)}var JBe=QBe,e7e=typeof ea=="object"&&ea&&ea.Object===Object&&ea,wfe=e7e,t7e=wfe,n7e=typeof self=="object"&&self&&self.Object===Object&&self,i7e=t7e||n7e||Function("return this")(),Tg=i7e,r7e=Tg,o7e=r7e.Symbol,TM=o7e,ine=TM,yfe=Object.prototype,s7e=yfe.hasOwnProperty,a7e=yfe.toString,FN=ine?ine.toStringTag:void 0;function l7e(i){var e=s7e.call(i,FN),t=i[FN];try{i[FN]=void 0;var n=!0}catch{}var r=a7e.call(i);return n&&(e?i[FN]=t:delete i[FN]),r}var u7e=l7e,c7e=Object.prototype,d7e=c7e.toString;function h7e(i){return d7e.call(i)}var f7e=h7e,rne=TM,g7e=u7e,p7e=f7e,m7e="[object Null]",_7e="[object Undefined]",one=rne?rne.toStringTag:void 0;function v7e(i){return i==null?i===void 0?_7e:m7e:one&&one in Object(i)?g7e(i):p7e(i)}var NM=v7e;function b7e(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var kC=b7e,C7e=NM,w7e=kC,y7e="[object AsyncFunction]",S7e="[object Function]",L7e="[object GeneratorFunction]",E7e="[object Proxy]";function x7e(i){if(!w7e(i))return!1;var e=C7e(i);return e==S7e||e==L7e||e==y7e||e==E7e}var Sfe=x7e,D7e=Tg,I7e=D7e["__core-js_shared__"],k7e=I7e,W6=k7e,sne=function(){var i=/[^.]+$/.exec(W6&&W6.keys&&W6.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function T7e(i){return!!sne&&sne in i}var N7e=T7e,A7e=Function.prototype,O7e=A7e.toString;function M7e(i){if(i!=null){try{return O7e.call(i)}catch{}try{return i+""}catch{}}return""}var Lfe=M7e,R7e=Sfe,P7e=N7e,F7e=kC,B7e=Lfe,W7e=/[\\^$.*+?()[\]{}|]/g,V7e=/^\[object .+?Constructor\]$/,H7e=Function.prototype,$7e=Object.prototype,z7e=H7e.toString,U7e=$7e.hasOwnProperty,j7e=RegExp("^"+z7e.call(U7e).replace(W7e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K7e(i){if(!F7e(i)||P7e(i))return!1;var e=R7e(i)?j7e:V7e;return e.test(B7e(i))}var G7e=K7e;function q7e(i,e){return i==null?void 0:i[e]}var Y7e=q7e,Z7e=G7e,X7e=Y7e;function Q7e(i,e){var t=X7e(i,e);return Z7e(t)?t:void 0}var TC=Q7e,J7e=TC,e9e=Tg,t9e=J7e(e9e,"Map"),_Y=t9e,n9e=TC,i9e=n9e(Object,"create"),xB=i9e,ane=xB;function r9e(){this.__data__=ane?ane(null):{},this.size=0}var o9e=r9e;function s9e(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var a9e=s9e,l9e=xB,u9e="__lodash_hash_undefined__",c9e=Object.prototype,d9e=c9e.hasOwnProperty;function h9e(i){var e=this.__data__;if(l9e){var t=e[i];return t===u9e?void 0:t}return d9e.call(e,i)?e[i]:void 0}var f9e=h9e,g9e=xB,p9e=Object.prototype,m9e=p9e.hasOwnProperty;function _9e(i){var e=this.__data__;return g9e?e[i]!==void 0:m9e.call(e,i)}var v9e=_9e,b9e=xB,C9e="__lodash_hash_undefined__";function w9e(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=b9e&&e===void 0?C9e:e,this}var y9e=w9e,S9e=o9e,L9e=a9e,E9e=f9e,x9e=v9e,D9e=y9e;function ZS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}ZS.prototype.clear=S9e;ZS.prototype.delete=L9e;ZS.prototype.get=E9e;ZS.prototype.has=x9e;ZS.prototype.set=D9e;var I9e=ZS,lne=I9e,k9e=EB,T9e=_Y;function N9e(){this.size=0,this.__data__={hash:new lne,map:new(T9e||k9e),string:new lne}}var A9e=N9e;function O9e(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var M9e=O9e,R9e=M9e;function P9e(i,e){var t=i.__data__;return R9e(e)?t[typeof e=="string"?"string":"hash"]:t.map}var DB=P9e,F9e=DB;function B9e(i){var e=F9e(this,i).delete(i);return this.size-=e?1:0,e}var W9e=B9e,V9e=DB;function H9e(i){return V9e(this,i).get(i)}var $9e=H9e,z9e=DB;function U9e(i){return z9e(this,i).has(i)}var j9e=U9e,K9e=DB;function G9e(i,e){var t=K9e(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var q9e=G9e,Y9e=A9e,Z9e=W9e,X9e=$9e,Q9e=j9e,J9e=q9e;function XS(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}XS.prototype.clear=Y9e;XS.prototype.delete=Z9e;XS.prototype.get=X9e;XS.prototype.has=Q9e;XS.prototype.set=J9e;var vY=XS,e6e=EB,t6e=_Y,n6e=vY,i6e=200;function r6e(i,e){var t=this.__data__;if(t instanceof e6e){var n=t.__data__;if(!t6e||n.length<i6e-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new n6e(n)}return t.set(i,e),this.size=t.size,this}var o6e=r6e,s6e=EB,a6e=GBe,l6e=YBe,u6e=XBe,c6e=JBe,d6e=o6e;function QS(i){var e=this.__data__=new s6e(i);this.size=e.size}QS.prototype.clear=a6e;QS.prototype.delete=l6e;QS.prototype.get=u6e;QS.prototype.has=c6e;QS.prototype.set=d6e;var bY=QS;function h6e(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}var f6e=h6e,g6e=TC,p6e=function(){try{var i=g6e(Object,"defineProperty");return i({},"",{}),i}catch{}}(),m6e=p6e,une=m6e;function _6e(i,e,t){e=="__proto__"&&une?une(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}var Efe=_6e,v6e=Efe,b6e=mY,C6e=Object.prototype,w6e=C6e.hasOwnProperty;function y6e(i,e,t){var n=i[e];(!(w6e.call(i,e)&&b6e(n,t))||t===void 0&&!(e in i))&&v6e(i,e,t)}var CY=y6e,S6e=CY,L6e=Efe;function E6e(i,e,t,n){var r=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=n?n(t[a],i[a],a,t,i):void 0;u===void 0&&(u=i[a]),r?L6e(t,a,u):S6e(t,a,u)}return t}var IB=E6e;function x6e(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var D6e=x6e;function I6e(i){return i!=null&&typeof i=="object"}var NC=I6e,k6e=NM,T6e=NC,N6e="[object Arguments]";function A6e(i){return T6e(i)&&k6e(i)==N6e}var O6e=A6e,cne=O6e,M6e=NC,xfe=Object.prototype,R6e=xfe.hasOwnProperty,P6e=xfe.propertyIsEnumerable,F6e=cne(function(){return arguments}())?cne:function(i){return M6e(i)&&R6e.call(i,"callee")&&!P6e.call(i,"callee")},Dfe=F6e,B6e=Array.isArray,Up=B6e,G3={exports:{}};function W6e(){return!1}var V6e=W6e;G3.exports;(function(i,e){var t=Tg,n=V6e,r=e&&!e.nodeType&&e,o=r&&!0&&i&&!i.nodeType&&i,s=o&&o.exports===r,a=s?t.Buffer:void 0,u=a?a.isBuffer:void 0,d=u||n;i.exports=d})(G3,G3.exports);var wY=G3.exports,H6e=9007199254740991,$6e=/^(?:0|[1-9]\d*)$/;function z6e(i,e){var t=typeof i;return e=e??H6e,!!e&&(t=="number"||t!="symbol"&&$6e.test(i))&&i>-1&&i%1==0&&i<e}var yY=z6e,U6e=9007199254740991;function j6e(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=U6e}var SY=j6e,K6e=NM,G6e=SY,q6e=NC,Y6e="[object Arguments]",Z6e="[object Array]",X6e="[object Boolean]",Q6e="[object Date]",J6e="[object Error]",eWe="[object Function]",tWe="[object Map]",nWe="[object Number]",iWe="[object Object]",rWe="[object RegExp]",oWe="[object Set]",sWe="[object String]",aWe="[object WeakMap]",lWe="[object ArrayBuffer]",uWe="[object DataView]",cWe="[object Float32Array]",dWe="[object Float64Array]",hWe="[object Int8Array]",fWe="[object Int16Array]",gWe="[object Int32Array]",pWe="[object Uint8Array]",mWe="[object Uint8ClampedArray]",_We="[object Uint16Array]",vWe="[object Uint32Array]",vo={};vo[cWe]=vo[dWe]=vo[hWe]=vo[fWe]=vo[gWe]=vo[pWe]=vo[mWe]=vo[_We]=vo[vWe]=!0;vo[Y6e]=vo[Z6e]=vo[lWe]=vo[X6e]=vo[uWe]=vo[Q6e]=vo[J6e]=vo[eWe]=vo[tWe]=vo[nWe]=vo[iWe]=vo[rWe]=vo[oWe]=vo[sWe]=vo[aWe]=!1;function bWe(i){return q6e(i)&&G6e(i.length)&&!!vo[K6e(i)]}var CWe=bWe;function wWe(i){return function(e){return i(e)}}var LY=wWe,q3={exports:{}};q3.exports;(function(i,e){var t=wfe,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,o=r&&r.exports===n,s=o&&t.process,a=function(){try{var u=r&&r.require&&r.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();i.exports=a})(q3,q3.exports);var EY=q3.exports,yWe=CWe,SWe=LY,dne=EY,hne=dne&&dne.isTypedArray,LWe=hne?SWe(hne):yWe,Ife=LWe,EWe=D6e,xWe=Dfe,DWe=Up,IWe=wY,kWe=yY,TWe=Ife,NWe=Object.prototype,AWe=NWe.hasOwnProperty;function OWe(i,e){var t=DWe(i),n=!t&&xWe(i),r=!t&&!n&&IWe(i),o=!t&&!n&&!r&&TWe(i),s=t||n||r||o,a=s?EWe(i.length,String):[],u=a.length;for(var d in i)(e||AWe.call(i,d))&&!(s&&(d=="length"||r&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||kWe(d,u)))&&a.push(d);return a}var kfe=OWe,MWe=Object.prototype;function RWe(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||MWe;return i===t}var xY=RWe;function PWe(i,e){return function(t){return i(e(t))}}var Tfe=PWe,FWe=Tfe,BWe=FWe(Object.keys,Object),WWe=BWe,VWe=xY,HWe=WWe,$We=Object.prototype,zWe=$We.hasOwnProperty;function UWe(i){if(!VWe(i))return HWe(i);var e=[];for(var t in Object(i))zWe.call(i,t)&&t!="constructor"&&e.push(t);return e}var jWe=UWe,KWe=Sfe,GWe=SY;function qWe(i){return i!=null&&GWe(i.length)&&!KWe(i)}var Nfe=qWe,YWe=kfe,ZWe=jWe,XWe=Nfe;function QWe(i){return XWe(i)?YWe(i):ZWe(i)}var kB=QWe,JWe=IB,eVe=kB;function tVe(i,e){return i&&JWe(e,eVe(e),i)}var nVe=tVe;function iVe(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}var rVe=iVe,oVe=kC,sVe=xY,aVe=rVe,lVe=Object.prototype,uVe=lVe.hasOwnProperty;function cVe(i){if(!oVe(i))return aVe(i);var e=sVe(i),t=[];for(var n in i)n=="constructor"&&(e||!uVe.call(i,n))||t.push(n);return t}var dVe=cVe,hVe=kfe,fVe=dVe,gVe=Nfe;function pVe(i){return gVe(i)?hVe(i,!0):fVe(i)}var DY=pVe,mVe=IB,_Ve=DY;function vVe(i,e){return i&&mVe(e,_Ve(e),i)}var bVe=vVe,Y3={exports:{}};Y3.exports;(function(i,e){var t=Tg,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,o=r&&r.exports===n,s=o?t.Buffer:void 0,a=s?s.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var f=d.length,p=a?a(f):new d.constructor(f);return d.copy(p),p}i.exports=u})(Y3,Y3.exports);var CVe=Y3.exports;function wVe(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}var yVe=wVe;function SVe(i,e){for(var t=-1,n=i==null?0:i.length,r=0,o=[];++t<n;){var s=i[t];e(s,t,i)&&(o[r++]=s)}return o}var LVe=SVe;function EVe(){return[]}var Afe=EVe,xVe=LVe,DVe=Afe,IVe=Object.prototype,kVe=IVe.propertyIsEnumerable,fne=Object.getOwnPropertySymbols,TVe=fne?function(i){return i==null?[]:(i=Object(i),xVe(fne(i),function(e){return kVe.call(i,e)}))}:DVe,IY=TVe,NVe=IB,AVe=IY;function OVe(i,e){return NVe(i,AVe(i),e)}var MVe=OVe;function RVe(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var Ofe=RVe,PVe=Tfe,FVe=PVe(Object.getPrototypeOf,Object),Mfe=FVe,BVe=Ofe,WVe=Mfe,VVe=IY,HVe=Afe,$Ve=Object.getOwnPropertySymbols,zVe=$Ve?function(i){for(var e=[];i;)BVe(e,VVe(i)),i=WVe(i);return e}:HVe,Rfe=zVe,UVe=IB,jVe=Rfe;function KVe(i,e){return UVe(i,jVe(i),e)}var GVe=KVe,qVe=Ofe,YVe=Up;function ZVe(i,e,t){var n=e(i);return YVe(i)?n:qVe(n,t(i))}var Pfe=ZVe,XVe=Pfe,QVe=IY,JVe=kB;function eHe(i){return XVe(i,JVe,QVe)}var Ffe=eHe,tHe=Pfe,nHe=Rfe,iHe=DY;function rHe(i){return tHe(i,iHe,nHe)}var Bfe=rHe,oHe=TC,sHe=Tg,aHe=oHe(sHe,"DataView"),lHe=aHe,uHe=TC,cHe=Tg,dHe=uHe(cHe,"Promise"),hHe=dHe,fHe=TC,gHe=Tg,pHe=fHe(gHe,"Set"),mHe=pHe,_He=TC,vHe=Tg,bHe=_He(vHe,"WeakMap"),CHe=bHe,Vz=lHe,Hz=_Y,$z=hHe,zz=mHe,Uz=CHe,Wfe=NM,JS=Lfe,gne="[object Map]",wHe="[object Object]",pne="[object Promise]",mne="[object Set]",_ne="[object WeakMap]",vne="[object DataView]",yHe=JS(Vz),SHe=JS(Hz),LHe=JS($z),EHe=JS(zz),xHe=JS(Uz),g1=Wfe;(Vz&&g1(new Vz(new ArrayBuffer(1)))!=vne||Hz&&g1(new Hz)!=gne||$z&&g1($z.resolve())!=pne||zz&&g1(new zz)!=mne||Uz&&g1(new Uz)!=_ne)&&(g1=function(i){var e=Wfe(i),t=e==wHe?i.constructor:void 0,n=t?JS(t):"";if(n)switch(n){case yHe:return vne;case SHe:return gne;case LHe:return pne;case EHe:return mne;case xHe:return _ne}return e});var TB=g1,DHe=Object.prototype,IHe=DHe.hasOwnProperty;function kHe(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&IHe.call(i,"index")&&(t.index=i.index,t.input=i.input),t}var THe=kHe,NHe=Tg,AHe=NHe.Uint8Array,Vfe=AHe,bne=Vfe;function OHe(i){var e=new i.constructor(i.byteLength);return new bne(e).set(new bne(i)),e}var kY=OHe,MHe=kY;function RHe(i,e){var t=e?MHe(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}var PHe=RHe,FHe=/\w*$/;function BHe(i){var e=new i.constructor(i.source,FHe.exec(i));return e.lastIndex=i.lastIndex,e}var WHe=BHe,Cne=TM,wne=Cne?Cne.prototype:void 0,yne=wne?wne.valueOf:void 0;function VHe(i){return yne?Object(yne.call(i)):{}}var HHe=VHe,$He=kY;function zHe(i,e){var t=e?$He(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}var UHe=zHe,jHe=kY,KHe=PHe,GHe=WHe,qHe=HHe,YHe=UHe,ZHe="[object Boolean]",XHe="[object Date]",QHe="[object Map]",JHe="[object Number]",e$e="[object RegExp]",t$e="[object Set]",n$e="[object String]",i$e="[object Symbol]",r$e="[object ArrayBuffer]",o$e="[object DataView]",s$e="[object Float32Array]",a$e="[object Float64Array]",l$e="[object Int8Array]",u$e="[object Int16Array]",c$e="[object Int32Array]",d$e="[object Uint8Array]",h$e="[object Uint8ClampedArray]",f$e="[object Uint16Array]",g$e="[object Uint32Array]";function p$e(i,e,t){var n=i.constructor;switch(e){case r$e:return jHe(i);case ZHe:case XHe:return new n(+i);case o$e:return KHe(i,t);case s$e:case a$e:case l$e:case u$e:case c$e:case d$e:case h$e:case f$e:case g$e:return YHe(i,t);case QHe:return new n;case JHe:case n$e:return new n(i);case e$e:return GHe(i);case t$e:return new n;case i$e:return qHe(i)}}var m$e=p$e,_$e=kC,Sne=Object.create,v$e=function(){function i(){}return function(e){if(!_$e(e))return{};if(Sne)return Sne(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),b$e=v$e,C$e=b$e,w$e=Mfe,y$e=xY;function S$e(i){return typeof i.constructor=="function"&&!y$e(i)?C$e(w$e(i)):{}}var L$e=S$e,E$e=TB,x$e=NC,D$e="[object Map]";function I$e(i){return x$e(i)&&E$e(i)==D$e}var k$e=I$e,T$e=k$e,N$e=LY,Lne=EY,Ene=Lne&&Lne.isMap,A$e=Ene?N$e(Ene):T$e,O$e=A$e,M$e=TB,R$e=NC,P$e="[object Set]";function F$e(i){return R$e(i)&&M$e(i)==P$e}var B$e=F$e,W$e=B$e,V$e=LY,xne=EY,Dne=xne&&xne.isSet,H$e=Dne?V$e(Dne):W$e,$$e=H$e,z$e=bY,U$e=f6e,j$e=CY,K$e=nVe,G$e=bVe,q$e=CVe,Y$e=yVe,Z$e=MVe,X$e=GVe,Q$e=Ffe,J$e=Bfe,eze=TB,tze=THe,nze=m$e,ize=L$e,rze=Up,oze=wY,sze=O$e,aze=kC,lze=$$e,uze=kB,cze=DY,dze=1,hze=2,fze=4,Hfe="[object Arguments]",gze="[object Array]",pze="[object Boolean]",mze="[object Date]",_ze="[object Error]",$fe="[object Function]",vze="[object GeneratorFunction]",bze="[object Map]",Cze="[object Number]",zfe="[object Object]",wze="[object RegExp]",yze="[object Set]",Sze="[object String]",Lze="[object Symbol]",Eze="[object WeakMap]",xze="[object ArrayBuffer]",Dze="[object DataView]",Ize="[object Float32Array]",kze="[object Float64Array]",Tze="[object Int8Array]",Nze="[object Int16Array]",Aze="[object Int32Array]",Oze="[object Uint8Array]",Mze="[object Uint8ClampedArray]",Rze="[object Uint16Array]",Pze="[object Uint32Array]",ao={};ao[Hfe]=ao[gze]=ao[xze]=ao[Dze]=ao[pze]=ao[mze]=ao[Ize]=ao[kze]=ao[Tze]=ao[Nze]=ao[Aze]=ao[bze]=ao[Cze]=ao[zfe]=ao[wze]=ao[yze]=ao[Sze]=ao[Lze]=ao[Oze]=ao[Mze]=ao[Rze]=ao[Pze]=!0;ao[_ze]=ao[$fe]=ao[Eze]=!1;function C4(i,e,t,n,r,o){var s,a=e&dze,u=e&hze,d=e&fze;if(t&&(s=r?t(i,n,r,o):t(i)),s!==void 0)return s;if(!aze(i))return i;var h=rze(i);if(h){if(s=tze(i),!a)return Y$e(i,s)}else{var f=eze(i),p=f==$fe||f==vze;if(oze(i))return q$e(i,a);if(f==zfe||f==Hfe||p&&!r){if(s=u||p?{}:ize(i),!a)return u?X$e(i,G$e(s,i)):Z$e(i,K$e(s,i))}else{if(!ao[f])return r?i:{};s=nze(i,f,a)}}o||(o=new z$e);var m=o.get(i);if(m)return m;o.set(i,s),lze(i)?i.forEach(function(L){s.add(C4(L,e,t,L,i,o))}):sze(i)&&i.forEach(function(L,S){s.set(S,C4(L,e,t,S,i,o))});var v=d?u?J$e:Q$e:u?cze:uze,b=h?void 0:v(i);return U$e(b||i,function(L,S){b&&(S=L,L=i[S]),j$e(s,S,C4(L,e,t,S,i,o))}),s}var Fze=C4,Bze=Fze,Wze=1,Vze=4;function Hze(i){return Bze(i,Wze|Vze)}var $ze=Hze;const Xh=Vp($ze);class w4{constructor(e){this.hashMap=new Map,this.count=0,this.getHashMap=t=>this.hashMap.get(t.toString())||null,this.removeHashMap=t=>{var n;const r=this.hashMap.get(t.toString());r&&(this.hashMap.delete(t.toString()),!((n=r.children)===null||n===void 0)&&n.length&&r.children.forEach(o=>{this.removeHashMap(o)}))},this.getNode=t=>{const n=this.getHashMap(t);return(n==null?void 0:n.node)||null},this.removeNode=t=>{var n,r;const o=this.getHashMap(t);if(o){const{node:s,parent:a}=o;if(!a)return Wn.error("You're going to remove a root node"),null;const u=this.getHashMap(a),d=u==null?void 0:u.node;if(d)return(n=d.children)===null||n===void 0||n.splice(d.children.indexOf(s),1),(r=u.children)===null||r===void 0||r.splice(u.children.indexOf(t.toString()),1),this.removeHashMap(t),this.updateChildren(u.children),s}return null},this.updateNode=(t,n)=>{const r=this.getNode(t);return r?(Object.assign(r,n),r):null},this.insertNode=(t,n,r)=>{const o=this.getHashMap(n);if(o){const s=o.node,a=this.generate(t);if(a.parent=n.toString(),s.children=s.children||[],o.children=o.children||[],s.children.splice(r,0,t),o.children.splice(r,0,a.id),this.updateChildren(o.children),o.parent){const u=this.getHashMap(o.parent);u&&this.updateChildren(u.children)}return a}return null},this.insertBefore=(t,n)=>{const r=this.getHashMap(n);if(r){const o=r.parent;if(!o)return Wn.error("You're going to insert a obj before the root node"),null;const s=this.getHashMap(o);if(s){const a=(s.children||[]).indexOf(n.toString());return this.insertNode(t,o,a)}}return null},this.insertAfter=(t,n)=>{const r=this.getHashMap(n);if(r){const o=r.parent;if(!o)return Wn.error("You're going to insert a obj after the root node"),null;const s=this.getHashMap(o);if(s){const a=(s.children||[]).indexOf(n.toString());return this.insertNode(t,o,a+1)}}return null},this.prepend=(t,n)=>this.insertNode(t,n,0),this.append=(t,n)=>{const r=this.getHashMap(n);return r?(r.children=r.children||[],this.insertNode(t,n,r.children.length)):null},this.obj=Xh(e),this.count=1,this.generate(this.obj)}addMap(e,t){if(this.hashMap.has(e)){Wn.error(`There is already a data whose key is ${e} in hashMap`);return}else this.hashMap.set(e,t),this.count+=1}generateChildren(e,t){const n=[];e.forEach(r=>{var o;const s={id:r.id.toString(),node:r};t.id&&(s.parent=t.id),this.addMap(r.id.toString(),s),n.push(r.id.toString()),!((o=r.children)===null||o===void 0)&&o.length&&this.generateChildren(r.children,s)}),t.children=n,n.forEach((r,o)=>{const s=this.hashMap.get(r);o>0&&(s.prev=n[o-1]),o<n.length-1&&(s.next=n[o+1])})}generate(e){var t;const n=e.id.toString(),r={id:n,node:e};return this.addMap(n,r),!((t=e.children)===null||t===void 0)&&t.length&&this.generateChildren(e.children,r),r}updateChildren(e=[]){e.forEach((t,n)=>{const r=this.getHashMap(t);r&&(r.prev=r.next=void 0,n>0&&(r.prev=e[n-1]),n<e.length-1&&(r.next=e[n+1]))})}}const NB=({className:i,data:e=[],draggable:t=!1,loadedKeys:n,expandKeys:r,activeKey:o,onExpand:s,onDropTree:a,onRightClick:u,renderTitle:d,onSelect:h,onLoadData:f,onTreeClick:p})=>{const[m,v]=he.useState([]),[b,L]=he.useState(null),[S,y]=he.useState([]),E=he.useRef(),A=he.useRef({x:0,y:0,dragNode:null,flattenTree:null}),N=he.useRef(null),V=ne=>!(!f||n!=null&&n.includes(ne)),R=ne=>{const we=ne.id.toString();V(we)&&(y(Ie=>{const je=Ie.concat();return je.push(we),je}),f(ne).finally(()=>{y(Ie=>{const je=Ie.concat(),dt=je.indexOf(we);return je.splice(dt,1),je})}))},M=(ne,we)=>{const Ie=(r||m).concat(),je=Ie.findIndex(dt=>dt===ne);je>-1?Ie.splice(je,1):Ie.push(ne),s?s(Ie.concat(),we):v(Ie.concat())},K=(ne,we)=>{we.stopPropagation();const Ie=ne.id.toString();L(Ie),ne.isLeaf||(R(ne),M(Ie,ne)),h==null||h(ne)},X=(ne,we,Ie,je)=>we?ne||null:je?re.createElement(dr,{type:"loading~spin"}):re.createElement(dr,{type:Ie?"chevron-down":"chevron-right"}),$=(ne,we)=>{ne.stopPropagation(),u==null||u(ne,we)},D=he.useCallback(ne=>{z(ne,null,!0),window.removeEventListener("dragend",D)},[]),T=(ne,we)=>{A.current={x:ne.clientX,y:ne.clientY,dragNode:we,flattenTree:new w4({id:Number.MAX_SAFE_INTEGER,children:e})};const Ie=we.id.toString(),je=(r||m).indexOf(Ie);if(je>-1){const dt=m.concat();dt.splice(je,1),s?s(dt,we):v(dt)}window.addEventListener("dragend",D)},F=wr.debounce((ne,we)=>{const Ie=we.id.toString(),je=(r||m).includes(Ie),At=A.current.dragNode.id.toString(),Me=Ie===At;!we.isLeaf&&!Me&&!je&&!V(Ie)&&M(Ie,we)},300),B=ne=>{const we=ne.id.toString(),Ie=document.querySelector(`div[data-key="${we}"]`);let je=Ie;for(;je;){je.classList.contains("drag-over")||je.classList.add("drag-over");const dt=je.nextElementSibling;(dt==null?void 0:dt.dataset.indent)===Ie.dataset.indent?je=null:je=dt}},U=()=>{var ne;(ne=N.current)===null||ne===void 0||ne.querySelectorAll(".drag-over").forEach(we=>{we.classList.remove("drag-over")})},G=ne=>{var we,Ie;const je=A.current.flattenTree,dt=(we=je.getHashMap(ne.id))===null||we===void 0?void 0:we.parent;return(Ie=je.getHashMap(dt))===null||Ie===void 0?void 0:Ie.node},Z=(ne,we)=>{const Ie=we.isLeaf?G(we):we;Ie!==E.current&&(U(),E.current=Ie,B(Ie))},z=(ne,we,Ie=!1)=>{U(),E.current=void 0,A.current={x:0,y:0,dragNode:null,flattenTree:null}},O=(ne,we)=>{if(we.isLeaf){const Ie=G(we),je=G(A.current.dragNode),dt=(Ie.key||Ie.id).toString(),At=(je.key||je.id).toString();if(dt===At){A.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(A.current.dragNode,Ie)}else{const Ie=G(A.current.dragNode),je=(Ie.key||Ie.id).toString(),dt=we.id.toString(),Me=A.current.dragNode.id.toString();if(je===dt||Me===dt){A.current={x:0,y:0,dragNode:null,flattenTree:null};return}a==null||a(A.current.dragNode,we)}A.current={x:0,y:0,dragNode:null,flattenTree:null}},Y=(ne,we)=>ne.map((Ie,je)=>{const dt=Ie.id.toString(),At=(r||m).includes(dt),Me=S.includes(dt),st=b===dt,bt=(d==null?void 0:d(Ie,je,!!Ie.isLeaf))||Ie.name,tt=typeof Ie.icon=="string"?re.createElement(dr,{type:Ie.icon}):Ie.icon,tn=re.createElement(CBe,{key:`${dt}-${we}`,draggable:t,data:Ie,name:typeof bt=="string"?bt:void 0,indent:we,className:mn(kM,st&&gBe,At?pBe:mBe),renderIcon:()=>X(tt,!!Ie.isLeaf,At,Me),renderTitle:()=>bt,onContextMenu:nn=>$(nn,Ie),onClick:nn=>K(Ie,nn),onNodeDragStart:t?T:void 0,onNodeDragEnter:t?F:void 0,onNodeDragOver:t?Z:void 0,onNodeDragEnd:t?z:void 0,onNodeDrop:t?O:void 0}),Zt=At&&!Me&&Y(Ie.children||[],we+1);return[tn,Zt]}),fe=()=>{L(null),p==null||p()};return he.useLayoutEffect(()=>{var ne,we;const Ie=[];for(e.forEach(je=>{Ie.push({paths:[je],data:je})});Ie.length;){const{paths:je,data:dt}=Ie.pop();if((ne=dt.children)===null||ne===void 0?void 0:ne.find(Me=>Me.isEditable)){const Me=je.map(bt=>(R(bt),bt.id.toString())),st=Array.from(new Set([...Me,...r||m]));s?s(st,dt):v(st);break}else{const Me=((we=dt.children)===null||we===void 0?void 0:we.map(st=>({paths:[...je,st],data:st})))||[];Ie.push(...Me)}}},[e]),he.useEffect(()=>{o&&L(o.toString())},[o]),re.createElement("div",{role:"tree",ref:N,draggable:t,onClick:fe,className:mn(pY,i)},Y(e,0))};var zze=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const s2=i=>{const{visible:e=!0,children:t,className:n,style:r={}}=i,o=zze(i,["visible","children","className","style"]);return re.createElement("div",Object.assign({className:n,style:Object.assign({display:e?void 0:"none"},r)},o),t)},Uze=Object.freeze(Object.defineProperty({__proto__:null,ActionBar:eM,Breadcrumb:ile,Button:vb,Checkbox:uye,Collapse:sle,get DirectionKind(){return iS},Display:s2,DropDown:HK,Icon:dr,Input:$K,Item:fLe,List:uLe,Menu:Ya,MenuItem:fae,get MenuMode(){return g0},Modal:iM,MonacoEditor:sY,Option:efe,Pane:pp,Scrollbar:GS,Search:Qhe,Select:gO,SplitPane:_A,SubMenu:pae,Tab:bfe,Tabs:gY,Toolbar:tM,Tooltip:MK,TreeView:NB,useContextMenu:G5,useContextView:NS,useContextViewEle:XO},Symbol.toStringTag,{value:"Module"}));var mc;(function(i){i[i.EditorCore=0]="EditorCore",i[i.EditorContrib=100]="EditorContrib",i[i.WorkbenchContrib=200]="WorkbenchContrib",i[i.BuiltinExtension=300]="BuiltinExtension",i[i.ExternalExtension=400]="ExternalExtension"})(mc||(mc={}));const Ufe={View:{value:C("view","View"),original:"View"},Help:{value:C("help","Help"),original:"Help"},Preferences:{value:C("preferences","Preferences"),original:"Preferences"},Developer:{value:C({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer"),original:"Developer"}};var jze=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};class od{constructor(e){this.desc=e}}function Kze(i){const e=new Qe,t=new i,n=t.desc,{f1:r,menu:o,keybinding:s,description:a}=n,u=jze(n,["f1","menu","keybinding","description"]);if(e.add(Qn.registerCommand({id:u.id,handler:(d,...h)=>t.run(d,...h),description:a})),Array.isArray(o)?e.add(ia.appendMenuItems(o.map(d=>({id:d.id,item:Object.assign({command:u},d)})))):o&&e.add(ia.appendMenuItem(o.id,Object.assign({command:u},o))),r&&(e.add(ia.appendMenuItem(Mt.CommandPalette,{command:u,when:u.precondition})),e.add(ia.addCommand(u))),Array.isArray(s))for(const d of s)Os.registerKeybindingRule(Object.assign(Object.assign({},d),{id:u.id,when:u.precondition?_t.and(u.precondition,d.when):d.when}));else s&&Os.registerKeybindingRule(Object.assign(Object.assign({},s),{id:u.id,when:u.precondition?_t.and(u.precondition,s.when):s.when}));return e}const Gze=Object.freeze(Object.defineProperty({__proto__:null,Action2:od,KeyChord:Yr,get KeybindingWeight(){return mc}},Symbol.toStringTag,{value:"Module"})),qze="ko-KR",Yze="한국어",Zze={"molecule.welcome":"Molecule에 오신 것을 환영합니다",menubar:"메뉴 모음","menu.file":"파일","menu.settings":"설정","menu.account":"계정","menu.colorTheme":"색 테마","menu.newFile":"새 파일","menu.newFolder":"새 폴더","menu.open":"열기","menu.edit":"편집","menu.undo":"되돌리기","menu.redo":"다시 실행","menu.selection":"선택","menu.selectAll":"모두 선택","menu.copyLineUp":"위에 줄 복사","menu.view":"보기","menu.commandPalette":"명령어 팔레트","menu.openView":"뷰 열기","menu.appearance":"모양","menu.showMenuBar":"메뉴 모음 표시","menu.showSideBar":"사이드 모음 표시","menu.showSideBar.label":"사이드 모음 표시 유형 토글","menu.showStatusBar":"상태 표시줄 보기","menu.showActivityBar":"작업 막대 표시","menu.hideActivityBar":"작업 막대 숨기기","menu.showPanel":"패널 표시","menu.showPanel.title":"패널 토글","menu.defaultProjectName":"기본 프로젝트 이름","menu.run":"실행","menu.runTask":"작업 실행","menu.help":"도움말","menu.about":"정보","menu.menuBarHorizontal":"메뉴 모음 가로 모드","menu.menuBarVertical":"메뉴 모음 새로 모드","sidebar.explore.folders":"폴더","sidebar.explore.title":"탐색기","sidebar.explore.openEditor":"편집기 열기","sidebar.explore.openEditor.group":"${i} 그룹","sidebar.explore.outline":"개요","sidebar.search.title":"검색","sidebar.replace.placement":"바꾸기","sidebar.explore.refresh":"탐색기 새로 고침","sidebar.explore.collapseFolders":"탐색기 내에 폴더 축소","sidebar.explore.toggleVertical":"세로로 토글","sidebar.explore.saveAll":"모두 저장","sidebar.explore.actionDesc":"보기 및 더 기타 작업...","sidebar.explore.outlineMore":"더 많은 액션들...","toolbar.refresh":"새로 고침","toolbar.clearAll":"모두 지우기","toolbar.collapseAll":"모두 축소","search.matchCase":"대/소문자 구분","search.matchWholeWord":"전체 단어 일치","search.useRegularExpression":"정규식 사용","search.preserveCase":"대/소문자 보존","search.replaceAll":"모두 바꾸기","panel.output.title":"출력","panel.toolbox.closePanel":"패널 닫기","panel.toolbox.maximize":"패널 크기 최대화","panel.toolbox.restoreSize":"패널 크기 복원","panel.problems.title":"문제","panel.problems.empty":"작업 영역안에는 문제가 감지되지 않았습니다.","notification.title":"알림","notification.title.no":"새로운 알림이 없습니다.","editor.closeToRight":"오른쪽에 있는 항목 닫기","editor.closeToLeft":"왼쪽에 있는 항목 닫기","editor.closeAll":"모두 닫기","editor.closeSaved":"저장된 항목 닫기","editor.closeOthers":"기타 항목 닫기","editor.close":"닫기","editor.actions.splitRight":"오른쪽으로 분할","editor.showOpenEditors":"열려 있는 편집기 표시","contextmenu.rename":"이름 바꾸기","contextmenu.delete":"삭제","contextmenu.newFile":"새 파일","contextmenu.newFolder":"새 폴더","contextmenu.removeFolder":"폴더 삭제","contextmenu.openToTheSide":"사이드에 열기","contextmenu.addFolderToSpace":"작업 영역에 폴더 추가...","contextmenu.findInSpace":"작업 영역에서 찾기...","contextmenu.download":"다운로드..."},Xze={id:qze,name:Yze,source:Zze},Qze="zh-CN",Jze="简体中文",eUe={"molecule.welcome":"欢迎!",menubar:"菜单栏","menu.file":"文件","menu.settings":"设置","menu.account":"账号","menu.colorTheme":"颜色主题","menu.newFile":"新建文件","menu.newFolder":"新建文件夹","menu.open":"打开","menu.edit":"编辑","menu.undo":"撤销","menu.redo":"重做","menu.selection":"选择","menu.selectAll":"选择全部","menu.copyLineUp":"向上拷贝","menu.view":"视图","menu.commandPalette":"命令面板","menu.openView":"打开视图","menu.appearance":"外观","menu.showMenuBar":"显示菜单栏","menu.showAuxiliaryBar":"显示辅助侧边栏","menu.showSideBar":"显示侧边栏","menu.showSideBar.label":"切换侧边栏","menu.showStatusBar":"显示状态栏","menu.showActivityBar":"显示活动栏","menu.hideActivityBar":"隐藏活动栏","menu.showPanel":"显示面板","menu.showPanel.title":"切换面板","menu.defaultProjectName":"无打开文件夹","menu.run":"运行","menu.runTask":"运行任务","menu.help":"帮助","menu.about":"关于","menu.menuBarHorizontal":"菜单栏水平模式","menu.menuBarVertical":"菜单栏垂直模式","sidebar.explore.folders":"文件夹","sidebar.explore.title":"浏览","sidebar.explore.openEditor":"打开的编辑器","sidebar.explore.openEditor.group":"第 ${i} 组","sidebar.explore.outline":"轮廓","sidebar.search.title":"搜索","sidebar.replace.placement":"替换","sidebar.explore.refresh":"刷新浏览","sidebar.explore.collapseFolders":"折叠文件夹","sidebar.explore.toggleVertical":"切换垂直","sidebar.explore.saveAll":"全部保存","sidebar.explore.actionDesc":"视图和更多操作...","sidebar.explore.outlineMore":"更多操作...","toolbar.refresh":"刷新","toolbar.clearAll":"清除所有","toolbar.collapseAll":"折叠所有","search.matchCase":"区分大小写","search.matchWholeWord":"匹配整个字词","search.useRegularExpression":"使用正则表达式","search.preserveCase":"保留大小写","search.replaceAll":"全部替换","panel.output.title":"输出","panel.problems.title":"问题","panel.problems.empty":"未在工作区检测到问题","panel.toolbox.closePanel":"关闭面板","panel.toolbox.maximize":"最大化面板","panel.toolbox.restoreSize":"恢复面板大小","notification.title":"通知","notification.title.no":"没有新通知","notification.locale.title":"要使显示语言更改生效, 需要重新加载页面。","notification.locale.description":"按下确认按钮来重新加载页面并更改显示语言。","notification.locale.button":"确认重新加载","editor.closeToRight":"关闭右边","editor.closeToLeft":"关闭左边","editor.closeAll":"关闭所有","editor.closeOthers":"关闭其他","editor.closeSaved":"关闭已保存","editor.close":"关闭","editor.actions.splitRight":"向右拆分编辑器","editor.showOpenEditors":"展示已打开的编辑器","contextmenu.rename":"重命名","contextmenu.delete":"删除","contextmenu.newFile":"新建文件","contextmenu.newFolder":"新建文件夹","contextmenu.removeFolder":"删除文件夹","contextmenu.openToTheSide":"在侧边打开","contextmenu.addFolderToSpace":"将文件夹添加到工作区...","contextmenu.findInSpace":"在工作区中寻找...","contextmenu.download":"下载..."},tUe={id:Qze,name:Jze,source:eUe},nUe="en",iUe="English",rUe={"molecule.welcome":"Welcome to Molecule",menubar:"Menu Bar","menu.file":"File","menu.settings":"Settings","menu.account":"Account","menu.colorTheme":"Color Theme","menu.newFile":"New File","menu.newFolder":"New Folder","menu.open":"Open","menu.edit":"Edit","menu.undo":"Undo","menu.redo":"Redo","menu.selection":"Selection","menu.selectAll":"Select All","menu.copyLineUp":"Copy Line Up","menu.view":"View","menu.commandPalette":"Command Palette","menu.openView":"Open View","menu.appearance":"Appearance","menu.showMenuBar":"Show Menu Bar","menu.showAuxiliaryBar":"Show Auxiliary Bar","menu.showSideBar":"Show Side Bar","menu.showSideBar.label":"Toggle Side Bar Visibility","menu.showStatusBar":"Show Status Bar","menu.showActivityBar":"Show Activity Bar","menu.hideActivityBar":"Hide Activity Bar","menu.showPanel":"Show Panel","menu.showPanel.title":"Toggle Panel","menu.defaultProjectName":"Default Project Name","menu.run":"Run","menu.runTask":"Run Task","menu.help":"Help","menu.about":"About","menu.menuBarHorizontal":"Menu Bar Horizontal Mode","menu.menuBarVertical":"Menu Bar Vertical Mode","sidebar.explore.folders":"Folders","sidebar.explore.title":"Explorer","sidebar.explore.openEditor":"Open Editors","sidebar.explore.openEditor.group":"Group ${i}","sidebar.explore.outline":"Outline","sidebar.search.title":"Search","sidebar.replace.placement":"Replace","sidebar.explore.refresh":"Refresh Explorer","sidebar.explore.collapseFolders":"Collapse Folders in Explorer","sidebar.explore.toggleVertical":"Toggle Vertical","sidebar.explore.saveAll":"Save All","sidebar.explore.actionDesc":"View and More Actions...","sidebar.explore.outlineMore":"More Actions...","toolbar.refresh":"Refresh","toolbar.clearAll":"Clear all","toolbar.collapseAll":"Collapse all","search.matchCase":"Match Case","search.matchWholeWord":"Match Whole Word","search.useRegularExpression":"Use Regular Expression","search.preserveCase":"Preserve Case","search.replaceAll":"Replace All","panel.output.title":"output","panel.toolbox.closePanel":"Close Panel","panel.toolbox.maximize":"Maximize Panel Size","panel.toolbox.restoreSize":"Restore Panel Size","panel.problems.title":"Problems","panel.problems.empty":"No problems have been detected in the workspace.","notification.title":"Notifications","notification.title.no":"No new notifications","notification.locale.title":"A reload is required for the change in display language to take effect.","notification.locale.description":"Press the confirm button to reload and change the display language.","notification.locale.button":"Confirm Reload","editor.closeToRight":"Close To Right","editor.closeToLeft":"Close To Left","editor.closeAll":"Close All","editor.closeSaved":"Close Saved","editor.closeOthers":"Close Others","editor.close":"Close","editor.actions.splitRight":"Split Editor Right","editor.showOpenEditors":"Show Opened Editors","contextmenu.rename":"Rename","contextmenu.delete":"Delete","contextmenu.newFile":"New File","contextmenu.newFolder":"New Folder","contextmenu.removeFolder":"Remove Folder","contextmenu.openToTheSide":"Open to the Side","contextmenu.addFolderToSpace":"Add Folder to Workspace...","contextmenu.findInSpace":"Find in Workspace...","contextmenu.download":"Download..."},oUe={id:nUe,name:iUe,source:rUe};var jz;(function(i){i.Theme="Themes",i.Normal="normal",i.Settings="settings",i.Locals="locales",i.Menus="menus",i.Workbench="workbench"})(jz||(jz={}));var rS;(function(i){i.Languages="languages",i.Commands="commands",i.Configuration="configuration",i.Grammar="grammars",i.Themes="themes",i.IconTheme="iconThemes"})(rS||(rS={}));const sUe=Xze,aUe=tUe,jfe=oUe,Kfe=[aUe,jfe,sUe],lUe={id:"ExtendsLocales",name:"Extends locales",contributes:{[rS.Languages]:Kfe},activate(){},dispose(){}},uUe=jfe.id;Kfe.find(i=>i.id===uUe);var Z3;(function(i){i.OnChange="localization.onchange"})(Z3||(Z3={}));var cUe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},dUe=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Kz;const Gz=`${j5}.localeId`;let of=Kz=class extends tl{constructor(){super(),this.state={},this._locales=new Map}reset(){localStorage.removeItem(Gz),this._current=void 0,this._locales.clear()}getLocales(){return Array.from(this._locales.values())}initialize(e,t){this.addLocales(e),this._locales.get(t)?this._current=this._locales.get(t):Wn.error(`Cannot initialize the locale with ${t}`)}getCurrentLocale(){return this._current&&Object.assign({},this._current)}getLocale(e){if(e)return this._locales.get(e)}removeLocale(e){const t=this._locales.get(e);if(t!==void 0){if(this._locales.size===1){Wn.error("You can't remove this Locale because there must have one locale at least");return}return this._current&&this._current.id===t.id&&(this._current=this._locales.values().next().value),this._locales.delete(e),t}}setCurrentLocale(e){if(this._current&&this._current.id===e)return!0;const t=this._locales.get(e);return t?(this.emit(Z3.OnChange,this._current,t),this._current=t,localStorage.setItem(Gz,t.id),!0):!1}transformLocaleData(e){const t=Object.assign({},e);if(e.source instanceof Map||(t.source=new Map(Object.entries(e.source))),t.inherit){const n=this._locales.get(t.inherit);n&&(t.source=new Map([...n.source,...t.source]))}return t}addLocales(e){if(e.length>0){const t=this._locales;e.forEach(n=>{const r=n.id;t.has(r)||t.set(r,this.transformLocaleData(n))})}}onChange(e){this.subscribe(Z3.OnChange,e)}localize(e,t="",...n){let r=t;return this._current&&(r=this._current.source.get(e)||t),n.length&&n.forEach(o=>{r=r.replace(Kz.LOCALIZE_REPLACED_WORD,o)}),r}};of.LOCALIZE_REPLACED_WORD="${i}";of=Kz=cUe([ji(),dUe("design:paramtypes",[])],of);function ft(i,e,...t){return Ue.resolve(of).localize(i,e,...t)}class Ngt extends re.PureComponent{constructor(e){super(e),this.state={localeId:""},this.getValue=()=>{const{sourceKey:t,defaultValue:n=""}=this.props;return this.localeService?this.localeService.localize(t,n):n}}componentDidMount(){var e;this.update((e=this.localeService.getCurrentLocale())===null||e===void 0?void 0:e.id),this.localeService.onChange((t,n)=>{this.update(n.id)})}update(e){this.setState({localeId:e})}get localeService(){return Ue.resolve(of)}render(){return this.getValue()}}var Co;(function(i){i.OnCloseTab="editor.closeTab",i.OnCloseAll="editor.closeAll",i.OnCloseOther="editor.closeOther",i.OnCloseToLeft="editor.closeToLeft",i.OnCloseToRight="editor.closeToRight",i.OnMoveTab="editor.moveTab",i.OpenTab="editor.openTab",i.OnSelectTab="editor.selectTab",i.OnUpdateTab="editor.updateTab",i.onActionsClick="editor.actionsClick",i.OnSplitEditorRight="editor.splitEditorRight"})(Co||(Co={}));class Gfe{constructor(e,t,n,r,o=[],s=[],a){this.id=e,this.data=r,this.menu=s,this.actions=o,this.tab=t,this.activeTab=n,this.editorInstance=a}}class qfe{constructor(e=null,t=[],n,r={}){this.current=e,this.groups=t,this.entry=n,this.editorOptions=r}}const hUe="modulepreload",fUe=function(i){return"/monaco-sql-languages/"+i},Ine={},It=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=fUe(o),o in Ine)return;Ine[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const f=r[h];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":hUe,s||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),s)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};const gUe={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class pUe extends Oe{constructor(e,t={}){super(),this._onDidUpdate=this._register(new be),this._editor=e,this._options=Eg(t,gUe,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=!!this._options.alwaysRevealFirst,this._register(this._editor.onDidDispose(()=>this.dispose())),this._register(this._editor.onDidUpdateDiff(()=>this._onDiffUpdated())),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition(n=>{this.ignoreSelectionChange||(this.nextIdx=-1)})),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel(n=>{this.revealFirst=!0})),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&this._editor.getLineChanges()!==null&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach(t=>{!this._options.ignoreCharChanges&&t.charChanges?t.charChanges.forEach(n=>{this.ranges.push({rhs:!0,range:new Q(n.modifiedStartLineNumber,n.modifiedStartColumn,n.modifiedEndLineNumber,n.modifiedEndColumn)})}):t.modifiedEndLineNumber===0?this.ranges.push({rhs:!0,range:new Q(t.modifiedStartLineNumber,1,t.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new Q(t.modifiedStartLineNumber,1,t.modifiedEndLineNumber+1,1)})}),this.ranges.sort((t,n)=>Q.compareRangesUsingStarts(t.range,n.range)),this._onDidUpdate.fire(this)}_initIdx(e){let t=!1,n=this._editor.getPosition();if(!n){this.nextIdx=0;return}for(let r=0,o=this.ranges.length;r<o&&!t;r++){let s=this.ranges[r].range;n.isBeforeOrEqual(s.getStartPosition())&&(this.nextIdx=r+(e?0:-1),t=!0)}t||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}_move(e,t){if(XP(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;this.nextIdx===-1?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));let n=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{let r=n.range.getStartPosition();this._editor.setPosition(r),this._editor.revealRangeInCenter(n.range,t)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}function mUe(i,e){return new _Ue(i,e)}class _Ue extends Zde{constructor(e,t){super(e,t.keepIdleModels||!1,t.label),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?hG(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const r=(a,u)=>e.fmr(a,u),o=(a,u)=>function(){const d=Array.prototype.slice.call(arguments,0);return u(a,d)};let s={};for(const a of n)s[a]=o(a,r);return s})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then(t=>this.getProxy())}}function vUe(i){return Array.isArray(i)}function bUe(i){return!vUe(i)}function Yfe(i){return typeof i=="string"}function kne(i){return!Yfe(i)}function mw(i){return!i}function l0(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function Tne(i){return i.replace(/[&<>'"_]/g,"-")}function CUe(i,e){console.log(`${i.languageId}: ${e}`)}function sr(i,e){return new Error(`${i.languageId}: ${e}`)}function Mv(i,e,t,n,r){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let s=null;return e.replace(o,function(a,u,d,h,f,p,m,v,b){return mw(d)?mw(h)?!mw(f)&&f<n.length?l0(i,n[f]):!mw(m)&&i&&typeof i[m]=="string"?i[m]:(s===null&&(s=r.split("."),s.unshift(r)),!mw(p)&&p<s.length?l0(i,s[p]):""):l0(i,t):"$"})}function aP(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return null}function wUe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const r=t.lastIndexOf(".");r<0?t=null:t=t.substr(0,r)}return!1}const Zfe=5;class pO{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new Sy(e,t);let n=Sy.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let r=this._entries[n];return r||(r=new Sy(e,t),this._entries[n]=r,r)}}pO._INSTANCE=new pO(Zfe);class Sy{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return Sy._equals(this,e)}push(e){return pO.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return pO.create(this.parent,e)}}class j2{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new j2(this.languageId,this.state)}}class Rv{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(t!==null)return new K2(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new K2(e,t);let n=Sy.getStackElementId(e),r=this._entries[n];return r||(r=new K2(e,null),this._entries[n]=r,r)}}Rv._INSTANCE=new Rv(Zfe);class K2{constructor(e,t){this.stack=e,this.embeddedModeData=t}clone(){return(this.embeddedModeData?this.embeddedModeData.clone():null)===this.embeddedModeData?this:Rv.create(this.stack,this.embeddedModeData)}equals(e){return!(e instanceof K2)||!this.stack.equals(e.stack)?!1:this.embeddedModeData===null&&e.embeddedModeData===null?!0:this.embeddedModeData===null||e.embeddedModeData===null?!1:this.embeddedModeData.equals(e.embeddedModeData)}}class yUe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterMode(e,t){this._languageId=t}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new W8(e,t,this._languageId)))}nestedModeTokenize(e,t,n,r){const o=n.languageId,s=n.state,a=Wr.get(o);if(!a)return this.enterMode(r,o),this.emit(r,""),s;let u=a.tokenize(e,t,s,r);return this._tokens=this._tokens.concat(u.tokens),this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,u.endState}finalize(e){return new XG(this._tokens,e)}}class X3{constructor(e,t){this._modeService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterMode(e,t){this._currentLanguageId=this._modeService.languageIdCodec.encodeLanguageId(t)}emit(e,t){let n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){let r=e!==null?e.length:0,o=t.length,s=n!==null?n.length:0;if(r===0&&o===0&&s===0)return new Uint32Array(0);if(r===0&&o===0)return n;if(o===0&&s===0)return e;let a=new Uint32Array(r+o+s);e!==null&&a.set(e);for(let u=0;u<o;u++)a[r+u]=t[u];return n!==null&&a.set(n,r+o),a}nestedModeTokenize(e,t,n,r){const o=n.languageId,s=n.state,a=Wr.get(o);if(!a)return this.enterMode(r,o),this.emit(r,""),s;let u=a.tokenize2(e,t,s,r);return this._prependTokens=X3._merge(this._prependTokens,this._tokens,u.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,u.endState}finalize(e){return new V8(X3._merge(this._prependTokens,this._tokens,null),e)}}class AB{constructor(e,t,n,r){this._modeService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=r,this._embeddedModes=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._tokenizationRegistryListener=Wr.onDidChange(s=>{if(o)return;let a=!1;for(let u=0,d=s.changedLanguages.length;u<d;u++){let h=s.changedLanguages[u];if(this._embeddedModes[h]){a=!0;break}}a&&(o=!0,Wr.fire([this._languageId]),o=!1)})}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){let e=[];for(let t in this._embeddedModes){const n=Wr.get(t);if(n){if(n instanceof AB){const o=n.getLoadStatus();o.loaded===!1&&e.push(o.promise)}continue}const r=Wr.getPromise(t);r&&e.push(r)}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){let e=pO.create(null,this._lexer.start);return Rv.create(e,null)}tokenize(e,t,n,r){let o=new yUe,s=this._tokenize(e,t,n,r,o);return o.finalize(s)}tokenize2(e,t,n,r){let o=new X3(this._modeService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,r,o);return o.finalize(s)}_tokenize(e,t,n,r,o){return n.embeddedModeData?this._nestedTokenize(e,t,n,r,o):this._myTokenize(e,t,n,r,o)}_findLeavingNestedModeOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=aP(this._lexer,t.stack.state),!n))throw sr(this._lexer,"tokenizer state is not defined: "+t.stack.state);let r=-1,o=!1;for(const s of n){if(!kne(s.action)||s.action.nextEmbedded!=="@pop")continue;o=!0;let a=s.regex,u=s.regex.source;if(u.substr(0,4)==="^(?:"&&u.substr(u.length-1,1)===")"){let h=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(u.substr(4,u.length-5),h)}let d=e.search(a);d===-1||d!==0&&s.matchOnlyAtLineStart||(r===-1||d<r)&&(r=d)}if(!o)throw sr(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return r}_nestedTokenize(e,t,n,r,o){let s=this._findLeavingNestedModeOffset(e,n);if(s===-1){let d=o.nestedModeTokenize(e,t,n.embeddedModeData,r);return Rv.create(n.stack,new j2(n.embeddedModeData.languageId,d))}let a=e.substring(0,s);a.length>0&&o.nestedModeTokenize(a,!1,n.embeddedModeData,r);let u=e.substring(s);return this._myTokenize(u,t,n,r+s,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,r,o){o.enterMode(r,this._languageId);const s=e.length,a=t&&this._lexer.includeLF?e+`
`:e,u=a.length;let d=n.embeddedModeData,h=n.stack,f=0,p=null,m=!0;for(;m||f<u;){const v=f,b=h.depth,L=p?p.groups.length:0,S=h.state;let y=null,E=null,A=null,N=null,V=null;if(p){y=p.matches;const K=p.groups.shift();E=K.matched,A=K.action,N=p.rule,p.groups.length===0&&(p=null)}else{if(!m&&f>=u)break;m=!1;let K=this._lexer.tokenizer[S];if(!K&&(K=aP(this._lexer,S),!K))throw sr(this._lexer,"tokenizer state is not defined: "+S);let X=a.substr(f);for(const $ of K)if((f===0||!$.matchOnlyAtLineStart)&&(y=X.match($.regex),y)){E=y[0],A=$.action;break}}if(y||(y=[""],E=""),A||(f<u&&(y=[a.charAt(f)],E=y[0]),A=this._lexer.defaultToken),E===null)break;for(f+=E.length;bUe(A)&&kne(A)&&A.test;)A=A.test(E,y,S,f===u);let R=null;if(typeof A=="string"||Array.isArray(A))R=A;else if(A.group)R=A.group;else if(A.token!==null&&A.token!==void 0){if(A.tokenSubst?R=Mv(this._lexer,A.token,E,y,S):R=A.token,A.nextEmbedded)if(A.nextEmbedded==="@pop"){if(!d)throw sr(this._lexer,"cannot pop embedded mode if not inside one");d=null}else{if(d)throw sr(this._lexer,"cannot enter embedded mode from within an embedded mode");V=Mv(this._lexer,A.nextEmbedded,E,y,S)}if(A.goBack&&(f=Math.max(0,f-A.goBack)),A.switchTo&&typeof A.switchTo=="string"){let K=Mv(this._lexer,A.switchTo,E,y,S);if(K[0]==="@"&&(K=K.substr(1)),aP(this._lexer,K))h=h.switchTo(K);else throw sr(this._lexer,"trying to switch to a state '"+K+"' that is undefined in rule: "+this._safeRuleName(N))}else{if(A.transform&&typeof A.transform=="function")throw sr(this._lexer,"action.transform not supported");if(A.next)if(A.next==="@push"){if(h.depth>=this._lexer.maxStack)throw sr(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(S)}else if(A.next==="@pop"){if(h.depth<=1)throw sr(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(N));h=h.pop()}else if(A.next==="@popall")h=h.popall();else{let K=Mv(this._lexer,A.next,E,y,S);if(K[0]==="@"&&(K=K.substr(1)),aP(this._lexer,K))h=h.push(K);else throw sr(this._lexer,"trying to set a next state '"+K+"' that is undefined in rule: "+this._safeRuleName(N))}}A.log&&typeof A.log=="string"&&CUe(this._lexer,this._lexer.languageId+": "+Mv(this._lexer,A.log,E,y,S))}if(R===null)throw sr(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(N));const M=K=>{let X=this._modeService.getModeIdForLanguageName(K);X&&(K=X);const $=this._getNestedEmbeddedModeData(K);if(f<u){const D=e.substr(f);return this._nestedTokenize(D,t,Rv.create(h,$),r+f,o)}else return Rv.create(h,$)};if(Array.isArray(R)){if(p&&p.groups.length>0)throw sr(this._lexer,"groups cannot be nested: "+this._safeRuleName(N));if(y.length!==R.length+1)throw sr(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(N));let K=0;for(let X=1;X<y.length;X++)K+=y[X].length;if(K!==E.length)throw sr(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(N));p={rule:N,matches:y,groups:[]};for(let X=0;X<R.length;X++)p.groups[X]={action:R[X],matched:y[X+1]};f-=E.length;continue}else{if(R==="@rematch"&&(f-=E.length,E="",y=null,R="",V!==null))return M(V);if(E.length===0){if(u===0||b!==h.depth||S!==h.state||(p?p.groups.length:0)!==L)continue;throw sr(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(N))}let K=null;if(Yfe(R)&&R.indexOf("@brackets")===0){let X=R.substr(9),$=SUe(this._lexer,E);if(!$)throw sr(this._lexer,"@brackets token returned but no bracket defined as: "+E);K=Tne($.token+X)}else{let X=R===""?"":R+this._lexer.tokenPostfix;K=Tne(X)}v<s&&o.emit(v+r,K)}if(V!==null)return M(V)}return Rv.create(h,d)}_getNestedEmbeddedModeData(e){let t=this._locateMode(e);if(t){let n=Wr.get(t);if(n)return new j2(t,n.getInitialState())}return new j2(t||S0,dM)}_locateMode(e){if(!e||!this._modeService.isRegisteredMode(e))return null;if(e===this._languageId)return e;const t=this._modeService.getModeId(e);return t&&(this._modeService.triggerMode(t),this._embeddedModes[t]=!0),t}}function SUe(i,e){if(!e)return null;e=l0(i,e);let t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}function LUe(i,e,t,n){return new AB(i,e,t,n)}var V6;const H6=(V6=window.trustedTypes)===null||V6===void 0?void 0:V6.createPolicy("standaloneColorizer",{createHTML:i=>i});class TY{static colorizeElement(e,t,n,r){r=r||{};let o=r.theme||"vs",s=r.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!s)return console.error("Mode not detected"),Promise.resolve();e.setTheme(o);let a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+o;let u=d=>{var h;const f=(h=H6==null?void 0:H6.createHTML(d))!==null&&h!==void 0?h:d;n.innerHTML=f};return this.colorize(t,a||"",s,r).then(u,d=>console.error(d))}static colorize(e,t,n,r){const o=e.languageIdCodec;let s=4;r&&typeof r.tabSize=="number"&&(s=r.tabSize),bG(t)&&(t=t.substr(1));let a=sg(t),u=e.getModeId(n);if(!u)return Promise.resolve(Nne(a,s,o));e.triggerMode(u);const d=Wr.get(u);if(d)return $6(a,s,d,o);const h=Wr.getPromise(u);return h?new Promise((f,p)=>{h.then(m=>{$6(a,s,m,o).then(f,p)},p)}):new Promise((f,p)=>{let m=null,v=null;const b=()=>{m&&(m.dispose(),m=null),v&&(v.dispose(),v=null);const L=Wr.get(u);if(L){$6(a,s,L,o).then(f,p);return}f(Nne(a,s,o))};v=new Oa,v.cancelAndSet(b,500),m=Wr.onDidChange(L=>{L.changedLanguages.indexOf(u)>=0&&b()})})}static colorizeLine(e,t,n,r,o=4){const s=Fu.isBasicASCII(e,t),a=Fu.containsRTL(e,s,n);return M8(new SC(!1,!0,e,!1,s,a,0,r,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){let r=e.getLineContent(t);e.forceTokenization(t);let s=e.getLineTokens(t).inflate();return this.colorizeLine(r,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,n)}}function $6(i,e,t,n){return new Promise((r,o)=>{const s=()=>{const a=EUe(i,e,t,n);if(t instanceof AB){const u=t.getLoadStatus();if(u.loaded===!1){u.promise.then(s,o);return}}r(a)};s()})}function Nne(i,e,t){let n=[];const o=new Uint32Array(2);o[0]=0,o[1]=16793600;for(let s=0,a=i.length;s<a;s++){let u=i[s];o[0]=u.length;const d=new es(o,u,t),h=Fu.isBasicASCII(u,!0),f=Fu.containsRTL(u,h,!0);let p=M8(new SC(!1,!0,u,!1,h,f,0,d,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(p.html),n.push("<br/>")}return n.join("")}function EUe(i,e,t,n){let r=[],o=t.getInitialState();for(let s=0,a=i.length;s<a;s++){let u=i[s],d=t.tokenize2(u,!0,o,0);es.convertToEndOffset(d.tokens,u.length);let h=new es(d.tokens,u,n);const f=Fu.isBasicASCII(u,!0),p=Fu.containsRTL(u,f,!0);let m=M8(new SC(!1,!0,u,!1,f,p,0,h.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(m.html),r.push("<br/>"),o=d.endState}return r.join("")}function Xfe(i,e,t){let n=new qhe(i,e),r=null;n.has(Qa)||(r=new L3(Ci.modelService.get()),n.set(Qa,r)),n.has(El)||n.set(El,new K3(n.get(ki),n.get(kr)));let o=t(n);return r&&r.setEditor(o),o}function xUe(i,e,t){return Xfe(i,t||{},n=>new tO(i,e,n,n.get(An),n.get(ki),n.get(kr),n.get(dn),n.get(Sr),n.get($p),n.get(K0),n.get(fo),n.get(nr),n.get(il),n.get(Io),n.get(Fs)))}function DUe(i){return Ci.codeEditorService.get().onCodeEditorAdd(e=>{i(e)})}function IUe(i,e,t){return Xfe(i,t||{},n=>new s$(i,e,n,n.get(An),n.get(dn),n.get(Sr),n.get($p),n.get(Hu),n.get(ki),n.get(K0),n.get(fo),n.get(nr),n.get(U0),n.get(zp),n.get(j0)))}function kUe(i,e){return new pUe(i,e)}function TUe(i,e,t){return Ude(Ci.modelService.get(),Ci.modeService.get(),i,e,t)}function NUe(i,e){Ci.modelService.get().setMode(i,Ci.modeService.get().create(e))}function AUe(i,e,t){i&&Ci.markerService.get().changeOne(e,i.uri,t)}function OUe(i){return Ci.markerService.get().read(i)}function MUe(i){return Ci.markerService.get().onMarkerChanged(i)}function RUe(i){return Ci.modelService.get().getModel(i)}function PUe(){return Ci.modelService.get().getModels()}function FUe(i){return Ci.modelService.get().onModelAdded(i)}function BUe(i){return Ci.modelService.get().onModelRemoved(i)}function WUe(i){return Ci.modelService.get().onModelModeChanged(e=>{i({model:e.model,oldLanguage:e.oldModeId})})}function VUe(i){return mUe(Ci.modelService.get(),i)}function HUe(i,e){const t=Ci.standaloneThemeService.get();return t.registerEditorContainer(i),TY.colorizeElement(t,Ci.modeService.get(),i,e)}function $Ue(i,e,t){return Ci.standaloneThemeService.get().registerEditorContainer(document.body),TY.colorize(Ci.modeService.get(),i,e,t)}function zUe(i,e,t=4){return Ci.standaloneThemeService.get().registerEditorContainer(document.body),TY.colorizeModelLine(i,e,t)}function UUe(i){let e=Wr.get(i);return e||{getInitialState:()=>dM,tokenize:(t,n,r,o)=>Hce(i,t,r,o)}}function jUe(i,e){Ci.modeService.get().triggerMode(e);let n=UUe(e),r=sg(i),o=[],s=n.getInitialState();for(let a=0,u=r.length;a<u;a++){let d=r[a],h=n.tokenize(d,!0,s,0);o[a]=h.tokens,s=h.endState}return o}function KUe(i,e){Ci.standaloneThemeService.get().defineTheme(i,e)}function GUe(i){Ci.standaloneThemeService.get().setTheme(i)}function qUe(){NDe()}function YUe(i,e){return Qn.registerCommand({id:i,handler:e})}function ZUe(){return{create:xUe,onDidCreateEditor:DUe,createDiffEditor:IUe,createDiffNavigator:kUe,createModel:TUe,setModelLanguage:NUe,setModelMarkers:AUe,getModelMarkers:OUe,onDidChangeMarkers:MUe,getModels:PUe,getModel:RUe,onDidCreateModel:FUe,onWillDisposeModel:BUe,onDidChangeModelLanguage:WUe,createWebWorker:VUe,colorizeElement:HUe,colorize:$Ue,colorizeModelLine:zUe,tokenize:jUe,defineTheme:KUe,setTheme:GUe,remeasureFonts:qUe,registerCommand:YUe,AccessibilitySupport:d$,ContentWidgetPositionPreference:m$,CursorChangeReason:_$,DefaultEndOfLine:v$,EditorAutoIndentStrategy:C$,EditorOption:w$,EndOfLinePreference:y$,EndOfLineSequence:S$,MinimapPosition:T$,MouseTargetType:N$,OverlayWidgetPositionPreference:A$,OverviewRulerLane:O$,RenderLineNumbersType:M$,RenderMinimap:R$,ScrollbarVisibility:F$,ScrollType:P$,TextEditorCursorBlinkingStyle:$$,TextEditorCursorStyle:z$,TrackedRangeStickiness:U$,WrappingIndent:j$,ConfigurationChangedEvent:Bue,BareFontInfo:Y1,FontInfo:LH,TextModelResolvedOptions:t4,FindMatch:DA,ApplyUpdateResult:E2,EditorType:_M,EditorOptions:lf}}function XUe(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function lP(i,e){return typeof i=="boolean"?i:e}function Ane(i,e){return typeof i=="string"?i:e}function QUe(i){const e={};for(const t of i)e[t]=!0;return e}function One(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=QUe(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function qz(i,e){e=e.replace(/@@/g,"");let t=0,n;do n=!1,e=e.replace(/@(\w+)/g,function(o,s){n=!0;let a="";if(typeof i[s]=="string")a=i[s];else if(i[s]&&i[s]instanceof RegExp)a=i[s].source;else throw i[s]===void 0?sr(i,"language definition does not contain attribute '"+s+"', used at: "+e):sr(i,"attribute reference '"+s+"' must be a string, used at: "+e);return mw(a)?"":"(?:"+a+")"}),t++;while(n&&t<5);e=e.replace(/\x01/g,"@");let r=(i.ignoreCase?"i":"")+(i.unicode?"u":"");return new RegExp(e,r)}function JUe(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;let r=t.split(".");if(r.unshift(t),n<r.length)return r[n]}return null}function eje(i,e,t,n){let r=-1,o=t,s=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(r=parseInt(s[3]),s[2]&&(r=r+100)),o=s[4]);let a="~",u=o;!o||o.length===0?(a="!=",u=""):/^\w*$/.test(u)?a="==":(s=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],u=s[2]));let d;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(u)){let h=One(u.split("|"),i.ignoreCase);d=function(f){return a==="~"?h(f):!h(f)}}else if(a==="@"||a==="!@"){let h=i[u];if(!h)throw sr(i,"the @ match target '"+u+"' is not defined, in rule: "+e);if(!XUe(function(p){return typeof p=="string"},h))throw sr(i,"the @ match target '"+u+"' must be an array of strings, in rule: "+e);let f=One(h,i.ignoreCase);d=function(p){return a==="@"?f(p):!f(p)}}else if(a==="~"||a==="!~")if(u.indexOf("$")<0){let h=qz(i,"^"+u+"$");d=function(f){return a==="~"?h.test(f):!h.test(f)}}else d=function(h,f,p,m){return qz(i,"^"+Mv(i,u,f,p,m)+"$").test(h)};else if(u.indexOf("$")<0){let h=l0(i,u);d=function(f){return a==="=="?f===h:f!==h}}else{let h=l0(i,u);d=function(f,p,m,v,b){let L=Mv(i,h,p,m,v);return a==="=="?f===L:f!==L}}return r===-1?{name:t,value:n,test:function(h,f,p,m){return d(h,h,f,p,m)}}:{name:t,value:n,test:function(h,f,p,m){let v=JUe(h,f,p,r);return d(v||"",h,f,p,m)}}}function Yz(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw sr(i,"a 'token' attribute must be of type string, in rule: "+e);{let n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw sr(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw sr(i,"the next state must be a string value in rule: "+e);{let r=t.next;if(!/^(@pop|@push|@popall)$/.test(r)&&(r[0]==="@"&&(r=r.substr(1)),r.indexOf("$")<0&&!wUe(i,Mv(i,r,"",[],""))))throw sr(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=r}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){let n=[];for(let r=0,o=t.length;r<o;r++)n[r]=Yz(i,e,t[r]);return{group:n}}else if(t.cases){let n=[];for(let o in t.cases)if(t.cases.hasOwnProperty(o)){const s=Yz(i,e,t.cases[o]);o==="@default"||o==="@"||o===""?n.push({test:void 0,value:s,name:o}):o==="@eos"?n.push({test:function(a,u,d,h){return h},value:s,name:o}):n.push(eje(i,e,o,s))}const r=i.defaultToken;return{test:function(o,s,a,u){for(const d of n)if(!d.test||d.test(o,s,a,u))return d.value;return r}}}else throw sr(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class tje{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw sr(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=qz(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=Yz(e,this.name,t)}}function nje(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");let t={};t.languageId=i,t.includeLF=lP(e.includeLF,!1),t.noThrow=!1,t.maxStack=100,t.start=typeof e.start=="string"?e.start:null,t.ignoreCase=lP(e.ignoreCase,!1),t.unicode=lP(e.unicode,!1),t.tokenPostfix=Ane(e.tokenPostfix,"."+t.languageId),t.defaultToken=Ane(e.defaultToken,"source"),t.usesEmbedded=!1;let n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function r(s,a,u){for(const d of u){let h=d.include;if(h){if(typeof h!="string")throw sr(t,"an 'include' attribute must be a string at: "+s);if(h[0]==="@"&&(h=h.substr(1)),!e.tokenizer[h])throw sr(t,"include target '"+h+"' is not defined at: "+s);r(s+"."+h,a,e.tokenizer[h])}else{const f=new tje(s);if(Array.isArray(d)&&d.length>=1&&d.length<=3)if(f.setRegex(n,d[0]),d.length>=3)if(typeof d[1]=="string")f.setAction(n,{token:d[1],next:d[2]});else if(typeof d[1]=="object"){const p=d[1];p.next=d[2],f.setAction(n,p)}else throw sr(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+s);else f.setAction(n,d[1]);else{if(!d.regex)throw sr(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+s);d.name&&typeof d.name=="string"&&(f.name=d.name),d.matchOnlyAtStart&&(f.matchOnlyAtLineStart=lP(d.matchOnlyAtLineStart,!1)),f.setRegex(n,d.regex),f.setAction(n,d.action)}a.push(f)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw sr(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(let s in e.tokenizer)if(e.tokenizer.hasOwnProperty(s)){t.start||(t.start=s);const a=e.tokenizer[s];t.tokenizer[s]=new Array,r("tokenizer."+s,t.tokenizer[s],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw sr(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];let o=[];for(let s of e.brackets){let a=s;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw sr(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:l0(t,a.open),close:l0(t,a.close)});else throw sr(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function ije(i){sb.registerLanguage(i)}function rje(){let i=[];return i=i.concat(sb.getLanguages()),i}function oje(i){return Ci.modeService.get().languageIdCodec.encodeLanguageId(i)}function sje(i,e){let t=Ci.modeService.get().onDidEncounterLanguage(n=>{n===i&&(t.dispose(),e())});return t}function aje(i,e){const t=Ci.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set configuration for unknown language ${i}`);return vi.register(t,e,100)}class lje{constructor(e,t){this._languageId=e,this._actual=t}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n,r){if(typeof this._actual.tokenize=="function")return mO.adaptTokenize(this._languageId,this._actual,e,n,r);throw new Error("Not supported!")}tokenize2(e,t,n){let r=this._actual.tokenizeEncoded(e,n);return new V8(r.tokens,r.endState)}}class mO{constructor(e,t,n,r){this._languageId=e,this._actual=t,this._modeService=n,this._standaloneThemeService=r}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t,n){let r=[],o=0;for(let s=0,a=e.length;s<a;s++){const u=e[s];let d=u.startIndex;s===0?d=0:d<o&&(d=o),r[s]=new W8(d+n,u.scopes,t),o=d}return r}static adaptTokenize(e,t,n,r,o){let s=t.tokenize(n,r),a=mO._toClassicTokens(s.tokens,e,o),u;return s.endState.equals(r)?u=r:u=s.endState,new XG(a,u)}tokenize(e,t,n,r){return mO.adaptTokenize(this._languageId,this._actual,e,n,r)}_toBinaryTokens(e,t,n){const r=e.encodeLanguageId(this._languageId),o=this._standaloneThemeService.getColorTheme().tokenTheme;let s=[],a=0,u=0;for(let h=0,f=t.length;h<f;h++){const p=t[h],m=o.match(r,p.scopes);if(a>0&&s[a-1]===m)continue;let v=p.startIndex;h===0?v=0:v<u&&(v=u),s[a++]=v+n,s[a++]=m,u=v}let d=new Uint32Array(a);for(let h=0;h<a;h++)d[h]=s[h];return d}tokenize2(e,t,n,r){let o=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._modeService.languageIdCodec,o.tokens,r),a;return o.endState.equals(n)?a=n:a=o.endState,new V8(s,a)}}function uje(i){return"tokenizeEncoded"in i}function Qfe(i){return i&&typeof i.then=="function"}function cje(i){if(i){const e=[null];for(let t=1,n=i.length;t<n;t++)e[t]=ye.fromHex(i[t]);Ci.standaloneThemeService.get().setColorMapOverride(e)}else Ci.standaloneThemeService.get().setColorMapOverride(null)}function dje(i,e){const t=Ci.modeService.get().validateLanguageId(i);if(!t)throw new Error(`Cannot set tokens provider for unknown language ${i}`);const n=r=>uje(r)?new lje(t,r):new mO(t,r,Ci.modeService.get(),Ci.standaloneThemeService.get());return Qfe(e)?Wr.registerPromise(i,e.then(r=>n(r))):Wr.register(i,n(e))}function hje(i,e){const t=n=>LUe(Ci.modeService.get(),Ci.standaloneThemeService.get(),i,nje(i,n));return Qfe(e)?Wr.registerPromise(i,e.then(n=>t(n))):Wr.register(i,t(e))}function fje(i,e){return KF.register(i,e)}function gje(i,e){return GF.register(i,e)}function pje(i,e){return eb.register(i,e)}function mje(i,e){return kA.register(i,{provideHover:(t,n,r)=>{let o=t.getWordAtPosition(n);return Promise.resolve(e.provideHover(t,n,r)).then(s=>{if(s)return!s.range&&o&&(s.range=new Q(n.lineNumber,o.startColumn,n.lineNumber,o.endColumn)),s.range||(s.range=new Q(n.lineNumber,n.column,n.lineNumber,n.column)),s})}})}function _je(i,e){return Yc.register(i,e)}function vje(i,e){return jy.register(i,e)}function bje(i,e){return qF.register(i,e)}function Cje(i,e){return TA.register(i,e)}function wje(i,e){return ZF.register(i,e)}function yje(i,e){return XF.register(i,e)}function Sje(i,e){return rp.register(i,e)}function Lje(i,e,t){return ng.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,provideCodeActions:(n,r,o,s)=>{let a=Ci.markerService.get().read({resource:n.uri}).filter(u=>Q.areIntersectingOrTouching(u,r));return e.provideCodeActions(n,r,{markers:a,only:o.only},s)},resolveCodeAction:e.resolveCodeAction})}function Eje(i,e){return O2.register(i,e)}function xje(i,e){return Mh.register(i,e)}function Dje(i,e){return QF.register(i,e)}function Ije(i,e){return NA.register(i,e)}function kje(i,e){return Oh.register(i,e)}function Tje(i,e){return Ky.register(i,e)}function Nje(i,e){return WH.register(i,e)}function Aje(i,e){return YF.register(i,e)}function Oje(i,e){return F8.register(i,e)}function Mje(i,e){return Gy.register(i,e)}function Rje(i,e){return B8.register(i,e)}function Pje(i,e){return qG.register(i,e)}function Fje(i,e){return Hv.register(i,e)}function Bje(){return{register:ije,getLanguages:rje,onLanguage:sje,getEncodedLanguageId:oje,setLanguageConfiguration:aje,setColorMap:cje,setTokensProvider:dje,setMonarchTokensProvider:hje,registerReferenceProvider:fje,registerRenameProvider:gje,registerCompletionItemProvider:kje,registerSignatureHelpProvider:pje,registerHoverProvider:mje,registerDocumentSymbolProvider:_je,registerDocumentHighlightProvider:vje,registerLinkedEditingRangeProvider:bje,registerDefinitionProvider:Cje,registerImplementationProvider:wje,registerTypeDefinitionProvider:yje,registerCodeLensProvider:Sje,registerCodeActionProvider:Lje,registerDocumentFormattingEditProvider:Eje,registerDocumentRangeFormattingEditProvider:xje,registerOnTypeFormattingEditProvider:Dje,registerLinkProvider:Ije,registerColorProvider:Tje,registerFoldingRangeProvider:Nje,registerDeclarationProvider:Aje,registerSelectionRangeProvider:Oje,registerDocumentSemanticTokensProvider:Mje,registerDocumentRangeSemanticTokensProvider:Rje,registerInlineCompletionsProvider:Pje,registerInlayHintsProvider:Fje,DocumentHighlightKind:b$,CompletionItemKind:f$,CompletionItemTag:g$,CompletionItemInsertTextRule:h$,SymbolKind:V$,SymbolTag:H$,IndentAction:L$,CompletionTriggerKind:p$,SignatureHelpTriggerKind:W$,InlayHintKind:E$,InlineCompletionTriggerKind:x$,FoldingRangeKind:tf}}class oS{static _handleEolEdits(e,t){let n,r=[];for(let o of t)typeof o.eol=="number"&&(n=o.eol),o.range&&typeof o.text=="string"&&r.push(o);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),r}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),r=n.validateRange(t.range);return n.getFullModelRange().equalsRange(r)}static execute(e,t,n){n&&e.pushUndoStop();const r=oS._handleEolEdits(e,t);r.length===1&&oS._isFullModelReplaceEdit(e,r[0])?e.executeEdits("formatEditsCommand",r.map(o=>jr.replace(Q.lift(o.range),o.text))):e.executeEdits("formatEditsCommand",r.map(o=>jr.replaceMove(Q.lift(o.range),o.text))),n&&e.pushUndoStop()}}class z6{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}var sf=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function NY(i){if(i=i.filter(r=>r.range),!i.length)return;let{range:e}=i[0];for(let r=1;r<i.length;r++)e=Q.plusRange(e,i[r].range);const{startLineNumber:t,endLineNumber:n}=e;t===n?i.length===1?ks(C("hint11","Made 1 formatting edit on line {0}",t)):ks(C("hintn1","Made {0} formatting edits on line {1}",i.length,t)):i.length===1?ks(C("hint1n","Made 1 formatting edit between lines {0} and {1}",t,n)):ks(C("hintnn","Made {0} formatting edits between lines {1} and {2}",i.length,t,n))}function Jfe(i){const e=[],t=new Set,n=O2.ordered(i);for(const o of n)e.push(o),o.extensionId&&t.add(z6.toKey(o.extensionId));const r=Mh.ordered(i);for(const o of r){if(o.extensionId){if(t.has(z6.toKey(o.extensionId)))continue;t.add(z6.toKey(o.extensionId))}e.push({displayName:o.displayName,extensionId:o.extensionId,provideDocumentFormattingEdits(s,a,u){return o.provideDocumentRangeFormattingEdits(s,s.getFullModelRange(),a,u)}})}return e}class Hb{static setFormatterSelector(e){return{dispose:Hb._selectors.unshift(e)}}static select(e,t,n){return sf(this,void 0,void 0,function*(){if(e.length===0)return;const r=Jn.first(Hb._selectors);if(r)return yield r(e,t,n)})}}Hb._selectors=new Tu;function ege(i,e,t,n,r,o){return sf(this,void 0,void 0,function*(){const s=i.get(An),a=dg(e)?e.getModel():e,u=Mh.ordered(a),d=yield Hb.select(u,a,n);d&&(r.report(d),yield s.invokeFunction(Wje,d,e,t,o))})}function Wje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const o=i.get(Hu);let s,a;dg(t)?(s=t.getModel(),a=new YA(t,5,void 0,r)):(s=t,a=new yq(t,r));let u=[],d=0;for(let v of EG(n).sort(Q.compareRangesUsingStarts))d>0&&Q.areIntersectingOrTouching(u[d-1],v)?u[d-1]=Q.fromPositions(u[d-1].getStartPosition(),v.getEndPosition()):d=u.push(v);const h=v=>sf(this,void 0,void 0,function*(){return(yield e.provideDocumentRangeFormattingEdits(s,v,s.getFormattingOptions(),a.token))||[]}),f=(v,b)=>{if(!v.length||!b.length)return!1;const L=v.reduce((S,y)=>Q.plusRange(S,y.range),v[0].range);if(!b.some(S=>Q.intersectRanges(L,S.range)))return!1;for(let S of v)for(let y of b)if(Q.intersectRanges(S.range,y.range))return!0;return!1},p=[],m=[];try{for(let v of u){if(a.token.isCancellationRequested)return!0;m.push(yield h(v))}for(let v=0;v<u.length;++v)for(let b=v+1;b<u.length;++b){if(a.token.isCancellationRequested)return!0;if(f(m[v],m[b])){const L=Q.plusRange(u[v],u[b]),S=yield h(L);u.splice(b,1),u.splice(v,1),u.push(L),m.splice(b,1),m.splice(v,1),m.push(S),v=0,b=0}}for(let v of m){if(a.token.isCancellationRequested)return!0;const b=yield o.computeMoreMinimalEdits(s.uri,v);b&&p.push(...b)}}finally{a.dispose()}if(p.length===0)return!1;if(dg(t))oS.execute(t,p,!0),NY(p),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:v}]=p,b=new yt(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn);s.pushEditOperations([b],p.map(L=>({text:L.text,range:Q.lift(L.range),forceMoveMarkers:!0})),L=>{for(const{range:S}of L)if(Q.areIntersectingOrTouching(S,b))return[new yt(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn)];return null})}return!0})}function Vje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const o=i.get(An),s=dg(e)?e.getModel():e,a=Jfe(s),u=yield Hb.select(a,s,t);u&&(n.report(u),yield o.invokeFunction(Hje,u,e,t,r))})}function Hje(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const o=i.get(Hu);let s,a;dg(t)?(s=t.getModel(),a=new YA(t,5,void 0,r)):(s=t,a=new yq(t,r));let u;try{const d=yield e.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(u=yield o.computeMoreMinimalEdits(s.uri,d),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!u||u.length===0)return!1;if(dg(t))oS.execute(t,u,n!==2),n!==2&&(NY(u),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1));else{const[{range:d}]=u,h=new yt(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn);s.pushEditOperations([h],u.map(f=>({text:f.text,range:Q.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:p}of f)if(Q.areIntersectingOrTouching(p,h))return[new yt(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn)];return null})}return!0})}function $je(i,e,t,n,r){return sf(this,void 0,void 0,function*(){const o=Mh.ordered(e);for(const s of o){let a=yield Promise.resolve(s.provideDocumentRangeFormattingEdits(e,t,n,r)).catch(Rs);if(vl(a))return yield i.computeMoreMinimalEdits(e.uri,a)}})}function zje(i,e,t,n){return sf(this,void 0,void 0,function*(){const r=Jfe(e);for(const o of r){let s=yield Promise.resolve(o.provideDocumentFormattingEdits(e,t,n)).catch(Rs);if(vl(s))return yield i.computeMoreMinimalEdits(e.uri,s)}})}function tge(i,e,t,n,r){const o=QF.ordered(e);return o.length===0||o[0].autoFormatTriggerCharacters.indexOf(n)<0?Promise.resolve(void 0):Promise.resolve(o[0].provideOnTypeFormattingEdits(e,t,n,r,Vn.None)).catch(Rs).then(s=>i.computeMoreMinimalEdits(e.uri,s))}Qn.registerCommand("_executeFormatRangeProvider",function(i,...e){return sf(this,void 0,void 0,function*(){const[t,n,r]=e;Gi(sn.isUri(t)),Gi(Q.isIRange(n));const o=i.get(Qa),s=i.get(Hu),a=yield o.createModelReference(t);try{return $je(s,a.object.textEditorModel,Q.lift(n),r,Vn.None)}finally{a.dispose()}})});Qn.registerCommand("_executeFormatDocumentProvider",function(i,...e){return sf(this,void 0,void 0,function*(){const[t,n]=e;Gi(sn.isUri(t));const r=i.get(Qa),o=i.get(Hu),s=yield r.createModelReference(t);try{return zje(o,s.object.textEditorModel,n,Vn.None)}finally{s.dispose()}})});Qn.registerCommand("_executeFormatOnTypeProvider",function(i,...e){return sf(this,void 0,void 0,function*(){const[t,n,r,o]=e;Gi(sn.isUri(t)),Gi(Le.isIPosition(n)),Gi(typeof r=="string");const s=i.get(Qa),a=i.get(Hu),u=yield s.createModelReference(t);try{return tge(a,u.object.textEditorModel,Le.lift(n),r,o)}finally{u.dispose()}})});var U6;lf.wrappingIndent.defaultValue=0;lf.glyphMargin.defaultValue=!1;lf.autoIndent.defaultValue=3;lf.overviewRulerLanes.defaultValue=2;Hb.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const Ma=qde();Ma.editor=ZUe();Ma.languages=Bje();const Uje=Ma.CancellationTokenSource,nge=Ma.Emitter,ln=Ma.KeyCode,el=Ma.KeyMod,jje=Ma.Position,Kje=Ma.Range,Gje=Ma.Selection,qje=Ma.SelectionDirection,Yje=Ma.MarkerSeverity,Zje=Ma.MarkerTag,sS=Ma.Uri,Xje=Ma.Token,Cl=Ma.editor,nc=Ma.languages;(!((U6=qr.MonacoEnvironment)===null||U6===void 0)&&U6.globalAPI||typeof define=="function"&&define.amd)&&(self.monaco=Ma);typeof self.require<"u"&&typeof self.require.config=="function"&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const AM=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:Uje,Emitter:nge,KeyCode:ln,KeyMod:el,MarkerSeverity:Yje,MarkerTag:Zje,Position:jje,Range:Kje,Selection:Gje,SelectionDirection:qje,Token:Xje,Uri:sS,editor:Cl,languages:nc},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var ige=Object.defineProperty,Qje=Object.getOwnPropertyDescriptor,Jje=Object.getOwnPropertyNames,eKe=Object.prototype.hasOwnProperty,tKe=i=>ige(i,"__esModule",{value:!0}),nKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Jje(e))!eKe.call(i,n)&&n!=="default"&&ige(i,n,{get:()=>e[n],enumerable:!(t=Qje(e,n))||t.enumerable});return i},iKe="4.4.4",$b={};tKe($b);nKe($b,AM);var Zz;(function(i){i[i.None=0]="None",i[i.CommonJS=1]="CommonJS",i[i.AMD=2]="AMD",i[i.UMD=3]="UMD",i[i.System=4]="System",i[i.ES2015=5]="ES2015",i[i.ESNext=99]="ESNext"})(Zz||(Zz={}));var Xz;(function(i){i[i.None=0]="None",i[i.Preserve=1]="Preserve",i[i.React=2]="React",i[i.ReactNative=3]="ReactNative",i[i.ReactJSX=4]="ReactJSX",i[i.ReactJSXDev=5]="ReactJSXDev"})(Xz||(Xz={}));var Qz;(function(i){i[i.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",i[i.LineFeed=1]="LineFeed"})(Qz||(Qz={}));var Jz;(function(i){i[i.ES3=0]="ES3",i[i.ES5=1]="ES5",i[i.ES2015=2]="ES2015",i[i.ES2016=3]="ES2016",i[i.ES2017=4]="ES2017",i[i.ES2018=5]="ES2018",i[i.ES2019=6]="ES2019",i[i.ES2020=7]="ES2020",i[i.ESNext=99]="ESNext",i[i.JSON=100]="JSON",i[i.Latest=99]="Latest"})(Jz||(Jz={}));var eU;(function(i){i[i.Classic=1]="Classic",i[i.NodeJs=2]="NodeJs"})(eU||(eU={}));var rge=class{constructor(e,t,n,r){this._onDidChange=new $b.Emitter,this._onDidExtraLibsChange=new $b.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(n),this.setInlayHintsOptions(r),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let n;if(typeof t>"u"?n=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:n=t,this._extraLibs[n]&&this._extraLibs[n].content===e)return{dispose:()=>{}};let r=1;return this._removedExtraLibs[n]&&(r=this._removedExtraLibs[n]+1),this._extraLibs[n]&&(r=this._extraLibs[n].version+1),this._extraLibs[n]={content:e,version:r},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let o=this._extraLibs[n];o&&o.version===r&&(delete this._extraLibs[n],this._removedExtraLibs[n]=r,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(const t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(const t of e){const n=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,r=t.content;let o=1;this._removedExtraLibs[n]&&(o=this._removedExtraLibs[n]+1),this._extraLibs[n]={content:r,version:o}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}},rKe=iKe,oge=new rge({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{}),sge=new rge({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{}),oKe=()=>OB().then(i=>i.getTypeScriptWorker()),sKe=()=>OB().then(i=>i.getJavaScriptWorker());$b.languages.typescript={ModuleKind:Zz,JsxEmit:Xz,NewLineKind:Qz,ScriptTarget:Jz,ModuleResolutionKind:eU,typescriptVersion:rKe,typescriptDefaults:oge,javascriptDefaults:sge,getTypeScriptWorker:oKe,getJavaScriptWorker:sKe};function OB(){return It(()=>import("./tsMode-e23b4cd2.js"),[])}$b.languages.onLanguage("typescript",()=>OB().then(i=>i.setupTypeScript(oge)));$b.languages.onLanguage("javascript",()=>OB().then(i=>i.setupJavaScript(sge)));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var age=Object.defineProperty,aKe=Object.getOwnPropertyDescriptor,lKe=Object.getOwnPropertyNames,uKe=Object.prototype.hasOwnProperty,cKe=i=>age(i,"__esModule",{value:!0}),dKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of lKe(e))!uKe.call(i,n)&&n!=="default"&&age(i,n,{get:()=>e[n],enumerable:!(t=aKe(e,n))||t.enumerable});return i},AC={};cKe(AC);dKe(AC,AM);var AY=class{constructor(e,t,n){this._onDidChange=new AC.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},OY={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},MY={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},lge=new AY("css",OY,MY),uge=new AY("scss",OY,MY),cge=new AY("less",OY,MY);AC.languages.css={cssDefaults:lge,lessDefaults:cge,scssDefaults:uge};function RY(){return It(()=>import("./cssMode-feabf5b2.js"),[])}AC.languages.onLanguage("less",()=>{RY().then(i=>i.setupMode(cge))});AC.languages.onLanguage("scss",()=>{RY().then(i=>i.setupMode(uge))});AC.languages.onLanguage("css",()=>{RY().then(i=>i.setupMode(lge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var dge=Object.defineProperty,hKe=Object.getOwnPropertyDescriptor,fKe=Object.getOwnPropertyNames,gKe=Object.prototype.hasOwnProperty,pKe=i=>dge(i,"__esModule",{value:!0}),mKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of fKe(e))!gKe.call(i,n)&&n!=="default"&&dge(i,n,{get:()=>e[n],enumerable:!(t=hKe(e,n))||t.enumerable});return i},eL={};pKe(eL);mKe(eL,AM);var _Ke=class{constructor(e,t,n){this._onDidChange=new eL.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},vKe={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},bKe={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},hge=new _Ke("json",vKe,bKe);eL.languages.json={jsonDefaults:hge};function CKe(){return It(()=>import("./jsonMode-f429fa13.js"),[])}eL.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});eL.languages.onLanguage("json",()=>{CKe().then(i=>i.setupMode(hge))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var fge=Object.defineProperty,wKe=Object.getOwnPropertyDescriptor,yKe=Object.getOwnPropertyNames,SKe=Object.prototype.hasOwnProperty,LKe=i=>fge(i,"__esModule",{value:!0}),EKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of yKe(e))!SKe.call(i,n)&&n!=="default"&&fge(i,n,{get:()=>e[n],enumerable:!(t=wKe(e,n))||t.enumerable});return i},OM={};LKe(OM);EKe(OM,AM);var xKe=class{constructor(e,t,n){this._onDidChange=new OM.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},DKe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},MB={format:DKe,suggest:{},data:{useDefaultDataProvider:!0}};function RB(i){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:i===G2,documentFormattingEdits:i===G2,documentRangeFormattingEdits:i===G2}}var G2="html",Mne="handlebars",Rne="razor",gge=PB(G2,MB,RB(G2)),IKe=gge.defaults,pge=PB(Mne,MB,RB(Mne)),kKe=pge.defaults,mge=PB(Rne,MB,RB(Rne)),TKe=mge.defaults;OM.languages.html={htmlDefaults:IKe,razorDefaults:TKe,handlebarDefaults:kKe,htmlLanguageService:gge,handlebarLanguageService:pge,razorLanguageService:mge,registerHTMLLanguageService:PB};function NKe(){return It(()=>import("./htmlMode-eee44be5.js"),[])}function PB(i,e=MB,t=RB(i)){const n=new xKe(i,e,t);let r;const o=OM.languages.onLanguage(i,async()=>{r=(await NKe()).setupMode(n)});return{defaults:n,dispose(){o.dispose(),r==null||r.dispose(),r=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.31.0(252e010eb73ddc2fa1a37c1dade7bf35d87106cd)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var _ge=Object.defineProperty,AKe=Object.getOwnPropertyDescriptor,OKe=Object.getOwnPropertyNames,MKe=Object.prototype.hasOwnProperty,RKe=i=>_ge(i,"__esModule",{value:!0}),PKe=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of OKe(e))!MKe.call(i,n)&&n!=="default"&&_ge(i,n,{get:()=>e[n],enumerable:!(t=AKe(e,n))||t.enumerable});return i},Uw={};RKe(Uw);PKe(Uw,AM);var vge={},j6={},bge=class{static getOrCreate(e){return j6[e]||(j6[e]=new bge(e)),j6[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,vge[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function Ut(i){const e=i.id;vge[e]=i,Uw.languages.register(i);const t=bge.getOrCreate(e);Uw.languages.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),Uw.languages.onLanguage(e,()=>{t.load().then(n=>{Uw.languages.setLanguageConfiguration(e,n.conf)})})}Ut({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>It(()=>import("./abap-c25c4b29.js"),[])});Ut({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>It(()=>import("./apex-90b58cb1.js"),[])});Ut({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>It(()=>import("./azcli-c8384527.js"),[])});Ut({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>It(()=>import("./bat-dd03db3a.js"),[])});Ut({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>It(()=>import("./bicep-b5110554.js"),[])});Ut({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>It(()=>import("./cameligo-3323522b.js"),[])});Ut({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>It(()=>import("./clojure-d45fb7b6.js"),[])});Ut({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>It(()=>import("./coffee-912c6d0d.js"),[])});Ut({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>It(()=>import("./cpp-30cc099a.js"),[])});Ut({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>It(()=>import("./cpp-30cc099a.js"),[])});Ut({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>It(()=>import("./csharp-0553c8db.js"),[])});Ut({id:"csp",extensions:[],aliases:["CSP","csp"],loader:()=>It(()=>import("./csp-dbe8a1fa.js"),[])});Ut({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>It(()=>import("./css-64c40e4a.js"),[])});Ut({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>It(()=>import("./dart-4b7e6961.js"),[])});Ut({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>It(()=>import("./dockerfile-1b41f08d.js"),[])});Ut({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>It(()=>import("./ecl-eaf29bcc.js"),[])});Ut({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>It(()=>import("./elixir-4f68332f.js"),[])});Ut({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>It(()=>import("./flow9-6536bbb8.js"),[])});Ut({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>It(()=>import("./fsharp-d4a13be8.js"),[])});Ut({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>It(()=>import("./go-514c6bed.js"),[])});Ut({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>It(()=>import("./graphql-dcd71327.js"),[])});Ut({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>It(()=>import("./handlebars-e82c06a7.js"),[])});Ut({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>It(()=>import("./hcl-69c09a16.js"),[])});Ut({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>It(()=>import("./html-df69fde9.js"),[])});Ut({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>It(()=>import("./ini-ddcf22bb.js"),[])});Ut({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>It(()=>import("./java-7b3bef9f.js"),[])});Ut({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>It(()=>import("./javascript-6c5109d5.js"),["assets/javascript-6c5109d5.js","assets/typescript-1669ef5e.js"])});Ut({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>It(()=>import("./julia-d49177e7.js"),[])});Ut({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>It(()=>import("./kotlin-12177a5b.js"),[])});Ut({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>It(()=>import("./less-dd974dd5.js"),[])});Ut({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>It(()=>import("./lexon-7236519e.js"),[])});Ut({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>It(()=>import("./lua-de05fd08.js"),[])});Ut({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>It(()=>import("./liquid-0dfb25b5.js"),[])});Ut({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>It(()=>import("./m3-ceb8ffc4.js"),[])});Ut({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>It(()=>import("./markdown-6a6346da.js"),[])});Ut({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>It(()=>import("./mips-6fb0802a.js"),[])});Ut({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>It(()=>import("./msdax-bf1578ea.js"),[])});Ut({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>It(()=>import("./mysql-4cfd205e.js"),[])});Ut({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>It(()=>import("./objective-c-fadd4d71.js"),[])});Ut({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>It(()=>import("./pascal-4479a90f.js"),[])});Ut({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>It(()=>import("./pascaligo-7d1a5852.js"),[])});Ut({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:()=>It(()=>import("./perl-4a4b182f.js"),[])});Ut({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>It(()=>import("./pgsql-e04cad37.js"),[])});Ut({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>It(()=>import("./php-f332f715.js"),[])});Ut({id:"pla",extensions:[".pla"],loader:()=>It(()=>import("./pla-649d56b2.js"),[])});Ut({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>It(()=>import("./postiats-52f8c4e6.js"),[])});Ut({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>It(()=>import("./powerquery-ee00e87c.js"),[])});Ut({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>It(()=>import("./powershell-d33e9d1b.js"),[])});Ut({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>It(()=>import("./protobuf-16b10ef3.js"),[])});Ut({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>It(()=>import("./pug-768921d2.js"),[])});Ut({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>It(()=>import("./python-402e4a84.js"),[])});Ut({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>It(()=>import("./qsharp-c7533acc.js"),[])});Ut({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>It(()=>import("./r-d1be5f1d.js"),[])});Ut({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>It(()=>import("./razor-08702ce6.js"),[])});Ut({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>It(()=>import("./redis-bd6165ff.js"),[])});Ut({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>It(()=>import("./redshift-c705624d.js"),[])});Ut({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>It(()=>import("./restructuredtext-947094fa.js"),[])});Ut({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>It(()=>import("./ruby-1816fcd8.js"),[])});Ut({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>It(()=>import("./rust-c4db2e19.js"),[])});Ut({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>It(()=>import("./sb-adba4cc1.js"),[])});Ut({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>It(()=>import("./scala-af9b4756.js"),[])});Ut({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>It(()=>import("./scheme-812b9ffd.js"),[])});Ut({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>It(()=>import("./scss-b21c6880.js"),[])});Ut({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>It(()=>import("./shell-a62a83b7.js"),[])});Ut({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>It(()=>import("./solidity-9a528bff.js"),[])});Ut({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>It(()=>import("./sophia-dc39a193.js"),[])});Ut({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>It(()=>import("./sparql-658eb489.js"),[])});Ut({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>It(()=>import("./sql-233b53ac.js"),[])});Ut({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:()=>It(()=>import("./st-27efd63b.js"),[])});Ut({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>It(()=>import("./swift-a2a125fe.js"),[])});Ut({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>It(()=>import("./systemverilog-8bcc1c37.js"),[])});Ut({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>It(()=>import("./systemverilog-8bcc1c37.js"),[])});Ut({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>It(()=>import("./tcl-5c798828.js"),[])});Ut({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>It(()=>import("./twig-5245532a.js"),[])});Ut({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>It(()=>import("./typescript-1669ef5e.js"),[])});Ut({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>It(()=>import("./vb-818b3fb1.js"),[])});Ut({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>It(()=>import("./xml-ff6e7e5c.js"),[])});Ut({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>It(()=>import("./yaml-eee3d8e3.js"),[])});var FKe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},BKe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},FB=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const BB=new Dt("selectionAnchorSet",!1);let Pp=class Cge{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=BB.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}static get(e){return e.getContribution(Cge.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:yt.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:new Rp().appendText(C("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),ks(C("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(yt.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};Pp.ID="editor.contrib.selectionAnchorController";Pp=FKe([BKe(1,dn)],Pp);class WKe extends Et{constructor(){super({id:"editor.action.setSelectionAnchor",label:C("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2080),weight:100}})}run(e,t){return FB(this,void 0,void 0,function*(){Pp.get(t).setSelectionAnchor()})}}class VKe extends Et{constructor(){super({id:"editor.action.goToSelectionAnchor",label:C("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:BB})}run(e,t){return FB(this,void 0,void 0,function*(){Pp.get(t).goToSelectionAnchor()})}}class HKe extends Et{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:C("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:BB,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2089),weight:100}})}run(e,t){return FB(this,void 0,void 0,function*(){Pp.get(t).selectFromAnchorToCursor()})}}class $Ke extends Et{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:C("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:BB,kbOpts:{kbExpr:de.editorTextFocus,primary:9,weight:100}})}run(e,t){return FB(this,void 0,void 0,function*(){Pp.get(t).cancelSelectionAnchor()})}}Ti(Pp.ID,Pp);it(WKe);it(VKe);it(HKe);it($Ke);const zKe=Ce("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},C("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class UKe extends Et{constructor(){super({id:"editor.action.jumpToBracket",label:C("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:3160,weight:100}})}run(e,t){let n=Qh.get(t);n&&n.jumpToBracket()}}class jKe extends Et{constructor(){super({id:"editor.action.selectToBracket",label:C("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){const r=Qh.get(t);if(!r)return;let o=!0;n&&n.selectBrackets===!1&&(o=!1),r.selectToBracket(o)}}class KKe{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}class Qh extends Oe{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=[],this._updateBracketsSoon=this._register(new er(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(63),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._decorations=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(63)&&(this._matchBrackets=this._editor.getOption(63),this._decorations=this._editor.deltaDecorations(this._decorations,[]),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}static get(e){return e.getContribution(Qh.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const r=n.getStartPosition(),o=e.bracketPairs.matchBracket(r);let s=null;if(o)o[0].containsPosition(r)?s=o[1].getStartPosition():o[1].containsPosition(r)&&(s=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(r);if(a)s=a[0].getStartPosition();else{const u=e.bracketPairs.findNextBracket(r);u&&u.range&&(s=u.range.getStartPosition())}}return s?new yt(s.lineNumber,s.column,s.lineNumber,s.column):new yt(r.lineNumber,r.column,r.lineNumber,r.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(r=>{const o=r.getStartPosition();let s=t.bracketPairs.matchBracket(o);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(o),!s)){const d=t.bracketPairs.findNextBracket(o);d&&d.range&&(s=t.bracketPairs.matchBracket(d.range.getStartPosition()))}let a=null,u=null;if(s){s.sort(Q.compareRangesUsingStarts);const[d,h]=s;if(a=e?d.getStartPosition():d.getEndPosition(),u=e?h.getEndPosition():h.getStartPosition(),h.containsPosition(o)){const f=a;a=u,u=f}}a&&u&&n.push(new yt(a.lineNumber,a.column,u.lineNumber,u.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();let e=[],t=0;for(const n of this._lastBracketsData){let r=n.brackets;r&&(e[t++]={range:r[0],options:n.options},e[t++]={range:r[1],options:n.options})}this._decorations=this._editor.deltaDecorations(this._decorations,e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let r=[];this._lastVersionId===n&&(r=this._lastBracketsData);let o=[],s=0;for(let f=0,p=e.length;f<p;f++){let m=e[f];m.isEmpty()&&(o[s++]=m.getStartPosition())}o.length>1&&o.sort(Le.compare);let a=[],u=0,d=0,h=r.length;for(let f=0,p=o.length;f<p;f++){let m=o[f];for(;d<h&&r[d].position.isBefore(m);)d++;if(d<h&&r[d].position.equals(m))a[u++]=r[d];else{let v=t.bracketPairs.matchBracket(m),b=Qh._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!v&&this._matchBrackets==="always"&&(v=t.bracketPairs.findEnclosingBrackets(m,20),b=Qh._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[u++]=new KKe(m,v,b)}}this._lastBracketsData=a,this._lastVersionId=n}}Qh.ID="editor.contrib.bracketMatchingController";Qh._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Sn.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Lr(zKe),position:Sl.Center}});Qh._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Sn.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});Ti(Qh.ID,Qh);it(jKe);it(UKe);hr((i,e)=>{const t=i.getColor(c2e);t&&e.addRule(`.monaco-editor .bracket-match { background-color: ${t}; }`);const n=i.getColor(Jce);n&&e.addRule(`.monaco-editor .bracket-match { border: 1px solid ${n}; }`)});ia.appendMenuItem(Mt.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:C({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class GKe{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,r=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&r===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(n)))if(this._isMovingLeft){const s=new Q(n,r-1,n,r),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new Q(n,o,n,o),a)}else{const s=new Q(n,o,n,o+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new Q(n,r,n,r),a)}}computeCursorState(e,t){return this._isMovingLeft?new yt(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new yt(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class wge extends Et{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;let n=[],r=t.getSelections();for(const o of r)n.push(new GKe(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class qKe extends wge{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:C("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:de.writable})}}class YKe extends wge{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:C("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:de.writable})}}it(qKe);it(YKe);class ZKe extends Et{constructor(){super({id:"editor.action.transposeLetters",label:C("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;let n=t.getModel(),r=[],o=t.getSelections();for(let s of o){if(!s.isEmpty())continue;let a=s.startLineNumber,u=s.startColumn,d=n.getLineMaxColumn(a);if(a===1&&(u===1||u===2&&d===2))continue;let h=u===d?s.getPosition():pi.rightPosition(n,s.getPosition().lineNumber,s.getPosition().column),f=pi.leftPosition(n,h),p=pi.leftPosition(n,f),m=n.getValueInRange(Q.fromPositions(p,f)),v=n.getValueInRange(Q.fromPositions(f,h)),b=Q.fromPositions(p,h);r.push(new xs(b,v+m))}r.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop())}}it(ZKe);var XKe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const zb="9_cutcopypaste",QKe=Gh||document.queryCommandSupported("cut"),yge=Gh||document.queryCommandSupported("copy"),JKe=typeof navigator.clipboard>"u"||yl?document.queryCommandSupported("paste"):!0;function PY(i){return i.register(),i}const eGe=QKe?PY(new FS({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Gh?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:Mt.MenubarEditMenu,group:"2_ccp",title:C({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:Mt.EditorContext,group:zb,title:C("actions.clipboard.cutLabel","Cut"),when:de.writable,order:1},{menuId:Mt.CommandPalette,group:"",title:C("actions.clipboard.cutLabel","Cut"),order:1},{menuId:Mt.SimpleEditorContext,group:zb,title:C("actions.clipboard.cutLabel","Cut"),when:de.writable,order:1}]})):void 0,tGe=yge?PY(new FS({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Gh?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:Mt.MenubarEditMenu,group:"2_ccp",title:C({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:Mt.EditorContext,group:zb,title:C("actions.clipboard.copyLabel","Copy"),order:2},{menuId:Mt.CommandPalette,group:"",title:C("actions.clipboard.copyLabel","Copy"),order:1},{menuId:Mt.SimpleEditorContext,group:zb,title:C("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;ia.appendMenuItem(Mt.MenubarEditMenu,{submenu:Mt.MenubarCopy,title:{value:C("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3});ia.appendMenuItem(Mt.EditorContext,{submenu:Mt.EditorContextCopy,title:{value:C("copy as","Copy As"),original:"Copy As"},group:zb,order:3});const K6=JKe?PY(new FS({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Gh?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:Mt.MenubarEditMenu,group:"2_ccp",title:C({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:Mt.EditorContext,group:zb,title:C("actions.clipboard.pasteLabel","Paste"),when:de.writable,order:4},{menuId:Mt.CommandPalette,group:"",title:C("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:Mt.SimpleEditorContext,group:zb,title:C("actions.clipboard.pasteLabel","Paste"),when:de.writable,order:4}]})):void 0;class nGe extends Et{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:C("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(32)&&t.getSelection().isEmpty()||($H.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),$H.forceCopyWithSyntaxHighlighting=!1)}}function Sge(i,e){i&&(i.addImplementation(1e4,"code-editor",(t,n)=>{const r=t.get(ki).getFocusedCodeEditor();if(r&&r.hasTextFocus()){const o=r.getOption(32),s=r.getSelection();return s&&s.isEmpty()&&!o||document.execCommand(e),!0}return!1}),i.addImplementation(0,"generic-dom",(t,n)=>(document.execCommand(e),!0)))}Sge(eGe,"cut");Sge(tGe,"copy");K6&&(K6.addImplementation(1e4,"code-editor",(i,e)=>{const t=i.get(ki),n=i.get(j0),r=t.getFocusedCodeEditor();return r&&r.hasTextFocus()?!document.execCommand("paste")&&PS?(()=>XKe(void 0,void 0,void 0,function*(){const s=yield n.readText();if(s!==""){const a=FA.INSTANCE.get(s);let u=!1,d=null,h=null;a&&(u=r.getOption(32)&&!!a.isFromEmptySelection,d=typeof a.multicursorText<"u"?a.multicursorText:null,h=a.mode),r.trigger("keyboard","paste",{text:s,pasteOnNewLine:u,multicursorText:d,mode:h})}}))():!0:!1}),K6.addImplementation(0,"generic-dom",(i,e)=>(document.execCommand("paste"),!0)));yge&&it(nGe);class Q3{constructor(e){this.executor=e,this._didRun=!1}getValue(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}class jn{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+jn.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new jn(this.value+jn.sep+e)}}jn.sep=".";jn.None=new jn("@@none@@");jn.Empty=new jn("");jn.QuickFix=new jn("quickfix");jn.Refactor=new jn("refactor");jn.Source=new jn("source");jn.SourceOrganizeImports=jn.Source.append("organizeImports");jn.SourceFixAll=jn.Source.append("fixAll");function iGe(i,e){return!(i.include&&!i.include.intersects(e)||i.excludes&&i.excludes.some(t=>Lge(e,t,i.include))||!i.includeSourceActions&&jn.Source.contains(e))}function rGe(i,e){const t=e.kind?new jn(e.kind):void 0;return!(i.include&&(!t||!i.include.contains(t))||i.excludes&&t&&i.excludes.some(n=>Lge(t,n,i.include))||!i.includeSourceActions&&t&&jn.Source.contains(t)||i.onlyIncludePreferredActions&&!e.isPreferred)}function Lge(i,e,t){return!(!e.contains(i)||t&&e.contains(t))}class Vf{constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}static fromUser(e,t){return!e||typeof e!="object"?new Vf(t.kind,t.apply,!1):new Vf(Vf.getKindFromUser(e,t.kind),Vf.getApplyFromUser(e,t.apply),Vf.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new jn(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}}var FY=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Ege="editor.action.codeAction",xge="editor.action.refactor",Dge="editor.action.sourceAction",BY="editor.action.organizeImports",WY="editor.action.fixAll";class Ige{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return FY(this,void 0,void 0,function*(){if(!((t=this.provider)===null||t===void 0)&&t.resolveCodeAction&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(r){Rs(r)}n&&(this.action.edit=n.edit)}return this})}}class VY extends Oe{constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(VY.codeActionsComparator),this.validActions=this.allActions.filter(({action:r})=>!r.disabled)}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:vl(e.diagnostics)?vl(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:vl(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&jn.QuickFix.contains(new jn(e.kind))&&!!e.isPreferred)}}const Pne={actions:[],documentation:void 0};function HY(i,e,t,n,r){var o;const s=t.filter||{},a={only:(o=s.include)===null||o===void 0?void 0:o.value,trigger:t.type},u=new yq(i,r),d=oGe(i,s),h=new Qe,f=d.map(m=>FY(this,void 0,void 0,function*(){try{n.report(m);const v=yield m.provideCodeActions(i,e,a,u.token);if(v&&h.add(v),u.token.isCancellationRequested)return Pne;const b=((v==null?void 0:v.actions)||[]).filter(S=>S&&rGe(s,S)),L=sGe(m,b,s.include);return{actions:b.map(S=>new Ige(S,m)),documentation:L}}catch(v){if(wg(v))throw v;return Rs(v),Pne}})),p=ng.onDidChange(()=>{const m=ng.all(i);oc(m,d)||u.cancel()});return Promise.all(f).then(m=>{const v=Rue(m.map(L=>L.actions)),b=BS(m.map(L=>L.documentation));return new VY(v,b,h)}).finally(()=>{p.dispose(),u.dispose()})}function oGe(i,e){return ng.all(i).filter(t=>t.providedCodeActionKinds?t.providedCodeActionKinds.some(n=>iGe(e,new jn(n))):!0)}function sGe(i,e,t){if(!i.documentation)return;const n=i.documentation.map(r=>({kind:new jn(r.kind),command:r.command}));if(t){let r;for(const o of n)o.kind.contains(t)&&(r?r.kind.contains(o.kind)&&(r=o):r=o);if(r)return r==null?void 0:r.command}for(const r of e)if(r.kind){for(const o of n)if(o.kind.contains(new jn(r.kind)))return o.command}}Qn.registerCommand("_executeCodeActionProvider",function(i,e,t,n,r){return FY(this,void 0,void 0,function*(){if(!(e instanceof sn))throw Kh();const o=i.get(Io).getModel(e);if(!o)throw Kh();const s=yt.isISelection(t)?yt.liftSelection(t):Q.isIRange(t)?o.validateRange(t):void 0;if(!s)throw Kh();const a=typeof n=="string"?new jn(n):void 0,u=yield HY(o,s,{type:1,filter:{includeSourceActions:!0,include:a}},EC.None,Vn.None),d=[],h=Math.min(u.validActions.length,typeof r=="number"?r:0);for(let f=0;f<h;f++)d.push(u.validActions[f].resolve(Vn.None));try{return yield Promise.all(d),u.validActions.map(f=>f.action)}finally{setTimeout(()=>u.dispose(),100)}})});var aGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},lGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Bu=class tU{constructor(e,t){this._messageWidget=new Aa,this._messageListeners=new Qe,this._editor=e,this._visible=tU.MESSAGE_VISIBLE.bindTo(t),this._editorListener=this._editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit())}static get(e){return e.getContribution(tU.ID)}dispose(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){ks(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new Fne(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(new Oa(()=>this.closeMessage(),3e3));let n;this._messageListeners.add(this._editor.onMouseMove(r=>{r.target.position&&(n?n.containsPosition(r.target.position)||this.closeMessage():n=new Q(t.lineNumber-3,1,r.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Fne.fadeOut(this._messageWidget.value))}_onDidAttemptReadOnlyEdit(){this._editor.hasModel()&&this.showMessage(C("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}};Bu.ID="editor.contrib.messageController";Bu.MESSAGE_VISIBLE=new Dt("messageVisible",!1,C("messageVisible","Whether the editor is currently showing an inline message"));Bu=aGe([lGe(1,dn)],Bu);const uGe=Ps.bindToContribution(Bu.get);nt(new uGe({id:"leaveEditorMessage",precondition:Bu.MESSAGE_VISIBLE,handler:i=>i.closeMessage(),kbOpts:{weight:100+30,primary:9}}));let Fne=class{constructor(e,{lineNumber:t,column:n},r){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const s=document.createElement("div");s.classList.add("message"),s.textContent=r,this._domNode.appendChild(s);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){let t;const n=()=>{e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2]}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};Ti(Bu.ID,Bu);var cGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Bne=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},dGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Wne extends rc{constructor(e,t){super(e.command?e.command.id:e.title,hGe(e.title),void 0,!e.disabled,t),this.action=e}}function hGe(i){return i.replace(/\r\n|\r|\n/g," ")}let nU=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._delegate=t,this._contextMenuService=n,this._visible=!1,this._showingActions=this._register(new Aa),this._keybindingResolver=new WB({getKeybindings:()=>r.getKeybindings()})}get isVisible(){return this._visible}show(e,t,n,r){return dGe(this,void 0,void 0,function*(){const o=r.includeDisabledActions?t.allActions:t.validActions;if(!o.length){this._visible=!1;return}if(!this._editor.getDomNode())throw this._visible=!1,mC();this._visible=!0,this._showingActions.value=t;const s=this.getMenuActions(e,o,t.documentation),a=Le.isIPosition(n)?this._toCoords(n):n||{x:0,y:0},u=this._keybindingResolver.getResolver(),d=this._editor.getOption(114);this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>a,getActions:()=>s,onHide:()=>{this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:h=>h instanceof Wne?u(h.action):void 0})})}getMenuActions(e,t,n){var r,o;const s=h=>new Wne(h.action,()=>this._delegate.onSelectCodeAction(h)),a=t.map(s),u=[...n],d=this._editor.getModel();if(d&&a.length)for(const h of ng.all(d))h._getAdditionalMenuItems&&u.push(...h._getAdditionalMenuItems({trigger:e.type,only:(o=(r=e.filter)===null||r===void 0?void 0:r.include)===null||o===void 0?void 0:o.value},t.map(f=>f.action)));return u.length&&a.push(new Qc,...u.map(h=>s(new Ige({title:h.title,command:h},void 0)))),a}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Us(this._editor.getDomNode()),r=n.left+t.left,o=n.top+t.top+t.height;return{x:r,y:o}}};nU=cGe([Bne(2,U0),Bne(3,Sr)],nU);class WB{constructor(e){this._keybindingProvider=e}getResolver(){const e=new Q3(()=>this._keybindingProvider.getKeybindings().filter(t=>WB.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===BY?n={kind:jn.SourceOrganizeImports.value}:t.command===WY&&(n={kind:jn.SourceFixAll.value}),Object.assign({resolvedKeybinding:t.resolvedKeybinding},Vf.fromUser(n,{kind:jn.None,apply:"never"}))}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.getValue());return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new jn(e.kind);return t.filter(r=>r.kind.contains(n)).filter(r=>r.preferred?e.isPreferred:!0).reduceRight((r,o)=>r?r.kind.contains(o.kind)?o:r:o,void 0)}}WB.codeActionCommands=[xge,Ege,Dge,BY,WY];var fGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},q2;(function(i){i.Hidden={type:0};class e{constructor(n,r,o,s){this.actions=n,this.trigger=r,this.editorPosition=o,this.widgetPosition=s,this.type=1}}i.Showing=e})(q2||(q2={}));let J3=class kge extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=n,this._keybindingService=r,this._onClick=this._register(new be),this.onClick=this._onClick.event,this._state=q2.Hidden,this._domNode=document.createElement("div"),this._domNode.className=_e.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(o=>{const s=this._editor.getModel();(this.state.type!==1||!s||this.state.editorPosition.lineNumber>=s.getLineCount())&&this.hide()})),Hi.ignoreTarget(this._domNode),this._register(lEe(this._domNode,o=>{if(this.state.type!==1)return;this._editor.focus(),o.preventDefault();const{top:s,height:a}=Us(this._domNode),u=this._editor.getOption(58);let d=Math.floor(u/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(d+=u),this._onClick.fire({x:o.posx,y:s+a+d,actions:this.state.actions,trigger:this.state.trigger})})),this._register(qe(this._domNode,"mouseenter",o=>{if((o.buttons&1)!==1)return;this.hide();const s=new yC;s.startMonitoring(o.target,o.buttons,VS,()=>{},()=>{s.dispose()})})),this._register(this._editor.onDidChangeConfiguration(o=>{o.hasChanged(56)&&!this._editor.getOption(56).enabled&&this.hide()})),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.hide();const r=this._editor.getOptions();if(!r.get(56).enabled)return this.hide();const o=this._editor.getModel();if(!o)return this.hide();const{lineNumber:s,column:a}=o.validatePosition(n),u=o.getOptions().tabSize,d=r.get(43),h=o.getLineContent(s),f=Ll.computeIndentLevel(h,u),p=d.spaceWidth*f>22,m=b=>b>2&&this._editor.getTopForLineNumber(b)===this._editor.getTopForLineNumber(b-1);let v=s;if(!p){if(s>1&&!m(s-1))v-=1;else if(!m(s+1))v+=1;else if(a*d.spaceWidth<22)return this.hide()}this.state=new q2.Showing(e,t,n,{position:{lineNumber:v,column:1},preference:kge._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=q2.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this.state.type===1&&this.state.actions.hasAutoFix){this._domNode.classList.remove(..._e.lightBulb.classNamesArray),this._domNode.classList.add(..._e.lightbulbAutofix.classNamesArray);const t=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(t){this.title=C("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",t.getLabel());return}}this._domNode.classList.remove(..._e.lightbulbAutofix.classNamesArray),this._domNode.classList.add(..._e.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);e?this.title=C("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):this.title=C("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};J3._posPref=[0];J3=fGe([gGe(3,Sr)],J3);hr((i,e)=>{var t;const n=(t=i.getColor(sc))===null||t===void 0?void 0:t.transparent(.7),r=i.getColor(dIe);r&&e.addRule(`
		.monaco-editor .contentWidgets ${_e.lightBulb.cssSelector} {
			color: ${r};
			background-color: ${n};
		}`);const o=i.getColor(hIe);o&&e.addRule(`
		.monaco-editor .contentWidgets ${_e.lightbulbAutofix.cssSelector} {
			color: ${o};
			background-color: ${n};
		}`)});var pGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},mGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},G6=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},_Ge=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},vGe=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},y4;let iU=class extends Oe{constructor(e,t,n,r,o){super(),this._editor=e,this.delegate=r,this._activeCodeActions=this._register(new Aa),y4.set(this,!1),this._codeActionWidget=new Q3(()=>this._register(o.createInstance(nU,this._editor,{onSelectCodeAction:s=>G6(this,void 0,void 0,function*(){this.delegate.applyCodeAction(s,!0)})}))),this._lightBulbWidget=new Q3(()=>{const s=this._register(o.createInstance(J3,this._editor,t,n));return this._register(s.onClick(a=>this.showCodeActionList(a.trigger,a.actions,a,{includeDisabledActions:!1}))),s})}dispose(){_Ge(this,y4,!0,"f"),super.dispose()}update(e){var t,n,r;return G6(this,void 0,void 0,function*(){if(e.type!==1){(t=this._lightBulbWidget.rawValue)===null||t===void 0||t.hide();return}let o;try{o=yield e.actions}catch(s){gn(s);return}if(!vGe(this,y4,"f"))if(this._lightBulbWidget.getValue().update(o,e.trigger,e.position),e.trigger.type===1){if(!((n=e.trigger.filter)===null||n===void 0)&&n.include){const a=this.tryGetValidActionToApply(e.trigger,o);if(a){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(a,!1)}finally{o.dispose()}return}if(e.trigger.context){const u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,o);if(u&&u.action.disabled){Bu.get(this._editor).showMessage(u.action.disabled,e.trigger.context.position),o.dispose();return}}}const s=!!(!((r=e.trigger.filter)===null||r===void 0)&&r.include);if(e.trigger.context&&(!o.allActions.length||!s&&!o.validActions.length)){Bu.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=o,o.dispose();return}this._activeCodeActions.value=o,this._codeActionWidget.getValue().show(e.trigger,o,e.position,{includeDisabledActions:s})}else this._codeActionWidget.getValue().isVisible?o.dispose():this._activeCodeActions.value=o})}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}showCodeActionList(e,t,n,r){return G6(this,void 0,void 0,function*(){this._codeActionWidget.getValue().show(e,t,n,r)})}};y4=new WeakMap;iU=pGe([mGe(4,An)],iU);var q6=globalThis&&globalThis.__classPrivateFieldGet||function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},bGe=globalThis&&globalThis.__classPrivateFieldSet||function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},_w;const Tge=new Dt("supportedCodeAction","");class CGe extends Oe{constructor(e,t,n,r=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=r,this._autoTriggerTimer=this._register(new Oa),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._onCursorChange()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>Ece(n,t.uri))&&this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2})},this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const n of this._markerService.read({resource:t.uri})){const r=t.validateRange(n);if(Q.intersectRanges(r,e))return Q.lift(r)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&e.type===2){const{lineNumber:r,column:o}=n.getPosition(),s=t.getLineContent(r);if(s.length===0)return;if(o===1){if(/\s/.test(s[0]))return}else if(o===t.getLineMaxColumn(r)){if(/\s/.test(s[s.length-1]))return}else if(/\s/.test(s[o-2])&&/\s/.test(s[o-1]))return}return n}_createEventAndSignalChange(e,t){const n=this._editor.getModel();if(!t||!n){this._signalChange(void 0);return}const r=this._getRangeOfMarker(t),o=r?r.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:o};return this._signalChange(s),s}}var I1;(function(i){i.Empty={type:0};class e{constructor(n,r,o,s){this.trigger=n,this.rangeOrSelection=r,this.position=o,this._cancellablePromise=s,this.type=1,this.actions=s.catch(a=>{if(wg(a))return wGe;throw a})}cancel(){this._cancellablePromise.cancel()}}i.Triggered=e})(I1||(I1={}));const wGe={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class yGe extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._markerService=t,this._progressService=r,this._codeActionOracle=this._register(new Aa),this._state=I1.Empty,this._onDidChangeState=this._register(new be),this.onDidChangeState=this._onDidChangeState.event,_w.set(this,!1),this._supportedCodeActions=Tge.bindTo(n),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(ng.onDidChange(()=>this._update())),this._update()}dispose(){q6(this,_w,"f")||(bGe(this,_w,!0,"f"),super.dispose(),this.setState(I1.Empty,!0))}_update(){if(q6(this,_w,"f"))return;this._codeActionOracle.value=void 0,this.setState(I1.Empty);const e=this._editor.getModel();if(e&&ng.has(e)&&!this._editor.getOption(80)){const t=[];for(const n of ng.all(e))Array.isArray(n.providedCodeActionKinds)&&t.push(...n.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new CGe(this._editor,this._markerService,n=>{var r;if(!n){this.setState(I1.Empty);return}const o=cs(s=>HY(e,n.selection,n.trigger,EC.None,s));n.trigger.type===1&&((r=this._progressService)===null||r===void 0||r.showWhile(o,250)),this.setState(new I1.Triggered(n.trigger,n.selection,n.position,o))},void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}trigger(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!q6(this,_w,"f")&&this._onDidChangeState.fire(e))}}_w=new WeakMap;var SGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},uP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Nge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function MM(i){return _t.regex(Tge.keys()[0],new RegExp("(\\s|^)"+hc(i.value)+"\\b"))}const $Y={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:C("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:C("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[C("args.schema.apply.first","Always apply the first returned code action."),C("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),C("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:C("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};let Ub=class Age extends Oe{constructor(e,t,n,r,o){super(),this._instantiationService=o,this._editor=e,this._model=this._register(new yGe(this._editor,t,n,r)),this._register(this._model.onDidChangeState(s=>this.update(s))),this._ui=new Q3(()=>this._register(new iU(e,tL.Id,RM.Id,{applyCodeAction:(s,a)=>Nge(this,void 0,void 0,function*(){try{yield this._applyCodeAction(s)}finally{a&&this._trigger({type:2,filter:{}})}})},this._instantiationService)))}static get(e){return e.getContribution(Age.ID)}update(e){this._ui.getValue().update(e)}showCodeActions(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}manualTriggerAtCurrentPosition(e,t,n){if(!this._editor.hasModel())return;Bu.get(this._editor).closeMessage();const r=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e){return this._instantiationService.invokeFunction(LGe,e,this._editor)}};Ub.ID="editor.contrib.quickFixController";Ub=SGe([uP(1,xM),uP(2,dn),uP(3,zp),uP(4,An)],Ub);function LGe(i,e,t){return Nge(this,void 0,void 0,function*(){const n=i.get(Sq),r=i.get(kr),o=i.get(yg),s=i.get(fo);if(o.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred}),yield e.resolve(Vn.None),e.action.edit&&(yield n.apply(Z8.convert(e.action.edit),{editor:t,label:e.action.title})),e.action.command)try{yield r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(a){const u=EGe(a);s.error(typeof u=="string"?u:C("applyCodeActionFailed","An unknown error occurred while applying the code action"))}})}function EGe(i){return typeof i=="string"?i:i instanceof Error&&typeof i.message=="string"?i.message:void 0}function OC(i,e,t,n){if(i.hasModel()){const r=Ub.get(i);r&&r.manualTriggerAtCurrentPosition(e,t,n)}}class tL extends Et{constructor(){super({id:tL.Id,label:C("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:2132,weight:100}})}run(e,t){return OC(t,C("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}tL.Id="editor.action.quickFix";class xGe extends Ps{constructor(){super({id:Ege,precondition:_t.and(de.writable,de.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:$Y}]}})}runEditorCommand(e,t,n){const r=Vf.fromUser(n,{kind:jn.Empty,apply:"ifSingle"});return OC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):C("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):r.preferred?C("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):C("editor.action.codeAction.noneMessage","No code actions available"),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class DGe extends Et{constructor(){super({id:xge,label:C("refactor.label","Refactor..."),alias:"Refactor...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:_t.and(de.writable,MM(jn.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:$Y}]}})}run(e,t,n){const r=Vf.fromUser(n,{kind:jn.Refactor,apply:"never"});return OC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):C("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):r.preferred?C("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):C("editor.action.refactor.noneMessage","No refactorings available"),{include:jn.Refactor.contains(r.kind)?r.kind:jn.None,onlyIncludePreferredActions:r.preferred},r.apply)}}class IGe extends Et{constructor(){super({id:Dge,label:C("source.label","Source Action..."),alias:"Source Action...",precondition:_t.and(de.writable,de.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:_t.and(de.writable,MM(jn.Source))},description:{description:"Source Action...",args:[{name:"args",schema:$Y}]}})}run(e,t,n){const r=Vf.fromUser(n,{kind:jn.Source,apply:"never"});return OC(t,typeof(n==null?void 0:n.kind)=="string"?r.preferred?C("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):C("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):r.preferred?C("editor.action.source.noneMessage.preferred","No preferred source actions available"):C("editor.action.source.noneMessage","No source actions available"),{include:jn.Source.contains(r.kind)?r.kind:jn.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)}}class kGe extends Et{constructor(){super({id:BY,label:C("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:_t.and(de.writable,MM(jn.SourceOrganizeImports)),kbOpts:{kbExpr:de.editorTextFocus,primary:1581,weight:100}})}run(e,t){return OC(t,C("editor.action.organize.noneMessage","No organize imports action available"),{include:jn.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}class TGe extends Et{constructor(){super({id:WY,label:C("fixAll.label","Fix All"),alias:"Fix All",precondition:_t.and(de.writable,MM(jn.SourceFixAll))})}run(e,t){return OC(t,C("fixAll.noneMessage","No fix all action available"),{include:jn.SourceFixAll,includeSourceActions:!0},"ifSingle")}}class RM extends Et{constructor(){super({id:RM.Id,label:C("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:_t.and(de.writable,MM(jn.QuickFix)),kbOpts:{kbExpr:de.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return OC(t,C("editor.action.autoFix.noneMessage","No auto fixes available"),{include:jn.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}RM.Id="editor.action.autoFix";Ti(Ub.ID,Ub);it(tL);it(DGe);it(IGe);it(kGe);it(RM);it(TGe);nt(new xGe);var Vne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class rU{constructor(){this.lenses=[],this._disposables=new Qe}dispose(){this._disposables.dispose()}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}function Oge(i,e){return Vne(this,void 0,void 0,function*(){const t=rp.ordered(i),n=new Map,r=new rU,o=t.map((s,a)=>Vne(this,void 0,void 0,function*(){n.set(s,a);try{const u=yield Promise.resolve(s.provideCodeLenses(i,e));u&&r.add(u,s)}catch(u){Rs(u)}}));return yield Promise.all(o),r.lenses=r.lenses.sort((s,a)=>s.symbol.range.startLineNumber<a.symbol.range.startLineNumber?-1:s.symbol.range.startLineNumber>a.symbol.range.startLineNumber?1:n.get(s.provider)<n.get(a.provider)?-1:n.get(s.provider)>n.get(a.provider)?1:s.symbol.range.startColumn<a.symbol.range.startColumn?-1:s.symbol.range.startColumn>a.symbol.range.startColumn?1:0),r})}Qn.registerCommand("_executeCodeLensProvider",function(i,...e){let[t,n]=e;Gi(sn.isUri(t)),Gi(typeof n=="number"||!n);const r=i.get(Io).getModel(t);if(!r)throw Kh();const o=[],s=new Qe;return Oge(r,Vn.None).then(a=>{s.add(a);let u=[];for(const d of a.lenses)n==null||d.symbol.command?o.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&u.push(Promise.resolve(d.provider.resolveCodeLens(r,d.symbol,Vn.None)).then(h=>o.push(h||d.symbol)));return Promise.all(u)}).then(()=>o).finally(()=>{setTimeout(()=>s.dispose(),100)})});var NGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},AGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Mge=gi("ICodeLensCache");class Hne{constructor(e,t){this.lineCount=e,this.data=t}}let oU=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new $0(20,.75);const t="codelens/cache";bA(()=>e.remove(t,1));const n="codelens/cache2",r=e.get(n,1,"{}");this._deserialize(r),Np(e.onWillSaveState)(o=>{o.reason===V3.SHUTDOWN&&e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(s=>{var a;return{range:s.symbol.range,command:s.symbol.command&&{id:"",title:(a=s.symbol.command)===null||a===void 0?void 0:a.title}}}),r=new rU;r.add({lenses:n,dispose:()=>{}},this._fakeProvider);const o=new Hne(e.getLineCount(),r);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const r=new Set;for(const o of n.data.lenses)r.add(o.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...r.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const r=t[n],o=[];for(const a of r.lines)o.push({range:new Q(a,1,a,11)});const s=new rU;s.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(n,new Hne(r.lineCount,s))}}catch{}}};oU=NGe([AGe(0,Ig)],oU);z0(Mge,oU);class OGe{constructor(e,t,n){this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class VB{constructor(e,t,n){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${VB._idPool++}`,this.updatePosition(n),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();let n=[],r=!1;for(let o=0;o<e.length;o++){const s=e[o];if(s&&(r=!0,s.command)){const a=ab(s.command.title.trim());s.command.id?(n.push(Ge("a",{id:String(o),title:s.command.tooltip},...a)),this._commands.set(String(o),s.command)):n.push(Ge("span",{title:s.command.tooltip},...a)),o+1<e.length&&n.push(Ge("span",void 0," | "))}}r?(_0(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):_0(this._domNode,Ge("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}VB._idPool=0;class Y6{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){let t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,r=t.length;n<r;n++)this._addDecorationsCallbacks[n](t[n])}}class $ne{constructor(e,t,n,r,o,s,a){this._isDisposed=!1,this._editor=t,this._className=n,this._data=e,this._decorationIds=[];let u,d=[];this._data.forEach((h,f)=>{h.symbol.command&&d.push(h.symbol),r.addDecoration({range:h.symbol.range,options:Sn.EMPTY},p=>this._decorationIds[f]=p),u?u=Q.plusRange(u,h.symbol.range):u=Q.lift(h.symbol.range)}),this._viewZone=new OGe(u.startLineNumber-1,s,a),this._viewZoneId=o.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new VB(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),r=this._data[t].symbol;return!!(n&&Q.isEmpty(r.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,r)=>{t.addDecoration({range:n.symbol.range,options:Sn.EMPTY},o=>this._decorationIds[r]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:r}=this._data[t];r.command=n.command||r.command}}}getCommand(e){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}getItems(){return this._data}}var MGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Z6=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},RGe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let aS=class{constructor(e,t,n,r){this._editor=e,this._commandService=t,this._notificationService=n,this._codeLensCache=r,this._disposables=new Qe,this._localToDispose=new Qe,this._lenses=[],this._getCodeLensModelDelays=new UF(rp,250,2500),this._oldCodeLensModels=new Qe,this._resolveCodeLensesDelays=new UF(rp,250,2500),this._resolveCodeLensesScheduler=new er(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(o=>{(o.hasChanged(43)||o.hasChanged(16)||o.hasChanged(15))&&this._updateLensStyle(),o.hasChanged(14)&&this._onModelChange()})),this._disposables.add(rp.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+Oce(this._editor.getId()).toString(16),this._styleElement=cc(d8(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)===null||e===void 0||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){let e=this._editor.getOption(16),t;return!e||e<5?(e=this._editor.getOption(45)*.9|0,t=this._editor.getOption(58)):t=e*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(45))|0,{codeLensHeight:t,fontSize:e}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(15),r=this._editor.getOption(43),o=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let a=`
		.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(t*.5)}px; font-feature-settings: var(${s}) }
		.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }
		`;n&&(a+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${o}), ${js.fontFamily}}`),this._styleElement.textContent=a,this._editor.getContainerDomNode().style.setProperty(o,n??"inherit"),this._editor.getContainerDomNode().style.setProperty(s,r.fontFeatureSettings),this._editor.changeViewZones(u=>{for(let d of this._lenses)d.updateHeight(e,u)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)===null||e===void 0||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)===null||t===void 0||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)===null||n===void 0||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!rp.has(e)){t&&this._localToDispose.add(wb(()=>{const r=this._codeLensCache.get(e);t===r&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3));return}for(const r of rp.all(e))if(typeof r.onDidChange=="function"){let o=r.onDidChange(()=>n.schedule());this._localToDispose.add(o)}const n=new er(()=>{var r;const o=Date.now();(r=this._getCodeLensModelPromise)===null||r===void 0||r.cancel(),this._getCodeLensModelPromise=cs(s=>Oge(e,s)),this._getCodeLensModelPromise.then(s=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=s,this._codeLensCache.put(e,s);const a=this._getCodeLensModelDelays.update(e,Date.now()-o);n.delay=a,this._renderCodeLensSymbols(s),this._resolveCodeLensesInViewportSoon()},gn)},this._getCodeLensModelDelays.get(e));this._localToDispose.add(n),this._localToDispose.add(Kn(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(r=>{this._editor.changeViewZones(o=>{let s=[],a=-1;this._lenses.forEach(d=>{!d.isValid()||a===d.getLineNumber()?s.push(d):(d.update(o),a=d.getLineNumber())});let u=new Y6;s.forEach(d=>{d.dispose(u,o),this._lenses.splice(this._lenses.indexOf(d),1)}),u.commit(r)})}),n.schedule()})),this._localToDispose.add(this._editor.onDidFocusEditorWidget(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidScrollChange(r=>{r.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(Kn(()=>{if(this._editor.getModel()){const r=L0.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(s=>{this._disposeAllLenses(o,s)})}),r.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(r=>{if(r.target.type!==9)return;let o=r.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const s of this._lenses){let a=s.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(u=>this._notificationService.error(u));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new Y6;for(const r of this._lenses)r.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;let t=this._editor.getModel().getLineCount(),n=[],r;for(let a of e.lenses){let u=a.symbol.range.startLineNumber;u<1||u>t||(r&&r[r.length-1].symbol.range.startLineNumber===u?r.push(a):(r=[a],n.push(r)))}const o=L0.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(u=>{const d=new Y6;let h=0,f=0;for(;f<n.length&&h<this._lenses.length;){let p=n[f][0].symbol.range.startLineNumber,m=this._lenses[h].getLineNumber();m<p?(this._lenses[h].dispose(d,u),this._lenses.splice(h,1)):m===p?(this._lenses[h].updateCodeLensSymbols(n[f],d),f++,h++):(this._lenses.splice(h,0,new $ne(n[f],this._editor,this._styleClassName,d,u,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++,f++)}for(;h<this._lenses.length;)this._lenses[h].dispose(d,u),this._lenses.splice(h,1);for(;f<n.length;)this._lenses.push(new $ne(n[f],this._editor,this._styleClassName,d,u,s.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),f++;d.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;(e=this._resolveCodeLensesPromise)===null||e===void 0||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const n=[],r=[];if(this._lenses.forEach(a=>{const u=a.computeIfNecessary(t);u&&(n.push(u),r.push(a))}),n.length===0)return;const o=Date.now(),s=cs(a=>{const u=n.map((d,h)=>{const f=new Array(d.length),p=d.map((m,v)=>!m.symbol.command&&typeof m.provider.resolveCodeLens=="function"?Promise.resolve(m.provider.resolveCodeLens(t,m.symbol,a)).then(b=>{f[v]=b},Rs):(f[v]=m.symbol,Promise.resolve(void 0)));return Promise.all(p).then(()=>{!a.isCancellationRequested&&!r[h].isDisposed()&&r[h].updateCommands(f)})});return Promise.all(u)});this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDelays.update(t,Date.now()-o);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{gn(a),s===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}getLenses(){return this._lenses}};aS.ID="css.editor.codeLens";aS=MGe([Z6(1,kr),Z6(2,fo),Z6(3,Mge)],aS);Ti(aS.ID,aS);it(class extends Et{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:de.hasCodeLensProvider,label:C("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return RGe(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(yc),r=e.get(kr),o=e.get(fo),s=t.getSelection().positionLineNumber,a=t.getContribution(aS.ID),u=[];for(let h of a.getLenses())if(h.getLineNumber()===s)for(let f of h.getItems()){const{command:p}=f.symbol;p&&u.push({label:p.title,command:p})}if(u.length===0)return;const d=yield n.pick(u,{canPickMany:!1});if(d)try{yield r.executeCommand(d.command.id,...d.command.arguments||[])}catch(h){o.error(h)}})}});function PGe(i,e){const t=[],r=Ky.ordered(i).reverse().map(o=>Promise.resolve(o.provideDocumentColors(i,e)).then(s=>{if(Array.isArray(s))for(let a of s)t.push({colorInfo:a,provider:o})}));return Promise.all(r).then(()=>t)}function zne(i,e,t,n){return Promise.resolve(t.provideColorPresentations(i,e,n))}Qn.registerCommand("_executeDocumentColorProvider",function(i,...e){const[t]=e;if(!(t instanceof sn))throw Kh();const n=i.get(Io).getModel(t);if(!n)throw Kh();const r=[],s=Ky.ordered(n).reverse().map(a=>Promise.resolve(a.provideDocumentColors(n,Vn.None)).then(u=>{if(Array.isArray(u))for(let d of u)r.push({range:d.range,color:[d.color.red,d.color.green,d.color.blue,d.color.alpha]})}));return Promise.all(s).then(()=>r)});Qn.registerCommand("_executeColorPresentationProvider",function(i,...e){const[t,n]=e,{uri:r,range:o}=n;if(!(r instanceof sn)||!Array.isArray(t)||t.length!==4||!Q.isIRange(o))throw Kh();const[s,a,u,d]=t,h=i.get(Io).getModel(r);if(!h)throw Kh();const f={range:o,color:{red:s,green:a,blue:u,alpha:d}},p=[],v=Ky.ordered(h).reverse().map(b=>Promise.resolve(b.provideColorPresentations(h,f,Vn.None)).then(L=>{Array.isArray(L)&&p.push(...L)}));return Promise.all(v).then(()=>p)});var FGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},BGe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const WGe=500;let jb=class Rge extends Oe{constructor(e,t){super(),this._editor=e,this._configurationService=t,this._localToDispose=this._register(new Qe),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=new Set,this._ruleFactory=new mce(this._editor),this._colorDecorationClassRefs=this._register(new Qe),this._register(e.onDidChangeModel(()=>{this._isEnabled=this.isEnabled(),this.onModelChanged()})),this._register(e.onDidChangeModelLanguage(()=>this.onModelChanged())),this._register(Ky.onDidChange(()=>this.onModelChanged())),this._register(e.onDidChangeConfiguration(()=>{let n=this._isEnabled;this._isEnabled=this.isEnabled(),n!==this._isEnabled&&(this._isEnabled?this.onModelChanged():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isEnabled=this.isEnabled(),this.onModelChanged()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const r=n.colorDecorators;if(r&&r.enable!==void 0&&!r.enable)return r.enable}return this._editor.getOption(17)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}onModelChanged(){if(this.stop(),!this._isEnabled)return;const e=this._editor.getModel();!e||!Ky.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new Oa,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},Rge.RECOMPUTE_TIME))})),this.beginCompute())}beginCompute(){this._computePromise=cs(e=>{const t=this._editor.getModel();return t?PGe(t,e):Promise.resolve([])}),this._computePromise.then(e=>{this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null},gn)}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Sn.EMPTY}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((n,r)=>this._colorDatas.set(n,e[r]))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();let t=[];for(let n=0;n<e.length&&t.length<WGe;n++){const{red:r,green:o,blue:s,alpha:a}=e[n].colorInfo.color,u=new fi(Math.round(r*255),Math.round(o*255),Math.round(s*255),a);let d=`rgba(${u.r}, ${u.g}, ${u.b}, ${u.a})`;const h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:QEe,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0}}})}this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],t))}removeAllDecorations(){this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=new Set(this._editor.deltaDecorations([...this._colorDecoratorIds],[])),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(Q.fromPositions(e,e)).filter(r=>this._colorDatas.has(r.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecorationId(e){return this._colorDecoratorIds.has(e)}};jb.ID="editor.contrib.colorDetector";jb.RECOMPUTE_TIME=1e3;jb=FGe([BGe(1,nr)],jb);Ti(jb.ID,jb);function sU(i,e){return!!i[e]}class X6{constructor(e,t){this.target=e.target,this.hasTriggerModifier=sU(e.event,t.triggerModifier),this.hasSideBySideModifier=sU(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Une{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=sU(e,t.triggerModifier)}}class cP{constructor(e,t,n,r){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=r}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function jne(i){return i==="altKey"?qn?new cP(57,"metaKey",6,"altKey"):new cP(5,"ctrlKey",6,"altKey"):qn?new cP(6,"altKey",57,"metaKey"):new cP(6,"altKey",5,"ctrlKey")}class Pge extends Oe{constructor(e){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new be),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new be),this.onExecute=this._onExecute.event,this._onCancel=this._register(new be),this.onCancel=this._onCancel.event,this._editor=e,this._opts=jne(this._editor.getOption(69)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(t=>{if(t.hasChanged(69)){const n=jne(this._editor.getOption(69));if(this._opts.equals(n))return;this._opts=n,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(t=>this._onEditorMouseMove(new X6(t,this._opts)))),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(new X6(t,this._opts)))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(new X6(t,this._opts)))),this._register(this._editor.onKeyDown(t=>this._onEditorKeyDown(new Une(t,this._opts)))),this._register(this._editor.onKeyUp(t=>this._onEditorKeyUp(new Une(t,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(t=>this._onDidChangeCursorSelection(t))),this._register(this._editor.onDidChangeModel(t=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(t=>{(t.scrollTopChanged||t.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}var VGe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},s1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Kb=class extends qA{constructor(e,t,n,r,o,s,a,u,d,h){super(e,Object.assign(Object.assign({},n.getRawOptions()),{overflowWidgetsDomNode:n.getOverflowWidgetsDomNode()}),{},r,o,s,a,u,d,h),this._parentEditor=n,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(n.onDidChangeConfiguration(f=>this._onParentConfigurationChanged(f)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Eg(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};Kb=VGe([s1(3,An),s1(4,ki),s1(5,kr),s1(6,dn),s1(7,Er),s1(8,fo),s1(9,il)],Kb);const Kne=new ye(new fi(0,122,204)),HGe={showArrow:!0,showFrame:!0,className:"",frameColor:Kne,arrowColor:Kne,keepEditorSelection:!1},$Ge="vs.editor.contrib.zoneWidget";class zGe{constructor(e,t,n,r,o,s){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=r,this._onDomNodeTop=o,this._onComputedHeight=s}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class UGe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}class HB{constructor(e){this._editor=e,this._ruleName=HB._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}dispose(){this.hide(),YQ(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){YQ(this._ruleName),pH(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations=this._editor.deltaDecorations(this._decorations,[{range:Q.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._editor.deltaDecorations(this._decorations,[])}}HB._IdGenerator=new tY(".arrow-decoration-");class jGe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new Qe,this.container=null,this._isShowing=!1,this.editor=e,this.options=Qg(t),Eg(this.options,HGe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const r=this._getWidth(n);this.domNode.style.width=r+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(r)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new HB(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){let e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){let e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){if(this.domNode.style.height=`${e}px`,this.container){let t=e-this._decoratingElementsHeight();this.container.style.height=`${t}px`;const n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}get position(){const[e]=this._positionMarkerId;if(!e)return;const t=this.editor.getModel();if(!t)return;const n=t.getDecorationRange(e);if(n)return n.getStartPosition()}show(e,t){const n=Q.isIRange(e)?Q.lift(e):Q.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:Sn.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}_decoratingElementsHeight(){let e=this.editor.getOption(58),t=0;if(this.options.showArrow){let n=Math.round(e/3);t+=2*n}if(this.options.showFrame){let n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),r=this.editor.getLayoutInfo(),o=this._getWidth(r);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(r)+"px";const s=document.createElement("div");s.style.overflow="hidden";const a=this.editor.getOption(58),u=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,u);let d=0,h=0;if(this._arrow&&this.options.showArrow&&(d=Math.round(a/3),this._arrow.height=d,this._arrow.show(n)),this.options.showFrame&&(h=Math.round(a/9)),this.editor.changeViewZones(m=>{this._viewZone&&m.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new zGe(s,n.lineNumber,n.column,t,v=>this._onViewZoneTop(v),v=>this._onViewZoneHeight(v)),this._viewZone.id=m.addZone(this._viewZone),this._overlayWidget=new UGe($Ge+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const m=this.options.frameWidth?this.options.frameWidth:h;this.container.style.borderTopWidth=m+"px",this.container.style.borderBottomWidth=m+"px"}let f=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=d+"px",this.container.style.height=f+"px",this.container.style.overflow="hidden"),this._doLayout(f,o),this.options.keepEditorSelection||this.editor.setSelection(e);const p=this.editor.getModel();if(p){const m=e.endLineNumber+1;m<=p.getLineCount()?this.revealLine(m,!1):this.revealLine(p.getLineCount(),!0)}}revealLine(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new Hs(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){let n=(t.currentY-e.startY)/this.editor.getOption(58),r=n<0?Math.ceil(n):Math.floor(n),o=e.heightInLines+r;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}class KGe extends Hy{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new be),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Be(e,Ge(".monaco-dropdown")),this._label=Be(this._element,Ge(".dropdown-label"));let n=t.labelRenderer;n||(n=o=>(o.textContent=t.label||"",null));for(const o of[Ht.CLICK,Ht.MOUSE_DOWN,lr.Tap])this._register(qe(this.element,o,s=>Ni.stop(s,!0)));for(const o of[Ht.MOUSE_DOWN,lr.Tap])this._register(qe(this._label,o,s=>{s instanceof MouseEvent&&s.detail>1||(this.visible?this.hide():this.show())}));this._register(qe(this._label,Ht.KEY_UP,o=>{const s=new yr(o);(s.equals(3)||s.equals(10))&&(Ni.stop(o,!0),this.visible?this.hide():this.show())}));const r=n(this._label);r&&this._register(r),this._register(Hi.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class GGe extends KGe{constructor(e,t){super(e,t),this._actions=[],this._contextMenuProvider=t.contextMenuProvider,this.actions=t.actions||[],this.actionProvider=t.actionProvider,this.menuClassName=t.menuClassName||"",this.menuAsChild=!!t.menuAsChild}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this.actionProvider?this.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:e=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this.menuClassName,onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class Fge extends Nf{constructor(e,t,n,r=Object.create(null)){super(null,e,r),this.actionItem=null,this._onDidChangeVisibility=this._register(new be),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=r,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=Be(o,Ge("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new GGe(e,r)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var s;(s=this.element)===null||s===void 0||s.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return o.options.anchorAlignmentProvider()}})}this.updateEnabled()}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}updateEnabled(){var e,t;const n=!this.getAction().enabled;(e=this.actionItem)===null||e===void 0||e.classList.toggle("disabled",n),(t=this.element)===null||t===void 0||t.classList.toggle("disabled",n)}}var zY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Af=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Bge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function qGe(i,e,t,n,r,o,s){const a=i.getActions(e);return ZGe(a,t,!1,typeof n=="string"?d=>d===n:n,r,o,s),YGe(a)}function YGe(i){const e=new Qe;for(const[,t]of i)for(const n of t)e.add(n);return e}function ZGe(i,e,t,n=a=>a==="navigation",r=Number.MAX_SAFE_INTEGER,o=()=>!1,s=!1){let a,u;Array.isArray(e)?(a=e,u=e):(a=e.primary,u=e.secondary);const d=new Set;for(const[h,f]of i){let p;n(h)?(p=a,p.length>0&&s&&p.push(new Qc)):(p=u,p.length>0&&p.push(new Qc));for(let m of f){t&&(m=m instanceof b0&&m.alt?m.alt:m);const v=p.push(m);m instanceof h8&&d.add({group:h,action:m,index:v-1})}}for(const{group:h,action:f,index:p}of d){const m=n(h)?a:u,v=f.actions;(v.length<=1||m.length+v.length-2<=r)&&o(f,h,m.length)&&m.splice(p,1,...v)}if(a!==u&&a.length>r){const h=a.splice(r,a.length-r);u.unshift(...h,new Qc)}}let lS=class extends ZA{constructor(e,t,n,r,o){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable}),this._keybindingService=n,this._notificationService=r,this._contextKeyService=o,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Aa),this._altKey=P1.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}onClick(e){return Bge(this,void 0,void 0,function*(){e.preventDefault(),e.stopPropagation();try{yield this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}})}render(e){super.render(e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);let t=!1,n=this._altKey.keyStatus.altKey||(As||Xa)&&this._altKey.keyStatus.shiftKey;const r=()=>{const o=t&&n;o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event(o=>{n=o.altKey||(As||Xa)&&o.shiftKey,r()})),this._register(qe(e,"mouseleave",o=>{t=!1,r()})),this._register(qe(e,"mouseenter",o=>{t=!0,r()}))}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}updateTooltip(){if(this.label){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let r=t?C("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,s=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=s&&s.getLabel(),u=a?C("titleAndKb","{0} ({1})",o,a):o;r+=`
[${Eq.modifierLabels[qu].altKey}] ${u}`}this.label.title=r}}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){var t;this._itemClassDispose.value=void 0;const{element:n,label:r}=this;if(!n||!r)return;const o=this._commandAction.checked&&(!((t=e.toggled)===null||t===void 0)&&t.icon)?e.toggled.icon:e.icon;if(o)if(pr.isThemeIcon(o)){const s=pr.asClassNameArray(o);r.classList.add(...s),this._itemClassDispose.value=Kn(()=>{r.classList.remove(...s)})}else o.light&&r.style.setProperty("--menu-entry-icon-light",yb(o.light)),o.dark&&r.style.setProperty("--menu-entry-icon-dark",yb(o.dark)),r.classList.add("icon"),this._itemClassDispose.value=Kn(()=>{r.classList.remove("icon"),r.style.removeProperty("--menu-entry-icon-light"),r.style.removeProperty("--menu-entry-icon-dark")})}};lS=zY([Af(2,Sr),Af(3,fo),Af(4,dn)],lS);let aU=class extends Fge{constructor(e,t,n){var r,o;const s=Object.assign({},t??Object.create(null),{menuAsChild:(r=t==null?void 0:t.menuAsChild)!==null&&r!==void 0?r:!1,classNames:(o=t==null?void 0:t.classNames)!==null&&o!==void 0?o:pr.isThemeIcon(e.item.icon)?pr.asClassName(e.item.icon):void 0});super(e,{getActions:()=>e.actions},n,s)}render(e){if(super.render(e),this.element){e.classList.add("menu-entry");const{icon:t}=this._action.item;t&&!pr.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",yb(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",yb(t.dark)))}}};aU=zY([Af(2,U0)],aU);let lU=class extends Nf{constructor(e,t,n,r,o,s,a,u){var d,h,f;super(null,e),this._keybindingService=n,this._notificationService=r,this._contextMenuService=o,this._menuService=s,this._instaService=a,this._storageService=u,this._container=null,this._storageKey=`${e.item.submenu._debugName}_lastActionId`;let p,m=u.get(this._storageKey,1);m&&(p=e.actions.find(b=>m===b.id)),p||(p=e.actions[0]),this._defaultAction=this._instaService.createInstance(lS,p,void 0);const v=Object.assign({},t??Object.create(null),{menuAsChild:(d=t==null?void 0:t.menuAsChild)!==null&&d!==void 0?d:!0,classNames:(h=t==null?void 0:t.classNames)!==null&&h!==void 0?h:["codicon","codicon-chevron-down"],actionRunner:(f=t==null?void 0:t.actionRunner)!==null&&f!==void 0?f:new Hy});this._dropdown=new Fge(e,e.actions,this._contextMenuService,v),this._dropdown.actionRunner.onDidRun(b=>{b.action instanceof b0&&this.update(b.action)})}update(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(lS,e,void 0),this._defaultAction.actionRunner=new class extends Hy{runAction(t,n){return Bge(this,void 0,void 0,function*(){yield t.run(void 0)})}},this._container&&this._defaultAction.render(bEe(this._container,Ge(".action-container")))}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Ge(".action-container");this._defaultAction.render(Be(this._container,t)),this._register(qe(t,Ht.KEY_DOWN,r=>{const o=new yr(r);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const n=Ge(".dropdown-action-container");this._dropdown.render(Be(this._container,n)),this._register(qe(n,Ht.KEY_DOWN,r=>{var o;const s=new yr(r);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)===null||o===void 0||o.focus(),s.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};lU=zY([Af(2,Sr),Af(3,fo),Af(4,U0),Af(5,bC),Af(6,An),Af(7,Ig)],lU);function XGe(i,e,t){return e instanceof b0?i.createInstance(lS,e,void 0):e instanceof SG?e.item.rememberDefaultAction?i.createInstance(lU,e,t):i.createInstance(aU,e,t):void 0}var Wge=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Vge=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Hge=gi("IPeekViewService");z0(Hge,class{constructor(){this._widgets=new Map}addExclusiveWidget(i,e){const t=this._widgets.get(i);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const r=this._widgets.get(i);r&&r.widget===e&&(r.listener.dispose(),this._widgets.delete(i))};this._widgets.set(i,{widget:e,listener:e.onDidClose(n)})}});var xl;(function(i){i.inPeekEditor=new Dt("inReferenceSearchEditor",!0,C("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),i.notInPeekEditor=i.inPeekEditor.toNegated()})(xl||(xl={}));let _O=class{constructor(e,t){e instanceof Kb&&xl.inPeekEditor.bindTo(t)}dispose(){}};_O.ID="editor.contrib.referenceController";_O=Wge([Vge(1,dn)],_O);Ti(_O.ID,_O);function QGe(i){let e=i.get(ki).getFocusedCodeEditor();return e instanceof Kb?e.getParentEditor():e}const JGe={headerBackgroundColor:ye.white,primaryHeadingColor:ye.fromHex("#333333"),secondaryHeadingColor:ye.fromHex("#6c6c6cb3")};let e5=class extends jGe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new be,this.onDidClose=this._onDidClose.event,Eg(this.options,JGe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){let t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();let e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=Ge(".head"),this._bodyElement=Ge(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const n=Ge(".peekview-title");this.options.supportOnTitleClick&&(n.classList.add("clickable"),ts(n,"click",s=>this._onTitleClick(s))),Be(this._headElement,n),this._fillTitleIcon(n),this._primaryHeading=Ge("span.filename"),this._secondaryHeading=Ge("span.dirname"),this._metaHeading=Ge("span.meta"),Be(n,this._primaryHeading,this._secondaryHeading,this._metaHeading);const r=Ge(".peekview-actions");Be(this._headElement,r);const o=this._getActionBarOptions();this._actionbarWidget=new cg(r,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new rc("peekview.close",C("label.close","Close"),_e.close.classNames,!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:XGe.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:$o(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Eu(this._metaHeading)):za(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(58)*1.2),r=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(r,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};e5=Wge([Vge(2,An)],e5);const eqe=Ce("peekViewTitle.background",{dark:tr(qh,.1),light:tr(qh,.1),hc:null},C("peekViewTitleBackground","Background color of the peek view title area.")),$ge=Ce("peekViewTitleLabel.foreground",{dark:ye.white,light:ye.black,hc:ye.white},C("peekViewTitleForeground","Color of the peek view title.")),zge=Ce("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hc:"#FFFFFF99"},C("peekViewTitleInfoForeground","Color of the peek view title info.")),tqe=Ce("peekView.border",{dark:qh,light:qh,hc:ho},C("peekViewBorder","Color of the peek view borders and arrow.")),nqe=Ce("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:ye.black},C("peekViewResultsBackground","Background color of the peek view result list."));var iqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class I0{constructor(e,t,n,r){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=r,this.id=Whe.nextId()}get uri(){return this.link.uri}get range(){var e,t;return(t=(e=this._range)!==null&&e!==void 0?e:this.link.targetSelectionRange)!==null&&t!==void 0?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=(e=this.parent.getPreview(this))===null||e===void 0?void 0:e.preview(this.range);return t?C({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",gc(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):C("aria.oneReference","symbol in {0} on line {1} at column {2}",gc(this.uri),this.range.startLineNumber,this.range.startColumn)}}class rqe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:r,startColumn:o,endLineNumber:s,endColumn:a}=e,u=n.getWordUntilPosition({lineNumber:r,column:o-t}),d=new Q(r,u.startColumn,r,o),h=new Q(s,a,s,1073741824),f=n.getValueInRange(d).replace(/^\s+/,""),p=n.getValueInRange(e),m=n.getValueInRange(h).replace(/\s+$/,"");return{value:f+p+m,highlight:{start:f.length,end:f.length+p.length}}}}class vO{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new ta}dispose(){oi(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?C("aria.fileReferences.1","1 symbol in {0}, full path {1}",gc(this.uri),this.uri.fsPath):C("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,gc(this.uri),this.uri.fsPath)}resolve(e){return iqe(this,void 0,void 0,function*(){if(this._previews.size!==0)return this;for(let t of this.children)if(!this._previews.has(t.uri))try{const n=yield e.createModelReference(t.uri);this._previews.set(t.uri,new rqe(n))}catch(n){gn(n)}return this})}}class wl{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new be,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(wl._compareReferences);let r;for(let o of e)if((!r||!sa.isEqual(r.uri,o.uri,!0))&&(r=new vO(this,o.uri),this.groups.push(r)),r.children.length===0||wl._compareReferences(o,r.children[r.children.length-1])!==0){const s=new I0(n===o,r,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(s),r.children.push(s)}}dispose(){oi(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new wl(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?C("aria.result.0","No results found"):this.references.length===1?C("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?C("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):C("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){let{parent:n}=e,r=n.children.indexOf(e),o=n.children.length,s=n.parent.groups.length;return s===1||t&&r+1<o||!t&&r>0?(t?r=(r+1)%o:r=(r+o-1)%o,n.children[r]):(r=n.parent.groups.indexOf(n),t?(r=(r+1)%s,n.parent.groups[r].children[0]):(r=(r+s-1)%s,n.parent.groups[r].children[n.parent.groups[r].children.length-1]))}nearestReference(e,t){const n=this.references.map((r,o)=>({idx:o,prefixLen:$y(r.uri.toString(),e.toString()),offsetDist:Math.abs(r.range.startLineNumber-t.lineNumber)*100+Math.abs(r.range.startColumn-t.column)})).sort((r,o)=>r.prefixLen>o.prefixLen?-1:r.prefixLen<o.prefixLen?1:r.offsetDist<o.offsetDist?-1:r.offsetDist>o.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&Q.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return sa.compare(e.uri,t.uri)||Q.compareRangesUsingStarts(e.range,t.range)}}function Uge(i){if(!i)return;typeof i=="string"&&(i=sn.file(i));const e=gc(i)||(i.scheme===kn.file?i.fsPath:i.path);return As&&zke(e)?uU(e):e}function uU(i,e){return Lce(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}var $B=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},bO=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let cU=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof wl||e instanceof vO}getChildren(e){if(e instanceof wl)return e.groups;if(e instanceof vO)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};cU=$B([bO(0,Qa)],cU);class oqe{getHeight(){return 23}getTemplateId(e){return e instanceof vO?CO.id:PM.id}}let dU=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof I0){const n=(t=e.parent.getPreview(e))===null||t===void 0?void 0:t.preview(e.range);if(n)return n.value}return gc(e.uri)}};dU=$B([bO(0,Sr)],dU);class sqe{getId(e){return e instanceof I0?e.id:e.uri}}let hU=class extends Oe{constructor(e,t,n){super(),this._uriLabel=t;const r=document.createElement("div");r.classList.add("reference-file"),this.file=this._register(new $3(r,{supportHighlights:!0})),this.badge=new bz(Be(r,Ge(".count"))),this._register(c4e(this.badge,n)),e.appendChild(r)}set(e,t){let n=VG(e.uri);this.file.setLabel(Uge(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});const r=e.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(C("referencesCount","{0} references",r)):this.badge.setTitleFormat(C("referenceCount","{0} reference",r))}};hU=$B([bO(1,yM),bO(2,Er)],hU);let CO=class jge{constructor(e){this._instantiationService=e,this.templateId=jge.id}renderTemplate(e){return this._instantiationService.createInstance(hU,e)}renderElement(e,t,n){n.set(e.element,oB(e.filterData))}disposeTemplate(e){e.dispose()}};CO.id="FileReferencesRenderer";CO=$B([bO(0,An)],CO);class aqe{constructor(e){this.label=new Wb(e)}set(e,t){var n;const r=(n=e.parent.getPreview(e))===null||n===void 0?void 0:n.preview(e.range);if(!r||!r.value)this.label.set(`${gc(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:s}=r;t&&!Zh.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,oB(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[s]))}}}class PM{constructor(){this.templateId=PM.id}renderTemplate(e){return new aqe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(){}}PM.id="OneReferenceRenderer";class lqe{getWidgetAriaLabel(){return C("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var uqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Vg=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Gne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class zB{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new Qe,this._callOnModelChange=new Qe,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(let t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let o=0,s=e.children.length;o<s;o++){let a=e.children[o];this._decorationIgnoreSet.has(a.id)||a.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:a.range,options:zB.DecorationOptions}),n.push(o))}const r=this._editor.deltaDecorations([],t);for(let o=0;o<r.length;o++)this._decorations.set(r[o],e.children[n[o]])}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(let[n,r]of this._decorations){const o=t.getDecorationRange(n);if(!o)continue;let s=!1;if(!Q.equalsRange(o,r.range)){if(Q.spansMultipleLines(o))s=!0;else{const a=r.range.endColumn-r.range.startColumn,u=o.endColumn-o.startColumn;a!==u&&(s=!0)}s?(this._decorationIgnoreSet.add(r.id),e.push(n)):r.range=o}}for(let n=0,r=e.length;n<r;n++)this._decorations.delete(e[n]);this._editor.deltaDecorations(e,[])}}removeDecorations(){this._editor.deltaDecorations([...this._decorations.keys()],[]),this._decorations.clear()}}zB.DecorationOptions=Sn.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class cqe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const r=JSON.parse(e);t=r.ratio,n=r.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class dqe extends gz{}let fU=class extends e5{constructor(e,t,n,r,o,s,a,u,d,h,f,p){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=o,this._instantiationService=s,this._peekViewService=a,this._uriLabel=u,this._undoRedoService=d,this._keybindingService=h,this._modeService=f,this._languageConfigurationService=p,this._disposeOnNewModel=new Qe,this._callOnDispose=new Qe,this._onDidSelectReference=new be,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new cr(0,0),this._applyTheme(r.getColorTheme()),this._callOnDispose.add(r.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),oi(this._preview),oi(this._previewNotAvailableMessage),oi(this._tree),oi(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(tqe)||ye.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(eqe)||ye.transparent,primaryHeadingColor:e.getColor($ge),secondaryHeadingColor:e.getColor(zge)})}show(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Be(e,Ge("div.messages")),za(this._messageContainer),this._splitView=new Lhe(e,{orientation:1}),this._previewContainer=Be(e,Ge("div.preview.inline"));let t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(Kb,this._previewContainer,t,this.editor),za(this._previewContainer),this._previewNotAvailableMessage=new Ll(C("missingPreviewMessage","no preview available"),Ll.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService,this._modeService,this._languageConfigurationService),this._treeContainer=Be(e,Ge("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new lqe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(dU),identityProvider:new sqe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:nqe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(ts(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(dqe,"ReferencesWidget",this._treeContainer,new oqe,[this._instantiationService.createInstance(CO),this._instantiationService.createInstance(PM)],this._instantiationService.createInstance(cU),n),this._splitView.addView({onDidChange:Rt.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},R3.Distribute),this._splitView.addView({onDidChange:Rt.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},R3.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));let r=(o,s)=>{o instanceof I0&&(s==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:s,source:"tree"}))};this._tree.onDidOpen(o=>{o.sideBySide?r(o.element,"side"):o.editorOptions.pinned?r(o.element,"goto"):r(o.element,"show")}),za(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new cr(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=C("noResults","No results"),Eu(this._messageContainer),Promise.resolve(void 0)):(za(this._messageContainer),this._decorationsManager=new zB(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const r=this._getFocusedReference();r&&this._onDidSelectReference.fire({element:{uri:r.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),Eu(this._treeContainer),Eu(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof I0)return e;if(e instanceof vO&&e.children.length>0)return e.children[0]}revealReference(e){return Gne(this,void 0,void 0,function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})})}_revealReference(e,t){return Gne(this,void 0,void 0,function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==kn.inMemory?this.setTitle(xce(e.uri),this._uriLabel.getUriLabel(VG(e.uri))):this.setTitle(C("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent),this._tree.reveal(e));const r=yield n;if(!this._model){r.dispose();return}oi(this._previewModelReference);const o=r.object;if(o){const s=this._preview.getModel()===o.textEditorModel?0:1,a=Q.lift(e.range).collapseToStart();this._previewModelReference=r,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,s)}else this._preview.setModel(this._previewNotAvailableMessage),r.dispose()})}};fU=uqe([Vg(3,Er),Vg(4,Qa),Vg(5,An),Vg(6,Hge),Vg(7,yM),Vg(8,gM),Vg(9,Sr),Vg(10,Fs),Vg(11,fM)],fU);var hqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ew=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},qne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const MC=new Dt("referenceSearchVisible",!1,C("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let k0=class gU{constructor(e,t,n,r,o,s,a,u){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=r,this._notificationService=o,this._instantiationService=s,this._storageService=a,this._configurationService=u,this._disposables=new Qe,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=MC.bindTo(n)}static get(e){return e.getContribution(gU.ID)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)===null||e===void 0||e.dispose(),(t=this._model)===null||t===void 0||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let r;if(this._widget&&(r=this._widget.position),this.closeWidget(),r&&e.containsPosition(r))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",s=cqe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(fU,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(C("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(u=>{let{element:d,kind:h}=u;if(d)switch(h){case"open":(u.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(d,!1,!1);break;case"side":this.openReference(d,!0,!1);break;case"goto":n?this._gotoReference(d):this.openReference(d,!1,!0);break}}));const a=++this._requestIdPool;t.then(u=>{var d;if(a!==this._requestIdPool||!this._widget){u.dispose();return}return(d=this._model)===null||d===void 0||d.dispose(),this._model=u,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(C("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));let h=this._editor.getModel().uri,f=new Le(e.startLineNumber,e.startColumn),p=this._model.nearestReference(h,f);if(p)return this._widget.setSelection(p).then(()=>{this._widget&&this._editor.getOption(76)==="editor"&&this._widget.focusOnPreviewEditor()})}})},u=>{this._notificationService.error(u)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return qne(this,void 0,void 0,function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const r=this._model.nextOrPreviousReference(n,e),o=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(r),yield this._gotoReference(r),o?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor()})}revealReference(e){return qne(this,void 0,void 0,function*(){!this._editor.hasModel()||!this._model||!this._widget||(yield this._widget.revealReference(e))})}closeWidget(e=!0){var t,n;(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e){this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;const t=Q.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:t}},this._editor).then(n=>{var r;if(this._ignoreModelChangeEvent=!1,!n||!this._widget){this.closeWidget();return}if(this._editor===n)this._widget.show(t),this._widget.focusOnReferenceTree();else{const o=gU.get(n),s=this._model.clone();this.closeWidget(),n.focus(),o.toggleWidget(t,cs(a=>Promise.resolve(s)),(r=this._peekMode)!==null&&r!==void 0?r:!1)}},n=>{this._ignoreModelChangeEvent=!1,gn(n)})}openReference(e,t,n){t||this.closeWidget();const{uri:r,range:o}=e;this._editorService.openCodeEditor({resource:r,options:{selection:o,pinned:n}},this._editor,t)}};k0.ID="editor.contrib.referencesController";k0=hqe([ew(2,dn),ew(3,ki),ew(4,fo),ew(5,An),ew(6,Ig),ew(7,nr)],k0);function RC(i,e){const t=QGe(i);if(!t)return;let n=k0.get(t);n&&e(n)}Os.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Yr(2089,60),when:_t.or(MC,xl.inPeekEditor),handler(i){RC(i,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Os.registerCommandAndKeybindingRule({id:"goToNextReference",weight:100-10,primary:62,secondary:[70],when:_t.or(MC,xl.inPeekEditor),handler(i){RC(i,e=>{e.goToNextOrPreviousReference(!0)})}});Os.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:100-10,primary:1086,secondary:[1094],when:_t.or(MC,xl.inPeekEditor),handler(i){RC(i,e=>{e.goToNextOrPreviousReference(!1)})}});Qn.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");Qn.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");Qn.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");Qn.registerCommand("closeReferenceSearch",i=>RC(i,e=>e.closeWidget()));Os.registerKeybindingRule({id:"closeReferenceSearch",weight:100-101,primary:9,secondary:[1033],when:_t.and(xl.inPeekEditor,_t.not("config.editor.stablePeek"))});Os.registerKeybindingRule({id:"closeReferenceSearch",weight:200+50,primary:9,secondary:[1033],when:_t.and(MC,_t.not("config.editor.stablePeek"))});Os.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:_t.and(MC,Ahe),handler(i){var e;const n=(e=i.get(wc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof I0&&RC(i,r=>r.revealReference(n[0]))}});Os.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:_t.and(MC,Ahe),handler(i){var e;const n=(e=i.get(wc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof I0&&RC(i,r=>r.openReference(n[0],!0,!0))}});Qn.registerCommand("openReference",i=>{var e;const n=(e=i.get(wc).lastFocusedList)===null||e===void 0?void 0:e.getFocus();Array.isArray(n)&&n[0]instanceof I0&&RC(i,r=>r.openReference(n[0],!1,!0))});var Kge=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},a2=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const UY=new Dt("hasSymbols",!1,C("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),UB=gi("ISymbolNavigationService");let pU=class{constructor(e,t,n,r){this._editorService=t,this._notificationService=n,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=UY.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)===null||e===void 0||e.dispose(),(t=this._currentMessage)===null||t===void 0||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new mU(this._editorService),r=n.onDidChange(o=>{if(this._ignoreEditorChange)return;const s=this._editorService.getActiveCodeEditor();if(!s)return;const a=s.getModel(),u=s.getPosition();if(!a||!u)return;let d=!1,h=!1;for(const f of t.references)if(Ece(f.uri,a.uri))d=!0,h=h||Q.containsPosition(f.range,u);else if(d)break;(!d||!h)&&this.reset()});this._currentState=t0(n,r)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:Q.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var e;(e=this._currentMessage)===null||e===void 0||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?C("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):C("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}};pU=Kge([a2(0,dn),a2(1,ki),a2(2,fo),a2(3,Sr)],pU);z0(UB,pU,!0);nt(new class extends Ps{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:UY,kbOpts:{weight:100,primary:70}})}runEditorCommand(i,e){return i.get(UB).revealNext(e)}});Os.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:UY,primary:9,handler(i){i.get(UB).reset()}});let mU=class{constructor(e){this._listener=new Map,this._disposables=new Qe,this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),oi(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,t0(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))===null||t===void 0||t.dispose(),this._listener.delete(e)}};mU=Kge([a2(0,ki)],mU);var Gge=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function FM(i,e,t,n){const o=t.ordered(i).map(s=>Promise.resolve(n(s,i,e)).then(void 0,a=>{Rs(a)}));return Promise.all(o).then(s=>{const a=[];for(let u of s)Array.isArray(u)?a.push(...u):u&&a.push(u);return a})}function jY(i,e,t){return FM(i,e,TA,(n,r,o)=>n.provideDefinition(r,o,t))}function qge(i,e,t){return FM(i,e,YF,(n,r,o)=>n.provideDeclaration(r,o,t))}function Yge(i,e,t){return FM(i,e,ZF,(n,r,o)=>n.provideImplementation(r,o,t))}function Zge(i,e,t){return FM(i,e,XF,(n,r,o)=>n.provideTypeDefinition(r,o,t))}function jB(i,e,t,n){return FM(i,e,KF,(r,o,s)=>Gge(this,void 0,void 0,function*(){const a=yield r.provideReferences(o,s,{includeDeclaration:!0},n);if(!t||!a||a.length!==2)return a;const u=yield r.provideReferences(o,s,{includeDeclaration:!1},n);return u&&u.length===1?u:a}))}function BM(i){return Gge(this,void 0,void 0,function*(){const e=yield i(),t=new wl(e,""),n=t.references.map(r=>r.link);return t.dispose(),n})}Lg("_executeDefinitionProvider",(i,e)=>BM(()=>jY(i,e,Vn.None)));Lg("_executeDeclarationProvider",(i,e)=>BM(()=>qge(i,e,Vn.None)));Lg("_executeImplementationProvider",(i,e)=>BM(()=>Yge(i,e,Vn.None)));Lg("_executeTypeDefinitionProvider",(i,e)=>BM(()=>Zge(i,e,Vn.None)));Lg("_executeReferenceProvider",(i,e)=>BM(()=>jB(i,e,!1,Vn.None)));var td=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},Q6,J6,eW,tW,nW,iW,rW,oW;ia.appendMenuItem(Mt.EditorContext,{submenu:Mt.EditorContextPeek,title:C("peek.submenu","Peek"),group:"navigation",order:100});const Xge=new Set;function cf(i){const e=new i;return Iue(e),Xge.add(e.id),e}class nL extends Et{constructor(e,t){super(t),this._configuration=e}run(e,t){if(!t.hasModel())return Promise.resolve(void 0);const n=e.get(fo),r=e.get(ki),o=e.get(zp),s=e.get(UB),a=t.getModel(),u=t.getPosition(),d=new YA(t,5),h=rG(this._getLocationModel(a,u,d.token),d.token).then(f=>td(this,void 0,void 0,function*(){if(!f||d.token.isCancellationRequested)return;ks(f.ariaMessage);let p;if(f.referenceAt(a.uri,u)){const v=this._getAlternativeCommand(t);v!==this.id&&Xge.has(v)&&(p=t.getAction(v))}const m=f.references.length;if(m===0){if(!this._configuration.muteMessage){const v=a.getWordAtPosition(u);Bu.get(t).showMessage(this._getNoResultFoundMessage(v),u)}}else if(m===1&&p)p.run();else return this._onResult(r,s,t,f)}),f=>{n.error(f)}).finally(()=>{d.dispose()});return o.showWhile(h,250),h}_onResult(e,t,n,r){return td(this,void 0,void 0,function*(){const o=this._getGoToPreference(n);if(!(n instanceof Kb)&&(this._configuration.openInPeek||o==="peek"&&r.references.length>1))this._openInPeek(n,r);else{const s=r.firstReference(),a=r.references.length>1&&o==="gotoAndPeek",u=yield this._openReference(n,e,s,this._configuration.openToSide,!a);a&&u?this._openInPeek(u,r):r.dispose(),o==="goto"&&t.put(s)}})}_openReference(e,t,n,r,o){return td(this,void 0,void 0,function*(){let s;if(XTe(n)&&(s=n.targetSelectionRange),s||(s=n.range),!s)return;const a=yield t.openCodeEditor({resource:n.uri,options:{selection:Q.collapseToStart(s),selectionRevealType:3}},e,r);if(a){if(o){const u=a.getModel(),d=a.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===u&&a.deltaDecorations(d,[])},350)}return a}})}_openInPeek(e,t){let n=k0.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),cs(r=>Promise.resolve(t)),this._configuration.openInPeek):t.dispose()}}class KB extends nL{_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(yield jY(e,t,n),C("def.title","Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?C("noResultWord","No definition found for '{0}'",e.word):C("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleDefinitions}}const Qge=PS&&!tG?2118:70;cf((Q6=class _U extends KB{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:_U.id,label:C("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:_t.and(de.hasDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:Qge,weight:100},contextMenuOpts:{group:"navigation",order:1.1}}),Qn.registerCommandAlias("editor.action.goToDeclaration",_U.id)}},Q6.id="editor.action.revealDefinition",Q6));cf((J6=class vU extends KB{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:vU.id,label:C("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:_t.and(de.hasDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,Qge),weight:100}}),Qn.registerCommandAlias("editor.action.openDeclarationToTheSide",vU.id)}},J6.id="editor.action.revealDefinitionAside",J6));cf((eW=class bU extends KB{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:bU.id,label:C("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:_t.and(de.hasDefinitionProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:2}}),Qn.registerCommandAlias("editor.action.previewDeclaration",bU.id)}},eW.id="editor.action.peekDefinition",eW));class Jge extends nL{_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(yield qge(e,t,n),C("decl.title","Declarations"))})}_getNoResultFoundMessage(e){return e&&e.word?C("decl.noResultWord","No declaration found for '{0}'",e.word):C("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(50).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(50).multipleDeclarations}}cf((tW=class epe extends Jge{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:epe.id,label:C("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:_t.and(de.hasDeclarationProvider,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}_getNoResultFoundMessage(e){return e&&e.word?C("decl.noResultWord","No declaration found for '{0}'",e.word):C("decl.generic.noResults","No declaration found")}},tW.id="editor.action.revealDeclaration",tW));cf(class extends Jge{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:C("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:_t.and(de.hasDeclarationProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:3}})}});class tpe extends nL{_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(yield Zge(e,t,n),C("typedef.title","Type Definitions"))})}_getNoResultFoundMessage(e){return e&&e.word?C("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):C("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(50).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(50).multipleTypeDefinitions}}cf((nW=class npe extends tpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:npe.ID,label:C("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:_t.and(de.hasTypeDefinitionProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}},nW.ID="editor.action.goToTypeDefinition",nW));cf((iW=class ipe extends tpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:ipe.ID,label:C("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:_t.and(de.hasTypeDefinitionProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:4}})}},iW.ID="editor.action.peekTypeDefinition",iW));class rpe extends nL{_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(yield Yge(e,t,n),C("impl.title","Implementations"))})}_getNoResultFoundMessage(e){return e&&e.word?C("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):C("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(50).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(50).multipleImplementations}}cf((rW=class ope extends rpe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ope.ID,label:C("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:_t.and(de.hasImplementationProvider,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}},rW.ID="editor.action.goToImplementation",rW));cf((oW=class spe extends rpe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:spe.ID,label:C("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:_t.and(de.hasImplementationProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:5}})}},oW.ID="editor.action.peekImplementation",oW));class ape extends nL{_getNoResultFoundMessage(e){return e?C("references.no","No references found for '{0}'",e.word):C("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(50).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(50).multipleReferences}}cf(class extends ape{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:C("goToReferences.label","Go to References"),alias:"Go to References",precondition:_t.and(de.hasReferenceProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:de.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(yield jB(e,t,!0,n),C("ref.title","References"))})}});cf(class extends ape{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:C("references.action.label","Peek References"),alias:"Peek References",precondition:_t.and(de.hasReferenceProvider,xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:Mt.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(yield jB(e,t,!1,n),C("ref.title","References"))})}});class fqe extends nL{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",label:C("label.generic","Go to Any Symbol"),alias:"Go to Any Symbol",precondition:_t.and(xl.notInPeekEditor,de.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}_getLocationModel(e,t,n){return td(this,void 0,void 0,function*(){return new wl(this._references,C("generic.title","Locations"))})}_getNoResultFoundMessage(e){return e&&C("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return(t=this._gotoMultipleBehaviour)!==null&&t!==void 0?t:e.getOption(50).multipleReferences}_getAlternativeCommand(){return""}}Qn.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:sn},{name:"position",description:"The position at which to start",constraint:Le.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(i,e,t,n,r,o,s)=>td(void 0,void 0,void 0,function*(){Gi(sn.isUri(e)),Gi(Le.isIPosition(t)),Gi(Array.isArray(n)),Gi(typeof r>"u"||typeof r=="string"),Gi(typeof s>"u"||typeof s=="boolean");const a=i.get(ki),u=yield a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(dg(u))return u.setPosition(t),u.revealPositionInCenterIfOutsideViewport(t,0),u.invokeWithinContext(d=>{const h=new class extends fqe{_getNoResultFoundMessage(f){return o||super._getNoResultFoundMessage(f)}}({muteMessage:!o,openInPeek:!!s,openToSide:!1},n,r);d.get(An).invokeFunction(h.run.bind(h),u)})})});Qn.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:sn},{name:"position",description:"The position at which to start",constraint:Le.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(i,e,t,n,r)=>td(void 0,void 0,void 0,function*(){i.get(kr).executeCommand("editor.action.goToLocations",e,t,n,r,void 0,!0)})});Qn.registerCommand({id:"editor.action.findReferences",handler:(i,e,t)=>{Gi(sn.isUri(e)),Gi(Le.isIPosition(t));const n=i.get(ki);return n.openCodeEditor({resource:e},n.getFocusedCodeEditor()).then(r=>{if(!dg(r)||!r.hasModel())return;const o=k0.get(r);if(!o)return;const s=cs(u=>jB(r.getModel(),Le.lift(t),!1,u).then(d=>new wl(d,C("ref.title","References")))),a=new Q(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(o.toggleWidget(a,s,!1))})}});Qn.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");ia.appendMenuItems([{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:C({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:C({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:C({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:C({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:Mt.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:C({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);var gqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Yne=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let Gb=class l2{constructor(e,t,n){this.textModelResolverService=t,this.modeService=n,this.toUnhook=new Qe,this.toUnhookForKeyboard=new Qe,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;let r=new Pge(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown(([o,s])=>{this.startFindDefinitionFromMouse(o,ml(s))})),this.toUnhook.add(r.onExecute(o=>{this.isEnabled(o)&&this.gotoDefinition(o.target.position,o.hasSideBySideModifier).then(()=>{this.removeLinkDecorations()},s=>{this.removeLinkDecorations(),gn(s)})})),this.toUnhook.add(r.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(l2.ID)}startFindDefinitionFromCursor(e){return this.startFindDefinition(e).then(()=>{this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))})}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}startFindDefinition(e){var t;this.toUnhookForKeyboard.clear();const n=e?(t=this.editor.getModel())===null||t===void 0?void 0:t.getWordAtPosition(e):null;if(!n)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===n.startColumn&&this.currentWordAtPosition.endColumn===n.endColumn&&this.currentWordAtPosition.word===n.word)return Promise.resolve(0);this.currentWordAtPosition=n;let r=new Ede(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=cs(o=>this.findDefinition(e,o)),this.previousPromise.then(o=>{if(!o||!o.length||!r.validate(this.editor)){this.removeLinkDecorations();return}if(o.length>1)this.addDecoration(new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn),new Rp().appendText(C("multipleResults","Click to show {0} definitions.",o.length)));else{let s=o[0];if(!s.uri)return;this.textModelResolverService.createModelReference(s.uri).then(a=>{if(!a.object||!a.object.textEditorModel){a.dispose();return}const{object:{textEditorModel:u}}=a,{startLineNumber:d}=s.range;if(d<1||d>u.getLineCount()){a.dispose();return}const h=this.getPreviewValue(u,d,s);let f;s.originSelectionRange?f=Q.lift(s.originSelectionRange):f=new Q(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn);const p=this.modeService.getModeIdByFilepathOrFirstLine(u.uri);this.addDecoration(f,new Rp().appendCodeblock(p||"",h)),a.dispose()})}}).then(void 0,gn)}getPreviewValue(e,t,n){let r=n.targetSelectionRange?n.range:this.getPreviewRangeBasedOnBrackets(e,t);return r.endLineNumber-r.startLineNumber>=l2.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,r)}stripIndentationFromPreviewRange(e,t,n){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const u=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,u)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),r=Math.min(e.getLineCount(),t+l2.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<r;o++){let s=e.getLineFirstNonWhitespaceColumn(o);if(n===s)break}return new Q(t,1,o+1,1)}getPreviewRangeBasedOnBrackets(e,t){const n=Math.min(e.getLineCount(),t+l2.MAX_SOURCE_PREVIEW_LINES),r=[];let o=!0,s=e.bracketPairs.findNextBracket(new Le(t,1));for(;s!==null;){if(r.length===0)r.push(s);else{const h=r[r.length-1];if(h.open[0]===s.open[0]&&h.isOpen&&!s.isOpen?r.pop():r.push(s),r.length===0)if(o)o=!1;else return new Q(t,1,s.range.endLineNumber+1,1)}const a=e.getLineMaxColumn(t);let u=s.range.endLineNumber,d=s.range.endColumn;if(a===s.range.endColumn&&(u++,d=1),u>n)return new Q(t,1,n+1,1);s=e.bracketPairs.findNextBracket(new Le(u,d))}return new Q(t,1,n+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}removeLinkDecorations(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}isEnabled(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&e.target.type===6&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&TA.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?jY(n,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const r=!t&&this.editor.getOption(77)&&!this.isInPeekEditor(n);return new KB({openToSide:t,openInPeek:r,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(n,this.editor)})}isInPeekEditor(e){const t=e.get(dn);return xl.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose()}};Gb.ID="editor.contrib.gotodefinitionatposition";Gb.MAX_SOURCE_PREVIEW_LINES=8;Gb=gqe([Yne(1,Qa),Yne(2,Fs)],Gb);Ti(Gb.ID,Gb);hr((i,e)=>{const t=i.getColor(sce);t&&e.addRule(`.monaco-editor .goto-definition-link { color: ${t} !important; }`)});const dP=Ge;class lpe extends Oe{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this._scrollbar=this._register(new pM(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this._scrollbar.getDomNode())}onContentsChanged(){this._scrollbar.scanDomNode()}}class KY extends Oe{constructor(e,t,n){super(),this.actionContainer=Be(e,dP("div.action-container")),this.action=Be(this.actionContainer,dP("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Be(this.action,dP(`span.icon.${t.iconClass}`));const r=Be(this.action,dP("span"));r.textContent=n?`${t.label} (${n})`:t.label,this._register(qe(this.actionContainer,Ht.MOUSE_DOWN,o=>{o.stopPropagation(),o.preventDefault(),t.run(this.actionContainer)})),this.setEnabled(!0)}static render(e,t,n){return new KY(e,t,n)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}class pqe{constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new be,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new be,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new be,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){for(let n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}flushColor(){this._onColorFlushed.fire(this._color)}}const Bh=Ge;class mqe extends Oe{constructor(e,t,n){super(),this.model=t,this.domNode=Bh(".colorpicker-header"),Be(e,this.domNode),this.pickedColorNode=Be(this.domNode,Bh(".picked-color"));const r=C("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this.pickedColorNode.setAttribute("title",r);const o=Be(this.domNode,Bh(".original-color"));o.style.backgroundColor=ye.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(Ib)||ye.white,this._register(hr((s,a)=>{this.backgroundColor=s.getColor(Ib)||ye.white})),this._register(qe(this.pickedColorNode,Ht.CLICK,()=>this.model.selectNextColorPresentation())),this._register(qe(o,Ht.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this.pickedColorNode.style.backgroundColor=ye.Format.CSS.format(t.color)||"",this.pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){this.pickedColorNode.style.backgroundColor=ye.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this.pickedColorNode.prepend(Bh(".codicon.codicon-color-mode"))}}class _qe extends Oe{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this.domNode=Bh(".colorpicker-body"),Be(e,this.domNode),this.saturationBox=new vqe(this.domNode,this.model,this.pixelRatio),this._register(this.saturationBox),this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this.saturationBox.onColorFlushed(this.flushColor,this)),this.opacityStrip=new bqe(this.domNode,this.model),this._register(this.opacityStrip),this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this.opacityStrip.onColorFlushed(this.flushColor,this)),this.hueStrip=new Cqe(this.domNode,this.model),this._register(this.hueStrip),this._register(this.hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this.hueStrip.onColorFlushed(this.flushColor,this))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new ye(new Yf(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new ye(new Yf(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new ye(new Yf(n===360?0:n,t.s,t.v,t.a))}layout(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}class vqe extends Oe{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new be,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Bh(".saturation-wrap"),Be(e,this.domNode),this.canvas=document.createElement("canvas"),this.canvas.className="saturation-box",Be(this.domNode,this.canvas),this.selection=Bh(".saturation-selection"),Be(this.domNode,this.selection),this.layout(),this._register(aG(this.domNode,r=>this.onMouseDown(r))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}onMouseDown(e){this.monitor=this._register(new yC);const t=Us(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,VS,r=>this.onDidChangePosition(r.posx-t.left,r.posy-t.top),()=>null);const n=Qle(document,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),r=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,r),this._onDidChange.fire({s:n,v:r})}layout(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new ye(new Yf(e.h,1,1,1)),n=this.canvas.getContext("2d"),r=n.createLinearGradient(0,0,this.canvas.width,0);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)");const o=n.createLinearGradient(0,0,0,this.canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=ye.Format.CSS.format(t),n.fill(),n.fillStyle=r,n.fill(),n.fillStyle=o,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class upe extends Oe{constructor(e,t){super(),this.model=t,this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new be,this.onColorFlushed=this._onColorFlushed.event,this.domNode=Be(e,Bh(".strip")),this.overlay=Be(this.domNode,Bh(".overlay")),this.slider=Be(this.domNode,Bh(".slider")),this.slider.style.top="0px",this._register(aG(this.domNode,n=>this.onMouseDown(n))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onMouseDown(e){const t=this._register(new yC),n=Us(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.buttons,VS,o=>this.onDidChangeTop(o.posy-n.top),()=>null);const r=Qle(document,()=>{this._onColorFlushed.fire(),r.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class bqe extends upe{constructor(e,t){super(e,t),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:n,b:r}=e.rgba,o=new ye(new fi(t,n,r,1)),s=new ye(new fi(t,n,r,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class Cqe extends upe{constructor(e,t){super(e,t),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class wqe extends Vu{constructor(e,t,n,r){super(),this.model=t,this.pixelRatio=n,this._register(JK(()=>this.layout()));const o=Bh(".colorpicker-widget");e.appendChild(o);const s=new mqe(o,this.model,r);this.body=new _qe(o,this.model,this.pixelRatio),this._register(s),this._register(this.body)}layout(){this.body.layout()}}var yqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Sqe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Zne=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Lqe{constructor(e,t,n,r){this.owner=e,this.range=t,this.model=n,this.provider=r,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let CU=class{constructor(e,t,n){this._editor=e,this._hover=t,this._themeService=n}computeSync(e,t){return[]}computeAsync(e,t,n){return Yo.fromPromise(this._computeAsync(e,t,n))}_computeAsync(e,t,n){return Zne(this,void 0,void 0,function*(){if(!this._editor.hasModel())return[];const r=jb.get(this._editor);for(const o of t){if(!r.isColorDecorationId(o.id))continue;const s=r.getColorData(o.range.getStartPosition());if(s)return[yield this._createColorHover(this._editor.getModel(),s.colorInfo,s.provider)]}return[]})}_createColorHover(e,t,n){return Zne(this,void 0,void 0,function*(){const r=e.getValueInRange(t.range),{red:o,green:s,blue:a,alpha:u}=t.color,d=new fi(Math.round(o*255),Math.round(s*255),Math.round(a*255),u),h=new ye(d),f=yield zne(e,t,n,Vn.None),p=new pqe(h,[],0);return p.colorPresentations=f||[],p.guessColorPresentation(h,r),new Lqe(this,Q.lift(t.range),p,n)})}renderHoverParts(e,t,n){if(e.length===0||!this._editor.hasModel())return Oe.None;const r=new Qe,o=e[0],s=this._editor.getModel(),a=o.model,u=r.add(new wqe(t,a,this._editor.getOption(128),this._themeService));let d=new Q(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn);const h=()=>{let p,m;if(a.presentation.textEdit){p=[a.presentation.textEdit],m=new Q(a.presentation.textEdit.range.startLineNumber,a.presentation.textEdit.range.startColumn,a.presentation.textEdit.range.endLineNumber,a.presentation.textEdit.range.endColumn);const v=this._editor.getModel()._setTrackedRange(null,m,3);this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p),m=this._editor.getModel()._getTrackedRange(v)||m}else p=[{identifier:null,range:d,text:a.presentation.label,forceMoveMarkers:!1}],m=d.setEndPosition(d.endLineNumber,d.startColumn+a.presentation.label.length),this._editor.pushUndoStop(),this._editor.executeEdits("colorpicker",p);a.presentation.additionalTextEdits&&(p=[...a.presentation.additionalTextEdits],this._editor.executeEdits("colorpicker",p),this._hover.hide()),this._editor.pushUndoStop(),d=m},f=p=>zne(s,{range:d,color:{red:p.rgba.r/255,green:p.rgba.g/255,blue:p.rgba.b/255,alpha:p.rgba.a}},o.provider,Vn.None).then(m=>{a.colorPresentations=m||[]});return r.add(a.onColorFlushed(p=>{f(p).then(h)})),r.add(a.onDidChangeColor(f)),this._hover.setColorPicker(u),r}};CU=yqe([Sqe(2,Er)],CU);var Eqe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},xqe=globalThis&&globalThis.__asyncValues||function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof __values=="function"?__values(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=i[o]&&function(s){return new Promise(function(a,u){s=i[o](s),r(a,u,s.done,s.value)})}}function r(o,s,a,u){Promise.resolve(u).then(function(d){o({value:d,done:a})},s)}};class cpe{constructor(e,t,n,r,o){this._computer=e,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new er(()=>this._triggerAsyncComputation(),0),this._secondWaitScheduler=new er(()=>this._triggerSyncComputation(),0),this._loadingMessageScheduler=new er(()=>this._showLoadingMessage(),0),this._asyncIterable=null,this._asyncIterableDone=!1,this._completeCallback=t,this._errorCallback=n,this._progressCallback=r}setHoverTime(e){this._hoverTime=e}_firstWaitTime(){return this._hoverTime/2}_secondWaitTime(){return this._hoverTime/2}_loadingMessageTime(){return 3*this._hoverTime}_triggerAsyncComputation(){this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=zLe(e=>this._computer.computeAsync(e)),Eqe(this,void 0,void 0,function*(){var e,t;try{try{for(var n=xqe(this._asyncIterable),r;r=yield n.next(),!r.done;){const o=r.value;o&&(this._computer.onResult([o],!1),this._onProgress())}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&(yield t.call(n))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,this._withAsyncResult()}catch(o){this._onError(o)}})):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncIterableDone?(this._state=0,this._onComplete()):(this._state=3,this._onProgress())}_showLoadingMessage(){this._state===3&&(this._state=4,this._onProgress())}_withAsyncResult(){(this._state===3||this._state===4)&&(this._state=0,this._onComplete())}_onComplete(){this._completeCallback(this._computer.getResult())}_onError(e){this._errorCallback?this._errorCallback(e):gn(e)}_onProgress(){this._state===4?this._progressCallback(this._computer.getResultWithLoadingMessage()):this._progressCallback(this._computer.getResult())}start(e){if(e===0)this._state===0&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._state=0}}class Xne{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class sW{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}/*! @license DOMPurify 2.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.1/LICENSE */function Dqe(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var Iqe=Object.hasOwnProperty,Qne=Object.setPrototypeOf,kqe=Object.isFrozen,Tqe=Object.getPrototypeOf,Nqe=Object.getOwnPropertyDescriptor,Dl=Object.freeze,Fp=Object.seal,Aqe=Object.create,dpe=typeof Reflect<"u"&&Reflect,t5=dpe.apply,wU=dpe.construct;t5||(t5=function(e,t,n){return e.apply(t,n)});Dl||(Dl=function(e){return e});Fp||(Fp=function(e){return e});wU||(wU=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(Dqe(t))))});var Oqe=af(Array.prototype.forEach),Jne=af(Array.prototype.pop),BN=af(Array.prototype.push),p1=af(String.prototype.toLowerCase),eie=af(String.prototype.match),Cv=af(String.prototype.replace),Mqe=af(String.prototype.indexOf),Rqe=af(String.prototype.trim),Hg=af(RegExp.prototype.test),tie=Pqe(TypeError);function af(i){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return t5(i,e,n)}}function Pqe(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return wU(i,t)}}function Vi(i,e){Qne&&Qne(i,null);for(var t=e.length;t--;){var n=e[t];if(typeof n=="string"){var r=p1(n);r!==n&&(kqe(e)||(e[t]=r),n=r)}i[n]=!0}return i}function a1(i){var e=Aqe(null),t=void 0;for(t in i)t5(Iqe,i,[t])&&(e[t]=i[t]);return e}function hP(i,e){for(;i!==null;){var t=Nqe(i,e);if(t){if(t.get)return af(t.get);if(typeof t.value=="function")return af(t.value)}i=Tqe(i)}function n(r){return console.warn("fallback value for",r),null}return n}var nie=Dl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),aW=Dl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lW=Dl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fqe=Dl(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),uW=Dl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Bqe=Dl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),iie=Dl(["#text"]),rie=Dl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),cW=Dl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oie=Dl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fP=Dl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Wqe=Fp(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Vqe=Fp(/<%[\s\S]*|[\s\S]*%>/gm),Hqe=Fp(/^data-[\-\w.\u00B7-\uFFFF]/),$qe=Fp(/^aria-[\-\w]+$/),zqe=Fp(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Uqe=Fp(/^(?:\w+script|data):/i),jqe=Fp(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),u2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function mf(i){if(Array.isArray(i)){for(var e=0,t=Array(i.length);e<i.length;e++)t[e]=i[e];return t}else return Array.from(i)}var Kqe=function(){return typeof window>"u"?null:window},Gqe=function(e,t){if((typeof e>"u"?"undefined":u2(e))!=="object"||typeof e.createPolicy!="function")return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function hpe(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kqe(),e=function(J){return hpe(J)};if(e.version="2.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;var t=i.document,n=i.document,r=i.DocumentFragment,o=i.HTMLTemplateElement,s=i.Node,a=i.Element,u=i.NodeFilter,d=i.NamedNodeMap,h=d===void 0?i.NamedNodeMap||i.MozNamedAttrMap:d,f=i.Text,p=i.Comment,m=i.DOMParser,v=i.trustedTypes,b=a.prototype,L=hP(b,"cloneNode"),S=hP(b,"nextSibling"),y=hP(b,"childNodes"),E=hP(b,"parentNode");if(typeof o=="function"){var A=n.createElement("template");A.content&&A.content.ownerDocument&&(n=A.content.ownerDocument)}var N=Gqe(v,t),V=N&&ei?N.createHTML(""):"",R=n,M=R.implementation,K=R.createNodeIterator,X=R.createDocumentFragment,$=R.getElementsByTagName,D=t.importNode,T={};try{T=a1(n).documentMode?n.documentMode:{}}catch{}var F={};e.isSupported=typeof E=="function"&&M&&typeof M.createHTMLDocument<"u"&&T!==9;var B=Wqe,U=Vqe,G=Hqe,Z=$qe,z=Uqe,O=jqe,Y=zqe,fe=null,ne=Vi({},[].concat(mf(nie),mf(aW),mf(lW),mf(uW),mf(iie))),we=null,Ie=Vi({},[].concat(mf(rie),mf(cW),mf(oie),mf(fP))),je=null,dt=null,At=!0,Me=!0,st=!1,bt=!1,tt=!1,tn=!1,Zt=!1,nn=!1,On=!1,Tn=!0,ei=!1,Ln=!0,Mn=!0,Pt=!1,pn={},mi=null,Te=Vi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Fe=null,pt=Vi({},["audio","video","img","source","image","track"]),at=null,Ct=Vi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),wi="http://www.w3.org/1998/Math/MathML",Vt="http://www.w3.org/2000/svg",kt="http://www.w3.org/1999/xhtml",Kt=kt,Gt=!1,Bt=null,fr=n.createElement("form"),ti=function(J){Bt&&Bt===J||((!J||(typeof J>"u"?"undefined":u2(J))!=="object")&&(J={}),J=a1(J),fe="ALLOWED_TAGS"in J?Vi({},J.ALLOWED_TAGS):ne,we="ALLOWED_ATTR"in J?Vi({},J.ALLOWED_ATTR):Ie,at="ADD_URI_SAFE_ATTR"in J?Vi(a1(Ct),J.ADD_URI_SAFE_ATTR):Ct,Fe="ADD_DATA_URI_TAGS"in J?Vi(a1(pt),J.ADD_DATA_URI_TAGS):pt,mi="FORBID_CONTENTS"in J?Vi({},J.FORBID_CONTENTS):Te,je="FORBID_TAGS"in J?Vi({},J.FORBID_TAGS):{},dt="FORBID_ATTR"in J?Vi({},J.FORBID_ATTR):{},pn="USE_PROFILES"in J?J.USE_PROFILES:!1,At=J.ALLOW_ARIA_ATTR!==!1,Me=J.ALLOW_DATA_ATTR!==!1,st=J.ALLOW_UNKNOWN_PROTOCOLS||!1,bt=J.SAFE_FOR_TEMPLATES||!1,tt=J.WHOLE_DOCUMENT||!1,nn=J.RETURN_DOM||!1,On=J.RETURN_DOM_FRAGMENT||!1,Tn=J.RETURN_DOM_IMPORT!==!1,ei=J.RETURN_TRUSTED_TYPE||!1,Zt=J.FORCE_BODY||!1,Ln=J.SANITIZE_DOM!==!1,Mn=J.KEEP_CONTENT!==!1,Pt=J.IN_PLACE||!1,Y=J.ALLOWED_URI_REGEXP||Y,Kt=J.NAMESPACE||kt,bt&&(Me=!1),On&&(nn=!0),pn&&(fe=Vi({},[].concat(mf(iie))),we=[],pn.html===!0&&(Vi(fe,nie),Vi(we,rie)),pn.svg===!0&&(Vi(fe,aW),Vi(we,cW),Vi(we,fP)),pn.svgFilters===!0&&(Vi(fe,lW),Vi(we,cW),Vi(we,fP)),pn.mathMl===!0&&(Vi(fe,uW),Vi(we,oie),Vi(we,fP))),J.ADD_TAGS&&(fe===ne&&(fe=a1(fe)),Vi(fe,J.ADD_TAGS)),J.ADD_ATTR&&(we===Ie&&(we=a1(we)),Vi(we,J.ADD_ATTR)),J.ADD_URI_SAFE_ATTR&&Vi(at,J.ADD_URI_SAFE_ATTR),J.FORBID_CONTENTS&&(mi===Te&&(mi=a1(mi)),Vi(mi,J.FORBID_CONTENTS)),Mn&&(fe["#text"]=!0),tt&&Vi(fe,["html","head","body"]),fe.table&&(Vi(fe,["tbody"]),delete je.tbody),Dl&&Dl(J),Bt=J)},Ve=Vi({},["mi","mo","mn","ms","mtext"]),Pa=Vi({},["foreignobject","desc","title","annotation-xml"]),$n=Vi({},aW);Vi($n,lW),Vi($n,Fqe);var ni=Vi({},uW);Vi(ni,Bqe);var Gs=function(J){var ve=E(J);(!ve||!ve.tagName)&&(ve={namespaceURI:kt,tagName:"template"});var He=p1(J.tagName),Re=p1(ve.tagName);if(J.namespaceURI===Vt)return ve.namespaceURI===kt?He==="svg":ve.namespaceURI===wi?He==="svg"&&(Re==="annotation-xml"||Ve[Re]):!!$n[He];if(J.namespaceURI===wi)return ve.namespaceURI===kt?He==="math":ve.namespaceURI===Vt?He==="math"&&Pa[Re]:!!ni[He];if(J.namespaceURI===kt){if(ve.namespaceURI===Vt&&!Pa[Re]||ve.namespaceURI===wi&&!Ve[Re])return!1;var ct=Vi({},["title","style","font","a","script"]);return!ni[He]&&(ct[He]||!$n[He])}return!1},vn=function(J){BN(e.removed,{element:J});try{J.parentNode.removeChild(J)}catch{try{J.outerHTML=V}catch{J.remove()}}},ir=function(J,ve){try{BN(e.removed,{attribute:ve.getAttributeNode(J),from:ve})}catch{BN(e.removed,{attribute:null,from:ve})}if(ve.removeAttribute(J),J==="is"&&!we[J])if(nn||On)try{vn(ve)}catch{}else try{ve.setAttribute(J,"")}catch{}},ol=function(J){var ve=void 0,He=void 0;if(Zt)J="<remove></remove>"+J;else{var Re=eie(J,/^[\r\n\t ]+/);He=Re&&Re[0]}var ct=N?N.createHTML(J):J;if(Kt===kt)try{ve=new m().parseFromString(ct,"text/html")}catch{}if(!ve||!ve.documentElement){ve=M.createDocument(Kt,"template",null);try{ve.documentElement.innerHTML=Gt?"":ct}catch{}}var qt=ve.body||ve.documentElement;return J&&He&&qt.insertBefore(n.createTextNode(He),qt.childNodes[0]||null),Kt===kt?$.call(ve,tt?"html":"body")[0]:tt?ve.documentElement:qt},Ki=function(J){return K.call(J.ownerDocument||J,J,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Ye=function(J){return J instanceof f||J instanceof p?!1:typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof h)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"},is=function(J){return(typeof s>"u"?"undefined":u2(s))==="object"?J instanceof s:J&&(typeof J>"u"?"undefined":u2(J))==="object"&&typeof J.nodeType=="number"&&typeof J.nodeName=="string"},ke=function(J,ve,He){F[J]&&Oqe(F[J],function(Re){Re.call(e,ve,He,Bt)})},Ee=function(J){var ve=void 0;if(ke("beforeSanitizeElements",J,null),Ye(J)||eie(J.nodeName,/[\u0080-\uFFFF]/))return vn(J),!0;var He=p1(J.nodeName);if(ke("uponSanitizeElement",J,{tagName:He,allowedTags:fe}),!is(J.firstElementChild)&&(!is(J.content)||!is(J.content.firstElementChild))&&Hg(/<[/\w]/g,J.innerHTML)&&Hg(/<[/\w]/g,J.textContent)||He==="select"&&Hg(/<template/i,J.innerHTML))return vn(J),!0;if(!fe[He]||je[He]){if(Mn&&!mi[He]){var Re=E(J)||J.parentNode,ct=y(J)||J.childNodes;if(ct&&Re)for(var qt=ct.length,k=qt-1;k>=0;--k)Re.insertBefore(L(ct[k],!0),S(J))}return vn(J),!0}return J instanceof a&&!Gs(J)||(He==="noscript"||He==="noembed")&&Hg(/<\/no(script|embed)/i,J.innerHTML)?(vn(J),!0):(bt&&J.nodeType===3&&(ve=J.textContent,ve=Cv(ve,B," "),ve=Cv(ve,U," "),J.textContent!==ve&&(BN(e.removed,{element:J.cloneNode()}),J.textContent=ve)),ke("afterSanitizeElements",J,null),!1)},Ae=function(J,ve,He){if(Ln&&(ve==="id"||ve==="name")&&(He in n||He in fr))return!1;if(!(Me&&!dt[ve]&&Hg(G,ve))){if(!(At&&Hg(Z,ve))){if(!we[ve]||dt[ve])return!1;if(!at[ve]){if(!Hg(Y,Cv(He,O,""))){if(!((ve==="src"||ve==="xlink:href"||ve==="href")&&J!=="script"&&Mqe(He,"data:")===0&&Fe[J])){if(!(st&&!Hg(z,Cv(He,O,"")))){if(He)return!1}}}}}}return!0},se=function(J){var ve=void 0,He=void 0,Re=void 0,ct=void 0;ke("beforeSanitizeAttributes",J,null);var qt=J.attributes;if(qt){var k={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};for(ct=qt.length;ct--;){ve=qt[ct];var W=ve,te=W.name,ie=W.namespaceURI;if(He=Rqe(ve.value),Re=p1(te),k.attrName=Re,k.attrValue=He,k.keepAttr=!0,k.forceKeepAttr=void 0,ke("uponSanitizeAttribute",J,k),He=k.attrValue,!k.forceKeepAttr&&(ir(te,J),!!k.keepAttr)){if(Hg(/\/>/i,He)){ir(te,J);continue}bt&&(He=Cv(He,B," "),He=Cv(He,U," "));var me=J.nodeName.toLowerCase();if(Ae(me,Re,He))try{ie?J.setAttributeNS(ie,te,He):J.setAttribute(te,He),Jne(e.removed)}catch{}}}ke("afterSanitizeAttributes",J,null)}},ae=function pe(J){var ve=void 0,He=Ki(J);for(ke("beforeSanitizeShadowDOM",J,null);ve=He.nextNode();)ke("uponSanitizeShadowNode",ve,null),!Ee(ve)&&(ve.content instanceof r&&pe(ve.content),se(ve));ke("afterSanitizeShadowDOM",J,null)};return e.sanitize=function(pe,J){var ve=void 0,He=void 0,Re=void 0,ct=void 0,qt=void 0;if(Gt=!pe,Gt&&(pe="<!-->"),typeof pe!="string"&&!is(pe)){if(typeof pe.toString!="function")throw tie("toString is not a function");if(pe=pe.toString(),typeof pe!="string")throw tie("dirty is not a string, aborting")}if(!e.isSupported){if(u2(i.toStaticHTML)==="object"||typeof i.toStaticHTML=="function"){if(typeof pe=="string")return i.toStaticHTML(pe);if(is(pe))return i.toStaticHTML(pe.outerHTML)}return pe}if(tn||ti(J),e.removed=[],typeof pe=="string"&&(Pt=!1),!Pt)if(pe instanceof s)ve=ol("<!---->"),He=ve.ownerDocument.importNode(pe,!0),He.nodeType===1&&He.nodeName==="BODY"||He.nodeName==="HTML"?ve=He:ve.appendChild(He);else{if(!nn&&!bt&&!tt&&pe.indexOf("<")===-1)return N&&ei?N.createHTML(pe):pe;if(ve=ol(pe),!ve)return nn?null:V}ve&&Zt&&vn(ve.firstChild);for(var k=Ki(Pt?pe:ve);Re=k.nextNode();)Re.nodeType===3&&Re===ct||Ee(Re)||(Re.content instanceof r&&ae(Re.content),se(Re),ct=Re);if(ct=null,Pt)return pe;if(nn){if(On)for(qt=X.call(ve.ownerDocument);ve.firstChild;)qt.appendChild(ve.firstChild);else qt=ve;return Tn&&(qt=D.call(t,qt,!0)),qt}var W=tt?ve.outerHTML:ve.innerHTML;return bt&&(W=Cv(W,B," "),W=Cv(W,U," ")),N&&ei?N.createHTML(W):W},e.setConfig=function(pe){ti(pe),tn=!0},e.clearConfig=function(){Bt=null,tn=!1},e.isValidAttribute=function(pe,J,ve){Bt||ti({});var He=p1(pe),Re=p1(J);return Ae(He,Re,ve)},e.addHook=function(pe,J){typeof J=="function"&&(F[pe]=F[pe]||[],BN(F[pe],J))},e.removeHook=function(pe){F[pe]&&Jne(F[pe])},e.removeHooks=function(pe){F[pe]&&(F[pe]=[])},e.removeAllHooks=function(){F={}},e}var Ng=hpe();Ng.version;Ng.isSupported;const qqe=Ng.sanitize;Ng.setConfig;Ng.clearConfig;Ng.isValidAttribute;const sie=Ng.addHook,aie=Ng.removeHook;Ng.removeHooks;Ng.removeAllHooks;let df;(function(){function i(e){df=e()}i.amd=!0,function(e,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof i=="function"&&i.amd?i(t):(e=typeof globalThis<"u"?globalThis:e||self,e.marked=t())}(this,function(){function e(ke,Ee){for(var Ae=0;Ae<Ee.length;Ae++){var se=Ee[Ae];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ke,se.key,se)}}function t(ke,Ee,Ae){return Ee&&e(ke.prototype,Ee),Ae&&e(ke,Ae),ke}function n(ke,Ee){if(ke){if(typeof ke=="string")return r(ke,Ee);var Ae=Object.prototype.toString.call(ke).slice(8,-1);if(Ae==="Object"&&ke.constructor&&(Ae=ke.constructor.name),Ae==="Map"||Ae==="Set")return Array.from(ke);if(Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae))return r(ke,Ee)}}function r(ke,Ee){(Ee==null||Ee>ke.length)&&(Ee=ke.length);for(var Ae=0,se=new Array(Ee);Ae<Ee;Ae++)se[Ae]=ke[Ae];return se}function o(ke,Ee){var Ae=typeof Symbol<"u"&&ke[Symbol.iterator]||ke["@@iterator"];if(Ae)return(Ae=Ae.call(ke)).next.bind(Ae);if(Array.isArray(ke)||(Ae=n(ke))||Ee&&ke&&typeof ke.length=="number"){Ae&&(ke=Ae);var se=0;return function(){return se>=ke.length?{done:!0}:{done:!1,value:ke[se++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s={exports:{}};function a(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function u(ke){s.exports.defaults=ke}s.exports={defaults:a(),getDefaults:a,changeDefaults:u};var d=/[&<>"']/,h=/[&<>"']/g,f=/[<>"']|&(?!#?\w+;)/,p=/[<>"']|&(?!#?\w+;)/g,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v=function(Ee){return m[Ee]};function b(ke,Ee){if(Ee){if(d.test(ke))return ke.replace(h,v)}else if(f.test(ke))return ke.replace(p,v);return ke}var L=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function S(ke){return ke.replace(L,function(Ee,Ae){return Ae=Ae.toLowerCase(),Ae==="colon"?":":Ae.charAt(0)==="#"?Ae.charAt(1)==="x"?String.fromCharCode(parseInt(Ae.substring(2),16)):String.fromCharCode(+Ae.substring(1)):""})}var y=/(^|[^\[])\^/g;function E(ke,Ee){ke=ke.source||ke,Ee=Ee||"";var Ae={replace:function(ae,pe){return pe=pe.source||pe,pe=pe.replace(y,"$1"),ke=ke.replace(ae,pe),Ae},getRegex:function(){return new RegExp(ke,Ee)}};return Ae}var A=/[^\w:]/g,N=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function V(ke,Ee,Ae){if(ke){var se;try{se=decodeURIComponent(S(Ae)).replace(A,"").toLowerCase()}catch{return null}if(se.indexOf("javascript:")===0||se.indexOf("vbscript:")===0||se.indexOf("data:")===0)return null}Ee&&!N.test(Ae)&&(Ae=$(Ee,Ae));try{Ae=encodeURI(Ae).replace(/%25/g,"%")}catch{return null}return Ae}var R={},M=/^[^:]+:\/*[^/]*$/,K=/^([^:]+:)[\s\S]*$/,X=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $(ke,Ee){R[" "+ke]||(M.test(ke)?R[" "+ke]=ke+"/":R[" "+ke]=B(ke,"/",!0)),ke=R[" "+ke];var Ae=ke.indexOf(":")===-1;return Ee.substring(0,2)==="//"?Ae?Ee:ke.replace(K,"$1")+Ee:Ee.charAt(0)==="/"?Ae?Ee:ke.replace(X,"$1")+Ee:ke+Ee}var D={exec:function(){}};function T(ke){for(var Ee=1,Ae,se;Ee<arguments.length;Ee++){Ae=arguments[Ee];for(se in Ae)Object.prototype.hasOwnProperty.call(Ae,se)&&(ke[se]=Ae[se])}return ke}function F(ke,Ee){var Ae=ke.replace(/\|/g,function(pe,J,ve){for(var He=!1,Re=J;--Re>=0&&ve[Re]==="\\";)He=!He;return He?"|":" |"}),se=Ae.split(/ \|/),ae=0;if(se[0].trim()||se.shift(),se[se.length-1].trim()||se.pop(),se.length>Ee)se.splice(Ee);else for(;se.length<Ee;)se.push("");for(;ae<se.length;ae++)se[ae]=se[ae].trim().replace(/\\\|/g,"|");return se}function B(ke,Ee,Ae){var se=ke.length;if(se===0)return"";for(var ae=0;ae<se;){var pe=ke.charAt(se-ae-1);if(pe===Ee&&!Ae)ae++;else if(pe!==Ee&&Ae)ae++;else break}return ke.substr(0,se-ae)}function U(ke,Ee){if(ke.indexOf(Ee[1])===-1)return-1;for(var Ae=ke.length,se=0,ae=0;ae<Ae;ae++)if(ke[ae]==="\\")ae++;else if(ke[ae]===Ee[0])se++;else if(ke[ae]===Ee[1]&&(se--,se<0))return ae;return-1}function G(ke){ke&&ke.sanitize&&!ke.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Z(ke,Ee){if(Ee<1)return"";for(var Ae="";Ee>1;)Ee&1&&(Ae+=ke),Ee>>=1,ke+=ke;return Ae+ke}var z={escape:b,unescape:S,edit:E,cleanUrl:V,resolveUrl:$,noopTest:D,merge:T,splitCells:F,rtrim:B,findClosingBracket:U,checkSanitizeDeprecation:G,repeatString:Z},O=s.exports.defaults,Y=z.rtrim,fe=z.splitCells,ne=z.escape,we=z.findClosingBracket;function Ie(ke,Ee,Ae,se){var ae=Ee.href,pe=Ee.title?ne(Ee.title):null,J=ke[1].replace(/\\([\[\]])/g,"$1");if(ke[0].charAt(0)!=="!"){se.state.inLink=!0;var ve={type:"link",raw:Ae,href:ae,title:pe,text:J,tokens:se.inlineTokens(J,[])};return se.state.inLink=!1,ve}else return{type:"image",raw:Ae,href:ae,title:pe,text:ne(J)}}function je(ke,Ee){var Ae=ke.match(/^(\s+)(?:```)/);if(Ae===null)return Ee;var se=Ae[1];return Ee.split(`
`).map(function(ae){var pe=ae.match(/^\s+/);if(pe===null)return ae;var J=pe[0];return J.length>=se.length?ae.slice(se.length):ae}).join(`
`)}var dt=function(){function ke(Ae){this.options=Ae||O}var Ee=ke.prototype;return Ee.space=function(se){var ae=this.rules.block.newline.exec(se);if(ae)return ae[0].length>1?{type:"space",raw:ae[0]}:{raw:`
`}},Ee.code=function(se){var ae=this.rules.block.code.exec(se);if(ae){var pe=ae[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ae[0],codeBlockStyle:"indented",text:this.options.pedantic?pe:Y(pe,`
`)}}},Ee.fences=function(se){var ae=this.rules.block.fences.exec(se);if(ae){var pe=ae[0],J=je(pe,ae[3]||"");return{type:"code",raw:pe,lang:ae[2]?ae[2].trim():ae[2],text:J}}},Ee.heading=function(se){var ae=this.rules.block.heading.exec(se);if(ae){var pe=ae[2].trim();if(/#$/.test(pe)){var J=Y(pe,"#");(this.options.pedantic||!J||/ $/.test(J))&&(pe=J.trim())}var ve={type:"heading",raw:ae[0],depth:ae[1].length,text:pe,tokens:[]};return this.lexer.inline(ve.text,ve.tokens),ve}},Ee.hr=function(se){var ae=this.rules.block.hr.exec(se);if(ae)return{type:"hr",raw:ae[0]}},Ee.blockquote=function(se){var ae=this.rules.block.blockquote.exec(se);if(ae){var pe=ae[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ae[0],tokens:this.lexer.blockTokens(pe,[]),text:pe}}},Ee.list=function(se){var ae=this.rules.block.list.exec(se);if(ae){var pe,J,ve,He,Re,ct,qt,k,W,te,ie=ae[1].trim(),me=ie.length>1,le={type:"list",raw:"",ordered:me,start:me?+ie.slice(0,-1):"",loose:!1,items:[]};ie=me?"\\d{1,9}\\"+ie.slice(-1):"\\"+ie,this.options.pedantic&&(ie=me?ie:"[*+-]");for(var De=new RegExp("^( {0,3}"+ie+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");se&&!(this.rules.block.hr.test(se)||!(ae=De.exec(se)));){W=ae[2].split(`
`),this.options.pedantic?(He=2,te=W[0].trimLeft()):(He=ae[2].search(/[^ ]/),He=ae[1].length+(He>4?1:He),te=W[0].slice(He-ae[1].length)),ct=!1,pe=ae[0],!W[0]&&/^ *$/.test(W[1])&&(pe=ae[1]+W.slice(0,2).join(`
`)+`
`,le.loose=!0,W=[]);var Pe=new RegExp("^ {0,"+Math.min(3,He-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(Re=1;Re<W.length;Re++){if(k=W[Re],this.options.pedantic&&(k=k.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Pe.test(k)){pe=ae[1]+W.slice(0,Re).join(`
`)+`
`;break}if(!ct){k.trim()||(ct=!0),k.search(/[^ ]/)>=He?te+=`
`+k.slice(He):te+=`
`+k;continue}if(k.search(/[^ ]/)>=He||!k.trim()){te+=`
`+k.slice(He);continue}else{pe=ae[1]+W.slice(0,Re).join(`
`)+`
`;break}}le.loose||(qt?le.loose=!0:/\n *\n *$/.test(pe)&&(qt=!0)),this.options.gfm&&(J=/^\[[ xX]\] /.exec(te),J&&(ve=J[0]!=="[ ] ",te=te.replace(/^\[[ xX]\] +/,""))),le.items.push({type:"list_item",raw:pe,task:!!J,checked:ve,loose:!1,text:te}),le.raw+=pe,se=se.slice(pe.length)}le.items[le.items.length-1].raw=pe.trimRight(),le.items[le.items.length-1].text=te.trimRight(),le.raw=le.raw.trimRight();var Ze=le.items.length;for(Re=0;Re<Ze;Re++)this.lexer.state.top=!1,le.items[Re].tokens=this.lexer.blockTokens(le.items[Re].text,[]),le.items[Re].tokens.some(function(ot){return ot.type==="space"})&&(le.loose=!0,le.items[Re].loose=!0);return le}},Ee.html=function(se){var ae=this.rules.block.html.exec(se);if(ae){var pe={type:"html",raw:ae[0],pre:!this.options.sanitizer&&(ae[1]==="pre"||ae[1]==="script"||ae[1]==="style"),text:ae[0]};return this.options.sanitize&&(pe.type="paragraph",pe.text=this.options.sanitizer?this.options.sanitizer(ae[0]):ne(ae[0]),pe.tokens=[],this.lexer.inline(pe.text,pe.tokens)),pe}},Ee.def=function(se){var ae=this.rules.block.def.exec(se);if(ae){ae[3]&&(ae[3]=ae[3].substring(1,ae[3].length-1));var pe=ae[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:pe,raw:ae[0],href:ae[2],title:ae[3]}}},Ee.table=function(se){var ae=this.rules.block.table.exec(se);if(ae){var pe={type:"table",header:fe(ae[1]).map(function(qt){return{text:qt}}),align:ae[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:ae[3]?ae[3].replace(/\n$/,"").split(`
`):[]};if(pe.header.length===pe.align.length){pe.raw=ae[0];var J=pe.align.length,ve,He,Re,ct;for(ve=0;ve<J;ve++)/^ *-+: *$/.test(pe.align[ve])?pe.align[ve]="right":/^ *:-+: *$/.test(pe.align[ve])?pe.align[ve]="center":/^ *:-+ *$/.test(pe.align[ve])?pe.align[ve]="left":pe.align[ve]=null;for(J=pe.rows.length,ve=0;ve<J;ve++)pe.rows[ve]=fe(pe.rows[ve],pe.header.length).map(function(qt){return{text:qt}});for(J=pe.header.length,He=0;He<J;He++)pe.header[He].tokens=[],this.lexer.inlineTokens(pe.header[He].text,pe.header[He].tokens);for(J=pe.rows.length,He=0;He<J;He++)for(ct=pe.rows[He],Re=0;Re<ct.length;Re++)ct[Re].tokens=[],this.lexer.inlineTokens(ct[Re].text,ct[Re].tokens);return pe}}},Ee.lheading=function(se){var ae=this.rules.block.lheading.exec(se);if(ae){var pe={type:"heading",raw:ae[0],depth:ae[2].charAt(0)==="="?1:2,text:ae[1],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Ee.paragraph=function(se){var ae=this.rules.block.paragraph.exec(se);if(ae){var pe={type:"paragraph",raw:ae[0],text:ae[1].charAt(ae[1].length-1)===`
`?ae[1].slice(0,-1):ae[1],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Ee.text=function(se){var ae=this.rules.block.text.exec(se);if(ae){var pe={type:"text",raw:ae[0],text:ae[0],tokens:[]};return this.lexer.inline(pe.text,pe.tokens),pe}},Ee.escape=function(se){var ae=this.rules.inline.escape.exec(se);if(ae)return{type:"escape",raw:ae[0],text:ne(ae[1])}},Ee.tag=function(se){var ae=this.rules.inline.tag.exec(se);if(ae)return!this.lexer.state.inLink&&/^<a /i.test(ae[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(ae[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(ae[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(ae[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:ae[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ae[0]):ne(ae[0]):ae[0]}},Ee.link=function(se){var ae=this.rules.inline.link.exec(se);if(ae){var pe=ae[2].trim();if(!this.options.pedantic&&/^</.test(pe)){if(!/>$/.test(pe))return;var J=Y(pe.slice(0,-1),"\\");if((pe.length-J.length)%2===0)return}else{var ve=we(ae[2],"()");if(ve>-1){var He=ae[0].indexOf("!")===0?5:4,Re=He+ae[1].length+ve;ae[2]=ae[2].substring(0,ve),ae[0]=ae[0].substring(0,Re).trim(),ae[3]=""}}var ct=ae[2],qt="";if(this.options.pedantic){var k=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ct);k&&(ct=k[1],qt=k[3])}else qt=ae[3]?ae[3].slice(1,-1):"";return ct=ct.trim(),/^</.test(ct)&&(this.options.pedantic&&!/>$/.test(pe)?ct=ct.slice(1):ct=ct.slice(1,-1)),Ie(ae,{href:ct&&ct.replace(this.rules.inline._escapes,"$1"),title:qt&&qt.replace(this.rules.inline._escapes,"$1")},ae[0],this.lexer)}},Ee.reflink=function(se,ae){var pe;if((pe=this.rules.inline.reflink.exec(se))||(pe=this.rules.inline.nolink.exec(se))){var J=(pe[2]||pe[1]).replace(/\s+/g," ");if(J=ae[J.toLowerCase()],!J||!J.href){var ve=pe[0].charAt(0);return{type:"text",raw:ve,text:ve}}return Ie(pe,J,pe[0],this.lexer)}},Ee.emStrong=function(se,ae,pe){pe===void 0&&(pe="");var J=this.rules.inline.emStrong.lDelim.exec(se);if(J&&!(J[3]&&pe.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var ve=J[1]||J[2]||"";if(!ve||ve&&(pe===""||this.rules.inline.punctuation.exec(pe))){var He=J[0].length-1,Re,ct,qt=He,k=0,W=J[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(W.lastIndex=0,ae=ae.slice(-1*se.length+He);(J=W.exec(ae))!=null;)if(Re=J[1]||J[2]||J[3]||J[4]||J[5]||J[6],!!Re){if(ct=Re.length,J[3]||J[4]){qt+=ct;continue}else if((J[5]||J[6])&&He%3&&!((He+ct)%3)){k+=ct;continue}if(qt-=ct,!(qt>0)){if(ct=Math.min(ct,ct+qt+k),Math.min(He,ct)%2){var te=se.slice(1,He+J.index+ct);return{type:"em",raw:se.slice(0,He+J.index+ct+1),text:te,tokens:this.lexer.inlineTokens(te,[])}}var ie=se.slice(2,He+J.index+ct-1);return{type:"strong",raw:se.slice(0,He+J.index+ct+1),text:ie,tokens:this.lexer.inlineTokens(ie,[])}}}}}},Ee.codespan=function(se){var ae=this.rules.inline.code.exec(se);if(ae){var pe=ae[2].replace(/\n/g," "),J=/[^ ]/.test(pe),ve=/^ /.test(pe)&&/ $/.test(pe);return J&&ve&&(pe=pe.substring(1,pe.length-1)),pe=ne(pe,!0),{type:"codespan",raw:ae[0],text:pe}}},Ee.br=function(se){var ae=this.rules.inline.br.exec(se);if(ae)return{type:"br",raw:ae[0]}},Ee.del=function(se){var ae=this.rules.inline.del.exec(se);if(ae)return{type:"del",raw:ae[0],text:ae[2],tokens:this.lexer.inlineTokens(ae[2],[])}},Ee.autolink=function(se,ae){var pe=this.rules.inline.autolink.exec(se);if(pe){var J,ve;return pe[2]==="@"?(J=ne(this.options.mangle?ae(pe[1]):pe[1]),ve="mailto:"+J):(J=ne(pe[1]),ve=J),{type:"link",raw:pe[0],text:J,href:ve,tokens:[{type:"text",raw:J,text:J}]}}},Ee.url=function(se,ae){var pe;if(pe=this.rules.inline.url.exec(se)){var J,ve;if(pe[2]==="@")J=ne(this.options.mangle?ae(pe[0]):pe[0]),ve="mailto:"+J;else{var He;do He=pe[0],pe[0]=this.rules.inline._backpedal.exec(pe[0])[0];while(He!==pe[0]);J=ne(pe[0]),pe[1]==="www."?ve="http://"+J:ve=J}return{type:"link",raw:pe[0],text:J,href:ve,tokens:[{type:"text",raw:J,text:J}]}}},Ee.inlineText=function(se,ae){var pe=this.rules.inline.text.exec(se);if(pe){var J;return this.lexer.state.inRawBlock?J=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(pe[0]):ne(pe[0]):pe[0]:J=ne(this.options.smartypants?ae(pe[0]):pe[0]),{type:"text",raw:pe[0],text:J}}},ke}(),At=z.noopTest,Me=z.edit,st=z.merge,bt={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:At,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};bt._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,bt._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,bt.def=Me(bt.def).replace("label",bt._label).replace("title",bt._title).getRegex(),bt.bullet=/(?:[*+-]|\d{1,9}[.)])/,bt.listItemStart=Me(/^( *)(bull) */).replace("bull",bt.bullet).getRegex(),bt.list=Me(bt.list).replace(/bull/g,bt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+bt.def.source+")").getRegex(),bt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bt._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,bt.html=Me(bt.html,"i").replace("comment",bt._comment).replace("tag",bt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),bt.paragraph=Me(bt._paragraph).replace("hr",bt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt._tag).getRegex(),bt.blockquote=Me(bt.blockquote).replace("paragraph",bt.paragraph).getRegex(),bt.normal=st({},bt),bt.gfm=st({},bt.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),bt.gfm.table=Me(bt.gfm.table).replace("hr",bt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt._tag).getRegex(),bt.pedantic=st({},bt.normal,{html:Me(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:At,paragraph:Me(bt.normal._paragraph).replace("hr",bt.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",bt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var tt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:At,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:At,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};tt._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",tt.punctuation=Me(tt.punctuation).replace(/punctuation/g,tt._punctuation).getRegex(),tt.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,tt.escapedEmSt=/\\\*|\\_/g,tt._comment=Me(bt._comment).replace("(?:-->|$)","-->").getRegex(),tt.emStrong.lDelim=Me(tt.emStrong.lDelim).replace(/punct/g,tt._punctuation).getRegex(),tt.emStrong.rDelimAst=Me(tt.emStrong.rDelimAst,"g").replace(/punct/g,tt._punctuation).getRegex(),tt.emStrong.rDelimUnd=Me(tt.emStrong.rDelimUnd,"g").replace(/punct/g,tt._punctuation).getRegex(),tt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,tt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,tt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,tt.autolink=Me(tt.autolink).replace("scheme",tt._scheme).replace("email",tt._email).getRegex(),tt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,tt.tag=Me(tt.tag).replace("comment",tt._comment).replace("attribute",tt._attribute).getRegex(),tt._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,tt._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,tt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,tt.link=Me(tt.link).replace("label",tt._label).replace("href",tt._href).replace("title",tt._title).getRegex(),tt.reflink=Me(tt.reflink).replace("label",tt._label).getRegex(),tt.reflinkSearch=Me(tt.reflinkSearch,"g").replace("reflink",tt.reflink).replace("nolink",tt.nolink).getRegex(),tt.normal=st({},tt),tt.pedantic=st({},tt.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Me(/^!?\[(label)\]\((.*?)\)/).replace("label",tt._label).getRegex(),reflink:Me(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",tt._label).getRegex()}),tt.gfm=st({},tt.normal,{escape:Me(tt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),tt.gfm.url=Me(tt.gfm.url,"i").replace("email",tt.gfm._extended_email).getRegex(),tt.breaks=st({},tt.gfm,{br:Me(tt.br).replace("{2,}","*").getRegex(),text:Me(tt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var tn={block:bt,inline:tt},Zt=dt,nn=s.exports.defaults,On=tn.block,Tn=tn.inline,ei=z.repeatString;function Ln(ke){return ke.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Mn(ke){var Ee="",Ae,se,ae=ke.length;for(Ae=0;Ae<ae;Ae++)se=ke.charCodeAt(Ae),Math.random()>.5&&(se="x"+se.toString(16)),Ee+="&#"+se+";";return Ee}var Pt=function(){function ke(Ae){this.tokens=[],this.tokens.links=Object.create(null),this.options=Ae||nn,this.options.tokenizer=this.options.tokenizer||new Zt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var se={block:On.normal,inline:Tn.normal};this.options.pedantic?(se.block=On.pedantic,se.inline=Tn.pedantic):this.options.gfm&&(se.block=On.gfm,this.options.breaks?se.inline=Tn.breaks:se.inline=Tn.gfm),this.tokenizer.rules=se}ke.lex=function(se,ae){var pe=new ke(ae);return pe.lex(se)},ke.lexInline=function(se,ae){var pe=new ke(ae);return pe.inlineTokens(se)};var Ee=ke.prototype;return Ee.lex=function(se){se=se.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(se,this.tokens);for(var ae;ae=this.inlineQueue.shift();)this.inlineTokens(ae.src,ae.tokens);return this.tokens},Ee.blockTokens=function(se,ae){var pe=this;ae===void 0&&(ae=[]),this.options.pedantic&&(se=se.replace(/^ +$/gm,""));for(var J,ve,He,Re;se;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(qt){return(J=qt.call({lexer:pe},se,ae))?(se=se.substring(J.raw.length),ae.push(J),!0):!1}))){if(J=this.tokenizer.space(se)){se=se.substring(J.raw.length),J.type&&ae.push(J);continue}if(J=this.tokenizer.code(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J);continue}if(J=this.tokenizer.fences(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.heading(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.hr(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.blockquote(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.list(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.html(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.def(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&(ve.type==="paragraph"||ve.type==="text")?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.raw,this.inlineQueue[this.inlineQueue.length-1].src=ve.text):this.tokens.links[J.tag]||(this.tokens.links[J.tag]={href:J.href,title:J.title});continue}if(J=this.tokenizer.table(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.lheading(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(He=se,this.options.extensions&&this.options.extensions.startBlock&&function(){var qt=1/0,k=se.slice(1),W=void 0;pe.options.extensions.startBlock.forEach(function(te){W=te.call({lexer:this},k),typeof W=="number"&&W>=0&&(qt=Math.min(qt,W))}),qt<1/0&&qt>=0&&(He=se.substring(0,qt+1))}(),this.state.top&&(J=this.tokenizer.paragraph(He))){ve=ae[ae.length-1],Re&&ve.type==="paragraph"?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J),Re=He.length!==se.length,se=se.substring(J.raw.length);continue}if(J=this.tokenizer.text(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&ve.type==="text"?(ve.raw+=`
`+J.raw,ve.text+=`
`+J.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ve.text):ae.push(J);continue}if(se){var ct="Infinite loop on byte: "+se.charCodeAt(0);if(this.options.silent){console.error(ct);break}else throw new Error(ct)}}return this.state.top=!0,ae},Ee.inline=function(se,ae){this.inlineQueue.push({src:se,tokens:ae})},Ee.inlineTokens=function(se,ae){var pe=this;ae===void 0&&(ae=[]);var J,ve,He,Re=se,ct,qt,k;if(this.tokens.links){var W=Object.keys(this.tokens.links);if(W.length>0)for(;(ct=this.tokenizer.rules.inline.reflinkSearch.exec(Re))!=null;)W.includes(ct[0].slice(ct[0].lastIndexOf("[")+1,-1))&&(Re=Re.slice(0,ct.index)+"["+ei("a",ct[0].length-2)+"]"+Re.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ct=this.tokenizer.rules.inline.blockSkip.exec(Re))!=null;)Re=Re.slice(0,ct.index)+"["+ei("a",ct[0].length-2)+"]"+Re.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ct=this.tokenizer.rules.inline.escapedEmSt.exec(Re))!=null;)Re=Re.slice(0,ct.index)+"++"+Re.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;se;)if(qt||(k=""),qt=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(ie){return(J=ie.call({lexer:pe},se,ae))?(se=se.substring(J.raw.length),ae.push(J),!0):!1}))){if(J=this.tokenizer.escape(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.tag(se)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&J.type==="text"&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(J=this.tokenizer.link(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.reflink(se,this.tokens.links)){se=se.substring(J.raw.length),ve=ae[ae.length-1],ve&&J.type==="text"&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(J=this.tokenizer.emStrong(se,Re,k)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.codespan(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.br(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.del(se)){se=se.substring(J.raw.length),ae.push(J);continue}if(J=this.tokenizer.autolink(se,Mn)){se=se.substring(J.raw.length),ae.push(J);continue}if(!this.state.inLink&&(J=this.tokenizer.url(se,Mn))){se=se.substring(J.raw.length),ae.push(J);continue}if(He=se,this.options.extensions&&this.options.extensions.startInline&&function(){var ie=1/0,me=se.slice(1),le=void 0;pe.options.extensions.startInline.forEach(function(De){le=De.call({lexer:this},me),typeof le=="number"&&le>=0&&(ie=Math.min(ie,le))}),ie<1/0&&ie>=0&&(He=se.substring(0,ie+1))}(),J=this.tokenizer.inlineText(He,Ln)){se=se.substring(J.raw.length),J.raw.slice(-1)!=="_"&&(k=J.raw.slice(-1)),qt=!0,ve=ae[ae.length-1],ve&&ve.type==="text"?(ve.raw+=J.raw,ve.text+=J.text):ae.push(J);continue}if(se){var te="Infinite loop on byte: "+se.charCodeAt(0);if(this.options.silent){console.error(te);break}else throw new Error(te)}}return ae},t(ke,null,[{key:"rules",get:function(){return{block:On,inline:Tn}}}]),ke}(),pn=s.exports.defaults,mi=z.cleanUrl,Te=z.escape,Fe=function(){function ke(Ae){this.options=Ae||pn}var Ee=ke.prototype;return Ee.code=function(se,ae,pe){var J=(ae||"").match(/\S*/)[0];if(this.options.highlight){var ve=this.options.highlight(se,J);ve!=null&&ve!==se&&(pe=!0,se=ve)}return se=se.replace(/\n$/,"")+`
`,J?'<pre><code class="'+this.options.langPrefix+Te(J,!0)+'">'+(pe?se:Te(se,!0))+`</code></pre>
`:"<pre><code>"+(pe?se:Te(se,!0))+`</code></pre>
`},Ee.blockquote=function(se){return`<blockquote>
`+se+`</blockquote>
`},Ee.html=function(se){return se},Ee.heading=function(se,ae,pe,J){return this.options.headerIds?"<h"+ae+' id="'+this.options.headerPrefix+J.slug(pe)+'">'+se+"</h"+ae+`>
`:"<h"+ae+">"+se+"</h"+ae+`>
`},Ee.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},Ee.list=function(se,ae,pe){var J=ae?"ol":"ul",ve=ae&&pe!==1?' start="'+pe+'"':"";return"<"+J+ve+`>
`+se+"</"+J+`>
`},Ee.listitem=function(se){return"<li>"+se+`</li>
`},Ee.checkbox=function(se){return"<input "+(se?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Ee.paragraph=function(se){return"<p>"+se+`</p>
`},Ee.table=function(se,ae){return ae&&(ae="<tbody>"+ae+"</tbody>"),`<table>
<thead>
`+se+`</thead>
`+ae+`</table>
`},Ee.tablerow=function(se){return`<tr>
`+se+`</tr>
`},Ee.tablecell=function(se,ae){var pe=ae.header?"th":"td",J=ae.align?"<"+pe+' align="'+ae.align+'">':"<"+pe+">";return J+se+"</"+pe+`>
`},Ee.strong=function(se){return"<strong>"+se+"</strong>"},Ee.em=function(se){return"<em>"+se+"</em>"},Ee.codespan=function(se){return"<code>"+se+"</code>"},Ee.br=function(){return this.options.xhtml?"<br/>":"<br>"},Ee.del=function(se){return"<del>"+se+"</del>"},Ee.link=function(se,ae,pe){if(se=mi(this.options.sanitize,this.options.baseUrl,se),se===null)return pe;var J='<a href="'+Te(se)+'"';return ae&&(J+=' title="'+ae+'"'),J+=">"+pe+"</a>",J},Ee.image=function(se,ae,pe){if(se=mi(this.options.sanitize,this.options.baseUrl,se),se===null)return pe;var J='<img src="'+se+'" alt="'+pe+'"';return ae&&(J+=' title="'+ae+'"'),J+=this.options.xhtml?"/>":">",J},Ee.text=function(se){return se},ke}(),pt=function(){function ke(){}var Ee=ke.prototype;return Ee.strong=function(se){return se},Ee.em=function(se){return se},Ee.codespan=function(se){return se},Ee.del=function(se){return se},Ee.html=function(se){return se},Ee.text=function(se){return se},Ee.link=function(se,ae,pe){return""+pe},Ee.image=function(se,ae,pe){return""+pe},Ee.br=function(){return""},ke}(),at=function(){function ke(){this.seen={}}var Ee=ke.prototype;return Ee.serialize=function(se){return se.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Ee.getNextSafeSlug=function(se,ae){var pe=se,J=0;if(this.seen.hasOwnProperty(pe)){J=this.seen[se];do J++,pe=se+"-"+J;while(this.seen.hasOwnProperty(pe))}return ae||(this.seen[se]=J,this.seen[pe]=0),pe},Ee.slug=function(se,ae){ae===void 0&&(ae={});var pe=this.serialize(se);return this.getNextSafeSlug(pe,ae.dryrun)},ke}(),Ct=Fe,wi=pt,Vt=at,kt=s.exports.defaults,Kt=z.unescape,Gt=function(){function ke(Ae){this.options=Ae||kt,this.options.renderer=this.options.renderer||new Ct,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new wi,this.slugger=new Vt}ke.parse=function(se,ae){var pe=new ke(ae);return pe.parse(se)},ke.parseInline=function(se,ae){var pe=new ke(ae);return pe.parseInline(se)};var Ee=ke.prototype;return Ee.parse=function(se,ae){ae===void 0&&(ae=!0);var pe="",J,ve,He,Re,ct,qt,k,W,te,ie,me,le,De,Pe,Ze,ot,Tt,Ft,Ot,wt=se.length;for(J=0;J<wt;J++){if(ie=se[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ie.type]&&(Ot=this.options.extensions.renderers[ie.type].call({parser:this},ie),Ot!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ie.type))){pe+=Ot||"";continue}switch(ie.type){case"space":continue;case"hr":{pe+=this.renderer.hr();continue}case"heading":{pe+=this.renderer.heading(this.parseInline(ie.tokens),ie.depth,Kt(this.parseInline(ie.tokens,this.textRenderer)),this.slugger);continue}case"code":{pe+=this.renderer.code(ie.text,ie.lang,ie.escaped);continue}case"table":{for(W="",k="",Re=ie.header.length,ve=0;ve<Re;ve++)k+=this.renderer.tablecell(this.parseInline(ie.header[ve].tokens),{header:!0,align:ie.align[ve]});for(W+=this.renderer.tablerow(k),te="",Re=ie.rows.length,ve=0;ve<Re;ve++){for(qt=ie.rows[ve],k="",ct=qt.length,He=0;He<ct;He++)k+=this.renderer.tablecell(this.parseInline(qt[He].tokens),{header:!1,align:ie.align[He]});te+=this.renderer.tablerow(k)}pe+=this.renderer.table(W,te);continue}case"blockquote":{te=this.parse(ie.tokens),pe+=this.renderer.blockquote(te);continue}case"list":{for(me=ie.ordered,le=ie.start,De=ie.loose,Re=ie.items.length,te="",ve=0;ve<Re;ve++)Ze=ie.items[ve],ot=Ze.checked,Tt=Ze.task,Pe="",Ze.task&&(Ft=this.renderer.checkbox(ot),De?Ze.tokens.length>0&&Ze.tokens[0].type==="paragraph"?(Ze.tokens[0].text=Ft+" "+Ze.tokens[0].text,Ze.tokens[0].tokens&&Ze.tokens[0].tokens.length>0&&Ze.tokens[0].tokens[0].type==="text"&&(Ze.tokens[0].tokens[0].text=Ft+" "+Ze.tokens[0].tokens[0].text)):Ze.tokens.unshift({type:"text",text:Ft}):Pe+=Ft),Pe+=this.parse(Ze.tokens,De),te+=this.renderer.listitem(Pe,Tt,ot);pe+=this.renderer.list(te,me,le);continue}case"html":{pe+=this.renderer.html(ie.text);continue}case"paragraph":{pe+=this.renderer.paragraph(this.parseInline(ie.tokens));continue}case"text":{for(te=ie.tokens?this.parseInline(ie.tokens):ie.text;J+1<wt&&se[J+1].type==="text";)ie=se[++J],te+=`
`+(ie.tokens?this.parseInline(ie.tokens):ie.text);pe+=ae?this.renderer.paragraph(te):te;continue}default:{var si='Token with "'+ie.type+'" type was not found.';if(this.options.silent){console.error(si);return}else throw new Error(si)}}}return pe},Ee.parseInline=function(se,ae){ae=ae||this.renderer;var pe="",J,ve,He,Re=se.length;for(J=0;J<Re;J++){if(ve=se[J],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ve.type]&&(He=this.options.extensions.renderers[ve.type].call({parser:this},ve),He!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ve.type))){pe+=He||"";continue}switch(ve.type){case"escape":{pe+=ae.text(ve.text);break}case"html":{pe+=ae.html(ve.text);break}case"link":{pe+=ae.link(ve.href,ve.title,this.parseInline(ve.tokens,ae));break}case"image":{pe+=ae.image(ve.href,ve.title,ve.text);break}case"strong":{pe+=ae.strong(this.parseInline(ve.tokens,ae));break}case"em":{pe+=ae.em(this.parseInline(ve.tokens,ae));break}case"codespan":{pe+=ae.codespan(ve.text);break}case"br":{pe+=ae.br();break}case"del":{pe+=ae.del(this.parseInline(ve.tokens,ae));break}case"text":{pe+=ae.text(ve.text);break}default:{var ct='Token with "'+ve.type+'" type was not found.';if(this.options.silent){console.error(ct);return}else throw new Error(ct)}}}return pe},ke}(),Bt=Pt,fr=Gt,ti=dt,Ve=Fe,Pa=pt,$n=at,ni=z.merge,Gs=z.checkSanitizeDeprecation,vn=z.escape,ir=s.exports.getDefaults,ol=s.exports.changeDefaults,Ki=s.exports.defaults;function Ye(ke,Ee,Ae){if(typeof ke>"u"||ke===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");if(typeof Ee=="function"&&(Ae=Ee,Ee=null),Ee=ni({},Ye.defaults,Ee||{}),Gs(Ee),Ae){var se=Ee.highlight,ae;try{ae=Bt.lex(ke,Ee)}catch(He){return Ae(He)}var pe=function(Re){var ct;if(!Re)try{Ee.walkTokens&&Ye.walkTokens(ae,Ee.walkTokens),ct=fr.parse(ae,Ee)}catch(qt){Re=qt}return Ee.highlight=se,Re?Ae(Re):Ae(null,ct)};if(!se||se.length<3||(delete Ee.highlight,!ae.length))return pe();var J=0;Ye.walkTokens(ae,function(He){He.type==="code"&&(J++,setTimeout(function(){se(He.text,He.lang,function(Re,ct){if(Re)return pe(Re);ct!=null&&ct!==He.text&&(He.text=ct,He.escaped=!0),J--,J===0&&pe()})},0))}),J===0&&pe();return}try{var ve=Bt.lex(ke,Ee);return Ee.walkTokens&&Ye.walkTokens(ve,Ee.walkTokens),fr.parse(ve,Ee)}catch(He){if(He.message+=`
Please report this to https://github.com/markedjs/marked.`,Ee.silent)return"<p>An error occurred:</p><pre>"+vn(He.message+"",!0)+"</pre>";throw He}}Ye.options=Ye.setOptions=function(ke){return ni(Ye.defaults,ke),ol(Ye.defaults),Ye},Ye.getDefaults=ir,Ye.defaults=Ki,Ye.use=function(){for(var ke=this,Ee=arguments.length,Ae=new Array(Ee),se=0;se<Ee;se++)Ae[se]=arguments[se];var ae=ni.apply(void 0,[{}].concat(Ae)),pe=Ye.defaults.extensions||{renderers:{},childTokens:{}},J;Ae.forEach(function(ve){if(ve.extensions&&(J=!0,ve.extensions.forEach(function(Re){if(!Re.name)throw new Error("extension name required");if(Re.renderer){var ct=pe.renderers?pe.renderers[Re.name]:null;ct?pe.renderers[Re.name]=function(){for(var qt=arguments.length,k=new Array(qt),W=0;W<qt;W++)k[W]=arguments[W];var te=Re.renderer.apply(this,k);return te===!1&&(te=ct.apply(this,k)),te}:pe.renderers[Re.name]=Re.renderer}if(Re.tokenizer){if(!Re.level||Re.level!=="block"&&Re.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");pe[Re.level]?pe[Re.level].unshift(Re.tokenizer):pe[Re.level]=[Re.tokenizer],Re.start&&(Re.level==="block"?pe.startBlock?pe.startBlock.push(Re.start):pe.startBlock=[Re.start]:Re.level==="inline"&&(pe.startInline?pe.startInline.push(Re.start):pe.startInline=[Re.start]))}Re.childTokens&&(pe.childTokens[Re.name]=Re.childTokens)})),ve.renderer&&function(){var Re=Ye.defaults.renderer||new Ve,ct=function(W){var te=Re[W];Re[W]=function(){for(var ie=arguments.length,me=new Array(ie),le=0;le<ie;le++)me[le]=arguments[le];var De=ve.renderer[W].apply(Re,me);return De===!1&&(De=te.apply(Re,me)),De}};for(var qt in ve.renderer)ct(qt);ae.renderer=Re}(),ve.tokenizer&&function(){var Re=Ye.defaults.tokenizer||new ti,ct=function(W){var te=Re[W];Re[W]=function(){for(var ie=arguments.length,me=new Array(ie),le=0;le<ie;le++)me[le]=arguments[le];var De=ve.tokenizer[W].apply(Re,me);return De===!1&&(De=te.apply(Re,me)),De}};for(var qt in ve.tokenizer)ct(qt);ae.tokenizer=Re}(),ve.walkTokens){var He=Ye.defaults.walkTokens;ae.walkTokens=function(Re){ve.walkTokens.call(ke,Re),He&&He(Re)}}J&&(ae.extensions=pe),Ye.setOptions(ae)})},Ye.walkTokens=function(ke,Ee){for(var Ae=function(){var J=ae.value;switch(Ee(J),J.type){case"table":{for(var ve=o(J.header),He;!(He=ve()).done;){var Re=He.value;Ye.walkTokens(Re.tokens,Ee)}for(var ct=o(J.rows),qt;!(qt=ct()).done;)for(var k=qt.value,W=o(k),te;!(te=W()).done;){var ie=te.value;Ye.walkTokens(ie.tokens,Ee)}break}case"list":{Ye.walkTokens(J.items,Ee);break}default:Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[J.type]?Ye.defaults.extensions.childTokens[J.type].forEach(function(me){Ye.walkTokens(J[me],Ee)}):J.tokens&&Ye.walkTokens(J.tokens,Ee)}},se=o(ke),ae;!(ae=se()).done;)Ae()},Ye.parseInline=function(ke,Ee){if(typeof ke>"u"||ke===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ke!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ke)+", string expected");Ee=ni({},Ye.defaults,Ee||{}),Gs(Ee);try{var Ae=Bt.lexInline(ke,Ee);return Ee.walkTokens&&Ye.walkTokens(Ae,Ee.walkTokens),fr.parseInline(Ae,Ee)}catch(se){if(se.message+=`
Please report this to https://github.com/markedjs/marked.`,Ee.silent)return"<p>An error occurred:</p><pre>"+vn(se.message+"",!0)+"</pre>";throw se}},Ye.Parser=fr,Ye.parser=fr.parse,Ye.Renderer=Ve,Ye.TextRenderer=Pa,Ye.Lexer=Bt,Ye.lexer=Bt.lex,Ye.Tokenizer=ti,Ye.Slugger=$n,Ye.parse=Ye;var is=Ye;return is})})();df||exports;(df||exports).Parser;(df||exports).parser;var Yqe=(df||exports).Renderer;(df||exports).TextRenderer;(df||exports).Lexer;(df||exports).lexer;(df||exports).Tokenizer;(df||exports).Slugger;var Zqe=(df||exports).parse;function Xqe(i,e={},t={}){var n;const r=new Qe;let o=!1;const s=r.add(new oa),a=nY(e),u=function(S){let y;try{y=Iz(decodeURIComponent(S))}catch{}return y?(y=Lxe(y,E=>{if(i.uris&&i.uris[E])return sn.revive(i.uris[E])}),encodeURIComponent(JSON.stringify(y))):S},d=function(S,y){const E=i.uris&&i.uris[S];let A=sn.revive(E);return y?S.startsWith(kn.data+":")?S:(A||(A=sn.parse(S)),Yle.asBrowserUri(A).toString(!0)):!A||sn.parse(S).toString()===A.toString()?S:(A.query&&(A=A.with({query:u(A.query)})),A.toString())};let h;const f=new Promise(S=>h=S),p=new Yqe;if(p.image=(S,y,E)=>{let A=[],N=[];return S&&({href:S,dimensions:A}=r3e(S),N.push(`src="${S}"`)),E&&N.push(`alt="${E}"`),y&&N.push(`title="${y}"`),A.length&&(N=N.concat(A)),"<img "+N.join(" ")+">"},p.link=(S,y,E)=>(S===E&&(E=N6(E)),S=d(S,!1),e.baseUrl&&(/^\w[\w\d+.-]*:/.test(S)||(S=bJ(e.baseUrl,S).toString())),y=N6(y),S=N6(S),!S||S.match(/^data:|javascript:/i)||S.match(/^command:/i)&&!i.isTrusted||S.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?E:(S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="#" data-href="${S}" title="${y||S}">${E}</a>`)),p.paragraph=S=>`<p>${S}</p>`,e.codeBlockRenderer&&(p.code=(S,y)=>{const E=e.codeBlockRenderer(y,S),A=Whe.nextId();return rG(Promise.all([E,f]),s.token).then(N=>{var V;if(!o&&N){const R=a.querySelector(`div[data-code="${A}"]`);R&&_0(R,N[0]),(V=e.asyncRenderCallback)===null||V===void 0||V.call(e)}}).catch(()=>{}),`<div class="code" data-code="${A}">${fG(S)}</div>`}),e.actionHandler){const S=e.actionHandler.disposables.add(new Ui(a,"click")),y=e.actionHandler.disposables.add(new Ui(a,"auxclick"));e.actionHandler.disposables.add(Rt.any(S.event,y.event)(E=>{const A=new Ju(E);if(!A.leftButton&&!A.middleButton)return;let N=A.target;if(!(N.tagName!=="A"&&(N=N.parentElement,!N||N.tagName!=="A")))try{const V=N.dataset.href;V&&e.actionHandler.callback(V,A)}catch(V){gn(V)}finally{A.preventDefault()}}))}i.supportHtml||(t.sanitizer=S=>(i.isTrusted?S.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?S:"",t.sanitize=!0,t.silent=!0),t.renderer=p;let m=(n=i.value)!==null&&n!==void 0?n:"";m.length>1e5&&(m=`${m.substr(0,1e5)}…`),i.supportThemeIcons&&(m=o4e(m));let v=Zqe(m,t);i.supportThemeIcons&&(v=ab(v).map(y=>typeof y=="string"?y:y.outerHTML).join(""));const L=new DOMParser().parseFromString(lie(i,v),"text/html");if(L.body.querySelectorAll("img").forEach(S=>{if(S.src){let y=d(S.src,!0);try{const E=sn.parse(y);e.baseUrl&&E.scheme===kn.file&&(y=bJ(e.baseUrl,y).toString())}catch{}S.src=y}}),a.innerHTML=lie(i,L.body.innerHTML),h(),e.asyncRenderCallback)for(const S of a.getElementsByTagName("img")){const y=r.add(qe(S,"load",()=>{y.dispose(),e.asyncRenderCallback()}))}return{element:a,dispose:()=>{o=!0,s.cancel(),r.dispose()}}}function lie(i,e){const{config:t,allowedSchemes:n}=Qqe(i);sie("uponSanitizeAttribute",(o,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(o.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}});const r=document.createElement("a");sie("afterSanitizeAttributes",o=>{for(const s of["href","src"])o.hasAttribute(s)&&(r.href=o.getAttribute(s),n.includes(r.protocol.replace(/:$/,""))||o.removeAttribute(s))});try{return qqe(e,Object.assign(Object.assign({},t),{RETURN_TRUSTED_TYPE:!0}))}finally{aie("uponSanitizeAttribute"),aie("afterSanitizeAttributes")}}function Qqe(i){const e=[kn.http,kn.https,kn.mailto,kn.data,kn.file,kn.vscodeFileResource,kn.vscodeRemote,kn.vscodeRemoteResource];return i.isTrusted&&e.push(kn.command),{config:{ALLOWED_TAGS:["ul","li","p","b","i","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],ALLOWED_ATTR:["href","data-href","target","title","src","alt","class","style","data-code","width","height","align"],ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}var Jqe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},uie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},eYe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},dW;let Bp=class fpe{constructor(e,t,n){this._options=e,this._modeService=t,this._openerService=n,this._onDidRenderAsync=new be,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const r=new Qe;return{element:r.add(Xqe(e,Object.assign(Object.assign({},this._getRenderOptions(e,r)),t),n)).element,dispose:()=>r.dispose()}}_getRenderOptions(e,t){return{baseUrl:this._options.baseUrl,codeBlockRenderer:(n,r)=>eYe(this,void 0,void 0,function*(){var o,s,a,u;let d;n?d=this._modeService.getModeIdForLanguageName(n):this._options.editor&&(d=(o=this._options.editor.getModel())===null||o===void 0?void 0:o.getLanguageId()),d||(d="plaintext"),this._modeService.triggerMode(d);const h=(s=yield Wr.getPromise(d))!==null&&s!==void 0?s:void 0,f=document.createElement("span");if(f.innerHTML=(u=(a=fpe._ttpTokenizer)===null||a===void 0?void 0:a.createHTML(r,this._modeService.languageIdCodec,h))!==null&&u!==void 0?u:wde(r,this._modeService.languageIdCodec,h),this._options.editor){const p=this._options.editor.getOption(43);Na.applyFontInfoSlow(f,p)}else this._options.codeBlockFontFamily&&(f.style.fontFamily=this._options.codeBlockFontFamily);return f}),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this._openerService.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:e.isTrusted}).catch(gn),disposables:t}}}};Bp._ttpTokenizer=(dW=window.trustedTypes)===null||dW===void 0?void 0:dW.createPolicy("tokenizeToString",{createHTML(i,e,t){return wde(i,e,t)}});Bp=Jqe([uie(1,Fs),uie(2,El)],Bp);var tYe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class nYe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function iYe(i,e,t,n,r){return tYe(this,void 0,void 0,function*(){try{const o=yield Promise.resolve(i.provideHover(t,n,r));if(o&&oYe(o))return new nYe(i,o,e)}catch(o){Rs(o)}})}function gpe(i,e,t){const r=kA.ordered(i).map((o,s)=>iYe(o,s,i,e,t));return Yo.fromPromises(r).coalesce()}function rYe(i,e,t){return gpe(i,e,t).map(n=>n.hover).toPromise()}Lg("_executeHoverProvider",(i,e)=>rYe(i,e,Vn.None));function oYe(i){const e=typeof i.range<"u",t=typeof i.contents<"u"&&i.contents&&i.contents.length>0;return e&&t}var sYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},hW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const cie=Ge;class c2{constructor(e,t,n,r){this.owner=e,this.range=t,this.contents=n,this.ordinal=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let yU=class{constructor(e,t,n,r,o){this._editor=e,this._hover=t,this._modeService=n,this._openerService=r,this._configurationService=o}createLoadingMessage(e){return new c2(this,e.range,[new Rp().appendText(C("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,o=n.getLineMaxColumn(r),s=[];let a=1e3;const u=n.getLineLength(r),d=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:d});typeof h=="number"&&u>=h&&s.push(new c2(this,e.range,[{value:C("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],a++));for(const f of t){const p=f.range.startLineNumber===r?f.range.startColumn:1,m=f.range.endLineNumber===r?f.range.endColumn:o,v=f.options.hoverMessage;if(!v||hO(v))continue;const b=new Q(e.range.startLineNumber,p,e.range.startLineNumber,m);s.push(new c2(this,b,EG(v),a++))}return s}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Yo.EMPTY;const r=this._editor.getModel();if(!kA.has(r))return Yo.EMPTY;const o=new Le(e.range.startLineNumber,e.range.startColumn);return gpe(r,o,n).filter(s=>!hO(s.hover.contents)).map(s=>{const a=s.hover.range?Q.lift(s.hover.range):e.range;return new c2(this,a,s.hover.contents,s.ordinal)})}renderHoverParts(e,t,n){return ppe(e,t,this._editor,this._hover,this._modeService,this._openerService)}};yU=sYe([hW(2,Fs),hW(3,El),hW(4,nr)],yU);function ppe(i,e,t,n,r,o){i.sort((a,u)=>a.ordinal-u.ordinal);const s=new Qe;for(const a of i)for(const u of a.contents){if(hO(u))continue;const d=cie("div.hover-row.markdown-hover"),h=Be(d,cie("div.hover-contents")),f=s.add(new Bp({editor:t},r,o));s.add(f.onDidRenderAsync(()=>{h.className="hover-contents code-hover-contents",n.onContentsChanged()}));const p=s.add(f.render(u));h.appendChild(p.element),e.appendChild(d)}return s}var mpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},n5=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class die{constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let SU=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new be,this.onDidChange=this._onDidChange.event,this._dispoables=new Qe,this._markers=[],this._nextIdx=-1,sn.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const r=this._configService.getValue("problems.sortOrder"),o=(a,u)=>{let d=yA(a.resource.toString(),u.resource.toString());return r==="position"?d=Q.compareRangesUsingStarts(a,u)||Ir.compare(a.severity,u.severity):d=Ir.compare(a.severity,u.severity)||Q.compareRangesUsingStarts(a,u),d},s=()=>{this._markers=this._markerService.read({resource:sn.isUri(e)?e:void 0,severities:Ir.Error|Ir.Warning|Ir.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};s(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(u=>this._resourceFilter(u)))&&(s(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new die(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let r=!1,o=this._markers.findIndex(s=>s.resource.toString()===e.uri.toString());o<0&&(o=LG(this._markers,{resource:e.uri},(s,a)=>yA(s.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let s=o;s<this._markers.length;s++){let a=Q.lift(this._markers[s]);if(a.isEmpty()){const u=e.getWordAtPosition(a.getStartPosition());u&&(a=new Q(a.startLineNumber,u.startColumn,a.startLineNumber,u.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=s,r=!0;break}if(this._markers[s].resource.toString()!==e.uri.toString())break}r||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;let r=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(e,t){let n=this._markers.findIndex(r=>r.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(Q.containsPosition(this._markers[n],t))return new die(this._markers[n],n+1,this._markers.length)}}};SU=mpe([n5(1,xM),n5(2,nr)],SU);const _pe=gi("IMarkerNavigationService");let LU=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new Tu}getMarkerList(e){for(let t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new SU(e,this._markerService,this._configService)}};LU=mpe([n5(0,xM),n5(1,nr)],LU);z0(_pe,LU,!0);var EU;(function(i){function e(t){switch(t){case Ur.Ignore:return"severity-ignore "+_e.info.classNames;case Ur.Info:return _e.info.classNames;case Ur.Warning:return _e.warning.classNames;case Ur.Error:return _e.error.classNames;default:return""}}i.className=e})(EU||(EU={}));hr((i,e)=>{const t=i.getColor(JIe);if(t){const o=_e.error.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.text-search-provider-messages .providerMessage ${o},
			.extensions-viewlet > .extensions ${o} {
				color: ${t};
			}
		`)}const n=i.getColor(eke);if(n){const o=_e.warning.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.extension-editor ${o},
			.text-search-provider-messages .providerMessage ${o},
			.preferences-editor ${o} {
				color: ${n};
			}
		`)}const r=i.getColor(tke);if(r){const o=_e.info.cssSelector;e.addRule(`
			.monaco-editor .zone-widget ${o},
			.markers-panel .marker-icon${o},
			.extensions-viewlet > .extensions ${o},
			.text-search-provider-messages .providerMessage ${o},
			.extension-editor ${o} {
				color: ${r};
			}
		`)}});var aYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},tw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class lYe{constructor(e,t,n,r,o){this._openerService=r,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new Qe,this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(ts(this._relatedBlock,"click",a=>{a.preventDefault();const u=this._relatedDiagnostics.get(a.target);u&&n(u)})),this._scrollable=new lq(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{s.style.left=`-${a.scrollLeft}px`,s.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){oi(this._disposables)}update(e){const{source:t,message:n,relatedInformation:r,code:o}=e;let s=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?s+=o.length:s+=o.value.length);const a=sg(n);this._lines=a.length,this._longestLineLength=0;for(const p of a)this._longestLineLength=Math.max(p.length+s,this._longestLineLength);$o(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let u=this._messageBlock;for(const p of a)u=document.createElement("div"),u.innerText=p,p===""&&(u.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(u);if(t||o){const p=document.createElement("span");if(p.classList.add("details"),u.appendChild(p),t){const m=document.createElement("span");m.innerText=t,m.classList.add("source"),p.appendChild(m)}if(o)if(typeof o=="string"){const m=document.createElement("span");m.innerText=`(${o})`,m.classList.add("code"),p.appendChild(m)}else{this._codeLink=Ge("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=v=>{this._openerService.open(o.target,{allowCommands:!0}),v.preventDefault(),v.stopPropagation()};const m=Be(this._codeLink,Ge("span"));m.innerText=o.value,p.appendChild(this._codeLink)}}if($o(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),vl(r)){const p=this._relatedBlock.appendChild(document.createElement("div"));p.style.paddingTop=`${Math.floor(this._editor.getOption(58)*.66)}px`,this._lines+=1;for(const m of r){let v=document.createElement("div"),b=document.createElement("a");b.classList.add("filename"),b.innerText=`${Uge(m.resource)}(${m.startLineNumber}, ${m.startColumn}): `,b.title=this._labelService.getUriLabel(m.resource),this._relatedDiagnostics.set(b,m);let L=document.createElement("span");L.innerText=m.message,v.appendChild(b),v.appendChild(L),this._lines+=1,p.appendChild(v)}}const d=this._editor.getOption(43),h=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),f=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:h,scrollHeight:f})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case Ir.Error:t=C("Error","Error");break;case Ir.Warning:t=C("Warning","Warning");break;case Ir.Info:t=C("Info","Info");break;case Ir.Hint:t=C("Hint","Hint");break}let n=C("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const r=this._editor.getModel();return r&&e.startLineNumber<=r.getLineCount()&&e.startLineNumber>=1&&(n=`${r.getLineContent(e.startLineNumber)}, ${n}`),n}}let uS=class vpe extends e5{constructor(e,t,n,r,o,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=n,this._menuService=r,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new Qe,this._onDidSelectRelatedInformation=new be,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=Ir.Warning,this._backgroundColor=ye.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(hYe);let t=xU,n=uYe;this._severity===Ir.Warning?(t=DU,n=cYe):this._severity===Ir.Info&&(t=IU,n=dYe);const r=e.getColor(t),o=e.getColor(n);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:o,primaryHeadingColor:e.getColor($ge),secondaryHeadingColor:e.getColor(zge)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun(r=>this.editor.focus()));const t=[],n=this._menuService.createMenu(vpe.TitleMenu,this._contextKeyService);qGe(n,void 0,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=Be(e,Ge(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new lYe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());let r=Q.lift(e);const o=this.editor.getPosition();let s=o&&r.containsPosition(o)?o:r.getStartPosition();super.show(s,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const u=n>1?C("problems","{0} of {1} problems",t,n):C("change","{0} of {1} problem",t,n);this.setTitle(gc(a.uri),u)}this._icon.className=`codicon ${EU.className(Ir.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(s,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};uS.TitleMenu=new Mt("gotoErrorTitleMenu");uS=aYe([tw(1,Er),tw(2,El),tw(3,bC),tw(4,An),tw(5,dn),tw(6,yM)],uS);let hie=xA(I2,oce),fie=xA(bp,I8),gie=xA(qh,AG);const xU=Ce("editorMarkerNavigationError.background",{dark:hie,light:hie,hc:ho},C("editorMarkerNavigationError","Editor marker navigation widget error color.")),uYe=Ce("editorMarkerNavigationError.headerBackground",{dark:tr(xU,.1),light:tr(xU,.1),hc:null},C("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),DU=Ce("editorMarkerNavigationWarning.background",{dark:fie,light:fie,hc:ho},C("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),cYe=Ce("editorMarkerNavigationWarning.headerBackground",{dark:tr(DU,.1),light:tr(DU,.1),hc:"#0C141F"},C("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),IU=Ce("editorMarkerNavigationInfo.background",{dark:gie,light:gie,hc:ho},C("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),dYe=Ce("editorMarkerNavigationInfo.headerBackground",{dark:tr(IU,.1),light:tr(IU,.1),hc:null},C("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),hYe=Ce("editorMarkerNavigation.background",{dark:sc,light:sc,hc:sc},C("editorMarkerNavigationBackground","Editor marker navigation widget background."));var fYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},bpe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let T0=class S4{constructor(e,t,n,r,o){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=r,this._instantiationService=o,this._sessionDispoables=new Qe,this._editor=e,this._widgetVisible=Cpe.bindTo(this._contextKeyService)}static get(e){return e.getContribution(S4.ID)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(uS,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var r,o,s;(!(!((r=this._model)===null||r===void 0)&&r.selected)||!Q.containsPosition((o=this._model)===null||o===void 0?void 0:o.selected.marker,n.position))&&((s=this._model)===null||s===void 0||s.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:Q.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new Le(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(e,t){return bpe(this,void 0,void 0,function*(){if(this._editor.hasModel()){const n=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(n.move(e,this._editor.getModel(),this._editor.getPosition()),!n.selected)return;if(n.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=yield this._editorService.openCodeEditor({resource:n.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:n.selected.marker}},this._editor);r&&(S4.get(r).close(),S4.get(r).nagivate(e,t))}else this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}})}};T0.ID="editor.contrib.markerController";T0=fYe([gP(1,_pe),gP(2,dn),gP(3,ki),gP(4,An)],T0);class GB extends Et{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}run(e,t){return bpe(this,void 0,void 0,function*(){t.hasModel()&&T0.get(t).nagivate(this._next,this._multiFile)})}}class wp extends GB{constructor(){super(!0,!1,{id:wp.ID,label:wp.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:578,weight:100},menuOpts:{menuId:uS.TitleMenu,title:wp.LABEL,icon:ds("marker-navigation-next",_e.arrowDown,C("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}wp.ID="editor.action.marker.next";wp.LABEL=C("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class cS extends GB{constructor(){super(!1,!1,{id:cS.ID,label:cS.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:1602,weight:100},menuOpts:{menuId:uS.TitleMenu,title:wp.LABEL,icon:ds("marker-navigation-previous",_e.arrowUp,C("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}cS.ID="editor.action.marker.prev";cS.LABEL=C("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");class gYe extends GB{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:C("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:66,weight:100},menuOpts:{menuId:Mt.MenubarGoMenu,title:C({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class pYe extends GB{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:C("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:1090,weight:100},menuOpts:{menuId:Mt.MenubarGoMenu,title:C({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}Ti(T0.ID,T0);it(wp);it(cS);it(gYe);it(pYe);const Cpe=new Dt("markersNavigationVisible",!1),mYe=Ps.bindToContribution(T0.get);nt(new mYe({id:"closeMarkersNavigation",precondition:Cpe,handler:i=>i.close(),kbOpts:{weight:100+50,kbExpr:de.focus,primary:9,secondary:[1033]}}));var _Ye=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},pie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Tc=Ge;class vYe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const mie={type:1,filter:{include:jn.QuickFix}};let kU=class{constructor(e,t,n,r){this._editor=e,this._hover=t,this._markerDecorationsService=n,this._openerService=r,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=e.range.startLineNumber,o=n.getLineMaxColumn(r),s=[];for(const a of t){const u=a.range.startLineNumber===r?a.range.startColumn:1,d=a.range.endLineNumber===r?a.range.endColumn:o,h=this._markerDecorationsService.getMarker(n.uri,a);if(!h)continue;const f=new Q(e.range.startLineNumber,u,e.range.startLineNumber,d);s.push(new vYe(this,f,h))}return s}renderHoverParts(e,t,n){if(!e.length)return Oe.None;const r=new Qe;e.forEach(s=>t.appendChild(this.renderMarkerHover(s,r)));const o=e.length===1?e[0]:e.sort((s,a)=>Ir.compare(s.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(o,n,r),r}renderMarkerHover(e,t){const n=Tc("div.hover-row"),r=Be(n,Tc("div.marker.hover-contents")),{source:o,message:s,code:a,relatedInformation:u}=e.marker;this._editor.applyFontInfo(r);const d=Be(r,Tc("span"));if(d.style.whiteSpace="pre-wrap",d.innerText=s,o||a)if(a&&typeof a!="string"){const h=Tc("span");if(o){const v=Be(h,Tc("span"));v.innerText=o}const f=Be(h,Tc("a.code-link"));f.setAttribute("href",a.target.toString()),t.add(qe(f,"click",v=>{this._openerService.open(a.target,{allowCommands:!0}),v.preventDefault(),v.stopPropagation()}));const p=Be(f,Tc("span"));p.innerText=a.value;const m=Be(r,h);m.style.opacity="0.6",m.style.paddingLeft="6px"}else{const h=Be(r,Tc("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(vl(u))for(const{message:h,resource:f,startLineNumber:p,startColumn:m}of u){const v=Be(r,Tc("div"));v.style.marginTop="8px";const b=Be(v,Tc("a"));b.innerText=`${gc(f)}(${p}, ${m}): `,b.style.cursor="pointer",t.add(qe(b,"click",S=>{S.stopPropagation(),S.preventDefault(),this._openerService&&this._openerService.open(f,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:p,startColumn:m}}}).catch(gn)}));const L=Be(v,Tc("span"));L.innerText=h,this._editor.applyFontInfo(L)}return n}renderMarkerStatusbar(e,t,n){if((e.marker.severity===Ir.Error||e.marker.severity===Ir.Warning||e.marker.severity===Ir.Info)&&t.addAction({label:C("view problem","View Problem"),commandId:wp.ID,run:()=>{this._hover.hide(),T0.get(this._editor).showAtMarker(e.marker),this._editor.focus()}}),!this._editor.getOption(80)){const r=t.append(Tc("div"));this.recentMarkerCodeActionsInfo&&(W3.makeKey(this.recentMarkerCodeActionsInfo.marker)===W3.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=C("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?Oe.None:n.add(wb(()=>r.textContent=C("checkingForQuickFixes","Checking for quick fixes..."),200));r.textContent||(r.textContent=String.fromCharCode(160));const s=this.getCodeActions(e.marker);n.add(Kn(()=>s.cancel())),s.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),r.textContent=C("noQuickFixes","No quick fixes available");return}r.style.display="none";let u=!1;n.add(Kn(()=>{u||a.dispose()})),t.addAction({label:C("quick fixes","Quick Fix..."),commandId:tL.Id,run:d=>{u=!0;const h=Ub.get(this._editor),f=Us(d);this._hover.hide(),h.showCodeActions(mie,a,{x:f.left+6,y:f.top+f.height+6})}})},gn)}}getCodeActions(e){return cs(t=>HY(this._editor.getModel(),new Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),mie,EC.None,t))}};kU=_Ye([pie(2,dG),pie(3,El)],kU);hr((i,e)=>{const t=i.getColor(x8);t&&e.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${t}; }`);const n=i.getColor(D8);n&&e.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${n}; }`)});const wpe="editor.action.inlineSuggest.commit";class ype{constructor(e,t,n=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=n}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return CYe(n,this.parts.map(o=>({range:{startLineNumber:1,endLineNumber:1,startColumn:o.column,endColumn:o.column},text:o.lines.join(`
`)}))).substring(this.parts[0].column-1)}}class bYe{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}function CYe(i,e){const t=new bYe(i),n=e.map(r=>{const o=Q.lift(r.range);return{startOffset:t.getOffset(o.getStartPosition()),endOffset:t.getOffset(o.getEndPosition()),text:r.text}});n.sort((r,o)=>o.startOffset-r.startOffset);for(const r of n)i=i.substring(0,r.startOffset)+r.text+i.substring(r.endOffset);return i}class _ie{constructor(e,t,n){this.column=e,this.lines=t,this.preview=n}}class Spe extends Oe{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(105)&&this._expanded===void 0&&this.onDidChangeEmitter.fire()}))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}function wYe(i,e){return i===e?!0:!i||!e?!1:i.range.equalsRange(e.range)&&i.text===e.text&&i.command===e.command}function Lpe(i,e,t,n,r=0){if(i.range.startLineNumber!==i.range.endLineNumber)return;const o=e.getLineContent(i.range.startLineNumber),s=zi(o).length;if(i.range.startColumn-1<=s){const m=zi(i.text).length,v=o.substring(i.range.startColumn-1,s),b=Q.fromPositions(i.range.getStartPosition().delta(0,v.length),i.range.getEndPosition()),L=i.text.startsWith(v)?i.text.substring(v.length):i.text.substring(m);i={range:b,text:L,command:i.command}}const u=e.getValueInRange(i.range),d=yYe(u,i.text);if(!d)return;const h=i.range.startLineNumber,f=new Array;if(t==="prefix"){const m=d.filter(v=>v.originalLength===0);if(m.length>1||m.length===1&&m[0].originalStart!==u.length)return}const p=i.text.length-r;for(const m of d){const v=i.range.startColumn+m.originalStart+m.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===i.range.startLineNumber&&v<n.column||m.originalLength>0)return;if(m.modifiedLength===0)continue;const b=m.modifiedStart+m.modifiedLength,L=Math.max(m.modifiedStart,Math.min(b,p)),S=i.text.substring(m.modifiedStart,L),y=i.text.substring(L,Math.max(m.modifiedStart,b));if(S.length>0){const E=sg(S);f.push(new _ie(v,E,!1))}if(y.length>0){const E=sg(y);f.push(new _ie(v,E,!0))}}return new ype(h,f,0)}let _f;function yYe(i,e){if((_f==null?void 0:_f.originalValue)===i&&(_f==null?void 0:_f.newValue)===e)return _f==null?void 0:_f.changes;{const t=SYe(i,e);return _f={originalValue:i,newValue:e,changes:t},t}}function SYe(i,e){if(i.length>5e3||e.length>5e3)return;function t(u){let d=0;for(let h=0,f=u.length;h<f;h++){const p=u.charCodeAt(h);p>d&&(d=p)}return d}const n=Math.max(t(i),t(e));function r(u){if(u<0)throw new Error("unexpected");return n+u+1}function o(u){let d=0,h=0;const f=new Int32Array(u.length);for(let p=0,m=u.length;p<m;p++){const v=h*100+d;u[p]==="("?(f[p]=r(2*v),d++):u[p]===")"?(f[p]=r(2*v+1),d===1&&h++,d=Math.max(d-1,0)):f[p]=u.charCodeAt(p)}return f}const s=o(i),a=o(e);return new Wf({getElements:()=>s},{getElements:()=>a}).ComputeDiff(!1).changes}var LYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},EYe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ip=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let TU=class extends Oe{constructor(e,t,n){super(),this.editor=e,this.cache=t,this.commandService=n,this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new Aa),this.active=!1,this.disposed=!1,this._register(n.onDidExecuteCommand(r=>{new Set([_y.Tab.id,_y.DeleteLeft.id,_y.DeleteRight.id,wpe,"acceptSelectedSuggestion"]).has(r.commandId)&&e.hasTextFocus()&&this.handleUserInput()})),this._register(this.editor.onDidType(r=>{this.handleUserInput()})),this._register(this.editor.onDidChangeCursorPosition(r=>{this.session&&!this.session.isValid&&this.hide()})),this._register(Kn(()=>{this.disposed=!0})),this._register(this.editor.onDidBlurEditorWidget(()=>{this.hide()}))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout(()=>{this.disposed||this.startSessionIfTriggered()},0)}get session(){return this.completionSession.value}get ghostText(){var e;return(e=this.session)===null||e===void 0?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;(t=this.session)===null||t===void 0||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&((t=this.session)===null||t===void 0||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(Zu.Automatic))}trigger(e){if(this.completionSession.value){e===Zu.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext();return}this.completionSession.value=new xYe(this.editor,this.editor.getPosition(),()=>this.active,this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange(()=>{this.onDidChangeEmitter.fire()}))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;(e=this.session)===null||e===void 0||e.commitCurrentCompletion()}showNext(){var e;(e=this.session)===null||e===void 0||e.showNextInlineCompletion()}showPrevious(){var e;(e=this.session)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return ip(this,void 0,void 0,function*(){const t=yield(e=this.session)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};TU=LYe([EYe(2,kr)],TU);class xYe extends Spe{constructor(e,t,n,r,o,s){super(e),this.triggerPosition=t,this.shouldUpdate=n,this.commandService=r,this.cache=o,this.initialTriggerKind=s,this.minReservedLineCount=0,this.updateOperation=this._register(new Aa),this.updateSoon=this._register(new er(()=>{let u=this.initialTriggerKind;return this.initialTriggerKind=Zu.Automatic,this.update(u)},50)),this.currentlySelectedCompletionId=void 0;let a;this._register(this.onDidChange(()=>{const u=this.currentCompletion;if(u&&u.sourceInlineCompletion!==a){a=u.sourceInlineCompletion;const d=u.sourceProvider;d.handleItemDidShow&&d.handleItemDidShow(u.sourceInlineCompletions,a)}})),this._register(Kn(()=>{this.cache.clear()})),this._register(this.editor.onDidChangeCursorPosition(u=>{this.cache.value&&this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeModelContent(u=>{this.scheduleAutomaticUpdate()})),this._register(qG.onDidChange(()=>{this.updateSoon.schedule()})),this.scheduleAutomaticUpdate()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value||this.cache.value.completions.length===0)return 0;const e=this.cache.value.completions.findIndex(t=>t.semanticId===this.currentlySelectedCompletionId);return e===-1?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){var e;return ip(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}showPreviousInlineCompletion(){var e;return ip(this,void 0,void 0,function*(){yield this.ensureUpdateWithExplicitContext();const t=((e=this.cache.value)===null||e===void 0?void 0:e.completions)||[];if(t.length>0){const n=(this.fixAndGetIndexOfCurrentSelection()+t.length-1)%t.length;this.currentlySelectedCompletionId=t[n].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()})}ensureUpdateWithExplicitContext(){var e;return ip(this,void 0,void 0,function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===Zu.Explicit?yield this.updateOperation.value.promise:yield this.update(Zu.Explicit):((e=this.cache.value)===null||e===void 0?void 0:e.triggerKind)!==Zu.Explicit&&(yield this.update(Zu.Explicit))})}hasMultipleInlineCompletions(){var e;return ip(this,void 0,void 0,function*(){return yield this.ensureUpdateWithExplicitContext(),(((e=this.cache.value)===null||e===void 0?void 0:e.completions.length)||0)>1})}get ghostText(){const e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?Lpe(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule()}update(e){return ip(this,void 0,void 0,function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),n=cs(o=>ip(this,void 0,void 0,function*(){let s;try{s=yield xpe(t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},o)}catch(a){gn(a);return}o.isCancellationRequested||(this.cache.setValue(this.editor,s,e),this.onDidChangeEmitter.fire())})),r=new Epe(n,e);this.updateOperation.value=r,yield n,this.updateOperation.value===r&&this.updateOperation.clear()})}takeOwnership(e){this._register(e)}commitCurrentCompletion(){if(!this.ghostText)return;const e=this.currentCompletion;e&&this.commit(e)}commit(e){const t=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[jr.replaceMove(e.range,e.text)]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally(()=>{t==null||t.dispose()}).then(void 0,Rs):t==null||t.dispose(),this.onDidChangeEmitter.fire()}}class Epe{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class DYe extends Oe{constructor(e,t,n,r){super(),this.triggerKind=r;const o=e.deltaDecorations([],t.items.map(s=>({range:s.range,options:{description:"inline-completion-tracking-range"}})));this._register(Kn(()=>{e.deltaDecorations(o,[])})),this.completions=t.items.map((s,a)=>new IYe(s,o[a])),this._register(e.onDidChangeModelContent(()=>{let s=!1;const a=e.getModel();for(const u of this.completions){const d=a.getDecorationRange(u.decorationId);if(!d){gn(new Error("Decoration has no range"));continue}u.synchronizedRange.equalsRange(d)||(s=!0,u.synchronizedRange=d)}s&&n()})),this._register(t)}}class IYe{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}function kYe(i,e){const t=e.getWordAtPosition(i),n=e.getLineMaxColumn(i.lineNumber);return t?new Q(i.lineNumber,t.startColumn,i.lineNumber,n):Q.fromPositions(i,i.with(void 0,n))}function xpe(i,e,t,n=Vn.None){return ip(this,void 0,void 0,function*(){const r=kYe(i,e),o=qG.all(e),s=yield Promise.all(o.map(u=>ip(this,void 0,void 0,function*(){const d=yield u.provideInlineCompletions(e,i,t,n);return{completions:d,provider:u,dispose:()=>{d&&u.freeInlineCompletions(d)}}}))),a=new Map;for(const u of s){const d=u.completions;if(d)for(const h of d.items.map(f=>({text:f.text,range:f.range?Q.lift(f.range):r,command:f.command,sourceProvider:u.provider,sourceInlineCompletions:d,sourceInlineCompletion:f})))h.range.startLineNumber===h.range.endLineNumber&&a.set(JSON.stringify({text:h.text,range:h.range}),h)}return{items:[...a.values()],dispose:()=>{for(const u of s)u.dispose()}}})}function i5(i,e){if(!e)return e;const t=i.getValueInRange(e.range),n=$y(t,e.text),r=i.getOffsetAt(e.range.getStartPosition())+n,o=i.getPositionAt(r),s=t.substr(n),a=TF(s,e.text),u=i.getPositionAt(Math.max(r,i.getOffsetAt(e.range.getEndPosition())-a));return{range:Q.fromPositions(o,u),text:e.text.substr(n,e.text.length-n-a)}}class Mc{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),r;if(r=Mc._table[n],typeof r=="number")return this.pos+=1,{type:r,pos:e,len:1};if(Mc.isDigitCharacter(n)){r=8;do t+=1,n=this.value.charCodeAt(e+t);while(Mc.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}if(Mc.isVariableCharacter(n)){r=9;do n=this.value.charCodeAt(e+ ++t);while(Mc.isVariableCharacter(n)||Mc.isDigitCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}r=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Mc._table[n]>"u"&&!Mc.isDigitCharacter(n)&&!Mc.isVariableCharacter(n));return this.pos+=t,{type:r,pos:e,len:t}}}Mc._table={[36]:0,[58]:1,[44]:2,[123]:3,[125]:4,[92]:5,[47]:6,[124]:7,[43]:11,[45]:12,[63]:13};class iL{constructor(){this._children=[]}appendChild(e){return e instanceof fl&&this._children[this._children.length-1]instanceof fl?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,r=n.children.indexOf(e),o=n.children.slice(0);o.splice(r,1,...t),n._children=o,function s(a,u){for(const d of a)d.parent=u,s(d.children,d)}(t,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof qB)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class fl extends iL{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new fl(this.value)}}class Dpe extends iL{}class Uc extends Dpe{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof WM?this._children[0]:void 0}clone(){let e=new Uc(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class WM extends iL{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof fl&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){let e=new WM;return this.options.forEach(e.appendChild,e),e}}class GY extends iL{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,r=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(o=>o instanceof kh&&!!o.elseValue)&&(r=this._replace([])),r}_replace(e){let t="";for(const n of this._children)if(n instanceof kh){let r=e[n.index]||"";r=n.resolve(r),t+=r}else t+=n.toString();return t}toString(){return""}clone(){let e=new GY;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class kh extends iL{constructor(e,t,n,r){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=r}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,r)=>r===0?n.toLowerCase():n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()).join(""):e}clone(){return new kh(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class wO extends Dpe{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new fl(t)],!0):!1}clone(){const e=new wO(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function vie(i,e){const t=[...i];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class qB extends iL{get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof Uc&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(r=>r===e?(n=!0,!1):(t+=r.len(),!0)),n?t:-1}fullLen(e){let t=0;return vie([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof Uc&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof wO&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){let e=new qB;return this._children=this.children.map(t=>t.clone()),e}walk(e){vie(this.children,e)}}class YB{constructor(){this._scanner=new Mc,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){this._scanner.text(e),this._token=this._scanner.next();const r=new qB;for(;this._parse(r););const o=new Map,s=[];let a=0;r.walk(u=>(u instanceof Uc&&(a+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(const u of s){const d=o.get(u.index);if(d){const h=new Uc(u.index);h.transform=u.transform;for(const f of d)h.appendChild(f.clone());r.replace(u,[h])}}return n||(n=a>0&&t),!o.has(0)&&n&&r.appendChild(new Uc(0)),r}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const r=this._scanner.next();if(r.type!==0&&r.type!==4&&r.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new fl(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Uc(Number(t)):new wO(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const o=new Uc(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new fl("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const s=new WM;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let r;if((r=this._accept(5,!0))?r=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:r=this._accept(void 0,!0),!r)return this._backTo(t),!1;n.push(r)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new fl(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const o=new wO(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new fl("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let t=new GY,n="",r="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new fl(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let r=this._accept(8,!0);if(r)if(n){if(this._accept(4))return e.appendChild(new kh(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new kh(Number(r))),!0;else return this._backTo(t),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new kh(Number(r),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new kh(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new kh(Number(r),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new kh(Number(r),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new kh(Number(r),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new fl(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}const rs=new Uint8Array(16),La=[];for(let i=0;i<256;i++)La.push(i.toString(16).padStart(2,"0"));let NU;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?NU=crypto.getRandomValues.bind(crypto):NU=function(i){for(let e=0;e<i.length;e++)i[e]=Math.floor(Math.random()*256);return i};function TYe(){NU(rs),rs[6]=rs[6]&15|64,rs[8]=rs[8]&63|128;let i=0,e="";return e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+="-",e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e+=La[rs[i++]],e}const bie="code-workspace";function Cie(i){const e=i;return typeof(e==null?void 0:e.id)=="string"&&sn.isUri(e.uri)}function NYe(i){if(i.configuration)return{id:i.id,configPath:i.configuration};if(i.folders.length===1)return{id:i.id,uri:i.folders[0].uri}}class AYe{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}}class OYe{constructor(e,t,n,r){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=r}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,r=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(n=o.value,r=o.multiline)}if(n&&r&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),s=zi(o,0,this._selection.startColumn-1);let a=s;e.snippet.walk(d=>d===e?!1:(d instanceof fl&&(a=zi(sg(d.value).pop())),!0));const u=$y(a,s);n=n.replace(/(\r\n|\r|\n)(.*)/g,(d,h,f)=>`${h}${a.substr(u)}${f}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber)}}}}class MYe{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return G1(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=G1(this._model.uri.fsPath),r=n.lastIndexOf(".");return r<=0?n:n.slice(0,r)}else{if(t==="TM_DIRECTORY")return Ule(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(VG(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class RYe{constructor(e,t,n,r){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=r}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(r=>!due(r));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}class PYe{constructor(e,t){this._model=e,this._selection=t}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=vi.getComments(n);if(r){if(t==="LINE_COMMENT")return r.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return r.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return r.blockCommentEndToken||void 0}}}class Zf{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return Zf.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return Zf.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return Zf.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return Zf.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3))}}Zf.dayNames=[C("Sunday","Sunday"),C("Monday","Monday"),C("Tuesday","Tuesday"),C("Wednesday","Wednesday"),C("Thursday","Thursday"),C("Friday","Friday"),C("Saturday","Saturday")];Zf.dayNamesShort=[C("SundayShort","Sun"),C("MondayShort","Mon"),C("TuesdayShort","Tue"),C("WednesdayShort","Wed"),C("ThursdayShort","Thu"),C("FridayShort","Fri"),C("SaturdayShort","Sat")];Zf.monthNames=[C("January","January"),C("February","February"),C("March","March"),C("April","April"),C("May","May"),C("June","June"),C("July","July"),C("August","August"),C("September","September"),C("October","October"),C("November","November"),C("December","December")];Zf.monthNamesShort=[C("JanuaryShort","Jan"),C("FebruaryShort","Feb"),C("MarchShort","Mar"),C("AprilShort","Apr"),C("MayShort","May"),C("JuneShort","Jun"),C("JulyShort","Jul"),C("AugustShort","Aug"),C("SeptemberShort","Sep"),C("OctoberShort","Oct"),C("NovemberShort","Nov"),C("DecemberShort","Dec")];class FYe{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=NYe(this._workspaceService.getWorkspace());if(t){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(Cie(e))return G1(e.uri.path);let t=G1(e.configPath.path);return t.endsWith(bie)&&(t=t.substr(0,t.length-bie.length-1)),t}_resoveWorkspacePath(e){if(Cie(e))return uU(e.uri.fsPath);let t=G1(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?uU(n):"/"}}class BYe{resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return TYe()}}class Rc{constructor(e,t,n,r){this._editor=e,this._snippet=t,this._offset=n,this._snippetLineLeadingWhitespace=r,this._nestingLevel=1,this._placeholderGroups=eJ(t.placeholders,Uc.compareByIndex),this._placeholderGroupsIdx=-1}dispose(){this._placeholderDecorations&&this._editor.deltaDecorations([...this._placeholderDecorations.values()],[]),this._placeholderGroups.length=0}_initDecorations(){if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const r=this._snippet.offset(n),o=this._snippet.fullLen(n),s=Q.fromPositions(e.getPositionAt(this._offset+r),e.getPositionAt(this._offset+r+o)),a=n.isFinalTabstop?Rc._decor.inactiveFinal:Rc._decor.inactive,u=t.addDecoration(s,a);this._placeholderDecorations.set(n,u)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let r=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const s=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(s),u=this._editor.getModel().getValueInRange(a),d=o.transform.resolve(u).split(/\r\n|\r|\n/);for(let h=1;h<d.length;h++)d[h]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+d[h]);r.push(jr.replace(a,d.join(this._editor.getModel().getEOL())))}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(r=>{const o=new Set,s=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const u=this._placeholderDecorations.get(a),d=this._editor.getModel().getDecorationRange(u);s.push(new yt(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),r.changeDecorationOptions(u,a.isFinalTabstop?Rc._decor.activeFinal:Rc._decor.active),o.add(a);for(const h of this._snippet.enclosingPlaceholders(a)){const f=this._placeholderDecorations.get(h);r.changeDecorationOptions(f,h.isFinalTabstop?Rc._decor.activeFinal:Rc._decor.active),o.add(h)}}for(const[a,u]of this._placeholderDecorations)o.has(a)||r.changeDecorationOptions(u,a.isFinalTabstop?Rc._decor.inactiveFinal:Rc._decor.inactive);return s});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof Uc){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const r of t){if(r.isFinalTabstop)break;n||(n=[],e.set(r.index,n));const o=this._placeholderDecorations.get(r),s=this._editor.getModel().getDecorationRange(o);if(!s){e.delete(r.index);break}n.push(s)}}return e}get choice(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const r of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(!o._placeholderDecorations);const s=o._snippet.placeholderInfo.last.index;for(const u of o._snippet.placeholderInfo.all)u.isFinalTabstop?u.index=r.index+(s+1)/this._nestingLevel:u.index=r.index+u.index/this._nestingLevel;this._snippet.replace(r,o._snippet.children);const a=this._placeholderDecorations.get(r);n.removeDecoration(a),this._placeholderDecorations.delete(r);for(const u of o._snippet.placeholders){const d=o._snippet.offset(u),h=o._snippet.fullLen(u),f=Q.fromPositions(t.getPositionAt(o._offset+d),t.getPositionAt(o._offset+d+h)),p=n.addDecoration(f,Rc._decor.inactive);this._placeholderDecorations.set(u,p)}}this._placeholderGroups=eJ(this._snippet.placeholders,Uc.compareByIndex)})}}Rc._decor={active:Sn.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Sn.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Sn.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Sn.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const wie={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};class Df{constructor(e,t,n=wie){this._templateMerges=[],this._snippets=[],this._editor=e,this._template=t,this._options=n}static adjustWhitespace(e,t,n,r,o){const s=e.getLineContent(t.lineNumber),a=zi(s,0,t.column-1);let u;return n.walk(d=>{if(!(d instanceof fl)||d.parent instanceof WM)return!0;const h=d.value.split(/\r\n|\r|\n/);if(r){const p=n.offset(d);if(p===0)h[0]=e.normalizeIndentation(h[0]);else{u=u??n.toString();let m=u.charCodeAt(p-1);(m===10||m===13)&&(h[0]=e.normalizeIndentation(a+h[0]))}for(let m=1;m<h.length;m++)h[m]=e.normalizeIndentation(a+h[m])}const f=h.join(e.getEOL());return f!==d.value&&(d.parent.replace(d,[new fl(f)]),u=void 0),!0}),a}static adjustSelection(e,t,n,r){if(n!==0||r!==0){const{positionLineNumber:o,positionColumn:s}=t,a=s-n,u=s+r,d=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:u});t=yt.createWithDirection(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn,t.getDirection())}return t}static createEditsAndSnippets(e,t,n,r,o,s,a,u){const d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};const f=e.getModel(),p=e.invokeWithinContext(A=>A.get(Fde)),m=e.invokeWithinContext(A=>new MYe(A.get(yM),f)),v=()=>a;let b=0,L=f.getValueInRange(Df.adjustSelection(f,e.getSelection(),n,0)),S=f.getValueInRange(Df.adjustSelection(f,e.getSelection(),0,r)),y=f.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber);const E=e.getSelections().map((A,N)=>({selection:A,idx:N})).sort((A,N)=>Q.compareRangesUsingStarts(A.selection,N.selection));for(const{selection:A,idx:N}of E){let V=Df.adjustSelection(f,A,n,0),R=Df.adjustSelection(f,A,0,r);L!==f.getValueInRange(V)&&(V=A),S!==f.getValueInRange(R)&&(R=A);const M=A.setStartPosition(V.startLineNumber,V.startColumn).setEndPosition(R.endLineNumber,R.endColumn),K=new YB().parse(t,!0,o),X=M.getStartPosition(),$=Df.adjustWhitespace(f,X,K,s||N>0&&y!==f.getLineFirstNonWhitespaceColumn(A.positionLineNumber),!0);K.resolveVariables(new AYe([m,new RYe(v,N,E.length,e.getOption(70)==="spread"),new OYe(f,A,N,u),new PYe(f,A),new Zf,new FYe(p),new BYe]));const D=f.getOffsetAt(X)+b;b+=K.toString().length-f.getValueLengthInRange(M),d[N]=jr.replace(M,K.toString()),d[N].identifier={major:N,minor:0},h[N]=new Rc(e,K,D,$)}return{edits:d,snippets:h}}dispose(){oi(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=Df.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer);this._snippets=t,this._editor.executeEdits("snippet",e,n=>this._snippets[0].hasPlaceholder?this._move(!0):n.filter(r=>!!r.identifier).map(r=>yt.fromPositions(r.range.getEndPosition()))),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=wie){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:r}=Df.createEditsAndSnippets(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer);this._editor.executeEdits("snippet",n,o=>{for(const s of this._snippets)s.merge(r);return console.assert(r.length===0),this._snippets[0].hasPlaceholder?this._move(void 0):o.filter(s=>!!s.identifier).map(s=>yt.fromPositions(s.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const r=n.move(e);t.push(...r)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get choice(){return this._snippets[0].choice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(const n of this._snippets){const r=n.computePossibleSelections();if(t.size===0)for(const[o,s]of r){s.sort(Q.compareRangesUsingStarts);for(const a of e)if(s[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,s)=>{o.push(...r.get(s))})}e.sort(Q.compareRangesUsingStarts);for(let[n,r]of t){if(r.length!==e.length){t.delete(n);continue}r.sort(Q.compareRangesUsingStarts);for(let o=0;o<r.length;o++)if(!r[o].containsRange(e[o])){t.delete(n);continue}}return t.size>0}}var Y2=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Un={Visible:new Dt("suggestWidgetVisible",!1,C("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new Dt("suggestWidgetDetailsVisible",!1,C("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new Dt("suggestWidgetMultipleSuggestions",!1,C("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new Dt("suggestionMakesTextEdit",!0,C("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new Dt("acceptSuggestionOnEnter",!0,C("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new Dt("suggestionHasInsertAndReplaceRange",!1,C("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new Dt("suggestionInsertMode",void 0,{type:"string",description:C("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new Dt("suggestionCanResolve",!1,C("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},N0=new Mt("suggestWidgetStatusBar");class WYe{constructor(e,t,n,r){this.position=e,this.completion=t,this.container=n,this.provider=r,this.isInvalid=!1,this.score=Zh.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),Q.isIRange(t.range)?(this.editStart=new Le(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new Le(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new Le(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||Q.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new Le(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new Le(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new Le(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||Q.spansMultipleLines(t.range.insert)||Q.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof r.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return Y2(this,void 0,void 0,function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(n=>{Object.assign(this.completion,n),this._isResolved=!0,t.dispose()},n=>{wg(n)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache})}}class r5{constructor(e=2,t=new Set,n=new Set,r=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.showDeprecated=r}}r5.default=new r5;let VYe;function HYe(){return VYe}class $Ye{constructor(e,t,n,r){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=r}}function Ipe(i,e,t=r5.default,n={triggerKind:0},r=Vn.None){return Y2(this,void 0,void 0,function*(){const o=new rg(!0);e=e.clone();const s=i.getWordAtPosition(e),a=s?new Q(e.lineNumber,s.startColumn,e.lineNumber,s.endColumn):Q.fromPositions(e),u={replace:a,insert:a.setEndPosition(e.lineNumber,e.column)},d=[],h=new Qe,f=[];let p=!1;const m=(b,L,S)=>{var y,E,A;if(L){for(let N of L.suggestions)if(!t.kindFilter.has(N.kind)){if(!t.showDeprecated&&(!((y=N==null?void 0:N.tags)===null||y===void 0)&&y.includes(1)))continue;N.range||(N.range=u),N.sortText||(N.sortText=typeof N.label=="string"?N.label:N.label.label),!p&&N.insertTextRules&&N.insertTextRules&4&&(p=YB.guessNeedsClipboard(N.insertText)),d.push(new WYe(e,N,L,b))}ZK(L)&&h.add(L),f.push({providerName:(E=b._debugDisplayName)!==null&&E!==void 0?E:"unkown_provider",elapsedProvider:(A=L.duration)!==null&&A!==void 0?A:-1,elapsedOverall:S.elapsed()})}},v=(()=>Y2(this,void 0,void 0,function*(){}))();for(let b of Oh.orderedGroups(i)){let L=d.length;if(yield Promise.all(b.map(S=>Y2(this,void 0,void 0,function*(){if(!(t.providerFilter.size>0&&!t.providerFilter.has(S)))try{const y=new rg(!0),E=yield S.provideCompletionItems(i,e,n,r);m(S,E,y)}catch(y){Rs(y)}}))),L!==d.length||r.isCancellationRequested)break}return yield v,r.isCancellationRequested?(h.dispose(),Promise.reject(mC())):new $Ye(d.sort(kpe(t.snippetSortOrder)),p,{entries:f,elapsed:o.elapsed()},h)})}function qY(i,e){if(i.sortTextLow&&e.sortTextLow){if(i.sortTextLow<e.sortTextLow)return-1;if(i.sortTextLow>e.sortTextLow)return 1}return i.completion.label<e.completion.label?-1:i.completion.label>e.completion.label?1:i.completion.kind-e.completion.kind}function zYe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return qY(i,e)}function UYe(i,e){if(i.completion.kind!==e.completion.kind){if(i.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return qY(i,e)}const ZB=new Map;ZB.set(0,zYe);ZB.set(2,UYe);ZB.set(1,qY);function kpe(i){return ZB.get(i)}Qn.registerCommand("_executeCompletionItemProvider",(i,...e)=>Y2(void 0,void 0,void 0,function*(){const[t,n,r,o]=e;Gi(sn.isUri(t)),Gi(Le.isIPosition(n)),Gi(typeof r=="string"||!r),Gi(typeof o=="number"||!o);const s=yield i.get(Qa).createModelReference(t);try{const a={incomplete:!1,suggestions:[]},u=[],d=yield Ipe(s.object.textEditorModel,Le.lift(n),void 0,{triggerCharacter:r,triggerKind:r?1:0});for(const h of d.items)u.length<(o??0)&&u.push(h.resolve(Vn.None)),a.incomplete=a.incomplete||h.container.incomplete,a.suggestions.push(h.completion);try{return yield Promise.all(u),a}finally{setTimeout(()=>d.disposable.dispose(),100)}}finally{s.dispose()}}));const AU=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};Oh.register("*",AU);function jYe(i,e){setTimeout(()=>{AU.onlyOnceSuggestions.push(...e),i.getContribution("editor.contrib.suggestController").triggerSuggest(new Set().add(AU))},0)}var KYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},yie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Sie={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Ms=class d2{constructor(e,t,n){this._editor=e,this._logService=t,this._snippetListener=new Qe,this._modelVersionId=-1,this._inSnippet=d2.InSnippetMode.bindTo(n),this._hasNextTabstop=d2.HasNextTabstop.bindTo(n),this._hasPrevTabstop=d2.HasPrevTabstop.bindTo(n)}static get(e){return e.getContribution(d2.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)===null||e===void 0||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?Sie:Object.assign(Object.assign({},Sie),t))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Df(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState())))}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{choice:e}=this._session;if(!e){this._currentChoice=void 0;return}if(this._currentChoice!==e){this._currentChoice=e,this._editor.setSelections(this._editor.getSelections().map(n=>yt.fromPositions(n.getStartPosition())));const[t]=e.options;jYe(this._editor,e.options.map((n,r)=>({kind:13,label:n.value,insertText:n.value,sortText:"a".repeat(r+1),range:Q.fromPositions(this._editor.getPosition(),this._editor.getPosition().delta(0,t.value.length))})))}}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),(t=this._session)===null||t===void 0||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};Ms.ID="snippetController2";Ms.InSnippetMode=new Dt("inSnippetMode",!1,C("inSnippetMode","Whether the editor in current in snippet mode"));Ms.HasNextTabstop=new Dt("hasNextTabstop",!1,C("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));Ms.HasPrevTabstop=new Dt("hasPrevTabstop",!1,C("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));Ms=KYe([yie(1,Sg),yie(2,dn)],Ms);Ti(Ms.ID,Ms);const XB=Ps.bindToContribution(Ms.get);nt(new XB({id:"jumpToNextSnippetPlaceholder",precondition:_t.and(Ms.InSnippetMode,Ms.HasNextTabstop),handler:i=>i.next(),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:2}}));nt(new XB({id:"jumpToPrevSnippetPlaceholder",precondition:_t.and(Ms.InSnippetMode,Ms.HasPrevTabstop),handler:i=>i.prev(),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:1026}}));nt(new XB({id:"leaveSnippet",precondition:Ms.InSnippetMode,handler:i=>i.cancel(!0),kbOpts:{weight:100+30,kbExpr:de.editorTextFocus,primary:9,secondary:[1033]}}));nt(new XB({id:"acceptSnippet",precondition:Ms.InSnippetMode,handler:i=>i.finish()}));var GYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Lie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class YY{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let r=n[0].score[0];for(let o=0;o<n.length;o++){const{score:s,completion:a}=n[o];if(s[0]!==r)break;if(a.preselect)return o}return 0}}class Tpe extends YY{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class qYe extends YY{constructor(){super("recentlyUsed"),this._cache=new $0(300,.66),this._seq=0}memorize(e,t,n){const r=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(r,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return super.select(e,t,n);let o=n[0].score[0],s=-1,a=-1,u=-1;for(let d=0;d<n.length&&n[d].score[0]===o;d++){const h=`${e.getLanguageId()}/${n[d].textLabel}`,f=this._cache.peek(h);if(f&&f.touch>u&&f.type===n[d].completion.kind&&f.insertText===n[d].completion.insertText&&(u=f.touch,a=d),n[d].completion.preselect&&s===-1)return s=d}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(const[n,r]of e)r.touch=t,r.type=typeof r.type=="number"?r.type:Wce(r.type),this._cache.set(n,r);this._seq=this._cache.size}}class YYe extends YY{constructor(){super("recentlyUsedByPrefix"),this._trie=py.forStrings(),this._seq=0}memorize(e,t,n){const{word:r}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${r}`;this._trie.set(o,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:r}=e.getWordUntilPosition(t);if(!r)return super.select(e,t,n);let o=`${e.getLanguageId()}/${r}`,s=this._trie.get(o);if(s||(s=this._trie.findSubstr(o)),s)for(let a=0;a<n.length;a++){let{kind:u,insertText:d}=n[a].completion;if(u===s.type&&d===s.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Wce(n.type),this._trie.set(t,n)}}}let yO=class L4{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new Qe,this._persistSoon=new er(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===V3.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var n;const r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((n=this._strategy)===null||n===void 0?void 0:n.name)!==r){this._saveState();const o=L4._strategyCtors.get(r)||Tpe;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,u=this._storageService.get(`${L4._storagePrefix}/${r}`,a);u&&this._strategy.fromJSON(JSON.parse(u))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${L4._storagePrefix}/${this._strategy.name}`,n,t,1)}}};yO._strategyCtors=new Map([["recentlyUsedByPrefix",YYe],["recentlyUsed",qYe],["first",Tpe]]);yO._storagePrefix="suggest/memories";yO=GYe([Lie(0,Ig),Lie(1,nr)],yO);const Npe=gi("ISuggestMemories");z0(Npe,yO,!0);var ZYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},XYe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let SO=class Ape{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=Ape.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(110)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)===null||e===void 0||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(110)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),r=this._editor.getSelection(),o=n.getWordAtPosition(r.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===r.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};SO.AtEnd=new Dt("atEndOfWord",!1);SO=ZYe([XYe(1,dn)],SO);var QYe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},JYe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let qb=class E4{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=E4.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)===null||e===void 0||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(E4._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let r=n;for(;r=(r+t.items.length+(e?1:-1))%t.items.length,!(r===n||!t.items[r].completion.additionalTextEdits););return r}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=E4._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};qb.OtherSuggestions=new Dt("hasOtherSuggestions",!1);qb=QYe([JYe(1,dn)],qb);class eZe{constructor(e,t,n){this._disposables=new Qe,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(r=>{if(this._active&&!t.isFrozen()){const o=r.charCodeAt(r.length-1);this._active.acceptCharacters.has(o)&&e.getOption(0)&&n(this._active.item)}}))}_onItem(e){if(!e||!vl(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Mw;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var tZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Su{provideSelectionRanges(e,t){return tZe(this,void 0,void 0,function*(){const n=[];for(const r of t){const o=[];n.push(o);const s=new Map;yield new Promise(a=>Su._bracketsRightYield(a,0,e,r,s)),yield new Promise(a=>Su._bracketsLeftYield(a,0,e,r,s,o))}return n})}static _bracketsRightYield(e,t,n,r,o){const s=new Map,a=Date.now();for(;;){if(t>=Su._maxRounds){e();break}if(!r){e();break}let u=n.bracketPairs.findNextBracket(r);if(!u){e();break}if(Date.now()-a>Su._maxDuration){setTimeout(()=>Su._bracketsRightYield(e,t+1,n,r,o));break}const h=u.close[0];if(u.isOpen){let f=s.has(h)?s.get(h):0;s.set(h,f+1)}else{let f=s.has(h)?s.get(h):0;if(f-=1,s.set(h,Math.max(0,f)),f<0){let p=o.get(h);p||(p=new Tu,o.set(h,p)),p.push(u.range)}}r=u.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,r,o,s){const a=new Map,u=Date.now();for(;;){if(t>=Su._maxRounds&&o.size===0){e();break}if(!r){e();break}let d=n.bracketPairs.findPrevBracket(r);if(!d){e();break}if(Date.now()-u>Su._maxDuration){setTimeout(()=>Su._bracketsLeftYield(e,t+1,n,r,o,s));break}const f=d.close[0];if(d.isOpen){let p=a.has(f)?a.get(f):0;if(p-=1,a.set(f,Math.max(0,p)),p<0){let m=o.get(f);if(m){let v=m.shift();m.size===0&&o.delete(f);const b=Q.fromPositions(d.range.getEndPosition(),v.getStartPosition()),L=Q.fromPositions(d.range.getStartPosition(),v.getEndPosition());s.push({range:b}),s.push({range:L}),Su._addBracketLeading(n,L,s)}}}else{let p=a.has(f)?a.get(f):0;a.set(f,p+1)}r=d.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const r=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(r);o!==0&&o!==t.startColumn&&(n.push({range:Q.fromPositions(new Le(r,o),t.getEndPosition())}),n.push({range:Q.fromPositions(new Le(r,1),t.getEndPosition())}));const s=r-1;if(s>0){const a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(n.push({range:Q.fromPositions(new Le(s,a),t.getEndPosition())}),n.push({range:Q.fromPositions(new Le(s,1),t.getEndPosition())}))}}}Su._maxDuration=30;Su._maxRounds=2;var nZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Of{static create(e,t){return nZe(this,void 0,void 0,function*(){if(!t.getOption(105).localityBonus||!t.hasModel())return Of.None;const n=t.getModel(),r=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Of.None;const[o]=yield new Su().provideSelectionRanges(n,[r]);if(o.length===0)return Of.None;const s=yield e.computeWordRanges(n.uri,o[0].range);if(!s)return Of.None;const a=n.getWordUntilPosition(r);return delete s[a.word],new class extends Of{distance(u,d){if(!r.equals(t.getPosition()))return 0;if(d.kind===17)return 2<<20;let h=typeof d.label=="string"?d.label:d.label.label,f=s[h];if(Mue(f))return 2<<20;let p=LG(f,Q.fromPositions(u),Q.compareRangesUsingStarts),m=p>=0?f[p]:f[Math.max(0,~p-1)],v=o.length;for(const b of o){if(!Q.containsRange(b.range,m))break;v-=1}return v}}})}}Of.None=new class extends Of{distance(){return 0}};class k1{constructor(e,t,n,r,o,s,a){this.clipboardText=a,this._snippetCompareFn=k1._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=r,this._options=o,this._refilterKind=1,this._lineContext=n,s==="top"?this._snippetCompareFn=k1._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=k1._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(let[t,n]of this._providerInfo)n&&e.add(t);return e}adopt(e){let t=[];for(let n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let r="",o="";const s=this._refilterKind===1?this._items:this._filteredItems,a=[],u=!this._options.filterGraceful||s.length>2e3?tS:QPe;for(let d=0;d<s.length;d++){const h=s[d];if(h.isInvalid)continue;this._providerInfo.set(h.provider,!!h.container.incomplete);const f=h.position.column-h.editStart.column,p=f+n-(h.position.column-this._column);if(r.length!==p&&(r=p===0?"":t.slice(-p),o=r.toLowerCase()),h.word=r,p===0)h.score=Zh.Default;else{let m=0;for(;m<f;){const v=r.charCodeAt(m);if(v===32||v===9)m+=1;else break}if(m>=p)h.score=Zh.Default;else if(typeof h.completion.filterText=="string"){let v=u(r,o,m,h.completion.filterText,h.filterTextLow,0,!1);if(!v)continue;vH(h.completion.filterText,h.textLabel)===0?h.score=v:(h.score=qPe(r,o,m,h.textLabel,h.labelLow,0),h.score[0]=v[0])}else{let v=u(r,o,m,h.textLabel,h.labelLow,0,!1);if(!v)continue;h.score=v}}h.idx=d,h.distance=this._wordDistance.distance(h.position,h.completion),a.push(h),e.push(h.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?CH(e.length-.85,e,(d,h)=>d-h):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return k1._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return k1._compareCompletionItems(e,t)}}var iZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},nw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},rZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class iw{constructor(e,t,n,r){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=n,this.shy=r}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);const r=t.getWordAtPosition(n);return!(!r||r.endColumn!==n.column||!isNaN(Number(r.word)))}}function oZe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowQuickSuggestions");return n!==void 0?!!n:!1}function sZe(i,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=t.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return n!==void 0?!!n:!1}let OU=class Ope{constructor(e,t,n,r,o,s,a){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=r,this._logService=o,this._contextKeyService=s,this._configurationService=a,this._toDispose=new Qe,this._quickSuggestDelay=10,this._triggerCharacterListener=new Qe,this._triggerQuickSuggest=new Oa,this._state=0,this._completionDisposables=new Qe,this._onDidCancel=new be,this._onDidTrigger=new be,this._onDidSuggest=new be,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new yt(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(Oh.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(d=>{this._onCursorChange(d)}));let u=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{u=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{u=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{u||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){oi(this._triggerCharacterListener),oi([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&this._quickSuggestDelay!==0||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(80)||!this._editor.hasModel()||!this._editor.getOption(108))return;const e=new Map;for(const n of Oh.all(this._editor.getModel()))for(const r of n.triggerCharacters||[]){let o=e.get(r);o||(o=new Set,o.add(HYe()),e.set(r,o)),o.add(n)}const t=n=>{if(!sZe(this._editor,this._contextKeyService,this._configurationService)||iw.shouldAutoTrigger(this._editor))return;if(!n){const s=this._editor.getPosition();n=this._editor.getModel().getLineContent(s.lineNumber).substr(0,s.column-1)}let r="";zy(n.charCodeAt(n.length-1))?Vo(n.charCodeAt(n.length-2))&&(r=n.substr(n.length-2)):r=n.charAt(n.length-1);const o=e.get(r);if(o){const s=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:r},!!this._completionModel,o,s)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(e=!1){var t;this._state!==0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)===null||t===void 0||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._state!==0&&(!this._editor.hasModel()||!Oh.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._state===2,shy:!1},!0))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._state===0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._state!==0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._state===0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){this._editor.getOption(78)!==!1&&(this._editor.getOption(105).snippetsPreventQuickSuggestions&&Ms.get(this._editor).isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._state!==0||!iw.shouldAutoTrigger(this._editor)||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(78);if(n!==!1){if(n!==!0){e.tokenizeIfCheap(t.lineNumber);const r=e.getLineTokens(t.lineNumber),o=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(n.other&&o===0||n.comments&&o===1||n.strings&&o===2))return}oZe(this._editor,this._contextKeyService,this._configurationService)&&Oh.has(e)&&this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)))}_refilterCompletionItems(){Promise.resolve().then(()=>{if(this._state===0||!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),n=new iw(e,t,this._state===2,!1);this._onNewContext(n)})}trigger(e,t=!1,n,r){var o;if(!this._editor.hasModel())return;const s=this._editor.getModel(),a=e.auto,u=new iw(s,this._editor.getPosition(),a,e.shy);this.cancel(t),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:e.shy,position:this._editor.getPosition()}),this._context=u;let d={triggerKind:(o=e.triggerKind)!==null&&o!==void 0?o:0};e.triggerCharacter&&(d={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new oa;const h=this._editor.getOption(100);let f=1;switch(h){case"top":f=0;break;case"bottom":f=2;break}const{itemKind:p,showDeprecated:m}=Ope._createSuggestFilter(this._editor),v=Of.create(this._editorWorkerService,this._editor),b=Ipe(s,this._editor.getPosition(),new r5(f,p,n,m),d,this._requestToken.token);Promise.all([b,v]).then(([L,S])=>rZe(this,void 0,void 0,function*(){var y;if((y=this._requestToken)===null||y===void 0||y.dispose(),!this._editor.hasModel())return;let E=r==null?void 0:r.clipboardText;if(!E&&L.needsClipboard&&(E=yield this._clipboardService.readText()),this._state===0)return;const A=this._editor.getModel();let N=L.items;if(r){const R=kpe(f);N=N.concat(r.items).sort(R)}const V=new iw(A,this._editor.getPosition(),a,e.shy);this._completionModel=new k1(N,this._context.column,{leadingLineContent:V.leadingLineContent,characterCountDelta:V.column-this._context.column},S,this._editor.getOption(105),this._editor.getOption(100),E),this._completionDisposables.add(L.disposable),this._onNewContext(V),this._reportDurationsTelemetry(L.durations)})).catch(gn)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;e.getOption(100)==="none"&&t.add(27);const r=e.getOption(105);return r.showMethods||t.add(0),r.showFunctions||t.add(1),r.showConstructors||t.add(2),r.showFields||t.add(3),r.showVariables||t.add(4),r.showClasses||t.add(5),r.showStructs||t.add(6),r.showInterfaces||t.add(7),r.showModules||t.add(8),r.showProperties||t.add(9),r.showEvents||t.add(10),r.showOperators||t.add(11),r.showUnits||t.add(12),r.showValues||t.add(13),r.showConstants||t.add(14),r.showEnums||t.add(15),r.showEnumMembers||t.add(16),r.showKeywords||t.add(17),r.showWords||t.add(18),r.showColors||t.add(19),r.showFiles||t.add(20),r.showReferences||t.add(21),r.showColors||t.add(22),r.showFolders||t.add(23),r.showTypeParameters||t.add(24),r.showSnippets||t.add(27),r.showUsers||t.add(25),r.showIssues||t.add(26),{itemKind:t,showDeprecated:r.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(zi(e.leadingLineContent)!==zi(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(Oh.all(this._editor.getModel()));for(let r of this._completionModel.allProvider)t.delete(r);const n=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:n,clipboardText:this._completionModel.clipboardText});return}if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&e.leadingWord.word.length!==0){const{incomplete:t}=this._completionModel,n=this._completionModel.adopt(t);this.trigger({auto:this._state===2,shy:!1,triggerKind:2},!0,t,{items:n,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){if(iw.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.auto,shy:!1},!0);return}if(this._context.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:n})}}}}};OU=iZe([nw(1,Hu),nw(2,j0),nw(3,yg),nw(4,Sg),nw(5,dn),nw(6,nr)],OU);class QB{constructor(e,t){this._disposables=new Qe,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty||!e.hasModel())return;const n=e.getSelections(),r=n.length;let o=!1;for(let a=0;a<r;a++)if(!n[a].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];const s=e.getModel();for(let a=0;a<r;a++){const u=n[a];if(s.getValueLengthInRange(u)>QB._maxSelectionLength)return;this._lastOvertyped[a]={value:s.getValueInRange(u),multiline:u.startLineNumber!==u.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(n=>{!this._empty&&!n.retrigger&&(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}QB._maxSelectionLength=51200;var aZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},fW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class ZY extends lS{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=C("ddd","{0} ({1})",this._action.label,ZY.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return(t=e.getLabel())===null||t===void 0?void 0:t.replace(/\benter\b/gi,"⏎")}}let MU=class{constructor(e,t,n,r){this._menuService=n,this._contextKeyService=r,this._menuDisposables=new Qe,this.element=Be(e,Ge(".suggest-status-bar"));const o=s=>s instanceof b0?t.createInstance(ZY,s,void 0):void 0;this._leftActions=new cg(this.element,{actionViewItemProvider:o}),this._rightActions=new cg(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(N0,this._contextKeyService),t=()=>{const n=[],r=[];for(let[o,s]of e.getActions())o==="left"?n.push(...s):r.push(...s);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(r)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};MU=aZe([fW(1,An),fW(2,bC),fW(3,dn)],MU);const lZe=Ce("symbolIcon.arrayForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),uZe=Ce("symbolIcon.booleanForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),cZe=Ce("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),dZe=Ce("symbolIcon.colorForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),hZe=Ce("symbolIcon.constantForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fZe=Ce("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),gZe=Ce("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pZe=Ce("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),mZe=Ce("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},C("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_Ze=Ce("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),vZe=Ce("symbolIcon.fileForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),bZe=Ce("symbolIcon.folderForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),CZe=Ce("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),wZe=Ce("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),yZe=Ce("symbolIcon.keyForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),SZe=Ce("symbolIcon.keywordForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),LZe=Ce("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},C("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),EZe=Ce("symbolIcon.moduleForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xZe=Ce("symbolIcon.namespaceForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),DZe=Ce("symbolIcon.nullForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),IZe=Ce("symbolIcon.numberForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),kZe=Ce("symbolIcon.objectForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),TZe=Ce("symbolIcon.operatorForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),NZe=Ce("symbolIcon.packageForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),AZe=Ce("symbolIcon.propertyForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),OZe=Ce("symbolIcon.referenceForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),MZe=Ce("symbolIcon.snippetForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),RZe=Ce("symbolIcon.stringForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),PZe=Ce("symbolIcon.structForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),FZe=Ce("symbolIcon.textForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),BZe=Ce("symbolIcon.typeParameterForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),WZe=Ce("symbolIcon.unitForeground",{dark:zt,light:zt,hc:zt},C("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),VZe=Ce("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},C("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));hr((i,e)=>{const t=i.getColor(lZe);t&&e.addRule(`${_e.symbolArray.cssSelector} { color: ${t}; }`);const n=i.getColor(uZe);n&&e.addRule(`${_e.symbolBoolean.cssSelector} { color: ${n}; }`);const r=i.getColor(cZe);r&&e.addRule(`${_e.symbolClass.cssSelector} { color: ${r}; }`);const o=i.getColor(LZe);o&&e.addRule(`${_e.symbolMethod.cssSelector} { color: ${o}; }`);const s=i.getColor(dZe);s&&e.addRule(`${_e.symbolColor.cssSelector} { color: ${s}; }`);const a=i.getColor(hZe);a&&e.addRule(`${_e.symbolConstant.cssSelector} { color: ${a}; }`);const u=i.getColor(fZe);u&&e.addRule(`${_e.symbolConstructor.cssSelector} { color: ${u}; }`);const d=i.getColor(gZe);d&&e.addRule(`
			${_e.symbolValue.cssSelector},${_e.symbolEnum.cssSelector} { color: ${d}; }`);const h=i.getColor(pZe);h&&e.addRule(`${_e.symbolEnumMember.cssSelector} { color: ${h}; }`);const f=i.getColor(mZe);f&&e.addRule(`${_e.symbolEvent.cssSelector} { color: ${f}; }`);const p=i.getColor(_Ze);p&&e.addRule(`${_e.symbolField.cssSelector} { color: ${p}; }`);const m=i.getColor(vZe);m&&e.addRule(`${_e.symbolFile.cssSelector} { color: ${m}; }`);const v=i.getColor(bZe);v&&e.addRule(`${_e.symbolFolder.cssSelector} { color: ${v}; }`);const b=i.getColor(CZe);b&&e.addRule(`${_e.symbolFunction.cssSelector} { color: ${b}; }`);const L=i.getColor(wZe);L&&e.addRule(`${_e.symbolInterface.cssSelector} { color: ${L}; }`);const S=i.getColor(yZe);S&&e.addRule(`${_e.symbolKey.cssSelector} { color: ${S}; }`);const y=i.getColor(SZe);y&&e.addRule(`${_e.symbolKeyword.cssSelector} { color: ${y}; }`);const E=i.getColor(EZe);E&&e.addRule(`${_e.symbolModule.cssSelector} { color: ${E}; }`);const A=i.getColor(xZe);A&&e.addRule(`${_e.symbolNamespace.cssSelector} { color: ${A}; }`);const N=i.getColor(DZe);N&&e.addRule(`${_e.symbolNull.cssSelector} { color: ${N}; }`);const V=i.getColor(IZe);V&&e.addRule(`${_e.symbolNumber.cssSelector} { color: ${V}; }`);const R=i.getColor(kZe);R&&e.addRule(`${_e.symbolObject.cssSelector} { color: ${R}; }`);const M=i.getColor(TZe);M&&e.addRule(`${_e.symbolOperator.cssSelector} { color: ${M}; }`);const K=i.getColor(NZe);K&&e.addRule(`${_e.symbolPackage.cssSelector} { color: ${K}; }`);const X=i.getColor(AZe);X&&e.addRule(`${_e.symbolProperty.cssSelector} { color: ${X}; }`);const $=i.getColor(OZe);$&&e.addRule(`${_e.symbolReference.cssSelector} { color: ${$}; }`);const D=i.getColor(MZe);D&&e.addRule(`${_e.symbolSnippet.cssSelector} { color: ${D}; }`);const T=i.getColor(RZe);T&&e.addRule(`${_e.symbolString.cssSelector} { color: ${T}; }`);const F=i.getColor(PZe);F&&e.addRule(`${_e.symbolStruct.cssSelector} { color: ${F}; }`);const B=i.getColor(FZe);B&&e.addRule(`${_e.symbolText.cssSelector} { color: ${B}; }`);const U=i.getColor(BZe);U&&e.addRule(`${_e.symbolTypeParameter.cssSelector} { color: ${U}; }`);const G=i.getColor(WZe);G&&e.addRule(`${_e.symbolUnit.cssSelector} { color: ${G}; }`);const Z=i.getColor(VZe);Z&&e.addRule(`${_e.symbolVariable.cssSelector} { color: ${Z}; }`)});class Mpe{constructor(){this._onDidWillResize=new be,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new be,this.onDidResize=this._onDidResize.event,this._sashListener=new Qe,this._size=new cr(0,0),this._minSize=new cr(0,0),this._maxSize=new cr(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new Hs(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Hs(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Hs(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:b3.North}),this._southSash=new Hs(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:b3.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(Rt.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(Rt.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(r=>{e&&(n=r.currentX-r.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(r=>{e&&(n=-(r.currentX-r.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(r=>{e&&(t=-(r.currentY-r.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(r=>{e&&(t=r.currentY-r.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(Rt.any(this._eastSash.onDidReset,this._westSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(Rt.any(this._northSash.onDidReset,this._southSash.onDidReset)(r=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,r){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=r?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:r}=this._minSize,{height:o,width:s}=this._maxSize;e=Math.max(n,Math.min(o,e)),t=Math.max(r,Math.min(s,t));const a=new cr(t,e);cr.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}var HZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},$Ze=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};function XY(i){return!!i&&!!(i.completion.documentation||i.completion.detail&&i.completion.detail!==i.completion.label)}let RU=class{constructor(e,t){this._editor=e,this._onDidClose=new be,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new be,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new Qe,this._renderDisposeable=new Qe,this._borderWidth=1,this._size=new cr(330,0),this.domNode=Ge(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Bp,{editor:e}),this._body=Ge(".body"),this._scrollbar=new pM(this._body,{}),Be(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Be(this._body,Ge(".header")),this._close=Be(this._header,Ge("span"+_e.close.cssSelector)),this._close.title=C("details.close","Close"),this._type=Be(this._header,Ge("p.type")),this._docs=Be(this._body,Ge("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(43)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(43),n=t.getMassagedFontFamily(qc?js.fontFamily:null),r=e.get(106)||t.fontSize,o=e.get(107)||t.lineHeight,s=t.fontWeight,a=`${r}px`,u=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/r}`,this.domNode.style.fontWeight=s,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=u,this._close.style.width=u}getLayoutInfo(){const e=this._editor.getOption(107)||this._editor.getOption(43).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=C("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var n,r;this._renderDisposeable.clear();let{detail:o,documentation:s}=e.completion;if(t){let a="";a+=`score: ${e.score[0]}
`,a+=`prefix: ${(n=e.word)!==null&&n!==void 0?n:"(no prefix)"}
`,a+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,a+=`distance: ${e.distance} (localityBonus-setting)
`,a+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,a+=`commit_chars: ${(r=e.completion.commitCharacters)===null||r===void 0?void 0:r.join("")}
`,s=new Rp().appendCodeblock("empty",a),o=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!XY(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),o){const a=o.length>1e5?`${o.substr(0,1e5)}…`:o;this._type.textContent=a,this._type.title=a,Eu(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(a))}else $o(this._type),this._type.title="",za(this._type),this.domNode.classList.add("no-type");if($o(this._docs),typeof s=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),$o(this._docs);const a=this._markdownRenderer.render(s);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=a=>{a.preventDefault(),a.stopPropagation()},this._close.onclick=a=>{a.preventDefault(),a.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const n=new cr(e,t);cr.equals(n,this._size)||(this._size=n,gEe(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};RU=HZe([$Ze(1,An)],RU);class zZe{constructor(e,t){this.widget=e,this._editor=t,this._disposables=new Qe,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Mpe,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,r,o=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&r){this.widget.layout(a.dimension.width,a.dimension.height);let u=!1;a.west&&(s=r.width-a.dimension.width,u=!0),a.north&&(o=r.height-a.dimension.height,u=!0),u&&this._applyTopLeft({top:n.top+o,left:n.left+s})}a.done&&(n=void 0,r=void 0,o=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var a;this._anchorBox&&this._placeAtAnchor(this._anchorBox,(a=this._userSize)!==null&&a!==void 0?a:this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var n;const r=e.getBoundingClientRect();this._anchorBox=r,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,(n=this._userSize)!==null&&n!==void 0?n:this.widget.size,t)}_placeAtAnchor(e,t,n){var r;const o=c8(document.body),s=this.widget.getLayoutInfo(),a=new cr(220,2*s.lineHeight),u=e.top,d=function(){const E=o.width-(e.left+e.width+s.borderWidth+s.horizontalPadding),A=-s.borderWidth+e.left+e.width,N=new cr(E,o.height-e.top-s.borderHeight-s.verticalPadding),V=N.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:u,left:A,fit:E-t.width,maxSizeTop:N,maxSizeBottom:V,minSize:a.with(Math.min(E,a.width))}}(),h=function(){const E=e.left-s.borderWidth-s.horizontalPadding,A=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),N=new cr(E,o.height-e.top-s.borderHeight-s.verticalPadding),V=N.with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding);return{top:u,left:A,fit:E-t.width,maxSizeTop:N,maxSizeBottom:V,minSize:a.with(Math.min(E,a.width))}}(),f=function(){const E=e.left,A=-s.borderWidth+e.top+e.height,N=new cr(e.width-s.borderHeight,o.height-e.top-e.height-s.verticalPadding);return{top:A,left:E,fit:N.height-t.height,maxSizeBottom:N,maxSizeTop:N,minSize:a.with(N.width)}}(),p=[d,h,f],m=(r=p.find(E=>E.fit>=0))!==null&&r!==void 0?r:p.sort((E,A)=>A.fit-E.fit)[0],v=e.top+e.height-s.borderHeight;let b,L=t.height;const S=Math.max(m.maxSizeTop.height,m.maxSizeBottom.height);L>S&&(L=S);let y;n?L<=m.maxSizeTop.height?(b=!0,y=m.maxSizeTop):(b=!1,y=m.maxSizeBottom):L<=m.maxSizeBottom.height?(b=!1,y=m.maxSizeBottom):(b=!0,y=m.maxSizeTop),this._applyTopLeft({left:m.left,top:b?m.top:v-L}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!b,m===d,b,m!==d),this._resizable.minSize=m.minSize,this._resizable.maxSize=y,this._resizable.layout(L,Math.min(y.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=`${this._topLeft.left}px`,this.getDomNode().style.top=`${this._topLeft.top}px`}}var fp;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(fp||(fp={}));function pP(i,e,t,n){const r=n===fp.ROOT_FOLDER?["rootfolder-icon"]:n===fp.FOLDER?["folder-icon"]:["file-icon"];if(t){let o;if(t.scheme===kn.data?o=w0.parseMetaData(t).get(w0.META_DATA_LABEL):o=Eie(xce(t).toLowerCase()),n===fp.FOLDER)r.push(`${o}-name-folder-icon`);else{if(o){if(r.push(`${o}-name-file-icon`),o.length<=255){const a=o.split(".");for(let u=1;u<a.length;u++)r.push(`${a.slice(u).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}const s=UZe(i,e,t);s&&r.push(`${Eie(s)}-lang-file-icon`)}}return r}function UZe(i,e,t){if(!t)return null;let n=null;if(t.scheme===kn.data){const o=w0.parseMetaData(t).get(w0.META_DATA_MIME);o&&(n=e.getModeId(o))}else{const r=i.getModel(t);r&&(n=r.getLanguageId())}return n&&n!==jS?n:e.getModeIdByFilepathOrFirstLine(t)}function Eie(i){return i.replace(/[\11\12\14\15\40]/g,"/")}var jZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},WN;function Rpe(i){return`suggest-aria-id:${i}`}const KZe=ds("suggest-more-info",_e.chevronRight,C("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),GZe=new(WN=class x4{extract(e,t){if(e.textLabel.match(x4._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(x4._regexStrict))return t[0]=e.completion.detail,!0;if(typeof e.completion.documentation=="string"){const n=x4._regexRelaxed.exec(e.completion.documentation);if(n&&(n.index===0||n.index+n[0].length===e.completion.documentation.length))return t[0]=n[0],!0}return!1}},WN._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,WN._regexStrict=new RegExp(`^${WN._regexRelaxed.source}$`,"i"),WN);let PU=class{constructor(e,t,n,r){this._editor=e,this._modelService=t,this._modeService=n,this._themeService=r,this._onDidToggleDetails=new be,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new Qe,t.root=e,t.root.classList.add("show-file-icons"),t.icon=Be(e,Ge(".icon")),t.colorspan=Be(t.icon,Ge("span.colorspan"));const n=Be(e,Ge(".contents")),r=Be(n,Ge(".main"));t.iconContainer=Be(r,Ge(".icon-label.codicon")),t.left=Be(r,Ge("span.left")),t.right=Be(r,Ge("span.right")),t.iconLabel=new $3(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=Be(t.left,Ge("span.signature-label")),t.qualifierLabel=Be(t.left,Ge("span.qualifier-label")),t.detailsLabel=Be(t.right,Ge("span.details-label")),t.readMore=Be(t.right,Ge("span.readMore"+pr.asCSSSelector(KZe))),t.readMore.title=C("readMore","Read More");const o=()=>{const s=this._editor.getOptions(),a=s.get(43),u=a.getMassagedFontFamily(qc?js.fontFamily:null),d=a.fontFeatureSettings,h=s.get(106)||a.fontSize,f=s.get(107)||a.lineHeight,p=a.fontWeight,m=`${h}px`,v=`${f}px`;t.root.style.fontSize=m,t.root.style.fontWeight=p,r.style.fontFamily=u,r.style.fontFeatureSettings=d,r.style.lineHeight=v,t.icon.style.height=v,t.icon.style.width=v,t.readMore.style.height=v,t.readMore.style.width=v};return o(),t.disposables.add(this._editor.onDidChangeConfiguration(s=>{(s.hasChanged(43)||s.hasChanged(106)||s.hasChanged(107))&&o()})),t}renderElement(e,t,n){const{completion:r}=e;n.root.id=Rpe(t),n.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:oB(e.score)};let s=[];if(r.kind===19&&GZe.extract(e,s))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=s[0];else if(r.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=pP(this._modelService,this._modeService,sn.from({scheme:"fake",path:e.textLabel}),fp.FILE),u=pP(this._modelService,this._modeService,sn.from({scheme:"fake",path:r.detail}),fp.FILE);o.extraClasses=a.length>u.length?a:u}else r.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=Rue([pP(this._modelService,this._modeService,sn.from({scheme:"fake",path:e.textLabel}),fp.FOLDER),pP(this._modelService,this._modeService,sn.from({scheme:"fake",path:r.detail}),fp.FOLDER)])):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...ZTe(r.kind).split(" ")));r.tags&&r.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),typeof r.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=pW(r.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=pW(r.label.detail||""),n.detailsLabel.textContent=pW(r.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(105).showInlineDetails?Eu(n.detailsLabel):za(n.detailsLabel),XY(e)?(n.right.classList.add("can-expand-details"),Eu(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),za(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};PU=jZe([gW(1,Io),gW(2,Fs),gW(3,Er)],PU);function pW(i){return i.replace(/\r\n|\r|\n/g,"")}var qZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},mP=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},YZe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const ZZe=Ce("editorSuggestWidget.selectedBackground",{dark:e4,light:e4,hc:e4},C("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));class XZe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof Kb}`}restore(){var e;const t=(e=this._service.get(this._key,0))!==null&&e!==void 0?e:"";try{const n=JSON.parse(t);if(cr.is(n))return cr.lift(n)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let LO=class FU{constructor(e,t,n,r,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new Oa,this._disposables=new Qe,this._onDidSelect=new be,this._onDidFocus=new be,this._onDidHide=new be,this._onDidShow=new be,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new be,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Mpe,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new QZe(this,e),this._persistedSize=new XZe(t,e);class s{constructor(m,v,b=!1,L=!1){this.persistedSize=m,this.currentSize=v,this.persistHeight=b,this.persistWidth=L}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(p=>{var m,v,b,L;if(this._resize(p.dimension.width,p.dimension.height),a&&(a.persistHeight=a.persistHeight||!!p.north||!!p.south,a.persistWidth=a.persistWidth||!!p.east||!!p.west),!!p.done){if(a){const{itemHeight:S,defaultSize:y}=this.getLayoutInfo(),E=Math.round(S/2);let{width:A,height:N}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-N)<=E)&&(N=(v=(m=a.persistedSize)===null||m===void 0?void 0:m.height)!==null&&v!==void 0?v:y.height),(!a.persistWidth||Math.abs(a.currentSize.width-A)<=E)&&(A=(L=(b=a.persistedSize)===null||b===void 0?void 0:b.width)!==null&&L!==void 0?L:y.width),this._persistedSize.store(new cr(A,N))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Be(this.element.domNode,Ge(".message")),this._listElement=Be(this.element.domNode,Ge(".tree"));const u=o.createInstance(RU,this.editor);u.onDidClose(this.toggleDetails,this,this._disposables),this._details=new zZe(u,this.editor);const d=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(105).showIcons);d();const h=o.createInstance(PU,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails(()=>this.toggleDetails())),this._list=new xg("SuggestWidget",this._listElement,{getHeight:p=>this.getLayoutInfo().itemHeight,getTemplateId:p=>"suggestion"},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:p=>{if(p.isResolved&&this._isDetailsVisible()){const{documentation:m,detail:v}=p.completion,b=ec("{0}{1}",v||"",m?typeof m=="string"?m:m.value:"");return C("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",p.textLabel,b)}else return p.textLabel},getWidgetAriaLabel:()=>C("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=o.createInstance(MU,this.element.domNode);const f=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(105).showStatusBar);f(),this._disposables.add(Fb(this._list,r,{listInactiveFocusBackground:ZZe,listInactiveFocusOutline:Ja})),this._disposables.add(r.onDidColorThemeChange(p=>this._onThemeChange(p))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onTap(p=>this._onListMouseDownOrTap(p))),this._disposables.add(this._list.onDidChangeSelection(p=>this._onListSelection(p))),this._disposables.add(this._list.onDidChangeFocus(p=>this._onListFocus(p))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(p=>{p.hasChanged(105)&&(f(),d())})),this._ctxSuggestWidgetVisible=Un.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=Un.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=Un.MultipleSuggestions.bindTo(n),this._disposables.add(ts(this._details.widget.domNode,"keydown",p=>{this._onDetailsKeydown.fire(p)})),this._disposables.add(this.editor.onMouseDown(p=>this._onEditorMouseDown(p)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=e.type==="hc"?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0});return}if(!this._completionModel)return;const n=e.elements[0],r=e.indexes[0];n!==this._focusedItem&&((t=this._currentSuggestionDetails)===null||t===void 0||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(r),this._currentSuggestionDetails=cs(o=>YZe(this,void 0,void 0,function*(){const s=wb(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);o.onCancellationRequested(()=>s.dispose());const a=yield n.resolve(o);return s.dispose(),a})),this._currentSuggestionDetails.then(()=>{r>=this._list.length||n!==this._list.element(r)||(this._ignoreFocusEvents=!0,this._list.splice(r,1,[n]),this._list.setFocus([r]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:Rpe(r)}))}).catch(gn)),this._onDidFocus.fire({item:n,index:r,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:za(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=FU.LOADING_MESSAGE,za(this._listElement,this._status.element),Eu(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=FU.NO_SUGGESTIONS_MESSAGE,za(this._listElement,this._status.element),Eu(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:za(this._messageElement),Eu(this._listElement,this._status.element),this._show();break;case 4:za(this._messageElement),Eu(this._listElement,this._status.element),this._show();break;case 5:za(this._messageElement),Eu(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=wb(()=>this._setState(1),t)))}showSuggestions(e,t,n,r){var o,s;if(this._contentWidget.setPosition(this.editor.getPosition()),(o=this._loadingTimeout)===null||o===void 0||o.dispose(),(s=this._currentSuggestionDetails)===null||s===void 0||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const a=this._completionModel.items.length,u=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),u){this._setState(r?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(XY(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;(e=this._loadingTimeout)===null||e===void 0||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),n=Math.ceil(this.getLayoutInfo().itemHeight*4.3);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&this._details.show(),this._positionDetails())}_layout(e){var t,n,r;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const o=c8(document.body),s=this.getLayoutInfo();e||(e=s.defaultSize);let a=e.height,u=e.width;if(this._status.element.style.lineHeight=`${s.itemHeight}px`,this._state===2||this._state===1)a=s.itemHeight+s.borderHeight,u=s.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new cr(u,a),this._contentWidget.setPreference(2);else{const d=o.width-s.borderHeight-2*s.horizontalPadding;u>d&&(u=d);const h=this._completionModel?this._completionModel.stats.pLabelLen*s.typicalHalfwidthCharacterWidth:u,f=s.statusBarHeight+this._list.contentHeight+s.borderHeight,p=s.itemHeight+s.statusBarHeight,m=Us(this.editor.getDomNode()),v=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),b=m.top+v.top+v.height,L=Math.min(o.height-b-s.verticalPadding,f),S=m.top+v.top-s.verticalPadding,y=Math.min(S,f);let E=Math.min(Math.max(y,L)+s.borderHeight,f);a===((t=this._cappedHeight)===null||t===void 0?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<p&&(a=p),a>E&&(a=E);const A=150;a>L||this._forceRenderingAbove&&S>A?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),E=y):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),E=L),this.element.preferredSize=new cr(h,s.defaultSize.height),this.element.maxSize=new cr(d,E),this.element.minSize=new cr(220,p),this._cappedHeight=a===f?{wanted:(r=(n=this._cappedHeight)===null||n===void 0?void 0:n.wanted)!==null&&r!==void 0?r:e.height,capped:a}:void 0}this._resize(u,a)}_resize(e,t){const{width:n,height:r}=this.element.maxSize;e=Math.min(n,e),t=Math.min(r,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())===null||e===void 0?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(43),t=Pc(this.editor.getOption(107)||e.lineHeight,8,1e3),n=!this.editor.getOption(105).showStatusBar||this._state===2||this._state===1?0:t,r=this._details.widget.borderWidth,o=2*r;return{itemHeight:t,statusBarHeight:n,borderWidth:r,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new cr(430,n+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};LO.LOADING_MESSAGE=C("suggestWidget.loading","Loading...");LO.NO_SUGGESTIONS_MESSAGE=C("suggestWidget.noSuggestions","No suggestions.");LO=qZe([mP(1,Ig),mP(2,dn),mP(3,Er),mP(4,An)],LO);class QZe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:r}=this._widget.getLayoutInfo();return new cr(t+2*n+r,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var JZe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},rw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class eXe{constructor(e,t){if(this._model=e,this._position=t,e.getLineMaxColumn(t.lineNumber)!==t.column){const r=e.getOffsetAt(t),o=e.getPositionAt(r+1);this._marker=e.deltaDecorations([],[{range:Q.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Zc=class Ppe{constructor(e,t,n,r,o,s,a){this._memoryService=t,this._commandService=n,this._contextKeyService=r,this._instantiationService=o,this._logService=s,this._telemetryService=a,this._lineSuffix=new Aa,this._toDispose=new Qe,this._selectors=new tXe(f=>f.priority),this._telemetryGate=0,this.editor=e,this.model=o.createInstance(OU,this.editor);const u=Un.InsertMode.bindTo(r);u.set(e.getOption(105).insertMode),this.model.onDidTrigger(()=>u.set(e.getOption(105).insertMode)),this.widget=this._toDispose.add(new ny(()=>{const f=this._instantiationService.createInstance(LO,this.editor);this._toDispose.add(f),this._toDispose.add(f.onDidSelect(L=>this._insertSuggestion(L,0),this));const p=new eZe(this.editor,f,L=>this._insertSuggestion(L,2));this._toDispose.add(p),this._toDispose.add(this.model.onDidSuggest(L=>{L.completionModel.items.length===0&&p.reset()}));const m=Un.MakesTextEdit.bindTo(this._contextKeyService),v=Un.HasInsertAndReplaceRange.bindTo(this._contextKeyService),b=Un.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Kn(()=>{m.reset(),v.reset(),b.reset()})),this._toDispose.add(f.onDidFocus(({item:L})=>{const S=this.editor.getPosition(),y=L.editStart.column,E=S.column;let A=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!L.completion.additionalTextEdits&&!(L.completion.insertTextRules&4)&&E-y===L.completion.insertText.length&&(A=this.editor.getModel().getValueInRange({startLineNumber:S.lineNumber,startColumn:y,endLineNumber:S.lineNumber,endColumn:E})!==L.completion.insertText),m.set(A),v.set(!Le.equals(L.editInsertEnd,L.editReplaceEnd)),b.set(!!L.provider.resolveCompletionItem||!!L.completion.documentation||L.completion.detail!==L.completion.label)})),this._toDispose.add(f.onDetailsKeyDown(L=>{if(L.toKeybinding().equals(new Cb(!0,!1,!1,!1,33))||qn&&L.toKeybinding().equals(new Cb(!1,!1,!1,!0,33))){L.stopPropagation();return}L.toKeybinding().isModifierKey()||this.editor.focus()})),f})),this._overtypingCapturer=this._toDispose.add(new ny(()=>this._toDispose.add(new QB(this.editor,this.model)))),this._alternatives=this._toDispose.add(new ny(()=>this._toDispose.add(new qb(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(SO,e)),this._toDispose.add(this.model.onDidTrigger(f=>{this.widget.value.showTriggered(f.auto,f.shy?250:50),this._lineSuffix.value=new eXe(this.editor.getModel(),f.position)})),this._toDispose.add(this.model.onDidSuggest(f=>{if(!f.shy){let p=-1;for(const m of this._selectors.itemsOrderedByPriorityDesc)if(p=m.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items),p!==-1)break;p===-1&&(p=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),f.completionModel.items)),this.widget.value.showSuggestions(f.completionModel,p,f.isFrozen,f.auto)}})),this._toDispose.add(this.model.onDidCancel(f=>{f.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let d=Un.AcceptSuggestionsOnEnter.bindTo(r),h=()=>{const f=this.editor.getOption(1);d.set(f==="on"||f==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>h())),h()}static get(e){return e.getContribution(Ppe.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=this.editor.getModel(),r=n.getAlternativeVersionId(),{item:o}=e,s=[],a=new oa;t&1||this.editor.pushUndoStop();const u=this.getOverwriteInfo(o,!!(t&8));if(this._memoryService.memorize(n,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){const h=L0.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map(f=>jr.replace(Q.lift(f.range),f.text))),h.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){const h=new rg(!0);let f;const p=n.onDidChangeContent(L=>{if(L.isFlush){a.cancel(),p.dispose();return}for(let S of L.changes){const y=Q.getEndPosition(S.range);(!f||Le.isBefore(y,f))&&(f=y)}});let m=t;t|=2;let v=!1,b=this.editor.onWillType(()=>{b.dispose(),v=!0,m&2||this.editor.pushUndoStop()});s.push(o.resolve(a.token).then(()=>{if(!o.completion.additionalTextEdits||a.token.isCancellationRequested||f&&o.completion.additionalTextEdits.some(S=>Le.isBefore(f,Q.getStartPosition(S.range))))return!1;v&&this.editor.pushUndoStop();const L=L0.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map(S=>jr.replace(Q.lift(S.range),S.text))),L.restoreRelativeVerticalPositionOfCursor(this.editor),(v||!(m&2))&&this.editor.pushUndoStop(),!0}).then(L=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",h.elapsed(),L),p.dispose(),b.dispose()}))}let{insertText:d}=o.completion;o.completion.insertTextRules&4||(d=YB.escape(d)),Ms.get(this.editor).insert(d,{overwriteBefore:u.overwriteBefore,overwriteAfter:u.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(o.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),o.completion.command?o.completion.command.id===VM.id?this.model.trigger({auto:!0,shy:!1},!0):(s.push(this._commandService.executeCommand(o.completion.command.id,...o.completion.command.arguments?[...o.completion.command.arguments]:[]).catch(gn)),this.model.cancel()):this.model.cancel(),t&4&&this._alternatives.value.set(e,h=>{for(a.cancel();n.canUndo();){r!==n.getAlternativeVersionId()&&n.undo(),this._insertSuggestion(h,3|(t&8?8:0));break}}),this._alertCompletionItem(o),Promise.all(s).finally(()=>{this._reportSuggestionAcceptedTelemetry(n,e),this.model.clear(),a.dispose()})}_reportSuggestionAcceptedTelemetry(e,t){var n;if(this._telemetryGate++%100!==0)return;const r=((n=t.item.provider._debugDisplayName)!==null&&n!==void 0?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:r,basenameHash:Oce(gc(e.uri)).toString(16),languageId:e.getLanguageId(),fileExtension:jke(e.uri)})}getOverwriteInfo(e,t){Gi(this.editor.hasModel());let n=this.editor.getOption(105).insertMode==="replace";t&&(n=!n);const r=e.position.column-e.editStart.column,o=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:r+s,overwriteAfter:o+a}}_alertCompletionItem(e){if(vl(e.completion.additionalTextEdits)){let t=C("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);ks(t)}}triggerSuggest(e,t){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,shy:!1},!1,e),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},r=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const s=this.editor.getPosition(),a=o.editStart.column,u=s.column;return u-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:u})!==o.completion.insertText};Rt.once(this.model.onDidTrigger)(o=>{let s=[];Rt.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{oi(s),n()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(oi(s),a.items.length===0){n();return}const u=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),d=a.items[u];if(!r(d)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:u,item:d,model:a},7)},void 0,s)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let r=0;e&&(r|=4),t&&(r|=8),this._insertSuggestion(n,r)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Zc.ID="editor.contrib.suggestController";Zc=JZe([rw(1,Npe),rw(2,kr),rw(3,dn),rw(4,An),rw(5,Sg),rw(6,yg)],Zc);class tXe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class VM extends Et{constructor(){super({id:VM.id,label:C("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:_t.and(de.writable,de.hasCompletionItemProvider),kbOpts:{kbExpr:de.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const r=Zc.get(t);if(!r)return;let o;n&&typeof n=="object"&&n.auto===!0&&(o=!0),r.triggerSuggest(void 0,o)}}VM.id="editor.action.triggerSuggest";Ti(Zc.ID,Zc);it(VM);const Sc=100+90,Al=Ps.bindToContribution(Zc.get);nt(new Al({id:"acceptSelectedSuggestion",precondition:Un.Visible,handler(i){i.acceptSelectedSuggestion(!0,!1)}}));Os.registerKeybindingRule({id:"acceptSelectedSuggestion",when:_t.and(Un.Visible,de.textInputFocus),primary:2,weight:Sc});Os.registerKeybindingRule({id:"acceptSelectedSuggestion",when:_t.and(Un.Visible,de.textInputFocus,Un.AcceptSuggestionsOnEnter,Un.MakesTextEdit),primary:3,weight:Sc});ia.appendMenuItem(N0,{command:{id:"acceptSelectedSuggestion",title:C("accept.insert","Insert")},group:"left",order:1,when:Un.HasInsertAndReplaceRange.toNegated()});ia.appendMenuItem(N0,{command:{id:"acceptSelectedSuggestion",title:C("accept.insert","Insert")},group:"left",order:1,when:_t.and(Un.HasInsertAndReplaceRange,Un.InsertMode.isEqualTo("insert"))});ia.appendMenuItem(N0,{command:{id:"acceptSelectedSuggestion",title:C("accept.replace","Replace")},group:"left",order:1,when:_t.and(Un.HasInsertAndReplaceRange,Un.InsertMode.isEqualTo("replace"))});nt(new Al({id:"acceptAlternativeSelectedSuggestion",precondition:_t.and(Un.Visible,de.textInputFocus),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:1027,secondary:[1026]},handler(i){i.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:N0,group:"left",order:2,when:_t.and(Un.HasInsertAndReplaceRange,Un.InsertMode.isEqualTo("insert")),title:C("accept.replace","Replace")},{menuId:N0,group:"left",order:2,when:_t.and(Un.HasInsertAndReplaceRange,Un.InsertMode.isEqualTo("replace")),title:C("accept.insert","Insert")}]}));Qn.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");nt(new Al({id:"hideSuggestWidget",precondition:Un.Visible,handler:i=>i.cancelSuggestWidget(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:9,secondary:[1033]}}));nt(new Al({id:"selectNextSuggestion",precondition:_t.and(Un.Visible,Un.MultipleSuggestions),handler:i=>i.selectNextSuggestion(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));nt(new Al({id:"selectNextPageSuggestion",precondition:_t.and(Un.Visible,Un.MultipleSuggestions),handler:i=>i.selectNextPageSuggestion(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:12,secondary:[2060]}}));nt(new Al({id:"selectLastSuggestion",precondition:_t.and(Un.Visible,Un.MultipleSuggestions),handler:i=>i.selectLastSuggestion()}));nt(new Al({id:"selectPrevSuggestion",precondition:_t.and(Un.Visible,Un.MultipleSuggestions),handler:i=>i.selectPrevSuggestion(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));nt(new Al({id:"selectPrevPageSuggestion",precondition:_t.and(Un.Visible,Un.MultipleSuggestions),handler:i=>i.selectPrevPageSuggestion(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:11,secondary:[2059]}}));nt(new Al({id:"selectFirstSuggestion",precondition:_t.and(Un.Visible,Un.MultipleSuggestions),handler:i=>i.selectFirstSuggestion()}));nt(new Al({id:"toggleSuggestionDetails",precondition:Un.Visible,handler:i=>i.toggleSuggestionDetails(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:N0,group:"right",order:1,when:_t.and(Un.DetailsVisible,Un.CanResolve),title:C("detail.more","show less")},{menuId:N0,group:"right",order:1,when:_t.and(Un.DetailsVisible.toNegated(),Un.CanResolve),title:C("detail.less","show more")}]}));nt(new Al({id:"toggleExplainMode",precondition:Un.Visible,handler:i=>i.toggleExplainMode(),kbOpts:{weight:100,primary:2133}}));nt(new Al({id:"toggleSuggestionFocus",precondition:Un.Visible,handler:i=>i.toggleSuggestionFocus(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:2570,mac:{primary:778}}}));nt(new Al({id:"insertBestCompletion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),SO.AtEnd,Un.Visible.toNegated(),qb.OtherSuggestions.toNegated(),Ms.InSnippetMode.toNegated()),handler:(i,e)=>{i.triggerSuggestAndAcceptBest(Ga(e)?Object.assign({fallback:"tab"},e):{fallback:"tab"})},kbOpts:{weight:Sc,primary:2}}));nt(new Al({id:"insertNextSuggestion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),qb.OtherSuggestions,Un.Visible.toNegated(),Ms.InSnippetMode.toNegated()),handler:i=>i.acceptNextSuggestion(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:2}}));nt(new Al({id:"insertPrevSuggestion",precondition:_t.and(de.textInputFocus,_t.equals("config.editor.tabCompletion","on"),qb.OtherSuggestions,Un.Visible.toNegated(),Ms.InSnippetMode.toNegated()),handler:i=>i.acceptPrevSuggestion(),kbOpts:{weight:Sc,kbExpr:de.textInputFocus,primary:1026}}));it(class extends Et{constructor(){super({id:"editor.action.resetSuggestSize",label:C("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(i,e){Zc.get(e).resetWidgetSize()}});function nXe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function iXe(i,e){return(t,n)=>e(i(t),i(n))}function rXe(){return(i,e)=>i-e}function oXe(i,e){let t;for(const n of i)(t===void 0||e(n,t)>0)&&(t=n);return t}class sXe extends Oe{constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this.setInactiveDelayed=this._register(new er(()=>{this.isSuggestWidgetVisible||this._isActive&&(this._isActive=!1,this.onDidChangeEmitter.fire())},100)),this._register(e.onKeyDown(r=>{r.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(r=>{r.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const n=Zc.get(this.editor);if(n){this._register(n.registerSelector({priority:100,select:(s,a,u)=>{const d=this.editor.getModel(),h=i5(d,this.suggestControllerPreselector());if(!h)return-1;const f=Le.lift(a),p=u.map((v,b)=>{const L=xie(n,f,v,this.isShiftKeyPressed),S=i5(d,L==null?void 0:L.normalizedInlineCompletion);if(!S)return;const y=aXe(h.range,S.range)&&h.text.startsWith(S.text);return{index:b,valid:y,prefixLength:S.text.length,suggestItem:v}}).filter(v=>v&&v.valid),m=oXe(p,iXe(v=>v.prefixLength,rXe()));return m?m.index:-1}}));let r=!1;const o=()=>{r||(r=!0,this._register(n.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(n.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.setInactiveDelayed.schedule(),this.update(this._isActive)})),this._register(n.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(Rt.once(n.model.onDidTrigger)(s=>{o()}))}this.update(this._isActive)}get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}update(e){const t=this.getSuggestItemInfo();let n=!1;lXe(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=Zc.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();if(t)return xie(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Zc.get(this.editor);e&&e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Zc.get(this.editor);e&&e.forceRenderingAbove()}}function aXe(i,e){return e.startLineNumber===i.startLineNumber&&e.startColumn===i.startColumn&&(e.endLineNumber<i.endLineNumber||e.endLineNumber===i.endLineNumber&&e.endColumn<=i.endColumn)}function lXe(i,e){return i===e?!0:!i||!e?!1:i.completionItemKind===e.completionItemKind&&i.isSnippetText===e.isSnippetText&&wYe(i.normalizedInlineCompletion,e.normalizedInlineCompletion)}function xie(i,e,t,n){if(Array.isArray(t.completion.additionalTextEdits)&&t.completion.additionalTextEdits.length>0)return{completionItemKind:t.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:Q.fromPositions(e,e),text:""}};let{insertText:r}=t.completion,o=!1;if(t.completion.insertTextRules&4){const a=new YB().parse(r),u=i.editor.getModel();if(a.children.length>100)return;Df.adjustWhitespace(u,e,a,!0,!0),r=a.toString(),o=!0}const s=i.getOverwriteInfo(t,n);return{isSnippetText:o,completionItemKind:t.completion.kind,normalizedInlineCompletion:{text:r,range:Q.fromPositions(e.delta(0,-s.overwriteBefore),e.delta(0,Math.max(s.overwriteAfter,0)))}}}var Die=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class uXe extends Spe{constructor(e,t){super(e),this.cache=t,this.suggestionInlineCompletionSource=this._register(new sXe(this.editor,()=>{var n,r;return(r=(n=this.cache.value)===null||n===void 0?void 0:n.completions[0])===null||r===void 0?void 0:r.toLiveInlineCompletion()})),this.updateOperation=this._register(new Aa),this.updateCacheSoon=this._register(new er(()=>this.updateCache(),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange(()=>{this.updateCacheSoon.schedule(),this.suggestionInlineCompletionSource.state||(this.minReservedLineCount=0);const r=this.ghostText;r&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,cXe(r.parts.map(o=>o.lines.length-1)))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()})),this._register(this.cache.onDidChange(()=>{this.onDidChangeEmitter.fire()})),this._register(this.editor.onDidChangeCursorPosition(n=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()})),this._register(Kn(()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove()))}get isActive(){return this.suggestionInlineCompletionSource.state!==void 0}isSuggestionPreviewEnabled(){return this.editor.getOption(105).preview}updateCache(){return Die(this,void 0,void 0,function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.text,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},n=this.editor.getPosition(),r=cs(s=>Die(this,void 0,void 0,function*(){let a;try{a=yield xpe(n,this.editor.getModel(),{triggerKind:Zu.Automatic,selectedSuggestionInfo:t},s)}catch(u){gn(u);return}s.isCancellationRequested||(this.cache.setValue(this.editor,a,Zu.Automatic),this.onDidChangeEmitter.fire())})),o=new Epe(r,Zu.Automatic);this.updateOperation.value=o,yield r,this.updateOperation.value===o&&this.updateOperation.clear()})}get ghostText(){var e,t,n;const r=this.isSuggestionPreviewEnabled(),o=i5(this.editor.getModel(),(t=(e=this.cache.value)===null||e===void 0?void 0:e.completions[0])===null||t===void 0?void 0:t.toLiveInlineCompletion()),s=this.suggestionInlineCompletionSource.state,a=i5(this.editor.getModel(),(n=s==null?void 0:s.selectedItem)===null||n===void 0?void 0:n.normalizedInlineCompletion),u=o&&a&&o.text.startsWith(a.text)&&o.range.equalsRange(a.range);if(!r&&!u)return;const d=u?o:a||o,h=u?d.text.length-a.text.length:0;return this.toGhostText(d,h)}toGhostText(e,t){const n=this.editor.getOptions().get(105).previewMode;return e?Lpe(e,this.editor.getModel(),n,this.editor.getPosition(),t)||new ype(e.range.endLineNumber,[],this.minReservedLineCount):void 0}}function cXe(i){return i.reduce((e,t)=>e+t,0)}var dXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},hXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},fXe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class gXe extends Oe{constructor(){super(...arguments),this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new Aa)}get targetModel(){var e;return(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object}setTargetModel(e){var t;((t=this.currentModelRef.value)===null||t===void 0?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?nXe(e,e.onDidChange(()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()})):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=(t=(e=this.currentModelRef.value)===null||e===void 0?void 0:e.object)===null||t===void 0?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;(t=this.targetModel)===null||t===void 0||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let BU=class extends gXe{constructor(e,t){super(),this.editor=e,this.commandService=t,this.sharedCache=this._register(new pXe),this.suggestWidgetAdapterModel=this._register(new uXe(this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(new TU(this.editor,this.sharedCache,this.commandService)),this._register(this.suggestWidgetAdapterModel.onDidChange(()=>{this.updateModel()})),this.updateModel()}get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const n=(t=this.activeInlineCompletionsModel)===null||t===void 0?void 0:t.ghostText;return n?n.parts.some(r=>e.containsPosition(new Le(n.lineNumber,r.column))):!1}triggerInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.trigger(Zu.Explicit)}commitInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.commitCurrentSuggestion()}hideInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.hide()}showNextInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showNext()}showPreviousInlineCompletion(){var e;(e=this.activeInlineCompletionsModel)===null||e===void 0||e.showPrevious()}hasMultipleInlineCompletions(){var e;return fXe(this,void 0,void 0,function*(){const t=yield(e=this.activeInlineCompletionsModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};BU=dXe([hXe(1,kr)],BU);class pXe extends Oe{constructor(){super(...arguments),this.onDidChangeEmitter=new be,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new Aa)}get value(){return this.cache.value}setValue(e,t,n){this.cache.value=new DYe(e,t,()=>this.onDidChangeEmitter.fire(),n)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var mXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Iie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},mW;const kie=(mW=window.trustedTypes)===null||mW===void 0?void 0:mW.createPolicy("editorGhostText",{createHTML:i=>i});let WU=class extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.model=t,this.instantiationService=n,this.modeService=r,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(_Xe,this.editor)),this.additionalLinesWidget=this._register(new vXe(this.editor,this.modeService.languageIdCodec)),this.viewMoreContentWidget=void 0,this._register(this.editor.onDidChangeConfiguration(o=>{(o.hasChanged(29)||o.hasChanged(104)||o.hasChanged(87)||o.hasChanged(82)||o.hasChanged(44)||o.hasChanged(43)||o.hasChanged(58))&&this.update()})),this._register(Kn(()=>{var o;this.disposed=!0,this.update(),(o=this.viewMoreContentWidget)===null||o===void 0||o.dispose(),this.viewMoreContentWidget=void 0})),this._register(t.onDidChange(()=>{this.update()})),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed){this.partsWidget.clear(),this.additionalLinesWidget.clear();return}const n=new Array,r=new Array;function o(d,h){if(r.length>0){const f=r[r.length-1];h&&f.decorations.push(new Nu(f.content.length+1,f.content.length+1+d[0].length,h,0)),f.content+=d[0],d=d.slice(1)}for(const f of d)r.push({content:f,decorations:h?[new Nu(1,f.length+1,h,0)]:[]})}const s=this.editor.getModel().getLineContent(t.lineNumber);this.editor.getModel().getLineTokens(t.lineNumber);let a,u=0;for(const d of t.parts){let h=d.lines;a===void 0?(n.push({column:d.column,text:h[0],preview:d.preview}),h=h.slice(1)):o([s.substring(u,d.column-1)],void 0),h.length>0&&(o(h,"ghost-text"),a===void 0&&d.column<=s.length&&(a=d.column)),u=d.column-1}a!==void 0&&o([s.substring(u)],void 0),this.partsWidget.setParts(t.lineNumber,n,a!==void 0?{column:a,length:s.length+1-a}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,r,t.additionalReservedLineCount),t.parts.some(d=>d.lines.length<0)?this.viewMoreContentWidget=this.renderViewMoreLines(new Le(t.lineNumber,this.editor.getModel().getLineMaxColumn(t.lineNumber)),"",0):((e=this.viewMoreContentWidget)===null||e===void 0||e.dispose(),this.viewMoreContentWidget=void 0)}renderViewMoreLines(e,t,n){const r=this.editor.getOption(43),o=document.createElement("div");o.className="suggest-preview-additional-widget",Na.applyFontInfoSlow(o,r);const s=document.createElement("span");s.className="content-spacer",s.append(t),o.append(s);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),o.append(a);const u=new Qe,d=document.createElement("div");return d.className="button suggest-preview-text",d.append(`+${n} lines…`),u.add(ts(d,"mousedown",h=>{var f;(f=this.model)===null||f===void 0||f.setExpanded(!0),h.preventDefault(),this.editor.focus()})),o.append(d),new CXe(this.editor,e,o,u)}};WU=mXe([Iie(2,An),Iie(3,Fs)],WU);class _Xe{constructor(e){this.editor=e,this.decorationIds=[],this.disposableStore=new Qe}dispose(){this.clear(),this.disposableStore.dispose()}clear(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}setParts(e,t,n){if(this.disposableStore.clear(),!this.editor.getModel())return;const o=new Array;n&&o.push({range:Q.fromPositions(new Le(e,n.column),new Le(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map(s=>({range:Q.fromPositions(new Le(e,s.column)),options:{description:"ghost-text",after:{content:s.text,inlineClassName:s.preview?"ghost-text-decoration-preview":"ghost-text-decoration"},showIfCollapsed:!0}})).concat(o))}}class vXe{constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}get viewZoneId(){return this._viewZoneId}dispose(){this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const r=this.editor.getModel();if(!r)return;const{tabSize:o}=r.getOptions();this.editor.changeViewZones(s=>{this._viewZoneId&&(s.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const u=document.createElement("div");bXe(u,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=s.addZone({afterLineNumber:e,heightInLines:a,domNode:u})}})}}function bXe(i,e,t,n,r){const o=n.get(29),s=n.get(104),a="none",u=n.get(82),d=n.get(44),h=n.get(43),f=n.get(58),p=Tb(1e4);p.appendASCIIString('<div class="suggest-preview-text">');for(let b=0,L=t.length;b<L;b++){const S=t[b],y=S.content;p.appendASCIIString('<div class="view-line'),p.appendASCIIString('" style="top:'),p.appendASCIIString(String(b*f)),p.appendASCIIString('px;width:1000000px;">');const E=vG(y),A=g8(y),N=es.createEmpty(y,r);O8(new SC(h.isMonospace&&!o,h.canUseHalfwidthRightwardsArrow,y,!1,E,A,0,N,S.decorations,e,0,h.spaceWidth,h.middotWidth,h.wsmiddotWidth,s,a,u,d!==Du.OFF,null),p),p.appendASCIIString("</div>")}p.appendASCIIString("</div>"),Na.applyFontInfoSlow(i,h);const m=p.build(),v=kie?kie.createHTML(m):m;i.innerHTML=v}class CXe extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.position=t,this.domNode=n,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(r),this._register(Kn(()=>{this.editor.removeContentWidget(this)})),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}hr((i,e)=>{const t=i.getColor(_2e);t&&(e.addRule(`.monaco-editor .ghost-text-decoration { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { color: ${t.toString()} !important; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { color: ${t.toString()} !important; }`));const n=i.getColor(v2e);n&&(e.addRule(`.monaco-editor .ghost-text-decoration { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { background-color: ${n.toString()}; }`),e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { background-color: ${n.toString()}; }`));const r=i.getColor(m2e);r&&(e.addRule(`.monaco-editor .suggest-preview-text .ghost-text { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .ghost-text-decoration { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .ghost-text-decoration-preview { border: 1px solid ${r}; }`))});var Fpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},VU=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},JB=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let ns=class Bpe extends Oe{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new Aa),this._register(this.editor.onDidChangeModel(()=>{this.updateModelController()})),this._register(this.editor.onDidChangeConfiguration(n=>{n.hasChanged(105)&&this.updateModelController(),n.hasChanged(54)&&this.updateModelController()})),this.updateModelController()}static get(e){return e.getContribution(Bpe.ID)}get activeModel(){var e;return(e=this.activeController.value)===null||e===void 0?void 0:e.model}updateModelController(){const e=this.editor.getOption(105),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(HU,this.editor):void 0}shouldShowHoverAt(e){var t;return((t=this.activeModel)===null||t===void 0?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,n;return((n=(t=this.activeController.value)===null||t===void 0?void 0:t.widget)===null||n===void 0?void 0:n.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),(e=this.activeModel)===null||e===void 0||e.triggerInlineCompletion()}commit(){var e;(e=this.activeModel)===null||e===void 0||e.commitInlineCompletion()}hide(){var e;(e=this.activeModel)===null||e===void 0||e.hideInlineCompletion()}showNextInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;(e=this.activeModel)===null||e===void 0||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return JB(this,void 0,void 0,function*(){const t=yield(e=this.activeModel)===null||e===void 0?void 0:e.hasMultipleInlineCompletions();return t!==void 0?t:!1})}};ns.inlineSuggestionVisible=new Dt("inlineSuggestionVisible",!1,C("inlineSuggestionVisible","Whether an inline suggestion is visible"));ns.inlineSuggestionHasIndentation=new Dt("inlineSuggestionHasIndentation",!1,C("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));ns.inlineSuggestionHasIndentationLessThanTabSize=new Dt("inlineSuggestionHasIndentationLessThanTabSize",!0,C("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));ns.ID="editor.contrib.ghostTextController";ns=Fpe([VU(1,An)],ns);class wXe{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=ns.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=ns.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=ns.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let HU=class extends Oe{constructor(e,t,n){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.contextKeys=new wXe(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(BU,this.editor)),this.widget=this._register(this.instantiationService.createInstance(WU,this.editor,this.model)),this._register(Kn(()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)})),this._register(this.model.onDidChange(()=>{this.updateContextKeys()})),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(((e=this.model.activeInlineCompletionsModel)===null||e===void 0?void 0:e.ghostText)!==void 0);let t=!1,n=!0;const r=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&r&&r.parts.length>0){const{column:o,lines:s}=r.parts[0],a=s[0],u=this.editor.getModel().getLineIndentColumn(r.lineNumber);if(o<=u){let h=ka(a);h===-1&&(h=a.length-1),t=h>0;const f=this.editor.getModel().getOptions().tabSize;n=ur.visibleColumnFromColumn(a,h+1,f)<f}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)}};HU=Fpe([VU(1,An),VU(2,dn)],HU);const Wpe=Ps.bindToContribution(ns.get),EO=new Wpe({id:wpe,precondition:ns.inlineSuggestionVisible,handler(i){i.commit(),i.editor.focus()}});nt(EO);Os.registerKeybindingRule({primary:2,weight:200,id:EO.id,when:_t.and(EO.precondition,de.tabMovesFocus.toNegated(),ns.inlineSuggestionHasIndentationLessThanTabSize)});nt(new Wpe({id:"editor.action.inlineSuggest.hide",precondition:ns.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler(i){i.hide()}}));class dS extends Et{constructor(){super({id:dS.ID,label:C("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:_t.and(de.writable,ns.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return JB(this,void 0,void 0,function*(){const n=ns.get(t);n&&(n.showNextInlineCompletion(),t.focus())})}}dS.ID="editor.action.inlineSuggest.showNext";class hS extends Et{constructor(){super({id:hS.ID,label:C("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:_t.and(de.writable,ns.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return JB(this,void 0,void 0,function*(){const n=ns.get(t);n&&(n.showPreviousInlineCompletion(),t.focus())})}}hS.ID="editor.action.inlineSuggest.showPrevious";class yXe extends Et{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:C("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:de.writable})}run(e,t){return JB(this,void 0,void 0,function*(){const n=ns.get(t);n&&n.trigger()})}}Ti(ns.ID,ns);it(yXe);it(dS);it(hS);var SXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ow=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};class LXe{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}}let $U=class{constructor(e,t,n,r,o,s,a,u){this._editor=e,this._hover=t,this._commandService=n,this._menuService=r,this._contextKeyService=o,this._modeService=s,this._openerService=a,this.accessibilityService=u}suggestHoverAnchor(e){const t=ns.get(this._editor);if(!t)return null;if(e.target.type===8){const n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new sW(1e3,this,Q.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}return e.target.type===7&&e.target.range&&t.shouldShowHoverAt(e.target.range)?new sW(1e3,this,e.target.range):e.target.type===6&&e.target.range&&e.target.detail&&e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)?new sW(1e3,this,e.target.range):null}computeSync(e,t){const n=ns.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new LXe(this,e.range,n)]:[]}renderHoverParts(e,t,n){const r=new Qe,o=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(o,t,r);const s=r.add(this._menuService.createMenu(Mt.InlineCompletionsActions,this._contextKeyService)),a=n.addAction({label:C("showNextInlineSuggestion","Next"),commandId:dS.ID,run:()=>this._commandService.executeCommand(dS.ID)}),u=n.addAction({label:C("showPreviousInlineSuggestion","Previous"),commandId:hS.ID,run:()=>this._commandService.executeCommand(hS.ID)});n.addAction({label:C("acceptInlineSuggestion","Accept"),commandId:EO.id,run:()=>this._commandService.executeCommand(EO.id)});const d=[a,u];for(const h of d)h.setEnabled(!1);o.hasMultipleSuggestions().then(h=>{for(const f of d)f.setEnabled(h)});for(const[h,f]of s.getActions())for(const p of f)p instanceof b0&&n.addAction({label:p.label,commandId:p.item.id,run:()=>this._commandService.executeCommand(p.item.id)});return r}renderScreenReaderText(e,t,n){var r,o;const s=Ge,a=s("div.hover-row.markdown-hover"),u=Be(a,s("div.hover-contents")),d=n.add(new Bp({editor:this._editor},this._modeService,this._openerService)),h=p=>{n.add(d.onDidRenderAsync(()=>{u.className="hover-contents code-hover-contents",this._hover.onContentsChanged()}));const m=C("inlineSuggestionFollows","Suggestion:"),v=n.add(d.render(new Rp().appendText(m).appendCodeblock("text",p)));u.replaceChildren(v.element)},f=(o=(r=e.controller.activeModel)===null||r===void 0?void 0:r.inlineCompletionsModel)===null||o===void 0?void 0:o.ghostText;if(f){const p=this._editor.getModel().getLineContent(f.lineNumber);h(f.renderForScreenReader(p))}t.appendChild(a)}};$U=SXe([ow(2,kr),ow(3,bC),ow(4,dn),ow(5,Fs),ow(6,El),ow(7,il)],$U);var EXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},xXe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let zU=class extends Oe{constructor(e,t,n={},r){var o;super(),this._link=t,this._enabled=!0,this.el=Be(e,Ge("a.monaco-link",{tabIndex:(o=t.tabIndex)!==null&&o!==void 0?o:0,href:t.href,title:t.title},t.label)),this.el.setAttribute("role","button");const s=this._register(new Ui(this.el,"click")),a=this._register(new Ui(this.el,"keypress")),u=Rt.chain(a.event).map(f=>new yr(f)).filter(f=>f.keyCode===3).event,d=this._register(new Ui(this.el,lr.Tap)).event;this._register(Hi.addTarget(this.el));const h=Rt.any(s.event,u,d);this._register(h(f=>{this.enabled&&(Ni.stop(f,!0),n!=null&&n.opener?n.opener(this._link.href):r.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}};zU=EXe([xXe(3,El)],zU);hr((i,e)=>{const t=i.getColor(x8);t&&e.addRule(`.monaco-link { color: ${t}; }`);const n=i.getColor(D8);n&&e.addRule(`.monaco-link:hover { color: ${n}; }`)});var Vpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Hpe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const DXe=26;let UU=class extends Oe{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(jU))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show(Object.assign(Object.assign({},e),{onClose:()=>{this.hide(),e.onClose&&e.onClose()}})),this._editor.setBanner(this.banner.element,DXe)}};UU=Vpe([Hpe(1,An)],UU);let jU=class extends Oe{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Bp,{}),this.element=Ge("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=Ge("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){$o(this.element)}show(e){$o(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=Be(this.element,Ge("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(Ge(`div${pr.asCSSSelector(e.icon)}`));const r=Be(this.element,Ge("div.message-container"));if(r.setAttribute("aria-hidden","true"),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Be(this.element,Ge("div.message-actions-container")),e.actions)for(const s of e.actions)this._register(this.instantiationService.createInstance(zU,this.messageActionsContainer,Object.assign(Object.assign({},s),{tabIndex:-1}),{}));const o=Be(this.element,Ge("div.action-container"));this.actionBar=this._register(new cg(o)),this.actionBar.push(this._register(new rc("banner.close","Close Banner",pr.asClassName(kde),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};jU=Vpe([Hpe(0,An)],jU);var QY=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ly=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Wh=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const IXe=ds("extensions-warning-message",_e.warning,C("warningIcon","Icon shown with a warning message in the extensions editor."));let fS=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const s=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=s)a={message:C("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new sL};else if(o.ambiguousCharacterCount>=s)a={message:C("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new rL};else if(o.invisibleCharacterCount>=s)a={message:C("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new oL};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:IXe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(r.createInstance(UU,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(112),this._register(n.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(112)&&(this._options=e.getOption(112),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=kXe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new KU(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new TXe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}};fS.ID="editor.contrib.unicodeHighlighter";fS=QY([Ly(1,Hu),Ly(2,Ghe),Ly(3,An)],fS);function kXe(i,e){var t;return{nonBasicASCII:e.nonBasicASCII===Lf?!i:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Lf?!i:e.includeComments,allowedCharacters:(t=e.allowedCharacters)!==null&&t!==void 0?t:{}}}let KU=class extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=r,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new er(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const r of t.ranges)n.push({range:r,options:this._options.includeComments?s5:o5});this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),n))})}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e);if(!mq(t,{range:n,options:this._options.includeComments?s5:o5,id:e,ownerId:0}))return null;const r=t.getValueInRange(n);return{reason:$pe(r,this._options)}}};KU=QY([Ly(3,Hu)],KU);class TXe extends Oe{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorationIds=new Set,this._updateSoon=this._register(new er(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorationIds=new Set(this._model.deltaDecorations(Array.from(this._decorationIds),[])),super.dispose()}_update(){if(!this._model.mightContainNonBasicASCII()){this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),[]));return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const r of e){const o=Dq.computeUnicodeHighlights(this._model,this._options,r);for(const s of o.ranges)n.ranges.push(s);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||o.hasMore}if(!n.hasMore)for(const r of n.ranges)t.push({range:r,options:this._options.includeComments?s5:o5});this._updateState(n),this._decorationIds=new Set(this._editor.deltaDecorations(Array.from(this._decorationIds),t))}getDecorationInfo(e){if(!this._decorationIds.has(e))return null;const t=this._editor.getModel(),n=t.getDecorationRange(e),r=t.getValueInRange(n);return mq(t,{range:n,options:this._options.includeComments?s5:o5,id:e,ownerId:0})?{reason:$pe(r,this._options)}:null}}let GU=class{constructor(e,t,n,r){this._editor=e,this._hover=t,this._modeService=n,this._openerService=r}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),r=this._editor.getContribution(fS.ID),o=[];let s=300;for(const a of t){let f=function(S){let y=`\`U+${S.toString(16).padStart(4,"0")}\``;return vp.isInvisibleCharacter(S)||(y+=` "${`${NXe(S)}`}"`),y};const u=r.getDecorationInfo(a.id);if(!u)continue;const h=n.getValueInRange(a.range).codePointAt(0),p=f(h);let m;switch(u.reason.kind){case 0:m=C("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",p,f(u.reason.confusableWith.codePointAt(0)));break;case 1:m=C("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",p);break;case 2:m=C("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",p);break}const v={codePoint:h,reason:u.reason.kind},b=C("unicodeHighlight.adjustSettings","Adjust settings"),L=[{value:`${m} [${b}](command:${HM.ID}?${encodeURIComponent(JSON.stringify(v))})`,isTrusted:!0}];o.push(new c2(this,a.range,L,s++))}return o}renderHoverParts(e,t,n){return ppe(e,t,this._editor,this._hover,this._modeService,this._openerService)}};GU=QY([Ly(2,Fs),Ly(3,El)],GU);function NXe(i){return i===96?"`` ` ``":"`"+String.fromCodePoint(i)+"`"}function $pe(i,e){return Dq.computeUnicodeHighlightReason(i,e)}const o5=Sn.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Lr(UIe),position:Sl.Center},minimap:{color:Lr(YIe),position:bl.Inline},hideInCommentTokens:!0}),s5=Sn.register({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:{color:Lr(k8),position:Sl.Center},minimap:{color:Lr(FG),position:bl.Inline}});class rL extends Et{constructor(){super({id:rL.ID,label:C("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}run(e,t,n){return Wh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(nr);r&&this.runAction(r)})}runAction(e){return Wh(this,void 0,void 0,function*(){yield e.updateValue(Pf.ambiguousCharacters,!1,1)})}}rL.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";class oL extends Et{constructor(){super({id:oL.ID,label:C("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}run(e,t,n){return Wh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(nr);r&&this.runAction(r)})}runAction(e){return Wh(this,void 0,void 0,function*(){yield e.updateValue(Pf.invisibleCharacters,!1,1)})}}oL.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";class sL extends Et{constructor(){super({id:sL.ID,label:C("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=C("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}run(e,t,n){return Wh(this,void 0,void 0,function*(){let r=e==null?void 0:e.get(nr);r&&this.runAction(r)})}runAction(e){return Wh(this,void 0,void 0,function*(){yield e.updateValue(Pf.nonBasicASCII,!1,1)})}}sL.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";class HM extends Et{constructor(){super({id:HM.ID,label:C("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}run(e,t,n){return Wh(this,void 0,void 0,function*(){const{codePoint:r,reason:o}=n,s=String.fromCodePoint(r),a=e.get(yc),u=e.get(nr);function d(p){return vp.isInvisibleCharacter(p)?C("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",`U+${p.toString(16)}`):C("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`U+${p.toString(16)} "${s}"`)}const h=[{label:d(r),run:()=>AXe(u,[r])}];if(o===0){const p=new rL;h.push({label:p.label,run:()=>Wh(this,void 0,void 0,function*(){return p.runAction(u)})})}else if(o===1){const p=new oL;h.push({label:p.label,run:()=>Wh(this,void 0,void 0,function*(){return p.runAction(u)})})}else if(o===2){const p=new sL;h.push({label:p.label,run:()=>Wh(this,void 0,void 0,function*(){return p.runAction(u)})})}else OXe(o);const f=yield a.pick(h,{title:C("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});f&&(yield f.run())})}}HM.ID="editor.action.unicodeHighlight.showExcludeOptions";function AXe(i,e){return Wh(this,void 0,void 0,function*(){const t=i.getValue(Pf.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const r of e)n[String.fromCodePoint(r)]=!0;yield i.updateValue(Pf.allowedCharacters,n,1)})}function OXe(i){throw new Error(`Unexpected value: ${i}`)}it(rL);it(oL);it(sL);it(HM);Ti(fS.ID,fS);var zpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},D4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Tie=Ge;let qU=class extends Oe{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=Tie("div.hover-row.status-bar"),this.actionsElement=Be(this.hoverElement,Tie("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(KY.render(this.actionsElement,e,n))}append(e){const t=Be(this.actionsElement,e);return this._hasContent=!0,t}};qU=zpe([D4(0,Sr)],qU);class a5{constructor(e,t){this._participants=t,this._editor=e,this._result=[],this._anchor=null}setAnchor(e){this._anchor=e,this._result=[]}clearResult(){this._result=[]}static _getLineDecorations(e,t){if(t.type!==1)return[];const n=e.getModel(),r=t.range.startLineNumber,o=n.getLineMaxColumn(r);return e.getLineDecorations(r).filter(s=>{if(s.options.isWholeLine)return!0;const a=s.range.startLineNumber===r?s.range.startColumn:1,u=s.range.endLineNumber===r?s.range.endColumn:o;if(s.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>u)return!1}else if(a>t.range.startColumn||t.range.endColumn>u)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Yo.EMPTY;const n=a5._getLineDecorations(this._editor,t);return Yo.merge(this._participants.map(r=>this._computeAsync(r,n,t,e)))}_computeAsync(e,t,n,r){return e.computeAsync?e.computeAsync(n,t,r):Yo.EMPTY}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=a5._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return BS(t)}onResult(e,t){t?this._result=e.concat(this._result):this._result=this._result.concat(e)}getResult(){return this._result.slice(0)}getResultWithLoadingMessage(){if(this._anchor){for(const e of this._participants)if(e.createLoadingMessage){const t=e.createLoadingMessage(this._anchor);if(t)return this._result.slice(0).concat([t])}}return this._result.slice(0)}}let Uv=class YU extends Vu{constructor(e,t,n,r,o){super(),this._hoverVisibleKey=t,this._keybindingService=r,this._contextKeyService=o,this.allowEditorOverflow=!0,this._participants=[n.createInstance(CU,e,this),n.createInstance(yU,e,this),n.createInstance($U,e,this),n.createInstance(GU,e,this),n.createInstance(kU,e,this)],this._editor=e,this._isVisible=!1,this._stoleFocus=!1,this._renderDisposable=null,this._hover=this._register(new lpe),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this.onkeydown(this._hover.containerDomNode,s=>{s.equals(9)&&this.hide()}),this._register(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._editor.onDidLayoutChange(()=>this.layout()),this.layout(),this._editor.addContentWidget(this),this._showAtPosition=null,this._showAtRange=null,this._stoleFocus=!1,this._messages=[],this._messagesAreComplete=!1,this._lastAnchor=null,this._computer=new a5(this._editor,this._participants),this._highlightDecorations=[],this._isChangingDecorations=!1,this._shouldFocus=!1,this._colorPicker=null,this._preferAbove=this._editor.getOption(52).above,this._hoverOperation=new cpe(this._computer,s=>this._withResult(s,!0),null,s=>this._withResult(s,!1),this._editor.getOption(52).delay),this._register(ts(this.getDomNode(),Ht.FOCUS,()=>{this._colorPicker&&this.getDomNode().classList.add("colorpicker-hover")})),this._register(ts(this.getDomNode(),Ht.BLUR,()=>{this.getDomNode().classList.remove("colorpicker-hover")})),this._register(e.onDidChangeConfiguration(()=>{this._hoverOperation.setHoverTime(this._editor.getOption(52).delay),this._preferAbove=this._editor.getOption(52).above})),this._register(Wr.onDidChange(()=>{this._isVisible&&this._lastAnchor&&this._messages.length>0&&(this._hover.contentsDomNode.textContent="",this._renderMessages(this._lastAnchor,this._messages))}))}dispose(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),super.dispose()}getId(){return YU.ID}getDomNode(){return this._hover.containerDomNode}_shouldShowAt(e){const t=e.target.type;if(t===6)return!0;if(t===7){const n=this._editor.getOption(43).typicalHalfwidthCharacterWidth/2,r=e.target.detail;if(r&&!r.isAfterLines&&typeof r.horizontalDistanceToText=="number"&&r.horizontalDistanceToText<n)return!0}return!1}maybeShowAt(e){var t;const n=[];for(const r of this._participants)if(typeof r.suggestHoverAnchor=="function"){const o=r.suggestHoverAnchor(e);o&&n.push(o)}if(this._shouldShowAt(e)&&e.target.range){const o=[...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))&&e.target.range.endColumn-e.target.range.startColumn===1?new Q(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new Xne(0,o))}return n.length===0?!1:(n.sort((r,o)=>o.priority-r.priority),this._startShowingAt(n[0],0,!1),!0)}_showAt(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}getPosition(){if(this._isVisible){let e=this._preferAbove;return!e&&this._contextKeyService.getContextKeyValue(Un.Visible.key)&&(e=!0),{position:this._showAtPosition,range:this._showAtRange,preference:e?[1,2]:[2,1]}}return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(43);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=`${n/t}`,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(this._editor.getLayoutInfo().width*.66,500)}px`}onModelDecorationsChanged(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}startShowingAtRange(e,t,n){this._startShowingAt(new Xne(0,e),t,n)}_startShowingAt(e,t,n){if(!(this._lastAnchor&&this._lastAnchor.equals(e))){if(this._hoverOperation.cancel(),this._isVisible)if(!this._showAtPosition||!this._lastAnchor||!e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition))this.hide();else{const r=this._messages.filter(o=>o.isValidForHoverAnchor(e));if(r.length===0)this.hide();else{if(r.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,r)}}this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout(()=>{this._isVisible||this._hoverVisibleKey.set(!1)},0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}isColorPickerVisible(){return!!this._colorPicker}setColorPicker(e){this._colorPicker=e}onContentsChanged(){this._hover.onContentsChanged()}_withResult(e,t){this._messages=e,this._messagesAreComplete=t,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}_renderMessages(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;let n=1073741824,r=t[0].range,o=null,s=document.createDocumentFragment();const a=new Qe,u=new Map;for(const h of t)n=Math.min(n,h.range.startColumn),r=Q.plusRange(r,h.range),h.forceShowAtRange&&(o=h.range),u.has(h.owner)||u.set(h.owner,[]),u.get(h.owner).push(h);const d=a.add(new qU(this._keybindingService));for(const h of this._participants)if(u.has(h)){const f=u.get(h);a.add(h.renderHoverParts(f,s,d))}d.hasContent&&s.appendChild(d.hoverElement),this._renderDisposable=a,s.hasChildNodes()&&(o?this._showAt(o.getStartPosition(),o,this._shouldFocus):this._showAt(new Le(e.range.startLineNumber,n),r,this._shouldFocus),this._updateContents(s)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:YU._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}};Uv.ID="editor.contrib.modesContentHoverWidget";Uv._DECORATION_OPTIONS=Sn.register({description:"content-hover-highlight",className:"hoverHighlight"});Uv=zpe([D4(2,An),D4(3,Sr),D4(4,dn)],Uv);const Nie=Ge;class MXe{constructor(e){this._editor=e,this._lineNumber=-1,this._result=[]}setLineNumber(e){this._lineNumber=e,this._result=[]}clearResult(){this._result=[]}computeSync(){const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const r of t){if(!r.options.glyphMarginClassName)continue;const o=r.options.glyphMarginHoverMessage;!o||hO(o)||n.push(...EG(o).map(e))}return n}onResult(e,t){this._result=this._result.concat(e)}getResult(){return this._result}getResultWithLoadingMessage(){return this.getResult()}}class z1 extends Vu{constructor(e,t,n=y3e){super(),this._renderDisposeables=this._register(new Qe),this._editor=e,this._isVisible=!1,this._messages=[],this._lastLineNumber=-1,this._hover=this._register(new lpe),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Bp({editor:this._editor},t,n)),this._computer=new MXe(this._editor),this._hoverOperation=new cpe(this._computer,r=>this._withResult(r),void 0,r=>this._withResult(r),300),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(43)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._hoverOperation.cancel(),this._editor.removeOverlayWidget(this),super.dispose()}getId(){return z1.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),r=this._editor.getScrollTop(),o=this._editor.getOption(58),s=this._hover.containerDomNode.clientHeight,a=n-r-(s-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}startShowingAt(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}hide(){this._lastLineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const r of t){const o=Nie("div.hover-row.markdown-hover"),s=Be(o,Nie("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(r.value));s.appendChild(a.element),n.appendChild(o)}this._updateContents(n),this._showAt(e)}}z1.ID="editor.contrib.modesGlyphHoverWidget";var RXe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},_P=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let A0=class Upe{constructor(e,t,n,r,o){this._editor=e,this._instantiationService=t,this._openerService=n,this._modeService=r,this._toUnhook=new Qe,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration(s=>{s.hasChanged(52)&&(this._unhookEvents(),this._hookEvents())}),this._hoverVisibleKey=de.hoverVisible.bindTo(o)}static get(e){return e.getContribution(Upe.ID)}_hookEvents(){const e=()=>this._hideWidgets(),t=this._editor.getOption(52);this._isHoverEnabled=t.enabled,this._isHoverSticky=t.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown(n=>this._onEditorMouseDown(n))),this._toUnhook.add(this._editor.onMouseUp(n=>this._onEditorMouseUp(n))),this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n))),this._toUnhook.add(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged()))):(this._toUnhook.add(this._editor.onMouseMove(n=>this._onEditorMouseMove(n))),this._toUnhook.add(this._editor.onKeyDown(n=>this._onKeyDown(n)))),this._toUnhook.add(this._editor.onMouseLeave(e)),this._toUnhook.add(this._editor.onDidChangeModel(e)),this._toUnhook.add(this._editor.onDidScrollChange(n=>this._onEditorScrollChanged(n)))}_unhookEvents(){this._toUnhook.clear()}_onModelDecorationsChanged(){var e,t;(e=this._contentWidget)===null||e===void 0||e.onModelDecorationsChanged(),(t=this._glyphWidget)===null||t===void 0||t.onModelDecorationsChanged()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target.type;if(t===9&&e.target.detail===Uv.ID){this._hoverClicked=!0;return}t===12&&e.target.detail===z1.ID||(t!==12&&e.target.detail!==z1.ID&&(this._hoverClicked=!1),this._hideWidgets())}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseMove(e){var t,n,r,o,s;let a=e.target.type;if(this._isMouseDown&&this._hoverClicked||this._isHoverSticky&&a===9&&e.target.detail===Uv.ID||this._isHoverSticky&&!(!((n=(t=e.event.browserEvent.view)===null||t===void 0?void 0:t.getSelection())===null||n===void 0)&&n.isCollapsed)||!this._isHoverSticky&&a===9&&e.target.detail===Uv.ID&&(!((r=this._contentWidget)===null||r===void 0)&&r.isColorPickerVisible())||this._isHoverSticky&&a===12&&e.target.detail===z1.ID)return;if(!this._isHoverEnabled){this._hideWidgets();return}if(this._getOrCreateContentWidget().maybeShowAt(e)){(o=this._glyphWidget)===null||o===void 0||o.hide();return}if(a===2&&e.target.position){(s=this._contentWidget)===null||s===void 0||s.hide(),this._glyphWidget||(this._glyphWidget=new z1(this._editor,this._modeService,this._openerService)),this._glyphWidget.startShowingAt(e.target.position.lineNumber);return}this._hideWidgets()}_onKeyDown(e){e.keyCode!==5&&e.keyCode!==6&&e.keyCode!==57&&e.keyCode!==4&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(!((e=this._contentWidget)===null||e===void 0)&&e.isColorPickerVisible())||(this._hoverClicked=!1,(t=this._glyphWidget)===null||t===void 0||t.hide(),(n=this._contentWidget)===null||n===void 0||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Uv,this._editor,this._hoverVisibleKey)),this._contentWidget}isColorPickerVisible(){var e;return((e=this._contentWidget)===null||e===void 0?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),(e=this._glyphWidget)===null||e===void 0||e.dispose(),(t=this._contentWidget)===null||t===void 0||t.dispose()}};A0.ID="editor.contrib.hover";A0=RXe([_P(1,An),_P(2,El),_P(3,Fs),_P(4,dn)],A0);class PXe extends Et{constructor(){super({id:"editor.action.showHover",label:C({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;let n=A0.get(t);if(!n)return;const r=t.getPosition(),o=new Q(r.lineNumber,r.column,r.lineNumber,r.column),s=t.getOption(2)===2;n.showContentHover(o,1,s)}}class FXe extends Et{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:C({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){let n=A0.get(t);if(!n)return;const r=t.getPosition();if(!r)return;const o=new Q(r.lineNumber,r.column,r.lineNumber,r.column);Gb.get(t).startFindDefinitionFromCursor(r).then(()=>{n.showContentHover(o,1,!0)})}}Ti(A0.ID,A0);it(PXe);it(FXe);hr((i,e)=>{const t=i.getColor(oIe);t&&e.addRule(`.monaco-editor .hoverHighlight { background-color: ${t}; }`);const n=i.getColor(Ib);n&&e.addRule(`.monaco-editor .monaco-hover { background-color: ${n}; }`);const r=i.getColor(PG);r&&(e.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${r}; }`),e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${r.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${r.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${r.transparent(.5)}; }`));const o=i.getColor(x8);o&&e.addRule(`.monaco-editor .monaco-hover a { color: ${o}; }`);const s=i.getColor(D8);s&&e.addRule(`.monaco-editor .monaco-hover a:hover { color: ${s}; }`);const a=i.getColor(RG);a&&e.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const u=i.getColor(sIe);u&&e.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${u}; }`);const d=i.getColor(Yue);d&&e.addRule(`.monaco-editor .monaco-hover code { background-color: ${d}; }`)});class ZU extends Oe{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){var t;if(e.target.type!==6||![...((t=e.target.element)===null||t===void 0?void 0:t.classList.values())||[]].find(s=>s.startsWith("ced-colorBox"))||!e.target.range)return;const o=this._editor.getContribution(A0.ID);if(!o.isColorPickerVisible()){const s=new Q(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);o.showContentHover(s,0,!1)}}}ZU.ID="editor.contrib.colorContribution";Ti(ZU.ID,ZU);class jv{constructor(e,t){this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const r=t.length,o=e.length;if(n+r>o)return!1;for(let s=0;s<r;s++){const a=e.charCodeAt(n+s),u=t.charCodeAt(s);if(a!==u&&!(a>=65&&a<=90&&a+32===u)&&!(u>=65&&u<=90&&u+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,r,o,s){const a=e.startLineNumber,u=e.startColumn,d=e.endLineNumber,h=e.endColumn,f=o.getLineContent(a),p=o.getLineContent(d);let m=f.lastIndexOf(t,u-1+t.length),v=p.indexOf(n,h-1-n.length);if(m!==-1&&v!==-1)if(a===d)f.substring(m+t.length,v).indexOf(n)>=0&&(m=-1,v=-1);else{const L=f.substring(m+t.length),S=p.substring(0,v);(L.indexOf(n)>=0||S.indexOf(n)>=0)&&(m=-1,v=-1)}let b;m!==-1&&v!==-1?(r&&m+t.length<f.length&&f.charCodeAt(m+t.length)===32&&(t=t+" "),r&&v>0&&p.charCodeAt(v-1)===32&&(n=" "+n,v-=1),b=jv._createRemoveBlockCommentOperations(new Q(a,m+t.length+1,d,v+1),t,n)):(b=jv._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=b.length===1?n:null);for(const L of b)s.addTrackedEditOperation(L.range,L.text)}static _createRemoveBlockCommentOperations(e,t,n){let r=[];return Q.isEmpty(e)?r.push(jr.delete(new Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(r.push(jr.delete(new Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),r.push(jr.delete(new Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),r}static _createAddBlockCommentOperations(e,t,n,r){let o=[];return Q.isEmpty(e)?o.push(jr.replace(new Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(o.push(jr.insert(new Le(e.startLineNumber,e.startColumn),t+(r?" ":""))),o.push(jr.insert(new Le(e.endLineNumber,e.endColumn),(r?" ":"")+n))),o}getEditOperations(e,t){const n=this._selection.startLineNumber,r=this._selection.startColumn;e.tokenizeIfCheap(n);const o=e.getLanguageIdAtPosition(n,r),s=vi.getComments(o);!s||!s.blockCommentStartToken||!s.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const r=n[0],o=n[1];return new yt(r.range.endLineNumber,r.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const r=n[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new yt(r.endLineNumber,r.endColumn+o,r.endLineNumber,r.endColumn+o)}}}class Yg{constructor(e,t,n,r,o,s){this._selection=e,this._tabSize=t,this._type=n,this._insertSpace=r,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,n){e.tokenizeIfCheap(t);const r=e.getLanguageIdAtPosition(t,1),o=vi.getComments(r),s=o?o.lineCommentToken:null;if(!s)return null;let a=[];for(let u=0,d=n-t+1;u<d;u++)a[u]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a}static _analyzeLines(e,t,n,r,o,s,a){let u=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,f=r.length;h<f;h++){const p=r[h],m=o+h;if(m===o&&a){p.ignore=!0;continue}const v=n.getLineContent(m),b=ka(v);if(b===-1){p.ignore=s,p.commentStrOffset=v.length;continue}if(u=!1,p.ignore=!1,p.commentStrOffset=b,d&&!jv._haystackHasNeedleAtOffset(v,p.commentStr,b)&&(e===0?d=!1:e===1||(p.ignore=!0)),d&&t){const L=b+p.commentStrLength;L<v.length&&v.charCodeAt(L)===32&&(p.commentStrLength+=1)}}if(e===0&&u){d=!1;for(let h=0,f=r.length;h<f;h++)r[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:r}}static _gatherPreflightData(e,t,n,r,o,s,a){const u=Yg._gatherPreflightCommentStrings(n,r,o);return u===null?{supported:!1}:Yg._analyzeLines(e,t,n,u,r,s,a)}_executeLineComments(e,t,n,r){let o;n.shouldRemoveComments?o=Yg._createRemoveLineCommentsOperations(n.lines,r.startLineNumber):(Yg._normalizeInsertionPoint(e,n.lines,r.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(n.lines,r.startLineNumber));const s=new Le(r.positionLineNumber,r.positionColumn);for(let a=0,u=o.length;a<u;a++)t.addEditOperation(o[a].range,o[a].text),Q.isEmpty(o[a].range)&&Q.getStartPosition(o[a].range).equals(s)&&e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(r)}_attemptRemoveBlockComment(e,t,n,r){let o=t.startLineNumber,s=t.endLineNumber,a=r.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),u=e.getLineContent(o).lastIndexOf(n,a-1),d=e.getLineContent(s).indexOf(r,t.endColumn-1-n.length);return u!==-1&&d===-1&&(d=e.getLineContent(o).indexOf(r,u+n.length),s=o),u===-1&&d!==-1&&(u=e.getLineContent(s).lastIndexOf(n,d),o=s),t.isEmpty()&&(u===-1||d===-1)&&(u=e.getLineContent(o).indexOf(n),u!==-1&&(d=e.getLineContent(o).indexOf(r,u+n.length))),u!==-1&&e.getLineContent(o).charCodeAt(u+n.length)===32&&(n+=" "),d!==-1&&e.getLineContent(s).charCodeAt(d-1)===32&&(r=" "+r,d-=1),u!==-1&&d!==-1?jv._createRemoveBlockCommentOperations(new Q(o,u+n.length+1,s,d+1),n,r):null}_executeBlockComment(e,t,n){e.tokenizeIfCheap(n.startLineNumber);let r=e.getLanguageIdAtPosition(n.startLineNumber,1),o=vi.getComments(r);if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const s=o.blockCommentStartToken,a=o.blockCommentEndToken;let u=this._attemptRemoveBlockComment(e,n,s,a);if(!u){if(n.isEmpty()){const d=e.getLineContent(n.startLineNumber);let h=ka(d);h===-1&&(h=d.length),u=jv._createAddBlockCommentOperations(new Q(n.startLineNumber,h+1,n.startLineNumber,d.length+1),s,a,this._insertSpace)}else u=jv._createAddBlockCommentOperations(new Q(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),s,a,this._insertSpace);u.length===1&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(n);for(const d of u)t.addEditOperation(d.range,d.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new Q(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const r=Yg._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return r.supported?this._executeLineComments(e,t,r,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new yt(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){let n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];s.ignore||n.push(jr.delete(new Q(t+r,s.commentStrOffset+1,t+r,s.commentStrOffset+s.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){let n=[];const r=this._insertSpace?" ":"";for(let o=0,s=e.length;o<s;o++){const a=e[o];a.ignore||n.push(jr.insert(new Le(t+o,a.commentStrOffset+1),a.commentStr+r))}return n}static nextVisibleColumn(e,t,n,r){return n?e+(t-e%t):e+r}static _normalizeInsertionPoint(e,t,n,r){let o=1073741824,s,a;for(let u=0,d=t.length;u<d;u++){if(t[u].ignore)continue;const h=e.getLineContent(n+u);let f=0;for(let p=0,m=t[u].commentStrOffset;f<o&&p<m;p++)f=Yg.nextVisibleColumn(f,r,h.charCodeAt(p)===9,1);f<o&&(o=f)}o=Math.floor(o/r)*r;for(let u=0,d=t.length;u<d;u++){if(t[u].ignore)continue;const h=e.getLineContent(n+u);let f=0;for(s=0,a=t[u].commentStrOffset;f<o&&s<a;s++)f=Yg.nextVisibleColumn(f,r,h.charCodeAt(s)===9,1);f>o?t[u].commentStrOffset=s-1:t[u].commentStrOffset=s}}}class JY extends Et{constructor(e,t){super(t),this._type=e}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=[],o=n.getOptions(),s=t.getOption(19),a=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));a.sort((d,h)=>Q.compareRangesUsingStarts(d.selection,h.selection));let u=a[0];for(let d=1;d<a.length;d++){const h=a[d];u.selection.endLineNumber===h.selection.startLineNumber&&(u.index<h.index?h.ignoreFirstLine=!0:(u.ignoreFirstLine=!0,u=h))}for(const d of a)r.push(new Yg(d.selection,o.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class BXe extends JY{constructor(){super(0,{id:"editor.action.commentLine",label:C("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"5_insert",title:C({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class WXe extends JY{constructor(){super(1,{id:"editor.action.addCommentLine",label:C("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2081),weight:100}})}}class VXe extends JY{constructor(){super(2,{id:"editor.action.removeCommentLine",label:C("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2099),weight:100}})}}class HXe extends Et{constructor(){super({id:"editor.action.blockComment",label:C("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"5_insert",title:C({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){if(!t.hasModel())return;const n=t.getOption(19),r=[],o=t.getSelections();for(const s of o)r.push(new jv(s,n.insertSpace));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}it(BXe);it(WXe);it(VXe);it(HXe);var $Xe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},VN=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let gS=class jpe{constructor(e,t,n,r,o,s){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=r,this._keybindingService=o,this._menuService=s,this._toDispose=new Qe,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(a=>this._onContextMenu(a))),this._toDispose.add(this._editor.onMouseWheel(a=>{if(this._contextMenuIsBeingShownCount>0){const u=this._contextViewService.getContextViewElement(),d=a.srcElement;d.shadowRoot&&m0(u)===d.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(a=>{a.keyCode===58&&(a.preventDefault(),a.stopPropagation(),this.showContextMenu())}))}static get(e){return e.getContribution(jpe.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||(e.event.preventDefault(),e.event.stopPropagation(),e.target.type!==6&&e.target.type!==7&&e.target.type!==1))return;if(this._editor.focus(),e.target.position){let n=!1;for(const r of this._editor.getSelections())if(r.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20)||!this._editor.hasModel())return;if(!this._contextMenuService){this._editor.focus();return}const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?Mt.SimpleEditorContext:Mt.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],r=this._menuService.createMenu(t,this._contextKeyService),o=r.getActions({arg:e.uri});r.dispose();for(let s of o){const[,a]=s;let u=0;for(const d of a)if(d instanceof SG){const h=this._getMenuActions(e,d.item.submenu);h.length>0&&(n.push(new h8(d.id,d.label,h)),u++)}else n.push(d),u++;u&&n.push(new Qc)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=Us(this._editor.getDomNode()),a=s.left+o.left,u=s.top+o.top+o.height;t={x:a,y:u}}const r=this._editor.getOption(114)&&!ig;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:o=>{const s=this._keybindingFor(o);if(s)return new ZA(o,o,{label:!0,keybinding:s.getLabel(),isMenu:!0});const a=o;return typeof a.getActionViewItem=="function"?a.getActionViewItem():new ZA(o,o,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:o=>this._keybindingFor(o),onHide:o=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:n})}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};gS.ID="editor.contrib.contextmenu";gS=$Xe([VN(1,U0),VN(2,$p),VN(3,dn),VN(4,Sr),VN(5,bC)],gS);class zXe extends Et{constructor(){super({id:"editor.action.showContextMenu",label:C("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:1092,weight:100}})}run(e,t){gS.get(t).showContextMenu()}}Ti(gS.ID,gS);it(zXe);class _W{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let r=0;r<t;r++)if(!this.selections[r].equalsSelection(e.selections[r]))return!1;return!0}}class vW{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}class Yb extends Oe{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new _W(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new vW(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}static get(e){return e.getContribution(Yb.ID)}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new vW(new _W(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new vW(new _W(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}Yb.ID="editor.contrib.cursorUndoRedoController";class UXe extends Et{constructor(){super({id:"cursorUndo",label:C("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:2099,weight:100}})}run(e,t,n){Yb.get(t).cursorUndo()}}class jXe extends Et{constructor(){super({id:"cursorRedo",label:C("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){Yb.get(t).cursorRedo()}}Ti(Yb.ID,Yb);it(UXe);it(jXe);class KXe{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){let n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new Q(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new yt(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new yt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new yt(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new yt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new yt(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function sw(i){return qn?i.altKey:i.ctrlKey}class yp extends Oe{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._dndDecorationIds=[],this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(31)||this._editor.getOption(18)||(sw(e)&&(this._modifierPressed=!0),this._mouseDown&&sw(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(31)||this._editor.getOption(18)||(sw(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===yp.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){let t=e.target;if(this._dragSelection===null){let r=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(r.length===1)this._dragSelection=r[0];else return}sw(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){let t=new Le(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){let r=this._editor.getSelection();if(r){const{selectionStartLineNumber:o,selectionStartColumn:s}=r;n=[new yt(o,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(r=>r.containsPosition(t)?new yt(t.lineNumber,t.column,t.lineNumber,t.column):r);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(sw(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(yp.ID,new KXe(this._dragSelection,t,sw(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){let t=[{range:new Q(e.lineNumber,e.column,e.lineNumber,e.column),options:yp._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}yp.ID="editor.contrib.dragAndDrop";yp.TRIGGER_KEY_VALUE=qn?6:5;yp._DECORATION_OPTIONS=Sn.register({description:"dnd-target",className:"dnd-target"});Ti(yp.ID,yp);class Zs{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){let t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const r=n.options;if(r===Zs._FIND_MATCH_DECORATION||r===Zs._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let r=0,o=this._decorations.length;r<o;r++){let s=this._editor.getModel().getDecorationRange(this._decorations[r]);if(e.equalsRange(s)){t=this._decorations[r],n=r+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(r=>{if(this._highlightedDecorationId!==null&&(r.changeDecorationOptions(this._highlightedDecorationId,Zs._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,r.changeDecorationOptions(this._highlightedDecorationId,Zs._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(r.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){let s=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(s);o=new Q(o.startLineNumber,o.startColumn,s,a)}this._rangeHighlightDecorationId=r.addDecoration(o,Zs._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let r=Zs._FIND_MATCH_DECORATION,o=[];if(e.length>1e3){r=Zs._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),d=this._editor.getLayoutInfo().height/a,h=Math.max(2,Math.ceil(3/d));let f=e[0].range.startLineNumber,p=e[0].range.endLineNumber;for(let m=1,v=e.length;m<v;m++){const b=e[m].range;p+h>=b.startLineNumber?b.endLineNumber>p&&(p=b.endLineNumber):(o.push({range:new Q(f,1,p,1),options:Zs._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),f=b.startLineNumber,p=b.endLineNumber)}o.push({range:new Q(f,1,p,1),options:Zs._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}let s=new Array(e.length);for(let a=0,u=e.length;a<u;a++)s[a]={range:e[a].range,options:r};this._decorations=n.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,Zs._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){let n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(!(!r||r.endLineNumber>e.lineNumber)){if(r.endLineNumber<e.lineNumber)return r;if(!(r.endColumn>e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){let r=this._decorations[t],o=this._editor.getModel().getDecorationRange(r);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}Zs._CURRENT_FIND_MATCH_DECORATION=Sn.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Lr(k8),position:Sl.Center},minimap:{color:Lr(FG),position:bl.Inline}});Zs._FIND_MATCH_DECORATION=Sn.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Lr(k8),position:Sl.Center},minimap:{color:Lr(FG),position:bl.Inline}});Zs._FIND_MATCH_NO_OVERVIEW_DECORATION=Sn.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0});Zs._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Sn.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Lr(k8),position:Sl.Center}});Zs._RANGE_HIGHLIGHT_DECORATION=Sn.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0});Zs._FIND_SCOPE_DECORATION=Sn.register({description:"find-scope",className:"findScope",isWholeLine:!0});class GXe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){let n=[];for(let s=0;s<this._ranges.length;s++)n.push({range:this._ranges[s],text:this._replaceStrings[s]});n.sort((s,a)=>Q.compareRangesUsingStarts(s.range,a.range));let r=[],o=n[0];for(let s=1;s<n.length;s++)o.range.endLineNumber===n[s].range.startLineNumber&&o.range.endColumn===n[s].range.startColumn?(o.range=o.range.plusRange(n[s].range),o.text=o.text+n[s].text):(r.push(o),o=n[s]);r.push(o);for(const s of r)t.addEditOperation(s.range,s.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function Kpe(i,e){if(i&&i[0]!==""){const t=Aie(i,e,"-"),n=Aie(i,e,"_");return t&&!n?Oie(i,e,"-"):!t&&n?Oie(i,e,"_"):i[0].toUpperCase()===i[0]?e.toUpperCase():i[0].toLowerCase()===i[0]?e.toLowerCase():GEe(i[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):i[0][0].toUpperCase()!==i[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function Aie(i,e,t){return i[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&i[0].split(t).length===e.split(t).length}function Oie(i,e,t){const n=e.split(t),r=i[0].split(t);let o="";return n.forEach((s,a)=>{o+=Kpe([r[a]],s)+t}),o.slice(0,-1)}class Mie{constructor(e){this.staticValue=e,this.kind=0}}class qXe{constructor(e){this.pieces=e,this.kind=1}}class pS{constructor(e){!e||e.length===0?this._state=new Mie(""):e.length===1&&e[0].staticValue!==null?this._state=new Mie(e[0].staticValue):this._state=new qXe(e)}static fromStaticValue(e){return new pS([lb.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}buildReplaceString(e,t){if(this._state.kind===0)return t?Kpe(e,this._state.staticValue):this._state.staticValue;let n="";for(let r=0,o=this._state.pieces.length;r<o;r++){let s=this._state.pieces[r];if(s.staticValue!==null){n+=s.staticValue;continue}let a=pS._substitute(s.matchIndex,e);if(s.caseOps!==null&&s.caseOps.length>0){let u=[],d=s.caseOps.length,h=0;for(let f=0,p=a.length;f<p;f++){if(h>=d){u.push(a.slice(f));break}switch(s.caseOps[h]){case"U":u.push(a[f].toUpperCase());break;case"u":u.push(a[f].toUpperCase()),h++;break;case"L":u.push(a[f].toLowerCase());break;case"l":u.push(a[f].toLowerCase()),h++;break;default:u.push(a[f])}}a=u.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class lb{constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}static staticValue(e){return new lb(e,-1,null)}static caseOps(e,t){return new lb(null,e,t)}}class YXe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=lb.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=lb.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=lb.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new pS(this._result)}}function ZXe(i){if(!i||i.length===0)return new pS(null);let e=[],t=new YXe(i);for(let n=0,r=i.length;n<r;n++){let o=i.charCodeAt(n);if(o===92){if(n++,n>=r)break;let s=i.charCodeAt(n);switch(s){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(s));break}continue}if(o===36){if(n++,n>=r)break;let s=i.charCodeAt(n);if(s===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(s===48||s===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=s&&s<=57){let a=s-48;if(n+1<r){let u=i.charCodeAt(n+1);if(48<=u&&u<=57){n++,a=a*10+(u-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const PC=new Dt("findWidgetVisible",!1),e7=new Dt("findInputFocussed",!1),eZ=new Dt("replaceInputFocussed",!1),vP={primary:545,mac:{primary:2593}},bP={primary:565,mac:{primary:2613}},CP={primary:560,mac:{primary:2608}},wP={primary:554,mac:{primary:2602}},yP={primary:558,mac:{primary:2606}},ar={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Kv=19999,XXe=240;class Z2{constructor(e,t){this._toDispose=new Qe,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new Oa,this._decorations=new Zs(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new er(()=>this.research(!1),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,oi(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},XXe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let u=a.endLineNumber;return a.endColumn===1&&(u=u-1),new Q(a.startLineNumber,1,u,this._editor.getModel().getLineMaxColumn(u))}return a}));let r=this._findMatches(n,!1,Kv);this._decorations.set(r,n);const o=this._editor.getSelection();let s=this._decorations.getCurrentMatchesPosition(o);if(s===0&&r.length>0){const a=Oue(r.map(u=>u.range),u=>Q.compareRangesUsingStarts(u,o)>=0);s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){let e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){let t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:r}=e,o=this._editor.getModel();return t||r===1?(n===1?n=o.getLineCount():n--,r=o.getLineMaxColumn(n)):r--,new Le(n,r)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const h=this._decorations.matchAfterPosition(e);h&&this._setCurrentFindMatch(h);return}if(this._decorations.getCount()<Kv){let h=this._decorations.matchBeforePosition(e);h&&h.isEmpty()&&h.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),h=this._decorations.matchBeforePosition(e)),h&&this._setCurrentFindMatch(h);return}if(this._cannotFind())return;let n=this._decorations.getFindScope(),r=Z2._getSearchRange(this._editor.getModel(),n);r.getEndPosition().isBefore(e)&&(e=r.getEndPosition()),e.isBefore(r.getStartPosition())&&(e=r.getEndPosition());let{lineNumber:o,column:s}=e,a=this._editor.getModel(),u=new Le(o,s),d=a.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),d=a.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),!!d){if(!t&&!r.containsRange(d.range))return this._moveToPrevMatch(d.range.getStartPosition(),!0);this._setCurrentFindMatch(d.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){let t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),{lineNumber:n,column:r}=e,o=this._editor.getModel();return t||r===o.getLineMaxColumn(n)?(n===o.getLineCount()?n=1:n++,r=1):r++,new Le(n,r)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Kv){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}let t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,r=!1){if(this._cannotFind())return null;let o=this._decorations.getFindScope(),s=Z2._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(e)&&(e=s.getStartPosition()),e.isBefore(s.getStartPosition())&&(e=s.getStartPosition());let{lineNumber:a,column:u}=e,d=this._editor.getModel(),h=new Le(a,u),f=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t);return n&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),f=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t)),f?!r&&!s.containsRange(f.range)?this._getNextMatch(f.range.getEndPosition(),t,n,!0):f:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_getReplacePattern(){return this._state.isRegex?ZXe(this._state.replaceString):pS.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;let e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){let r=e.buildReplaceString(n.matches,this._state.preserveCase),o=new xs(t,r);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new Le(t.startLineNumber,t.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const r=(e||[null]).map(o=>Z2._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Kv?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new h1(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let f="mu";n.ignoreCase&&(f+="i"),n.global&&(f+="g"),n=new RegExp(n.source,f)}const r=this._editor.getModel(),o=r.getValue(1),s=r.getFullModelRange(),a=this._getReplacePattern();let u;const d=this._state.preserveCase;a.hasReplacementPatterns||d?u=o.replace(n,function(){return a.buildReplaceString(arguments,d)}):u=o.replace(n,a.buildReplaceString(null,d));let h=new aq(s,u,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)}_regularReplaceAll(e){const t=this._getReplacePattern();let n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let s=0,a=n.length;s<a;s++)r[s]=t.buildReplaceString(n[s].matches,this._state.preserveCase);let o=new GXe(this._editor.getSelection(),n.map(s=>s.range),r);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;let e=this._decorations.getFindScopes(),n=this._findMatches(e,!1,1073741824).map(o=>new yt(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)),r=this._editor.getSelection();for(let o=0,s=n.length;o<s;o++)if(n[o].equalsRange(r)){n=[r].concat(n.slice(0,o)).concat(n.slice(o+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const QXe={inputActiveOptionBorder:ye.fromHex("#007ACC00"),inputActiveOptionForeground:ye.fromHex("#FFFFFF"),inputActiveOptionBackground:ye.fromHex("#0E639C50")};class $M extends Vu{constructor(e){super(),this._onChange=this._register(new be),this.onChange=this._onChange.event,this._onKeyDown=this._register(new be),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},QXe),e),this._checked=this._opts.isChecked;const t=["monaco-custom-checkbox"];this._opts.icon&&t.push(...ja.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault()}),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 2+2+2+16}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const JXe=C("caseDescription","Match Case"),eQe=C("wordsDescription","Match Whole Word"),tQe=C("regexDescription","Use Regular Expression");class Gpe extends $M{constructor(e){super({icon:_e.caseSensitive,title:JXe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class qpe extends $M{constructor(e){super({icon:_e.wholeWord,title:eQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Ype extends $M{constructor(e){super({icon:_e.regex,title:tQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class t7 extends Vu{constructor(e,t,n,r){super(),this._hideSoon=this._register(new er(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o=r.getColorTheme().getColor(EH),s=r.getColorTheme().getColor(DH),a=r.getColorTheme().getColor(xH);this.caseSensitive=this._register(new Gpe({appendTitle:this._keybindingLabelFor(ar.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new qpe({appendTitle:this._keybindingLabelFor(ar.ToggleWholeWordCommand),isChecked:this._state.wholeWord,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new Ype({appendTitle:this._keybindingLabelFor(ar.ToggleRegexCommand),isChecked:this._state.isRegex,inputActiveOptionBorder:o,inputActiveOptionForeground:s,inputActiveOptionBackground:a})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(u=>{let d=!1;u.isRegex&&(this.regex.checked=this._state.isRegex,d=!0),u.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,d=!0),u.matchCase&&(this.caseSensitive.checked=this._state.matchCase,d=!0),!this._state.isRevealed&&d&&this._revealTemporarily()})),this._register(lG(this._domNode,u=>this._onMouseOut())),this._register(qe(this._domNode,"mouseover",u=>this._onMouseOver())),this._applyTheme(r.getColorTheme()),this._register(r.onDidColorThemeChange(this._applyTheme.bind(this)))}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return t7.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseOut(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(EH),inputActiveOptionForeground:e.getColor(DH),inputActiveOptionBackground:e.getColor(xH)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}t7.ID="editor.contrib.findOptionsWidget";hr((i,e)=>{const t=i.getColor(Yh);t&&e.addRule(`.monaco-editor .findOptionsWidget { background-color: ${t}; }`);const n=i.getColor(Cp);n&&e.addRule(`.monaco-editor .findOptionsWidget { color: ${n}; }`);const r=i.getColor(C0);r&&e.addRule(`.monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ${r}; }`);const o=i.getColor(ho);o&&e.addRule(`.monaco-editor .findOptionsWidget { border: 2px solid ${o}; }`)});function SP(i,e){return i===1?!0:i===2?!1:e}class nQe extends Oe{constructor(){super(),this._onFindReplaceStateChange=this._register(new be),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0}get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return SP(this._isRegexOverride,this._isRegex)}get wholeWord(){return SP(this._wholeWordOverride,this._wholeWord)}get matchCase(){return SP(this._matchCaseOverride,this._matchCase)}get preserveCase(){return SP(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}changeMatchInfo(e,t,n){let r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,r.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,r.matchesCount=!0,o=!0),typeof n<"u"&&(Q.equalsRange(this._currentMatch,n)||(this._currentMatch=n,r.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(r)}change(e,t,n=!0){var r;let o={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},s=!1;const a=this.isRegex,u=this.wholeWord,d=this.matchCase,h=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,s=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,s=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,s=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,s=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&(!((r=e.searchScope)===null||r===void 0)&&r.every(f=>{var p;return(p=this._searchScope)===null||p===void 0?void 0:p.some(m=>!Q.equalsRange(m,f))})||(this._searchScope=e.searchScope,o.searchScope=!0,s=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,s=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,o.isRegex=!0),u!==this.wholeWord&&(s=!0,o.wholeWord=!0),d!==this.matchCase&&(s=!0,o.matchCase=!0),h!==this.preserveCase&&(s=!0,o.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(o)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Kv}}const iQe=C("defaultLabel","input");class rQe extends Vu{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this._onDidOptionChange=this._register(new be),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new be),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new be),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new be),this._onKeyUp=this._register(new be),this._onCaseSensitiveKeyDown=this._register(new be),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new be),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||iQe,this.inputActiveOptionBorder=r.inputActiveOptionBorder,this.inputActiveOptionForeground=r.inputActiveOptionForeground,this.inputActiveOptionBackground=r.inputActiveOptionBackground,this.inputBackground=r.inputBackground,this.inputForeground=r.inputForeground,this.inputBorder=r.inputBorder,this.inputValidationInfoBorder=r.inputValidationInfoBorder,this.inputValidationInfoBackground=r.inputValidationInfoBackground,this.inputValidationInfoForeground=r.inputValidationInfoForeground,this.inputValidationWarningBorder=r.inputValidationWarningBorder,this.inputValidationWarningBackground=r.inputValidationWarningBackground,this.inputValidationWarningForeground=r.inputValidationWarningForeground,this.inputValidationErrorBorder=r.inputValidationErrorBorder,this.inputValidationErrorBackground=r.inputValidationErrorBackground,this.inputValidationErrorForeground=r.inputValidationErrorForeground;const o=r.appendCaseSensitiveLabel||"",s=r.appendWholeWordsLabel||"",a=r.appendRegexLabel||"",u=r.history||[],d=!!r.flexibleHeight,h=!!r.flexibleWidth,f=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new zhe(this.domNode,this.contextViewProvider,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:u,showHistoryHint:r.showHistoryHint,flexibleHeight:d,flexibleWidth:h,flexibleMaxHeight:f})),this.regex=this._register(new Ype({appendTitle:a,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.regex.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(v=>{this._onRegexKeyDown.fire(v)})),this.wholeWords=this._register(new qpe({appendTitle:s,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.wholeWords.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Gpe({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.caseSensitive.onChange(v=>{this._onDidOptionChange.fire(v),!v&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(v=>{this._onCaseSensitiveKeyDown.fire(v)})),this._showOptionButtons&&(this.inputBox.paddingRight=this.caseSensitive.width()+this.wholeWords.width()+this.regex.width());let p=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,v=>{if(v.equals(15)||v.equals(17)||v.equals(9)){let b=p.indexOf(document.activeElement);if(b>=0){let L=-1;v.equals(17)?L=(b+1)%p.length:v.equals(15)&&(b===0?L=p.length-1:L=b-1),v.equals(9)?(p[b].blur(),this.inputBox.focus()):L>=0&&p[L].focus(),Ni.stop(v,!0)}}});let m=document.createElement("div");m.className="controls",m.style.display=this._showOptionButtons?"block":"none",m.appendChild(this.caseSensitive.domNode),m.appendChild(this.wholeWords.domNode),m.appendChild(this.regex.domNode),this.domNode.appendChild(m),e&&e.appendChild(this.domNode),this._register(qe(this.inputBox.inputElement,"compositionstart",v=>{this.imeSessionInProgress=!0})),this._register(qe(this.inputBox.inputElement,"compositionend",v=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,v=>this._onKeyDown.fire(v)),this.onkeyup(this.inputBox.inputElement,v=>this._onKeyUp.fire(v)),this.oninput(this.inputBox.inputElement,v=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,v=>this._onMouseDown.fire(v))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive.checked}setCaseSensitive(e){this.caseSensitive.checked=e}getWholeWords(){return this.wholeWords.checked}setWholeWords(e){this.wholeWords.checked=e}getRegex(){return this.regex.checked}setRegex(e){this.regex.checked=e,this.validate()}focusOnCaseSensitive(){this.caseSensitive.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}clearMessage(){this.inputBox.hideMessage()}}const oQe=C("defaultLabel","input"),sQe=C("label.preserveCaseCheckbox","Preserve Case");class aQe extends $M{constructor(e){super({icon:_e.preserveCase,title:sQe+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class lQe extends Vu{constructor(e,t,n,r){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new be),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new be),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new be),this._onInput=this._register(new be),this._onKeyUp=this._register(new be),this._onPreserveCaseKeyDown=this._register(new be),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=r.placeholder||"",this.validation=r.validation,this.label=r.label||oQe,this.inputActiveOptionBorder=r.inputActiveOptionBorder,this.inputActiveOptionForeground=r.inputActiveOptionForeground,this.inputActiveOptionBackground=r.inputActiveOptionBackground,this.inputBackground=r.inputBackground,this.inputForeground=r.inputForeground,this.inputBorder=r.inputBorder,this.inputValidationInfoBorder=r.inputValidationInfoBorder,this.inputValidationInfoBackground=r.inputValidationInfoBackground,this.inputValidationInfoForeground=r.inputValidationInfoForeground,this.inputValidationWarningBorder=r.inputValidationWarningBorder,this.inputValidationWarningBackground=r.inputValidationWarningBackground,this.inputValidationWarningForeground=r.inputValidationWarningForeground,this.inputValidationErrorBorder=r.inputValidationErrorBorder,this.inputValidationErrorBackground=r.inputValidationErrorBackground,this.inputValidationErrorForeground=r.inputValidationErrorForeground;const o=r.appendPreserveCaseLabel||"",s=r.history||[],a=!!r.flexibleHeight,u=!!r.flexibleWidth,d=r.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new zhe(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder,history:s,showHistoryHint:r.showHistoryHint,flexibleHeight:a,flexibleWidth:u,flexibleMaxHeight:d})),this.preserveCase=this._register(new aQe({appendTitle:o,isChecked:!1,inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground})),this._register(this.preserveCase.onChange(p=>{this._onDidOptionChange.fire(p),!p&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(p=>{this._onPreserveCaseKeyDown.fire(p)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let h=[this.preserveCase.domNode];this.onkeydown(this.domNode,p=>{if(p.equals(15)||p.equals(17)||p.equals(9)){let m=h.indexOf(document.activeElement);if(m>=0){let v=-1;p.equals(17)?v=(m+1)%h.length:p.equals(15)&&(m===0?v=h.length-1:v=m-1),p.equals(9)?(h[m].blur(),this.inputBox.focus()):v>=0&&h[v].focus(),Ni.stop(p,!0)}}});let f=document.createElement("div");f.className="controls",f.style.display=this._showOptionButtons?"block":"none",f.appendChild(this.preserveCase.domNode),this.domNode.appendChild(f),e&&e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,p=>this._onKeyDown.fire(p)),this.onkeyup(this.inputBox.inputElement,p=>this._onKeyUp.fire(p)),this.oninput(this.inputBox.inputElement,p=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,p=>this._onMouseDown.fire(p))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}style(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}applyStyles(){if(this.domNode){const e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);const t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox&&this.inputBox.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var Zpe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Xpe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const xO="historyNavigationWidget",Qpe="historyNavigationForwardsEnabled",Jpe="historyNavigationBackwardsEnabled";function uQe(i,e,t){new Dt(t,e).bindTo(i)}function cQe(i,e){return i.createScoped(e.target)}function eme(i,e){return i.getContext(document.activeElement).getValue(e)}function tme(i,e){const t=cQe(i,e);uQe(t,e,xO);const n=new Dt(Qpe,!0).bindTo(t),r=new Dt(Jpe,!0).bindTo(t);return{scopedContextKeyService:t,historyNavigationForwardsEnablement:n,historyNavigationBackwardsEnablement:r}}let XU=class extends rQe{constructor(e,t,n,r,o=!1){super(e,t,o,n),this._register(tme(r,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};XU=Zpe([Xpe(3,dn)],XU);let QU=class extends lQe{constructor(e,t,n,r,o=!1){super(e,t,o,n),this._register(tme(r,{target:this.inputBox.element,historyNavigator:this.inputBox}).scopedContextKeyService)}};QU=Zpe([Xpe(3,dn)],QU);Os.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:_t.and(_t.has(xO),_t.equals(Jpe,!0),Un.Visible.isEqualTo(!1)),primary:16,secondary:[528],handler:i=>{const e=eme(i.get(dn),xO);e&&e.historyNavigator.showPreviousValue()}});Os.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:_t.and(_t.has(xO),_t.equals(Qpe,!0),Un.Visible.isEqualTo(!1)),primary:18,secondary:[530],handler:i=>{const e=eme(i.get(dn),xO);e&&e.historyNavigator.showNextValue()}});function Rie(i){var e,t;return((e=i.lookupKeybinding("history.showPrevious"))===null||e===void 0?void 0:e.getElectronAccelerator())==="Up"&&((t=i.lookupKeybinding("history.showNext"))===null||t===void 0?void 0:t.getElectronAccelerator())==="Down"}var dQe=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const hQe=ds("find-selection",_e.selection,C("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Pie=ds("find-collapsed",_e.chevronRight,C("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Fie=ds("find-expanded",_e.chevronDown,C("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),fQe=ds("find-replace",_e.replace,C("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),gQe=ds("find-replace-all",_e.replaceAll,C("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),pQe=ds("find-previous-match",_e.arrowUp,C("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),mQe=ds("find-next-match",_e.arrowDown,C("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),_Qe=C("label.find","Find"),vQe=C("placeholder.find","Find"),bQe=C("label.previousMatchButton","Previous Match"),CQe=C("label.nextMatchButton","Next Match"),wQe=C("label.toggleSelectionFind","Find in Selection"),yQe=C("label.closeButton","Close"),SQe=C("label.replace","Replace"),LQe=C("placeholder.replace","Replace"),EQe=C("label.replaceButton","Replace"),xQe=C("label.replaceAllButton","Replace All"),DQe=C("label.toggleReplaceButton","Toggle Replace"),IQe=C("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Kv),kQe=C("label.matchesLocation","{0} of {1}"),Bie=C("label.noResults","No results"),vf=419,TQe=275,NQe=TQe-54;let HN=69;const AQe=33,Wie="ctrlEnterReplaceAll.windows.donotask",Vie=qn?256:2048;class bW{constructor(e){this.afterLineNumber=e,this.heightInPx=AQe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Hie(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){i.stopPropagation();return}}function $ie(i,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){i.stopPropagation();return}}class n7 extends Vu{constructor(e,t,n,r,o,s,a,u,d){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=r,this._keybindingService=o,this._contextKeyService=s,this._storageService=u,this._notificationService=d,this._ctrlEnterReplaceAllWarningPrompted=!!u.getBoolean(Wie,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new Ap(500),this._register(Kn(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(80)&&(this._codeEditor.getOption(80)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(130)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(35)){const f=this._codeEditor.getOption(35).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new bW(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(()=>dQe(this,void 0,void 0,function*(){if(this._isVisible){let h=yield this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}}))),this._findInputFocused=e7.bindTo(s),this._findFocusTracker=this._register(Vy(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=eZ.bindTo(s),this._replaceFocusTracker=this._register(Vy(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(35).addExtraSpaceOnTop&&(this._viewZone=new bW(0)),this._applyTheme(a.getColorTheme()),this._register(a.onDidColorThemeChange(this._applyTheme.bind(this))),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return n7.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(80)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=Oc(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){let t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,gn)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=HN+"px",this._state.matchesCount>=Kv?this._matchesCount.title=IQe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild);let e;if(this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=Kv&&(t+="+");let n=String(this._state.matchesPosition);n==="0"&&(n="?"),e=ec(kQe,n,t)}else e=Bie;this._matchesCount.appendChild(document.createTextNode(e)),ks(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),HN=Math.max(HN,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===Bie)return n===""?C("ariaSearchNoResultEmpty","{0} found",e):C("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const r=C("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${r}`:r}return C("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){let e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);let e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);let n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const r=Us(n),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),s=r.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const u=eue(this._domNode).left;s>u&&(t=!1);const d=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());r.left+(d?d.left:0)>u&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(35).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(r=>{n.heightInPx=this._getHeight(),this._viewZoneId=r.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(35).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new bW(0));const n=this._viewZone;this._codeEditor.changeViewZones(r=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===n.heightInPx)return;let s=o-n.heightInPx;n.heightInPx=o,r.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(74).top,o<=0)return;n.heightInPx=o,this._viewZoneId=r.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_applyTheme(e){let t={inputActiveOptionBorder:e.getColor(EH),inputActiveOptionBackground:e.getColor(xH),inputActiveOptionForeground:e.getColor(DH),inputBackground:e.getColor(kG),inputForeground:e.getColor(TG),inputBorder:e.getColor(NG),inputValidationInfoBackground:e.getColor(Zue),inputValidationInfoForeground:e.getColor(Xue),inputValidationInfoBorder:e.getColor(Que),inputValidationWarningBackground:e.getColor(Jue),inputValidationWarningForeground:e.getColor(ece),inputValidationWarningBorder:e.getColor(tce),inputValidationErrorBackground:e.getColor(nce),inputValidationErrorForeground:e.getColor(ice),inputValidationErrorBorder:e.getColor(rce)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}_tryUpdateWidgetWidth(){if(!this._isVisible||!sG(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,r=e.minimap.minimapWidth;let o=!1,s=!1,a=!1;if(this._resized&&Oc(this._domNode)>vf){this._domNode.style.maxWidth=`${n-28-r-15}px`,this._replaceInput.width=Oc(this._findInput.domNode);return}if(vf+28+r>=n&&(s=!0),vf+28+r-HN>=n&&(a=!0),vf+28+r-HN>=n+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",s),!a&&!o&&(this._domNode.style.maxWidth=`${n-28-r-15}px`),this._resized){this._findInput.inputBox.layout();let u=this._findInput.inputBox.element.clientWidth;u>0&&(this._replaceInput.width=u)}else this._isReplaceVisible&&(this._replaceInput.width=Oc(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){let e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!Q.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(Vie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Hie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return $ie(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(Vie|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{As&&Gh&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(C("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Wie,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return Hie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return $ie(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){let t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new XU(null,this._contextViewProvider,{width:NQe,label:_Qe,placeholder:vQe,appendCaseSensitiveLabel:this._keybindingLabelFor(ar.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(ar.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(ar.ToggleRegexCommand),validation:u=>{if(u.length===0||!this._findInput.getRegex())return null;try{return new RegExp(u,"gu"),null}catch(d){return{content:d.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Rie(this._keybindingService)},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(u=>this._onFindInputKeyDown(u))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(u=>{u.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),u.preventDefault())})),this._register(this._findInput.onRegexKeyDown(u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),u.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(u=>{this._tryUpdateHeight()&&this._showViewZone()})),Xa&&this._register(this._findInput.onMouseDown(u=>this._onFindInputMouseDown(u))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new aw({label:bQe+this._keybindingLabelFor(ar.PreviousMatchFindAction),icon:pQe,onTrigger:()=>{this._codeEditor.getAction(ar.PreviousMatchFindAction).run().then(void 0,gn)}})),this._nextBtn=this._register(new aw({label:CQe+this._keybindingLabelFor(ar.NextMatchFindAction),icon:mQe,onTrigger:()=>{this._codeEditor.getAction(ar.NextMatchFindAction).run().then(void 0,gn)}}));let n=document.createElement("div");n.className="find-part",n.appendChild(this._findInput.domNode);const r=document.createElement("div");r.className="find-actions",n.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new $M({icon:hQe,title:wQe+this._keybindingLabelFor(ar.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let u=this._codeEditor.getSelections();u.map(d=>(d.endColumn===1&&d.endLineNumber>d.startLineNumber&&(d=d.setEndPosition(d.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(d.endLineNumber-1))),d.isEmpty()?null:d)).filter(d=>!!d),u.length&&this._state.change({searchScope:u},!0)}}else this._state.change({searchScope:null},!0)})),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new aw({label:yQe+this._keybindingLabelFor(ar.CloseFindWidgetCommand),icon:kde,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:u=>{u.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),u.preventDefault())}})),r.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new QU(null,void 0,{label:SQe,placeholder:LQe,appendPreserveCaseLabel:this._keybindingLabelFor(ar.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>Rie(this._keybindingService)},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(u=>this._onReplaceInputKeyDown(u))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(u=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(u=>{u.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),u.preventDefault())})),this._replaceBtn=this._register(new aw({label:EQe+this._keybindingLabelFor(ar.ReplaceOneAction),icon:fQe,onTrigger:()=>{this._controller.replace()},onKeyDown:u=>{u.equals(1026)&&(this._closeBtn.focus(),u.preventDefault())}})),this._replaceAllBtn=this._register(new aw({label:xQe+this._keybindingLabelFor(ar.ReplaceAllAction),icon:gQe,onTrigger:()=>{this._controller.replaceAll()}}));let o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",o.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new aw({label:DQe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=Oc(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width=`${vf}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(n),this._domNode.appendChild(o),this._resizeSash=new Hs(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let a=vf;this._register(this._resizeSash.onDidStart(()=>{a=Oc(this._domNode)})),this._register(this._resizeSash.onDidChange(u=>{this._resized=!0;let d=a+u.startX-u.currentX;if(d<vf)return;const h=parseFloat(cG(this._domNode).maxWidth)||0;d>h||(this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=Oc(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const u=Oc(this._domNode);if(u<vf)return;let d=vf;if(!this._resized||u===vf){const h=this._codeEditor.getLayoutInfo();d=h.width-28-h.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${d}px`,this._isReplaceVisible&&(this._replaceInput.width=Oc(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}}n7.ID="editor.contrib.findWidget";class aw extends Vu{constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+pr.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,n=>{this._opts.onTrigger(),n.preventDefault()}),this.onkeydown(this._domNode,n=>{if(n.equals(10)||n.equals(3)){this._opts.onTrigger(),n.preventDefault();return}this._opts.onKeyDown&&this._opts.onKeyDown(n)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...pr.asClassNameArray(Pie)),this._domNode.classList.add(...pr.asClassNameArray(Fie))):(this._domNode.classList.remove(...pr.asClassNameArray(Fie)),this._domNode.classList.add(...pr.asClassNameArray(Pie)))}}hr((i,e)=>{const t=(v,b)=>{b&&e.addRule(`.monaco-editor ${v} { background-color: ${b}; }`)};t(".findMatch",i.getColor(kH)),t(".currentFindMatch",i.getColor(eIe)),t(".findScope",i.getColor(tIe));const n=i.getColor(Yh);t(".find-widget",n);const r=i.getColor(C0);r&&e.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${r}; }`);const o=i.getColor(iIe);o&&e.addRule(`.monaco-editor .findMatch { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const s=i.getColor(nIe);s&&e.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${s}; padding: 1px; box-sizing: border-box; }`);const a=i.getColor(rIe);a&&e.addRule(`.monaco-editor .findScope { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; }`);const u=i.getColor(ho);u&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${u}; }`);const d=i.getColor(Cp);d&&e.addRule(`.monaco-editor .find-widget { color: ${d}; }`);const h=i.getColor(MDe);h&&e.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${h}; }`);const f=i.getColor(zDe);if(f)e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${f}; }`);else{const v=i.getColor(QP);v&&e.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${v}; }`)}const p=i.getColor(zIe);p&&e.addRule(`
		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: ${p} !important;
		}
	`);const m=i.getColor(Db);m&&e.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${m}; }`)});var nme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},If=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},Zb=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const OQe=524288;function JU(i,e="single",t=!1){if(!i.hasModel())return null;const n=i.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const r=i.getConfiguredWordAtPosition(n.getStartPosition());if(r&&t===!1)return r.word}else if(i.getModel().getValueLengthInRange(n)<OQe)return i.getModel().getValueInRange(n)}return null}let Il=class ime extends Oe{constructor(e,t,n,r){super(),this._editor=e,this._findWidgetVisible=PC.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=r,this._updateHistoryDelayer=new Ap(500),this._state=this._register(new nQe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(o=>this._onStateChanged(o))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{let o=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),o&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(35).loop})}))}get editor(){return this._editor}static get(e){return e.getContribution(ime.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!e7.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=hc(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return Zb(this,void 0,void 0,function*(){if(this.disposeModel(),!this._editor.hasModel())return;let n=Object.assign(Object.assign({},t),{isRevealed:!0});if(e.seedSearchStringFromSelection==="single"){let r=JU(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);r&&(this._state.isRegex?n.searchString=hc(r):n.searchString=r)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){let r=JU(this._editor,e.seedSearchStringFromSelection);r&&(n.searchString=r)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){let r=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;r&&(n.searchString=r)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){let r=this._editor.getSelections();r.some(o=>!o.isEmpty())&&(n.searchScope=r)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new Z2(this._editor,this._state))})}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}getGlobalBufferTerm(){return Zb(this,void 0,void 0,function*(){return this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""})}setGlobalBufferTerm(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};Il.ID="editor.contrib.findController";Il=nme([If(1,dn),If(2,Ig),If(3,j0)],Il);let ej=class extends Il{constructor(e,t,n,r,o,s,a,u){super(e,n,a,u),this._contextViewService=t,this._keybindingService=r,this._themeService=o,this._notificationService=s,this._widget=null,this._findOptionsWidget=null}_start(e,t){const n=Object.create(null,{_start:{get:()=>super._start}});return Zb(this,void 0,void 0,function*(){this._widget||this._createFindWidget();const r=this._editor.getSelection();let o=!1;switch(this._editor.getOption(35).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":o=!!r&&r.startLineNumber!==r.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||o,yield n._start.call(this,e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())})}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new n7(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new t7(this._editor,this._state,this._keybindingService,this._themeService))}};ej=nme([If(1,$p),If(2,dn),If(3,Sr),If(4,Er),If(5,fo),If(6,Ig),If(7,j0)],ej);const MQe=Due(new xue({id:ar.StartFindAction,label:C("startFindAction","Find"),alias:"Find",precondition:_t.or(de.focus,_t.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"3_find",title:C({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));MQe.addImplementation(0,(i,e,t)=>{const n=Il.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop}):!1});const RQe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:C("actions.find.isRegexOverride",`Overrides "Use Regular Expression" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:C("actions.find.wholeWordOverride",`Overrides "Match Whole Word" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:C("actions.find.matchCaseOverride",`Overrides "Math Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:C("actions.find.preserveCaseOverride",`Overrides "Preserve Case" flag.
The flag will not be saved for the future.
0: Do Nothing
1: True
2: False`)},findInSelection:{type:"boolean"}}}}]};class PQe extends Et{constructor(){super({id:ar.StartFindWithArgs,label:C("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:RQe})}run(e,t,n){return Zb(this,void 0,void 0,function*(){let r=Il.get(t);if(r){const o=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};yield r.start({forceRevealReplace:!1,seedSearchStringFromSelection:r.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(35).loop},o),r.setGlobalBufferTerm(r.getState().searchString)}})}}class FQe extends Et{constructor(){super({id:ar.StartFindWithSelection,label:C("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return Zb(this,void 0,void 0,function*(){let n=Il.get(t);n&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),n.setGlobalBufferTerm(n.getState().searchString))})}}class rme extends Et{run(e,t){return Zb(this,void 0,void 0,function*(){let n=Il.get(t);n&&!this._run(n)&&(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class BQe extends rme{constructor(){super({id:ar.NextMatchFindAction,label:C("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:de.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:_t.and(de.focus,e7),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class WQe extends rme{constructor(){super({id:ar.PreviousMatchFindAction,label:C("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:de.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:_t.and(de.focus,e7),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class ome extends Et{run(e,t){return Zb(this,void 0,void 0,function*(){let n=Il.get(t);if(!n)return;const r=t.getOption(35).seedSearchStringFromSelection==="selection";let o=null;t.getOption(35).seedSearchStringFromSelection!=="never"&&(o=JU(t,"single",r)),o&&n.setSearchString(o),this._run(n)||(yield n.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getOption(35).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:r,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop}),this._run(n))})}}class VQe extends ome{constructor(){super({id:ar.NextSelectionMatchFindAction,label:C("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class HQe extends ome{constructor(){super({id:ar.PreviousSelectionMatchFindAction,label:C("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const $Qe=Due(new xue({id:ar.StartFindReplaceAction,label:C("startReplace","Replace"),alias:"Replace",precondition:_t.or(de.focus,_t.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:Mt.MenubarEditMenu,group:"3_find",title:C({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));$Qe.addImplementation(0,(i,e,t)=>{if(!e.hasModel()||e.getOption(80))return!1;const n=Il.get(e);if(!n)return!1;const r=e.getSelection(),o=n.isFindInputFocused(),s=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&e.getOption(35).seedSearchStringFromSelection!=="never"&&!o,a=o||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(35).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(35).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(35).loop})});Ti(Il.ID,ej);it(PQe);it(FQe);it(BQe);it(WQe);it(VQe);it(HQe);const hf=Ps.bindToContribution(Il.get);nt(new hf({id:ar.CloseFindWidgetCommand,precondition:PC,handler:i=>i.closeFindWidget(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,_t.not("isComposing")),primary:9,secondary:[1033]}}));nt(new hf({id:ar.ToggleCaseSensitiveCommand,precondition:void 0,handler:i=>i.toggleCaseSensitive(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:vP.primary,mac:vP.mac,win:vP.win,linux:vP.linux}}));nt(new hf({id:ar.ToggleWholeWordCommand,precondition:void 0,handler:i=>i.toggleWholeWords(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:bP.primary,mac:bP.mac,win:bP.win,linux:bP.linux}}));nt(new hf({id:ar.ToggleRegexCommand,precondition:void 0,handler:i=>i.toggleRegex(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:CP.primary,mac:CP.mac,win:CP.win,linux:CP.linux}}));nt(new hf({id:ar.ToggleSearchScopeCommand,precondition:void 0,handler:i=>i.toggleSearchScope(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:wP.primary,mac:wP.mac,win:wP.win,linux:wP.linux}}));nt(new hf({id:ar.TogglePreserveCaseCommand,precondition:void 0,handler:i=>i.togglePreserveCase(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:yP.primary,mac:yP.mac,win:yP.win,linux:yP.linux}}));nt(new hf({id:ar.ReplaceOneAction,precondition:PC,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:3094}}));nt(new hf({id:ar.ReplaceOneAction,precondition:PC,handler:i=>i.replace(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,eZ),primary:3}}));nt(new hf({id:ar.ReplaceAllAction,precondition:PC,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:2563}}));nt(new hf({id:ar.ReplaceAllAction,precondition:PC,handler:i=>i.replaceAll(),kbOpts:{weight:100+5,kbExpr:_t.and(de.focus,eZ),primary:void 0,mac:{primary:2051}}}));nt(new hf({id:ar.SelectAllMatchesAction,precondition:PC,handler:i=>i.selectAllMatches(),kbOpts:{weight:100+5,kbExpr:de.focus,primary:515}}));const zie=65535,ap=16777215,Uie=4278190080;class DO{constructor(e,t,n){if(e.length!==t.length||e.length>zie)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new Uint32Array(Math.ceil(e.length/32)),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],t=(n,r)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=r};for(let n=0,r=this._startIndexes.length;n<r;n++){let o=this._startIndexes[n],s=this._endIndexes[n];if(o>ap||s>ap)throw new Error("startLineNumber or endLineNumber must not exceed "+ap);for(;e.length>0&&!t(o,s);)e.pop();let a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=s+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&ap}getEndLineNumber(e){return this._endIndexes[e]&ap}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){let t=e/32|0,n=e%32;return(this._collapseStates[t]&1<<n)!==0}setCollapsed(e,t){let n=e/32|0,r=e%32,o=this._collapseStates[n];t?this._collapseStates[n]=o|1<<r:this._collapseStates[n]=o&~(1<<r)}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let r=0;r<this._types.length;r++)this._types[r]===e&&(this.setCollapsed(r,t),n=!0);return n}toRegion(e){return new zQe(this,e)}getParentIndex(e){this.ensureParentIndices();let t=((this._startIndexes[e]&Uie)>>>24)+((this._endIndexes[e]&Uie)>>>16);return t===zie?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){let r=Math.floor((t+n)/2);e<this.getStartLineNumber(r)?n=r:t=r+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){let e=[];for(let t=0;t<this.length;t++)e[t]=`[${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}}class zQe{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class UQe{constructor(e,t){this._updateEventEmitter=new be,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new DO(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}get regions(){return this._regions}get textModel(){return this._textModel}get isInitialized(){return this._isInitialized}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,r)=>n.regionIndex-r.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let r=0,o=-1,s=-1;const a=u=>{for(;r<u;){const d=this._regions.getEndLineNumber(r),h=this._regions.isCollapsed(r);d<=o&&n.changeDecorationOptions(this._editorDecorationIds[r],this._decorationProvider.getDecorationOption(h,d<=s)),h&&d>s&&(s=d),r++}};for(let u of e){let d=u.regionIndex,h=this._editorDecorationIds[d];if(h&&!t[h]){t[h]=!0,a(d);let f=!this._regions.isCollapsed(d);this._regions.setCollapsed(d,f),o=Math.max(o,this._regions.getEndLineNumber(d))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}update(e,t=[]){let n=[],r=(f,p)=>{for(let m of t)if(f<m&&m<=p)return!0;return!1},o=-1,s=(f,p)=>{const m=e.getStartLineNumber(f),v=e.getEndLineNumber(f);p||(p=e.isCollapsed(f)),p&&r(m,v)&&(p=!1),e.setCollapsed(f,p);const b=this._textModel.getLineMaxColumn(m),L={startLineNumber:m,startColumn:Math.max(b-1,1),endLineNumber:m,endColumn:b};n.push({range:L,options:this._decorationProvider.getDecorationOption(p,v<=o)}),p&&v>o&&(o=v)},a=0,u=()=>{for(;a<this._regions.length;){let f=this._regions.isCollapsed(a);if(a++,f)return a-1}return-1},d=0,h=u();for(;h!==-1&&d<e.length;){let f=this._textModel.getDecorationRange(this._editorDecorationIds[h]);if(f){let p=f.startLineNumber;if(f.startColumn===Math.max(f.endColumn-1,1)&&this._textModel.getLineMaxColumn(p)===f.endColumn)for(;d<e.length;){let m=e.getStartLineNumber(d);if(p>=m)s(d,p===m),d++;else break}}h=u()}for(;d<e.length;)s(d,!1),d++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,n),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}getMemento(){let e=[];for(let t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){let n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){let r=n.startLineNumber,o=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:r,endLineNumber:o})}}if(e.length>0)return e}applyMemento(e){if(!Array.isArray(e))return;let t=[];for(let n of e){let r=this.getRegionAtLine(n.startLineNumber);r&&!r.isCollapsed&&t.push(r)}this.toggleCollapseState(t)}dispose(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}getAllRegionsAtLine(e,t){let n=[];if(this._regions){let r=this._regions.findRange(e),o=1;for(;r>=0;){let s=this._regions.toRegion(r);(!t||t(s,o))&&n.push(s),o++,r=s.parentIndex}}return n}getRegionAtLine(e){if(this._regions){let t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){let n=[],r=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const s=[];for(let a=r,u=this._regions.length;a<u;a++){let d=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;s.length>0&&!d.containedBy(s[s.length-1]);)s.pop();s.push(d),t(d,s.length)&&n.push(d)}else break}}else for(let s=r,a=this._regions.length;s<a;s++){let u=this._regions.toRegion(s);if(this._regions.getStartLineNumber(s)<o)(!t||t(u))&&n.push(u);else break}return n}}function jQe(i,e,t){let n=[];for(let r of t){let o=i.getRegionAtLine(r);if(o){const s=!o.isCollapsed;if(n.push(o),e>1){let a=i.getRegionsInside(o,(u,d)=>u.isCollapsed!==s&&d<e);n.push(...a)}}}i.toggleCollapseState(n)}function aL(i,e,t=Number.MAX_VALUE,n){let r=[];if(n&&n.length>0)for(let o of n){let s=i.getRegionAtLine(o);if(s&&(s.isCollapsed!==e&&r.push(s),t>1)){let a=i.getRegionsInside(s,(u,d)=>u.isCollapsed!==e&&d<t);r.push(...a)}}else{let o=i.getRegionsInside(null,(s,a)=>s.isCollapsed!==e&&a<t);r.push(...o)}i.toggleCollapseState(r)}function sme(i,e,t,n){let r=[];for(let o of n){let s=i.getAllRegionsAtLine(o,(a,u)=>a.isCollapsed!==e&&u<=t);r.push(...s)}i.toggleCollapseState(r)}function KQe(i,e,t){let n=[];for(let r of t){let o=i.getAllRegionsAtLine(r,s=>s.isCollapsed!==e);o.length>0&&n.push(o[0])}i.toggleCollapseState(n)}function GQe(i,e,t,n){let r=(s,a)=>a===e&&s.isCollapsed!==t&&!n.some(u=>s.containsLine(u)),o=i.getRegionsInside(null,r);i.toggleCollapseState(o)}function ame(i,e,t){let n=[];for(let s of t)n.push(i.getAllRegionsAtLine(s,void 0)[0]);let r=s=>n.every(a=>!a.containedBy(s)&&!s.containedBy(a))&&s.isCollapsed!==e,o=i.getRegionsInside(null,r);i.toggleCollapseState(o)}function tZ(i,e,t){let n=i.textModel,r=i.regions,o=[];for(let s=r.length-1;s>=0;s--)if(t!==r.isCollapsed(s)){let a=r.getStartLineNumber(s);e.test(n.getLineContent(a))&&o.push(r.toRegion(s))}i.toggleCollapseState(o)}function nZ(i,e,t){let n=i.regions,r=[];for(let o=n.length-1;o>=0;o--)t!==n.isCollapsed(o)&&e===n.getType(o)&&r.push(n.toRegion(o));i.toggleCollapseState(r)}function qQe(i,e){let t=null,n=e.getRegionAtLine(i);if(n!==null&&(t=n.startLineNumber,i===t)){let r=n.parentIndex;r!==-1?t=e.regions.getStartLineNumber(r):t=null}return t}function YQe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){if(i!==t.startLineNumber)return t.startLineNumber;{let n=t.parentIndex,r=0;for(n!==-1&&(r=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<i)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function ZQe(i,e){let t=e.getRegionAtLine(i);if(t!==null&&t.startLineNumber===i){let n=t.parentIndex,r=0;if(n!==-1)r=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;r=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=r)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>i)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class XQe{constructor(e){this._updateEventEmitter=new be,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||Nb(t.text)[0]!==0))}updateHiddenRanges(){let e=!1,t=[],n=0,r=0,o=Number.MAX_VALUE,s=-1,a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;let u=a.getStartLineNumber(n)+1,d=a.getEndLineNumber(n);o<=u&&d<=s||(!e&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===u&&this._hiddenRanges[r].endLineNumber===d?(t.push(this._hiddenRanges[r]),r++):(e=!0,t.push(new Q(u,1,d,1))),o=u,s=d)}(this._hasLineChanges||e||r<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyMemento(e){if(!Array.isArray(e)||e.length===0)return!1;let t=[];for(let n of e){if(!n.startLineNumber||!n.endLineNumber)return!1;t.push(new Q(n.startLineNumber+1,1,n.endLineNumber,1))}return this.applyHiddenRanges(t),!0}getMemento(){return this._hiddenRanges.map(e=>({startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}))}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return jie(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1,n=this._foldingModel.textModel,r=null,o=s=>((!r||!QQe(s,r))&&(r=jie(this._hiddenRanges,s)),r?r.startLineNumber-1:null);for(let s=0,a=e.length;s<a;s++){let u=e[s],d=o(u.startLineNumber);d&&(u=u.setStartPosition(d,n.getLineMaxColumn(d)),t=!0);let h=o(u.endLineNumber);h&&(u=u.setEndPosition(h,n.getLineMaxColumn(h)),t=!0),e[s]=u}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function QQe(i,e){return i>=e.startLineNumber&&i<=e.endLineNumber}function jie(i,e){let t=Oue(i,n=>e<n.startLineNumber)-1;return t>=0&&i[t].endLineNumber>=e?i[t]:null}const JQe=5e3,eJe="indent";class tJe{constructor(e){this.editorModel=e,this.id=eJe}dispose(){}compute(e){let t=vi.getFoldingRules(this.editorModel.getLanguageId()),n=t&&!!t.offSide,r=t&&t.markers;return Promise.resolve(iJe(this.editorModel,n,r))}}let nJe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>ap||t>ap)return;let r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){if(this._length<=this._foldingRangesLimit){let t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,o=0;r>=0;r--,o++)t[o]=this._startIndexes[r],n[o]=this._endIndexes[r];return new DO(t,n)}else{let t=0,n=this._indentOccurrences.length;for(let a=0;a<this._indentOccurrences.length;a++){let u=this._indentOccurrences[a];if(u){if(u+t>this._foldingRangesLimit){n=a;break}t+=u}}const r=e.getOptions().tabSize;let o=new Uint32Array(this._foldingRangesLimit),s=new Uint32Array(this._foldingRangesLimit);for(let a=this._length-1,u=0;a>=0;a--){let d=this._startIndexes[a],h=e.getLineContent(d),f=Ll.computeIndentLevel(h,r);(f<n||f===n&&t++<this._foldingRangesLimit)&&(o[u]=d,s[u]=this._endIndexes[a],u++)}return new DO(o,s)}}};function iJe(i,e,t,n=JQe){const r=i.getOptions().tabSize;let o=new nJe(n),s;t&&(s=new RegExp(`(${t.start.source})|(?:${t.end.source})`));let a=[],u=i.getLineCount()+1;a.push({indent:-1,endAbove:u,line:u});for(let d=i.getLineCount();d>0;d--){let h=i.getLineContent(d),f=Ll.computeIndentLevel(h,r),p=a[a.length-1];if(f===-1){e&&(p.endAbove=d);continue}let m;if(s&&(m=h.match(s)))if(m[1]){let v=a.length-1;for(;v>0&&a[v].indent!==-2;)v--;if(v>0){a.length=v+1,p=a[v],o.insertFirst(d,p.line,f),p.line=d,p.indent=f,p.endAbove=d;continue}}else{a.push({indent:-2,endAbove:d,line:d});continue}if(p.indent>f){do a.pop(),p=a[a.length-1];while(p.indent>f);let v=p.endAbove-1;v-d>=1&&o.insertFirst(d,v,f)}p.indent===f?p.endAbove=d:a.push({indent:f,endAbove:d,line:d})}return o.toIndentRanges(i)}const rJe=5e3,oJe={},lme="syntax";class sJe{constructor(e,t,n,r=rJe){this.editorModel=e,this.providers=t,this.limit=r,this.id=lme;for(const o of t)typeof o.onDidChange=="function"&&(this.disposables||(this.disposables=new Qe),this.disposables.add(o.onDidChange(n)))}compute(e){return aJe(this.providers,this.editorModel,e).then(t=>t?ume(t,this.limit):null)}dispose(){var e;(e=this.disposables)===null||e===void 0||e.dispose()}}function aJe(i,e,t){let n=null,r=i.map((o,s)=>Promise.resolve(o.provideFoldingRanges(e,oJe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);let u=e.getLineCount();for(let d of a)d.start>0&&d.end>d.start&&d.end<=u&&n.push({start:d.start,end:d.end,rank:s,kind:d.kind})}},Rs));return Promise.all(r).then(o=>n)}class lJe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,r){if(e>ap||t>ap)return;let o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=r,this._types[o]=n,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)}toIndentRanges(){if(this._length<=this._foldingRangesLimit){let e=new Uint32Array(this._length),t=new Uint32Array(this._length);for(let n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new DO(e,t,this._types)}else{let e=0,t=this._nestingLevelCounts.length;for(let s=0;s<this._nestingLevelCounts.length;s++){let a=this._nestingLevelCounts[s];if(a){if(a+e>this._foldingRangesLimit){t=s;break}e+=a}}let n=new Uint32Array(this._foldingRangesLimit),r=new Uint32Array(this._foldingRangesLimit),o=[];for(let s=0,a=0;s<this._length;s++){let u=this._nestingLevels[s];(u<t||u===t&&e++<this._foldingRangesLimit)&&(n[a]=this._startIndexes[s],r[a]=this._endIndexes[s],o[a]=this._types[s],a++)}return new DO(n,r,o)}}}function ume(i,e){let t=i.sort((s,a)=>{let u=s.start-a.start;return u===0&&(u=s.rank-a.rank),u}),n=new lJe(e),r,o=[];for(let s of t)if(!r)r=s,n.add(s.start,s.end,s.kind&&s.kind.value,o.length);else if(s.start>r.start)if(s.end<=r.end)o.push(r),r=s,n.add(s.start,s.end,s.kind&&s.kind.value,o.length);else{if(s.start>r.end){do r=o.pop();while(r&&s.start>r.end);r&&o.push(r),r=s}n.add(s.start,s.end,s.kind&&s.kind.value,o.length)}return n.toIndentRanges()}const cme="init";class uJe{constructor(e,t,n,r){if(this.editorModel=e,this.id=cme,t.length){let o=s=>({range:{startLineNumber:s.startLineNumber,startColumn:0,endLineNumber:s.endLineNumber,endColumn:e.getLineLength(s.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}});this.decorationIds=e.deltaDecorations([],t.map(o)),this.timeout=setTimeout(n,r)}}dispose(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),typeof this.timeout=="number"&&(clearTimeout(this.timeout),this.timeout=void 0)}compute(e){let t=[];if(this.decorationIds)for(let n of this.decorationIds){let r=this.editorModel.getDecorationRange(n);r&&t.push({start:r.startLineNumber,end:r.endLineNumber,rank:1})}return Promise.resolve(ume(t,Number.MAX_VALUE))}}const iZ=ds("folding-expanded",_e.chevronDown,C("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),rZ=ds("folding-collapsed",_e.chevronRight,C("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin."));class jc{constructor(e){this.editor=e,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}getDecorationOption(e,t){return t?jc.HIDDEN_RANGE_DECORATION:e?this.showFoldingHighlights?jc.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:jc.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?jc.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:jc.EXPANDED_VISUAL_DECORATION}deltaDecorations(e,t){return this.editor.deltaDecorations(e,t)}changeDecorations(e){return this.editor.changeDecorations(e)}}jc.COLLAPSED_VISUAL_DECORATION=Sn.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:pr.asClassName(rZ)});jc.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Sn.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:pr.asClassName(rZ)});jc.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Sn.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:pr.asClassName(iZ)});jc.EXPANDED_VISUAL_DECORATION=Sn.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+pr.asClassName(iZ)});jc.HIDDEN_RANGE_DECORATION=Sn.register({description:"folding-hidden-range-decoration",stickiness:1});var cJe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},dJe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const Ra=new Dt("foldingEnabled",!1);let mS=class dme extends Oe{constructor(e,t){super(),this.contextKeyService=t,this.localToDispose=this._register(new Qe),this.editor=e;const n=this.editor.getOptions();this._isEnabled=n.get(37),this._useFoldingProviders=n.get(38)!=="indentation",this._unfoldOnClickAfterEndOfLine=n.get(41),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=n.get(40),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingStateMemento=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new jc(e),this.foldingDecorationProvider.autoHideFoldingControls=n.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=n.get(39),this.foldingEnabled=Ra.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(r=>{if(r.hasChanged(37)&&(this._isEnabled=this.editor.getOptions().get(37),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),r.hasChanged(98)||r.hasChanged(39)){const o=this.editor.getOptions();this.foldingDecorationProvider.autoHideFoldingControls=o.get(98)==="mouseover",this.foldingDecorationProvider.showFoldingHighlights=o.get(39),this.triggerFoldingModelChanged()}r.hasChanged(38)&&(this._useFoldingProviders=this.editor.getOptions().get(38)!=="indentation",this.onFoldingStrategyChanged()),r.hasChanged(41)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(41)),r.hasChanged(40)&&(this._foldingImportsByDefault=this.editor.getOptions().get(40))})),this.onModelChanged()}static get(e){return e.getContribution(dme.ID)}saveViewState(){let e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){let t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){let t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel||!e||e.lineCount!==t.getLineCount()||(this._currentModelHasFoldedImports=!!e.foldedImports,!e.collapsedRegions))return;(e.provider===lme||e.provider===cme)&&(this.foldingStateMemento=e);const n=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(n)){const r=this.getFoldingModel();r&&r.then(o=>{if(o){this._restoringViewState=!0;try{o.applyMemento(n)}finally{this._restoringViewState=!1}}}).then(void 0,gn)}}onModelChanged(){this.localToDispose.clear();let e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new UQe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new XQe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new Ap(200),this.cursorChangedScheduler=new er(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(WH.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler&&this.updateScheduler.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.foldingStateMemento=null,this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new tJe(e),this._useFoldingProviders&&this.foldingModel){let t=WH.ordered(this.foldingModel.textModel);if(t.length===0&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new uJe(e,this.foldingStateMemento.collapsedRegions,()=>{this.foldingStateMemento=null,this.onFoldingStrategyChanged()},3e4);t.length>0&&(this.rangeProvider=new sJe(e,t,()=>this.triggerFoldingModelChanged()))}return this.foldingStateMemento=null,this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)===null||t===void 0||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=this.getRangeProvider(e.textModel);let n=this.foldingRegionPromise=cs(r=>t.compute(r));return n.then(r=>{if(r&&n===this.foldingRegionPromise){let o;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const u=r.setCollapsedAllOfType(tf.Imports.value,!0);u&&(o=L0.capture(this.editor),this._currentModelHasFoldedImports=u)}let s=this.editor.getSelections(),a=s?s.map(u=>u.startLineNumber):[];e.update(r,a),o&&o.restore(this.editor)}return e})}).then(void 0,e=>(gn(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){let t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){let n=this.editor.getSelections();if(n&&n.length>0){let r=[];for(let o of n){let s=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(s)&&r.push(...t.getAllRegionsAtLine(s,a=>a.isCollapsed&&s>a.startLineNumber))}r.length&&(t.toggleCollapseState(r),this.reveal(n[0].getPosition()))}}}).then(void 0,gn)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:const r=e.target.detail,o=e.target.element.offsetLeft;if(r.offsetX-o<5)return;n=!0;break;case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){let a=this.editor.getModel();if(a&&t.startColumn===a.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.getFoldingModel();if(!t||!this.mouseDownInfo||!e.target)return;let n=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,o=e.target.range;if(!(!o||o.startLineNumber!==n)){if(r){if(e.target.type!==4)return}else{let s=this.editor.getModel();if(!s||o.startColumn!==s.getLineMaxColumn(n))return}t.then(s=>{if(s){let a=s.getRegionAtLine(n);if(a&&a.startLineNumber===n){let u=a.isCollapsed;if(r||u){let d=e.event.altKey,h=[];if(d){let f=m=>!m.containedBy(a)&&!a.containedBy(m),p=s.getRegionsInside(null,f);for(const m of p)m.isCollapsed&&h.push(m);h.length===0&&(h=p)}else{let f=e.event.middleButton||e.event.shiftKey;if(f)for(const p of s.getRegionsInside(a))p.isCollapsed===u&&h.push(p);(u||!f||h.length===0)&&h.push(a)}s.toggleCollapseState(h),this.reveal({lineNumber:n,column:1})}}}}).then(void 0,gn)}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}};mS.ID="editor.contrib.folding";mS=cJe([dJe(1,dn)],mS);class rl extends Et{runEditorCommand(e,t,n){let r=mS.get(t);if(!r)return;let o=r.getFoldingModel();if(o)return this.reportTelemetry(e,t),o.then(s=>{if(s){this.invoke(r,s,t,n);const a=t.getSelection();a&&r.reveal(a.getStartPosition())}})}getSelectedLines(e){let t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function hme(i){if(!pl(i)){if(!Ga(i))return!1;const e=i;if(!pl(e.levels)&&!Sb(e.levels)||!pl(e.direction)&&!dc(e.direction)||!pl(e.selectionLines)&&(!lue(e.selectionLines)||!e.selectionLines.every(Sb)))return!1}return!0}class hJe extends rl{constructor(){super({id:"editor.unfold",label:C("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:hme,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){let o=r&&r.levels||1,s=this.getLineNumbers(r,n);r&&r.direction==="up"?sme(t,!1,o,s):aL(t,!1,o,s)}}class fJe extends rl{constructor(){super({id:"editor.unfoldRecursively",label:C("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2137),weight:100}})}invoke(e,t,n,r){aL(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class gJe extends rl{constructor(){super({id:"editor.fold",label:C("foldAction.label","Fold"),alias:"Fold",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:hme,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,r){let o=this.getLineNumbers(r,n);const s=r&&r.levels,a=r&&r.direction;typeof s!="number"&&typeof a!="string"?KQe(t,!0,o):a==="up"?sme(t,!0,s||1,o):aL(t,!0,s||1,o)}}class pJe extends rl{constructor(){super({id:"editor.toggleFold",label:C("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2090),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);jQe(t,1,r)}}class mJe extends rl{constructor(){super({id:"editor.foldRecursively",label:C("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2135),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);aL(t,!0,Number.MAX_VALUE,r)}}class _Je extends rl{constructor(){super({id:"editor.foldAllBlockComments",label:C("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2133),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())nZ(t,tf.Comment.value,!0);else{const r=n.getModel();if(!r)return;const o=vi.getComments(r.getLanguageId());if(o&&o.blockCommentStartToken){let s=new RegExp("^\\s*"+hc(o.blockCommentStartToken));tZ(t,s,!0)}}}}class vJe extends rl{constructor(){super({id:"editor.foldAllMarkerRegions",label:C("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2077),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())nZ(t,tf.Region.value,!0);else{const r=n.getModel();if(!r)return;const o=vi.getFoldingRules(r.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);tZ(t,s,!0)}}}}class bJe extends rl{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:C("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2078),weight:100}})}invoke(e,t,n){if(t.regions.hasTypes())nZ(t,tf.Region.value,!1);else{const r=n.getModel();if(!r)return;const o=vi.getFoldingRules(r.getLanguageId());if(o&&o.markers&&o.markers.start){let s=new RegExp(o.markers.start);tZ(t,s,!1)}}}}class CJe extends rl{constructor(){super({id:"editor.foldAllExcept",label:C("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2131),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);ame(t,!0,r)}}class wJe extends rl{constructor(){super({id:"editor.unfoldAllExcept",label:C("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2129),weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);ame(t,!1,r)}}class yJe extends rl{constructor(){super({id:"editor.foldAll",label:C("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2069),weight:100}})}invoke(e,t,n){aL(t,!0)}}class SJe extends rl{constructor(){super({id:"editor.unfoldAll",label:C("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2088),weight:100}})}invoke(e,t,n){aL(t,!1)}}class Xb extends rl{getFoldingLevel(){return parseInt(this.id.substr(Xb.ID_PREFIX.length))}invoke(e,t,n){GQe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}Xb.ID_PREFIX="editor.foldLevel";Xb.ID=i=>Xb.ID_PREFIX+i;class LJe extends rl{constructor(){super({id:"editor.gotoParentFold",label:C("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let o=qQe(r[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class EJe extends rl{constructor(){super({id:"editor.gotoPreviousFold",label:C("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let o=YQe(r[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class xJe extends rl{constructor(){super({id:"editor.gotoNextFold",label:C("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,weight:100}})}invoke(e,t,n){let r=this.getSelectedLines(n);if(r.length>0){let o=ZQe(r[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}Ti(mS.ID,mS);it(hJe);it(fJe);it(gJe);it(mJe);it(yJe);it(SJe);it(_Je);it(vJe);it(bJe);it(CJe);it(wJe);it(pJe);it(LJe);it(EJe);it(xJe);for(let i=1;i<=7;i++)Iue(new Xb({id:Xb.ID(i),label:C("foldLevelAction.label","Fold Level {0}",i),alias:`Fold Level ${i}`,precondition:Ra,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2048|21+i),weight:100}}));const DJe=Ce("editor.foldBackground",{light:tr(o0,.3),dark:tr(o0,.3),hc:null},C("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),IJe=Ce("editorGutter.foldingControlForeground",{dark:L9,light:L9,hc:L9},C("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));hr((i,e)=>{const t=i.getColor(DJe);t&&e.addRule(`.monaco-editor .folded-background { background-color: ${t}; }`);const n=i.getColor(IJe);n&&e.addRule(`
		.monaco-editor .cldr${pr.asCSSSelector(iZ)},
		.monaco-editor .cldr${pr.asCSSSelector(rZ)} {
			color: ${n} !important;
		}
		`)});class kJe extends Et{constructor(){super({id:"editor.action.fontZoomIn",label:C("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){Op.setZoomLevel(Op.getZoomLevel()+1)}}class TJe extends Et{constructor(){super({id:"editor.action.fontZoomOut",label:C("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){Op.setZoomLevel(Op.getZoomLevel()-1)}}class NJe extends Et{constructor(){super({id:"editor.action.fontZoomReset",label:C("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){Op.setZoomLevel(0)}}it(kJe);it(TJe);it(NJe);var fme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gme=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},oZ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let IO=class{constructor(e,t){this._workerService=t,this._callOnDispose=new Qe,this._callOnModel=new Qe,this._editor=e,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(QF.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){if(this._callOnModel.clear(),!this._editor.getOption(48)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=QF.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;let n=new Mw;for(let r of t.autoFormatTriggerCharacters)n.add(r.charCodeAt(0));this._callOnModel.add(this._editor.onDidType(r=>{let o=r.charCodeAt(r.length-1);n.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition();let r=!1;const o=this._editor.onDidChangeModelContent(s=>{if(s.isFlush){r=!0,o.dispose();return}for(let a=0,u=s.changes.length;a<u;a++)if(s.changes[a].range.endLineNumber<=n.lineNumber){r=!0,o.dispose();return}});tge(this._workerService,t,n,e,t.getFormattingOptions()).then(s=>{o.dispose(),!r&&vl(s)&&(oS.execute(this._editor,s,!0),NY(s))},s=>{throw o.dispose(),s})}};IO.ID="editor.contrib.autoFormat";IO=fme([gme(1,Hu)],IO);let kO=class{constructor(e,t){this.editor=e,this._instantiationService=t,this._callOnDispose=new Qe,this._callOnModel=new Qe,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(Mh.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(47)&&this.editor.hasModel()&&Mh.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(ege,this.editor,e,2,EC.None,Vn.None).catch(gn))}};kO.ID="editor.contrib.formatOnPaste";kO=fme([gme(1,An)],kO);class AJe extends Et{constructor(){super({id:"editor.action.formatDocument",label:C("formatDocument.label","Format Document"),alias:"Format Document",precondition:_t.and(de.notInCompositeEditor,de.writable,de.hasDocumentFormattingProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return oZ(this,void 0,void 0,function*(){if(t.hasModel()){const n=e.get(An);yield e.get(zp).showWhile(n.invokeFunction(Vje,t,1,EC.None,Vn.None),250)}})}}class OJe extends Et{constructor(){super({id:"editor.action.formatSelection",label:C("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:_t.and(de.writable,de.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2084),weight:100},contextMenuOpts:{when:de.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return oZ(this,void 0,void 0,function*(){if(!t.hasModel())return;const n=e.get(An),r=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new Q(a.startLineNumber,1,a.startLineNumber,r.getLineMaxColumn(a.startLineNumber)):a);yield e.get(zp).showWhile(n.invokeFunction(ege,t,o,1,EC.None,Vn.None),250)})}}Ti(IO.ID,IO);Ti(kO.ID,kO);it(AJe);it(OJe);Qn.registerCommand("editor.action.format",i=>oZ(void 0,void 0,void 0,function*(){const e=i.get(ki).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=i.get(kr);e.getSelection().isEmpty()?yield t.executeCommand("editor.action.formatDocument"):yield t.executeCommand("editor.action.formatSelection")}));class jw{remove(){this.parent&&this.parent.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let r=n;for(let o=0;t.children.get(r)!==void 0;o++)r=`${n}_${o}`;return r}static empty(e){return e.children.size===0}}class Kie extends jw{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class MJe extends jw{constructor(e,t,n,r){super(),this.id=e,this.parent=t,this.label=n,this.order=r,this.children=new Map}}class Da extends jw{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t){let n=this._keys.for(e,!0),r=Da._requests.get(n);if(!r){let o=new oa;r={promiseCnt:0,source:o,promise:Da._create(e,o.token),model:void 0},Da._requests.set(n,r);const s=Date.now();r.promise.then(()=>{this._requestDurations.update(e,Date.now()-s)})}return r.model?Promise.resolve(r.model):(r.promiseCnt+=1,t.onCancellationRequested(()=>{--r.promiseCnt===0&&(r.source.cancel(),Da._requests.delete(n))}),new Promise((o,s)=>{r.promise.then(a=>{r.model=a,o(a)},a=>{Da._requests.delete(n),s(a)})}))}static _create(e,t){const n=new oa(t),r=new Da(e.uri),o=Yc.ordered(e),s=o.map((u,d)=>{var h;let f=jw.findId(`provider_${d}`,r),p=new MJe(f,r,(h=u.displayName)!==null&&h!==void 0?h:"Unknown Outline Provider",d);return Promise.resolve(u.provideDocumentSymbols(e,n.token)).then(m=>{for(const v of m||[])Da._makeOutlineElement(v,p);return p},m=>(Rs(m),p)).then(m=>{jw.empty(m)?m.remove():r._groups.set(f,m)})}),a=Yc.onDidChange(()=>{const u=Yc.ordered(e);oc(u,o)||n.cancel()});return Promise.all(s).then(()=>n.token.isCancellationRequested&&!t.isCancellationRequested?Da._create(e,t):r._compact()).finally(()=>{a.dispose()})}static _makeOutlineElement(e,t){let n=jw.findId(e,t),r=new Kie(n,t,e);if(e.children)for(const o of e.children)Da._makeOutlineElement(o,r);t.children.set(r.id,r)}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{let t=Jn.first(this._groups.values());for(let[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof Kie?e.push(t.symbol):e.push(...Jn.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>Q.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Da._flattenDocumentSymbols(t,e,""),t.sort((n,r)=>Q.compareRangesUsingStarts(n.range,r.range))}static _flattenDocumentSymbols(e,t,n){for(const r of t)e.push({kind:r.kind,tags:r.tags,name:r.name,detail:r.detail,containerName:r.containerName||n,range:r.range,selectionRange:r.selectionRange,children:void 0}),r.children&&Da._flattenDocumentSymbols(e,r.children,r.name)}}Da._requestDurations=new UF(Yc,350);Da._requests=new $0(9,.75);Da._keys=new class{constructor(){this._counter=1,this._data=new WeakMap}for(i,e){return`${i.id}/${e?i.getVersionId():""}/${this._hash(Yc.all(i))}`}_hash(i){let e="";for(const t of i){let n=this._data.get(t);typeof n>"u"&&(n=this._counter++,this._data.set(t,n)),e+=n}return e}};var pme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function Gie(i,e,t){return pme(this,void 0,void 0,function*(){const n=yield Da.create(i,t);return e?n.asListOfDocumentSymbols():n.getTopLevelSymbols()})}Qn.registerCommand("_executeDocumentSymbolProvider",function(i,...e){return pme(this,void 0,void 0,function*(){const[t]=e;Gi(sn.isUri(t));const n=i.get(Io).getModel(t);if(n)return Gie(n,!1,Vn.None);const r=yield i.get(Qa).createModelReference(t);try{return yield Gie(r.object.textEditorModel,!1,Vn.None)}finally{r.dispose()}})});function ul(i,e){let t=0;for(let n=0;n<i.length;n++)i.charAt(n)==="	"?t+=e:t++;return t}function X2(i,e,t){i=i<0?0:i;let n="";if(!t){let r=Math.floor(i/e);i=i%e;for(let o=0;o<r;o++)n+="	"}for(let r=0;r<i;r++)n+=" ";return n}function mme(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return[];const r=vi.getIndentationRules(i.getLanguageId());if(!r)return[];for(t=Math.min(t,i.getLineCount());e<=t&&r.unIndentedLinePattern;){let b=i.getLineContent(e);if(!r.unIndentedLinePattern.test(b))break;e++}if(e>t-1)return[];const{tabSize:o,indentSize:s,insertSpaces:a}=i.getOptions(),u=(b,L)=>(L=L||1,Iu.shiftIndent(b,b.length+L,o,s,a)),d=(b,L)=>(L=L||1,Iu.unshiftIndent(b,b.length+L,o,s,a));let h=[],f,p=i.getLineContent(e),m=p;if(n!=null){f=n;let b=zi(p);m=f+p.substring(b.length),r.decreaseIndentPattern&&r.decreaseIndentPattern.test(m)&&(f=d(f),m=f+p.substring(b.length)),p!==m&&h.push(jr.replaceMove(new yt(e,1,e,b.length+1),Ll.normalizeIndentation(f,s,a)))}else f=zi(p);let v=f;r.increaseIndentPattern&&r.increaseIndentPattern.test(m)?(v=u(v),f=u(f)):r.indentNextLinePattern&&r.indentNextLinePattern.test(m)&&(v=u(v)),e++;for(let b=e;b<=t;b++){let L=i.getLineContent(b),S=zi(L),y=v+L.substring(S.length);r.decreaseIndentPattern&&r.decreaseIndentPattern.test(y)&&(v=d(v),f=d(f)),S!==v&&h.push(jr.replaceMove(new yt(b,1,b,S.length+1),Ll.normalizeIndentation(v,s,a))),!(r.unIndentedLinePattern&&r.unIndentedLinePattern.test(L))&&(r.increaseIndentPattern&&r.increaseIndentPattern.test(y)?(f=u(f),v=f):r.indentNextLinePattern&&r.indentNextLinePattern.test(y)?v=u(v):v=f)}return h}class i7 extends Et{constructor(){super({id:i7.ID,label:C("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),o=t.getSelection();if(!o)return;const s=new BJe(o,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}i7.ID="editor.action.indentationToSpaces";class r7 extends Et{constructor(){super({id:r7.ID,label:C("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=n.getOptions(),o=t.getSelection();if(!o)return;const s=new WJe(o,r.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}r7.ID="editor.action.indentationToTabs";class _me extends Et{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(yc),r=e.get(Io);let o=t.getModel();if(!o)return;const s=r.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===s.tabSize?C("configuredTabSize","Configured Tab Size"):void 0})),u=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(a,{placeHolder:C({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[u]}).then(d=>{d&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(d.label,10),insertSpaces:this.insertSpaces})})},50)}}class o7 extends _me{constructor(){super(!1,{id:o7.ID,label:C("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}o7.ID="editor.action.indentUsingTabs";class s7 extends _me{constructor(){super(!0,{id:s7.ID,label:C("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}s7.ID="editor.action.indentUsingSpaces";class a7 extends Et{constructor(){super({id:a7.ID,label:C("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(Io);let r=t.getModel();if(!r)return;const o=n.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget);r.detectIndentation(o.insertSpaces,o.tabSize)}}a7.ID="editor.action.detectIndentation";class RJe extends Et{constructor(){super({id:"editor.action.reindentlines",label:C("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=mme(n,1,n.getLineCount());r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class PJe extends Et{constructor(){super({id:"editor.action.reindentselectedlines",label:C("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:de.writable})}run(e,t){let n=t.getModel();if(!n)return;let r=t.getSelections();if(r===null)return;let o=[];for(let s of r){let a=s.startLineNumber,u=s.endLineNumber;if(a!==u&&s.endColumn===1&&u--,a===1){if(a===u)continue}else a--;let d=mme(n,a,u);o.push(...d)}o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class FJe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(let n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(let r of this._edits)t.addEditOperation(Q.lift(r.range),r.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class tj{constructor(e){this.callOnDispose=new Qe,this.callOnModel=new Qe,this.editor=e,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(9)<4||this.editor.getOption(47))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){let t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||!n.isCheapToTokenize(e.getStartPosition().lineNumber))return;const r=this.editor.getOption(9),{tabSize:o,indentSize:s,insertSpaces:a}=n.getOptions();let u=[],d={shiftIndent:m=>Iu.shiftIndent(m,m.length+1,o,s,a),unshiftIndent:m=>Iu.unshiftIndent(m,m.length+1,o,s,a)},h=e.startLineNumber;for(;h<=e.endLineNumber;){if(this.shouldIgnoreLine(n,h)){h++;continue}break}if(h>e.endLineNumber)return;let f=n.getLineContent(h);if(!/\S/.test(f.substring(0,e.startColumn-1))){const m=vi.getGoodIndentForLine(r,n,n.getLanguageId(),h,d);if(m!==null){let v=zi(f),b=ul(m,o),L=ul(v,o);if(b!==L){let S=X2(b,o,a);u.push({range:new Q(h,1,h,v.length+1),text:S}),f=S+f.substr(v.length)}else{let S=vi.getIndentMetadata(n,h);if(S===0||S===8)return}}}const p=h;for(;h<e.endLineNumber;){if(!/\S/.test(n.getLineContent(h+1))){h++;continue}break}if(h!==e.endLineNumber){let m={getLineTokens:b=>n.getLineTokens(b),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(b,L)=>n.getLanguageIdAtPosition(b,L),getLineContent:b=>b===p?f:n.getLineContent(b)},v=vi.getGoodIndentForLine(r,m,n.getLanguageId(),h+1,d);if(v!==null){let b=ul(v,o),L=ul(zi(n.getLineContent(h+1)),o);if(b!==L){let S=b-L;for(let y=h+1;y<=e.endLineNumber;y++){let E=n.getLineContent(y),A=zi(E),V=ul(A,o)+S,R=X2(V,o,a);R!==A&&u.push({range:new Q(y,1,y,A.length+1),text:R})}}}}if(u.length>0){this.editor.pushUndoStop();let m=new FJe(u,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",m),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.forceTokenization(t);let n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;let r=e.getLineTokens(t);if(r.getCount()>0){let o=r.findTokenIndexAtOffset(n);if(o>=0&&r.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}tj.ID="editor.contrib.autoIndentOnPaste";function vme(i,e,t,n){if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let r="";for(let s=0;s<t;s++)r+=" ";let o=new RegExp(r,"gi");for(let s=1,a=i.getLineCount();s<=a;s++){let u=i.getLineFirstNonWhitespaceColumn(s);if(u===0&&(u=i.getLineMaxColumn(s)),u===1)continue;const d=new Q(s,1,s,u),h=i.getValueInRange(d),f=n?h.replace(/\t/ig,r):h.replace(o,"	");e.addEditOperation(d,f)}}class BJe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),vme(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class WJe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),vme(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}Ti(tj.ID,tj);it(i7);it(r7);it(o7);it(s7);it(a7);it(RJe);it(PJe);var l5=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const VJe=1500;class bme{constructor(){this._data=new ta}push(e,t){const n=this._data.get(e.uri);n===void 0?this._data.set(e.uri,new Set([t])):n.add(t)}pop(e,t){const n=this._data.get(e.uri);n&&(n.delete(t),n.size===0&&this._data.delete(e.uri))}has(e,t){var n;return!!(!((n=this._data.get(e.uri))===null||n===void 0)&&n.has(t))}}function Cme(i,e,t,n){return l5(this,void 0,void 0,function*(){const r=[],s=Hv.ordered(i).reverse().map(a=>e.map(u=>l5(this,void 0,void 0,function*(){try{t.push(i,a);const d=yield a.provideInlayHints(i,u,n);d!=null&&d.length&&r.push(d.filter(h=>u.containsPosition(h.position)))}catch(d){Rs(d)}finally{t.pop(i,a)}})));return yield Promise.all(s.flat()),r.flat().sort((a,u)=>Le.compare(a.position,u.position))})}class u5{constructor(){this._entries=new $0(50)}get(e){const t=u5._key(e);return this._entries.get(t)}set(e,t){const n=u5._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}class _S{constructor(e){this._editor=e,this._decorationOwnerId=++_S._decorationOwnerIdPool,this._disposables=new Qe,this._sessionDisposables=new Qe,this._getInlayHintsDelays=new UF(Hv,25,500),this._cache=new u5,this._decorationsMetadata=new Map,this._ruleFactory=new mce(this._editor),this._disposables.add(Hv.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(t=>{t.hasChanged(126)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){if(this._sessionDisposables.clear(),this._removeAllDecorations(),!this._editor.getOption(126).enabled)return;const e=this._editor.getModel();if(!e||!Hv.has(e))return;const t=this._cache.get(e);t&&this._updateHintsDecorators([e.getFullModelRange()],t);const n=new bme,r=new er(()=>l5(this,void 0,void 0,function*(){const s=Date.now(),a=new oa;this._sessionDisposables.add(Kn(()=>a.dispose(!0)));const u=this._getHintsRanges(),d=yield Cme(e,u,n,a.token);r.delay=this._getInlayHintsDelays.update(e,Date.now()-s),!a.token.isCancellationRequested&&(this._updateHintsDecorators(u,d),this._cache.set(e,Array.from(this._decorationsMetadata.values()).map(h=>h.hint)))}),this._getInlayHintsDelays.get(e));this._sessionDisposables.add(r),this._sessionDisposables.add(this._editor.onDidChangeModelContent(()=>r.schedule())),this._sessionDisposables.add(this._editor.onDidScrollChange(()=>r.schedule())),r.schedule();const o=new Qe;this._sessionDisposables.add(o);for(const s of Hv.all(e))typeof s.onDidChangeInlayHints=="function"&&o.add(s.onDidChangeInlayHints(()=>{n.has(e,s)||r.schedule()}))}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),r=[];for(const o of n.sort(Q.compareRangesUsingStarts)){const s=t.validateRange(new Q(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));r.length===0||!Q.areIntersectingOrTouching(r[r.length-1],s)?r.push(s):r[r.length-1]=Q.plusRange(r[r.length-1],s)}return r}_updateHintsDecorators(e,t){const{fontSize:n,fontFamily:r}=this._getLayoutInfo(),o=this._editor.getModel(),s=[],a="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(a,r);for(const h of t){const{text:f,position:p,whitespaceBefore:m,whitespaceAfter:v}=h,b=m?n/3|0:0,L=v?n/3|0:0;let S,y;h.kind===jF.Parameter?(S=Lr(cIe),y=Lr(uIe)):h.kind===jF.Type?(S=Lr(lIe),y=Lr(aIe)):(S=Lr(X1),y=Lr(Z1));const E=this._ruleFactory.createClassNameRef({fontSize:`${n}px`,margin:`0px ${L}px 0px ${b}px`,fontFamily:`var(${a}), ${js.fontFamily}`,padding:`1px ${Math.max(1,n/4)|0}px`,borderRadius:`${n/4|0}px`,verticalAlign:"middle",backgroundColor:S,color:y});let A="before",N=Q.fromPositions(p),V=o.getWordAtPosition(p),R=!1;if(V&&(V.endColumn===p.column?(A="after",R=!0,N=qie(V,p.lineNumber)):V.startColumn===p.column&&(R=!0,N=qie(V,p.lineNumber))),s.push({decoration:{range:N,options:{[A]:{content:HJe(f),inlineClassNameAffectsLetterSpacing:!0,inlineClassName:E.className},description:"InlayHint",showIfCollapsed:!R,stickiness:0}},classNameRef:E}),s.length>VJe)break}const u=[];for(const h of e)for(const{id:f}of o.getDecorationsInRange(h,this._decorationOwnerId,!0)){const p=this._decorationsMetadata.get(f);p&&(u.push(f),p.classNameRef.dispose(),this._decorationsMetadata.delete(f))}const d=o.deltaDecorations(u,s.map(h=>h.decoration),this._decorationOwnerId);for(let h=0;h<d.length;h++)this._decorationsMetadata.set(d[h],{hint:t[h],classNameRef:s[h].classNameRef})}_getLayoutInfo(){const e=this._editor.getOption(126),t=this._editor.getOption(45);let n=e.fontSize;(!n||n<5||n>t)&&(n=t*.9|0);const r=e.fontFamily||this._editor.getOption(42);return{fontSize:n,fontFamily:r}}_removeAllDecorations(){this._editor.deltaDecorations(Array.from(this._decorationsMetadata.keys()),[]);for(let e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}}_S.ID="editor.contrib.InlayHints";_S._decorationOwnerIdPool=0;function qie(i,e){return new Q(e,i.startColumn,e,i.endColumn)}function HJe(i){const e=" ";return i.replace(/[ \t]/g,e)}Ti(_S.ID,_S);Qn.registerCommand("_executeInlayHintProvider",(i,...e)=>l5(void 0,void 0,void 0,function*(){const[t,n]=e;Gi(sn.isUri(t)),Gi(Q.isIRange(n));const r=yield i.get(Qa).createModelReference(t);try{return yield Cme(r.object.textEditorModel,[Q.lift(n)],new bme,Vn.None)}finally{r.dispose()}}));class $Je{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const r=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new yt(r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn),r.endLineNumber,Math.min(this._originalSelection.positionColumn,r.endColumn)):new yt(r.endLineNumber,r.endColumn-this._text.length,r.endLineNumber,r.endColumn)}}var zJe=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},UJe=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let O0=class nj{constructor(e,t){this.decorationIds=[],this.editor=e,this.editorWorkerService=t}static get(e){return e.getContribution(nj.ID)}dispose(){}run(e,t){this.currentRequest&&this.currentRequest.cancel();const n=this.editor.getSelection(),r=this.editor.getModel();if(!r||!n)return;let o=n;if(o.startLineNumber!==o.endLineNumber)return;const s=new Ede(this.editor,5),a=r.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=cs(u=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(u=>{if(!u||!u.range||!u.value||!s.validate(this.editor))return;let d=Q.lift(u.range),h=u.range,f=u.value.length-(o.endColumn-o.startColumn);h={startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.startColumn+u.value.length},f>1&&(o=new yt(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+f-1));const p=new $Je(d,o,u.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,p),this.editor.pushUndoStop(),this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[{range:h,options:nj.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=p0(350),this.decorationRemover.then(()=>this.decorationIds=this.editor.deltaDecorations(this.decorationIds,[])).catch(gn)}).catch(gn)):Promise.resolve(void 0)}};O0.ID="editor.contrib.inPlaceReplaceController";O0.DECORATION=Sn.register({description:"in-place-replace",className:"valueSetReplacement"});O0=zJe([UJe(1,Hu)],O0);class jJe extends Et{constructor(){super({id:"editor.action.inPlaceReplace.up",label:C("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=O0.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class KJe extends Et{constructor(){super({id:"editor.action.inPlaceReplace.down",label:C("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=O0.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}Ti(O0.ID,O0);it(jJe);it(KJe);hr((i,e)=>{const t=i.getColor(Jce);t&&e.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${t}; }`)});class GJe extends Et{constructor(){super({id:"expandLineSelection",label:C("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:de.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const r=t._getViewModel();r.model.pushStackElement(),r.setCursorStates(n.source,3,os.expandLineSelection(r,r.getCursorStates())),r.revealPrimaryCursor(n.source,!0)}}it(GJe);class qJe{constructor(e,t){this._selection=e,this._cursors=t,this._selectionId=null}getEditOperations(e,t){let n=YJe(e,this._cursors);for(let r=0,o=n.length;r<o;r++){let s=n[r];t.addEditOperation(s.range,s.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function YJe(i,e){e.sort((s,a)=>s.lineNumber===a.lineNumber?s.column-a.column:s.lineNumber-a.lineNumber);for(let s=e.length-2;s>=0;s--)e[s].lineNumber===e[s+1].lineNumber&&e.splice(s,1);let t=[],n=0,r=0,o=e.length;for(let s=1,a=i.getLineCount();s<=a;s++){let u=i.getLineContent(s),d=u.length+1,h=0;if(r<o&&e[r].lineNumber===s&&(h=e[r].column,r++,h===d)||u.length===0)continue;let f=Jf(u),p=0;if(f===-1)p=1;else if(f!==u.length-1)p=f+2;else continue;p=Math.max(h,p),t[n++]=jr.delete(new Q(s,p,s,d))}return t}class wme{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));let r=[];for(let s=n.startLineNumber;s<=n.endLineNumber;s++)r.push(e.getLineContent(s));const o=r.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new Q(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new Q(n.startLineNumber,1,n.startLineNumber,1),o+`
`):t.addEditOperation(new Q(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let r=n.startLineNumber,o=n.startColumn,s=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(r=r+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(s=s+this._endLineNumberDelta,a=1),n=yt.createWithDirection(r,o,s,a,this._selectionDirection)}return n}}class ZJe{constructor(e,t,n){this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){let n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:a}=e.getOptions();let u=this.buildIndentConverter(o,s,a),d={getLineTokens:h=>e.getLineTokens(h),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(h,f)=>e.getLanguageIdAtPosition(h,f),getLineContent:null};if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){let h=r.startLineNumber,f=this._isMovingDown?h+1:h-1;e.getLineMaxColumn(f)===1?t.addEditOperation(new Q(1,1,1,1),null):(t.addEditOperation(new Q(h,1,h,1),e.getLineContent(f)),t.addEditOperation(new Q(f,1,f,e.getLineMaxColumn(f)),null)),r=new yt(f,1,f,1)}else{let h,f;if(this._isMovingDown){h=r.endLineNumber+1,f=e.getLineContent(h),t.addEditOperation(new Q(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);let p=f;if(this.shouldAutoIndent(e,r)){let m=this.matchEnterRule(e,u,o,h,r.startLineNumber-1);if(m!==null){let b=zi(e.getLineContent(h)),L=m+ul(b,o);p=X2(L,o,a)+this.trimLeft(f)}else{d.getLineContent=L=>L===r.startLineNumber?e.getLineContent(h):e.getLineContent(L);let b=vi.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(h,1),r.startLineNumber,u);if(b!==null){let L=zi(e.getLineContent(h)),S=ul(b,o),y=ul(L,o);S!==y&&(p=X2(S,o,a)+this.trimLeft(f))}}t.addEditOperation(new Q(r.startLineNumber,1,r.startLineNumber,1),p+`
`);let v=this.matchEnterRuleMovingDown(e,u,o,r.startLineNumber,h,p);if(v!==null)v!==0&&this.getIndentEditsOfMovingBlock(e,t,r,o,a,v);else{d.getLineContent=L=>L===r.startLineNumber?p:L>=r.startLineNumber+1&&L<=r.endLineNumber+1?e.getLineContent(L-1):e.getLineContent(L);let b=vi.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(h,1),r.startLineNumber+1,u);if(b!==null){const L=zi(e.getLineContent(r.startLineNumber)),S=ul(b,o),y=ul(L,o);if(S!==y){const E=S-y;this.getIndentEditsOfMovingBlock(e,t,r,o,a,E)}}}}else t.addEditOperation(new Q(r.startLineNumber,1,r.startLineNumber,1),p+`
`)}else if(h=r.startLineNumber-1,f=e.getLineContent(h),t.addEditOperation(new Q(h,1,h+1,1),null),t.addEditOperation(new Q(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+f),this.shouldAutoIndent(e,r)){d.getLineContent=m=>m===h?e.getLineContent(r.startLineNumber):e.getLineContent(m);let p=this.matchEnterRule(e,u,o,r.startLineNumber,r.startLineNumber-2);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,r,o,a,p);else{let m=vi.getGoodIndentForLine(this._autoIndent,d,e.getLanguageIdAtPosition(r.startLineNumber,1),h,u);if(m!==null){let v=zi(e.getLineContent(r.startLineNumber)),b=ul(m,o),L=ul(v,o);if(b!==L){let S=b-L;this.getIndentEditsOfMovingBlock(e,t,r,o,a,S)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,n){return{shiftIndent:r=>Iu.shiftIndent(r,r.length+1,e,t,n),unshiftIndent:r=>Iu.unshiftIndent(r,r.length+1,e,t,n)}}parseEnterResult(e,t,n,r,o){if(o){let s=o.indentation;o.indentAction===uo.None||o.indentAction===uo.Indent?s=o.indentation+o.appendText:o.indentAction===uo.IndentOutdent?s=o.indentation:o.indentAction===uo.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);let a=e.getLineContent(r);if(this.trimLeft(a).indexOf(this.trimLeft(s))>=0){let u=zi(e.getLineContent(r)),d=zi(s),h=vi.getIndentMetadata(e,r);h!==null&&h&2&&(d=t.unshiftIndent(d));let f=ul(d,n),p=ul(u,n);return f-p}}return null}matchEnterRuleMovingDown(e,t,n,r,o,s){if(Jf(s)>=0){let a=e.getLineMaxColumn(o),u=vi.getEnterAction(this._autoIndent,e,new Q(o,a,o,a));return this.parseEnterResult(e,t,n,r,u)}else{let a=r-1;for(;a>=1;){let h=e.getLineContent(a);if(Jf(h)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let u=e.getLineMaxColumn(a),d=vi.getEnterAction(this._autoIndent,e,new Q(a,u,a,u));return this.parseEnterResult(e,t,n,r,d)}}matchEnterRule(e,t,n,r,o,s){let a=o;for(;a>=1;){let h;if(a===o&&s!==void 0?h=s:h=e.getLineContent(a),Jf(h)>=0)break;a--}if(a<1||r>e.getLineCount())return null;let u=e.getLineMaxColumn(a),d=vi.getEnterAction(this._autoIndent,e,new Q(a,u,a,u));return this.parseEnterResult(e,t,n,r,d)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.isCheapToTokenize(t.startLineNumber))return!1;let n=e.getLanguageIdAtPosition(t.startLineNumber,1),r=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==r||vi.getIndentRulesSupport(n)===null)}getIndentEditsOfMovingBlock(e,t,n,r,o,s){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){let u=e.getLineContent(a),d=zi(u),f=ul(d,r)+s,p=X2(f,r,o);p!==d&&(t.addEditOperation(new Q(a,1,a,d.length+1),p),a===n.endLineNumber&&n.endColumn<=d.length+1&&p===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}class u0{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return u0._COLLATOR||(u0._COLLATOR=new Intl.Collator),u0._COLLATOR}getEditOperations(e,t){let n=XJe(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;let r=yme(e,t,n);if(!r)return!1;for(let o=0,s=r.before.length;o<s;o++)if(r.before[o]!==r.after[o])return!0;return!1}}u0._COLLATOR=null;function yme(i,e,t){let n=e.startLineNumber,r=e.endLineNumber;if(e.endColumn===1&&r--,n>=r)return null;let o=[];for(let a=n;a<=r;a++)o.push(i.getLineContent(a));let s=o.slice(0);return s.sort(u0.getCollator().compare),t===!0&&(s=s.reverse()),{startLineNumber:n,endLineNumber:r,before:o,after:s}}function XJe(i,e,t){let n=yme(i,e,t);return n?jr.replace(new Q(n.startLineNumber,1,n.endLineNumber,i.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class Sme extends Et{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((s,a)=>({selection:s,index:a,ignore:!1}));n.sort((s,a)=>Q.compareRangesUsingStarts(s.selection,a.selection));let r=n[0];for(let s=1;s<n.length;s++){const a=n[s];r.selection.endLineNumber===a.selection.startLineNumber&&(r.index<a.index?a.ignore=!0:(r.ignore=!0,r=a))}const o=[];for(const s of n)o.push(new wme(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class QJe extends Sme{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:C("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class JJe extends Sme{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:C("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class eet extends Et{constructor(){super({id:"editor.action.duplicateSelection",label:C("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:de.writable,menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const r=[],o=t.getSelections(),s=t.getModel();for(const a of o)if(a.isEmpty())r.push(new wme(a,!0));else{const u=new yt(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);r.push(new mAe(u,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class Lme extends Et{constructor(e,t){super(t),this.down=e}run(e,t){let n=[],r=t.getSelections()||[];const o=t.getOption(9);for(const s of r)n.push(new ZJe(s,this.down,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class tet extends Lme{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:C("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class net extends Lme{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:C("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"2_line",title:C({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class Eme extends Et{constructor(e,t){super(t),this.descending=e}run(e,t){const n=t.getSelections()||[];for(const o of n)if(!u0.canRun(t.getModel(),o,this.descending))return;let r=[];for(let o=0,s=n.length;o<s;o++)r[o]=new u0(n[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class iet extends Eme{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:C("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:de.writable})}}class ret extends Eme{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:C("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:de.writable})}}class oet extends Et{constructor(){super({id:"editor.action.removeDuplicateLines",label:C("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:de.writable})}run(e,t){if(!t.hasModel())return;let n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;let r=[],o=[],s=0;for(let a of t.getSelections()){let u=new Set,d=[];for(let m=a.startLineNumber;m<=a.endLineNumber;m++){let v=n.getLineContent(m);u.has(v)||(d.push(v),u.add(v))}let h=new yt(a.startLineNumber,1,a.endLineNumber,n.getLineMaxColumn(a.endLineNumber)),f=a.startLineNumber-s,p=new yt(f,1,f+d.length-1,d[d.length-1].length);r.push(jr.replace(h,d.join(`
`))),o.push(p),s+=a.endLineNumber-a.startLineNumber+1-d.length}t.pushUndoStop(),t.executeEdits(this.id,r,o),t.pushUndoStop()}}class l7 extends Et{constructor(){super({id:l7.ID,label:C("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:Yr(2089,2102),weight:100}})}run(e,t,n){let r=[];n.reason==="auto-save"&&(r=(t.getSelections()||[]).map(a=>new Le(a.positionLineNumber,a.positionColumn)));let o=t.getSelection();if(o===null)return;let s=new qJe(o,r);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}l7.ID="editor.action.trimTrailingWhitespace";class set extends Et{constructor(){super({id:"editor.action.deleteLines",label:C("lines.delete","Delete Line"),alias:"Delete Line",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;let n=this._getLinesToRemove(t),r=t.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;let o=0,s=[],a=[];for(let u=0,d=n.length;u<d;u++){const h=n[u];let f=h.startLineNumber,p=h.endLineNumber,m=1,v=r.getLineMaxColumn(p);p<r.getLineCount()?(p+=1,v=1):f>1&&(f-=1,m=r.getLineMaxColumn(f)),s.push(jr.replace(new yt(f,m,p,v),"")),a.push(new yt(f-o,h.positionColumn,f-o,h.positionColumn)),o+=h.endLineNumber-h.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,a),t.pushUndoStop()}_getLinesToRemove(e){let t=e.getSelections().map(o=>{let s=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(s-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:s,positionColumn:o.positionColumn}});t.sort((o,s)=>o.startLineNumber===s.startLineNumber?o.endLineNumber-s.endLineNumber:o.startLineNumber-s.startLineNumber);let n=[],r=t[0];for(let o=1;o<t.length;o++)r.endLineNumber+1>=t[o].startLineNumber?r.endLineNumber=t[o].endLineNumber:(n.push(r),r=t[o]);return n.push(r),n}}class aet extends Et{constructor(){super({id:"editor.action.indentLines",label:C("lines.indent","Indent Line"),alias:"Indent Line",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2137,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,xr.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class uet extends Et{constructor(){super({id:"editor.action.outdentLines",label:C("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2135,weight:100}})}run(e,t){_y.Outdent.runEditorCommand(e,t,null)}}class cet extends Et{constructor(){super({id:"editor.action.insertLineBefore",label:C("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,xr.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class det extends Et{constructor(){super({id:"editor.action.insertLineAfter",label:C("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,xr.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class xme extends Et{run(e,t){if(!t.hasModel())return;const n=t.getSelection();let r=this._getRangesToDelete(t),o=[];for(let u=0,d=r.length-1;u<d;u++){let h=r[u],f=r[u+1];Q.intersectRanges(h,f)===null?o.push(h):r[u+1]=Q.plusRange(h,f)}o.push(r[r.length-1]);let s=this._getEndCursorState(n,o),a=o.map(u=>jr.replace(u,""));t.pushUndoStop(),t.executeEdits(this.id,a,s),t.pushUndoStop()}}class het extends xme{constructor(){super({id:"deleteAllLeft",label:C("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null,r=[],o=0;return t.forEach(s=>{let a;if(s.endColumn===1&&o>0){let u=s.startLineNumber-o;a=new yt(u,s.startColumn,u,s.startColumn)}else a=new yt(s.startLineNumber,s.startColumn,s.startLineNumber,s.startColumn);o+=s.endLineNumber-s.startLineNumber,s.intersectRanges(e)?n=a:r.push(a)}),n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getSelections();if(t===null)return[];let n=t,r=e.getModel();return r===null?[]:(n.sort(Q.compareRangesUsingStarts),n=n.map(o=>{if(o.isEmpty())if(o.startColumn===1){let s=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:r.getLineContent(s).length+1;return new Q(s,a,o.startLineNumber,1)}else return new Q(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new Q(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),n)}}class fet extends xme{constructor(){super({id:"deleteAllRight",label:C("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null,r=[];for(let o=0,s=t.length,a=0;o<s;o++){let u=t[o],d=new yt(u.startLineNumber-a,u.startColumn,u.startLineNumber-a,u.startColumn);u.intersectRanges(e)?n=d:r.push(d)}return n&&r.unshift(n),r}_getRangesToDelete(e){let t=e.getModel();if(t===null)return[];let n=e.getSelections();if(n===null)return[];let r=n.map(o=>{if(o.isEmpty()){const s=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===s?new Q(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new Q(o.startLineNumber,o.startColumn,o.startLineNumber,s)}return o});return r.sort(Q.compareRangesUsingStarts),r}}class get extends Et{constructor(){super({id:"editor.action.joinLines",label:C("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:de.writable,kbOpts:{kbExpr:de.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getSelection();if(r===null)return;n.sort(Q.compareRangesUsingStarts);let o=[],s=n.reduce((p,m)=>p.isEmpty()?p.endLineNumber===m.startLineNumber?(r.equalsSelection(p)&&(r=m),m):m.startLineNumber>p.endLineNumber+1?(o.push(p),m):new yt(p.startLineNumber,p.startColumn,m.endLineNumber,m.endColumn):m.startLineNumber>p.endLineNumber?(o.push(p),m):new yt(p.startLineNumber,p.startColumn,m.endLineNumber,m.endColumn));o.push(s);let a=t.getModel();if(a===null)return;let u=[],d=[],h=r,f=0;for(let p=0,m=o.length;p<m;p++){let v=o[p],b=v.startLineNumber,L=1,S=0,y,E,A=a.getLineContent(v.endLineNumber).length-v.endColumn;if(v.isEmpty()||v.startLineNumber===v.endLineNumber){let R=v.getStartPosition();R.lineNumber<a.getLineCount()?(y=b+1,E=a.getLineMaxColumn(y)):(y=R.lineNumber,E=a.getLineMaxColumn(R.lineNumber))}else y=v.endLineNumber,E=a.getLineMaxColumn(y);let N=a.getLineContent(b);for(let R=b+1;R<=y;R++){let M=a.getLineContent(R),K=a.getLineFirstNonWhitespaceColumn(R);if(K>=1){let X=!0;N===""&&(X=!1),X&&(N.charAt(N.length-1)===" "||N.charAt(N.length-1)==="	")&&(X=!1,N=N.replace(/[\s\uFEFF\xA0]+$/g," "));let $=M.substr(K-1);N+=(X?" ":"")+$,X?S=$.length+1:S=$.length}else S=0}let V=new Q(b,L,y,E);if(!V.isEmpty()){let R;v.isEmpty()?(u.push(jr.replace(V,N)),R=new yt(V.startLineNumber-f,N.length-S+1,b-f,N.length-S+1)):v.startLineNumber===v.endLineNumber?(u.push(jr.replace(V,N)),R=new yt(v.startLineNumber-f,v.startColumn,v.endLineNumber-f,v.endColumn)):(u.push(jr.replace(V,N)),R=new yt(v.startLineNumber-f,v.startColumn,v.startLineNumber-f,N.length-A)),Q.intersectRanges(V,r)!==null?h=R:d.push(R)}f+=V.endLineNumber-V.startLineNumber}d.unshift(h),t.pushUndoStop(),t.executeEdits(this.id,u,d),t.pushUndoStop()}}class pet extends Et{constructor(){super({id:"editor.action.transpose",label:C("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:de.writable})}run(e,t){let n=t.getSelections();if(n===null)return;let r=t.getModel();if(r===null)return;let o=[];for(let s=0,a=n.length;s<a;s++){let u=n[s];if(!u.isEmpty())continue;let d=u.getStartPosition(),h=r.getLineMaxColumn(d.lineNumber);if(d.column>=h){if(d.lineNumber===r.getLineCount())continue;let f=new Q(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),p=r.getValueInRange(f).split("").reverse().join("");o.push(new xs(new yt(d.lineNumber,Math.max(1,d.column-1),d.lineNumber+1,1),p))}else{let f=new Q(d.lineNumber,Math.max(1,d.column-1),d.lineNumber,d.column+1),p=r.getValueInRange(f).split("").reverse().join("");o.push(new aq(f,p,new yt(d.lineNumber,d.column+1,d.lineNumber,d.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class u7 extends Et{run(e,t){const n=t.getSelections();if(n===null)return;const r=t.getModel();if(r===null)return;const o=t.getOption(116),s=[];for(const a of n)if(a.isEmpty()){const u=a.getStartPosition(),d=t.getConfiguredWordAtPosition(u);if(!d)continue;const h=new Q(u.lineNumber,d.startColumn,u.lineNumber,d.endColumn),f=r.getValueInRange(h);s.push(jr.replace(h,this._modifyText(f,o)))}else{const u=r.getValueInRange(a);s.push(jr.replace(a,this._modifyText(u,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class met extends u7{constructor(){super({id:"editor.action.transformToUppercase",label:C("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:de.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class _et extends u7{constructor(){super({id:"editor.action.transformToLowercase",label:C("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:de.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class sZ{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class TO extends u7{constructor(){super({id:"editor.action.transformToTitlecase",label:C("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:de.writable})}_modifyText(e,t){const n=TO.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,r=>r.toLocaleUpperCase()):e}}TO.titleBoundary=new sZ("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class c0 extends u7{constructor(){super({id:"editor.action.transformToSnakecase",label:C("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:de.writable})}_modifyText(e,t){const n=c0.caseBoundary.get(),r=c0.singleLetters.get();return!n||!r?e:e.replace(n,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase()}}c0.caseBoundary=new sZ("(\\p{Ll})(\\p{Lu})","gmu");c0.singleLetters=new sZ("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");it(QJe);it(JJe);it(eet);it(tet);it(net);it(iet);it(ret);it(oet);it(l7);it(set);it(aet);it(uet);it(cet);it(det);it(het);it(fet);it(get);it(pet);it(met);it(_et);c0.caseBoundary.isSupported()&&c0.singleLetters.isSupported()&&it(c0);TO.titleBoundary.isSupported()&&it(TO);var vet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},bet=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ij=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Dme=new Dt("LinkedEditingInputVisible",!1),Ime="linked-editing-decoration";let M0=class rj extends Oe{constructor(e,t){super(),this._debounceDuration=200,this._localToDispose=this._register(new Qe),this._editor=e,this._enabled=!1,this._visibleContextKey=Dme.bindTo(t),this._currentDecorations=[],this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new Qe),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(n=>{(n.hasChanged(61)||n.hasChanged(81))&&this.reinitialize(!1)})),this._register(qF.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}static get(e){return e.getContribution(rj.ID)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(61)||this._editor.getOption(81))&&qF.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._languageWordPattern=vi.getWordDefinition(t.getLanguageId()),this._localToDispose.add(t.onDidChangeLanguageConfiguration(()=>{this._languageWordPattern=vi.getWordDefinition(t.getLanguageId())}));const r=new Ap(this._debounceDuration),o=()=>{this._rangeUpdateTriggerPromise=r.trigger(()=>this.updateRanges(),this._debounceDuration)},s=new Ap(0),a=u=>{this._rangeSyncTriggerPromise=s.trigger(()=>this._syncRanges(u))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(u=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const d=t.getDecorationRange(this._currentDecorations[0]);if(d&&u.changes.every(h=>d.intersectRanges(h.range))){a(this._currentDecorations);return}}o()})),this._localToDispose.add({dispose:()=>{r.cancel(),s.cancel()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._currentDecorations||e.length===0)return;const t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const r=t.getValueInRange(n);if(this._currentWordPattern){const s=r.match(this._currentWordPattern);if((s?s[0].length:0)!==r.length)return this.clearRanges()}let o=[];for(let s=1,a=e.length;s<a;s++){const u=t.getDecorationRange(e[s]);if(u)if(u.startLineNumber!==u.endLineNumber)o.push({range:u,text:r});else{let d=t.getValueInRange(u),h=r,f=u.startColumn,p=u.endColumn;const m=$y(d,h);f+=m,d=d.substr(m),h=h.substr(m);const v=TF(d,h);p-=v,d=d.substr(0,d.length-v),h=h.substr(0,h.length-v),(f!==p||h.length!==0)&&o.push({range:new Q(u.startLineNumber,f,u.endLineNumber,p),text:h})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const s=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(s)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(e=!1){return ij(this,void 0,void 0,function*(){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations&&this._currentDecorations.length>0){const s=n.getDecorationRange(this._currentDecorations[0]);if(s&&s.containsPosition(t))return}}this._currentRequestPosition=t,this._currentRequestModelVersion=r;const o=cs(s=>ij(this,void 0,void 0,function*(){try{const a=yield kme(n,t,s);if(o!==this._currentRequest||(this._currentRequest=null,r!==n.getVersionId()))return;let u=[];a!=null&&a.ranges&&(u=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let d=!1;for(let f=0,p=u.length;f<p;f++)if(Q.containsPosition(u[f],t)){if(d=!0,f!==0){const m=u[f];u.splice(f,1),u.unshift(m)}break}if(!d){this.clearRanges();return}const h=u.map(f=>({range:f,options:rj.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,h)}catch(a){wg(a)||gn(a),(this._currentRequest===o||!this._currentRequest)&&this.clearRanges()}}));return this._currentRequest=o,o})}};M0.ID="editor.contrib.linkedEditing";M0.DECORATION=Sn.register({description:"linked-editing",stickiness:0,className:Ime});M0=vet([bet(1,dn)],M0);class Cet extends Et{constructor(){super({id:"editor.action.linkedEditing",label:C("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:_t.and(de.writable,de.hasRenameProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(ki),[r,o]=Array.isArray(t)&&t||[void 0,void 0];return sn.isUri(r)&&Le.isIPosition(o)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},gn):super.runCommand(e,t)}run(e,t){const n=M0.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const wet=Ps.bindToContribution(M0.get);nt(new wet({id:"cancelLinkedEditingInput",precondition:Dme,handler:i=>i.clearRanges(),kbOpts:{kbExpr:de.editorTextFocus,weight:100+99,primary:9,secondary:[1033]}}));function kme(i,e,t){const n=qF.ordered(i);return Vle(n.map(r=>()=>ij(this,void 0,void 0,function*(){try{return yield r.provideLinkedEditingRanges(i,e,t)}catch(o){Rs(o);return}})),r=>!!r&&vl(r==null?void 0:r.ranges))}const yet=Ce("editor.linkedEditingBackground",{dark:ye.fromHex("#f00").transparent(.3),light:ye.fromHex("#f00").transparent(.3),hc:ye.fromHex("#f00").transparent(.3)},C("editorLinkedEditingBackground","Background color when the editor auto renames on type."));hr((i,e)=>{const t=i.getColor(yet);t&&e.addRule(`.monaco-editor .${Ime} { background: ${t}; border-left-color: ${t}; }`)});Lg("_executeLinkedEditingProvider",(i,e)=>kme(i,e,Vn.None));Ti(M0.ID,M0);it(Cet);var Tme=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Let{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}resolve(e){return Tme(this,void 0,void 0,function*(){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))})}}class c5{constructor(e){this._disposables=new Qe;let t=[];for(const[n,r]of e){const o=n.links.map(s=>new Let(s,r));t=c5._union(t,o),ZK(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){let n=[],r,o,s,a;for(r=0,s=0,o=e.length,a=t.length;r<o&&s<a;){const u=e[r],d=t[s];if(Q.areIntersectingOrTouching(u.range,d.range)){r++;continue}Q.compareRangesUsingStarts(u.range,d.range)<0?(n.push(u),r++):(n.push(d),s++)}for(;r<o;r++)n.push(e[r]);for(;s<a;s++)n.push(t[s]);return n}}function Nme(i,e){const t=[],n=NA.ordered(i).reverse().map((r,o)=>Promise.resolve(r.provideLinks(i,e)).then(s=>{s&&(t[o]=[s,r])},Rs));return Promise.all(n).then(()=>{const r=new c5(BS(t));return e.isCancellationRequested?(r.dispose(),new c5([])):r})}Qn.registerCommand("_executeLinkProvider",(i,...e)=>Tme(void 0,void 0,void 0,function*(){let[t,n]=e;Gi(t instanceof sn),typeof n!="number"&&(n=0);const r=i.get(Io).getModel(t);if(!r)return[];const o=yield Nme(r,Vn.None);if(!o)return[];for(let a=0;a<Math.min(n,o.links.length);a++)yield o.links[a].resolve(Vn.None);const s=o.links.slice(0);return o.dispose(),s}));var Eet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Yie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},xet=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};function Det(i,e){const t=i.url&&/^command:/i.test(i.url.toString()),n=i.tooltip?i.tooltip:t?C("links.navigate.executeCmd","Execute command"):C("links.navigate.follow","Follow link"),r=e?qn?C("links.navigate.kb.meta.mac","cmd + click"):C("links.navigate.kb.meta","ctrl + click"):qn?C("links.navigate.kb.alt.mac","option + click"):C("links.navigate.kb.alt","alt + click");if(i.url){let o="";if(/^command:/i.test(i.url.toString())){const a=i.url.toString().match(/^command:([^?#]+)/);if(a){const u=a[1];o=` "${C("tooltip.explanation","Execute command {0}",u)}"`}}return new Rp("",!0).appendMarkdown(`[${n}](${i.url.toString(!0).replace(/ /g,"%20")}${o}) (${r})`)}else return new Rp().appendText(`${n} (${r})`)}const Zie={general:Sn.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Sn.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class Ey{constructor(e,t){this.link=e,this.decorationId=t}static decoration(e,t){return{range:e.range,options:Ey._getOptions(e,t,!1)}}static _getOptions(e,t,n){const r=Object.assign({},n?Zie.active:Zie.general);return r.hoverMessage=Det(e,t),r}activate(e,t){e.changeDecorationOptions(this.decorationId,Ey._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,Ey._getOptions(this.link,t,!1))}}let Qb=class oj{constructor(e,t,n){this.listenersToRemove=new Qe,this.editor=e,this.openerService=t,this.notificationService=n;let r=new Pge(e);this.listenersToRemove.add(r),this.listenersToRemove.add(r.onMouseMoveOrRelevantKeyDown(([o,s])=>{this._onEditorMouseMove(o,s)})),this.listenersToRemove.add(r.onExecute(o=>{this.onEditorMouseUp(o)})),this.listenersToRemove.add(r.onCancel(o=>{this.cleanUpActiveLinkDecoration()})),this.enabled=e.getOption(62),this.listenersToRemove.add(e.onDidChangeConfiguration(o=>{const s=e.getOption(62);this.enabled!==s&&(this.enabled=s,this.updateDecorations([]),this.stop(),this.beginCompute())})),this.listenersToRemove.add(e.onDidChangeModelContent(o=>this.onChange())),this.listenersToRemove.add(e.onDidChangeModel(o=>this.onModelChanged())),this.listenersToRemove.add(e.onDidChangeModelLanguage(o=>this.onModelModeChanged())),this.listenersToRemove.add(NA.onDidChange(o=>this.onModelModeChanged())),this.timeout=new Oa,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}static get(e){return e.getContribution(oj.ID)}onModelChanged(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}onModelModeChanged(){this.stop(),this.beginCompute()}onChange(){this.timeout.setIfNotSet(()=>this.beginCompute(),oj.RECOMPUTE_TIME)}beginCompute(){return xet(this,void 0,void 0,function*(){if(!this.editor.hasModel()||!this.enabled)return;const e=this.editor.getModel();if(NA.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=cs(t=>Nme(e,t));try{this.activeLinksList=yield this.computePromise,this.updateDecorations(this.activeLinksList.links)}catch(t){gn(t)}finally{this.computePromise=null}}})}updateDecorations(e){const t=this.editor.getOption(69)==="altKey";let n=[],r=Object.keys(this.currentOccurrences);for(let a=0,u=r.length;a<u;a++){let d=r[a],h=this.currentOccurrences[d];n.push(h.decorationId)}let o=[];if(e)for(const a of e)o.push(Ey.decoration(a,t));let s=this.editor.deltaDecorations(n,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let a=0,u=s.length;a<u;a++){let d=new Ey(e[a],s[a]);this.currentOccurrences[d.decorationId]=d}}_onEditorMouseMove(e,t){const n=this.editor.getOption(69)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations(o=>{r.activate(o,n),this.activeLinkDecorationId=r.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(69)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:r}=e;r.resolve(Vn.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const s=this.editor.getModel().uri;if(s.scheme===kn.file&&o.startsWith(`${kn.file}:`)){const a=sn.parse(o);if(a.scheme===kn.file){const u=n4(a);let d=null;u.startsWith("/./")?d=`.${u.substr(1)}`:u.startsWith("//./")&&(d=`.${u.substr(2)}`),d&&(o=Kke(s,d))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})},o=>{const s=o instanceof Error?o.message:o;s==="invalid"?this.notificationService.warn(C("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):s==="missing"?this.notificationService.warn(C("missing.url","Failed to open this link because its target is missing.")):gn(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const r=this.currentOccurrences[n.id];if(r)return r}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.timeout.cancel(),this.activeLinksList&&((e=this.activeLinksList)===null||e===void 0||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}};Qb.ID="editor.linkDetector";Qb.RECOMPUTE_TIME=1e3;Qb=Eet([Yie(1,El),Yie(2,fo)],Qb);class Iet extends Et{constructor(){super({id:"editor.action.openLink",label:C("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){let n=Qb.get(t);if(!n||!t.hasModel())return;let r=t.getSelections();for(let o of r){let s=n.getLinkOccurrence(o.getEndPosition());s&&n.openLinkOccurrence(s,!1)}}}Ti(Qb.ID,Qb);it(Iet);hr((i,e)=>{const t=i.getColor(sce);t&&e.addRule(`.monaco-editor .detected-link-active { color: ${t} !important; }`)});function lL(i,e){const t=e.filter(n=>!i.find(r=>r.equals(n)));if(t.length>=1){const n=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),r=t.length===1?C("cursorAdded","Cursor added: {0}",n):C("cursorsAdded","Cursors added: {0}",n);EF(r)}}class ket extends Et{constructor(){super({id:"editor.action.insertCursorAbove",label:C("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(n.source,3,os.addCursorUp(o,s,r)),o.revealTopMostCursor(n.source),lL(s,o.getCursorStates())}}class Tet extends Et{constructor(){super({id:"editor.action.insertCursorBelow",label:C("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let r=!0;n&&n.logicalLine===!1&&(r=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.pushStackElement();const s=o.getCursorStates();o.setCursorStates(n.source,3,os.addCursorDown(o,s,r)),o.revealBottomMostCursor(n.source),lL(s,o.getCursorStates())}}class Net extends Et{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:C("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let r=e.startLineNumber;r<e.endLineNumber;r++){let o=t.getLineMaxColumn(r);n.push(new yt(r,o,r,o))}e.endColumn>1&&n.push(new yt(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),r=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates();let a=[];r.forEach(u=>this.getCursorsForSelection(u,n,a)),a.length>0&&t.setSelections(a),lL(s,o.getCursorStates())}}class Aet extends Et{constructor(){super({id:"editor.action.addCursorsToBottom",label:C("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),r=t.getModel().getLineCount();let o=[];for(let u=n[0].startLineNumber;u<=r;u++)o.push(new yt(u,n[0].startColumn,u,n[0].endColumn));const s=t._getViewModel(),a=s.getCursorStates();o.length>0&&t.setSelections(o),lL(a,s.getCursorStates())}}class Oet extends Et{constructor(){super({id:"editor.action.addCursorsToTop",label:C("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections();let r=[];for(let a=n[0].startLineNumber;a>=1;a--)r.push(new yt(a,n[0].startColumn,a,n[0].endColumn));const o=t._getViewModel(),s=o.getCursorStates();r.length>0&&t.setSelections(r),lL(s,o.getCursorStates())}}class LP{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class NO{constructor(e,t,n,r,o,s,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=r,this.wholeWord=o,this.matchCase=s,this.currentMatch=a}static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new NO(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let r=!1,o,s;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(r=!0,o=!0,s=!0):(o=n.wholeWord,s=n.matchCase);const u=e.getSelection();let d,h=null;if(u.isEmpty()){const f=e.getConfiguredWordAtPosition(u.getStartPosition());if(!f)return null;d=f.word,h=new yt(u.startLineNumber,f.startColumn,u.startLineNumber,f.endColumn)}else d=e.getModel().getValueInRange(u).replace(/\r\n/g,`
`);return new NO(e,t,r,d,o,s,h)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new yt(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new LP(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const r=this.currentMatch;return this.currentMatch=null,r}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return n?new yt(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}}class Jb extends Oe{constructor(e){super(),this._sessionDispose=this._register(new Qe),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(Jb.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=NO.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(r=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(r=>{(r.matchCase||r.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new yt(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const r=e.getState().matchCase;if(!Ame(this._editor.getModel(),t,r)){const s=this._editor.getModel();let a=[];for(let u=0,d=t.length;u<d;u++)a[u]=this._expandEmptyToWord(s,t[u]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){const r=n.searchScope;let o=[];t.forEach(s=>{r.forEach(a=>{s.range.endLineNumber<=a.endLineNumber&&s.range.startLineNumber>=a.startLineNumber&&o.push(s)})}),t=o}if(t.length>0){const r=this._editor.getSelection();for(let o=0,s=t.length;o<s;o++){const a=t[o];if(a.range.intersectRanges(r)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new yt(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}}Jb.ID="editor.contrib.multiCursorController";class uL extends Et{run(e,t){const n=Jb.get(t);if(!n)return;const r=Il.get(t);if(!r)return;const o=t._getViewModel();if(o){const s=o.getCursorStates();this._run(n,r),lL(s,o.getCursorStates())}}}class Met extends uL{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:C("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2082,weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class Ret extends uL{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:C("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class Pet extends uL{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:C("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:Yr(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class Fet extends uL{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:C("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class Bet extends uL{constructor(){super({id:"editor.action.selectHighlights",label:C("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:3114,weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"3_multi",title:C({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class Wet extends uL{constructor(){super({id:"editor.action.changeAll",label:C("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:_t.and(de.writable,de.editorTextFocus),kbOpts:{kbExpr:de.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class Vet{constructor(e,t,n,r,o){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(Q.compareRangesUsingStarts)),this._cachedFindMatches}}class Sp extends Oe{constructor(e){super(),this.editor=e,this._isEnabled=e.getOption(96),this.decorations=[],this.updateSoon=this._register(new er(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(t=>{this._isEnabled=e.getOption(96)})),this._register(e.onDidChangeCursorSelection(t=>{this._isEnabled&&(t.selection.isEmpty()?t.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(t=>{this._setState(null)})),this._register(e.onDidChangeModelContent(t=>{this._isEnabled&&this.updateSoon.schedule()})),this._register(Il.get(e).getState().onFindReplaceStateChange(t=>{this._update()}))}_update(){this._setState(Sp._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const r=n.getSelection();if(r.startLineNumber!==r.endLineNumber)return null;const o=Jb.get(n);if(!o)return null;const s=Il.get(n);if(!s)return null;let a=o.getSession(s);if(!a){const h=n.getSelections();if(h.length>1){const p=s.getState().matchCase;if(!Ame(n.getModel(),h,p))return null}a=NO.create(n,s)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const u=s.getState(),d=u.matchCase;if(u.isRevealed){let h=u.searchString;d||(h=h.toLowerCase());let f=a.searchText;if(d||(f=f.toLowerCase()),h===f&&a.matchCase===u.matchCase&&a.wholeWord===u.wholeWord&&!u.isRegex)return null}return new Vet(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(116):null,e)}_setState(e){if(this.state=e,!this.state){this.decorations=this.editor.deltaDecorations(this.decorations,[]);return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),r=this.editor.getSelections();r.sort(Q.compareRangesUsingStarts);const o=[];for(let u=0,d=0,h=n.length,f=r.length;u<h;){const p=n[u];if(d>=f)o.push(p),u++;else{const m=Q.compareRangesUsingStarts(p,r[d]);m<0?((r[d].isEmpty()||!Q.areIntersecting(p,r[d]))&&o.push(p),u++):(m>0||u++,d++)}}const s=jy.has(t)&&this.editor.getOption(71),a=o.map(u=>({range:u,options:s?Sp._SELECTION_HIGHLIGHT:Sp._SELECTION_HIGHLIGHT_OVERVIEW}));this.decorations=this.editor.deltaDecorations(this.decorations,a)}dispose(){this._setState(null),super.dispose()}}Sp.ID="editor.contrib.selectionHighlighter";Sp._SELECTION_HIGHLIGHT_OVERVIEW=Sn.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:Lr(T8),position:bl.Inline},overviewRuler:{color:Lr(uce),position:Sl.Center}});Sp._SELECTION_HIGHLIGHT=Sn.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"});function Ame(i,e,t){const n=Xie(i,e[0],!t);for(let r=1,o=e.length;r<o;r++){const s=e[r];if(s.isEmpty())return!1;const a=Xie(i,s,!t);if(n!==a)return!1}return!0}function Xie(i,e,t){const n=i.getValueInRange(e);return t?n.toLowerCase():n}Ti(Jb.ID,Jb);Ti(Sp.ID,Sp);it(ket);it(Tet);it(Net);it(Met);it(Ret);it(Pet);it(Fet);it(Bet);it(Wet);it(Aet);it(Oet);var Ome=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const eC={Visible:new Dt("parameterHintsVisible",!1),MultipleSignatures:new Dt("parameterHintsMultipleSignatures",!1)};function Mme(i,e,t,n){return Ome(this,void 0,void 0,function*(){const r=eb.ordered(i);for(const o of r)try{const s=yield o.provideSignatureHelp(i,e,n,t);if(s)return s}catch(s){Rs(s)}})}Qn.registerCommand("_executeSignatureHelpProvider",(i,...e)=>Ome(void 0,void 0,void 0,function*(){const[t,n,r]=e;Gi(sn.isUri(t)),Gi(Le.isIPosition(n)),Gi(typeof r=="string"||!r);const o=yield i.get(Qa).createModelReference(t);try{const s=yield Mme(o.object.textEditorModel,Le.lift(n),{triggerKind:tg.Invoke,isRetrigger:!1,triggerCharacter:r},Vn.None);return s?(setTimeout(()=>s.dispose(),0),s.value):void 0}finally{o.dispose()}}));var Het=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},Tv;(function(i){i.Default={type:0};class e{constructor(r,o){this.request=r,this.previouslyActiveHints=o,this.type=2}}i.Pending=e;class t{constructor(r){this.hints=r,this.type=1}}i.Active=t})(Tv||(Tv={}));class c7 extends Oe{constructor(e,t=c7.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new be),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Tv.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new Aa),this.triggerChars=new Mw,this.retriggerChars=new Mw,this.triggerId=0,this.editor=e,this.throttledDelayer=new Ap(t),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(n=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(n=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(n=>this.onCursorChange(n))),this._register(this.editor.onDidChangeModelContent(n=>this.onModelContentChange())),this._register(eb.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(n=>this.onDidType(n))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Tv.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!eb.has(n))return;const r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(r),t).catch(gn)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,r=this.editor.getOption(75).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,r=this.editor.getOption(75).cycle;if((e<2||n)&&!r){this.cancel();return}this.updateActiveSignature(n&&r?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Tv.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}doTrigger(e){return Het(this,void 0,void 0,function*(){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const r=this._pendingTriggers.reduce($et);this._pendingTriggers=[];const o={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const s=this.editor.getModel(),a=this.editor.getPosition();this.state=new Tv.Pending(cs(u=>Mme(s,a,o,u)),n);try{const u=yield this.state.request;return e!==this.triggerId?(u==null||u.dispose(),!1):!u||!u.value.signatures||u.value.signatures.length===0?(u==null||u.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Tv.Active(u.value),this._lastSignatureHelpResult.value=u,this._onChangedHints.fire(this.state.hints),!0)}catch(u){return e===this.triggerId&&(this.state=Tv.Default),gn(u),!1}})}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new Mw,this.retriggerChars=new Mw;const e=this.editor.getModel();if(e)for(const t of eb.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])this.triggerChars.add(n.charCodeAt(0)),this.retriggerChars.add(n.charCodeAt(0));for(const n of t.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:tg.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:tg.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:tg.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}c7.DEFAULT_DELAY=120;function $et(i,e){switch(e.triggerKind){case tg.Invoke:return e;case tg.ContentChange:return i;case tg.TriggerCharacter:default:return e}}var zet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},CW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const wu=Ge,Uet=ds("parameter-hints-next",_e.chevronDown,C("parameterHintsNextIcon","Icon for show next parameter hint.")),jet=ds("parameter-hints-previous",_e.chevronUp,C("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let d5=class Rme extends Oe{constructor(e,t,n,r){super(),this.editor=e,this.renderDisposeables=this._register(new Qe),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Bp({editor:e},r,n)),this.model=this._register(new c7(e)),this.keyVisible=eC.Visible.bindTo(t),this.keyMultipleSignatures=eC.MultipleSignatures.bindTo(t),this._register(this.model.onChangedHints(o=>{o?(this.show(),this.render(o)):this.hide()}))}createParameterHintDOMNodes(){const e=wu(".editor-widget.parameter-hints-widget"),t=Be(e,wu(".phwrapper"));t.tabIndex=-1;const n=Be(t,wu(".controls")),r=Be(n,wu(".button"+pr.asCSSSelector(jet))),o=Be(n,wu(".overloads")),s=Be(n,wu(".button"+pr.asCSSSelector(Uet)));this._register(qe(r,"click",p=>{Ni.stop(p),this.previous()})),this._register(qe(s,"click",p=>{Ni.stop(p),this.next()}));const a=wu(".body"),u=new pM(a,{});this._register(u),t.appendChild(u.getDomNode());const d=Be(a,wu(".signature")),h=Be(a,wu(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:o,docs:h,scrollbar:u},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(p=>{this.visible&&this.editor.layoutContentWidget(this)}));const f=()=>{if(!this.domNodes)return;const p=this.editor.getOption(43);this.domNodes.element.style.fontSize=`${p.fontSize}px`,this.domNodes.element.style.lineHeight=`${p.lineHeight/p.fontSize}`};f(),this._register(Rt.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(p=>p.hasChanged(43)).on(f,null)),this._register(this.editor.onDidLayoutChange(p=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes&&this.domNodes.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const r=e.signatures[e.activeSignature];if(!r)return;const o=Be(this.domNodes.signature,wu(".code")),s=this.editor.getOption(43);o.style.fontSize=`${s.fontSize}px`,o.style.fontFamily=s.fontFamily;const a=r.parameters.length>0,u=(t=r.activeParameter)!==null&&t!==void 0?t:e.activeParameter;if(a)this.renderParameters(o,r,u);else{const f=Be(o,wu("span"));f.textContent=r.label}const d=r.parameters[u];if(d!=null&&d.documentation){const f=wu("span.documentation");if(typeof d.documentation=="string")f.textContent=d.documentation;else{const p=this.renderMarkdownDocs(d.documentation);f.appendChild(p.element)}Be(this.domNodes.docs,wu("p",{},f))}if(r.documentation!==void 0)if(typeof r.documentation=="string")Be(this.domNodes.docs,wu("p",{},r.documentation));else{const f=this.renderMarkdownDocs(r.documentation);Be(this.domNodes.docs,f.element)}const h=this.hasDocs(r,d);if(this.domNodes.signature.classList.toggle("has-docs",h),this.domNodes.docs.classList.toggle("empty",!h),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let f="";const p=r.parameters[u];Array.isArray(p.label)?f=r.label.substring(p.label[0],p.label[1]):f=p.label,p.documentation&&(f+=typeof p.documentation=="string"?`, ${p.documentation}`:`, ${p.documentation.value}`),r.documentation&&(f+=typeof r.documentation=="string"?`, ${r.documentation}`:`, ${r.documentation.value}`),this.announcedLabel!==f&&(ks(C("hint","{0}, hint",f)),this.announcedLabel=f)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var n;(n=this.domNodes)===null||n===void 0||n.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&SR(t.documentation).length>0||t&&typeof t.documentation=="object"&&SR(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&SR(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&SR(e.documentation.value).length>0)}renderParameters(e,t,n){const[r,o]=this.getParameterLabelOffsets(t,n),s=document.createElement("span");s.textContent=t.label.substring(0,r);const a=document.createElement("span");a.textContent=t.label.substring(r,o),a.className="parameter active";const u=document.createElement("span");u.textContent=t.label.substring(o),Be(e,s,a,u)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const r=new RegExp(`(\\W|^)${hc(n.label)}(?=\\W|$)`,"g");r.test(e.label);const o=r.lastIndex-n.label.length;return o>=0?[o,r.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return Rme.ID}trigger(e){this.model.trigger(e,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}};d5.ID="editor.widget.parameterHintsWidget";d5=zet([CW(1,dn),CW(2,El),CW(3,Fs)],d5);const Ket=Ce("editorHoverWidget.highlightForeground",{dark:x9,light:x9,hc:x9},C("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));hr((i,e)=>{const t=i.getColor(PG);if(t){const d=i.type===Jc.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${d}px solid ${t}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${t.transparent(.5)}; }`)}const n=i.getColor(Ib);n&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${n}; }`);const r=i.getColor(x8);r&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${r}; }`);const o=i.getColor(D8);o&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${o}; }`);const s=i.getColor(RG);s&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${s}; }`);const a=i.getColor(Yue);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const u=i.getColor(Ket);u&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${u}}`)});var Get=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},qet=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let tC=class Pme extends Oe{constructor(e,t){super(),this.editor=e,this.widget=this._register(t.createInstance(d5,this.editor))}static get(e){return e.getContribution(Pme.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(e){this.widget.trigger(e)}};tC.ID="editor.controller.parameterHints";tC=Get([qet(1,An)],tC);class Yet extends Et{constructor(){super({id:"editor.action.triggerParameterHints",label:C("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:de.hasSignatureHelpProvider,kbOpts:{kbExpr:de.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=tC.get(t);n&&n.trigger({triggerKind:tg.Invoke})}}Ti(tC.ID,tC);it(Yet);const aZ=100+75,lZ=Ps.bindToContribution(tC.get);nt(new lZ({id:"closeParameterHints",precondition:eC.Visible,handler:i=>i.cancel(),kbOpts:{weight:aZ,kbExpr:de.focus,primary:9,secondary:[1033]}}));nt(new lZ({id:"showPrevParameterHint",precondition:_t.and(eC.Visible,eC.MultipleSignatures),handler:i=>i.previous(),kbOpts:{weight:aZ,kbExpr:de.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));nt(new lZ({id:"showNextParameterHint",precondition:_t.and(eC.Visible,eC.MultipleSignatures),handler:i=>i.next(),kbOpts:{weight:aZ,kbExpr:de.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var Zet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},wW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const d7=new Dt("renameInputVisible",!1,C("renameInputVisible","Whether the rename input widget is visible"));let sj=class{constructor(e,t,n,r,o){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=r,this._disposables=new Qe,this.allowEditorOverflow=!0,this._visibleContextKey=d7.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(s=>{s.hasChanged(43)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",C("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var t,n;const[r,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(r),this._label.innerText=C({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(r))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(o))===null||n===void 0?void 0:n.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,n,r,o;if(!this._input||!this._domNode)return;const s=e.getColor(C0);this._domNode.style.backgroundColor=String((t=e.getColor(Yh))!==null&&t!==void 0?t:""),this._domNode.style.boxShadow=s?` 0 0 8px 2px ${s}`:"",this._domNode.style.color=String((n=e.getColor(TG))!==null&&n!==void 0?n:""),this._input.style.backgroundColor=String((r=e.getColor(kG))!==null&&r!==void 0?r:"");const a=e.getColor(NG);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=(o=a==null?void 0:a.toString())!==null&&o!==void 0?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(43);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=`${e.fontSize*.8}px`}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){this._currentAcceptInput&&this._currentAcceptInput(e)}cancelInput(e){this._currentCancelInput&&this._currentCancelInput(e)}getInput(e,t,n,r,o,s){this._domNode.classList.toggle("preview",o),this._position=new Le(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",r.toString()),this._input.size=Math.max((e.endColumn-e.startColumn)*1.1,20);const a=new Qe;return new Promise(u=>{this._currentCancelInput=d=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,u(d),!0),this._currentAcceptInput=d=>{if(this._input.value.trim().length===0||this._input.value===t){this.cancelInput(!0);return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,u({newName:this._input.value,wantsPreview:o&&d})},s.onCancellationRequested(()=>this.cancelInput(!0)),a.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!1))),this._show()}).finally(()=>{a.dispose(),this._hide()})}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))},100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};sj=Zet([wW(2,Er),wW(3,Sr),wW(4,dn)],sj);var Xet=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},lw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ub=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class uZ{constructor(e,t){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=GF.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return ub(this,void 0,void 0,function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const r=this._providers[this._providerRenameIdx];if(!r.resolveRenameLocation)break;let o=yield r.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}const n=this.model.getWordAtPosition(this.position);return n?{range:new Q(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}})}provideRenameEdits(e,t){return ub(this,void 0,void 0,function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)})}_provideRenameEdits(e,t,n,r){return ub(this,void 0,void 0,function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:n.join(`
`)};const s=yield o.provideRenameEdits(this.model,this.position,e,r);if(s){if(s.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(s.rejectReason),r)}else return this._provideRenameEdits(e,t+1,n.concat(C("no result","No result.")),r);return s})}}function Qet(i,e,t){return ub(this,void 0,void 0,function*(){const n=new uZ(i,e),r=yield n.resolveRenameLocation(Vn.None);return r!=null&&r.rejectReason?{edits:[],rejectReason:r.rejectReason}:n.provideRenameEdits(t,Vn.None)})}let nC=class Fme{constructor(e,t,n,r,o,s,a){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=r,this._progressService=o,this._logService=s,this._configService=a,this._dispoableStore=new Qe,this._cts=new oa,this._renameInputField=this._dispoableStore.add(new ny(()=>this._dispoableStore.add(this._instaService.createInstance(sj,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))))}static get(e){return e.getContribution(Fme.ID)}dispose(){this._dispoableStore.dispose(),this._cts.dispose(!0)}run(){return ub(this,void 0,void 0,function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const e=this.editor.getPosition(),t=new uZ(this.editor.getModel(),e);if(!t.hasProvider())return;this._cts=new YA(this.editor,5);let n;try{const h=t.resolveRenameLocation(this._cts.token);this._progressService.showWhile(h,250),n=yield h}catch(h){Bu.get(this.editor).showMessage(h||C("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),e);return}if(!n)return;if(n.rejectReason){Bu.get(this.editor).showMessage(n.rejectReason,e);return}if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new YA(this.editor,5,n.range);let r=this.editor.getSelection(),o=0,s=n.text.length;!Q.isEmpty(r)&&!Q.spansMultipleLines(r)&&Q.containsRange(n.range,r)&&(o=Math.max(0,r.startColumn-n.range.startColumn),s=Math.min(n.range.endColumn,r.endColumn)-n.range.startColumn);const a=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),u=yield this._renameInputField.value.getInput(n.range,n.text,o,s,a,this._cts.token);if(typeof u=="boolean"){u&&this.editor.focus();return}this.editor.focus();const d=rG(t.provideRenameEdits(u.newName,this._cts.token),this._cts.token).then(h=>ub(this,void 0,void 0,function*(){if(!(!h||!this.editor.hasModel())){if(h.rejectReason){this._notificationService.info(h.rejectReason);return}this.editor.setSelection(Q.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(Z8.convert(h),{editor:this.editor,showPreview:u.wantsPreview,label:C("label","Renaming '{0}'",n==null?void 0:n.text),quotableLabel:C("quotableLabel","Renaming {0}",n==null?void 0:n.text)}).then(f=>{f.ariaSummary&&ks(C("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",n.text,u.newName,f.ariaSummary))}).catch(f=>{this._notificationService.error(C("rename.failedApply","Rename failed to apply edits")),this._logService.error(f)})}}),h=>{this._notificationService.error(C("rename.failed","Rename failed to compute edits")),this._logService.error(h)});return this._progressService.showWhile(d,250),d})}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};nC.ID="editor.contrib.renameController";nC=Xet([lw(1,An),lw(2,fo),lw(3,Sq),lw(4,zp),lw(5,Sg),lw(6,Iq)],nC);class Jet extends Et{constructor(){super({id:"editor.action.rename",label:C("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:_t.and(de.writable,de.hasRenameProvider),kbOpts:{kbExpr:de.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(ki),[r,o]=Array.isArray(t)&&t||[void 0,void 0];return sn.isUri(r)&&Le.isIPosition(o)?n.openCodeEditor({resource:r},n.getActiveCodeEditor()).then(s=>{s&&(s.setPosition(o),s.invokeWithinContext(a=>(this.reportTelemetry(a,s),this.run(a,s))))},gn):super.runCommand(e,t)}run(e,t){const n=nC.get(t);return n?n.run():Promise.resolve()}}Ti(nC.ID,nC);it(Jet);const cZ=Ps.bindToContribution(nC.get);nt(new cZ({id:"acceptRenameInput",precondition:d7,handler:i=>i.acceptRenameInput(!1),kbOpts:{weight:100+99,kbExpr:de.focus,primary:3}}));nt(new cZ({id:"acceptRenameInputWithPreview",precondition:_t.and(d7,_t.has("config.editor.rename.enablePreview")),handler:i=>i.acceptRenameInput(!0),kbOpts:{weight:100+99,kbExpr:de.focus,primary:1024+3}}));nt(new cZ({id:"cancelRenameInput",precondition:d7,handler:i=>i.cancelRenameInput(),kbOpts:{weight:100+99,kbExpr:de.focus,primary:9,secondary:[1033]}}));Lg("_executeDocumentRenameProvider",function(i,e,...t){const[n]=t;return Gi(typeof n=="string"),Qet(i,e,n)});Lg("_executePrepareRename",function(i,e){return ub(this,void 0,void 0,function*(){const n=yield new uZ(i,e).resolveRenameLocation(Vn.None);if(n!=null&&n.rejectReason)throw new Error(n.rejectReason);return n})});Zr.as(wC.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:C("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});class ett{provideSelectionRanges(e,t){const n=[];for(const r of t){const o=[];n.push(o),this._addInWordRanges(o,e,r),this._addWordRanges(o,e,r),this._addWhitespaceLine(o,e,r),o.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const r=t.getWordAtPosition(n);if(!r)return;let{word:o,startColumn:s}=r,a=n.column-s,u=a,d=a,h=0;for(;u>=0;u--){let f=o.charCodeAt(u);if(u!==a&&(f===95||f===45))break;if(Wv(f)&&kf(h))break;h=f}for(u+=1;d<o.length;d++){let f=o.charCodeAt(d);if(kf(f)&&Wv(h))break;if(f===95||f===45)break;h=f}u<d&&e.push({range:new Q(n.lineNumber,s+u,n.lineNumber,s+d)})}_addWordRanges(e,t,n){const r=t.getWordAtPosition(n);r&&e.push({range:new Q(n.lineNumber,r.startColumn,n.lineNumber,r.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new Q(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var dZ=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class hZ{constructor(e,t){this.index=e,this.ranges=t}mov(e){let t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new hZ(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}class vS{constructor(e){this._editor=e,this._ignoreSelection=!1}static get(e){return e.getContribution(vS.ID)}dispose(){var e;(e=this._selectionListener)===null||e===void 0||e.dispose()}run(e){return dZ(this,void 0,void 0,function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(!F8.has(n)||(this._state||(yield Wme(n,t.map(o=>o.getPosition()),this._editor.getOption(101),Vn.None).then(o=>{var s;if(!(!vl(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!oc(this._editor.getSelections(),t,(a,u)=>a.equalsSelection(u)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(u=>u.containsPosition(t[a].getStartPosition())&&u.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new hZ(0,a)),(s=this._selectionListener)===null||s===void 0||s.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)===null||a===void 0||a.dispose(),this._state=void 0)})}})),!this._state))return;this._state=this._state.map(o=>o.mov(e));const r=this._state.map(o=>yt.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(r)}finally{this._ignoreSelection=!1}})}}vS.ID="editor.contrib.smartSelectController";class Bme extends Et{constructor(e,t){super(t),this._forward=e}run(e,t){return dZ(this,void 0,void 0,function*(){let n=vS.get(t);n&&(yield n.run(this._forward))})}}class ttt extends Bme{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:C("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}Qn.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class ntt extends Bme{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:C("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:de.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:Mt.MenubarSelectionMenu,group:"1_basic",title:C({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}Ti(vS.ID,vS);it(ttt);it(ntt);F8.register("*",new ett);function Wme(i,e,t,n){return dZ(this,void 0,void 0,function*(){const r=F8.all(i);r.length===1&&r.unshift(new Su);let o=[],s=[];for(const a of r)o.push(Promise.resolve(a.provideSelectionRanges(i,e,n)).then(u=>{if(vl(u)&&u.length===e.length)for(let d=0;d<e.length;d++){s[d]||(s[d]=[]);for(const h of u[d])Q.isIRange(h.range)&&Q.containsPosition(h.range,e[d])&&s[d].push(Q.lift(h.range))}},Rs));return yield Promise.all(o),s.map(a=>{if(a.length===0)return[];a.sort((f,p)=>Le.isBefore(f.getStartPosition(),p.getStartPosition())?1:Le.isBefore(p.getStartPosition(),f.getStartPosition())||Le.isBefore(f.getEndPosition(),p.getEndPosition())?-1:Le.isBefore(p.getEndPosition(),f.getEndPosition())?1:0);let u=[],d;for(const f of a)(!d||Q.containsRange(f,d)&&!Q.equalsRange(f,d))&&(u.push(f),d=f);if(!t.selectLeadingAndTrailingWhitespace)return u;let h=[u[0]];for(let f=1;f<u.length;f++){const p=u[f-1],m=u[f];if(m.startLineNumber!==p.startLineNumber||m.endLineNumber!==p.endLineNumber){const v=new Q(p.startLineNumber,i.getLineFirstNonWhitespaceColumn(p.startLineNumber),p.endLineNumber,i.getLineLastNonWhitespaceColumn(p.endLineNumber));v.containsRange(p)&&!v.equalsRange(p)&&m.containsRange(v)&&!m.equalsRange(v)&&h.push(v);const b=new Q(p.startLineNumber,1,p.endLineNumber,i.getLineMaxColumn(p.endLineNumber));b.containsRange(p)&&!b.equalsRange(v)&&m.containsRange(b)&&!m.equalsRange(b)&&h.push(b)}h.push(m)}return h})})}dxe("_executeSelectionRangeProvider",function(i,...e){const[t]=e;return Wme(i,t,{selectLeadingAndTrailingWhitespace:!0},Vn.None)});class itt extends Et{constructor(){super({id:"editor.action.forceRetokenize",label:C("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.resetTokenization();const r=new rg(!0);n.forceTokenization(n.getLineCount()),r.stop(),console.log(`tokenization took ${r.elapsed()}`)}}it(itt);class bS extends Et{constructor(){super({id:bS.ID,label:C({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const r=!HF.getTabFocusMode();HF.setTabFocusMode(r),ks(r?C("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):C("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}bS.ID="editor.action.toggleTabFocusMode";it(bS);var rtt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Qie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ott=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const Vme="ignoreUnusualLineTerminators";function stt(i,e,t){i.setModelProperty(e.uri,Vme,t)}function att(i,e){return i.getModelProperty(e.uri,Vme)}let AO=class extends Oe{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._config=this._editor.getOption(113),this._register(this._editor.onDidChangeConfiguration(r=>{r.hasChanged(113)&&(this._config=this._editor.getOption(113),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(r=>{r.isUndoing||this._checkForUnusualLineTerminators()}))}_checkForUnusualLineTerminators(){return ott(this,void 0,void 0,function*(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||att(this._codeEditorService,e)===!0||this._editor.getOption(80))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(!(yield this._dialogService.confirm({title:C("unusualLineTerminators.title","Unusual Line Terminators"),message:C("unusualLineTerminators.message","Detected unusual line terminators"),detail:C("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",gc(e.uri)),primaryButton:C("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:C("unusualLineTerminators.ignore","Ignore")})).confirmed){stt(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())})}};AO.ID="editor.contrib.unusualLineTerminatorsDetector";AO=rtt([Qie(1,wM),Qie(2,ki)],AO);Ti(AO.ID,AO);var ltt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},yW=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let OO=class extends Oe{constructor(e,t,n,r){super(),this._modelService=t,this._themeService=n,this._configurationService=r,this._editor=e,this._tokenizeViewport=new er(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(o=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(B8.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration(Tq)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!Y$(e,this._themeService,this._configurationService)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}if(!lPe(e)){e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),r=cs(o=>Promise.resolve(kq(e,t,o)));return r.then(o=>{if(!o||!o.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:s,tokens:a}=o,u=this._modelService.getSemanticTokensProviderStyling(s);e.setPartialSemanticTokens(t,Xde(a,u,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}};OO.ID="editor.contrib.viewportSemanticTokens";OO=ltt([yW(1,Io),yW(2,Er),yW(3,nr)],OO);Ti(OO.ID,OO);var utt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},ctt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const dtt=Ce("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},C("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),htt=Ce("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},C("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),ftt=Ce("editor.wordHighlightBorder",{light:null,dark:null,hc:Ja},C("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),gtt=Ce("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:Ja},C("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),ptt=Ce("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},C("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),mtt=Ce("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},C("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),h7=new Dt("hasWordHighlights",!1);function Hme(i,e,t){const n=jy.ordered(i);return Vle(n.map(r=>()=>Promise.resolve(r.provideDocumentHighlights(i,e,t)).then(void 0,Rs)),vl)}class $me{constructor(e,t,n){this._wordRange=this._getCurrentWordRange(e,t),this.result=cs(r=>this._compute(e,t,n,r))}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new Q(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const r=t.startLineNumber,o=t.startColumn,s=t.endColumn,a=this._getCurrentWordRange(e,t);let u=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let d=0,h=n.length;!u&&d<h;d++){let f=e.getDecorationRange(n[d]);f&&f.startLineNumber===r&&f.startColumn<=o&&f.endColumn>=s&&(u=!0)}return u}cancel(){this.result.cancel()}}class _tt extends $me{_compute(e,t,n,r){return Hme(e,t.getPosition(),r).then(o=>o||[])}}class vtt extends $me{constructor(e,t,n){super(e,t,n),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,n,r){return p0(250,r).then(()=>{if(!t.isEmpty())return[];const o=e.getWordAtPosition(t.getPosition());return!o||o.word.length>1e3?[]:e.findMatches(o.word,!0,!1,!0,n,!1).map(a=>({range:a.range,kind:IA.Text}))})}isValid(e,t,n){const r=t.isEmpty();return this._selectionIsEmpty!==r?!1:super.isValid(e,t,n)}}function btt(i,e,t){return jy.has(i)?new _tt(i,e,t):new vtt(i,e,t)}Lg("_executeDocumentHighlights",(i,e)=>Hme(i,e,Vn.None));class cL{constructor(e,t){this.toUnhook=new Qe,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=h7.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(n=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(n)})),this.toUnhook.add(e.onDidChangeModelContent(n=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(n=>{let r=this.editor.getOption(71);this.occurrencesHighlight!==r&&(this.occurrencesHighlight=r,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return BS(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(Q.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(r.startLineNumber);ks(`${s}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,r=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(r.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(r);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(r.startLineNumber);ks(`${s}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){if(!this.occurrencesHighlight){this._stopAll();return}if(e.reason!==3){this._stopAll();return}this._run()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber){this._stopAll();return}let t=e.startColumn,n=e.endColumn;const r=this._getWord();if(!r||r.startColumn>t||r.endColumn<n){this._stopAll();return}const o=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=new Date().getTime(),o)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let s=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=btt(this.model,this.editor.getSelection(),this.editor.getOption(116)),this.workerRequest.result.then(a=>{s===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=a||[],this._beginRenderDecorations())},gn)}}_beginRenderDecorations(){let e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:cL._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===IA.Write?this._WRITE_OPTIONS:e===IA.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}cL._WRITE_OPTIONS=Sn.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Lr(mtt),position:Sl.Center},minimap:{color:Lr(T8),position:bl.Inline}});cL._TEXT_OPTIONS=Sn.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Lr(uce),position:Sl.Center},minimap:{color:Lr(T8),position:bl.Inline}});cL._REGULAR_OPTIONS=Sn.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Lr(ptt),position:Sl.Center},minimap:{color:Lr(T8),position:bl.Inline}});let iC=class zme extends Oe{constructor(e,t){super(),this.wordHighlighter=null;const n=()=>{e.hasModel()&&(this.wordHighlighter=new cL(e,t))};this._register(e.onDidChangeModel(r=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),n()})),n()}static get(e){return e.getContribution(zme.ID)}saveViewState(){return!!(this.wordHighlighter&&this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};iC.ID="editor.contrib.wordHighlighter";iC=utt([ctt(1,dn)],iC);class Ume extends Et{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=iC.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class Ctt extends Ume{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:C("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:h7,kbOpts:{kbExpr:de.editorTextFocus,primary:65,weight:100}})}}class wtt extends Ume{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:C("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:h7,kbOpts:{kbExpr:de.editorTextFocus,primary:1089,weight:100}})}}class ytt extends Et{constructor(){super({id:"editor.action.wordHighlight.trigger",label:C("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:h7.toNegated(),kbOpts:{kbExpr:de.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const r=iC.get(t);r&&r.restoreViewState(!0)}}Ti(iC.ID,iC);it(Ctt);it(wtt);it(ytt);hr((i,e)=>{const t=i.getColor(MG);t&&(e.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${t}; }`),e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`));const n=i.getColor(dtt);n&&e.addRule(`.monaco-editor .wordHighlight { background-color: ${n}; }`);const r=i.getColor(htt);r&&e.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${r}; }`);const o=i.getColor(JDe);o&&e.addRule(`.monaco-editor .selectionHighlight { border: 1px ${i.type==="hc"?"dotted":"solid"} ${o}; box-sizing: border-box; }`);const s=i.getColor(ftt);s&&e.addRule(`.monaco-editor .wordHighlight { border: 1px ${i.type==="hc"?"dashed":"solid"} ${s}; box-sizing: border-box; }`);const a=i.getColor(gtt);a&&e.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${i.type==="hc"?"dashed":"solid"} ${a}; box-sizing: border-box; }`)});class f7 extends Ps{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=pc(t.getOption(116)),o=t.getModel(),a=t.getSelections().map(u=>{const d=new Le(u.positionLineNumber,u.positionColumn),h=this._move(r,o,d,this._wordNavigationType);return this._moveTo(u,h,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map(u=>Bn.fromModelSelection(u))),a.length===1){const u=new Le(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(u,0)}}_moveTo(e,t,n){return n?new yt(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new yt(t.lineNumber,t.column,t.lineNumber,t.column)}}class Y0 extends f7{_move(e,t,n,r){return ii.moveWordLeft(e,t,n,r)}}class Z0 extends f7{_move(e,t,n,r){return ii.moveWordRight(e,t,n,r)}}class Stt extends Y0{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class Ltt extends Y0{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class Ett extends Y0{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,lB))===null||e===void 0?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class xtt extends Y0{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class Dtt extends Y0{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class Itt extends Y0{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,lB))===null||e===void 0?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class ktt extends Y0{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,r){return super._move(pc(lf.wordSeparators.defaultValue),t,n,r)}}class Ttt extends Y0{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,r){return super._move(pc(lf.wordSeparators.defaultValue),t,n,r)}}class Ntt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class Att extends Z0{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,lB))===null||e===void 0?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class Ott extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class Mtt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class Rtt extends Z0{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:_t.and(de.textInputFocus,(e=_t.and(vM,lB))===null||e===void 0?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class Ptt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class Ftt extends Z0{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,r){return super._move(pc(lf.wordSeparators.defaultValue),t,n,r)}}class Btt extends Z0{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,r){return super._move(pc(lf.wordSeparators.defaultValue),t,n,r)}}class g7 extends Ps{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const r=pc(t.getOption(116)),o=t.getModel(),s=t.getSelections(),a=t.getOption(5),u=t.getOption(8),d=vi.getAutoClosingPairs(o.getLanguageId()),h=t._getViewModel(),f=s.map(p=>{const m=this._delete({wordSeparators:r,model:o,selection:p,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:a,autoClosingQuotes:u,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new xs(m,"")});t.pushUndoStop(),t.executeCommands(this.id,f),t.pushUndoStop()}}class fZ extends g7{_delete(e,t){let n=ii.deleteWordLeft(e,t);return n||new Q(1,1,1,1)}}class gZ extends g7{_delete(e,t){let n=ii.deleteWordRight(e,t);if(n)return n;const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return new Q(r,o,r,o)}}class Wtt extends fZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:de.writable})}}class Vtt extends fZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:de.writable})}}class Htt extends fZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class $tt extends gZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:de.writable})}}class ztt extends gZ{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:de.writable})}}class Utt extends gZ{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class jtt extends Et{constructor(){super({id:"deleteInsideWord",precondition:de.writable,label:C("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const r=pc(t.getOption(116)),o=t.getModel(),a=t.getSelections().map(u=>{const d=ii.deleteInsideWord(r,o,u);return new xs(d,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}nt(new Stt);nt(new Ltt);nt(new Ett);nt(new xtt);nt(new Dtt);nt(new Itt);nt(new Ntt);nt(new Att);nt(new Ott);nt(new Mtt);nt(new Rtt);nt(new Ptt);nt(new ktt);nt(new Ttt);nt(new Ftt);nt(new Btt);nt(new Wtt);nt(new Vtt);nt(new Htt);nt(new $tt);nt(new ztt);nt(new Utt);it(jtt);class Ktt extends g7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let n=K8.deleteWordPartLeft(e);return n||new Q(1,1,1,1)}}class Gtt extends g7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:de.writable,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let n=K8.deleteWordPartRight(e);if(n)return n;const r=e.model.getLineCount(),o=e.model.getLineMaxColumn(r);return new Q(r,o,r,o)}}class jme extends f7{_move(e,t,n,r){return K8.moveWordPartLeft(e,t,n)}}class qtt extends jme{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}Qn.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class Ytt extends jme{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}Qn.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class Kme extends f7{_move(e,t,n,r){return K8.moveWordPartRight(e,t,n)}}class Ztt extends Kme{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class Xtt extends Kme{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:de.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}nt(new Ktt);nt(new Gtt);nt(new qtt);nt(new Ytt);nt(new Ztt);nt(new Xtt);var Gme=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},I4=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};const qme=new Dt("accessibilityHelpWidgetVisible",!1);let rC=class Yme extends Oe{constructor(e,t){super(),this._editor=e,this._widget=this._register(t.createInstance(CS,this._editor))}static get(e){return e.getContribution(Yme.ID)}show(){this._widget.show()}hide(){this._widget.hide()}};rC.ID="editor.contrib.accessibilityHelpController";rC=Gme([I4(1,An)],rC);function Qtt(i,e){return!i||i.length===0?_o.noSelection:i.length===1?e?ec(_o.singleSelectionRange,i[0].positionLineNumber,i[0].positionColumn,e):ec(_o.singleSelection,i[0].positionLineNumber,i[0].positionColumn):e?ec(_o.multiSelectionRange,i.length,e):i.length>0?ec(_o.multiSelection,i.length):""}let CS=class k4 extends Vu{constructor(e,t,n,r){super(),this._contextKeyService=t,this._keybindingService=n,this._openerService=r,this._editor=e,this._isVisibleKey=qme.bindTo(this._contextKeyService),this._domNode=ri(document.createElement("div")),this._domNode.setClassName("accessibilityHelpWidget"),this._domNode.setDisplay("none"),this._domNode.setAttribute("role","dialog"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode=ri(document.createElement("div")),this._contentDomNode.setAttribute("role","document"),this._domNode.appendChild(this._contentDomNode),this._isVisible=!1,this._register(this._editor.onDidLayoutChange(()=>{this._isVisible&&this._layout()})),this._register(ts(this._contentDomNode.domNode,"keydown",o=>{if(this._isVisible&&(o.equals(2083)&&(ks(_o.emergencyConfOn),this._editor.updateOptions({accessibilitySupport:"on"}),$o(this._contentDomNode.domNode),this._buildContent(),this._contentDomNode.domNode.focus(),o.preventDefault(),o.stopPropagation()),o.equals(2086))){ks(_o.openingDocs);let s=this._editor.getRawOptions().accessibilityHelpUrl;typeof s>"u"&&(s="https://go.microsoft.com/fwlink/?linkid=852450"),this._openerService.open(sn.parse(s)),o.preventDefault(),o.stopPropagation()}})),this.onblur(this._contentDomNode.domNode,()=>{this.hide()}),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return k4.ID}getDomNode(){return this._domNode.domNode}getPosition(){return{preference:null}}show(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}_descriptionForCommand(e,t,n){let r=this._keybindingService.lookupKeybinding(e);return r?ec(t,r.getAriaLabel()):ec(n,e)}_buildContent(){const e=this._editor.getOptions(),t=this._editor.getSelections();let n=0;if(t){const a=this._editor.getModel();a&&t.forEach(u=>{n+=a.getValueLengthInRange(u)})}let r=Qtt(t,n);e.get(53)?e.get(80)?r+=_o.readonlyDiffEditor:r+=_o.editableDiffEditor:e.get(80)?r+=_o.readonlyEditor:r+=_o.editableEditor;const o=qn?_o.changeConfigToOnMac:_o.changeConfigToOnWinLinux;switch(e.get(2)){case 0:r+=`

 - `+o;break;case 2:r+=`

 - `+_o.auto_on;break;case 1:r+=`

 - `+_o.auto_off,r+=" "+o;break}e.get(129)?r+=`

 - `+this._descriptionForCommand(bS.ID,_o.tabFocusModeOnMsg,_o.tabFocusModeOnMsgNoKb):r+=`

 - `+this._descriptionForCommand(bS.ID,_o.tabFocusModeOffMsg,_o.tabFocusModeOffMsgNoKb);const s=qn?_o.openDocMac:_o.openDocWinLinux;r+=`

 - `+s,r+=`

`+_o.outroMsg,this._contentDomNode.domNode.appendChild(Vhe(r)),this._contentDomNode.domNode.setAttribute("aria-label",r)}hide(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,$o(this._contentDomNode.domNode),this._editor.focus())}_layout(){let e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(k4.WIDTH,e.width-40)),n=Math.max(5,Math.min(k4.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(n);let r=Math.round((e.height-n)/2);this._domNode.setTop(r);let o=Math.round((e.width-t)/2);this._domNode.setLeft(o)}};CS.ID="editor.contrib.accessibilityHelpWidget";CS.WIDTH=500;CS.HEIGHT=300;CS=Gme([I4(1,dn),I4(2,Sr),I4(3,El)],CS);class Jtt extends Et{constructor(){super({id:"editor.action.showAccessibilityHelp",label:_o.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}run(e,t){let n=rC.get(t);n&&n.show()}}Ti(rC.ID,rC);it(Jtt);const ent=Ps.bindToContribution(rC.get);nt(new ent({id:"closeAccessibilityHelp",precondition:qme,handler:i=>i.hide(),kbOpts:{weight:100+100,kbExpr:de.focus,primary:9,secondary:[1033]}}));hr((i,e)=>{const t=i.getColor(Yh);t&&e.addRule(`.monaco-editor .accessibilityHelpWidget { background-color: ${t}; }`);const n=i.getColor(Cp);n&&e.addRule(`.monaco-editor .accessibilityHelpWidget { color: ${n}; }`);const r=i.getColor(C0);r&&e.addRule(`.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ${r}; }`);const o=i.getColor(ho);o&&e.addRule(`.monaco-editor .accessibilityHelpWidget { border: 2px solid ${o}; }`)});class aj extends Oe{constructor(e){super(),this.editor=e,this.widget=null,ig&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(80);!this.widget&&e?this.widget=new p7(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}aj.ID="editor.contrib.iPadShowKeyboard";class p7 extends Oe{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(qe(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register(qe(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return p7.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}p7.ID="editor.contrib.ShowKeyboardWidget";Ti(aj.ID,aj);var tnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Jie=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let wS=class Zme extends Oe{constructor(e,t,n){super(),this._editor=e,this._modeService=n,this._widget=null,this._register(this._editor.onDidChangeModel(r=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(r=>this.stop())),this._register(Wr.onDidChange(r=>this.stop())),this._register(this._editor.onKeyUp(r=>r.keyCode===9&&this.stop()))}static get(e){return e.getContribution(Zme.ID)}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new m7(this._editor,this._modeService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};wS.ID="editor.contrib.inspectTokens";wS=tnt([Jie(1,K0),Jie(2,Fs)],wS);class nnt extends Et{constructor(){super({id:"editor.action.inspectTokens",label:e$.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){let n=wS.get(t);n&&n.launch()}}function int(i){let e="";for(let t=0,n=i.length;t<n;t++){let r=i.charCodeAt(t);switch(r){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(r)}}return e}function rnt(i,e){const t=Wr.get(e);if(t)return t;const n=i.encodeLanguageId(e);return{getInitialState:()=>dM,tokenize:(r,o,s,a)=>Hce(e,r,s,a),tokenize2:(r,o,s,a)=>QG(n,r,s,a)}}class m7 extends Oe{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._modeService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=rnt(this._modeService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return m7._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let u=t.tokens1.length-1;u>=0;u--){let d=t.tokens1[u];if(e.column-1>=d.offset){n=u;break}}let r=0;for(let u=t.tokens2.length>>>1;u>=0;u--)if(e.column-1>=t.tokens2[u<<1]){r=u;break}let o=this._model.getLineContent(e.lineNumber),s="";if(n<t.tokens1.length){let u=t.tokens1[n].offset,d=n+1<t.tokens1.length?t.tokens1[n+1].offset:o.length;s=o.substring(u,d)}_0(this._domNode,Ge("h2.tm-token",void 0,int(s),Ge("span.tm-token-length",void 0,`${s.length} ${s.length===1?"char":"chars"}`))),Be(this._domNode,Ge("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(r<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(r<<1)+1]):null;Be(this._domNode,Ge("table.tm-metadata-table",void 0,Ge("tbody",void 0,Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"language"),Ge("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"token type"),Ge("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"font style"),Ge("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"foreground"),Ge("td.tm-metadata-value",void 0,`${a?ye.Format.CSS.formatHex(a.foreground):"-?-"}`)),Ge("tr",void 0,Ge("td.tm-metadata-key",void 0,"background"),Ge("td.tm-metadata-value",void 0,`${a?ye.Format.CSS.formatHex(a.background):"-?-"}`))))),Be(this._domNode,Ge("hr.tokens-inspect-separator")),n<t.tokens1.length&&Be(this._domNode,Ge("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=Wr.getColorMap(),n=na.getLanguageId(e),r=na.getTokenType(e),o=na.getFontStyle(e),s=na.getForeground(e),a=na.getBackground(e);return{languageId:this._modeService.languageIdCodec.decodeLanguageId(n),tokenType:r,fontStyle:o,foreground:t[s],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),t.length===0&&(t="---"),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),r=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:n.tokens,tokens2:r.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t,0).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}m7._ID="editor.contrib.inspectTokensWidget";Ti(wS.ID,wS);it(nnt);hr((i,e)=>{const t=i.getColor(PG);if(t){let o=i.type===Jc.HIGH_CONTRAST?2:1;e.addRule(`.monaco-editor .tokens-inspect-widget { border: ${o}px solid ${t}; }`),e.addRule(`.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ${t}; }`)}const n=i.getColor(Ib);n&&e.addRule(`.monaco-editor .tokens-inspect-widget { background-color: ${n}; }`);const r=i.getColor(RG);r&&e.addRule(`.monaco-editor .tokens-inspect-widget { color: ${r}; }`)});var ont=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},snt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let h5=class T4{constructor(e){this.quickInputService=e,this.registry=Zr.as(G0.Quickaccess)}provide(e){const t=new Qe;t.add(e.onDidAccept(()=>{const[o]=e.selectedItems;o&&this.quickInputService.quickAccess.show(o.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(o=>{const s=this.registry.getQuickAccessProvider(o.substr(T4.PREFIX.length));s&&s.prefix&&s.prefix!==T4.PREFIX&&this.quickInputService.quickAccess.show(s.prefix,{preserveValue:!0})}));const{editorProviders:n,globalProviders:r}=this.getQuickAccessProviders();return e.items=n.length===0||r.length===0?[...n.length===0?r:n]:[{label:C("globalCommands","global commands"),type:"separator"},...r,{label:C("editorCommands","editor commands"),type:"separator"},...n],t}getQuickAccessProviders(){const e=[],t=[];for(const n of this.registry.getQuickAccessProviders().sort((r,o)=>r.prefix.localeCompare(o.prefix)))if(n.prefix!==T4.PREFIX)for(const r of n.helpEntries){const o=r.prefix||n.prefix,s=o||"…";(r.needsEditor?t:e).push({prefix:o,label:s,ariaLabel:C("helpPickAriaLabel","{0}, {1}",s,r.description),description:r.description})}return{editorProviders:t,globalProviders:e}}};h5.PREFIX="?";h5=ont([snt(0,yc)],h5);Zr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:h5,prefix:"",helpEntries:[{description:t$.helpQuickAccessActionLabel,needsEditor:!0}]});class Xme{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var n;const r=new Qe;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=r.add(new Aa);return o.value=this.doProvide(e,t),r.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),r}doProvide(e,t){const n=new Qe,r=this.activeTextEditorControl;if(r&&this.canProvideWithTextEditor(r)){const o={editor:r},s=Rde(r);if(s){let a=ml(r.saveViewState());n.add(s.onDidChangeCursorPosition(()=>{a=ml(r.saveViewState())})),o.restoreViewState=()=>{a&&r===this.activeTextEditorControl&&r.restoreViewState(a)},n.add(Np(t.onCancellationRequested)(()=>{var u;return(u=o.restoreViewState)===null||u===void 0?void 0:u.call(o)}))}n.add(Kn(()=>this.clearDecorations(r))),n.add(this.provideWithTextEditor(o,e,t))}else n.add(this.provideWithoutTextEditor(e,t));return n}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return Mde(e)?(t=e.getModel())===null||t===void 0?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const r=[];this.rangeHighlightDecorationId&&(r.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Lr(b2e),position:Sl.Full}}}],[s,a]=n.deltaDecorations(r,o);this.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}class _7 extends Xme{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=C("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,Oe.None}provideWithTextEditor(e,t,n){const r=e.editor,o=new Qe;o.add(t.onDidAccept(u=>{const[d]=t.selectedItems;if(d){if(!this.isValidLineNumber(r,d.lineNumber))return;this.gotoLocation(e,{range:this.toRange(d.lineNumber,d.column),keyMods:t.keyMods,preserveFocus:u.inBackground}),u.inBackground||t.hide()}}));const s=()=>{const u=this.parsePosition(r,t.value.trim().substr(_7.PREFIX.length)),d=this.getPickLabel(r,u.lineNumber,u.column);if(t.items=[{lineNumber:u.lineNumber,column:u.column,label:d}],t.ariaLabel=d,!this.isValidLineNumber(r,u.lineNumber)){this.clearDecorations(r);return}const h=this.toRange(u.lineNumber,u.column);r.revealRangeInCenter(h,0),this.addDecorations(r,h)};s(),o.add(t.onDidChangeValue(()=>s()));const a=Rde(r);return a&&a.getOptions().get(59).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(Kn(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),r=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:r+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?C("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):C("gotoLineLabel","Go to line {0}.",t);const r=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?C("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",r.lineNumber,r.column,o):C("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",r.lineNumber,r.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const r=this.getModel(e);if(!r)return!1;const o={lineNumber:t,column:n};return r.validatePosition(o).equals(o)}lineCount(e){var t,n;return(n=(t=this.getModel(e))===null||t===void 0?void 0:t.getLineCount())!==null&&n!==void 0?n:0}}_7.PREFIX=":";var ant=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},lnt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let MO=class extends _7{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Rt.None}get activeTextEditorControl(){return ml(this.editorService.getFocusedCodeEditor())}};MO=ant([lnt(0,ki)],MO);Zr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:MO,prefix:MO.PREFIX,helpEntries:[{description:y3.gotoLineActionLabel,needsEditor:!0}]});let unt=class extends Et{constructor(){super({id:"editor.action.gotoLine",label:y3.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(yc).quickAccess.show(MO.PREFIX)}};it(unt);const Qme=[void 0,[]];function SW(i,e,t=0,n=0){const r=e;return r.values&&r.values.length>1?cnt(i,r.values,t,n):Jme(i,e,t,n)}function cnt(i,e,t,n){let r=0;const o=[];for(const s of e){const[a,u]=Jme(i,s,t,n);if(typeof a!="number")return Qme;r+=a,o.push(...u)}return[r,dnt(o)]}function Jme(i,e,t,n){const r=tS(e.original,e.originalLowercase,t,i,i.toLowerCase(),n,!0);return r?[r[0],oB(r)]:Qme}function dnt(i){const e=i.sort((r,o)=>r.start-o.start),t=[];let n;for(const r of e)!n||!hnt(n,r)?(n=r,t.push(r)):(n.start=Math.min(n.start,r.start),n.end=Math.max(n.end,r.end));return t}function hnt(i,e){return!(i.end<e.start||e.end<i.start)}function ere(i){return i.startsWith('"')&&i.endsWith('"')}const e_e=" ";function lj(i){typeof i!="string"&&(i="");const e=i.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:r}=tre(i),o=t.indexOf(q1)>=0,s=ere(i);let a;const u=i.split(e_e);if(u.length>1)for(const d of u){const h=ere(d),{pathNormalized:f,normalized:p,normalizedLowercase:m}=tre(d);p&&(a||(a=[]),a.push({original:d,originalLowercase:d.toLowerCase(),pathNormalized:f,normalized:p,normalizedLowercase:m,expectContiguousMatch:h}))}return{original:i,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:r,values:a,containsPathSeparator:o,expectContiguousMatch:s}}function tre(i){let e;As?e=i.replace(/\//g,q1):e=i.replace(/\\/g,q1);const t=BEe(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function nre(i){return Array.isArray(i)?lj(i.map(e=>e.original).join(e_e)):lj(i.original)}var $N=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class lc extends Xme{constructor(e=Object.create(null)){super(e),this.options=e,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,C("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),Oe.None}provideWithTextEditor(e,t,n){const r=e.editor,o=this.getModel(r);return o?Yc.has(o)?this.doProvideWithEditorSymbols(e,o,t,n):this.doProvideWithoutEditorSymbols(e,o,t,n):Oe.None}doProvideWithoutEditorSymbols(e,t,n,r){const o=new Qe;return this.provideLabelPick(n,C("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),$N(this,void 0,void 0,function*(){!(yield this.waitForLanguageSymbolRegistry(t,o))||r.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,n,r))}),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return $N(this,void 0,void 0,function*(){if(Yc.has(e))return!0;const n=new Hle,r=t.add(Yc.onDidChange(()=>{Yc.has(e)&&(r.dispose(),n.complete(!0))}));return t.add(Kn(()=>n.complete(!1))),n.p})}doProvideWithEditorSymbols(e,t,n,r){const o=e.editor,s=new Qe;s.add(n.onDidAccept(f=>{const[p]=n.selectedItems;p&&p.range&&(this.gotoLocation(e,{range:p.range.selection,keyMods:n.keyMods,preserveFocus:f.inBackground}),f.inBackground||n.hide())})),s.add(n.onDidTriggerItemButton(({item:f})=>{f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const a=this.getDocumentSymbols(t,r);let u;const d=()=>$N(this,void 0,void 0,function*(){u==null||u.dispose(!0),n.busy=!1,u=new oa(r),n.busy=!0;try{const f=lj(n.value.substr(lc.PREFIX.length).trim()),p=yield this.doGetSymbolPicks(a,f,void 0,u.token);if(r.isCancellationRequested)return;p.length>0?n.items=p:f.original.length>0?this.provideLabelPick(n,C("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,C("noSymbolResults","No editor symbols"))}finally{r.isCancellationRequested||(n.busy=!1)}});s.add(n.onDidChangeValue(()=>d())),d();let h=!0;return s.add(n.onDidChangeActive(()=>{const[f]=n.activeItems;if(f&&f.range){if(h){h=!1;return}o.revealRangeInCenter(f.range.selection,0),this.addDecorations(o,f.range.decoration)}})),s}doGetSymbolPicks(e,t,n,r){return $N(this,void 0,void 0,function*(){const o=yield e;if(r.isCancellationRequested)return[];const s=t.original.indexOf(lc.SCOPE_PREFIX)===0,a=s?1:0;let u,d;t.values&&t.values.length>1?(u=nre(t.values[0]),d=nre(t.values.slice(1))):u=t;const h=[];for(let m=0;m<o.length;m++){const v=o[m],b=PEe(v.name),L=`$(symbol-${BH.toString(v.kind)||"property"}) ${b}`,S=L.length-b.length;let y=v.containerName;n!=null&&n.extraContainerLabel&&(y?y=`${n.extraContainerLabel} • ${y}`:y=n.extraContainerLabel);let E,A,N,V;if(t.original.length>a){let M=!1;if(u!==t&&([E,A]=SW(L,Object.assign(Object.assign({},t),{values:void 0}),a,S),typeof E=="number"&&(M=!0)),typeof E!="number"&&([E,A]=SW(L,u,a,S),typeof E!="number"))continue;if(!M&&d){if(y&&d.original.length>0&&([N,V]=SW(y,d)),typeof N!="number")continue;typeof E=="number"&&(E+=N)}}const R=v.tags&&v.tags.indexOf(1)>=0;h.push({index:m,kind:v.kind,score:E,label:L,ariaLabel:b,description:y,highlights:R?void 0:{label:A,description:V},range:{selection:Q.collapseToStart(v.selectionRange),decoration:v.range},strikethrough:R,buttons:(()=>{var M,K;const X=!((M=this.options)===null||M===void 0)&&M.openSideBySideDirection?(K=this.options)===null||K===void 0?void 0:K.openSideBySideDirection():void 0;if(X)return[{iconClass:X==="right"?_e.splitHorizontal.classNames:_e.splitVertical.classNames,tooltip:X==="right"?C("openToSide","Open to the Side"):C("openToBottom","Open to the Bottom")}]})()})}const f=h.sort((m,v)=>s?this.compareByKindAndScore(m,v):this.compareByScore(m,v));let p=[];if(s){let L=function(){v&&typeof m=="number"&&b>0&&(v.label=ec(EW[m]||LW,b))},m,v,b=0;for(const S of f)m!==S.kind?(L(),m=S.kind,b=1,v={type:"separator"},p.push(v)):b++,p.push(S);L()}else f.length>0&&(p=[{label:C("symbols","symbols ({0})",h.length),type:"separator"},...f]);return p})}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=EW[e.kind]||LW,r=EW[t.kind]||LW,o=n.localeCompare(r);return o===0?this.compareByScore(e,t):o}getDocumentSymbols(e,t){return $N(this,void 0,void 0,function*(){const n=yield Da.create(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()})}}lc.PREFIX="@";lc.SCOPE_PREFIX=":";lc.PREFIX_BY_CATEGORY=`${lc.PREFIX}${lc.SCOPE_PREFIX}`;const LW=C("property","properties ({0})"),EW={[5]:C("method","methods ({0})"),[11]:C("function","functions ({0})"),[8]:C("_constructor","constructors ({0})"),[12]:C("variable","variables ({0})"),[4]:C("class","classes ({0})"),[22]:C("struct","structs ({0})"),[23]:C("event","events ({0})"),[24]:C("operator","operators ({0})"),[10]:C("interface","interfaces ({0})"),[2]:C("namespace","namespaces ({0})"),[3]:C("package","packages ({0})"),[25]:C("typeParameter","type parameters ({0})"),[1]:C("modules","modules ({0})"),[6]:C("property","properties ({0})"),[9]:C("enum","enumerations ({0})"),[21]:C("enumMember","enumeration members ({0})"),[14]:C("string","strings ({0})"),[0]:C("file","files ({0})"),[17]:C("array","arrays ({0})"),[15]:C("number","numbers ({0})"),[16]:C("boolean","booleans ({0})"),[18]:C("object","objects ({0})"),[19]:C("key","keys ({0})"),[7]:C("field","fields ({0})"),[13]:C("constant","constants ({0})")};var fnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},gnt=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let uj=class extends lc{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=Rt.None}get activeTextEditorControl(){return ml(this.editorService.getFocusedCodeEditor())}};uj=fnt([gnt(0,ki)],uj);Zr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:uj,prefix:lc.PREFIX,helpEntries:[{description:eO.quickOutlineActionLabel,prefix:lc.PREFIX,needsEditor:!0},{description:eO.quickOutlineByCategoryActionLabel,prefix:lc.PREFIX_BY_CATEGORY,needsEditor:!0}]});let pnt=class extends Et{constructor(){super({id:"editor.action.quickOutline",label:eO.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:de.hasDocumentSymbolProvider,kbOpts:{kbExpr:de.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(yc).quickAccess.show(lc.PREFIX)}};it(pnt);function xW(i,e){return e&&(i.stack||i.stacktrace)?C("stackTrace.format","{0}: {1}",rre(i),ire(i.stack)||ire(i.stacktrace)):rre(i)}function ire(i){return Array.isArray(i)?i.join(`
`):i}function rre(i){return typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?C("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function t_e(i=null,e=!1){if(!i)return C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){const t=BS(i),n=t_e(t[0],e);return t.length>1?C("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(dc(i))return i;if(i.detail){const t=i.detail;if(t.error)return xW(t.error,e);if(t.exception)return xW(t.exception,e)}return i.stack?xW(i,e):i.message?i.message:C("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var EP=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})},U1;(function(i){i[i.NO_ACTION=0]="NO_ACTION",i[i.CLOSE_PICKER=1]="CLOSE_PICKER",i[i.REFRESH_PICKER=2]="REFRESH_PICKER",i[i.REMOVE_ITEM=3]="REMOVE_ITEM"})(U1||(U1={}));function DW(i){const e=i;return Array.isArray(e.items)}function mnt(i){const e=i;return!!e.picks&&e.additionalPicks instanceof Promise}class v7 extends Oe{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t){var n;const r=new Qe;e.canAcceptInBackground=!!(!((n=this.options)===null||n===void 0)&&n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const s=r.add(new Aa),a=()=>EP(this,void 0,void 0,function*(){const u=s.value=new Qe;o==null||o.dispose(!0),e.busy=!1,o=new oa(t);const d=o.token,h=e.value.substr(this.prefix.length).trim(),f=this._getPicks(h,u,d),p=(m,v)=>{var b;let L,S;if(DW(m)?(L=m.items,S=m.active):L=m,L.length===0){if(v)return!1;h.length>0&&(!((b=this.options)===null||b===void 0)&&b.noResultsPick)&&(L=[this.options.noResultsPick])}return e.items=L,S&&(e.activeItems=[S]),!0};if(f!==null)if(mnt(f)){let m=!1,v=!1;yield Promise.all([(()=>EP(this,void 0,void 0,function*(){yield p0(v7.FAST_PICKS_RACE_DELAY),!d.isCancellationRequested&&(v||(m=p(f.picks,!0)))}))(),(()=>EP(this,void 0,void 0,function*(){e.busy=!0;try{const b=yield f.additionalPicks;if(d.isCancellationRequested)return;let L,S;DW(f.picks)?(L=f.picks.items,S=f.picks.active):L=f.picks;let y,E;if(DW(b)?(y=b.items,E=b.active):y=b,y.length>0||!m){let A;if(!S&&!E){const N=e.activeItems[0];N&&L.indexOf(N)!==-1&&(A=N)}p({items:[...L,...y],active:S||E||A})}}finally{d.isCancellationRequested||(e.busy=!1),v=!0}}))()])}else if(!(f instanceof Promise))p(f);else{e.busy=!0;try{const m=yield f;if(d.isCancellationRequested)return;p(m)}finally{d.isCancellationRequested||(e.busy=!1)}}});return r.add(e.onDidChangeValue(()=>a())),a(),r.add(e.onDidAccept(u=>{const[d]=e.selectedItems;typeof(d==null?void 0:d.accept)=="function"&&(u.inBackground||e.hide(),d.accept(e.keyMods,u))})),r.add(e.onDidTriggerItemButton(({button:u,item:d})=>EP(this,void 0,void 0,function*(){var h,f;if(typeof d.trigger=="function"){const p=(f=(h=d.buttons)===null||h===void 0?void 0:h.indexOf(u))!==null&&f!==void 0?f:-1;if(p>=0){const m=d.trigger(p,e.keyMods),v=typeof m=="number"?m:yield m;if(t.isCancellationRequested)return;switch(v){case U1.NO_ACTION:break;case U1.CLOSE_PICKER:e.hide();break;case U1.REFRESH_PICKER:a();break;case U1.REMOVE_ITEM:const b=e.items.indexOf(d);if(b!==-1){const L=e.items.slice(),S=L.splice(b,1),y=e.activeItems.filter(A=>A!==S[0]),E=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=L,y&&(e.activeItems=y),e.keepScrollPosition=E}break}}}}))),r}}v7.FAST_PICKS_RACE_DELAY=200;var n_e=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},T1=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},ore=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let RO=class N4 extends v7{constructor(e,t,n,r,o,s){super(N4.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=r,this.telemetryService=o,this.dialogService=s,this.commandsHistory=this._register(this.instantiationService.createInstance(oC)),this.options=e}_getPicks(e,t,n){return ore(this,void 0,void 0,function*(){const r=yield this.getCommandPicks(t,n);if(n.isCancellationRequested)return[];const o=[];for(const d of r){const h=ml(N4.WORD_FILTER(e,d.label)),f=d.commandAlias?ml(N4.WORD_FILTER(e,d.commandAlias)):void 0;h||f?(d.highlights={label:h,detail:this.options.showAlias?f:void 0},o.push(d)):e===d.commandId&&o.push(d)}const s=new Map;for(const d of o){const h=s.get(d.label);h?(d.description=d.commandId,h.description=h.commandId):s.set(d.label,d)}o.sort((d,h)=>{const f=this.commandsHistory.peek(d.commandId),p=this.commandsHistory.peek(h.commandId);return f&&p?f>p?-1:1:f?-1:p?1:d.label.localeCompare(h.label)});const a=[];let u=!1;for(let d=0;d<o.length;d++){const h=o[d],f=this.keybindingService.lookupKeybinding(h.commandId),p=f?C("commandPickAriaLabelWithKeybinding","{0}, {1}",h.label,f.getAriaLabel()):h.label;d===0&&this.commandsHistory.peek(h.commandId)&&(a.push({type:"separator",label:C("recentlyUsed","recently used")}),u=!0),d!==0&&u&&!this.commandsHistory.peek(h.commandId)&&(a.push({type:"separator",label:C("morecCommands","other commands")}),u=!1),a.push(Object.assign(Object.assign({},h),{ariaLabel:p,detail:this.options.showAlias&&h.commandAlias!==h.label?h.commandAlias:void 0,keybinding:f,accept:()=>ore(this,void 0,void 0,function*(){this.commandsHistory.push(h.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:h.commandId,from:"quick open"});try{yield this.commandService.executeCommand(h.commandId)}catch(m){wg(m)||this.dialogService.show(Ur.Error,C("canNotRun","Command '{0}' resulted in an error ({1})",h.label,t_e(m)))}})}))}return a})}};RO.PREFIX=">";RO.WORD_FILTER=Mq(iB,jPe,ahe);RO=n_e([T1(1,An),T1(2,Sr),T1(3,kr),T1(4,yg),T1(5,wM)],RO);let oC=class Ko extends Oe{constructor(e,t){super(),this.storageService=e,this.configurationService=t,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(()=>this.updateConfiguration()))}updateConfiguration(){this.configuredCommandsHistoryLength=Ko.getConfiguredCommandHistoryLength(this.configurationService),Ko.cache&&Ko.cache.limit!==this.configuredCommandsHistoryLength&&(Ko.cache.limit=this.configuredCommandsHistoryLength,Ko.saveState(this.storageService))}load(){const e=this.storageService.get(Ko.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch{}const n=Ko.cache=new $0(this.configuredCommandsHistoryLength,1);if(t){let r;t.usesLRU?r=t.entries:r=t.entries.sort((o,s)=>o.value-s.value),r.forEach(o=>n.set(o.key,o.value))}Ko.counter=this.storageService.getNumber(Ko.PREF_KEY_COUNTER,0,Ko.counter)}push(e){Ko.cache&&(Ko.cache.set(e,Ko.counter++),Ko.saveState(this.storageService))}peek(e){var t;return(t=Ko.cache)===null||t===void 0?void 0:t.peek(e)}static saveState(e){if(!Ko.cache)return;const t={usesLRU:!0,entries:[]};Ko.cache.forEach((n,r)=>t.entries.push({key:r,value:n})),e.store(Ko.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(Ko.PREF_KEY_COUNTER,Ko.counter,0,0)}static getConfiguredCommandHistoryLength(e){var t,n;const o=(n=(t=e.getValue().workbench)===null||t===void 0?void 0:t.commandPalette)===null||n===void 0?void 0:n.history;return typeof o=="number"?o:Ko.DEFAULT_COMMANDS_HISTORY_LENGTH}};oC.DEFAULT_COMMANDS_HISTORY_LENGTH=50;oC.PREF_KEY_CACHE="commandPalette.mru.cache";oC.PREF_KEY_COUNTER="commandPalette.mru.counter";oC.counter=1;oC=n_e([T1(0,Ig),T1(1,nr)],oC);class i_e extends RO{constructor(e,t,n,r,o,s){super(e,t,n,r,o,s)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const n of e.getSupportedActions())t.push({commandId:n.id,commandAlias:n.alias,label:Vq(n.label)||n.id});return t}}var _nt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},uw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}},vnt=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};let PO=class extends i_e{constructor(e,t,n,r,o,s){super({showAlias:!1},e,n,r,o,s),this.codeEditorService=t}get activeTextEditorControl(){return ml(this.codeEditorService.getFocusedCodeEditor())}getCommandPicks(){return vnt(this,void 0,void 0,function*(){return this.getCodeEditorCommandPicks()})}};PO=_nt([uw(0,An),uw(1,ki),uw(2,Sr),uw(3,kr),uw(4,yg),uw(5,wM)],PO);Zr.as(G0.Quickaccess).registerQuickAccessProvider({ctor:PO,prefix:PO.PREFIX,helpEntries:[{description:JA.quickCommandHelp,needsEditor:!0}]});class bnt extends Et{constructor(){super({id:"editor.action.quickCommand",label:JA.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:de.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(yc).quickAccess.show(PO.PREFIX)}}it(bnt);var Cnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},cw=globalThis&&globalThis.__param||function(i,e){return function(t,n){e(t,n,i)}};let cj=class extends k0{constructor(e,t,n,r,o,s,a){super(!0,e,t,n,r,o,s,a)}};cj=Cnt([cw(1,dn),cw(2,ki),cw(3,fo),cw(4,An),cw(5,Ig),cw(6,nr)],cj);Ti(k0.ID,cj);class wnt extends Et{constructor(){super({id:"editor.action.toggleHighContrast",label:n$.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(K0);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}it(wnt);var xy;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST="hc"})(xy||(xy={}));var Dy;(function(i){i.dark="dark",i.light="light"})(Dy||(Dy={}));var FO;(function(i){i.onChange="colorTheme.onChange"})(FO||(FO={}));const ynt={workbenchBackground:"#F3F3F3",foreground:"#616161",errorForeground:"#A1260D",descriptionForeground:"#717171","icon.foreground":"#424242",focusBorder:"#0090F1","widget.shadow":"#A8A8A8","textSeparator.foreground":"#0000002e","textLink.foreground":"#006AB1","textLink.activeForeground":"#006AB1","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#dcdcdc66","input.background":ye.white,"input.foreground":"#616161","input.border":"#616161","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":ye.fromHex("#007ACC").transparent(.3),"input.placeholderForeground":ye.fromHex("#616161").transparent(.5),"dropdown.background":ye.white,"dropdown.border":ye.white,"checkbox.background":ye.white,"checkbox.border":ye.white,"button.background":"#007ACC","button.foreground":ye.white,"badge.background":"#C4C4C4","badge.foreground":"#333","scrollbar.shadow":"#DDDDDD","scrollbarSlider.background":ye.fromHex("#646464").transparent(.4),"scrollbarSlider.hoverBackground":ye.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":ye.fromHex("#000000").transparent(.6),"progressBar.background":ye.fromHex("#0E70C0"),"editorError.background":"#E51400","editorWarning.foreground":"#E51400","editorInfo.foreground":"#E9A700","editorHint.foreground":"#6c6c6c","editor.background":"#fffffe","editor.foreground":"#333333","editor.selectionBackground":"#ADD6FF","editor.findMatchBackground":"#A8AC94","list.dropBackground":"#E4E6F1","list.hoverBackground":"#F0F0F0","list.activeSelectionBackground":"#0074E8","list.activeSelectionForeground":ye.white,"menu.foreground":"#616161","menu.background":ye.white,"menu.separatorBackground":"#888888","panel.background":ye.white,"panel.border":"rgba(128, 128, 128, 0.35)","panelTitle.activeForeground":"rgb(66, 66, 66)","panelTitle.activeBorder":"rgb(66, 66, 66)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},Snt={workbenchBackground:"#252526",foreground:"#CCCCCC","widget.shadow":"#000000",errorForeground:"#F48771",descriptionForeground:ye.fromHex("#CCCCCC").transparent(.7),"icon.foreground":"#C5C5C5",focusBorder:"#007FD4","textSeparator.foreground":"#ffffff2e","textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.background":"#7f7f7f1a","textBlockQuote.border":"#007acc80","textCodeBlock.background":"#0a0a0a66","input.background":"#3C3C3C","input.foreground":"#CCCCCC","inputOption.activeBorder":"#007ACC00","inputOption.activeBackground":ye.fromHex("#0E639C").transparent(.5),"input.placeholderForeground":ye.fromHex("#616161").transparent(.5),"dropdown.background":"#3C3C3C","dropdown.foreground":"#F0F0F0","dropdown.border":"#CECECE","checkbox.border":"#CECECE","button.background":"#0E639C","button.foreground":ye.white,"badge.background":"#4D4D4D","badge.foreground":ye.white,"scrollbar.shadow":"#000000","scrollbarSlider.background":ye.fromHex("#797979").transparent(.4),"scrollbarSlider.hoverBackground":ye.fromHex("#646464").transparent(.7),"scrollbarSlider.activeBackground":ye.fromHex("#BFBFBF").transparent(.4),"progressBar.background":ye.fromHex("#0E70C0"),"editorError.background":"#F48771","editorWarning.foreground":"#CCA700","editorInfo.foreground":"#75BEFF","editorHint.foreground":ye.fromHex("#eeeeee").transparent(.7),"editor.background":"#1E1E1E","editor.foreground":"#BBBBBB","editor.selectionBackground":"#264F78","editor.selectionForeground":"#000000","list.dropBackground":"#37373D","list.hoverBackground":"#2A2D2E","list.activeSelectionBackground":"#37373D","list.activeSelectionForeground":ye.white,"menu.foreground":"#F0F0F0","menu.background":"#3C3C3C","menu.separatorBackground":"#BBBBBB","panel.background":"rgb(30, 30, 30)","panel.border":"#3C3C3C","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"},Lnt={workbenchBackground:"#000000",foreground:"#FFFFFF",errorForeground:"#F48771",descriptionForeground:ye.fromHex("#FFFFFF").transparent(.7),"icon.foreground":"#FFFFFF",focusBorder:"#F38518",contrastBorder:"#6FC3DF",contrastActiveBorder:"#F38518","textSeparator.foreground":ye.black,"textLink.foreground":"#3794FF","textLink.activeForeground":"#3794FF","textBlockQuote.border":ye.white,"textCodeBlock.background":ye.black,"input.background":ye.black,"input.foreground":"#FFFFFF","input.border":"#6FC3DF","inputOption.activeBorder":"#6FC3DF","input.placeholderForeground":ye.fromHex("#616161").transparent(.7),"dropdown.background":ye.black,"dropdown.listBackground":ye.black,"dropdown.foreground":ye.white,"dropdown.border":"#6FC3DF","checkbox.border":"#6FC3DF","button.foreground":ye.white,"badge.background":ye.black,"badge.foreground":ye.white,"scrollbarSlider.background":ye.fromHex("#6FC3DF").transparent(.6),"scrollbarSlider.hoverBackground":ye.fromHex("#6FC3DF").transparent(.8),"scrollbarSlider.activeBackground":"#6FC3DF","progressBar.background":"#6FC3DF","editorError.border":ye.fromHex("#E47777").transparent(.8),"editorWarning.border":ye.fromHex("#FFCC00").transparent(.8),"editorInfo.border":ye.fromHex("#FFCC00").transparent(.8),"editorHint.border":ye.fromHex("#eeeeee").transparent(.8),"editor.background":ye.black,"editor.foreground":ye.white,"editor.selectionForeground":"#000000","menu.foreground":ye.white,"menu.background":ye.black,"menu.separatorBackground":"#6FC3DF","panel.border":"#6FC3DF","panelTitle.activeBorder":"rgb(231, 231, 231)","panelTitle.activeForeground":"rgb(231, 231, 231)","activityBar.background":"rgb(51, 51, 51)","activityBar.activeBorder":"#fff","activityBar.foreground":"rgba(255, 255, 255, 0.4)","statusBar.background":"rgb(0, 122, 204)","statusBar.foreground":"rgb(255, 255, 255)"};function Ent(i){switch(i.uiTheme){case"vs-dark":return Object.assign({},Snt);case"vs":return Object.assign({},ynt);default:return Object.assign({},Lnt)}}function xnt(i){let e="";for(const t in i)if(t){const n=i[t];if(n){const r=t.replace(".","-");e+=`--${r}: ${n}; 
`}}return`
        :root {
            ${e}
        }
    `}function Dnt(i){const e=wr.cloneDeep(i);return[["minimap.background","editor.background"],["minimapSlider.background","scrollbarSlider.background"],["minimapSlider.hoverBackground","scrollbarSlider.hoverBackground"],["minimapSlider.activeBackground","scrollbarSlider.activeBackground"],["panel.background","workbenchBackground"],["sash.hoverBorder","focusBorder"],["button.background","textLink.foreground"],["menu.selectionBackground","button.background"],["button.hoverBackground","button.background",n=>ye.fromHex(n).lighten(.2)]].forEach(([n,r,o])=>{!e[n]&&e[r]&&(o?e[n]=o(e[r]):e[n]=e[r])}),e}function Int(i){const e=Ent(i),t=Dnt(Object.assign(e,i.colors)),n={};for(const a in t)if(a){const u=t[a];u&&typeof u=="object"?n[a]=u.toString():typeof u=="string"&&(n[a]=u)}const r=i.tokenColors,o=[],s=(a,u)=>{const d=o.findIndex(h=>h.token===a);d>=0?Object.assign(o[d],Object.assign({},u.settings)):a&&o.push(Object.assign({token:a},u.settings))};return r==null||r.forEach(a=>{Array.isArray(a.scope)?a.scope.forEach(u=>s(u,a)):s(a.scope,a)}),{base:i.uiTheme,rules:o,inherit:!0,colors:n}}var knt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Tnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};const h2={id:"Default Dark+",name:"Default Dark+",label:"Default Dark+",uiTheme:"vs-dark"},A4=Hn("customize-theme");let sC=class extends TS{constructor(){super(),this.colorThemes=[h2],this.colorTheme=h2,this.colorTheme&&this.setTheme(this.colorTheme.id)}addThemes(e){(Array.isArray(e)?e:[e]).forEach(n=>{this.getThemeById(n.id)?(Wn.warn(`There has ${n.name} already in theme, it'll update this theme otherwise please don't add the duplicated theme`),this.updateTheme(n)):this.colorThemes.push(Object.assign({},n))})}updateTheme(e){e.id||Wn.error("Update the theme failed!  The 'id' is required in the theme data.");const t=this.colorThemes.findIndex(di(e.id));t>-1?(Object.assign(this.colorThemes[t],e),this.colorThemes[t].id===this.getColorTheme().id&&this.reload()):Wn.error(`Update the theme failed! There is no theme found via '${e.id}'`)}getThemeById(e){const t=this.colorThemes.find(di(e));return t?Object.assign({},t):void 0}getColorTheme(){return Object.assign({},this.colorTheme)}setTheme(e){const t=this.getColorTheme(),n=this.getThemeById(e);if(n){this.colorTheme=Object.assign({},n);const r=Int(n),o=xnt(r.colors);Pbe(o,A4),Cl.defineTheme(A4,r),Cl.setTheme(A4);const s=this.getColorThemeMode();this.emit(FO.onChange,t,Object.assign({},this.colorTheme),s)}else Wn.error("Can't get the theme by id:"+e)}getThemes(){return this.colorThemes}reload(){this.setTheme(this.getColorTheme().id)}reset(){this.colorThemes=[h2],this.setTheme(h2.id)}getColorThemeMode(){const{colors:e,type:t}=this.colorTheme;if(t===xy.DARK||t===xy.HIGH_CONTRAST)return Dy.dark;if(t===xy.LIGHT)return Dy.light;const n=(e==null?void 0:e["editor.background"])||(e==null?void 0:e["tab.activeBackground"])||(e==null?void 0:e["molecule.welcomeBackground"]);return n?Mbe(n):Dy.dark}onChange(e){this.subscribe(FO.onChange,e)}};sC=knt([ji(),Tnt("design:paramtypes",[])],sC);var aC;(function(i){i.OnClick="activityBar.onClick",i.OnChange="activityBar.onChange",i.DataChanged="activityBar.data",i.ReRender="activityBar.reRender"})(aC||(aC={}));class r_e{constructor(e=[],t=[],n=""){this.data=e,this.contextMenu=t,this.selected=n}}class o_e{constructor(e=[],t=""){this.panes=e,this.current=t}}var Nnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ant=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let mg=class extends tl{constructor(){super(),this.state=Ue.resolve(o_e)}getPane(e){const{panes:t}=this.state;return t.find(di(e))}get(e){const t=this.getPane(e);return t?Xh(t):void 0}add(e,t=!1){if(this.getPane(e.id)){Wn.error(`There already has a pane which id is ${e.id}, if you want to modify it, please use the update method`);return}const r=this.state.panes.concat();r.push(Xh(e)),t&&this.setState({current:e.id}),this.setState({panes:r})}update(e){const{panes:t}=this.state,n=this.getPane(e.id);if(!n){Wn.error(`There is no pane found via the ${e.id} id`);return}Object.assign(n,e),this.setState({panes:Xh(t)})}remove(e){var t,n;const{panes:r,current:o}=this.state,s=r.findIndex(di(e));if(s===-1){Wn.error(`There is no pane found via the ${e} id`);return}if(e===o){const a=((t=r[s+1])===null||t===void 0?void 0:t.id)||((n=r[s-1])===null||n===void 0?void 0:n.id)||"";this.setActive(a)}r.splice(s,1),this.setState({panes:r.concat()})}setActive(e){if(!e)this.setState({current:""});else{if(!this.getPane(e)){Wn.error(`There is no pane found via the ${e} id`);return}this.setState({current:e})}}reset(){this.setState({panes:[],current:""})}};mg=Nnt([ji(),Ant("design:paramtypes",[])],mg);var Ont=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Mnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let _g=class extends tl{constructor(){super(),this.state=Ue.resolve(r_e),this.sidebarService=Ue.resolve(mg)}setActive(e){this.setState({selected:e})}reset(){this.setState({data:[],selected:"",contextMenu:[]})}add(e,t=!1){let n=[...this.state.data];Array.isArray(e)?n=n==null?void 0:n.concat(e):(n==null||n.push(e),t&&this.setActive(e.id)),n.sort((r,o)=>{const s=r.sortIndex||Number.MAX_SAFE_INTEGER,a=o.sortIndex||Number.MAX_SAFE_INTEGER;return s-a}),this.setState({data:n})}getRemoveList(e,t){return t.reduce((n,r,o)=>{const s=r.id.toString();return Array.isArray(e)&&e.includes(s)||e===s?n.concat(o):n},[])}remove(e){const{data:t}=this.state;let n=[...t];const r=this.getRemoveList(e,n);r.length?(n=n.filter((o,s)=>!r.includes(s)),this.setState({data:n})):Wn.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}toggleBar(e){const{data:t=[],selected:n}=this.state,r=t.concat(),o=r.findIndex(di(e)),s=r[o];if(s){if(s.hidden=!s.hidden,e===n){const a=(o+1)%r.length;this.setActive(r[a].id),this.sidebarService.setActive(r[a].id)}this.setState({data:r})}else Wn.error("Toggle activity bar failed, please check your id")}toggleContextMenuChecked(e){const{contextMenu:t=[]}=this.state,n=t.concat(),r=n.find(di(e));r?(r.icon=r.icon==="check"?"":"check",this.setState({contextMenu:n})):Wn.error(`Toggle the contextmenu failed, can not found any menu by id ${e}`)}addContextMenu(e){let t=[...this.state.contextMenu];Array.isArray(e)?t=t==null?void 0:t.concat(e):t==null||t.push(e),this.setState({contextMenu:t})}removeContextMenu(e){const{contextMenu:t}=this.state;let n=[...t];const r=this.getRemoveList(e,n);r.length?(n=n.filter((o,s)=>!r.includes(s)),this.setState({contextMenu:n})):Wn.error("Remove the bar data failed, because there is no data found in barData via this 'id'")}onClick(e){this.subscribe(aC.OnClick,e)}onChange(e){this.subscribe(aC.OnChange,e)}};_g=Ont([ji(),Mnt("design:paramtypes",[])],_g);var BO;(function(i){i.onTabClick="AuxiliaryBar.onClick"})(BO||(BO={}));class dj{constructor(e="default",t=[],n,r){this.mode="default",this.data=[],this.mode=e,this.children=r,this.data=t,this.current=n}}var Lp;(function(i){i.left="left",i.right="right"})(Lp||(Lp={}));var WO;(function(i){i.onClick="statusBar.onClick",i.DataChanged="statusBar.data"})(WO||(WO={}));class s_e{constructor(e=[],t=[],n=[]){this.leftItems=[],this.rightItems=[],this.leftItems=e,this.rightItems=t,this.contextMenu=n}}var lC;(function(i){i.onSelect="menuBar.onSelect",i.onChangeMode="menuBar.onChangeMode"})(lC||(lC={}));class a_e{constructor(e=[]){this.data=e}}var Kc;(function(i){i.onClick="explorer.onClick",i.onPanelToolbarClick="explorer.onPanelToolbarClick",i.onCollapseChange="explorer.onCollapseChange",i.onRemovePanel="explorer.onRemovePanel",i.onCollapseAllFolders="explorer.onCollapseAllFolders"})(Kc||(Kc={}));class l_e{constructor(e=[],t,n){this.data=e,this.headerToolBar=t,this.activePanelKeys=n}}var Js;(function(i){i.File="File",i.Folder="Folder",i.RootFolder="RootFolder"})(Js||(Js={}));var bo;(function(i){i.onSelectFile="folderTree.onSelectFile",i.onDelete="folderTree.onDelete",i.onRename="folderTree.onRename",i.onUpdateFileName="folderTree.onUpdateFileName",i.onRightClick="folderTree.onRightClick",i.onContextMenuClick="folderTree.onContextMenuClick",i.onCreate="folderTree.onCreate",i.onLoadData="folderTree.onLoadData",i.onDrop="folderTree.onDrop",i.onExpandKeys="folderTree.onExpandKeys"})(bo||(bo={}));class Rnt{constructor(e){this.fileType=Js.File;const{id:t,name:n="",location:r="",fileType:o=Js.File,children:s=[],icon:a="",isEditable:u=!1,content:d="",isLeaf:h=!0,data:f}=e;this.fileType=o,this.isEditable=u,this.name=n,this.id=t,this.location=r,this.children=s,this.icon=a,this.content=d,this.data=f,this.isLeaf=h}}class u_e{constructor(e={contextMenu:[],current:null,folderPanelContextMenu:[],data:[],expandKeys:[]},t=!1,n){this.folderTree=e,this.entry=n,this.autoSort=t}}var Eo;(function(i){i.onClose="editorTree.close",i.onSelect="editorTree.select",i.onCloseOthers="editorTree.closeOthers",i.onCloseSaved="editorTree.closeSaved",i.onCloseAll="editorTree.closeAll",i.onSaveAll="editorTree.saveAll",i.onSplitEditorLayout="editorTree.splitEditorLayout",i.onToolbarClick="editorTree.toolbarClick",i.onContextMenu="editorTree.contextMenuClick"})(Eo||(Eo={}));let Pnt=class{constructor(){}};var Vh;(function(i){i.onChange="search.onChange",i.onSearch="search.onSearch",i.onReplaceAll="search.onReplaceAll",i.onResultClick="search.onResultClick"})(Vh||(Vh={}));class c_e{constructor(e=[],t=[],n=[],r=[],o="",s="",a=!1,u=!1,d=!1,h=!1,f=!1,p={type:"info",text:""}){this.result=[],this.value="",this.replaceValue="",this.replaceMode=!1,this.isRegex=!1,this.isCaseSensitive=!1,this.isWholeWords=!1,this.preserveCase=!1,this.validationInfo={type:"info",text:""},this.headerToolBar=e,this.searchAddons=t,this.replaceAddons=n,this.value=o,this.replaceValue=s,this.replaceMode=a,this.isCaseSensitive=u,this.isWholeWords=d,this.isRegex=h,this.preserveCase=f,this.result=r,this.validationInfo=p}}var Ep;(function(i){i.onTabChange="panel.onTabChange",i.onToolbarClick="panel.onToolbarClick",i.onTabClose="panel.onTabClose"})(Ep||(Ep={}));class d_e{constructor(e=null,t=[],n=[]){this.hidden=!1,this.maximize=!1,this.current=e,this.data=t,this.toolbox=n}}var VO;(function(i){i.OnChange="settings.onchange"})(VO||(VO={}));class h_e{constructor(e,t,n){this.colorTheme=e,this.editor=t,this.locale=n}}var f5;(function(i){i[i.Read=1]="Read",i[i.WaitRead=2]="WaitRead"})(f5||(f5={}));class f_e{constructor(e="",t="",n=[],r=1,o=!1,s=[],a){this.id=e,this.name=t,this.sortIndex=r,this.render=a,this.showNotifications=o,this.data=n,this.actionBar=s}}var Jh;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Jh||(Jh={}));var HO;(function(i){i.onSelect="problems.onSelect"})(HO||(HO={}));class g_e{constructor(e="",t="",n=[],r=!1){this.id=e,this.name=t,this.show=r,this.data=n}}const p_e={[ln.Unknown]:"",[ln.Backspace]:"⌫",[ln.Tab]:"⇥",[ln.Enter]:"↩",[ln.PageUp]:"↑",[ln.PageDown]:"↓",[ln.Digit0]:"0",[ln.Digit1]:"1",[ln.Digit2]:"2",[ln.Digit3]:"3",[ln.Digit4]:"4",[ln.Digit5]:"5",[ln.Digit6]:"6",[ln.Digit7]:"7",[ln.Digit8]:"8",[ln.Digit9]:"9",[ln.KeyA]:"A",[ln.KeyB]:"B",[ln.KeyC]:"C",[ln.KeyD]:"D",[ln.KeyE]:"E",[ln.KeyF]:"F",[ln.KeyG]:"G",[ln.KeyH]:"H",[ln.KeyI]:"I",[ln.KeyJ]:"J",[ln.KeyK]:"K",[ln.KeyL]:"L",[ln.KeyM]:"M",[ln.KeyN]:"N",[ln.KeyO]:"O",[ln.KeyP]:"P",[ln.KeyQ]:"Q",[ln.KeyR]:"R",[ln.KeyS]:"S",[ln.KeyT]:"T",[ln.KeyU]:"U",[ln.KeyV]:"V",[ln.KeyW]:"W",[ln.KeyX]:"X",[ln.KeyY]:"Y",[ln.KeyZ]:"Z",[ln.Semicolon]:";",[ln.Equal]:"+",[ln.Comma]:",",[ln.Minus]:"-",[ln.Period]:".",[ln.Slash]:"/",[ln.Backquote]:"~",[ln.BracketLeft]:"[",[ln.Backslash]:"\\",[ln.BracketRight]:"]",[ln.Quote]:'"'},Fnt=Object.freeze(Object.defineProperty({__proto__:null,get ActivityBarEvent(){return aC},ActivityBarModel:r_e,get AuxiliaryEventKind(){return BO},AuxiliaryModel:dj,get ColorScheme(){return xy},get ColorThemeEvent(){return FO},get ColorThemeMode(){return Dy},get EditorEvent(){return Co},EditorGroupModel:Gfe,EditorModel:qfe,EditorTree:Pnt,get EditorTreeEvent(){return Eo},get ExplorerEvent(){return Kc},get FileTypes(){return Js},get Float(){return Lp},get FolderTreeEvent(){return bo},get IContributeType(){return rS},IExplorerModel:l_e,get IExtensionType(){return jz},IFolderTreeModel:u_e,KeyCodeString:p_e,get MarkerSeverity(){return Jh},get MenuBarEvent(){return lC},MenuBarModel:a_e,NotificationModel:f_e,get NotificationStatus(){return f5},get PanelEvent(){return Ep},PanelModel:d_e,get ProblemsEvent(){return HO},ProblemsModel:g_e,get SearchEvent(){return Vh},SearchModel:c_e,get SettingsEvent(){return VO},SettingsModel:h_e,SidebarModel:o_e,get StatusBarEvent(){return WO},StatusBarModel:s_e,TreeNodeModel:Rnt},Symbol.toStringTag,{value:"Module"}));var Bnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Wnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let yS=class extends tl{constructor(){super(),this.getCurrentTab=()=>{const{current:e,data:t}=this.getState();return t==null?void 0:t.find(r=>r.key===e)},this.addAuxiliaryBar=e=>{const t=Array.isArray(e)?e:[e];this.setState({data:this.state.data.concat(t)})},this.setActive=e=>{this.setState({current:e})},this.setChildren=e=>{this.setState({children:e})},this.setMode=e=>{if(typeof e=="string")return this.setState({mode:e}),e;const t=e(this.state.mode);return this.setState({mode:t}),t},this.reset=()=>{this.setState(Ue.resolve(dj))},this.state=Ue.resolve(dj)}onTabClick(e){this.subscribe(BO.onTabClick,e)}};yS=Bnt([ji(),Wnt("design:paramtypes",[])],yS);var Vnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Hnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let R0=class extends tl{constructor(){super(),this.sperator="-",this.setMenus=e=>{this.setState({data:wr.cloneDeep(e)})},this.onSelect=e=>{this.subscribe(lC.onSelect,e)},this.state=Ue.resolve(a_e)}getReferenceMenu(e){const{data:t}=this.state,n=t.map((o,s)=>({source:o,path:`${s}`}));let r;for(;n.length;){const{source:o,path:s}=n.shift();o.id===e?r={source:o,path:s}:n.push(...(o.data||[]).map((a,u)=>({source:a,path:`${s}${this.sperator}${u}`})))}return r}getMenuById(e){const t=this.getReferenceMenu(e);return t&&wr.cloneDeep(t.source)}append(e,t){const{data:n}=this.state,r=this.getReferenceMenu(t);if(!r){Wn.error(`There is no menu found by ${t}`);return}const{source:o}=r;Array.isArray(o.data)?o.data.push(e):o.data=[e];const s=wr.cloneDeep(n);this.setState({data:s})}remove(e){const{data:t}=this.state,n=this.getReferenceMenu(e);if(!n){Wn.error(`There is no menu found by ${e}`);return}const{path:r}=n,o=r.split(this.sperator);o.length=o.length-1;const s=o.reduce((u,d)=>{const{data:h}=u;return h[d]},{data:t}),a=s.data.findIndex(u=>u.id===e);s.data.splice(a,1),this.setState({data:wr.cloneDeep(t)})}update(e,t={}){const{data:n}=this.state,r=this.getReferenceMenu(e);if(!r){Wn.error(`There is no menu found by ${e}`);return}const o=r.source;Object.assign(o,t);const s=wr.cloneDeep(n);this.setState({data:s})}reset(){this.setState({data:[]})}};R0=Vnt([ji(),Hnt("design:paramtypes",[])],R0);var $nt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},znt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Wp=class extends tl{constructor(){super(),this.state=Ue.resolve(l_e)}setExpandedPanels(e){this.setState({activePanelKeys:e})}toggleIcon(e){return e==="check"?"":"check"}getAction(e){var t;const{headerToolBar:n}=this.state,r=(t=n==null?void 0:n.contextMenu)===null||t===void 0?void 0:t.find(di(e));return r&&Xh(r)}updatePanel(e){if(!e.id){Wn.error("Must provide id property in update data");return}const t=this.state.data.concat(),n=t.find(di(e.id));if(!n){Wn.error(`There is no panel found in state whose id is ${e.id}`);return}Object.assign(n,e),this.setState({data:t}),this.updateAction({id:e.id.toString(),name:e.name,title:e.title,sortIndex:e.sortIndex})}updateAction(e){var t;if(!e.id){Wn.error("Must provide id property in action data");return}const{headerToolBar:n}=this.state;if(!n){Wn.error("Molecule can' update the action, because there is no headerToolBar in Explorer");return}const r=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],o=r.find(di(e.id));if(!o){Wn.error(`There is no action found in actions whose id is ${e.id}`);return}Object.assign(o,e),this.setState({headerToolBar:Object.assign(Object.assign({},n),{contextMenu:r})})}addPanel(e){const t=Array.isArray(e)?e:[e],n=[...this.state.data],r=[];t.forEach(o=>{n.findIndex(di(o.id))!==-1?Wn.error(`There is already a panel whose id is ${o.id}`):(n.push(Xh(o)),r.push({id:o.id.toString(),name:o.name,title:o.name,icon:"check",sortIndex:o.sortIndex}))}),n.sort(({sortIndex:o=0},{sortIndex:s=0})=>s-o),this.setState({data:n}),this.addAction(r)}addAction(e){var t;const n=Array.isArray(e)?e:[e],{headerToolBar:r}=this.state;if(!r){Wn.error("Molecule can't add the action, because there is no headerToolBar in Explorer");return}const o=((t=r.contextMenu)===null||t===void 0?void 0:t.concat())||[];n.forEach(a=>{o.findIndex(di(a.id))!==-1?Wn.error(`There is already an action whose id is ${a.id}`):o.push(a)}),o.sort(({sortIndex:a=0},{sortIndex:u=0})=>u-a);const s=Object.assign(Object.assign({},r),{contextMenu:o});this.setState({headerToolBar:s})}removePanel(e){const{data:t}=this.state,n=[...t],r=n.findIndex(di(e));r>-1&&n.splice(r,1),this.setState({data:n}),this.removeAction(e)}removeAction(e){const{headerToolBar:t}=this.state;if(!t){Wn.error("Molecule can' remove the action, because there is no headerToolBar in Explorer");return}const n=t.contextMenu||[],r=n==null?void 0:n.findIndex(di(e));r>-1&&n.splice(r,1);const o=Object.assign(Object.assign({},t),{contextMenu:n});this.setState({headerToolBar:o})}togglePanel(e){const{data:t}=this.state,n=t.concat(),r=n.find(di(e));r&&(r.hidden=!r.hidden,this.setState({data:n}),this.toggleHeaderBar(e))}toggleHeaderBar(e){var t;const{headerToolBar:n}=this.state;if(!n){Wn.error("Molecule can' toggle the header bar, because there is no headerToolBar in Explorer");return}const r=((t=n.contextMenu)===null||t===void 0?void 0:t.concat())||[],o=r.find(di(e));if(o){o.icon=this.toggleIcon(o.icon);const s=Object.assign(Object.assign({},n),{contextMenu:r});this.setState({headerToolBar:s})}}reset(){this.setState({data:[],headerToolBar:void 0})}onClick(e){this.subscribe(Kc.onClick,e)}onRemovePanel(e){this.subscribe(Kc.onRemovePanel,e)}onCollapseAllFolders(e){this.subscribe(Kc.onCollapseAllFolders,e)}onPanelToolbarClick(e){this.subscribe(Kc.onPanelToolbarClick,e)}};Wp=$nt([ji(),znt("design:paramtypes",[])],Wp);const pZ="molecule",m_e="activityBar",zM="sidebar",Unt="explorer",sre="statusBar",jnt="folderTree",Knt="editorTree";var g5;(function(i){i.left="left",i.right="right"})(g5||(g5={}));var Ka;(function(i){i.horizontal="horizontal",i.vertical="vertical"})(Ka||(Ka={}));var p5;(function(i){i.OnWorkbenchDidMount="workbench.didMount"})(p5||(p5={}));class Gnt{constructor(e=[300,"auto",300],t=["auto","150px"],n=[],r={hidden:!1},o={hidden:!0},s={hidden:!1,panelMaximized:!1},a={hidden:!1},u={hidden:!1,position:g5.left},d={hidden:!1,mode:Ka.vertical},h=Ka.vertical){this.splitPanePos=e,this.horizontalSplitPanePos=t,this.groupSplitPos=n,this.activityBar=r,this.auxiliaryBar=o,this.panel=s,this.statusBar=a,this.sidebar=u,this.menuBar=d,this.editorGroupDirection=h}}var qnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ynt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Wu=class extends tl{constructor(){super(),this.state=Ue.resolve(Gnt)}onWorkbenchDidMount(e){this.subscribe(p5.OnWorkbenchDidMount,e)}get container(){return this._container=document.getElementById(pZ)||document.body,this._container}toggleMenuBarVisibility(){const{menuBar:e}=this.state,t=e.hidden;return this.setState({menuBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}togglePanelVisibility(){const{panel:e}=this.state,t=e.hidden;return this.setState({panel:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleSidebarVisibility(){const{sidebar:e}=this.state,t=e.hidden;return this.setState({sidebar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleActivityBarVisibility(){const{activityBar:e}=this.state,t=e.hidden;return this.setState({activityBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}toggleStatusBarVisibility(){const{statusBar:e}=this.state,t=e.hidden;return this.setState({statusBar:Object.assign(Object.assign({},e),{hidden:!t})}),!t}setSideBarPosition(e){const{sidebar:t}=this.state,{position:n}=t;n!==e&&this.setState({sidebar:{position:e,hidden:!1}})}togglePanelMaximized(){const e=this.state.panel;return this.setState({panel:Object.assign(Object.assign({},e),{panelMaximized:!e.panelMaximized})}),!e.panelMaximized}setPaneSize(e){this.setState({splitPanePos:e})}setHorizontalPaneSize(e){this.setState({horizontalSplitPanePos:e})}setGroupSplitSize(e){this.setState({groupSplitPos:e})}setMenuBarMode(e){const{menuBar:t}=this.state,{mode:n}=t;n!==e&&(this.setState({menuBar:Object.assign(Object.assign({},t),{mode:e,hidden:!1})}),this.emit(lC.onChangeMode,e))}getMenuBarMode(){const{menuBar:e}=this.state;return e.mode}setEditorGroupDirection(e){typeof e=="function"?this.setState({editorGroupDirection:e(this.state.editorGroupDirection)}):this.setState({editorGroupDirection:e})}setAuxiliaryBar(e){if(typeof e=="boolean")return this.setState({auxiliaryBar:{hidden:e}}),e;const t=e(this.state.auxiliaryBar.hidden);return this.setState({auxiliaryBar:{hidden:t}}),t}reset(){this.setState({splitPanePos:["300px","auto"],horizontalSplitPanePos:["70%","auto"],activityBar:{hidden:!1},panel:{hidden:!1,panelMaximized:!1},statusBar:{hidden:!1},sidebar:{hidden:!1,position:g5.left},menuBar:{hidden:!1,mode:Ka.vertical}})}};Wu=qnt([ji(),Ynt("design:paramtypes",[])],Wu);var Znt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Xnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let kl=class extends tl{constructor(){super(),this.defaultActions=[],this.defaultMenus=[],this.updateActions=(e,t)=>{var n;const{current:r,groups:o}=this.getState();if(!r)return;const s=(o==null?void 0:o.concat())||[],a=s.find(di(t||r.id));if(a){const u=((n=a.actions)===null||n===void 0?void 0:n.concat())||[];u.forEach(d=>{const h=e.find(f=>f.id===d.id);h&&Object.assign(d,h)}),a.actions=u,this.setState({current:a.id===r.id?a:r,groups:s})}},this.state=Ue.resolve(qfe),this.explorerService=Ue.resolve(Wp),this.layoutService=Ue.resolve(Wu)}updateEditorOptions(e){var t;const n=Object.assign({},this.state.editorOptions,e);this.setState({editorOptions:n}),(t=this.editorInstance)===null||t===void 0||t.updateOptions(n)}getDefaultActions(){return wr.cloneDeep(this.defaultActions)}getDefaultMenus(){return wr.cloneDeep(this.defaultMenus)}disposeModel(e){(Array.isArray(e)?e:[e]).forEach(n=>{var r;(r=Cl.getModel(sS.parse(n.id.toString())))===null||r===void 0||r.dispose()})}isOpened(e,t){return(t||this.state.groups||[]).some(r=>this.getTabById(e,r.id))}setDefaultActions(e){this.defaultActions=e}setDefaultMenus(e){this.defaultMenus=e}setEntry(e){this.setState({entry:e})}getTabById(e,t){var n;const r=this.getGroupById(t);if(r)return(n=r.data)===null||n===void 0?void 0:n.find(di(e))}get editorInstance(){var e;return(e=this.state.current)===null||e===void 0?void 0:e.editorInstance}updateTab(e,t){var n,r,o;let s;const a=(n=e==null?void 0:e.data)===null||n===void 0?void 0:n.value;if(t){const u=this.getGroupById(t);if(!((r=u==null?void 0:u.data)===null||r===void 0)&&r.length){const d=u.data.find(di(e.id));d&&(s=Object.assign(d,e)),u.activeTab===e.id&&(wr.isString(a)&&!(d!=null&&d.renderPane)&&this.setGroupEditorValue(u,a),s=Object.assign(u.tab,e)),this.updateGroup(t,u),t===((o=this.state.current)===null||o===void 0?void 0:o.id)&&this.updateCurrentGroup(u)}}else{const{groups:u=[],current:d}=this.state;u.forEach(h=>{const f=this.getTabById(e.id,h.id);f&&(s=Object.assign(f,e)),h.activeTab===e.id&&(wr.isString(a)&&!(f!=null&&f.renderPane)&&this.setGroupEditorValue(h,a),s=Object.assign(h.tab,e))}),(d==null?void 0:d.activeTab)===e.id&&(s=Object.assign(d.tab,e)),this.setState({current:d&&Object.assign({},d),groups:[...u]})}return s}setGroupEditorValue(e,t){var n;const r=(n=e.editorInstance)===null||n===void 0?void 0:n.getModel();if(!r)return;(r==null?void 0:r.getValue())!==t&&(r==null||r.setValue(t))}closeTab(e,t){const n=this.getGroupIndexById(t);if(n===-1)return;const{groups:r=[]}=this.state,o=[...r],s=o[n],a=s.data.findIndex(di(e)),u=wr.cloneDeep(s.data[a]);if(a!==-1){if(s.data.length===1&&a===0){const d=o[n+1]||o[n-1];o.splice(n,1),this.setState({groups:o,current:(o==null?void 0:o.length)===0?void 0:d},()=>{!this.isOpened(e)&&this.disposeModel(u),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(o.length?new Array(o.length+1).fill("auto"):[]);return}if(e===s.activeTab){const d=s.data[a+1]||s.data[a-1];s.tab=Object.assign({},d),s.activeTab=d==null?void 0:d.id}s.data.splice(a,1),o[n]=s,this.setState({current:s,groups:o},()=>{!this.isOpened(e)&&this.disposeModel(u),this.explorerService.forceUpdate()})}}closeOther(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,o=[...r],s=e.id,u=o[n].data,d=u.filter(di(s)),h=wr.cloneDeep(u.filter(f=>f.id!==s&&!this.isOpened(f.id,o.filter(p=>p.id!==t))));this.updateGroup(t,{data:d}),this.setActive(t,s),this.disposeModel(h),this.explorerService.forceUpdate()}closeToRight(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,o=[...r],s=e.id,u=o[n].data,d=u.findIndex(di(s));if(d<=-1)return;const h=u==null?void 0:u.slice(0,d+1),f=wr.cloneDeep(u==null?void 0:u.slice(d+1).filter(p=>!this.isOpened(p.id,o.filter(m=>m.id!==t))));this.updateGroup(t,{data:h}),this.setActive(t,s),this.disposeModel(f||[]),this.explorerService.forceUpdate()}closeToLeft(e,t){const n=this.getGroupIndexById(t);if(n<=-1)return;const{groups:r=[]}=this.state,o=[...r],s=e.id,u=o[n].data,d=u.findIndex(di(s));if(d<=-1)return;const h=u==null?void 0:u.slice(d,u.length),f=wr.cloneDeep(u==null?void 0:u.slice(0,d).filter(p=>!this.isOpened(p.id,o.filter(m=>m.id!==t))));this.updateGroup(t,{data:h}),this.setActive(t,s),this.disposeModel(f||[]),this.explorerService.forceUpdate()}getGroupById(e){const{groups:t}=this.state;return t.find(di(e))}getGroupIndexById(e){const{groups:t}=this.state;return t.findIndex(di(e))}getGroupIdByTab(e){const{groups:t=[]}=this.state;return this.isOpened(e,t)?t.find(o=>this.getTabById(e,o.id)).id:null}setActive(e,t){const{groups:n=[]}=this.state,r=this.getGroupIndexById(e);if(r>-1){const o=[...n],s=o[r],a=this.getTabById(t,s.id);if(a){const u=Object.assign({},s);u.tab=Object.assign({},a),u.activeTab=t,o[r]=u,this.setState({current:u,groups:o})}}}updateGroup(e,t){const{groups:n=[]}=this.state,r=[...n],o=this.getGroupIndexById(e);if(o>-1){const s=Object.assign({},r[o],t);r[o]=s,this.setState({groups:r})}}updateCurrentGroup(e){const{current:t}=this.state,n=Object.assign({},t,e);this.setState({current:n})}open(e,t){const{current:n,groups:r=[]}=this.state;let o=n;if(t&&(o=this.getGroupById(t)),o){const{id:s}=e,a=o==null?void 0:o.data.find(di(s));if(a&&s===(o==null?void 0:o.activeTab))return;const u=this.getGroupIndexById(o.id),d=r[u];a||o.data.push(e),o.tab=e,o.activeTab=s,r[u]=Object.assign(Object.assign({},d),{tab:e,activeTab:s})}else o=new Gfe(r.length+1,e,e.id,[e],this.defaultActions,this.defaultMenus),r.push(o);this.emit(Co.OpenTab,e),this.setState({current:o,groups:[...r]}),this.explorerService.forceUpdate()}onOpenTab(e){this.subscribe(Co.OpenTab,e)}closeAll(e){var t;const{current:n,groups:r=[]}=this.state,o=this.getGroupIndexById(e);if(o>-1){const s=[...r];let a=n;const u=s.splice(o,1),d=wr.cloneDeep(((t=u[0].data)===null||t===void 0?void 0:t.filter(h=>!this.isOpened(h.id,s)))||[]);n&&n.id===e&&(a=r[o+1]||r[o-1]),this.setState({groups:s,current:a},()=>{this.disposeModel(d),this.explorerService.forceUpdate()}),this.layoutService.setGroupSplitSize(s.length?new Array(s.length+1).fill("auto"):[])}}cloneGroup(e){const{current:t,groups:n=[]}=this.state,r=Object.assign({},e?this.getGroupById(e):t),o=lae(),s=Object.assign({},r.tab);return r.data=[s],r.tab=s,r.activeTab=s.id,r.id=o,this.setState({current:r,groups:[...n,r]}),r}onUpdateTab(e){this.subscribe(Co.OnUpdateTab,e)}onMoveTab(e){this.subscribe(Co.OnMoveTab,e)}onSelectTab(e){this.subscribe(Co.OnSelectTab,e)}onCloseAll(e){this.subscribe(Co.OnCloseAll,e)}onCloseTab(e){this.subscribe(Co.OnCloseTab,e)}onCloseOther(e){this.subscribe(Co.OnCloseOther,e)}onCloseToLeft(e){this.subscribe(Co.OnCloseToLeft,e)}onCloseToRight(e){this.subscribe(Co.OnCloseToRight,e)}onActionsClick(e){this.subscribe(Co.onActionsClick,e)}};kl=Znt([ji(),Xnt("design:paramtypes",[])],kl);var Qnt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Jnt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let vg=class extends tl{constructor(){super(),this.state=Ue.resolve(s_e)}getItem(e,t){const{rightItems:n,leftItems:r}=this.state;if(!t){let a=r.findIndex(di(e.id));return a>-1?{index:a,item:r[a],source:"leftItems"}:(a=n.findIndex(di(e.id)),a>-1?{index:a,item:n[a],source:"rightItems"}:{index:-1,item:null,source:null})}const o=t===Lp.left?r:n,s=o.findIndex(di(e.id));return{index:s,item:o[s]||null,source:t===Lp.left?"leftItems":"rightItems"}}add(e,t){if(this.getItem(e,t).item){Wn.error(`There is already a status whose id is ${e.id}, if you want to update it, please use the update method`);return}const r=t===Lp.left?"leftItems":"rightItems",o=this.state[r].concat();o.push(e),this.setState({[r]:o})}update(e,t){const n=this.getItem(e,t);if(!n.source){Wn.error(`There is no status found whose id is ${e.id}`);return}const{index:r,item:o,source:s}=n,a=this.state[s].concat();a[r]=Object.assign({},o,e),this.setState({[s]:a})}getStatusBarItem(e,t){const n=this.getItem({id:e},t);return n.source?Xh(n.item):n.item}remove(e,t){const n=this.getItem({id:e},t);if(!n.source){Wn.error(`There is no status item found whose id is ${e}`);return}const{index:r,source:o}=n,s=this.state[o].concat();s.splice(r,1),this.setState({[o]:s})}reset(){this.setState({rightItems:[],leftItems:[],contextMenu:[]})}onClick(e){this.subscribe(WO.onClick,e)}};vg=Qnt([ji(),Jnt("design:paramtypes",[])],vg);var eit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},tit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},nit=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};let SS=class extends tl{constructor(){super(),this.fileContextMenu=[],this.folderContextMenu=[],this.onDropTree=e=>{this.subscribe(bo.onDrop,e)},this.onRightClick=e=>{this.subscribe(bo.onRightClick,e)},this.onCreate=e=>{this.subscribe(bo.onCreate,e)},this.onContextMenu=e=>{this.subscribe(bo.onContextMenuClick,e)},this.onLoadData=e=>{this.subscribe(bo.onLoadData,e)},this.onExpandKeys=e=>{this.subscribe(bo.onExpandKeys,e)},this.state=Ue.resolve(u_e),this.explorerService=Ue.resolve(Wp),this.builtinService=Ue.resolve(Uo)}isHiddenFile(e){var t;return!!(!((t=e.name)===null||t===void 0)&&t.startsWith("."))}sortTree(e){e.sort((t,n)=>{if(t.isLeaf!==n.isLeaf)return t.isLeaf>n.isLeaf?1:-1;if(t.name&&n.name){const r=Number(this.isHiddenFile(t)),o=Number(this.isHiddenFile(n));return r^o?r?-1:1:r&r?t.name.substring(1).localeCompare(n.name.substring(1)):t.name.localeCompare(n.name)}return t.isEditable?-1:1}),e.forEach(t=>this.sortTree(t.children||[]))}reset(){this.setState({folderTree:{contextMenu:[],current:null,folderPanelContextMenu:[],data:[]},entry:void 0})}getFileContextMenu(){return this.fileContextMenu}getParentNode(e){var t,n;const r=(n=(t=this.state.folderTree)===null||t===void 0?void 0:t.data)===null||n===void 0?void 0:n[0];if(!r)return null;const o=new w4(r),s=o.getHashMap(e);return s&&s.parent?o.getNode(s.parent):null}setFileContextMenu(e){this.fileContextMenu=e}getFolderContextMenu(){return this.folderContextMenu}setFolderContextMenu(e){this.folderContextMenu=e}getExpandKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.expandKeys)||[]}setExpandKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{expandKeys:e})})}getLoadedKeys(){var e;return((e=this.state.folderTree)===null||e===void 0?void 0:e.loadedKeys)||[]}setLoadedKeys(e){const{folderTree:t}=this.state;this.setState({folderTree:Object.assign(Object.assign({},t),{loadedKeys:e})})}setCurrentFolderLocation(e,t){const n=e.children,{tree:r}=this.getCurrentRootFolderInfo(t),o=r.getHashMap(t);e.location=`${o.node.location}/${e.name}`,n!=null&&n.length&&n.forEach(s=>{s.location=`${e.location}/${s.name}`})}getRootFolderById(e){var t;const n=((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[];for(let r=0;r<n.length;r++){const o=n[r];if(new w4(o).getNode(e))return o}return null}addRootFolder(e){var t;const{folderTree:n,autoSort:r}=this.state;if(!((t=n==null?void 0:n.data)===null||t===void 0)&&t.length)return;r&&this.sortTree(e.children||[]),this.setState({folderTree:Object.assign(Object.assign({},n),{data:[e]})});const{SAMPLE_FOLDER_PANEL_ID:o}=this.builtinService.getConstants();this.explorerService.updatePanel({id:o,name:e.name||"Default Root Folder"})}getRootFolderIndex(e){var t;return(((t=this.state.folderTree)===null||t===void 0?void 0:t.data)||[]).findIndex(o=>o.id===e)}getCurrentRootFolderInfo(e){const t=this.getRootFolderById(e);if(!t)return{currentRootFolder:null,index:-1,tree:null};const n=this.getRootFolderIndex(t.id),r=new w4(t);return{currentRootFolder:t,index:n,tree:r}}getPosOfType(e,t){if(!t.length||e===Js.Folder||e===Js.RootFolder)return 0;const n=t.findIndex(r=>r.fileType===Js.File);return n===-1?t.length:n}add(e,t){var n,r;const o=e.fileType==="RootFolder",{autoSort:s}=this.state;if(o){this.addRootFolder(e);return}if(!t&&t!==0)throw new Error("File node or folder node both need id");const a=((n=this.state.folderTree)===null||n===void 0?void 0:n.data)||[],{tree:u,index:d}=this.getCurrentRootFolderInfo(t);if(d<=-1){Wn.error("Please check id again, there is not folder tree");return}const h=u.getHashMap(t);if(h.node.fileType===Js.File){e.location=((r=h.node.location)===null||r===void 0?void 0:r.replace(/[^\/]+$/,`${e.name}`))||"";const f=u.getNode(h.parent),p=this.getPosOfType(e.fileType,f.children||[]);u.insertNode(e,h.parent,p)}else{this.setCurrentFolderLocation(e,t);const f=this.getPosOfType(e.fileType,h.node.children||[]);u==null||u.insertNode(e,h.id,f)}a[d]=u.obj,s&&this.sortTree(a[d].children||[]),this.setState({folderTree:Object.assign(Object.assign({},this.state.folderTree),{data:Xh(a)})})}remove(e){var t;const n=Xh(this.getState().folderTree||{}),r=n.data||[],{tree:o,index:s}=this.getCurrentRootFolderInfo(e);if(!o||s===-1){Wn.error(`There is unable to find a tree node whose id is ${e}`);return}o.removeNode(e),s>-1&&(r[s]=o.obj),!((t=n.loadedKeys)===null||t===void 0)&&t.includes(e.toString())&&(n.loadedKeys=n.loadedKeys.filter(a=>a!==e.toString())),this.setState({folderTree:n})}update(e){const{id:t}=e,n=nit(e,["id"]),{autoSort:r}=this.state;if(!t&&t!==0)throw new Error("Id is required in updating data");const o=Xh(this.getState().folderTree||{}),s=o.data||[],{tree:a,index:u}=this.getCurrentRootFolderInfo(t);if(!a){Wn.error(`There is unable to find a tree node whose id is ${t}`);return}a.updateNode(t,n),u>-1&&(s[u]=a.obj,r&&this.sortTree(s[u].children||[])),this.setState({folderTree:o})}get(e){const{tree:t}=this.getCurrentRootFolderInfo(e);return t?t.getNode(e):null}setActive(e){const{folderTree:t}=this.state,n=typeof e>"u"?null:this.get(e);this.setState({folderTree:Object.assign(Object.assign({},t),{current:n})})}setEntry(e){this.setState({entry:e})}onRename(e){this.subscribe(bo.onRename,e)}onRemove(e){this.subscribe(bo.onDelete,e)}onUpdateFileName(e){this.subscribe(bo.onUpdateFileName,e)}onSelectFile(e){this.subscribe(bo.onSelectFile,e)}toggleAutoSort(){this.setState({autoSort:!this.state.autoSort})}};SS=eit([ji(),tit("design:paramtypes",[])],SS);var iit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},rit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let m5=class extends tl{constructor(){super(),this.editorService=Ue.resolve(kl),this.state=this.editorService.getState()}onClose(e){this.subscribe(Eo.onClose,e)}onCloseOthers(e){this.subscribe(Eo.onCloseOthers,e)}onCloseSaved(e){this.subscribe(Eo.onCloseSaved,e)}onSelect(e){this.subscribe(Eo.onSelect,e)}onCloseAll(e){this.subscribe(Eo.onCloseAll,e)}onSaveAll(e){this.subscribe(Eo.onSaveAll,e)}onToolbarClick(e){this.subscribe(Eo.onToolbarClick,e)}onLayout(e){this.subscribe(Eo.onSplitEditorLayout,e)}onContextMenu(e){this.subscribe(Eo.onContextMenu,e)}};m5=iit([ji(),rit("design:paramtypes",[])],m5);const Ke={PANEL_PROBLEMS:"panel.problems.title",STATUS_PROBLEMS:"statusbar.problems.title",SAMPLE_FOLDER_PANEL_ID:"sidebar.explore.folders",EDITOR_PANEL_ID:"sidebar.explore.openEditor",OUTLINE_PANEL_ID:"sidebar.explore.outline",OUTLINE_PANEL_MORE_DESC:"sidebar.explore.outlineMore",EXPLORER_ACTIVITY_ITEM:"sidebar.explore.title",EXPLORER_ACTION_TITLE:"sidebar.explore.actionDesc",EXPLORER_TOGGLE_VERTICAL:"sidebar.explore.toggleVertical",EXPLORER_TOGGLE_SAVE_ALL:"sidebar.explore.saveALL",EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:"sidebar.explore.closeAllEditors",EXPLORER_TOGGLE_SAVE_GROUP:"sidebar.explore.saveGroup",EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:"sidebar.explore.closeGroupEditors",NEW_FILE_COMMAND_ID:"explorer.newFile",NEW_FOLDER_COMMAND_ID:"explorer.newFolder",COLLAPSE_COMMAND_ID:"explorer.collapse",RENAME_COMMAND_ID:"explorer.rename",REMOVE_COMMAND_ID:"explorer.remove",DELETE_COMMAND_ID:"explorer.delete",OPEN_TO_SIDE_COMMAND_ID:"explorer.openToSide",FIND_IN_WORKSPACE_ID:"filesExplorer.findInWorkspace",DOWNLOAD_COMMAND_ID:"explorer.download",EDITOR_MENU_CLOSE_TO_RIGHT:"editor.closeToRight",EDITOR_MENU_CLOSE_TO_LEFT:"editor.closeToLeft",EDITOR_MENU_CLOSE_ALL:"editor.closeAll",EDITOR_MENU_CLOSE_OTHERS:"editor.closeOthers",EDITOR_MENU_CLOSE_SAVED:"editor.closeSaved",EDITOR_MENU_CLOSE:"editor.close",EDITOR_MENU_SHOW_OPENEDITORS:"editor.showOpenEditors",EDITOR_MENU_SPILIT:"editor.split",SETTING_ID:"Setting",PROBLEM_MODEL_ID:"MO_PROBLEMS",PROBLEM_MODEL_NAME:"Problems",NOTIFICATION_CLEAR_ALL_ID:"ClearAll",NOTIFICATION_HIDE_ID:"HideNotifications",NOTIFICATION_MODEL_ID:"MO_NOTIFICATION",NOTIFICATION_MODEL_NAME:"Notification",STATUS_BAR_HIDE_ID:"hide",SEARCH_CASE_SENSITIVE_COMMAND_ID:"search.matchCase",SEARCH_WHOLE_WORD_COMMAND_ID:"search.matchWholeWord",SEARCH_REGULAR_EXPRESSION_COMMAND_ID:"search.useRegularExpression",SEARCH_PRESERVE_CASE_COMMAND_ID:"search.preserveCase",SEARCH_REPLACE_ALL_COMMAND_ID:"search.replaceAll",SEARCH_ACTIVITY_ITEM:"sidebar.search.title",SEARCH_TOOLBAR_REFRESH:"search.toolbar.refresh",SEARCH_TOOLBAR_CLEAR:"search.toolbar.clearAll",SEARCH_TOOLBAR_COLLAPSE:"search.toolbar.collapseAll",PANEL_TOOLBOX_CLOSE:"panel.toolbox.closePanel",PANEL_TOOLBOX_RESIZE:"panel.toolbox.maximize",PANEL_TOOLBOX_RESTORE_SIZE:"panel.toolbox.restoreSize",PANEL_OUTPUT:"panel.output.title",MENU_APPEARANCE_ID:"Appearance",MENU_FILE_OPEN:"openFile",MENU_QUICK_COMMAND:"editor.action.quickCommand",MENU_VIEW_MENUBAR:"workbench.action.showMenuBar",MENU_VIEW_AUXILIARY:"workbench.action.showAuxiliary",MENU_VIEW_ACTIVITYBAR:"workbench.action.showActivityBar",MENU_VIEW_STATUSBAR:"workbench.action.showStatusBar",MENU_VIEW_PANEL:"workbench.action.showPanel",ACTION_QUICK_COMMAND:"editor.action.quickCommand",ACTION_QUICK_SELECT_ALL:"editor.action.quickSelectAll",ACTION_QUICK_COPY_LINE_UP:"editor.action.copyLinesUpAction",ACTION_QUICK_UNDO:"editor.action.undo",ACTION_QUICK_REDO:"editor.action.redo",ACTION_QUICK_CREATE_FILE:"workbench.action.quickCreateFile",ACTION_QUICK_CREATE_FOLDER:"workbench.action.quickCreateFolder",ACTION_QUICK_ACCESS_SETTINGS:"workbench.action.quickAccessSettings",ACTION_SELECT_THEME:"workbench.action.selectTheme",ACTION_SELECT_LOCALE:"workbench.action.selectLocale",ACTIVITY_BAR_GLOBAL_SETTINGS:"global.menu.settings",ACTIVITY_BAR_GLOBAL_ACCOUNT:"global.menu.account",CONTEXT_MENU_MENU:"menubar",CONTEXT_MENU_EXPLORER:"sidebar.explore.title",CONTEXT_MENU_SEARCH:"sidebar.search.title",CONTEXT_MENU_HIDE:"menu.hideActivityBar",MENUBAR_MODE_HORIZONTAL:"menuBar.mode.horizontal",MENUBAR_MODE_VERTICAL:"menuBar.mode.vertical",MENUBAR_MENU_MODE_DIVIDER:"menuBar.modeDivider"},are={builtInExplorerActivityItem:()=>({id:Ke.EXPLORER_ACTIVITY_ITEM,name:ft(Ke.EXPLORER_ACTIVITY_ITEM,"Explore"),icon:"files",title:ft(Ke.EXPLORER_ACTIVITY_ITEM,"Explore"),sortIndex:1}),builtInExplorerFolderPanel:()=>({id:Ke.SAMPLE_FOLDER_PANEL_ID,sortIndex:8,name:ft("menu.defaultProjectName","No Open Folder"),toolbar:[{id:Ke.NEW_FILE_COMMAND_ID,title:ft("menu.newFile","New File"),icon:"new-file"},{id:Ke.NEW_FOLDER_COMMAND_ID,title:ft("menu.newFolder","New Folder"),icon:"new-folder"},{id:"refresh",title:ft("sidebar.explore.refresh","Refresh Explorer"),icon:"refresh"},{id:Ke.COLLAPSE_COMMAND_ID,title:ft("sidebar.explore.collapseFolders","Collapse Folders in Explorer"),icon:"collapse-all"}],config:{grow:2}}),builtInExplorerHeaderToolbar:()=>({id:Ke.EXPLORER_ACTION_TITLE,title:ft(Ke.EXPLORER_ACTION_TITLE,"View and More Actions..."),icon:"ellipsis",contextMenu:[]}),builtInExplorerEditorPanel:()=>({id:Ke.EDITOR_PANEL_ID,sortIndex:9,name:ft(Ke.EDITOR_PANEL_ID,"OPEN EDITORS"),toolbar:[{id:Ke.EXPLORER_TOGGLE_VERTICAL,title:ft(Ke.EXPLORER_TOGGLE_VERTICAL,"Toggle Vertical"),icon:"editor-layout"},{id:Ke.EXPLORER_TOGGLE_SAVE_ALL,title:ft(Ke.EXPLORER_TOGGLE_SAVE_ALL,"Save All"),icon:"save-all"},{id:Ke.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,title:ft(Ke.EXPLORER_TOGGLE_CLOSE_ALL_EDITORS,"Close All Editors"),icon:"close-all"}],groupToolbar:[{id:Ke.EXPLORER_TOGGLE_SAVE_GROUP,title:ft(Ke.EXPLORER_TOGGLE_SAVE_GROUP,"Save Group"),icon:"save-all"},{id:Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,title:ft(Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS,"Close Group Editors"),icon:"close-all"}],config:{grow:0}}),builtInExplorerOutlinePanel:()=>({id:"outline",name:ft("sidebar.explore.outline","OUTLINE"),toolbar:[{id:"outline-collapse",title:ft("toolbar.collapseAll","Collapse All"),icon:"collapse-all"},{id:"outline-more",title:ft("sidebar.explore.outlineMore","More Actions..."),icon:"ellipsis"}]}),BuiltInEditorOptions:()=>({renderWhitespace:"none",tabSize:4,fontSize:12}),builtInEditorInitialActions:()=>[{id:Ke.EDITOR_MENU_SPILIT,name:"Split Editor Right",title:ft("editor.actions.splitRight","Split Editor Right"),icon:"split-horizontal",place:"outer"},{id:Ke.EDITOR_MENU_SHOW_OPENEDITORS,name:"Show Opened Editors"},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorInitialMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE,name:ft(Ke.EDITOR_MENU_CLOSE,"Close")},{id:Ke.EDITOR_MENU_CLOSE_OTHERS,name:ft(Ke.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:Ke.EDITOR_MENU_CLOSE_TO_RIGHT,name:ft(Ke.EDITOR_MENU_CLOSE_TO_RIGHT,"Close To Right")},{id:Ke.EDITOR_MENU_CLOSE_TO_LEFT,name:ft(Ke.EDITOR_MENU_CLOSE_TO_LEFT,"Close To Left")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeHeaderContextMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE_SAVED,name:ft(Ke.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],builtInEditorTreeContextMenu:()=>[{id:Ke.EDITOR_MENU_CLOSE,name:ft(Ke.EDITOR_MENU_CLOSE,"Close")},{id:Ke.EDITOR_MENU_CLOSE_OTHERS,name:ft(Ke.EDITOR_MENU_CLOSE_OTHERS,"Close Others")},{id:Ke.EDITOR_MENU_CLOSE_SAVED,name:ft(Ke.EDITOR_MENU_CLOSE_SAVED,"Close Saved")},{id:Ke.EDITOR_MENU_CLOSE_ALL,name:ft(Ke.EDITOR_MENU_CLOSE_ALL,"Close All")}],BuiltInSettingsTab:()=>({id:Ke.SETTING_ID,name:"settings.json",data:{language:"json",value:""}}),builtInStatusProblems:()=>({id:Ke.STATUS_PROBLEMS,sortIndex:1,data:{warnings:0,errors:0,infos:0},name:"Problems"}),builtInPanelProblems:()=>({id:Ke.PANEL_PROBLEMS,name:ft(Ke.PANEL_PROBLEMS,"problems"),data:null,sortIndex:1,closable:!1}),NOTIFICATION_CLEAR_ALL:()=>({id:Ke.NOTIFICATION_CLEAR_ALL_ID,title:"Clear All Notifications",icon:"clear-all"}),NOTIFICATION_HIDE:()=>({id:Ke.NOTIFICATION_HIDE_ID,title:"Hide Notifications",icon:"chevron-down"}),builtInNotification:()=>({id:Ke.NOTIFICATION_MODEL_ID,name:Ke.NOTIFICATION_MODEL_NAME,sortIndex:1}),STATUS_EDITOR_INFO:()=>({id:"MoEditorInfo",sortIndex:2,data:{ln:0,col:0},name:"Go to Line/Column"}),CONTEXT_MENU_HIDE_STATUS_BAR:()=>({id:Ke.STATUS_BAR_HIDE_ID,name:"Hide Status Bar"}),builtInSearchActivityItem:()=>({id:Ke.SEARCH_ACTIVITY_ITEM,name:ft(Ke.SEARCH_ACTIVITY_ITEM,"Search"),title:ft(Ke.SEARCH_ACTIVITY_ITEM,"Search"),sortIndex:2,icon:"search"}),builtInHeaderToolbar:()=>[{id:Ke.SEARCH_TOOLBAR_REFRESH,title:ft(Ke.SEARCH_TOOLBAR_REFRESH,"Refresh"),disabled:!0,icon:"refresh"},{id:Ke.SEARCH_TOOLBAR_CLEAR,disabled:!0,title:ft(Ke.SEARCH_TOOLBAR_CLEAR,"Clear all"),icon:"clear-all"},{id:Ke.SEARCH_TOOLBAR_COLLAPSE,title:ft(Ke.SEARCH_TOOLBAR_COLLAPSE,"Collapse all"),disabled:!0,icon:"collapse-all"}],builtInSearchAddons:()=>[{id:Ke.SEARCH_CASE_SENSITIVE_COMMAND_ID,title:ft(Ke.SEARCH_CASE_SENSITIVE_COMMAND_ID,"Match Case"),disabled:!1,checked:!1,icon:"case-sensitive"},{id:Ke.SEARCH_WHOLE_WORD_COMMAND_ID,title:ft(Ke.SEARCH_WHOLE_WORD_COMMAND_ID,"Match Whole Word"),disabled:!1,checked:!1,icon:"whole-word"},{id:Ke.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,disabled:!1,checked:!1,title:ft(Ke.SEARCH_REGULAR_EXPRESSION_COMMAND_ID,"Use Regular Expression"),icon:"regex"}],builtInReplaceAddons:()=>[{id:Ke.SEARCH_PRESERVE_CASE_COMMAND_ID,title:ft(Ke.SEARCH_PRESERVE_CASE_COMMAND_ID,"Preserve Case"),disabled:!1,checked:!1,icon:"preserve-case"},{id:Ke.SEARCH_REPLACE_ALL_COMMAND_ID,title:ft(Ke.SEARCH_REPLACE_ALL_COMMAND_ID,"Replace All"),disabled:!1,checked:!1,icon:"replace-all"}],builtInOutputPanel:()=>({id:Ke.PANEL_OUTPUT,name:ft(Ke.PANEL_OUTPUT,"output"),data:"",sortIndex:2,closable:!1}),builtInPanelToolboxResize:()=>({id:Ke.PANEL_TOOLBOX_RESIZE,title:ft(Ke.PANEL_TOOLBOX_RESIZE,"Maximize Panel Size"),icon:"chevron-up"}),builtInPanelToolboxReStore:()=>({id:Ke.PANEL_TOOLBOX_RESIZE,title:ft(Ke.PANEL_TOOLBOX_RESTORE_SIZE,"Restore Panel Siz"),icon:"chevron-down"}),builtInPanelToolbox:()=>({id:Ke.PANEL_TOOLBOX_CLOSE,title:ft(Ke.PANEL_TOOLBOX_CLOSE,"Close Panel"),icon:"close"}),builtInMenuBarData:()=>[{id:"File",name:ft("menu.file","File"),data:[{id:Ke.ACTION_QUICK_CREATE_FILE,name:ft("menu.newFile","New File")},{id:Ke.MENU_FILE_OPEN,name:ft("menu.open","Open")}]},{id:"Edit",name:ft("menu.edit","Edit"),data:[{id:Ke.ACTION_QUICK_UNDO,name:ft("menu.undo","Undo")},{id:Ke.ACTION_QUICK_REDO,name:ft("menu.redo","Redo")}]},{id:"Selection",name:ft("menu.selection","Selection"),data:[{id:Ke.ACTION_QUICK_SELECT_ALL,name:ft("menu.selectAll","Select All")},{id:Ke.ACTION_QUICK_COPY_LINE_UP,name:ft("menu.copyLineUp","Copy Line Up")}]},{id:"View",name:ft("menu.view","View"),data:[{id:Ke.MENU_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:"OpenView",name:ft("menu.openView","Open View")},{id:Ke.MENU_APPEARANCE_ID,name:ft("menu.appearance","Appearance"),data:[{icon:"check",id:Ke.MENU_VIEW_MENUBAR,name:ft("menu.showMenuBar","Show Menu Bar")},{icon:"check",id:zM,name:ft("menu.showSideBar","Show Side Bar")},{id:Ke.MENU_VIEW_AUXILIARY,name:ft("menu.showAuxiliaryBar","Show Auxiliary Bar")},{icon:"check",id:Ke.MENU_VIEW_STATUSBAR,name:ft("menu.showStatusBar","Show Status Bar")},{icon:"check",id:Ke.MENU_VIEW_ACTIVITYBAR,name:ft("menu.showActivityBar","Show Activity Bar")},{icon:"check",id:Ke.MENU_VIEW_PANEL,name:ft("menu.showPanel","Show Panel")},{id:Ke.MENUBAR_MENU_MODE_DIVIDER,type:"divider"},{id:Ke.MENUBAR_MODE_HORIZONTAL,name:ft("menu.menuBarHorizontal","Menu Bar Horizontal Mode")},{id:Ke.MENUBAR_MODE_VERTICAL,name:ft("menu.menuBarVertical","Menu Bar Vertical Mode")}]}]},{id:"Run",name:ft("menu.run","Run"),data:[{id:"RunTask",name:ft("menu.runTask","Run Task")}]},{id:"Help",name:ft("menu.help","Help"),data:[{id:"About",name:ft("menu.about","About")}]}],quickAcessViewAction:()=>({id:Ke.ACTION_QUICK_COMMAND}),quickSelectColorThemeAction:()=>({id:Ke.ACTION_SELECT_THEME}),quickAccessSettingsAction:()=>({id:Ke.ACTION_QUICK_ACCESS_SETTINGS}),quickSelectLocaleAction:()=>({id:Ke.ACTION_SELECT_LOCALE}),quickTogglePanelAction:()=>({id:Ke.MENU_VIEW_PANEL}),quickSelectAllAction:()=>({id:Ke.ACTION_QUICK_SELECT_ALL}),quickCopyLineUpAction:()=>({id:Ke.ACTION_QUICK_COPY_LINE_UP}),quickUndoAction:()=>({id:Ke.ACTION_QUICK_UNDO}),quickRedoAction:()=>({id:Ke.ACTION_QUICK_REDO}),quickCreateFileAction:()=>({id:Ke.ACTION_QUICK_CREATE_FILE}),COMMON_CONTEXT_MENU:()=>[{id:Ke.RENAME_COMMAND_ID,name:ft("contextmenu.rename","Rename")},{id:Ke.DELETE_COMMAND_ID,name:ft("contextmenu.delete","Delete")}],BASE_CONTEXT_MENU:()=>[{id:Ke.NEW_FILE_COMMAND_ID,name:ft("contextmenu.newFile","New File")},{id:Ke.NEW_FOLDER_COMMAND_ID,name:ft("contextmenu.newFolder","New Folder")}],ROOT_FOLDER_CONTEXT_MENU:()=>[{id:Ke.REMOVE_COMMAND_ID,name:ft("contextmenu.removeFolder","Remove Folder")}],FILE_CONTEXT_MENU:()=>[{id:Ke.OPEN_TO_SIDE_COMMAND_ID,name:ft("contextmenu.openToTheSide","Open to the Side")}],FOLDER_PANEL_CONTEXT_MENU:()=>[{id:Ke.NEW_FOLDER_COMMAND_ID,name:ft("contextmenu.addFolderToSpace","Add Folder to Workspace...")},{id:Ke.FIND_IN_WORKSPACE_ID,name:ft("contextmenu.findInSpace","Find in Workspace...")},{id:Ke.DOWNLOAD_COMMAND_ID,name:ft("contextmenu.download","Download...")}],activityBarData:()=>[{id:Ke.ACTIVITY_BAR_GLOBAL_ACCOUNT,name:ft("menu.account","Account"),title:ft("menu.account","Account"),icon:"account",type:"global"},{id:Ke.ACTIVITY_BAR_GLOBAL_SETTINGS,name:ft("menu.settings","Settings"),title:ft("menu.settings","Settings"),icon:"settings-gear",type:"global",contextMenu:[{id:Ke.ACTION_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:Ke.ACTION_QUICK_ACCESS_SETTINGS,name:ft("menu.settings","Settings")},{id:Ke.ACTION_SELECT_THEME,name:ft("menu.colorTheme","Color Theme")}]}],contextMenuData:()=>[{id:Ke.CONTEXT_MENU_MENU,name:ft("menubar","Menu"),icon:"check"},{id:Ke.CONTEXT_MENU_EXPLORER,name:ft("sidebar.explore.title","Explorer"),icon:"check"},{id:Ke.CONTEXT_MENU_SEARCH,name:ft("sidebar.search.title","Search"),icon:"check"},{id:Ke.CONTEXT_MENU_HIDE,name:ft("menu.hideActivityBar","Hide Activity Bar")}]};var oit=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},sit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Uo=class{constructor(){this.builtinConstants=new Map,this.builtinModules=new Map,this.initialize()}initialize(){Object.keys(Ke).forEach(e=>{this.addConstant({id:e,value:Ke[e]})}),Object.keys(are).forEach(e=>{this.addModules({id:e,module:are[e]})})}addConstant(e){const t=e.id;this.builtinConstants.set(t,Object.assign(Object.assign({},e),{active:!0}))}addModules(e){const t=e.id;this.builtinModules.set(t,Object.assign(Object.assign({},e),{active:!0}))}getConstant(e){return this.builtinConstants.get(e)}getConstants(){const e={};return this.builtinConstants.forEach(t=>{t.active&&(e[t.id]=t.value)}),e}inactiveConstant(e){if(!this.builtinConstants.has(e))return Wn.error(`Can't find constant which is ${e}`),!1;const n=this.builtinConstants.get(e);return this.builtinConstants.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}inactiveModule(e){if(!this.builtinModules.has(e))return Wn.error(`Can't find module which is ${e}`),!1;const n=this.builtinModules.get(e);return this.builtinModules.set(n.id,Object.assign(Object.assign({},n),{active:!1})),!0}getModule(e){const t=this.builtinModules.get(e);if(!t)return t;t.value||(t.value=t.module());const n=Object.assign({},t);return Reflect.deleteProperty(n,"module"),wr.cloneDeep(n)}getModules(){const e={};return this.builtinModules.forEach(t=>{t.active&&(t.value||(t.value=t.module()),e[t.id]=wr.cloneDeep(t.value))}),e}reset(){this.builtinModules.clear(),this.builtinConstants.clear(),this.initialize()}};Uo=oit([ji(),sit("design:paramtypes",[])],Uo);var ait=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},lit=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let $O=class extends tl{constructor(){super(),this.state=Ue.resolve(c_e),this.builtinService=Ue.resolve(Uo)}setValidateInfo(e){this.setState({validationInfo:typeof e=="string"?{type:"info",text:e}:e})}setSearchValue(e){this.setState({value:e})}setReplaceValue(e){this.setState({replaceValue:e})}setResult(e){this.setState({result:e||[]})}toggleMode(e){this.setState({replaceMode:e})}toggleCaseSensitive(){const{isCaseSensitive:e}=this.state,{SEARCH_CASE_SENSITIVE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isCaseSensitive:!e}),this.updateStatus(t,!e))}toggleWholeWord(){const{isWholeWords:e}=this.state,{SEARCH_WHOLE_WORD_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isWholeWords:!e}),this.updateStatus(t,!e))}toggleRegex(){const{isRegex:e}=this.state,{SEARCH_REGULAR_EXPRESSION_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({isRegex:!e}),this.updateStatus(t,!e))}togglePreserveCase(){const{preserveCase:e}=this.state,{SEARCH_PRESERVE_CASE_COMMAND_ID:t}=this.builtinService.getConstants();t&&(this.setState({preserveCase:!e}),this.updateStatus(t,!e))}updateStatus(e,t){const{replaceAddons:n=[],searchAddons:r=[]}=this.state,o=n.find(di(e))||r.find(di(e));o&&(o.checked=t,this.setState({replaceAddons:n.concat(),searchAddons:r.concat()}))}reset(){this.setState({headerToolBar:[],searchAddons:[],replaceAddons:[],result:[],value:"",replaceValue:"",replaceMode:!1,isRegex:!1,isCaseSensitive:!1,isWholeWords:!1,preserveCase:!1,validationInfo:{type:"info",text:""}})}onReplaceAll(e){this.subscribe(Vh.onReplaceAll,e)}onChange(e){this.subscribe(Vh.onChange,e)}onSearch(e){this.subscribe(Vh.onSearch,e)}onResultClick(e){this.subscribe(Vh.onResultClick,e)}};$O=ait([ji(),lit("design:paramtypes",[])],$O);function uit(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}var __e=uit,cit="__lodash_hash_undefined__";function dit(i){return this.__data__.set(i,cit),this}var hit=dit;function fit(i){return this.__data__.has(i)}var git=fit,pit=vY,mit=hit,_it=git;function _5(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new pit;++e<t;)this.add(i[e])}_5.prototype.add=_5.prototype.push=mit;_5.prototype.has=_it;var vit=_5;function bit(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var Cit=bit;function wit(i,e){return i.has(e)}var yit=wit,Sit=vit,Lit=Cit,Eit=yit,xit=1,Dit=2;function Iit(i,e,t,n,r,o){var s=t&xit,a=i.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var d=o.get(i),h=o.get(e);if(d&&h)return d==e&&h==i;var f=-1,p=!0,m=t&Dit?new Sit:void 0;for(o.set(i,e),o.set(e,i);++f<a;){var v=i[f],b=e[f];if(n)var L=s?n(b,v,f,e,i,o):n(v,b,f,i,e,o);if(L!==void 0){if(L)continue;p=!1;break}if(m){if(!Lit(e,function(S,y){if(!Eit(m,y)&&(v===S||r(v,S,t,n,o)))return m.push(y)})){p=!1;break}}else if(!(v===b||r(v,b,t,n,o))){p=!1;break}}return o.delete(i),o.delete(e),p}var v_e=Iit;function kit(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var Tit=kit;function Nit(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var Ait=Nit,lre=TM,ure=Vfe,Oit=mY,Mit=v_e,Rit=Tit,Pit=Ait,Fit=1,Bit=2,Wit="[object Boolean]",Vit="[object Date]",Hit="[object Error]",$it="[object Map]",zit="[object Number]",Uit="[object RegExp]",jit="[object Set]",Kit="[object String]",Git="[object Symbol]",qit="[object ArrayBuffer]",Yit="[object DataView]",cre=lre?lre.prototype:void 0,IW=cre?cre.valueOf:void 0;function Zit(i,e,t,n,r,o,s){switch(t){case Yit:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case qit:return!(i.byteLength!=e.byteLength||!o(new ure(i),new ure(e)));case Wit:case Vit:case zit:return Oit(+i,+e);case Hit:return i.name==e.name&&i.message==e.message;case Uit:case Kit:return i==e+"";case $it:var a=Rit;case jit:var u=n&Fit;if(a||(a=Pit),i.size!=e.size&&!u)return!1;var d=s.get(i);if(d)return d==e;n|=Bit,s.set(i,e);var h=Mit(a(i),a(e),n,r,o,s);return s.delete(i),h;case Git:if(IW)return IW.call(i)==IW.call(e)}return!1}var Xit=Zit,dre=Ffe,Qit=1,Jit=Object.prototype,ert=Jit.hasOwnProperty;function trt(i,e,t,n,r,o){var s=t&Qit,a=dre(i),u=a.length,d=dre(e),h=d.length;if(u!=h&&!s)return!1;for(var f=u;f--;){var p=a[f];if(!(s?p in e:ert.call(e,p)))return!1}var m=o.get(i),v=o.get(e);if(m&&v)return m==e&&v==i;var b=!0;o.set(i,e),o.set(e,i);for(var L=s;++f<u;){p=a[f];var S=i[p],y=e[p];if(n)var E=s?n(y,S,p,e,i,o):n(S,y,p,i,e,o);if(!(E===void 0?S===y||r(S,y,t,n,o):E)){b=!1;break}L||(L=p=="constructor")}if(b&&!L){var A=i.constructor,N=e.constructor;A!=N&&"constructor"in i&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof N=="function"&&N instanceof N)&&(b=!1)}return o.delete(i),o.delete(e),b}var nrt=trt,kW=bY,irt=v_e,rrt=Xit,ort=nrt,hre=TB,fre=Up,gre=wY,srt=Ife,art=1,pre="[object Arguments]",mre="[object Array]",xP="[object Object]",lrt=Object.prototype,_re=lrt.hasOwnProperty;function urt(i,e,t,n,r,o){var s=fre(i),a=fre(e),u=s?mre:hre(i),d=a?mre:hre(e);u=u==pre?xP:u,d=d==pre?xP:d;var h=u==xP,f=d==xP,p=u==d;if(p&&gre(i)){if(!gre(e))return!1;s=!0,h=!1}if(p&&!h)return o||(o=new kW),s||srt(i)?irt(i,e,t,n,r,o):rrt(i,e,u,t,n,r,o);if(!(t&art)){var m=h&&_re.call(i,"__wrapped__"),v=f&&_re.call(e,"__wrapped__");if(m||v){var b=m?i.value():i,L=v?e.value():e;return o||(o=new kW),r(b,L,t,n,o)}}return p?(o||(o=new kW),ort(i,e,t,n,r,o)):!1}var crt=urt,drt=crt,vre=NC;function b_e(i,e,t,n,r){return i===e?!0:i==null||e==null||!vre(i)&&!vre(e)?i!==i&&e!==e:drt(i,e,t,n,b_e,r)}var C_e=b_e,hrt=bY,frt=C_e,grt=1,prt=2;function mrt(i,e,t,n){var r=t.length,o=r,s=!n;if(i==null)return!o;for(i=Object(i);r--;){var a=t[r];if(s&&a[2]?a[1]!==i[a[0]]:!(a[0]in i))return!1}for(;++r<o;){a=t[r];var u=a[0],d=i[u],h=a[1];if(s&&a[2]){if(d===void 0&&!(u in i))return!1}else{var f=new hrt;if(n)var p=n(d,h,u,i,e,f);if(!(p===void 0?frt(h,d,grt|prt,n,f):p))return!1}}return!0}var _rt=mrt,vrt=kC;function brt(i){return i===i&&!vrt(i)}var w_e=brt,Crt=w_e,wrt=kB;function yrt(i){for(var e=wrt(i),t=e.length;t--;){var n=e[t],r=i[n];e[t]=[n,r,Crt(r)]}return e}var Srt=yrt;function Lrt(i,e){return function(t){return t==null?!1:t[i]===e&&(e!==void 0||i in Object(t))}}var y_e=Lrt,Ert=_rt,xrt=Srt,Drt=y_e;function Irt(i){var e=xrt(i);return e.length==1&&e[0][2]?Drt(e[0][0],e[0][1]):function(t){return t===i||Ert(t,i,e)}}var krt=Irt,Trt=NM,Nrt=NC,Art="[object Symbol]";function Ort(i){return typeof i=="symbol"||Nrt(i)&&Trt(i)==Art}var mZ=Ort,Mrt=Up,Rrt=mZ,Prt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Frt=/^\w*$/;function Brt(i,e){if(Mrt(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Rrt(i)?!0:Frt.test(i)||!Prt.test(i)||e!=null&&i in Object(e)}var _Z=Brt,S_e=vY,Wrt="Expected a function";function vZ(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(Wrt);var t=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=t.cache;if(o.has(r))return o.get(r);var s=i.apply(this,n);return t.cache=o.set(r,s)||o,s};return t.cache=new(vZ.Cache||S_e),t}vZ.Cache=S_e;var Vrt=vZ,Hrt=Vrt,$rt=500;function zrt(i){var e=Hrt(i,function(n){return t.size===$rt&&t.clear(),n}),t=e.cache;return e}var Urt=zrt,jrt=Urt,Krt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Grt=/\\(\\)?/g,qrt=jrt(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(Krt,function(t,n,r,o){e.push(r?o.replace(Grt,"$1"):n||t)}),e}),Yrt=qrt,bre=TM,Zrt=__e,Xrt=Up,Qrt=mZ,Jrt=1/0,Cre=bre?bre.prototype:void 0,wre=Cre?Cre.toString:void 0;function L_e(i){if(typeof i=="string")return i;if(Xrt(i))return Zrt(i,L_e)+"";if(Qrt(i))return wre?wre.call(i):"";var e=i+"";return e=="0"&&1/i==-Jrt?"-0":e}var eot=L_e,tot=eot;function not(i){return i==null?"":tot(i)}var iot=not,rot=Up,oot=_Z,sot=Yrt,aot=iot;function lot(i,e){return rot(i)?i:oot(i,e)?[i]:sot(aot(i))}var b7=lot,uot=mZ,cot=1/0;function dot(i){if(typeof i=="string"||uot(i))return i;var e=i+"";return e=="0"&&1/i==-cot?"-0":e}var UM=dot,hot=b7,fot=UM;function got(i,e){e=hot(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[fot(e[t++])];return t&&t==n?i:void 0}var bZ=got,pot=bZ;function mot(i,e,t){var n=i==null?void 0:pot(i,e);return n===void 0?t:n}var _ot=mot;function vot(i,e){return i!=null&&e in Object(i)}var bot=vot,Cot=b7,wot=Dfe,yot=Up,Sot=yY,Lot=SY,Eot=UM;function xot(i,e,t){e=Cot(e,i);for(var n=-1,r=e.length,o=!1;++n<r;){var s=Eot(e[n]);if(!(o=i!=null&&t(i,s)))break;i=i[s]}return o||++n!=r?o:(r=i==null?0:i.length,!!r&&Lot(r)&&Sot(s,r)&&(yot(i)||wot(i)))}var Dot=xot,Iot=bot,kot=Dot;function Tot(i,e){return i!=null&&kot(i,e,Iot)}var Not=Tot,Aot=C_e,Oot=_ot,Mot=Not,Rot=_Z,Pot=w_e,Fot=y_e,Bot=UM,Wot=1,Vot=2;function Hot(i,e){return Rot(i)&&Pot(e)?Fot(Bot(i),e):function(t){var n=Oot(t,i);return n===void 0&&n===e?Mot(t,i):Aot(e,n,Wot|Vot)}}var $ot=Hot;function zot(i){return i}var Uot=zot;function jot(i){return function(e){return e==null?void 0:e[i]}}var Kot=jot,Got=bZ;function qot(i){return function(e){return Got(e,i)}}var Yot=qot,Zot=Kot,Xot=Yot,Qot=_Z,Jot=UM;function est(i){return Qot(i)?Zot(Jot(i)):Xot(i)}var tst=est,nst=krt,ist=$ot,rst=Uot,ost=Up,sst=tst;function ast(i){return typeof i=="function"?i:i==null?rst:typeof i=="object"?ost(i)?ist(i[0],i[1]):nst(i):sst(i)}var lst=ast,ust=CY,cst=b7,dst=yY,yre=kC,hst=UM;function fst(i,e,t,n){if(!yre(i))return i;e=cst(e,i);for(var r=-1,o=e.length,s=o-1,a=i;a!=null&&++r<o;){var u=hst(e[r]),d=t;if(u==="__proto__"||u==="constructor"||u==="prototype")return i;if(r!=s){var h=a[u];d=n?n(h,u,a):void 0,d===void 0&&(d=yre(h)?h:dst(e[r+1])?[]:{})}ust(a,u,d),a=a[u]}return i}var gst=fst,pst=bZ,mst=gst,_st=b7;function vst(i,e,t){for(var n=-1,r=e.length,o={};++n<r;){var s=e[n],a=pst(i,s);t(a,s)&&mst(o,_st(s,i),a)}return o}var bst=vst,Cst=__e,wst=lst,yst=bst,Sst=Bfe;function Lst(i,e){if(i==null)return{};var t=Cst(Sst(i),function(n){return[n]});return e=wst(e),yst(i,t,function(n,r){return e(n,r[0])})}var Est=Lst;const xst=Vp(Est);var Dst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ist=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let uC=class extends tl{constructor(){super(),this.state=Ue.resolve(d_e),this.layoutService=Ue.resolve(Wu),this.builtinService=Ue.resolve(Uo)}updateOutputProperty(e){const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=xst(e,r=>r!==void 0);return this.update(Object.assign(this.getPanel(t),n))}get outputEditorInstance(){var e;const{PANEL_OUTPUT:t}=this.builtinService.getConstants(),n=(e=this.state.data)===null||e===void 0?void 0:e.find(di(t));return n==null?void 0:n.outputEditorInstance}setActive(e){const t=this.getPanel(e);t?this.open(t):Wn.error(`There is no panel found in data via ${e}. If you want to open a brand-new panel, please use the open method`)}toggleMaximize(){const{PANEL_TOOLBOX_RESIZE:e}=this.builtinService.getConstants(),{builtInPanelToolboxResize:t,builtInPanelToolboxReStore:n}=this.builtinService.getModules(),{toolbox:r=[]}=this.state;if(t&&n){const o=r==null?void 0:r.findIndex(di(e));if(r[o]){const a=this.layoutService.togglePanelMaximized();r[o]=a?n:t}}}open(e){const{data:t=[]}=this.state;let n=wr.cloneDeep(e);const r=t.findIndex(di(n.id));r>-1?n=t[r]:this.add(n),this.setState({current:n})}getPanel(e){const{data:t=[]}=this.state;return wr.cloneDeepWith(t.find(di(e)),n=>{if(n&&typeof n=="object"&&n instanceof tO)return n})}getOutputValue(){const{PANEL_OUTPUT:e=""}=this.builtinService.getConstants(),t=this.getPanel(e);return(t==null?void 0:t.data)||""}updateOutput(e){const{title:t,name:n,sortIndex:r,active:o,closable:s,editable:a}=e;return this.updateOutputProperty({title:t,name:n,sortIndex:r,active:o,closable:s,editable:a})}appendOutput(e){var t;const n=this.getOutputValue();this.updateOutputProperty({data:n+e}),(t=this.outputEditorInstance)===null||t===void 0||t.setValue(n+e)}cleanOutput(){var e;(e=this.outputEditorInstance)===null||e===void 0||e.setValue("")}add(e){let t=this.state.data||[];const n=wr.cloneDeep(e);Array.isArray(n)?t=t.concat(n):t.push(n),this.setState({data:t})}update(e){const t=this.state.data||[],n=t==null?void 0:t.findIndex(di(e.id));if(n!==void 0&&n>-1)return Object.assign(t[n],e),this.setState({data:[...t]}),t[n];Wn.error(`There is no panel found in data via the ${e.id}`)}remove(e){const{data:t}=this.state,n=t==null?void 0:t.findIndex(di(e));if(n!==void 0&&n>-1){const r=(t==null?void 0:t.splice(n,1))||[];return this.setState({data:t}),r[0]}else{Wn.error(`There is no panel found in data via the ${e}`);return}}reset(){this.setState({data:[],current:null,toolbox:[]}),this.cleanOutput()}onTabChange(e){this.subscribe(Ep.onTabChange,e)}onToolbarClick(e){this.subscribe(Ep.onToolbarClick,e)}onTabClose(e){this.subscribe(Ep.onTabClose,e)}};uC=Dst([ji(),Ist("design:paramtypes",[])],uC);var kst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Tst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let cC=class extends TS{constructor(){super(),this.editorService=Ue.resolve(kl),this.localeService=Ue.resolve(of),this.colorThemeService=Ue.resolve(sC),this.builtinService=Ue.resolve(Uo),this.settings=this.getBuiltInSettings()}getBuiltInSettings(){const e=this.editorService.getState().editorOptions,t=this.colorThemeService.getColorTheme(),n=this.localeService.getCurrentLocale();return new h_e(t.id,e,n==null?void 0:n.id)}getDefaultSettingsTab(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();return Object.assign({},e)}onChangeSettings(e){this.subscribe(VO.OnChange,e)}update(e){this.applySettings(e);const t=wr.cloneDeep(this.settings);this.settings=CK(t,e)}append(e){this.update(e)}getSettings(){const e=this.getBuiltInSettings();return Object.assign({},this.settings,e)}applySettings(e){const t=this.settings,{colorTheme:n,locale:r,editor:o}=e;n&&n!==t.colorTheme&&this.colorThemeService.setTheme(n),r&&r!==t.locale&&this.localeService.setCurrentLocale(r),o&&!wr.isEqual(o,t.editor)&&this.editorService.updateEditorOptions(o)}openSettingsInEditor(){const{BuiltInSettingsTab:e}=this.builtinService.getModules();e&&(e.data.value=this.flatObject2JSONString(this.getSettings()),this.editorService.open(e))}normalizeFlatObject(e){try{const t=JSON.parse(e);return Obe(t)}catch(t){throw new Error(`SettingsService.normalizeFlatJSONObject error: ${t}`)}}flatObject(e){return Abe(e)}flatObject2JSONString(e){return this.toJSONString(this.flatObject(e))}toJSONString(e,t=4){try{return JSON.stringify(e,null,t)}catch(n){throw new Error(`SettingsService.toJSONString error: ${n}`)}}};cC=kst([ji(),Tst("design:paramtypes",[])],cC);var Nst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ast=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let LS=class extends tl{constructor(){super(),this.state=Ue.resolve(f_e)}toggleNotification(){const e=wr.cloneDeep(this.state);e.showNotifications=!this.state.showNotifications,this.setState(e)}update(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(di(e.id));if(n>-1){const r=t[n];return t[n]=Object.assign(r,e),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]})),t[n]}else Wn.error("There is no notification be found, please check the id")}return null}remove(e){const{data:t=[]}=this.state;if(t.length){const n=t.findIndex(di(e));n>-1?(t.splice(n,1),this.setState(Object.assign(Object.assign({},this.state),{data:[...t]}))):Wn.error("There is no notification be found, please check the id")}else Wn.error("You can't remove notification because there is no notifications in data.")}add(e){const{data:t=[]}=this.state;if(e&&e.length){e.forEach(r=>{r.id===void 0&&(r.id=lae()),r.status=f5.WaitRead});const n=[...t,...e];return this.setState({data:n}),e}return null}clear(){this.setState({data:[]})}reset(){this.setState({id:"",name:"",data:[],sortIndex:1,showNotifications:!1,actionBar:[],render:void 0})}};LS=Nst([ji(),Ast("design:paramtypes",[])],LS);var Ost=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Mst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let zO=class extends tl{constructor(){super(),this.getProblemsMarkers=e=>{let t=0,n=0,r=0;const o=s=>{s.forEach(a=>{switch(a.value.status){case Jh.Info:r+=1;break;case Jh.Error:n+=1;break;case Jh.Warning:t+=1;break}a.children&&a.children.length&&o(a.children)})};return o(e),{warnings:t,errors:n,infos:r}},this.state=Ue.resolve(g_e),this.statusBarService=Ue.resolve(vg),this.builtinService=Ue.resolve(Uo)}toggleProblems(){this.setState(Object.assign(Object.assign({},this.state),{show:!this.state.show}))}add(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(r=>{const o=n.findIndex(di(r.id));o>-1?n.splice(o,1,r):n.push(r)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}update(e){const t=Array.isArray(e)?e:[e],{data:n}=this.state;t.forEach(r=>{const o=n.findIndex(di(r.id));o>-1?n.splice(o,1,r):Wn.error(`Update problems failed, because there is no problem found via ${r.id}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}remove(e){const t=Array.isArray(e)?e:[e],{data:n=[]}=this.state;t.forEach(r=>{const o=n.findIndex(di(r));o>-1?n.splice(o,1):Wn.error(`Remove problems failed, because there is no problem found via ${r}`)}),this.setState({data:[...n]},()=>{this.updateStatusBar()})}reset(){const{builtInStatusProblems:e}=this.builtinService.getModules();this.setState(Object.assign(Object.assign({},this.state),{data:[]})),e&&this.updateStatus(e)}onSelect(e){this.subscribe(HO.onSelect,e)}updateStatusBar(){const{data:e=[]}=this.state,t=this.getProblemsMarkers(e),{builtInStatusProblems:n}=this.builtinService.getModules();n&&this.updateStatus(Object.assign(n,{data:t}))}updateStatus(e){this.statusBarService.update(e)}};zO=Ost([ji(),Mst("design:paramtypes",[])],zO);const Rst={LoadExtensionFail:"Load Extension failed",NotFoundActivateMethod:"Not found activate function, the extension must export an activate function as entry."};var Pst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Fst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let UO=class{constructor(){this.extensions=[],this._isLoaded=!1,this.colorThemeService=Ue.resolve(sC),this.monacoService=Ue.resolve(pg),this.localeService=Ue.resolve(of)}setLoaded(e){this._isLoaded=e!==void 0?e:!0}isLoaded(){return this._isLoaded}getExtension(e){return this.extensions.find(di(e))}reset(){this.extensions=[]}getAllExtensions(){return this.extensions.concat()}add(e){if(!e||(e==null?void 0:e.length)===0)return null;const t=e.filter(n=>{const r=this.extensions.find(di(n.id));return r&&Wn.warn("Warning: Unable to load the existed Extension:"+n.id),!r});return t.length>0&&(this.extensions=this.extensions.concat(t)),t}load(e){try{const t=this.add(e);if(!t)return;this.activate(t)}catch(t){Wn.error(Rst.LoadExtensionFail,t)}}loadContributes(e){Object.keys(e).forEach(n=>{switch(n){case rS.Themes:{const r=e[n];return r?this.colorThemeService.addThemes(r):void 0}case rS.Languages:{const r=e[n];return r?this.localeService.addLocales(r):void 0}}})}registerAction(e){return Kze(e)}executeCommand(e,...t){this.monacoService.commandService.executeCommand(e,...t)}activate(e){if(e.length===0)return;const t=this;e==null||e.forEach((n,r)=>{!n||this.isInactive(n)||(n.activate&&n.activate(t),n.contributes&&this.loadContributes(n.contributes))})}dispose(e){var t;const n=this,r=this.extensions.findIndex(di(e));if(r>-1){const o=this.extensions[r];(t=o.dispose)===null||t===void 0||t.call(o,n),this.extensions.splice(r,1)}}disposeAll(){this.extensions.forEach(e=>{var t;(t=e.dispose)===null||t===void 0||t.call(e,this)}),this.reset()}inactive(e){this._inactive=e}isInactive(e){return this._inactive&&typeof this._inactive=="function"?this._inactive(e):!1}splitLanguagesExts(e){const t=[],n=[];return e.forEach(r=>{var o;!((o=r.contributes)===null||o===void 0)&&o.languages?t.push(r):n.push(r)}),[t,n]}};UO=Pst([ji(),Fst("design:paramtypes",[])],UO);var Bst=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Wst=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let v5=class extends aa{constructor(){super(),this.editorStates=new Map,this.onClickContextMenu=(e,t,n)=>{const r=t==null?void 0:t.id,o=n==null?void 0:n.id,{current:s}=this.editorService.getState(),a=s==null?void 0:s.id,{EDITOR_MENU_CLOSE:u,EDITOR_MENU_CLOSE_OTHERS:d,EDITOR_MENU_CLOSE_ALL:h,EDITOR_MENU_CLOSE_TO_RIGHT:f,EDITOR_MENU_CLOSE_TO_LEFT:p}=this.builtinService.getConstants();switch(r){case u:{this.onCloseTab(o,a);break}case d:{this.onCloseOther(n,a);break}case h:{this.onCloseAll(a);break}case f:{this.onCloseToRight(n,a);break}case p:{this.onCloseToLeft(n,a);break}default:this.emit(Co.onActionsClick,r,s)}},this.onCloseAll=e=>{this.emit(Co.OnCloseAll,e)},this.onCloseTab=(e,t)=>{e&&t&&this.emit(Co.OnCloseTab,e,t)},this.onCloseToRight=(e,t)=>{this.emit(Co.OnCloseToRight,e,t)},this.onCloseToLeft=(e,t)=>{this.emit(Co.OnCloseToLeft,e,t)},this.onCloseOther=(e,t)=>{this.emit(Co.OnCloseOther,e,t)},this.onMoveTab=(e,t)=>{this.editorService.updateGroup(t,{data:e}),this.emit(Co.OnMoveTab,e,t)},this.onSelectTab=(e,t)=>{this.editorService.setActive(t,e),this.emit(Co.OnSelectTab,e,t)},this.onUpdateEditorIns=(e,t)=>{var n,r;if(!e)return;this.initEditorEvents(e,t),this.editorService.updateGroup(t,{editorInstance:e}),this.editorService.updateCurrentGroup({editorInstance:e});const{current:o}=this.editorService.getState(),s=o==null?void 0:o.tab;this.openTab(e,s.id.toString(),(n=s==null?void 0:s.data)===null||n===void 0?void 0:n.value,(r=s==null?void 0:s.data)===null||r===void 0?void 0:r.language)},this.onClickActions=e=>{const{current:t}=this.editorService.getState();if(!t)return;const{EDITOR_MENU_CLOSE_ALL:n,EDITOR_MENU_SHOW_OPENEDITORS:r,EDITOR_MENU_SPILIT:o}=this.builtinService.getConstants();switch(e.id){case n:{this.onCloseAll(t.id);break}case r:break;case o:{this.editorService.cloneGroup();const{groupSplitPos:s}=this.layoutService.getState();this.layoutService.setGroupSplitSize(new Array(s.length+1).fill("auto")),this.emit(Co.OnSplitEditorRight);break}default:this.emit(Co.onActionsClick,e.id,t)}},this.onPaneSizeChange=e=>{this.layoutService.setGroupSplitSize(e)},this.getViewState=e=>this.editorStates.get(e),this.onChangeEditorProps=(e,t)=>{const{path:n,options:r}=t;if((e==null?void 0:e.path)!==n){const{current:o}=this.editorService.getState(),s=o==null?void 0:o.editorInstance;this.editorStates.set(e.path,s==null?void 0:s.saveViewState()),this.openTab(s,n,r==null?void 0:r.value,r==null?void 0:r.language)}},this.editorService=Ue.resolve(kl),this.layoutService=Ue.resolve(Wu),this.statusBarService=Ue.resolve(vg),this.builtinService=Ue.resolve(Uo)}initView(){const{builtInEditorInitialActions:e,builtInEditorInitialMenu:t,BuiltInEditorOptions:n}=this.builtinService.getModules();if(!this.editorService.getDefaultActions().length){const s=e||[];this.editorService.setDefaultActions(s)}if(!this.editorService.getDefaultMenus().length){const s=t||[];this.editorService.setDefaultMenus(s)}this.editorService.setState({editorOptions:n||{}})}open(e,t){this.editorService.open(e,t)}initEditorEvents(e,t){e&&(e.onDidChangeModelContent(n=>{var r,o,s,a;const{current:u}=this.editorService.getState(),d=u==null?void 0:u.tab;if(!d)return;const h=(o=(r=u.editorInstance)===null||r===void 0?void 0:r.getModel())===null||o===void 0?void 0:o.uri,f=(s=e==null?void 0:e.getModel())===null||s===void 0?void 0:s.uri;if((h==null?void 0:h.path)!==(f==null?void 0:f.path))return;const p=(a=e.getModel())===null||a===void 0?void 0:a.getValue(),m=Object.assign(Object.assign({},d),{data:Object.assign(Object.assign({},d.data),{value:p})});this.editorService.updateTab(m,t),this.updateStatusBar(e),this.emit(Co.OnUpdateTab,m)}),e.onDidFocusEditorText(()=>{const n=this.editorService.getGroupById(t);n!=null&&n.tab.id&&(this.editorService.setActive(t,n.tab.id),this.updateEditorLineColumnInfo(e))}),e.onDidChangeCursorSelection(()=>{this.updateEditorLineColumnInfo(e)}),e.onDidBlurEditorText(()=>{var n;const{current:r}=this.editorService.getState(),o=r==null?void 0:r.tab;if(o!=null&&o.id){const s=e==null?void 0:e.saveViewState();this.editorStates.set((n=o.id)===null||n===void 0?void 0:n.toString(),s)}}))}openTab(e,t,n,r){let o=Cl.getModel(sS.parse(t));o||(o=Cl.createModel(n,r,sS.parse(t))),e.setModel(o);const s=this.editorStates.get(t);s&&e.restoreViewState(s),e==null||e.focus()}updateStatusBar(e){}updateEditorLineColumnInfo(e){if(e){const t=e.getPosition(),{STATUS_EDITOR_INFO:n}=this.builtinService.getModules();n&&this.statusBarService.update(Object.assign(n,{data:{ln:t==null?void 0:t.lineNumber,col:t==null?void 0:t.column}}))}}};v5=Bst([ji(),Wst("design:paramtypes",[])],v5);const X0=Hn("editor"),Vst=gt(X0,"group"),Hst=gt(X0,"group-container"),$st=gt(X0,"group-header"),zst=gt(X0,"group-tabs"),Ust=gt(X0,"group-actions"),hj=gt(X0,"group-actions-item"),jst=_n(hj,"disabled"),Kst=gt(X0,"group-breadcrumb"),Sre=6;function Gst(i){const e=[],t=[];return i.forEach(n=>{n.place==="outer"?e.push(n):t.push(n)}),e.length>Sre&&e.splice(0,Sre-e.length),[e,t]}function qst(i){const{actions:e=[],isActiveGroup:t,onClickActions:n}=i,[r,o]=Gst(e),s=he.useRef(null),a=(h,f)=>{var p;n(f),(p=s.current)===null||p===void 0||p.dispose()},u=h=>{n(h)},d=o.length>0?re.createElement(Ya,{style:{width:200},data:o,onClick:a}):re.createElement("span",{style:{padding:15,fontSize:14}},"No more actions");return re.createElement("div",{className:Ust},t&&r.map(h=>re.createElement(MK,{key:h.id,overlay:h.title},re.createElement("div",{onClick:()=>!h.disabled&&u(h),className:mn(hj,h.disabled&&jst)},h.icon?typeof h.icon=="string"?re.createElement(dr,{type:h.icon}):h.icon:h.name))),!!o.length&&re.createElement(HK,{ref:s,placement:"bottom",className:hj,trigger:"click",title:"More Actions...",overlay:d},re.createElement(dr,{type:"ellipsis"})))}const Yst=he.memo(qst);function Zst(i){const{breadcrumbs:e=[]}=i;return re.createElement("div",{className:Kst},re.createElement(ile,{role:"breadcrumb",routes:e}))}const Xst=he.memo(Zst);function E_e(i){var e,t;const{id:n,data:r,tab:o,currentGroup:s,group:a,actions:u=[],menu:d=[],onMoveTab:h,onCloseTab:f,onClickContextMenu:p,onChangeEditorProps:m,onSelectTab:v,onClickActions:b,editorOptions:L,onUpdateEditorIns:S}=i,y=n===(s==null?void 0:s.id),E=NS(),A=(N,V)=>{const R=(M,K)=>{p==null||p(M,K,V),E.hide()};E==null||E.show(cF(N),()=>re.createElement(Ya,{data:d,onClick:R}))};return he.useEffect(()=>function(){E==null||E.dispose()}),re.createElement("div",{className:Vst},re.createElement("div",{className:$st},re.createElement("div",{className:zst},re.createElement(gY,{editable:!0,type:"card",data:r,onMoveTab:h,onSelectTab:v,onContextMenu:A,activeTab:y?o==null?void 0:o.id:"",onCloseTab:f})),re.createElement(Yst,{isActiveGroup:y,actions:u,menu:d,onClickActions:b})),re.createElement(Xst,{breadcrumbs:(o==null?void 0:o.breadcrumb)||[]}),re.createElement("div",{className:Hst},o!=null&&o.renderPane?typeof o.renderPane=="function"?o.renderPane(Object.assign({},o.data),o,a):o.renderPane:re.createElement(sY,{options:Object.assign(Object.assign({},L),{value:(e=o==null?void 0:o.data)===null||e===void 0?void 0:e.value,language:(t=o==null?void 0:o.data)===null||t===void 0?void 0:t.language,automaticLayout:!0}),path:o==null?void 0:o.id.toString(),editorInstanceRef:N=>{S==null||S(N,n)},onChangeEditorProps:(N,V)=>{m==null||m(N,V)}})))}const Lre=he.memo(E_e);function Qst({className:i}){return re.createElement("span",{style:{fontSize:0}},re.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 120 120",className:i},re.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",opacity:"0.48"},re.createElement("g",{fill:"#A2A2A2",transform:"translate(-660 -152)"},re.createElement("g",{transform:"translate(660 152)"},re.createElement("path",{d:"M59.3 96.335c4.87 0 8.817 3.954 8.817 8.832S64.169 114 59.3 114c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm-22.444-6.826a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 72.245c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 85.956 8 81.078s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zm-65.327-6.022a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm44.887 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 48.156c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.833 8.818-8.833zm-42.483 0c4.87 0 8.817 3.955 8.817 8.833s-3.947 8.833-8.817 8.833S8 61.867 8 56.989s3.948-8.833 8.817-8.833zm85.366 0c4.87 0 8.817 3.955 8.817 8.833s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.833 8.817-8.833zM80.942 35.31c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.817-3.955-8.817-8.833s3.947-8.832 8.817-8.832zm-43.284 0c4.87 0 8.817 3.954 8.817 8.832s-3.948 8.833-8.817 8.833c-4.87 0-8.818-3.955-8.818-8.833s3.948-8.832 8.818-8.832zm64.525-11.242c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.948 8.832-8.817 8.832-4.87 0-8.817-3.954-8.817-8.832 0-4.879 3.947-8.833 8.817-8.833zm-85.366 0c4.87 0 8.817 3.954 8.817 8.833 0 4.878-3.947 8.832-8.817 8.832S8 37.778 8 32.9c0-4.879 3.948-8.833 8.817-8.833zm42.483 5.62a3.21 3.21 0 013.206 3.213 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212 3.21 3.21 0 013.207-3.212zm-19.238-13.65a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zm38.475 0a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.206-3.212 3.21 3.21 0 013.206-3.212zM59.3 6a3.21 3.21 0 013.206 3.212 3.21 3.21 0 01-3.206 3.212 3.21 3.21 0 01-3.207-3.212A3.21 3.21 0 0159.3 6z"}))))))}const Rh={_isMac:eae.isMacOs(),queryGlobalKeybinding:i=>{const n=Os.getDefaultKeybindings().filter(r=>!r.when).filter(r=>r.command===i);return n.length?n[n.length-1].keybinding:null},convertSimpleKeybindingToString:(i=[])=>i.map(e=>{const t=[];return e.altKey&&t.push(Rh._isMac?"⌥":"Alt"),e.ctrlKey&&t.push(Rh._isMac?"⌃":"Ctrl"),e.metaKey&&t.push(Rh._isMac?"⌘":"Meta"),e.shiftKey&&t.push(Rh._isMac?"⇧":"Shift"),e.keyCode&&t.push(p_e[e.keyCode]||""),t.join(Rh._isMac?"":"+")}).join(" ")},Jst=()=>[{id:Ke.ACTION_QUICK_COMMAND,name:ft("menu.commandPalette","Command Palette")},{id:Ke.ACTION_QUICK_ACCESS_SETTINGS,name:ft("menu.settings","Settings")},{id:Ke.ACTION_SELECT_THEME,name:ft("menu.colorTheme","Color Theme")}],eat=()=>{const[i,e]=he.useState([]);return he.useEffect(()=>{const t=Jst().map(n=>{const r=Rh.queryGlobalKeybinding(n.id);if(r!=null&&r.length){const o=Rh.convertSimpleKeybindingToString(r);return Object.assign(Object.assign({},n),{keybindings:o})}return null}).filter(Boolean);e(t)},[]),i};function tat(){const i=eat();return re.createElement("div",{className:Hn("welcome")},re.createElement(Qst,{className:"logo"}),re.createElement("h1",{className:"title"},"Molecule"),re.createElement("div",{className:"keybindings"},re.createElement("ul",null,i.map(e=>re.createElement("li",{className:"keys",key:e.id},re.createElement("span",null,e.name),re.createElement("span",null,e.keybindings.split("").join(" ")))))))}function CZ(i){const{onClickContextMenu:e,onCloseTab:t,onMoveTab:n,onSelectTab:r,onChangeEditorProps:o,onClickActions:s,onUpdateEditorIns:a,onPaneSizeChange:u,editor:d,layout:h}=i,{groups:f=[],current:p,entry:m=re.createElement(tat,null),editorOptions:v}=d||{},{groupSplitPos:b,editorGroupDirection:L}=h||{},S=E=>({onMoveTab:A=>n==null?void 0:n(A,E),onCloseTab:A=>t==null?void 0:t(A,E),onSelectTab:A=>r==null?void 0:r(A,E),onClickActions:s,onUpdateEditorIns:a,onChangeEditorProps:o,onClickContextMenu:e}),y=()=>f.length===1?re.createElement(Lre,Object.assign({editorOptions:v,currentGroup:p,group:f[0]},f[0],S(f[0].id))):f.length>1?re.createElement(_A,{sizes:b,split:L,onChange:u},f.map((E,A)=>re.createElement(pp,{key:`group-${A}${E.id}`,minSize:"220px"},re.createElement(Lre,Object.assign({editorOptions:v,currentGroup:p,group:E},E,S(E.id)))))):null;return re.createElement("div",{className:X0},p?y():m)}he.memo(CZ);function x_e(i){const{data:e={ln:0,col:0}}=i;return re.createElement("span",null,`Ln ${e.ln}, Col ${e.col}`)}he.memo(x_e);const nat=Ue.resolve(kl),iat=Ue.resolve(Wu),rat=Ue.resolve(v5),oat=nl({editor:nat,layout:iat},CZ,rat),dL=Hn("sidebar"),sat=gt(dL,"pane"),aat=gt(dL,"header"),lat=gt(dL,"title"),uat=gt(dL,"content"),cat=gt(dL,"toolbar"),D_e=he.memo(function(e){return re.createElement("header",{className:aat},re.createElement("div",{className:lat},re.createElement("h2",null,e.title)),re.createElement("div",{className:cat},e.toolbar||null))});function I_e(i){return re.createElement("div",{className:uat},i.children)}function k_e(i){const{panes:e=[],current:t}=i,n=e==null?void 0:e.map(r=>re.createElement("div",{key:r.id,"data-id":r.id,style:{visibility:r.id===t?"visible":"hidden",zIndex:r.id===t?1:-1},className:sat},r.render?r.render():null));return re.createElement("div",{className:dL},n)}var dat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},hat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let b5=class extends aa{constructor(){super(),this.onClick=e=>{console.log("onClick:",this.sidebarService)},this.sidebarService=Ue.resolve(mg)}initView(){}};b5=dat([ji(),hat("design:paramtypes",[])],b5);const fat=Ue.resolve(mg),gat=Ue.resolve(b5),pat=nl(fat,k_e,gat);function mat({className:i}){return re.createElement("img",{className:i,src:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAA
B3RJTUUH5QwPAyYJr4pYHwAAF6hJREFUeNrtnXm0VMW1xn/79L19GhUTnBAxGNfTuKKJeSsOaBxw
QF5QURzRTODwUIw4RI1RHJ5RUROcgkHFRDEaNUEBjaISUZzBDPqSOORFo0EJkmeMaIQe7qn9/uju
03WGvn243O7Tr8Neq1f3Pd236qv9naratfeuOqKqrJPOFSdtAOukubKO4A6XdQR3uKwjuMNlHcEd
Ll1pA2iFyLOl8XjmXJAtgGfpzp6uu/N62rha0vZOXybJs8VxeHqPf6Hc3LfJuZ/T4XyYNr5mS+cP
0UZPBcrEGsAoKJ9idfGQtKG1QjqfYJWNCQxSUiYa3SRtaK2QzicYfRyjZVIVUAXEoM4TaSNrhXQ+
wca9AHGWoFqZfx0P0e/ovt3/nTa0VkjHG1kAAhke7xkBOpQus1j3dv+UNqaWtf1fgeB/Zen8Ifpf
XNYR3OHSlp4sgS6eL56H4WugWXDmMbD7At2Rj1PH9mDpi3jmKpQdUX0NuqboYV3PpI2rLt52nIPl
+dI1GHOmv35VQGSu7pk9PFVcv8hvjef8DjUb1NbWThFlFz0i+7s0sdWTthui5Td0Y/SUALkKeHqY
PMuwVMEZTkB1A1QAARUwJgs6KWW11ZW2Ixj4BEbdgGvRl9JmqSIzMri8nrZeZaIHp4qrF2k7gnUn
3kPkldoQKFUP1N8pdf8hXXSyqNx7odaLAaOL0sVVX9qOYABUjgP+VvM+yT9BJug+5FPFdVj2LkTu
8l2e5cDFfDZzZ6StsnrSlkYWgLzAxqwqHoAjLt3dj+nuLEsbk49tTs8eeLojGXlND+9qa5922xK8
TvpH+rQOliU9+6LekagMR3UIkAf+gsgCNHu3fom/pN2w/28id7EV+eKxqI5C2ArVHCrLUZageq9O
zPVppFijHiyLi59F9SaUvev/SIqITGeT7im6DYW0FdfuIg/j8m7hcpTJGM0CBA3Mih0iPIXjnKwn
Zl9do/KTEiyLe0ai5j5UN0xY9PMMzB6kn+cfaSuxXUXuYhD5/EMouwfIrL6q4vsE5EPgCJ3kPpa4
jiQEy5Li9ngsBh24Ri1QHmMP98sKXtrKbDeR2WT4qPAIysjaaoFeyKXq0fsIR3bTk7KvJKkn2TLJ
cOsakVu7C0fyTOnkdFXZpvJR4WSMjqwstcpSXhLWPvtZKNbL6EA8c2vSahr2YHmucBDwYGLgRoMg
lRXs7W6p0JOmPmV+4TMUdQvIvaRj+SBVLIvo4vX8MpSaZ85U3uPm3+p1tXUrB+tk96FGdTXuwSJH
J0YevgPLMpine0akoUgAeZ4Bcn9xLgX+iMoTmMI7Mqf09bTwAPBGfkSZ3EoCYJjcck+NmY+l1rPR
RLwkGKL1S71/Ta3SKtDw0ILpvYxmyor8hRgda3me1kf1RzK38JnUMOHsUeuRFQkPxeFrhuDcbCSR
ThMQLFvU/SrOMAiAqN6FWr+MZovKwTV81WHPZOlxRqWGyeiQgK7qkRqePW2ihUQ6TWJklaJKC7/U
AqDWMFIZrr2YMlomsroW9am8G0C9VelhohQY5ewhOtxRAsaWredkOm1MsPJOnesWKInOE0HL8B3S
EpXbI3Oa8He6c8kNx/4Wr6KPOHLjXtXvsfXM20mqauyqdGQhRncIgqj2CFuR9nW7pyg4zsJG1chC
BtOTH4ORL6C6GY58iJE3cJivX16LbInDu29kjm6Ep+cAGwK/x8n8px7G3/papMxmAKsKB6DsCToU
HA8174A8zo7uk7pTg96lstDXWUB/1ueITkPXRB5PhLXxMqm0C5gX/DstAiB0LXJdXtX9s9vXLX8h
g+kpXIrK8ahmov+vIM5zOHKWju5e3GdSQHiYgTq67xvOZBFdLC2chtEpKBvFLmWQZaAX6om523ot
68bCK6h+ti6xcXqwVyiZzK56evevGmJO5Ml6tngvqkckAhC+0zJyqO7rPhBb7oLSTnje/SBDI72/
FgsuF6aOh+iZOsad3leC1kZkNhvxcWE2sJ+fZVLvpi7//TMG5Y7To1gdW96NhUPw9P7a7+voL3Ct
SrLcp99yj0yCO5knK5c9GeXNQKMijQsBKbvVZtQl91G2wegvQYYGFSR2QyrlCajJYPiBzMuf0E+c
JRaZTZaP8w+gGiLXsjeiRtE43i/8RPxGBEUnuQ+AzKj9v1WW0WD5VK8JqLyJuom9g4kI1p14jy53
FCqv1RqgITA2OAFhJhn39FiFgaCFn6E6qLw+tRrjN8SqI3AnOzPkwcK2LeQXVuX/C2UP/6azbZHA
jUlYF0dyc+GkuuV+zj0dZWZ0RBT7RqnpR+Q1HEbpWbyXFHrilB3dnddZP7sbcC0ixVqPDTVM5C0c
+Yru756k+9RxTz5SHIfhi8G1abhCaoT7v9FyFmNJLmsSlRGROxmCyhk+FvuGDrhkbc+Tdd3T/5LZ
DIjV6T706Gm5kxDnK6i8FV37avXmLoJcywbubnqmu0YnE/Qpo0OeZlN6SmPADEcZArIaw1JEF/BJ
d1EjK1IeLszH6Oi6c27AoLB6b+1zkW53Ez2Ej5rAaRDrbYXTUL2+fEOH5t7asqsXKxhwnMN0UnZe
r/XMpJvVhX1QRqE6DGQAhuWILqE79wudzP/2CX+rU3YEHOYXV6GV1NiwdegrpqpMS7FIrUc7HKyH
N3a2rzXeHxceQHWMf6FuMCB0AwTUKj/Ub7qntlTRFWn91pX5bIYxbnzvtRQX6bWVH0iFZM18qiV4
lU/5dQbwVWwHv/dqtAdXPwutwRojaexNcmsGU9xwbCkoYFyFhnFj3JagFdyA5RzGaGL+JzpUtwZr
jLQ+L/rTLAfRSHqK7/0KXTdaM7CC7tHlLcGrLK+bRhPAaeEN/L+CaRHWGGk5wbo9RVRfjK4hQ+tf
u2dX9wHZyyfJ9tmrtYaIny+/Vf+EiFcvzl/sBwgEpFJGCpLOzgaR2bE91Y8nx/Ru/yUgzgt6FEtb
glUz90ZjsmESiYmB+5+LdMU7e1qi6j4tk54o7kCRI1CGA+W8aGUpKo+i3fP0oN4zKeUBBmIKb6C6
acSYguBwTVWhtkEmo/VY95GGOO9gfSiOQTkQNVujMhB4F3gJx5mj3+h+IVF7by7MxejYMrbKxUR+
eAVxfqCnxzt8AnXcyCA+zo/F8B8YhiGSQ3U54iwB7tNzsy+vMVGsaV704wylp3gdxpT9oBqzVoWV
CJdzoHu1xpsg5bLmFceiOgdFYq1p3w9NmeiqJSvOLD0me1xDrHfkT8BwGcjmkRum5pR5DEcm64Ts
a72WdRufopD/FYbBERKr+OLW7cgfWc8drhNZWbdscPje6rNQZwroJ+pHj5x7UfcMnbJmW3iS50X/
srQzxvwC2Dxyl4bJKAN8CMc9Wg+mbmBd5pVOxTPXo+oEFFRdU0rIZSnyIBn3CD2KYt0yZ5MhX5yJ
McdHco2rKg2OBh/iME5P6H1EkBmlXVDvIWDT2F4c/lvlTVxG6Sn1PU8yk/X4R/7noAfFLwttL6GC
yrs4mTE6pfvXSQlONAfL42yFZ+ajbB5w11X9xrYfubZmPQhTuL2esx1Ax3bfAJkDEXmjljMlwSG6
3GtXIc5FHOMe2hu5AKwqTMMzx5c3Z8eMIQHsALohntwnM0tf7K1YPaX7V2TYFZXHgj7yarnW30Zn
k3V36ZVcED5YfTvQC7lKwOEDm2N65svl+a2SEpwsXPho4TGM7h/vcap8sHudnaXgOBP0kO7bey3/
N3TzVnEcno5F+ALKYAwrEf0zxnkIN3uHHk7DpYb8JL8vKo/HDvW9OSLKo8OrDHI/r0c1TtKX6T0j
wBuHslcl38wDeQflCXB+qmd0/7ZhGd8rjUe9WY3jwSFHjwqILNSL3JH9QrA82rMvxitnD/Q2V9aL
54osZay7dW/zcX+J3J5/DhPaBlKVyHKM4PcGIDNBJ/V+M/YLTnC4Kv8mRof5V6pTE2Ed19GtI/vp
RY03pCXIyfKOKb9Xe2mlUvsVXs8Gh+5hzO1petqs3MGwMrkEh85IGM8mN/ydOabZOAG4qudLGIbV
1vc2BolOffY1/10SYU1AsIyoVUjQu2Ssz9U7KxLeA9Ts3bCetRWvNCJ2PRoOCBDzXS3nuPk4AejZ
OzCPB262kC7DS8jadyOS1NSYYKNDgxVWAdgVYvVsQte1UkazRbcIKoGg18nHQmjEsf/W9eRGBjUf
qgyNEBZ2fdYl3Cc7kU4TBBsqfuOAgVVnfghf80MtLRCvqgzr3c/nIp5QYt4HtACwMcHpTHrRX6Qt
/veJcCbJi14WcPb7xkDM3Gsrzx5iWpEX7YQcAPFDcO/kIqt0Qgs2pklmWdSZYc/HEj/1aYD8RA6P
BJvP9MlajjMEh5SY+QLrd7U8qiebrjSyT9bvqRJ/3X6V91Ytaj5OwHiLIn6DcCeq6q/mOArrP5FO
E8zBmbuDBYdMdhPTo30lKiBvcWRX0yM/ehxvozwTsErjLOe4nXx+IXJ3s3ECMGXAYoy8FdCfWvaL
f9NVdRzSf7knJ8LakGAd0/UkyoKa0mIMGAiZ8RZIlQtasQYGINM1pVZ/TMQnzpip4XyZLbItIVjB
IHph1Nq3AyzVH4d7N4As0Km5furBALgnIqyIzAcVtCEXJTXjwblHx2V/2gqlAegJXU8h8n1fMZZG
fdKrf/vXFVQ+xnG+msSL1W9YL8zdCdwT76K0e3ZFn7U88RU45sSk9STLiz6UtxFnNKrLAtZddF6o
gROZh2SPb5XCfDnJ/Q4qN9VfClX+9m0K5wMcxurkFJ7hsGHueIR50aWSNaUEDFZdRlfXaL1sQKKN
Z7Cm4cI5DEHz00COjQ/zCSDvY/RSjnWvt8yulovcVPo6nncFSm3nhK208q/mI5yhp6X3DAcB4aLC
6WAuRGWjWP8zjoLejeTO1ssb++QD5fcp4D+7sB0ih6M6HGQIalajLEWcBQzMPrA2G7z6VXmzyPHP
4kGgo4GtMWYgOCsw+iKZzFyd3P1i2hh9rJewIV7+EAyjUIaBlvOiySxB9D6d6v5Pn8ptl6MMBRxm
lU5GzWiMfojDj/W4XKItkqlhnk2WP60+E5UR4KxAZLqe3ziS1FKMbUPwbflZGMYDVKJQisqxemL2
Z2lji8ULwuX5BcBIa37vIdO1v07peiptfFVpi+OE5c7CdhjGBxPaVDA6NW1sdeXKwv745PoTfBem
57tpQ7OlLQimxLY16zZgQX5aFrXng0PoYduAO7HmB2jtzscG0h4EG/f3qJjIEkZ4ue4OxbQlk3kp
EM+F6rKr9cutXqQtCNYT+AuOTA16xySPo2ekja0u5vO6nke5PeC+FVaCfDttbLb0bZk0hyGsLhyK
VM6LVlYjLEVZwMbuYzq6b8cIyy2F0cDoyqmqd+rE3tNZG5Y3mwxv5/cGORDD1pTP21yByIuoztOz
c2+utQIvLR6N8UZAZgVkb9WL6VPkTKbjsqwwEs+MQpxhGAaALgdZguvev6brX7/cNXJ03MUgKFyK
YSJoNxD1ZAnvQOYC/Ubzc5t6xXp94WAM0zC6nY8zGGBQ4C66c+fqmek+LkDOLY1Hey5D2TKI1Xdf
lhCZSda9UK9Ys+OZk+dFzy5sR5EHUd2mcsXyYNl/V9+dWXwhO7HhkULNUNh1+al4el4kMR/iD0vN
ZMbqt/t+gk+fcc6km9fzM1GdEJ88QfDGFHkdlYP1OvePSetIlhc9l80o6IIyuXGbxgjmD5WzPibw
u8INLVfatcUL8PS8YAZKTMZEbXkzmB7zsFyRwtmVr+dvQJkQrz9Lz+LreBvQBXIOiZ8flczIWl24
GWRYMOSmQWJtZVL53tOJ8qNiyx5HJ9eWdkX1u4FdiDauyOk1foz1kyh39Zak3+9Yzy0ejjIxEIEL
hGMtvdpBf0+HUVh9c9J6GhIs95SG41VOa62XIWFnfNhKLGt3assU55nL8YwEwoP22ZmR+KvVBmN2
4vJiorOn1lYEBGOmBiJwsflkMXgBVMbKqaXhSepq3INL5quRCm0S/cfPhdaDtS0i23FLaeemK+06
hgD7B0aQKu6AnVD9Ljaf+6vNxgnA2aWdUd2uVzyBeDAx8feeRFiTDNH7R3tmaAisKrReDNbofk1X
mlfcB1PpveGztnx8oYSEiEJbgBNAdL/gvEt0+ohkoGgoL04SYU1C8JbR3hvTYyPgqH0vumXTleZp
DadtMduZin5GCgStVh/rQJlOwqfKrIUYb8uoB8zCFNFlzHZSkh3s0tjPa6QLNZZCCPXeagYHUfO+
+m5a4E92pAsvfPNZRPsn5YQ2cgEBf/L7LcCq0hWcQuxRxv+RpUPbWPR1mkmklsZgdFlwuJDgHRYM
DoReUjXz/9p0pZlqHb1Y0IEebpHrL0ecvF7M+03Hqvw1urys4vJ/Q+yI6OuURDpNcqT/s7UKbYWE
nRzE9N6qoWWa/wh0Mc9E9vIEjh60FGq/7JRfT59rOk4Ah2cCy8sw2ZEVSZz+eTZZVY3E6M/jc42t
90iqbOC377J97ulm60zPcd9And8G15JWjwjs6wlkKdrTTWuSCzbMPQ28G2us1tuDbRO/Blgb50Uf
7z4MlTs7PGyEt4TEARO5pGUhP+HCiNWsElzGqf2d2obYn8m4s1oBUy+mB5xLAj00fM5WnLFaI/c5
vanxITSQ1JPlOCdgZGVk2IidIyywIo+wiXtLK5QGoOe585HMrYGh18epoffA90UM4/XiBsdD9Kfs
6d6COI/EEhjeJqD2NVkJTuIzs5PlRU/IvoboWMT5IFBh2Btkf4an6HKPaWUyOQDbZichzpyoW9Uy
Dv3T8wCVPMZ8TS/LNd9OsHV6FB7ruceAPBXrHbQ7Sk2n5Rzum5OHUZOfF31ibhFduqv/QInAlzYQ
yaNcSXduZG/HBzVRcUUucI9E5ByQlYFdeYEN6oDya7oye+llA2a3GieAXslKdsyNBLkSU3l8fcCG
oEauyEIcZ1e9MbdoTeroW8B/Zs+eGO9I0OGYynnRsBRYgOPeoyf3Lb4q1xQ+Q/lpnB+yfu4hnbR2
j6aVK9iYUuFoDAeiVsBfeRGROVziLrAnnD7V8e3Sv2PMXhizgk8MeFAvpk/PY5JJDMWsPgZkFDAM
rQT8HZagcq/e3LcRpn3SZq/JH4+RmzDaXRlWl9OVGaVnZ/+QNra6mM/KT8FwKZVnGKD8CSe3r16T
bgKBLW2RkyXT2AyPGyxyARmCZ25MG1tdzOcUP4fyXcDyf+u2mPz308ZmS1sQjBZ2Ru3DE6qOB3Zr
27RZo3ug6sRkX+yVNjRb2oPgjLM8egIdILzXtmmznnWOdCDwoqmdDR0n7UHwt7pfQpyFUR+3XJ02
tLryb+6j4LwcE89tK8xtQbCCIu5hoNNBXgf9LY5zCue5baWsAObJFOh29wOZBfImqotRxun0AW21
l6ptrOimNfD84vY4Wj4v2shAVFaAvsiA3Hy9ON1Hvbek/Z1KsFxQ2g31pmHYI/asR6SAyA9Zz720
k4nuSIJlSuF0jF4NlaB4vfztssP8DRxnjF6VfTVt3E3RRacRLOcXJqFmRmwudN1jhWU5mtulnRwU
/SVtYWT1l8hFxR2AH9QNtUXirn48dgiavzNt/M2QjiKYHm8qxnRFemogwGBnT9hpSLqPnFU4MO0m
9Ld0DMFyPhtj5KDIDobwoZ7ho3mr1xTo0fFpt6O/pT3dgH0RLe6HaiY454bi1ZGEvIjxdUDazehv
6ZgeDN6w4A6Z8AGeWHlZ1vXq53LPHiSXsEHaLelP6RyCjeSC/mxrKA4My4Rys6xrRuEjcmk3pT+l
g4boyg54tQ0su7fGDdehIRpKTOPvaTelP6WDerCzOJAnFt4fHH7uYHiLSDmb8YW1zfBoN+kYgnVa
9hWQVwPDsp+0Zi+TQmmpwSzRe9NuR39LxxBcFr0ksj85PN/aa+Gg/JVN3Zlpt6C/pbMIvnrAzxHm
RreQQuz+5loqrUGdiX1NmGtn6SiCFZTMgK+jUj4N3e61sQn7CioeKt/UGe5DaeNvhnQUwQD6fT5m
h9wB4EwDqexUsHsv9l6kP5OR0TrDvSlt3M2SjosmBRo3Ob81MB6jBwJbgwxEWYHqizgyh81y97R0
u0oaOuhkgtdJBw7R6yQo6wjucFlHcIfLOoI7XNYR3OHyf7iqrvn/gHCwAAAAJXRFWHRkYXRlOmNy
ZWF0ZQAyMDIxLTEyLTE0VDE5OjM4OjA5KzA4OjAwmXMYFgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAy
MS0xMi0xNFQxOTozODowOSswODowMOguoKoAAAARdEVYdGV4aWY6Q29sb3JTcGFjZQAxD5sCSQAA
ABJ0RVh0ZXhpZjpFeGlmT2Zmc2V0ADI2UxuiZQAAABh0RVh0ZXhpZjpQaXhlbFhEaW1lbnNpb24A
MTIwdAQi7wAAABh0RVh0ZXhpZjpQaXhlbFlEaW1lbnNpb24AMTIw6QvDmQAAACB0RVh0c29mdHdh
cmUAaHR0cHM6Ly9pbWFnZW1hZ2ljay5vcme8zx2dAAAAGHRFWHRUaHVtYjo6RG9jdW1lbnQ6OlBh
Z2VzADGn/7svAAAAGHRFWHRUaHVtYjo6SW1hZ2U6OkhlaWdodAAxMjBNp8myAAAAF3RFWHRUaHVt
Yjo6SW1hZ2U6OldpZHRoADEyMN5Wme8AAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/
slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYzOTQ4MTg4ObVTMPUAAAASdEVYdFRodW1iOjpTaXpl
ADc2MjBCQiI6F3sAAABGdEVYdFRodW1iOjpVUkkAZmlsZTovLy9hcHAvdG1wL2ltYWdlbGMvaW1n
dmlldzJfOV8xNjM4ODQ4MDI1NDI2MTE4Ml8zOF9bMF0TNSl1AAAAAElFTkSuQmCC`})}const _at=Hn("menuBar"),O4=_n(_at,"horizontal"),T_e=gt(O4,"logo"),vat=gt(T_e,"content");function bat(i){const{data:e,onClick:t,logo:n}=i,r=he.useRef(null),[o,s]=he.useState(!1),a=h=>{var f;const m=h.target.closest("li"),v=(f=m==null?void 0:m.parentElement)===null||f===void 0?void 0:f.parentElement;return!!v&&v.classList.contains(O4)};he.useEffect(()=>{const h=document.getElementsByClassName(O4)[0],f=m=>{var v,b;const L=a(m),S=m.target;if(L)o&&((b=(v=r.current)===null||v===void 0?void 0:v.dispose)===null||b===void 0||b.call(v)),setTimeout(()=>s(!o));else{const y=S.closest("li"),E=y&&h.contains(y)&&!(y!=null&&y.dataset.submenu);(!y||E)&&s(!1)}},p=m=>{if(!o)return;const v=m.target;h.contains(v)||s(!1)};return document.addEventListener("click",p),h==null||h.addEventListener("click",f),()=>{document.removeEventListener("click",p),h==null||h.removeEventListener("click",f)}},[o]);const u=o?"hover":"click",d=(h,f)=>{t==null||t(h,f),r.current.dispose()};return re.createElement("div",{className:O4},re.createElement("div",{className:T_e},n||re.createElement(mat,{className:vat})),re.createElement(Ya,{ref:r,role:"menu",mode:g0.Horizontal,trigger:u,onClick:d,style:{width:"100%"},data:e}))}const N_e=Hn("menuBar"),Cat=gt(N_e,"action");function A_e(i){const{data:e,mode:t=Ka.vertical,onClick:n,updateFocusinEle:r,logo:o}=i,s=he.useRef(null),a=(f=[])=>{const p=f.concat(),m=[...p];for(;m.length;){const v=m.pop();if(v)if(v!=null&&v.data)m.push(...v.data);else{const b=Rh.queryGlobalKeybinding(v.id)||[];b.length&&(v.keybinding=Rh.convertSimpleKeybindingToString(b))}}return p},u=(f,p)=>{n==null||n(f,p),s.current.dispose()},d=re.createElement(Ya,{role:"menu",onClick:u,style:{width:200},data:a(e)}),h=he.useCallback(f=>{r==null||r(f.target)},[]);return he.useEffect(()=>(document.body.addEventListener("focusin",h),()=>{document.body.removeEventListener("focusin",h)}),[]),t===Ka.horizontal?re.createElement(bat,{data:a(e),onClick:n,logo:o}):re.createElement("div",{className:N_e},re.createElement(HK,{ref:s,trigger:"click",className:Cat,placement:"right",overlay:d},re.createElement(dr,{type:"menu"})))}class Hh extends od{constructor(){super({id:Hh.ID,label:Hh.LABEL,title:Hh.LABEL,category:Ufe.View,alias:"Toggle Side Bar",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:Yr(el.CtrlCmd|ln.KeyB)}}),this.layoutService=Ue.resolve(Wu),this.activityBarService=Ue.resolve(_g),this.menuBarService=Ue.resolve(R0),this.sideBarService=Ue.resolve(mg)}run(e,...t){const n=t[0],{selected:r}=this.activityBarService.getState(),o=this.layoutService.toggleSidebarVisibility(),s=n||this._preActivityBar;this.activityBarService.setActive(o?void 0:s),this.sideBarService.setActive(o?void 0:s),this.menuBarService.update(Hh.ID,{icon:o?"":"check"}),o&&(this._preActivityBar=r)}}Hh.ID=zM;Hh.LABEL=ft("menu.showSideBar.label","Toggle Side Bar Visibility");class $h extends od{constructor(){super({id:$h.ID,label:$h.LABEL,title:$h.LABEL,category:Ufe.View,alias:"Toggle Panel",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:Yr(el.CtrlCmd|ln.KeyJ)}}),this.layoutService=Ue.resolve(Wu),this.menuBarService=Ue.resolve(R0)}run(e){const t=this.layoutService.togglePanelVisibility();this.menuBarService.update($h.ID,{icon:t?"":"check"})}}$h.ID=Ke.MENU_VIEW_PANEL;$h.LABEL=ft("menu.showPanel.title","Toggle Panel");var wat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},yat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let ES=class extends aa{constructor(){super(),this._focusinEle=null,this._automation={},this.updateFocusinEle=e=>{(e==null?void 0:e.id)!=pZ&&(this._focusinEle=e)},this.onClick=(e,t)=>{var n,r;const o=t.id||"";this.emit(lC.onSelect,o),(r=(n=this._automation)[o])===null||r===void 0||r.call(n),this.updateActivityBarContextMenu(o)},this.createFile=()=>{const{ACTION_QUICK_CREATE_FILE:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.undo=()=>{const{ACTION_QUICK_UNDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.redo=()=>{const{ACTION_QUICK_REDO:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.gotoQuickCommand=()=>{const{ACTION_QUICK_COMMAND:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateActivityBar=()=>{const e=this.layoutService.toggleActivityBarVisibility(),{MENU_VIEW_ACTIVITYBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.selectAll=()=>{const{ACTION_QUICK_SELECT_ALL:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e,this._focusinEle)},this.copyLineUp=()=>{const{ACTION_QUICK_COPY_LINE_UP:e}=this.builtinService.getConstants();e&&this.monacoService.commandService.executeCommand(e)},this.updateMenuBar=()=>{const e=this.layoutService.toggleMenuBarVisibility(),{MENU_VIEW_MENUBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateMenuBarMode=e=>{this.layoutService.setMenuBarMode(e)},this.updateMenuBarDataByMode=e=>{const{builtInMenuBarData:t}=this.builtinService.getModules(),{MENUBAR_MODE_HORIZONTAL:n,MENUBAR_MODE_VERTICAL:r,MENU_APPEARANCE_ID:o}=this.builtinService.getConstants();let s=n,a=r;e===Ka.vertical&&(s=r,a=n);const u=this.getMenuBarItem(t,a);this.menuBarService.remove(s),this.menuBarService.append(u,o)},this.getMenuBarItem=(e,t)=>{let n;for(n of e){if(n.id===t)return Object.assign({},n);if(Array.isArray(n.data)&&n.data.length>0){const r=this.getMenuBarItem(n.data,t);if(r)return r}}return null},this.updateStatusBar=()=>{const e=this.layoutService.toggleStatusBarVisibility(),{MENU_VIEW_STATUSBAR:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updateSideBar=()=>{this.monacoService.commandService.executeCommand(Hh.ID)},this.updateAuxiliaryBar=()=>{const e=this.layoutService.setAuxiliaryBar(n=>!n),{MENU_VIEW_AUXILIARY:t}=this.builtinService.getConstants();t&&this.menuBarService.update(t,{icon:e?"":"check"})},this.updatePanel=()=>{this.monacoService.commandService.executeCommand($h.ID)},this.menuBarService=Ue.resolve(R0),this.layoutService=Ue.resolve(Wu),this.monacoService=Ue.resolve(pg),this.builtinService=Ue.resolve(Uo),this.activityBarService=Ue.resolve(_g)}initView(){const{builtInMenuBarData:e}=this.builtinService.getModules(),{ACTION_QUICK_CREATE_FILE:t,ACTION_QUICK_UNDO:n,ACTION_QUICK_REDO:r,ACTION_QUICK_SELECT_ALL:o,ACTION_QUICK_COPY_LINE_UP:s,MENU_VIEW_ACTIVITYBAR:a,MENU_VIEW_AUXILIARY:u,MENU_VIEW_MENUBAR:d,MENU_VIEW_STATUSBAR:h,MENU_QUICK_COMMAND:f,MENU_VIEW_PANEL:p,MENUBAR_MODE_HORIZONTAL:m,MENUBAR_MODE_VERTICAL:v}=this.builtinService.getConstants();if(e){const b=this.layoutService.getMenuBarMode(),L=this.getMenuBarDataByMode(b,e);this.menuBarService.setMenus(L)}[[t,()=>this.createFile()],[n,()=>this.undo()],[r,()=>this.redo()],[o,()=>this.selectAll()],[s,()=>this.copyLineUp()],[a,()=>this.updateActivityBar()],[d,()=>this.updateMenuBar()],[h,()=>this.updateStatusBar()],[f,()=>this.gotoQuickCommand()],[zM,()=>this.updateSideBar()],[u,()=>this.updateAuxiliaryBar()],[p,()=>this.updatePanel()],[m,()=>this.updateMenuBarMode(Ka.horizontal)],[v,()=>this.updateMenuBarMode(Ka.vertical)]].forEach(([b,L])=>{b&&(this._automation[b]=L)}),this.subscribe(lC.onChangeMode,this.updateMenuBarDataByMode)}getFilteredMenuBarData(e,t){const n=[];return Array.isArray(e)&&e.forEach(r=>{if(t.includes(r.id))return;const o=Object.assign({},r);Array.isArray(r.data)&&r.data.length>0&&(o.data=this.getFilteredMenuBarData(r.data,t)),n.push(o)}),n}getMenuBarDataByMode(e,t){const{MENUBAR_MODE_VERTICAL:n,MENUBAR_MODE_HORIZONTAL:r}=this.builtinService.getConstants(),o=[];return e===Ka.horizontal?o.push(r):e===Ka.vertical&&o.push(n),this.getFilteredMenuBarData(t,o)}updateActivityBarContextMenu(e){const{MENU_VIEW_MENUBAR:t,CONTEXT_MENU_MENU:n}=this.builtinService.getConstants();n&&e===t&&this.activityBarService.toggleContextMenuChecked(n)}};ES=wat([ji(),yat("design:paramtypes",[])],ES);const Sat=Ue.resolve(R0),Lat=Ue.resolve(ES),Ere=nl(Sat,A_e,Lat);class d0 extends od{constructor(){super({id:d0.ID,label:d0.LABEL,title:d0.LABEL,alias:"Color Theme",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:Yr(el.CtrlCmd|ln.KeyK)}}),this.colorThemeService=Ue.resolve(sC)}run(e){const t=e.get(yc),n=this.colorThemeService.getThemes(),r=this.colorThemeService.getColorTheme(),o=[...Eat(n)];let s;const a=(u,d)=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=void 0;const h=u&&u.id!==void 0?u.id:r.id;this.colorThemeService.setTheme(h)},d?0:200)};return new Promise(u=>{let d=!1;const h=o.findIndex(p=>p.id===r.id),f=t.createQuickPick();f.items=o,f.placeholder=C("themes.selectTheme","Select Color Theme (Up/Down Keys to Preview)"),f.activeItems=[o[h]],f.canSelectMany=!1,f.onDidAccept(p=>{const m=f.activeItems[0];m&&a(m,!0),d=!0,f.hide(),u()}),f.onDidChangeActive(p=>a(p[0],!1)),f.onDidHide(()=>{d||(a(r,!0),u())}),f.show()})}}d0.ID=Ke.ACTION_SELECT_THEME;d0.LABEL=C("selectTheme.label","Color Theme");function Eat(i,e){const t=o=>({id:o.id,label:o.label,description:o.description}),n=(o,s)=>{var a;return(a=o.label)===null||a===void 0?void 0:a.localeCompare(s.label)},r=i.map(t).sort(n);return r.length>0&&e&&r.unshift({type:"separator",label:e}),r}const fj=Zr.as(G0.Quickaccess);function xat(i){Dat(i.prefix),fj.registerQuickAccessProvider(i)}function Dat(i){const e=fj.providers.findIndex(t=>t.prefix===i);e>-1&&fj.providers.splice(e,1)}var Iat=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};class Hf extends i_e{constructor(){super({showAlias:!1,noResultsPick:{label:C("noCommandResults","No matching commands"),commandId:""}},Hf.services.get(An),Hf.services.get(Sr),Hf.services.get(kr),Hf.services.get(yg),Hf.services.get(fo)),this.editorService=Ue.resolve(kl)}get activeTextEditorControl(){var e;return(e=this.editorService)===null||e===void 0?void 0:e.editorInstance}static get services(){return Ue.resolve(pg).services}getCommandPicks(e,t){return Iat(this,void 0,void 0,function*(){return t.isCancellationRequested?[]:[...this.getCodeEditorCommandPicks(),...this.getGlobalCommandPicks(e)].map(n=>Object.assign(Object.assign({},n),{buttons:[{iconClass:"codicon codicon-gear",tooltip:C("configure keybinding","Configure Keybinding")}],trigger:()=>U1.CLOSE_PICKER}))})}getGlobalCommandPicks(e){var t;const n=[],r=ia.getMenuItems(Mt.CommandPalette);for(const o of r){let s=(typeof o.command.title=="string"?o.command.title:o.command.title.value)||o.command.id;const a=typeof o.command.category=="string"?o.command.category:(t=o.command.category)===null||t===void 0?void 0:t.value;a&&(s=C("commandWithCategory","{0}: {1}",a,s));const u=typeof o.command.title!="string"?o.command.title.original:void 0,d=a&&o.command.category&&typeof o.command.category!="string"?o.command.category.original:void 0,h=u&&a?d?`${d}: ${u}`:`${a}: ${u}`:u;n.push({commandId:o.command.id,commandAlias:h,label:Vq(s)})}return n}}Hf.PREFIX=">";xat({ctor:Hf,prefix:Hf.PREFIX,placeholder:C("commandsQuickAccessPlaceholder","Type the name of a command to run."),helpEntries:[{description:C("commandsQuickAccess","Show and Run Commands"),needsEditor:!1}]});class jM extends od{constructor(){super({id:jM.ID,label:JA.quickCommandActionLabel,alias:"Command Palette",title:{value:C("showTriggerActions","Command Palette"),original:"Command Palette"},f1:!1,keybinding:{weight:mc.WorkbenchContrib,when:void 0,primary:el.CtrlCmd|el.Shift|ln.KeyP,secondary:[ln.F1]}})}run(e){e.get(yc).quickAccess.show(Hf.PREFIX)}}jM.ID=Ke.ACTION_QUICK_COMMAND;var kat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Tat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let C5=class extends aa{constructor(){super(),this.onClick=(e,t)=>{this.emit(aC.OnClick,e,t)},this.onChange=(e,t)=>{this.emit(aC.OnChange,e,t)},this.onSelectColorTheme=()=>{this.monacoService.commandService.executeCommand(d0.ID)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{ACTION_QUICK_COMMAND:r="",ACTION_QUICK_ACCESS_SETTINGS:o="",ACTION_SELECT_THEME:s="",CONTEXT_MENU_MENU:a="",CONTEXT_MENU_EXPLORER:u="",CONTEXT_MENU_SEARCH:d="",CONTEXT_MENU_HIDE:h}=this.builtinService.getConstants();switch(n){case a:{this.menuBarController.updateMenuBar(),this.activityBarService.toggleContextMenuChecked(n);break}case u:case d:{this.activityBarService.toggleBar(n),this.activityBarService.toggleContextMenuChecked(n);break}case h:{this.menuBarController.updateActivityBar();break}case r:{this.gotoQuickCommand();break}case o:{this.settingsService.openSettingsInEditor();break}case s:{this.onSelectColorTheme();break}}},this.activityBarService=Ue.resolve(_g),this.settingsService=Ue.resolve(cC),this.monacoService=Ue.resolve(pg),this.menuBarController=Ue.resolve(ES),this.builtinService=Ue.resolve(Uo)}initView(){const{activityBarData:e,contextMenuData:t}=this.builtinService.getModules();e&&this.activityBarService.add(e),t&&this.activityBarService.addContextMenu(t)}gotoQuickCommand(){this.monacoService.commandService.executeCommand(jM.ID)}};C5=kat([ji(),Tat("design:paramtypes",[])],C5);var Nat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Aat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let w5=class extends aa{constructor(){super(),this.initView=()=>{},this.onClick=e=>{this.auxiliaryService.setActive(this.auxiliaryService.getState().current===e?void 0:e),this.emit(BO.onTabClick,e)},this.auxiliaryService=Ue.resolve(yS)}};w5=Nat([ji(),Aat("design:paramtypes",[])],w5);const KM=Hn("notification"),Oat=gt(KM,"header"),Mat=gt(KM,"body"),Rat=gt(KM,"item"),Pat=_n(KM,"close");function O_e(i){const{data:e=[],actionBar:t=[],showNotifications:n,onActionBarClick:r,onCloseNotification:o}=i,a=e.length>0?ft("notification.title","notifications"):ft("notification.title.no","no new notifications"),u=n?"block":"none";return re.createElement("div",{className:mn(KM,aae),style:{display:u}},re.createElement("header",{className:Oat},re.createElement("span",null,a),re.createElement(eM,{data:t,onClick:r})),re.createElement("div",{className:Mat},e.map(d=>re.createElement("div",{className:Rat,key:d.id},re.createElement(dr,{title:"Clear Notification",onClick:()=>o==null?void 0:o(d),className:Pat,type:"close"}),typeof d.render=="function"?d.render(d):d.value))))}he.memo(O_e);const M_e=Hn("bell"),Fat=_n(M_e,"active");function Bat(i){const{data:e=[],onClick:t,showNotifications:n,id:r,actionBar:o,onActionBarClick:s,onCloseNotification:a}=i,u=he.useRef(),h=e.length>0?"bell-dot":"bell";return he.useEffect(()=>{const f=ey(`.${Hn("workbench")}`);f&&(u.current=u.current||document.createElement("div"),f.appendChild(u.current),uF(re.createElement(O_e,{id:r,data:e,actionBar:o,showNotifications:n,onActionBarClick:s,onCloseNotification:a}),u.current))},[r,e,o,n,s,a]),re.createElement(dr,{className:mn(M_e,n&&Fat),onClick:t,type:h})}const Wat=he.memo(Bat);var Vat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Hat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let gj=class extends aa{constructor(){super(),this.onCloseNotification=e=>{this.notificationService.remove(e.id)},this.onClick=(e,t)=>{this.toggleNotifications()},this.onActionBarClick=(e,t)=>{const n=t.id,{NOTIFICATION_CLEAR_ALL_ID:r,NOTIFICATION_HIDE_ID:o}=this.builtinService.getConstants();n===r?this.notificationService.clear():n===o&&this.toggleNotifications()},this.notificationService=Ue.resolve(LS),this.statusBarService=Ue.resolve(vg),this.builtinService=Ue.resolve(Uo)}toggleNotifications(){this.notificationService.toggleNotification()}initView(){const{builtInNotification:e,NOTIFICATION_CLEAR_ALL:t,NOTIFICATION_HIDE:n}=this.builtinService.getModules();if(e){const r=nl(this.notificationService,Wat),o=Object.assign(Object.assign({},e),{actionBar:[t,n].filter(Boolean),render:()=>re.createElement(r,{onClick:this.onClick,onActionBarClick:this.onActionBarClick,onCloseNotification:this.onCloseNotification})});this.notificationService.setState(Object.assign({},o)),this.statusBarService.add(o,Lp.right)}}};gj=Vat([ji(),Hat("design:paramtypes",[])],gj);const $at=Hn("output");function zat(i){const{id:e,data:t="",onUpdateEditorIns:n}=i;return re.createElement("div",{className:$at},re.createElement(sY,{key:e,options:{value:t,readOnly:!0,lineDecorationsWidth:0,lineNumbers:"off",minimap:{enabled:!1},automaticLayout:!0},editorInstanceRef:r=>{n==null||n(r)}}))}var Uat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},jat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let y5=class extends aa{constructor(){super(),this.onTabChange=e=>{e&&this.panelService.setActive(e),this.emit(Ep.onTabChange,e)},this.onClose=e=>{e&&this.emit(Ep.onTabClose,e)},this.onToolbarClick=(e,t)=>{const{PANEL_TOOLBOX_CLOSE:n,PANEL_TOOLBOX_RESIZE:r}=this.builtinService.getConstants();t.id===n?this.monacoService.commandService.executeCommand($h.ID):t.id===r&&this.panelService.toggleMaximize(),this.emit(Ep.onToolbarClick,e,t)},this.panelService=Ue.resolve(uC),this.monacoService=Ue.resolve(pg),this.builtinService=Ue.resolve(Uo)}initView(){const{builtInOutputPanel:e,builtInPanelToolbox:t,builtInPanelToolboxResize:n}=this.builtinService.getModules();if(e){const o=e;o.renderPane=s=>re.createElement(zat,Object.assign({onUpdateEditorIns:a=>{s.outputEditorInstance=a}},s)),this.panelService.add(o),this.panelService.setActive(o.id)}const r=[n,t].filter(Boolean);this.panelService.setState({toolbox:r})}};y5=Uat([ji(),jat("design:paramtypes",[])],y5);function Kat(i){const{data:e={errors:0,warnings:0,infos:0}}=i;return re.createElement(re.Fragment,null,re.createElement(dr,{type:"error"}),` ${e.errors} `,re.createElement(dr,{type:"warning"}),` ${e.warnings} `,re.createElement(dr,{type:"info"}),` ${e.infos}`)}const Gat=re.memo(Kat),R_e=Hn("problems"),wZ=gt(R_e,"treeview"),P_e=gt(wZ,"treeNode"),qat=gt(P_e,"badge"),F_e=gt(wZ,"treeLeaf"),xre=gt(F_e,"subInfo");function Yat(i){const{data:e,onSelect:t}=i;if(!(e!=null&&e.length))return re.createElement("div",{style:{margin:"0 18px",userSelect:"none"}},ft("panel.problems.empty","No problems have been detected in the workspace."));const n=r=>{switch(r){case Jh.Error:return re.createElement(dr,{type:"error"});case Jh.Warning:return re.createElement(dr,{type:"warning"});case Jh.Info:return re.createElement(dr,{type:"info"});default:return""}};return re.createElement(GS,null,re.createElement("div",{className:R_e},re.createElement(NB,{className:wZ,data:e,renderTitle:({children:r,name:o,value:s},a,u)=>u?re.createElement("span",{className:F_e},n(s.status),re.createElement("span",null,s.message),re.createElement("span",{className:xre},s.code),re.createElement("span",{className:xre},"[",s.startLineNumber,","," ",s.startColumn,"]")):re.createElement("span",{className:P_e},s.code,re.createElement("span",{className:qat},r==null?void 0:r.length)),onSelect:t,onRightClick:r=>r.preventDefault()})))}const Zat=he.memo(Yat);var Xat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Qat=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let pj=class extends aa{constructor(){super(),this.onClick=(e,t)=>{this.showHideProblems()},this.onSelect=e=>{this.emit(HO.onSelect,e)},this.panelService=Ue.resolve(uC),this.statusBarService=Ue.resolve(vg),this.monacoService=Ue.resolve(pg),this.layoutService=Ue.resolve(Wu),this.problemsService=Ue.resolve(zO),this.builtinService=Ue.resolve(Uo)}showHideProblems(){const{panel:e}=this.layoutService.getState(),{current:t}=this.panelService.getState(),{builtInPanelProblems:n}=this.builtinService.getModules();n&&((e.hidden||(t==null?void 0:t.id)===n.id)&&this.monacoService.commandService.executeCommand($h.ID),this.panelService.open(n))}initView(){const{builtInStatusProblems:e,builtInPanelProblems:t}=this.builtinService.getModules();if(e&&(e.render=o=>re.createElement(Gat,Object.assign({},o)),e.onClick=this.onClick,this.statusBarService.add(e,Lp.left)),t){const o=nl(this.problemsService,Zat),s=t;s.renderPane=()=>re.createElement(o,{onSelect:this.onSelect}),this.panelService.add(s),this.panelService.setActive(s.id)}const{PROBLEM_MODEL_ID:n,PROBLEM_MODEL_NAME:r}=this.builtinService.getConstants();this.problemsService.setState({id:n,name:r})}};pj=Xat([ji(),Qat("design:paramtypes",[])],pj);function B_e({locale:i}){const e=he.useRef(null),t=()=>{window.location.reload()};return he.useEffect(()=>{var n;(n=e.current)===null||n===void 0||n.focus()},[]),re.createElement("div",{style:{lineHeight:"1.5"}},re.createElement("div",{style:{direction:"ltr",width:440,whiteSpace:"normal",textAlign:"left"}},re.createElement("p",{style:{fontWeight:"bold"}},ft("notification.locale.title","")),re.createElement("p",null,ft("notification.locale.description",""))),re.createElement("div",{style:{marginBottom:2}},re.createElement(vb,{ref:e,style:{width:150,margin:"0 0 0 auto"},onClick:t},ft("notification.locale.button",""))))}re.memo(B_e);var Jat=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},elt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let mj=class extends aa{constructor(){super(),this.onChangeSettings=wr.debounce(e=>{this.settingsService.update(e),this.emit(VO.OnChange,e)},600),this.editorService=Ue.resolve(kl),this.settingsService=Ue.resolve(cC),this.localeService=Ue.resolve(of),this.notificationService=Ue.resolve(LS),this.builtinService=Ue.resolve(Uo)}initView(){const{SETTING_ID:e}=this.builtinService.getConstants();this.editorService.onUpdateTab(t=>{var n;if(t.id===e){const r=this.settingsService.normalizeFlatObject(((n=t.data)===null||n===void 0?void 0:n.value)||"");this.onChangeSettings(r)}}),this.localeService.onChange((t,n)=>{this.notifyLocaleChanged(t,n)})}notifyLocaleChanged(e,t){const{SETTING_ID:n}=this.builtinService.getConstants(),r={id:n,value:t,render(o){return re.createElement(B_e,{key:t.id,locale:t.name})}};this.notificationService.getState().showNotifications||this.notificationService.toggleNotification(),this.notificationService.add([r])}};mj=Jat([ji(),elt("design:paramtypes",[])],mj);var tlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},nlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let S5=class extends aa{constructor(){super(),this.onClick=(e,t)=>{this.emit(WO.onClick,e,t)},this.onContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id,{STATUS_BAR_HIDE_ID:r}=this.builtinService.getConstants();switch(n){case r:this.menuBarController.updateStatusBar();break}},this.menuBarController=Ue.resolve(ES),this.statusBarService=Ue.resolve(vg),this.builtinService=Ue.resolve(Uo)}initView(){const{STATUS_EDITOR_INFO:e,CONTEXT_MENU_HIDE_STATUS_BAR:t}=this.builtinService.getModules(),n=wr.cloneDeep(this.statusBarService.getState().rightItems),r=wr.cloneDeep(this.statusBarService.getState().contextMenu||[]);e&&n.push(Object.assign(Object.assign({},e),{render:o=>re.createElement(x_e,Object.assign({},o))})),t&&r.push(t),this.statusBarService.setState({rightItems:n,contextMenu:r})}};S5=tlt([ji(),nlt("design:paramtypes",[])],S5);var ilt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},rlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let L5=class extends aa{constructor(){super(),this.onPaneSizeChange=e=>{this.layoutService.setPaneSize(e)},this.onHorizontalPaneSizeChange=e=>{this.layoutService.setHorizontalPaneSize(e)},this.onWorkbenchDidMount=()=>{this.layoutService.emit(p5.OnWorkbenchDidMount)},this.layoutService=Ue.resolve(Wu)}initView(){}};L5=ilt([ji(),rlt("design:paramtypes",[])],L5);const olt=Hn(zM),slt=Hn(Unt,olt),E5=Hn(jnt),alt=_n(E5,"input"),llt=_n(E5,"editable"),GM=Hn(Knt),C7=gt(GM,"item"),ult=gt(GM,"group"),clt=gt(C7,"fileName"),dlt=gt(C7,"filePath"),Dre=_n(C7,"active"),hlt=gt(GM,"close"),flt=gt(GM,"file"),glt=i=>{const{activePanelKeys:e,data:t=[],headerToolBar:n,onClick:r,onActionsContextMenuClick:o,onCollapseChange:s,onToolbarClick:a}=i;return re.createElement("div",{className:slt},re.createElement(D_e,{title:ft("sidebar.explore.title","Explorer"),toolbar:re.createElement(tM,{data:[n],onClick:r,onContextMenuClick:o})}),re.createElement(I_e,null,re.createElement(sle,{data:t,activePanelKeys:e,onCollapseChange:s,onToolbarClick:a})))};var plt=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const mlt=i=>{const e=[...i];let t=!1;for(;e.length;){const n=e.pop();if(n!=null&&n.isEditable){t=!0;break}else e.push(...(n==null?void 0:n.children)||[])}return t},_lt=re.forwardRef((i,e)=>{const t=he.useRef(null);return he.useLayoutEffect(()=>{if(t.current){const n=(i.defaultValue||"").lastIndexOf(".");t.current.selectionStart=0,t.current.selectionEnd=n>0?n:(i.defaultValue||"").length}},[]),re.createElement("input",Object.assign({},i,{ref:t}))}),vlt=i=>{var e;const{folderTree:t={},entry:n,panel:r,onUpdateFileName:o,onSelectFile:s,onDropTree:a,onClickContextMenu:u,onRightClick:d,onLoadData:h,createTreeNode:f,onExpandKeys:p}=i,m=plt(i,["folderTree","entry","panel","onUpdateFileName","onSelectFile","onDropTree","onClickContextMenu","onRightClick","onLoadData","createTreeNode","onExpandKeys"]),{data:v=[],folderPanelContextMenu:b=[],expandKeys:L,loadedKeys:S,current:y}=t,E=he.useRef(null),A=he.useRef(),N=XO(),V=mlt(v),R=(z,O)=>{var Y;u==null||u(O),(Y=A.current)===null||Y===void 0||Y.hide()},M=()=>G5({anchor:ey(`.${E5}`),render:()=>re.createElement(Ya,{role:"menu",onClick:R,data:b})}),K=(z,O)=>{u==null||u(z,O),N==null||N.hide()},X=(z,O)=>{if(z.target.nodeName!=="INPUT"){z.preventDefault();const Y=(d==null?void 0:d(O))||[];Y.length&&(N==null||N.show(cF(z),()=>re.createElement(Ya,{role:"menu",onClick:(fe,ne)=>K(ne,O),data:Y})))}},$=(z,O)=>{const Y=z.value;o==null||o(Object.assign(Object.assign({},O),{name:Y}))},D=(z,O)=>{$(z.target,O)},T=(z,O)=>{(z.keyCode===13||z.keyCode===27)&&$(z.target,O)},F=z=>{const{isEditable:O,name:Y}=z;return O?re.createElement(_lt,{role:"input",className:alt,type:"text",defaultValue:Y,ref:E,onKeyDown:fe=>T(fe,z),autoComplete:"off",autoFocus:!0,onBlur:fe=>D(fe,z),onClick:fe=>fe.stopPropagation()}):Y},B=()=>{s==null||s()},U=(z,O)=>{a==null||a(z,O)},G=()=>{f==null||f("RootFolder")};he.useEffect(()=>(b.length>0&&(A.current=M()),()=>{var z;(z=A.current)===null||z===void 0||z.dispose()}),[v.length]);const Z=re.createElement("div",{"data-content":r.id},n?re.createElement(re.Fragment,null,n):re.createElement("div",{style:{padding:"10px 5px"}},"you have not yet opened a folder",re.createElement(vb,{onClick:G},"Add Folder")));return v.length?re.createElement(GS,{isShowShadow:!0},re.createElement("div",{"data-content":r.id,style:{height:"100%"}},re.createElement(NB,Object.assign({activeKey:y==null?void 0:y.id,expandKeys:L,loadedKeys:S,data:((e=v[0])===null||e===void 0?void 0:e.children)||[],className:mn(E5,V&&llt),draggable:!V,onDropTree:U,onSelect:s,onTreeClick:B,onRightClick:X,renderTitle:F,onLoadData:h,onExpand:p},m)))):Z},blt=he.memo(vlt);var Clt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},wlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let xS=class extends aa{constructor(){super(),this.getContextMenu=e=>{var t;const n=Xh(((t=this.folderTreeService.getState().folderTree)===null||t===void 0?void 0:t.contextMenu)||[]),r=this.folderTreeService.getFileContextMenu(),o=this.folderTreeService.getFolderContextMenu(),{ROOT_FOLDER_CONTEXT_MENU:s}=this.builtinService.getModules();switch(e.fileType){case Js.File:{n.unshift(...r);break}case Js.Folder:{n.unshift(...o);break}case Js.RootFolder:return o.concat(s||[])}return n},this.createTreeNode=(e,t)=>{var n;if(typeof t>"u"){const r=this.folderTreeService.getState(),{data:o,current:s}=(r==null?void 0:r.folderTree)||{},a=typeof(s==null?void 0:s.id)>"u"?(n=o==null?void 0:o[0])===null||n===void 0?void 0:n.id:s==null?void 0:s.id;this.emit(bo.onCreate,e,a)}else this.emit(bo.onCreate,e,t)},this.onClickContextMenu=(e,t)=>{const n=e.id,{RENAME_COMMAND_ID:r,DELETE_COMMAND_ID:o,NEW_FILE_COMMAND_ID:s,NEW_FOLDER_COMMAND_ID:a,OPEN_TO_SIDE_COMMAND_ID:u}=this.builtinService.getConstants();switch(n){case r:{const{id:d}=t;this.onRename(d);break}case o:{const{id:d}=t;this.onDelete(d);break}case s:{const{id:d}=t;this.createTreeNode(Js.File,d);break}case a:{const{id:d}=t;this.createTreeNode(Js.Folder,d);break}case u:{this.onSelectFile(t);break}default:this.onContextMenuClick(e,t)}},this.onRightClick=e=>{const t=this.getContextMenu(e);return this.emit(bo.onRightClick,e,t),t},this.onDropTree=(e,t)=>{this.emit(bo.onDrop,e,t)},this.onUpdateFileName=e=>{this.emit(bo.onUpdateFileName,e)},this.onSelectFile=e=>{this.folderTreeService.setActive(e==null?void 0:e.id),e&&!e.isEditable&&e.fileType===Js.File&&this.emit(bo.onSelectFile,e)},this.onContextMenuClick=(e,t)=>{this.emit(bo.onContextMenuClick,e,t)},this.onRename=e=>{this.emit(bo.onRename,e)},this.onDelete=e=>{this.emit(bo.onDelete,e)},this.onLoadData=e=>this.count(bo.onLoadData)?(this.folderTreeService.setLoadedKeys([...this.folderTreeService.getLoadedKeys(),e.id.toString()]),new Promise((n,r)=>{const o=s=>{this.folderTreeService.update(s),n()};this.emit(bo.onLoadData,e,o)})):Promise.resolve(),this.onExpandKeys=e=>{this.emit(bo.onExpandKeys,e)},this.folderTreeService=Ue.resolve(SS),this.builtinService=Ue.resolve(Uo)}initView(){const{FILE_CONTEXT_MENU:e,BASE_CONTEXT_MENU:t,COMMON_CONTEXT_MENU:n,FOLDER_PANEL_CONTEXT_MENU:r}=this.builtinService.getModules();e&&this.folderTreeService.setFileContextMenu(e),t&&this.folderTreeService.setFolderContextMenu(t),this.folderTreeService.setState({folderTree:{contextMenu:n||[],current:null,folderPanelContextMenu:r||[],data:[],expandKeys:[]}})}};xS=Clt([ji(),wlt("design:paramtypes",[])],xS);const ylt=i=>{var e;const{current:t,groups:n,groupToolbar:r,contextMenu:o=[],headerContextMenu:s,panel:a,onSelect:u,onSaveGroup:d,onContextMenu:h,onCloseGroup:f,onClose:p,onToolbarClick:m}=i,v=he.useRef(null),b=he.useRef(null);if(he.useLayoutEffect(()=>{var M,K,X;if((((M=b.current)===null||M===void 0?void 0:M.scrollHeight)||0)>$P-$g){const D=(K=v.current)===null||K===void 0?void 0:K.querySelector(`.${Dre}`);if(D){const T=D.offsetTop;(X=b.current)===null||X===void 0||X.scrollTo(T)}}},[(t==null?void 0:t.id)&&((e=t.tab)===null||e===void 0?void 0:e.id)]),!n||!n.length)return null;const L=NS(),S=(M,K)=>{p==null||p(K.id,M.id)},y=(M,K)=>{var X;(M.id!==(t==null?void 0:t.id)||K.id!==((X=t==null?void 0:t.tab)===null||X===void 0?void 0:X.id))&&(u==null||u(K.id,M.id))},E=(M,K,X)=>{L.hide(),h==null||h(M,K.id,X)},A=(M,K,X)=>{M.preventDefault(),L.show(cF(M),()=>re.createElement(Ya,{role:"menu",onClick:($,D)=>E(D,K,X),data:o}))},N=(M,K)=>{M.preventDefault();const X=s||o;L.show(cF(M),()=>re.createElement(Ya,{role:"menu",onClick:($,D)=>E(D,K),data:X}))},V=(M,K)=>{var X;const{target:$}=M,D=(X=K.data)===null||X===void 0?void 0:X[0];$.nextElementSibling&&D&&(u==null||u(D.id,K.id),$.nextElementSibling.focus())},R=(M,K,X)=>{switch(M.stopPropagation(),K.id){case Ke.EXPLORER_TOGGLE_CLOSE_GROUP_EDITORS:f==null||f(X.id);break;case Ke.EXPLORER_TOGGLE_SAVE_GROUP:d==null||d(X.id);break;default:m==null||m(K,X.id);break}};return re.createElement(GS,{ref:b,isShowShadow:!0},re.createElement("div",{className:GM,ref:v,"data-content":a.id},n.map((M,K)=>{var X;return re.createElement(re.Fragment,{key:K},n.length!==1&&re.createElement("div",{className:ult,onClick:$=>V($,M),onContextMenu:$=>N($,M),key:K},ft("sidebar.explore.openEditor.group","Group",(K+1).toString()),r&&re.createElement(tM,{data:r,onClick:($,D)=>R($,D,M)})),(X=M.data)===null||X===void 0?void 0:X.map($=>{var D,T,F,B,U;const G=M.id===(t==null?void 0:t.id)&&$.id===((D=t==null?void 0:t.tab)===null||D===void 0?void 0:D.id);return re.createElement("div",{title:((T=$.data)===null||T===void 0?void 0:T.path)&&`${(F=$.data)===null||F===void 0?void 0:F.path}/${$.name}`,className:mn(C7,G&&Dre),tabIndex:0,key:`${K}_${$.id}`,onClick:()=>y(M,$),onContextMenu:Z=>A(Z,M,$)},re.createElement(dr,{className:hlt,onClick:()=>S(M,$),type:"close"}),re.createElement(dr,{className:flt,type:((B=$.data)===null||B===void 0?void 0:B.icon)||$.icon}),re.createElement("span",{className:clt},$.name),re.createElement("span",{className:dlt},(U=$.data)===null||U===void 0?void 0:U.path))}))})))},Slt=Ue.resolve(SS),Llt=Ue.resolve(xS),Elt=nl(Slt,blt,Llt);var xlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Dlt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let _j=class extends aa{constructor(){super(),this.onClick=(e,t)=>{this.emit(Kc.onClick,e,t)},this.onActionsContextMenuClick=(e,t)=>{const n=t==null?void 0:t.id;n&&this.explorerService.togglePanel(n)},this.onCollapseChange=e=>{this.emit(Kc.onCollapseChange,e)},this.onToolbarClick=(e,t)=>{var n,r,o,s;const a=e.id,{NEW_FILE_COMMAND_ID:u,NEW_FOLDER_COMMAND_ID:d,REMOVE_COMMAND_ID:h,COLLAPSE_COMMAND_ID:f,EXPLORER_TOGGLE_CLOSE_ALL_EDITORS:p,EXPLORER_TOGGLE_SAVE_ALL:m,EXPLORER_TOGGLE_VERTICAL:v}=this.builtinService.getConstants();switch(a){case u:{(r=(n=this.folderTreeController).createTreeNode)===null||r===void 0||r.call(n,Js.File);break}case d:{(s=(o=this.folderTreeController).createTreeNode)===null||s===void 0||s.call(o,Js.Folder);break}case h:{this.emit(Kc.onRemovePanel,t);break}case f:{this.emit(Kc.onCollapseAllFolders);break}case p:{this.emit(Eo.onCloseAll);break}case m:{this.emit(Eo.onSaveAll);break}case v:{this.emit(Eo.onSplitEditorLayout);break}default:this.emit(Kc.onPanelToolbarClick,t,a)}},this.renderFolderTree=e=>re.createElement(Elt,{panel:e}),this.activityBarService=Ue.resolve(_g),this.sidebarService=Ue.resolve(mg),this.explorerService=Ue.resolve(Wp),this.folderTreeController=Ue.resolve(xS),this.builtinService=Ue.resolve(Uo)}initView(){const e={onClick:this.onClick,onCollapseChange:this.onCollapseChange,onActionsContextMenuClick:this.onActionsContextMenuClick,onToolbarClick:this.onToolbarClick},t=nl(this.explorerService,glt),n=this.builtinService.getConstants().EXPLORER_ACTIVITY_ITEM;if(!n)return;const r={id:n,title:"EXPLORER",render(){return re.createElement(t,Object.assign({},e))}},{builtInExplorerActivityItem:o,builtInExplorerFolderPanel:s,builtInExplorerHeaderToolbar:a}=this.builtinService.getModules();a&&this.explorerService.setState({headerToolBar:a}),o&&s&&(this.activityBarService.add(o,!0),this.sidebarService.add(r,!0),this.explorerService.addPanel(Object.assign(Object.assign({},s),{renderPanel:this.renderFolderTree})))}};_j=xlt([ji(),Dlt("design:paramtypes",[])],_j);var Ilt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},klt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},Tlt=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};let vj=class extends aa{constructor(){super(),this.onContextMenu=(e,t,n)=>{const{EDITOR_MENU_CLOSE:r,EDITOR_MENU_CLOSE_OTHERS:o,EDITOR_MENU_CLOSE_SAVED:s,EDITOR_MENU_CLOSE_ALL:a}=this.builtinService.getConstants();switch(e.id){case r:this.onClose(n==null?void 0:n.id,t);break;case o:this.emit(Eo.onCloseOthers,n,t);break;case s:this.emit(Eo.onCloseSaved,t);break;case a:this.emit(Eo.onCloseAll,t);break;default:this.emit(Eo.onContextMenu,e,n,t);break}},this.onClose=(e,t)=>{this.emit(Eo.onClose,e,t)},this.onSelect=(e,t)=>{this.emit(Eo.onSelect,e,t)},this.onCloseGroup=e=>{this.emit(Eo.onCloseAll,e)},this.onSaveGroup=e=>{this.emit(Eo.onSaveAll,e)},this.onToolbarClick=(e,t)=>{this.emit(Eo.onToolbarClick,e,t)},this.editService=Ue.resolve(kl),this.explorerService=Ue.resolve(Wp),this.builtinService=Ue.resolve(Uo)}initView(){const e=nl(this.editService,ylt),{builtInExplorerEditorPanel:t,builtInEditorTreeContextMenu:n,builtInEditorTreeHeaderContextMenu:r}=this.builtinService.getModules();if(t){const{groupToolbar:o}=t,s=Tlt(t,["groupToolbar"]),a=n||[],u=r||[];this.explorerService.addPanel(Object.assign(Object.assign({},s),{renderPanel:d=>re.createElement(e,{panel:d,contextMenu:a,headerContextMenu:u,groupToolbar:o,onClose:this.onClose,onSelect:this.onSelect,onCloseGroup:this.onCloseGroup,onSaveGroup:this.onSaveGroup,onContextMenu:this.onContextMenu,onToolbarClick:this.onToolbarClick})}))}}};vj=Ilt([ji(),klt("design:paramtypes",[])],vj);var Nlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Alt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let bj=class extends aa{constructor(){super(),this.onClick=e=>{},this.explorerService=Ue.resolve(Wp),this.builtinService=Ue.resolve(Uo)}initView(){const{builtInExplorerOutlinePanel:e}=this.builtinService.getModules();e&&this.explorerService.addPanel(e)}};bj=Nlt([ji(),Alt("design:paramtypes",[])],bj);const Olt=_n(gt(Hn("search"),"treeNode"),"empty"),Mlt=_n(gt(Hn("search"),"treeNode"),"match"),Rlt=_n(gt(Hn("search"),"treeNode"),"delete"),Plt=_n(gt(Hn("search"),"treeNode"),"replace"),Flt=gt(Hn("search"),"tree"),Blt=i=>{const{data:e=[],onSelect:t,renderTitle:n}=i;return re.createElement(NB,{draggable:!1,className:Flt,data:e,renderTitle:n,onSelect:t,onRightClick:r=>r.preventDefault()})},Wlt=he.memo(Blt),Vlt=({value:i="",replaceValue:e,searchAddons:t,replaceAddons:n,validationInfo:r,headerToolBar:o,result:s,toggleAddon:a,onResultClick:u,validateValue:d,setValidateInfo:h,onSearch:f,getSearchIndex:p,setSearchValue:m,setReplaceValue:v,onChange:b,toggleMode:L})=>{const S=(R,M)=>{console.log("onClick:",R,M)},y=(R=[])=>{const[M,K]=R;m==null||m(M),v==null||v(K),b==null||b(M||"",K||"")},E=R=>{L==null||L(R)},A=(R,M,K)=>{const{name:X=""}=R;if(!K)return X;const $=p?p(X,i):-1,D=X.substr(0,$),T=X.substr($,i.length),F=X.substr($+i.length);return $>-1?re.createElement("span",null,D,re.createElement("span",{className:mn(Mlt,e&&Rlt)},T),e&&re.createElement("span",{className:Plt},e),F):X},N=(R=[])=>{const[M,K]=R;d==null||d(M||"",X=>{X?h==null||h({type:"error",text:X.message}):f==null||f(M||"",K||"")})},V=R=>{R.isLeaf&&(u==null||u(R,s))};return re.createElement("div",{className:Hn("search-pane","sidebar")},re.createElement(D_e,{title:ft("sidebar.search.title","Search"),toolbar:re.createElement(tM,{data:o||[],onClick:S})}),re.createElement(I_e,null,re.createElement(Qhe,{values:[i,e],addons:[t,n],validationInfo:r,onChange:y,onSearch:N,onAddonClick:a,onButtonClick:E}),i&&s.length===0?re.createElement("div",{className:Olt},"未找到结果，请重新修改您的搜索条件"):re.createElement(Wlt,{data:s,renderTitle:A,onSelect:V})))};var Hlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},$lt=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let Cj=class extends aa{constructor(){super(),this.validateValue=(e,t)=>{const{isRegex:n}=this.searchService.getState();if(n)try{return new RegExp(e),t()}catch(r){if(r instanceof Error)return t(r)}return t()},this.getSearchIndex=(e,t="")=>{let n=-1;const{isCaseSensitive:r,isWholeWords:o,isRegex:s}=this.searchService.getState(),a=r,u=o,d=r&&o,h=!r&&!o;try{if(s)a&&(n=e.search(new RegExp(t))),u&&(n=e.search(new RegExp("\\b"+t+"\\b","i"))),d&&(n=e.search(new RegExp("\\b"+t+"\\b"))),h&&(n=e.toLowerCase().search(new RegExp(t,"i")));else{if(a&&(n=e.indexOf(t)),u){const f=new RegExp("\\b"+(t==null?void 0:t.toLowerCase())+"\\b");n=e.toLowerCase().search(f)}d&&(n=e.search(new RegExp("\\b"+t+"\\b"))),h&&(n=e.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))}}catch(f){console.error(f)}return n},this.setValidateInfo=e=>{this.searchService.setValidateInfo(e)},this.setSearchValue=e=>{this.searchService.setSearchValue(e)},this.setReplaceValue=e=>{this.searchService.setReplaceValue(e)},this.toggleAddon=e=>{const t=e==null?void 0:e.id,{SEARCH_CASE_SENSITIVE_COMMAND_ID:n,SEARCH_WHOLE_WORD_COMMAND_ID:r,SEARCH_REGULAR_EXPRESSION_COMMAND_ID:o,SEARCH_PRESERVE_CASE_COMMAND_ID:s,SEARCH_REPLACE_ALL_COMMAND_ID:a}=this.builtinService.getConstants();switch(t){case n:{this.searchService.toggleCaseSensitive();break}case r:{this.searchService.toggleWholeWord();break}case o:{this.searchService.toggleRegex();break}case s:{this.searchService.togglePreserveCase();break}case a:{this.emit(Vh.onReplaceAll);break}default:console.log("no addon")}},this.toggleMode=e=>{this.searchService.toggleMode(e)},this.onChange=(e="",t="")=>{this.emit(Vh.onChange,e,t)},this.onSearch=(e="",t="")=>{const{isRegex:n,isCaseSensitive:r,isWholeWords:o,preserveCase:s}=this.searchService.getState();this.emit(Vh.onSearch,e,t,{isRegex:n,isCaseSensitive:r,isWholeWords:o,preserveCase:s})},this.onResultClick=(e,t)=>{this.emit(Vh.onResultClick,e,t)},this.activityBarService=Ue.resolve(_g),this.sidebarService=Ue.resolve(mg),this.searchService=Ue.resolve($O),this.builtinService=Ue.resolve(Uo)}initView(){const{builtInSearchActivityItem:e,builtInHeaderToolbar:t,builtInSearchAddons:n,builtInReplaceAddons:r}=this.builtinService.getModules();if(e){const o=nl(this.searchService,Vlt,this),s={id:e.id,title:"SEARCH",render(){return re.createElement(o,null)}};this.searchService.setState({headerToolBar:t||[],searchAddons:n||[],replaceAddons:r||[]}),this.sidebarService.add(s),this.activityBarService.add(e)}}};Cj=Hlt([ji(),$lt("design:paramtypes",[])],Cj);class cb extends od{constructor(){super({id:cb.ID,label:cb.LABEL,title:cb.LABEL,alias:"Open Settings (JSON)",precondition:void 0,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:Yr(el.CtrlCmd|ln.Comma)}}),this.settingsService=Ue.resolve(cC)}run(e){this.settingsService.openSettingsInEditor()}}cb.ID=Ke.ACTION_QUICK_ACCESS_SETTINGS;cb.LABEL=C("quickAccessSettings.label","Open Settings (JSON)");class db extends od{constructor(){super({id:db.ID,label:db.LABEL,title:db.LABEL,alias:"Select Display Language",precondition:void 0,f1:!0,keybinding:{when:void 0,primary:el.CtrlCmd|el.Shift|ln.KeyL}})}get localeService(){return Ue.resolve(of)}run(e){const t=e.get(yc),n=this.localeService.getLocales(),r=this.localeService.getCurrentLocale(),o=n.map(u=>({id:u.id,label:u.name,description:u.description}));let s;const a=(u,d)=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=void 0,u&&u.id&&this.localeService.setCurrentLocale(u.id)},d?0:200)};return new Promise(u=>{let d=!1;const h=o.findIndex(p=>p.id===(r==null?void 0:r.id)),f=t.createQuickPick();f.items=o,f.placeholder=ft("locale.select","Select Display Language (Up/Down Keys to Preview)"),f.activeItems=[o[h]],f.canSelectMany=!1,f.onDidAccept(p=>{const m=f.activeItems[0];m&&a(m,!0),d=!0,f.hide(),u()}),f.onDidHide(()=>{d||(a(r,!0),u())}),f.show()})}}db.ID=Ke.ACTION_SELECT_LOCALE;db.LABEL=ft("select.locale","Select Display Language");class $f extends od{constructor(){super({id:$f.ID,alias:$f.DESC,title:{value:$f.LABEL,original:$f.DESC},f1:!0,label:$f.LABEL,keybinding:{weight:mc.BuiltinExtension,when:void 0,primary:el.CtrlCmd|ln.KeyA}}),this.editorService=Ue.resolve(kl)}selectEditorAll(){const e=this.editorService.editorInstance;e&&(e.focus(),e.setSelection(e.getModel().getFullModelRange()))}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;r&&this.isTextdom(r)&&!r.className.includes("monaco")?r.select():this.selectEditorAll()}}$f.ID=Ke.ACTION_QUICK_SELECT_ALL;$f.DESC="Select All";$f.LABEL=ft("menu.selectAll","Select All");class zf extends od{constructor(){super({id:zf.ID,title:{value:zf.LABEL,original:zf.DESC},label:zf.LABEL,alias:zf.DESC,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:el.Alt|el.Shift|ln.PageUp}}),this.editorService=Ue.resolve(kl)}run(){var e;(e=this.editorService.editorInstance)===null||e===void 0||e.getAction(Ke.ACTION_QUICK_COPY_LINE_UP).run()}}zf.ID=Ke.ACTION_QUICK_COPY_LINE_UP;zf.LABEL=ft("menu.copyLineUp","Copy Line Up");zf.DESC="Copy Line Up";class Uf extends od{constructor(){super({id:Uf.ID,title:{value:Uf.LABEL,original:Uf.DESC},label:Uf.LABEL,alias:Uf.DESC,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:el.CtrlCmd|ln.KeyZ}}),this.editorService=Ue.resolve(kl)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;if(r&&this.isTextdom(r)&&!r.className.includes("monaco"))document.execCommand("undo");else{const o=this.editorService.editorInstance;if(o){const s=this.editorService.getState().current;if(s){const a=this.editorService.getTabById(s.activeTab,s.id);o==null||o.focus(),Cl.getModel(sS.parse(a.id.toString())).undo()}}}}}Uf.ID=Ke.ACTION_QUICK_UNDO;Uf.LABEL=ft("menu.undo","Undo");Uf.DESC="Undo";class jf extends od{constructor(){super({id:jf.ID,title:{value:jf.LABEL,original:jf.DESC},label:jf.LABEL,alias:jf.DESC,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:el.CtrlCmd|el.Shift|ln.KeyZ}}),this.editorService=Ue.resolve(kl)}isTextdom(e){return typeof e.selectionStart=="number"}run(e,...t){const r=t[0]||document.activeElement;if(r&&this.isTextdom(r)&&!r.className.includes("monaco"))document.execCommand("redo");else{const o=this.editorService.editorInstance;if(o){const s=this.editorService.getState().current;if(s){const a=this.editorService.getTabById(s.activeTab,s.id);o==null||o.focus(),Cl.getModel(sS.parse(a.id.toString())).redo()}}}}}jf.ID=Ke.ACTION_QUICK_REDO;jf.LABEL=ft("menu.redo","Redo");jf.DESC="Redo";class Kf extends od{constructor(){super({id:Kf.ID,title:{value:Kf.LABEL,original:Kf.DESC},label:Kf.LABEL,alias:Kf.DESC,f1:!0,keybinding:{when:void 0,weight:mc.WorkbenchContrib,primary:el.CtrlCmd|ln.KeyN}}),this.folderTreeController=Ue.resolve(xS)}run(){var e,t;(t=(e=this.folderTreeController).createTreeNode)===null||t===void 0||t.call(e,Js.File)}}Kf.ID=Ke.ACTION_QUICK_CREATE_FILE;Kf.LABEL=ft("menu.newFile","New File");Kf.DESC="New File";var zlt=globalThis&&globalThis.__decorate||function(i,e,t,n){var r=arguments.length,o=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(s=i[a])&&(o=(r<3?s(o):r>3?s(e,t,o):s(e,t))||o);return r>3&&o&&Object.defineProperty(e,t,o),o},Ult=globalThis&&globalThis.__metadata||function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)};let wj=class extends aa{constructor(){super(),this.extensionService=Ue.resolve(UO),this.builtinService=Ue.resolve(Uo)}initView(){const{quickAcessViewAction:e,quickSelectColorThemeAction:t,quickAccessSettingsAction:n,quickSelectLocaleAction:r,quickTogglePanelAction:o,quickSelectAllAction:s,quickCopyLineUpAction:a,quickUndoAction:u,quickRedoAction:d,quickCreateFileAction:h}=this.builtinService.getModules();[[e,jM],[t,d0],[n,cb],[r,db],[zM,Hh],[o,$h],[s,$f],[a,zf],[u,Uf],[d,jf],[h,Kf]].forEach(([f,p])=>{f&&this.extensionService.registerAction(p)})}};wj=zlt([ji(),Ult("design:paramtypes",[])],wj);const FC=Hn(m_e),jlt=gt(FC,"container"),Klt=gt(FC,"normal"),Glt=gt(FC,"global"),w7=gt(FC,"item"),qlt=_n(w7,"checked"),Ylt=_n(w7,"disabled"),Zlt=gt(FC,"label"),Xlt=gt(FC,"indicator");function W_e(i){const{checked:e=!1,disabled:t=!1,title:n="",data:r={},render:o,icon:s,id:a,onClick:u,contextMenu:d=[],className:h,onContextMenuClick:f}=i,m=XO({render:()=>re.createElement(Ya,{onClick:v,role:"menu",data:d.map(S=>{if(S.id){const y=Rh.queryGlobalKeybinding(S.id.toString());y&&(S.keybinding=Rh.convertSimpleKeybindingToString(y))}return S})})}),v=(S,y)=>{f==null||f(S,y),m==null||m.hide()},b=function(S){u&&u(i.id,i),d.length>0&&(m==null||m.show({x:S.pageX,y:S.pageY}))},L=re.createElement(dr,{type:s,className:Zlt,title:n},(o==null?void 0:o())||null);return re.createElement("li",{id:a.toString(),onClick:b,className:mn(h,w7,e?qlt:"",t?Ylt:""),"data-id":r.id},L,e?re.createElement("div",{className:Xlt}):null)}function V_e(i){const{data:e=[],contextMenu:t=[],selected:n,onClick:r,onChange:o,onContextMenuClick:s}=i,a=(b,L)=>{r&&r(b,L),o&&L.type!=="global"&&o(n,b)},u=e.filter(b=>b.type!=="global"&&!b.hidden),d=e.filter(b=>b.type==="global"&&!b.hidden),h=(b,L)=>re.createElement(W_e,Object.assign({key:b.id},b,{onContextMenuClick:s,onClick:a,"data-index":L,checked:n===b.id})),p=XO({render:()=>re.createElement(Ya,{role:"menu",onClick:m,data:t})}),m=he.useCallback((b,L)=>{s==null||s(b,L),p==null||p.hide()},[t]),v=b=>{if(b.preventDefault(),b.stopPropagation(),!p)return;const S=document.elementsFromPoint(b.pageX,b.pageY).find(y=>y.classList.contains(w7));if(S){const y=S.getBoundingClientRect(),E=t.concat(),A=t.find(N=>N.id===(S==null?void 0:S.id));A&&E.unshift({id:S.id,icon:"check",name:A.name},{type:"divider"}),p.show({x:y.x+y.width/2,y:y.y+y.height},()=>re.createElement(Ya,{role:"menu",onClick:m,data:E}))}else p.show({x:b.pageX,y:b.pageY})};return re.createElement("div",{className:FC,onContextMenu:v,id:m_e},re.createElement("div",{className:jlt},re.createElement(GS,{className:Klt},re.createElement("ul",null,u.map(h))),re.createElement("ul",{className:Glt},d.map(h))))}const Qlt=Ue.resolve(_g),Jlt=Ue.resolve(C5),eut=nl(Qlt,V_e,Jlt),y7=Hn("statusBar"),tut=gt(y7,"left-items"),nut=gt(y7,"right-items"),iut=gt(y7,"item");function rut(i,e){return i.sortIndex!==void 0&&e.sortIndex!==void 0?i.sortIndex-e.sortIndex:0}var out=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};function H_e(i){const{className:e,onClick:t,id:n,name:r,data:o,render:s,style:a,role:u,title:d}=i,h=out(i,["className","onClick","id","name","data","render","style","role","title"]),f=mn(iut,e),p={onClick:function(v){t==null||t(v,i)}},m=_b(h);return re.createElement("div",Object.assign({className:f,style:a,role:u,title:d,id:n.toString()},m),re.createElement("a",Object.assign({tabIndex:-1,title:r},p),s?s(i):r))}function $_e(i){const{leftItems:e=[],contextMenu:t=[],onContextMenuClick:n,onClick:r,rightItems:o=[]}=i;let s;const a=he.useCallback((h,f)=>{n==null||n(h,f),s==null||s.dispose()},[t]),u=()=>re.createElement(Ya,{role:"menu",onClick:a,data:t});he.useEffect(()=>(t.length>0&&(s=G5({anchor:ey(`#${sre}`),render:u})),function(){s==null||s.dispose()}));const d=h=>h.sort(rut).map(f=>re.createElement(H_e,Object.assign({key:f.id},f,{onClick:bK(f.onClick,r)})));return re.createElement("div",{className:y7,id:sre},re.createElement("div",{className:tut},d(e)),re.createElement("div",{className:nut},d(o)))}const sut=Ue.resolve(vg),aut=Ue.resolve(S5),lut=nl(sut,$_e,aut),S7=Hn("panel"),uut=gt(S7,"header"),cut=gt(S7,"toolbar"),dut=gt(S7,"container");function z_e(i){var e;const{data:t,current:n,toolbox:r,onTabChange:o,onToolbarClick:s,onClose:a}=i;let u=r||[];n&&n.toolbox&&(u=n.toolbox.concat(u));const d=typeof(n==null?void 0:n.renderPane)=="function"?(e=n==null?void 0:n.renderPane)===null||e===void 0?void 0:e.call(n,n):n==null?void 0:n.renderPane,h=t==null?void 0:t.sort((f,p)=>f.sortIndex&&p.sortIndex?f.sortIndex-p.sortIndex:0);return re.createElement("div",{className:S7},re.createElement("div",{className:uut},re.createElement(gY,{activeTab:n==null?void 0:n.id,data:h,onSelectTab:o,onCloseTab:a}),re.createElement(eM,{className:cut,data:u,onClick:s})),re.createElement("div",{className:dut,tabIndex:0},d))}const hut=Ue.resolve(uC),fut=Ue.resolve(y5),gut=nl(hut,z_e,fut),U_e=Hn("auxiliaryBar"),put=gt(U_e,"container"),j_e=gt(U_e,"tabs"),K_e=gt(j_e,"tab"),mut=_n(K_e,"active");function _ut({children:i}){return re.createElement("div",{className:put},i)}function vut({mode:i,data:e,current:t,onClick:n}){return i==="default"?null:re.createElement("ul",{className:j_e},e==null?void 0:e.map(r=>re.createElement("li",{key:r.key,className:mn(K_e,t===r.key&&mut),onClick:()=>n==null?void 0:n(r.key)},r.title)))}const G_e=Ue.resolve(yS),but=Ue.resolve(w5),Cut=nl(G_e,_ut),wut=nl(G_e,vut,but),yut=Hn("mainBench"),L7=Hn("workbench"),Sut=Hn("compositeBar"),Lut=mn(j5,tae()),Eut=_n(L7,"with-horizontal-menuBar"),xut=_n(L7,"with-hidden-statusBar"),Dut=gt(L7,"display-activityBar"),Iut=Ue.resolve(L5),kut=Ue.resolve(Wu);function q_e(i){const{activityBar:e,auxiliaryBar:t,menuBar:n,panel:r,sidebar:o,statusBar:s,onPaneSizeChange:a,onWorkbenchDidMount:u,onHorizontalPaneSizeChange:d,splitPanePos:h,horizontalSplitPanePos:f}=i,p=()=>r.hidden?["100%",0]:r.panelMaximized?[0,"100%"]:f,m=()=>!o.hidden&&!t.hidden?h:o.hidden?t.hidden?[0,"100%",0]:[0,"auto",h[2]]:[h[0],"auto",0],v=()=>!o.hidden&&!t.hidden?!0:o.hidden?t.hidden?!1:[!1,!0]:[!0,!1],b=N=>{const V=[];V[0]=o.hidden?Number(h[0]):N[0],V[2]=t.hidden?Number(h[2]):N[2],V[1]=N.reduce((R,M)=>R+M,0)-V[0]-V[2],a==null||a(V)},L=!n.hidden&&n.mode===Ka.vertical,S=!n.hidden&&n.mode===Ka.horizontal,y=S?Eut:null,E=s.hidden?xut:null,A=mn(L7,y,E);return he.useEffect(()=>{u==null||u()},[]),re.createElement("div",{id:pZ,className:Lut,tabIndex:0},re.createElement("div",{className:A},re.createElement(s2,{visible:S},re.createElement(Ere,{mode:Ka.horizontal})),re.createElement("div",{className:yut},re.createElement("div",{className:Sut},re.createElement(s2,{visible:L},re.createElement(Ere,{mode:Ka.vertical})),re.createElement(s2,{visible:!e.hidden,className:Dut},re.createElement(eut,null))),re.createElement(_A,{sizes:m(),split:"vertical",showSashes:v(),onChange:b},re.createElement(pp,{minSize:170,maxSize:"80%"},re.createElement(pat,null)),re.createElement(_A,{sizes:p(),showSashes:!r.hidden&&!r.panelMaximized,allowResize:[!0,!1],split:"horizontal",onChange:d},re.createElement(pp,{minSize:"10%",maxSize:"80%"},re.createElement(oat,null)),re.createElement(gut,null)),re.createElement(pp,{minSize:100,maxSize:"80%"},re.createElement(Cut,null))),re.createElement(wut,null))),re.createElement(s2,{visible:!s.hidden},re.createElement(lut,null)))}const Tut=nl(kut,q_e,Iut),Nut=Ue.resolve(of),Aut=Ue.resolve(Wu),Out=Ue.resolve(_g),Mut=Ue.resolve(yS),Rut=Ue.resolve(Wp),Put=Ue.resolve(SS),Fut=Ue.resolve(m5),But=Ue.resolve($O),Wut=Ue.resolve(mg),Vut=Ue.resolve(R0),Hut=Ue.resolve(kl),$ut=Ue.resolve(vg),zut=Ue.resolve(uC),Uut=Ue.resolve(LS),jut=Ue.resolve(zO),Kut=Ue.resolve(sC),Gut=Ue.resolve(cC),qut=Ue.resolve(Uo),Yut=Ue.resolve(UO),Zut=Ue.resolve(pg),on=Object.freeze(Object.defineProperty({__proto__:null,ActivityBar:V_e,ActivityBarItem:W_e,get ActivityBarService(){return _g},get AuxiliaryBarService(){return yS},BuiltInColorTheme:h2,get BuiltinService(){return Uo},get ColorThemeService(){return sC},DEFAULT_THEME_CLASS_NAME:A4,Editor:CZ,EditorGroup:E_e,get EditorService(){return kl},get EditorTreeService(){return m5},get ExplorerService(){return Wp},get ExtensionService(){return UO},get FolderTreeService(){return SS},get LayoutService(){return Wu},get LocaleService(){return of},MenuBar:A_e,get MenuBarService(){return R0},get NotificationService(){return LS},Panel:z_e,get PanelService(){return uC},get ProblemsService(){return zO},get SearchService(){return $O},get SettingsService(){return cC},Sidebar:k_e,get SidebarService(){return mg},StatusBar:$_e,get StatusBarService(){return vg},StatusItem:H_e,Workbench:q_e,activityBar:Out,auxiliaryBar:Mut,builtin:qut,colorTheme:Kut,component:Uze,editor:Hut,editorTree:Fut,event:cbe,explorer:Rut,extension:Yut,folderTree:Put,i18n:Nut,layout:Aut,localize:ft,menuBar:Vut,model:Fnt,monaco:Gze,monacoService:Zut,notification:Uut,panel:zut,problems:jut,react:dbe,search:But,settings:Gut,sidebar:Wut,statusBar:$ut},Symbol.toStringTag,{value:"Module"})),Xut={id:"ExtendsFolderTree",name:"Extends FolderTree",activate(){on.folderTree.onRename(i=>{on.folderTree.update({id:i,isEditable:!0})}),on.folderTree.onUpdateFileName(i=>{const{id:e,name:t,location:n}=i;if(t){const r=(n==null?void 0:n.split("/"))||[];r[r.length-1]=t;const o=r.join("/");on.folderTree.update(Object.assign(Object.assign({},i),{id:e,location:o,isEditable:!1}));const s=on.editor.getGroupIdByTab(e.toString());if(!!s||s===0){const u=on.editor.getTabById(e.toString(),s),d={id:e.toString(),name:t},h=u==null?void 0:u.data;h&&h.path&&(d.data=Object.assign(Object.assign({},h),{path:o})),on.editor.updateTab(d)}}else{const r=on.folderTree.get(e);r!=null&&r.name?on.folderTree.update({id:e,isEditable:!1}):on.folderTree.remove(e)}}),on.folderTree.onExpandKeys(i=>{on.folderTree.setExpandKeys(i)})},dispose(){}},Qut={id:"ExtendsActivityBar",name:"Extend The Default ActivityBar",activate(i){on.activityBar.onChange((e,t)=>{if(t!==e){on.activityBar.setActive(t),on.sidebar.setActive(t);const{sidebar:n}=on.layout.getState();n.hidden&&i.executeCommand(Hh.ID,t)}else i.executeCommand(Hh.ID,t)})},dispose(){}},Jut={id:"ExtendsPanel",name:"Extends Panel",activate(i){on.panel.onTabClose(e=>{const{data:t=[],current:n}=on.panel.getState();if((n==null?void 0:n.id)===e){const r=t.findIndex(a=>a.id===e),o=r===t.length-1?t.length-2:r+1,s=t[o];s&&on.panel.open(s)}on.panel.remove(e)})},dispose(){}},ect=function(i){on.explorer.removePanel(i.id)},tct={id:"ExtendsExplorer",name:"Extends Explorer",activate(){on.explorer.onRemovePanel(ect)},dispose(){}},nct={id:"ExtendsEditorTree",name:"Extends Editor Tree",dispose(){},activate(){on.editorTree.onSelect((i,e)=>{on.editor.setActive(e,i)}),on.editorTree.onClose((i,e)=>{on.editor.closeTab(i,e)}),on.editorTree.onCloseOthers((i,e)=>{on.editor.closeOther(i,e)}),on.editorTree.onCloseAll(i=>{if(i)on.editor.closeAll(i);else{const{groups:e}=on.editor.getState();e==null||e.forEach(t=>{on.editor.closeAll(t.id)})}})}},ict="theme-defaults",rct="%displayName%",oct="%description%",sct=["Themes"],act="1.0.0",lct="vscode",uct="MIT",cct={vscode:"*"},dct={themes:[{id:"Default Dark+",label:"Dark+ (default dark)",uiTheme:"vs-dark",path:"./themes/dark_plus.json"},{id:"Default Light+",label:"Light+ (default light)",uiTheme:"vs",path:"./themes/light_plus.json"},{id:"Visual Studio Dark",label:"Dark (Visual Studio)",uiTheme:"vs-dark",path:"./themes/dark_vs.json"},{id:"Visual Studio Light",label:"Light (Visual Studio)",uiTheme:"vs",path:"./themes/light_vs.json"},{id:"Default High Contrast",label:"High Contrast",uiTheme:"hc-black",path:"./themes/hc_black.json"}],iconThemes:[{id:"vs-minimal",label:"Minimal (Visual Studio Code)",path:"./fileicons/vs_minimal-icon-theme.json"}]},hct={name:ict,displayName:rct,description:oct,categories:sct,version:act,publisher:lct,license:uct,engines:cct,contributes:dct},fct="vscode://schemas/color-theme",gct="Dark Default Colors",pct={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#1E1E1E","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editor.selectionHighlightBackground":"#ADD6FF26","editorGroupHeader.tabsBackground":"#252526","editorIndentGuide.activeBackground":"#707070","editorIndentGuide.background":"#404040","icon.foreground":"#C5C5C5","input.placeholderForeground":"#A6A6A6","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#5A1D1D","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#063B49","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#352A05","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#094771","list.dropBackground":"#383B3D","list.focusOutline":"#007FD4","list.hoverBackground":"#2A2D2E","list.inactiveSelectionBackground":"#37373D","menu.background":"#252526","menu.foreground":"#CCCCCC","menu.selectionBackground":"#094771","menu.separatorBackground":"#BBBBBB","minimapSlider.activeBackground":"#bfbfbf66","minimapSlider.background":"#79797980","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#393939","panelTitle.activeForeground":"#E7E7E7","panelTitle.inactiveForeground":"#e7e7e799","problemsErrorIcon.foreground":"#F48771","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#CCA700","sash.hoverBorder":"#007FD4","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#ccc3","sideBarTitle.foreground":"#BBBBBB","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#1E1E1E","tab.activeForeground":"#fff","tab.border":"#252526","tab.inactiveBackground":"#2d2d2d","tab.inactiveForeground":"#ffffff80","tree.indentGuidesStroke":"#585858"},mct=!0,_ct={$schema:fct,name:gct,colors:pct,semanticHighlighting:mct},vct="vscode://schemas/color-theme",bct="Light Default Colors",Cct={"activityBar.foreground":"#fff","activityBar.inactiveForeground":"#ffffff66","activityBarBadge.background":"#007ACC","diffEditor.insertedTextBackground":"#9bb95533","diffEditor.removedTextBackground":"#ff000033","editor.background":"#FFFFFF","editor.findMatchHighlightBackground":"#EA5C0055","editor.foreground":"#000000","editor.inactiveSelectionBackground":"#E5EBF1","editor.selectionHighlightBackground":"#ADD6FF80","editorIndentGuide.activeBackground":"#939393","editorIndentGuide.background":"#D3D3D3","editorSuggestWidget.background":"#F3F3F3","icon.foreground":"#424242","input.placeholderForeground":"#767676","inputOption.activeBackground":"#007fd466","inputValidation.errorBackground":"#F2DEDE","inputValidation.errorBorder":"#BE1100","inputValidation.infoBackground":"#D6ECF2","inputValidation.infoBorder":"#007acc","inputValidation.warningBackground":"#F6F5D2","inputValidation.warningBorder":"#B89500","list.activeSelectionBackground":"#0060C0","list.focusOutline":"#0090F1","list.hoverBackground":"#E8E8E8","list.inactiveSelectionBackground":"#E4E6F1","menu.selectionBackground":"#0060C0","menu.separatorBackground":"#888888","minimapSlider.activeBackground":"#00000099","minimapSlider.background":"#64646480","minimapSlider.hoverBackground":"#64646480","molecule.welcomeBackground":"#fff","panelTitle.activeForeground":"#424242","panelTitle.inactiveForeground":"#424242bf","problemsErrorIcon.foreground":"#E51400","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#BF8803","sash.hoverBorder":"#0090F1","searchEditor.textInputBorder":"#CECECE","settings.numberInputBorder":"#CECECE","settings.textInputBorder":"#CECECE","sideBarSectionHeader.background":"#0000","sideBarSectionHeader.border":"#61616130","sideBarTitle.foreground":"#6F6F6F","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFF","tab.activeBackground":"#fffffe","tab.activeForeground":"#333333","tab.border":"#f3f3f3","tab.inactiveBackground":"#ececec","tab.inactiveForeground":"#333333b3","tree.indentGuidesStroke":"#a9a9a9"},wct=!0,yct={$schema:vct,name:bct,colors:Cct,semanticHighlighting:wct},Sct="vscode://schemas/color-theme",Lct="High Contrast Default Colors",Ect={"editor.background":"#000000","editor.foreground":"#FFFFFF","editorIndentGuide.activeBackground":"#FFFFFF","editorIndentGuide.background":"#FFFFFF","sash.hoverBorder":"#F38518","sideBarTitle.foreground":"#FFFFFF","statusBarItem.remoteBackground":"#00000000","tree.indentGuidesStroke":"#a9a9a9"},xct=[{settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#FFFFFF",background:"#000000"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#7ca668"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#b46695"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold"}},{scope:"markup.heading",settings:{foreground:"#6796e6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{name:"brackets of XML/HTML tags",scope:["punctuation.definition.tag"],settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#ffffff"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#d4d4d4"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:"support.function.git-rebase",settings:{foreground:"#d4d4d4"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"coloring of the TS this",scope:"variable.language.this",settings:{foreground:"#569cd6"}}],Dct=!0,Ict={$schema:Sct,name:Lct,colors:Ect,settings:xct,semanticHighlighting:Dct},kct="vscode://schemas/color-theme",Tct="Dark+ (default dark)",Nct="./dark_vs.json",Act=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#51B6C4"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"entity.name.label",settings:{foreground:"#C8C8C8"}}],Oct={$schema:kct,name:Tct,include:Nct,tokenColors:Act},Mct="vscode://schemas/color-theme",Rct="Dark (Visual Studio)",Pct="./dark_defaults.json",Fct=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#569cd6"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}}],Bct={$schema:Mct,name:Rct,include:Pct,tokenColors:Fct},Wct="vscode://schemas/color-theme",Vct="Light+ (default light)",Hct="./light_vs.json",$ct=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member","entity.name.operator.custom-literal"],settings:{foreground:"#795E26"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.other.attribute","entity.name.scope-resolution","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#267f99"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#267f99"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator","entity.name.operator"],settings:{foreground:"#AF00DB"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#001080"}},{name:"Constants and enums",scope:["variable.other.constant","variable.other.enummember"],settings:{foreground:"#328267"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#001080"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#d16969"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#811f3f"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#000000"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#ff0000"}},{scope:"constant.character",settings:{foreground:"#0000ff"}},{scope:"constant.character.escape",settings:{foreground:"#ff0000"}},{scope:"entity.name.label",settings:{foreground:"#000000"}}],zct={$schema:Wct,name:Vct,include:Hct,tokenColors:$ct},Uct="vscode://schemas/color-theme",jct="Light (Visual Studio)",Kct="./light_defaults.json",Gct=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#000000ff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"meta.diff.header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#008000"}},{scope:"constant.language",settings:{foreground:"#0000ff"}},{scope:["constant.numeric","entity.name.operator.custom-literal.number","variable.other.enummember","keyword.operator.plus.exponent","keyword.operator.minus.exponent"],settings:{foreground:"#098658"}},{scope:"constant.regexp",settings:{foreground:"#811f3f"}},{name:"css tags in selectors, xml tags",scope:"entity.name.tag",settings:{foreground:"#800000"}},{scope:"entity.name.selector",settings:{foreground:"#800000"}},{scope:"entity.other.attribute-name",settings:{foreground:"#ff0000"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#800000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#000080"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#800000"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#098658"}},{scope:"markup.deleted",settings:{foreground:"#a31515"}},{scope:"markup.changed",settings:{foreground:"#0451a5"}},{scope:["punctuation.definition.quote.begin.markdown","punctuation.definition.list.begin.markdown"],settings:{foreground:"#0451a5"}},{scope:"markup.inline.raw",settings:{foreground:"#800000"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#800000"}},{scope:["meta.preprocessor","entity.name.function.preprocessor"],settings:{foreground:"#0000ff"}},{scope:"meta.preprocessor.string",settings:{foreground:"#a31515"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#098658"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#0451a5"}},{scope:"storage",settings:{foreground:"#0000ff"}},{scope:"storage.type",settings:{foreground:"#0000ff"}},{scope:["storage.modifier","keyword.operator.noexcept"],settings:{foreground:"#0000ff"}},{scope:["string","entity.name.operator.custom-literal.string","meta.embedded.assembly"],settings:{foreground:"#a31515"}},{scope:["string.comment.buffered.block.pug","string.quoted.pug","string.interpolated.pug","string.unquoted.plain.in.yaml","string.unquoted.plain.out.yaml","string.unquoted.block.yaml","string.quoted.single.yaml","string.quoted.double.xml","string.quoted.single.xml","string.unquoted.cdata.xml","string.quoted.double.html","string.quoted.single.html","string.unquoted.html","string.quoted.single.handlebars","string.quoted.double.handlebars"],settings:{foreground:"#0000ff"}},{scope:"string.regexp",settings:{foreground:"#811f3f"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#0000ff"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#000000"}},{scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#0451a5"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#ff0000"}},{scope:["support.type.property-name.json"],settings:{foreground:"#0451a5"}},{scope:"keyword",settings:{foreground:"#0000ff"}},{scope:"keyword.control",settings:{foreground:"#0000ff"}},{scope:"keyword.operator",settings:{foreground:"#000000"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.alignof","keyword.operator.typeid","keyword.operator.alignas","keyword.operator.instanceof","keyword.operator.logical.python","keyword.operator.wordlike"],settings:{foreground:"#0000ff"}},{scope:"keyword.other.unit",settings:{foreground:"#098658"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#800000"}},{scope:"support.function.git-rebase",settings:{foreground:"#0451a5"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#098658"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#000000"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#0000ff"}}],qct={$schema:Uct,name:jct,include:Kct,tokenColors:Gct},Yct="vscode://schemas/color-theme",Zct="Dark High Contrast",Xct="./hc_black_defaults.json",Qct={"editor.selectionBackground":"#FFFFFF","selection.background":"#008000","statusBarItem.remoteBackground":"#00000000"},Jct=[{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars","source.powershell variable.other.member"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.namespace","entity.name.scope-resolution","entity.name.class","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow / Special keywords",scope:["keyword.control","source.cpp keyword.operator.new","source.cpp keyword.operator.delete","keyword.other.using","keyword.other.operator"],settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"HC Search Editor context line override",scope:"meta.resultLinePrefix.contextLinePrefix.search",settings:{foreground:"#CBEDCB"}}],edt={$schema:Yct,name:Zct,include:Xct,colors:Qct,tokenColors:Jct};var TW;const Y_e=hct,Z_e=_ct,X_e=yct,tdt=Ict,Q_e=Oct;Object.assign(Q_e,Z_e);const J_e=Bct;Object.assign(J_e,Z_e);const eve=zct;Object.assign(eve,X_e);const tve=qct;Object.assign(tve,X_e);const nve=edt;Object.assign(nve,tdt);const Ag=((TW=Y_e.contributes)===null||TW===void 0?void 0:TW.themes)||[],ndt=Ag[0],idt=Ag[1],rdt=Ag[2],odt=Ag[3],sdt=Ag[4];Ag[0]=Object.assign({},ndt,Q_e);Ag[1]=Object.assign({},idt,eve);Ag[2]=Object.assign({},rdt,J_e);Ag[3]=Object.assign({},odt,tve);Ag[4]=Object.assign({},sdt,nve);const adt="theme-monokai",ldt="%displayName%",udt="%description%",cdt="1.0.0",ddt="vscode",hdt="MIT",fdt={vscode:"*"},gdt={themes:[{id:"Monokai",label:"Monokai",uiTheme:"vs-dark",path:"./themes/monokai-color-theme.json"}]},pdt={name:adt,displayName:ldt,description:udt,version:cdt,publisher:ddt,license:hdt,engines:fdt,contributes:gdt},mdt="dark",_dt={"dropdown.background":"#414339","list.activeSelectionBackground":"#75715E","quickInput.list.focusBackground":"#414339","dropdown.listBackground":"#1e1f1c","list.inactiveSelectionBackground":"#414339","list.hoverBackground":"#3e3d32","list.dropBackground":"#414339","list.highlightForeground":"#f8f8f2","button.background":"#75715E","editor.background":"#272822","editor.foreground":"#f8f8f2","selection.background":"#ccccc7","editor.selectionHighlightBackground":"#575b6180","editor.selectionBackground":"#878b9180","minimap.selectionHighlight":"#878b9180","minimap.background":"#272822","editor.wordHighlightBackground":"#4a4a7680","editor.wordHighlightStrongBackground":"#6a6a9680","editor.lineHighlightBackground":"#3e3d32","editorLineNumber.activeForeground":"#c2c2bf","editorCursor.foreground":"#f8f8f0","editorWhitespace.foreground":"#464741","editorIndentGuide.background":"#464741","editorIndentGuide.activeBackground":"#767771","editorGroupHeader.tabsBackground":"#1e1f1c","editorGroup.dropBackground":"#41433980","tab.inactiveBackground":"#34352f","tab.border":"#1e1f1c","tab.inactiveForeground":"#ccccc7","tab.lastPinnedBorder":"#414339","widget.shadow":"#00000098","progressBar.background":"#75715E","badge.background":"#75715E","badge.foreground":"#f8f8f2","editorLineNumber.foreground":"#90908a","panelTitle.activeForeground":"#f8f8f2","panelTitle.activeBorder":"#75715E","panelTitle.inactiveForeground":"#75715E","panel.border":"#414339","settings.focusedRowBackground":"#4143395A","titleBar.activeBackground":"#1e1f1c","statusBar.background":"#414339","statusBar.noFolderBackground":"#414339","statusBar.debuggingBackground":"#75715E","statusBarItem.remoteBackground":"#AC6218","activityBar.background":"#272822","activityBar.foreground":"#f8f8f2","sideBar.background":"#1e1f1c","sideBarSectionHeader.background":"#272822","menu.background":"#1e1f1c","menu.foreground":"#cccccc","pickerGroup.foreground":"#75715E","input.background":"#414339","inputOption.activeBorder":"#75715E",focusBorder:"#75715E","editorWidget.background":"#1e1f1c","debugToolBar.background":"#1e1f1c","diffEditor.insertedTextBackground":"#4b661680","diffEditor.removedTextBackground":"#90274A70","inputValidation.errorBackground":"#90274A","inputValidation.errorBorder":"#f92672","inputValidation.warningBackground":"#848528","inputValidation.warningBorder":"#e2e22e","inputValidation.infoBackground":"#546190","inputValidation.infoBorder":"#819aff","editorHoverWidget.background":"#414339","editorHoverWidget.border":"#75715E","editorSuggestWidget.background":"#272822","editorSuggestWidget.border":"#75715E","editorGroup.border":"#34352f","peekView.border":"#75715E","peekViewEditor.background":"#272822","peekViewResult.background":"#1e1f1c","peekViewTitle.background":"#1e1f1c","peekViewResult.selectionBackground":"#414339","peekViewResult.matchHighlightBackground":"#75715E","peekViewEditor.matchHighlightBackground":"#75715E","terminal.ansiBlack":"#333333","terminal.ansiRed":"#C4265E","terminal.ansiGreen":"#86B42B","terminal.ansiYellow":"#B3B42B","terminal.ansiBlue":"#6A7EC8","terminal.ansiMagenta":"#8C6BC8","terminal.ansiCyan":"#56ADBC","terminal.ansiWhite":"#e3e3dd","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightRed":"#f92672","terminal.ansiBrightGreen":"#A6E22E","terminal.ansiBrightYellow":"#e2e22e","terminal.ansiBrightBlue":"#819aff","terminal.ansiBrightMagenta":"#AE81FF","terminal.ansiBrightCyan":"#66D9EF","terminal.ansiBrightWhite":"#f8f8f2"},vdt=[{settings:{foreground:"#F8F8F2"}},{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#F8F8F2"}},{name:"Comment",scope:"comment",settings:{foreground:"#88846f"}},{name:"String",scope:"string",settings:{foreground:"#E6DB74"}},{name:"Template Definition",scope:["punctuation.definition.template-expression","punctuation.section.embedded"],settings:{foreground:"#F92672"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#F8F8F2"}},{name:"Number",scope:"constant.numeric",settings:{foreground:"#AE81FF"}},{name:"Built-in constant",scope:"constant.language",settings:{foreground:"#AE81FF"}},{name:"User-defined constant",scope:"constant.character, constant.other",settings:{foreground:"#AE81FF"}},{name:"Variable",scope:"variable",settings:{fontStyle:"",foreground:"#F8F8F2"}},{name:"Keyword",scope:"keyword",settings:{foreground:"#F92672"}},{name:"Storage",scope:"storage",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Storage type",scope:"storage.type",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Class name",scope:"entity.name.type, entity.name.class, entity.name.namespace, entity.name.scope-resolution",settings:{fontStyle:"underline",foreground:"#A6E22E"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#A6E22E"}},{name:"Function name",scope:"entity.name.function",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Function argument",scope:"variable.parameter",settings:{fontStyle:"italic",foreground:"#FD971F"}},{name:"Tag name",scope:"entity.name.tag",settings:{fontStyle:"",foreground:"#F92672"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{fontStyle:"",foreground:"#A6E22E"}},{name:"Library function",scope:"support.function",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library constant",scope:"support.constant",settings:{fontStyle:"",foreground:"#66D9EF"}},{name:"Library class/type",scope:"support.type, support.class",settings:{fontStyle:"italic",foreground:"#66D9EF"}},{name:"Library variable",scope:"support.other.variable",settings:{fontStyle:""}},{name:"Invalid",scope:"invalid",settings:{fontStyle:"",foreground:"#F44747"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#F44747"}},{name:"JSON String",scope:"meta.structure.dictionary.json string.quoted.double.json",settings:{foreground:"#CFCFC2"}},{name:"diff.header",scope:"meta.diff, meta.diff.header",settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"constant.numeric.line-number.find-in-files - match",settings:{foreground:"#AE81FFA0"}},{scope:"entity.name.filename.find-in-files",settings:{foreground:"#E6DB74"}},{name:"Markup Quote",scope:"markup.quote",settings:{foreground:"#F92672"}},{name:"Markup Lists",scope:"markup.list",settings:{foreground:"#E6DB74"}},{name:"Markup Styling",scope:"markup.bold, markup.italic",settings:{foreground:"#66D9EF"}},{name:"Markup Inline",scope:"markup.inline.raw",settings:{fontStyle:"",foreground:"#FD971F"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#A6E22E"}},{name:"Markup Setext Header",scope:"markup.heading.setext",settings:{foreground:"#A6E22E",fontStyle:"bold"}},{name:"Markup Headings",scope:"markup.heading.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Quote",scope:"markup.quote.markdown",settings:{fontStyle:"italic",foreground:"#75715E"}},{name:"Markdown Bold",scope:"markup.bold.markdown",settings:{fontStyle:"bold"}},{name:"Markdown Link Title/Description",scope:"string.other.link.title.markdown,string.other.link.description.markdown",settings:{foreground:"#AE81FF"}},{name:"Markdown Underline Link/Image",scope:"markup.underline.link.markdown,markup.underline.link.image.markdown",settings:{foreground:"#E6DB74"}},{name:"Markdown Emphasis",scope:"markup.italic.markdown",settings:{fontStyle:"italic"}},{name:"Markdown Punctuation Definition Link",scope:"markup.list.unnumbered.markdown, markup.list.numbered.markdown",settings:{foreground:"#f8f8f2"}},{name:"Markdown List Punctuation",scope:["punctuation.definition.list.begin.markdown"],settings:{foreground:"#A6E22E"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#FD971F"}}],bdt=!0,Cdt={type:mdt,colors:_dt,tokenColors:vdt,semanticHighlighting:bdt};var NW;const ive=pdt,wdt=Cdt,rve=((NW=ive.contributes)===null||NW===void 0?void 0:NW.themes)||[],ydt=rve[0];rve[0]=Object.assign({},ydt,wdt);const Sdt="material-palenight-theme",Ldt="whizkydee",Edt="Olaolu Olawuyi <mrolaolu@gmail.com> (http://twitter.com/mrolaolu)",xdt="Palenight Theme",Ddt="2.0.1",Idt="An elegant and juicy material-inspired theme for Visual Studio Code.",kdt={color:"#31364A",theme:"dark"},Tdt="icon.png",Ndt=["material theme","palenight","material","purple","dark"],Adt={url:"https://github.com/whizkydee/vscode-palenight-theme",type:"git"},Odt={url:"https://github.com/whizkydee/vscode-palenight-theme/issues"},Mdt="MIT",Rdt={vscode:"^1.12.0"},Pdt={start:"nodemon --exec vsce package",build:"nodemon --watch src src"},Fdt=["Themes","Other"],Bdt={themes:[{id:"Palenight Mild Contrast",label:"Palenight (Mild Contrast)",uiTheme:"vs-dark",path:"./themes/palenight-mild-contrast.json"}]},Wdt={nodemon:"^1.12.1",vsce:"^1.31.0"},Vdt={publisherDisplayName:"Olaolu Olawuyi"},Hdt={name:Sdt,publisher:Ldt,author:Edt,displayName:xdt,version:Ddt,description:Idt,galleryBanner:kdt,icon:Tdt,keywords:Ndt,repository:Adt,bugs:Odt,license:Mdt,engines:Rdt,scripts:Pdt,categories:Fdt,contributes:Bdt,devDependencies:Wdt,__metadata:Vdt},$dt="Palenight (Mild Contrast)",zdt="Olaolu Olawuyi",Udt=["Olaolu Olawuyi <mrolaolu@gmail.com>"],jdt="dark",Kdt="palenight-mild-contrast",Gdt={contrastActiveBorder:null,contrastBorder:"#2C2F40",focusBorder:"#2C2F40",foreground:"#ffffff","widget.shadow":"#232635","selection.background":"#3C435E",descriptionForeground:null,errorForeground:"#EF5350","button.background":"#7e57c2cc","button.foreground":"#ffffffcc","button.hoverBackground":"#7e57c2","dropdown.background":"#292D3E","dropdown.border":"#7e57c2","dropdown.foreground":"#ffffffcc","input.background":"#414863","input.border":"#7e57c2","input.foreground":"#ffffffcc","input.placeholderForeground":"#ffffffcc","inputOption.activeBorder":"#ffffffcc","inputValidation.errorBackground":"#ef5350f2","inputValidation.errorBorder":"#EF5350","inputValidation.infoBackground":"#64b5f6f2","inputValidation.infoBorder":"#64B5F6","inputValidation.warningBackground":"#ffca28f2","inputValidation.warningBorder":"#FFCA28","scrollbar.shadow":"#292D3E00","scrollbarSlider.activeBackground":"#694CA4cc","scrollbarSlider.background":"#694CA466","scrollbarSlider.hoverBackground":"#694CA4cc","badge.background":"#7e57c2","badge.foreground":"#ffffff","progress.background":"#7e57c2","list.activeSelectionBackground":"#7e57c2","list.activeSelectionForeground":"#ffffff","list.dropBackground":"#2E3245","list.focusBackground":"#0000002e","list.focusForeground":"#ffffff","list.highlightForeground":"#ffffff","list.hoverBackground":"#0000001a","list.hoverForeground":"#ffffff","list.inactiveSelectionBackground":"#929ac90d","list.inactiveSelectionForeground":"#929ac9","activityBar.background":"#242839","activityBar.dropBackground":"#7e57c2e3","activityBar.foreground":"#eeffff","activityBar.border":"#2E3243","activityBarBadge.background":"#7e57c2","activityBarBadge.foreground":"#ffffff","sideBar.background":"#25293A","sideBar.foreground":"#6C739A","sideBar.border":"#2C2F40","sideBarTitle.foreground":"#eeffff","sideBarSectionHeader.background":"#25293A","sideBarSectionHeader.foreground":"#eeffff","editorGroup.background":"#32374C","editorGroup.border":"#2E3245","editorGroup.dropBackground":"#7e57c273","editorGroupHeader.noTabsBackground":"#32374C","editorGroupHeader.tabsBackground":"#31364a","editorGroupHeader.tabsBorder":"#2C3041","tab.activeBackground":"#25293A","tab.activeForeground":"#eeffff","tab.border":"#272B3B","tab.activeBorder":"#2C3041","tab.unfocusedActiveBorder":"#2C3041","tab.inactiveBackground":"#31364A","tab.inactiveForeground":"#929ac9","tab.unfocusedActiveForeground":null,"tab.unfocusedInactiveForeground":null,"editor.background":"#292D3E","editor.foreground":"#BFC7D5","editorLineNumber.foreground":"#4c5374","editorLineNumber.activeForeground":"#eeffff","editorCursor.foreground":"#7e57c2","editorCursor.background":null,"editor.selectionBackground":"#7580B850","editor.selectionHighlightBackground":"#383D51","editor.inactiveSelectionBackground":"#7e57c25a","editor.wordHighlightBackground":"#32374D","editor.wordHighlightStrongBackground":"#2E3250","editor.findMatchBackground":"#7e57c25a","editor.findMatchHighlightBackground":"#2E3248","editor.findRangeHighlightBackground":null,"editor.hoverHighlightBackground":"#7e57c25a","editor.lineHighlightBackground":"#0003","editor.lineHighlightBorder":null,"editorLink.activeForeground":null,"editor.rangeHighlightBackground":"#7e57c25a","editorWhitespace.foreground":null,"editorIndentGuide.background":"#4E557980","editorRuler.foreground":null,"editorCodeLens.foreground":"#FFCA28","editorBracketMatch.background":null,"editorBracketMatch.border":null,"editorOverviewRuler.currentContentForeground":"#7e57c2","editorOverviewRuler.incomingContentForeground":"#7e57c2","editorOverviewRuler.commonContentForeground":"#7e57c2","editorError.foreground":"#EF5350","editorError.border":null,"editorWarning.foreground":"#FFCA28","editorWarning.border":null,"editorGutter.background":null,"editorGutter.modifiedBackground":"#e2b93d","editorGutter.addedBackground":"#9CCC65","editorGutter.deletedBackground":"#EF5350","diffEditor.insertedTextBackground":"#99b76d23","diffEditor.removedTextBackground":"#ef535033","editorWidget.background":"#31364a","editorWidget.border":null,"editorSuggestWidget.background":"#2C3043","editorSuggestWidget.border":"#2B2F40","editorSuggestWidget.foreground":"#bfc7d5","editorSuggestWidget.highlightForeground":"#ffffff","editorSuggestWidget.selectedBackground":"#7e57c2","editorHoverWidget.background":"#292D3E","editorHoverWidget.border":"#7e57c2","debugExceptionWidget.background":"#292D3E","debugExceptionWidget.border":"#7e57c2","editorMarkerNavigation.background":"#31364a","editorMarkerNavigationError.background":"#EF5350","editorMarkerNavigationWarning.background":"#FFCA28","peekView.border":"#7e57c2","peekViewEditor.background":"#232635","peekViewEditor.matchHighlightBackground":"#7e57c25a","peekViewResult.background":"#2E3245","peekViewResult.fileForeground":"#eeffff","peekViewResult.lineForeground":"#eeffff","peekViewResult.matchHighlightBackground":"#7e57c25a","peekViewResult.selectionBackground":"#2E3250","peekViewResult.selectionForeground":"#eeffff","peekViewTitle.background":"#292D3E","peekViewTitleDescription.foreground":"#697098","peekViewTitleLabel.foreground":"#eeffff","merge.currentHeaderBackground":"#7e57c25a","merge.currentContentBackground":null,"merge.incomingHeaderBackground":"#7e57c25a","merge.incomingContentBackground":null,"merge.border":null,"panel.background":"#25293A","panel.border":"#2C2F40","panelTitle.activeBorder":"#7e57c2","panelTitle.activeForeground":"#eeffff","panelTitle.inactiveForeground":"#bfc7d580","statusBar.background":"#25293A","statusBar.foreground":"#676E95","statusBar.border":"#2C3041","statusBar.debuggingBackground":"#202431","statusBar.debuggingForeground":null,"statusBar.debuggingBorder":"#1F2330","statusBar.noFolderForeground":null,"statusBar.noFolderBackground":"#292D3E","statusBar.noFolderBorder":"#25293A","statusBarItem.activeBackground":"#202431","statusBarItem.hoverBackground":"#202431","statusBarItem.prominentBackground":"#202431","statusBarItem.prominentHoverBackground":"#202431","titleBar.activeBackground":"#25293A","titleBar.activeForeground":"#eeefff","titleBar.border":"#2C3041","titleBar.inactiveBackground":"#30364c","titleBar.inactiveForeground":null,"notifications.background":"#292D3E","notifications.foreground":"#ffffffcc","notificationLink.foreground":"#80CBC4","extensionButton.prominentForeground":"#ffffffcc","extensionButton.prominentBackground":"#7e57c2cc","extensionButton.prominentHoverBackground":"#7e57c2","pickerGroup.foreground":"#d1aaff","pickerGroup.border":"#2E3245","terminal.ansiWhite":"#ffffff","terminal.ansiBlack":"#676E95","terminal.ansiBlue":"#82AAFF","terminal.ansiCyan":"#89DDFF","terminal.ansiGreen":"#a9c77d","terminal.ansiMagenta":"#C792EA","terminal.ansiRed":"#ff5572","terminal.ansiYellow":"#FFCB6B","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightBlack":"#676E95","terminal.ansiBrightBlue":"#82AAFF","terminal.ansiBrightCyan":"#89DDFF","terminal.ansiBrightGreen":"#C3E88D","terminal.ansiBrightMagenta":"#C792EA","terminal.ansiBrightRed":"#ff5572","terminal.ansiBrightYellow":"#FFCB6B","debugToolBar.background":"#292D3E","welcomePage.buttonBackground":null,"welcomePage.buttonHoverBackground":null,"walkThrough.embeddedEditorBackground":"#232635","gitDecoration.modifiedResourceForeground":"#e2c08de6","gitDecoration.deletedResourceForeground":"#EF535090","gitDecoration.untrackedResourceForeground":"#a9c77dff","gitDecoration.ignoredResourceForeground":"#69709890","gitDecoration.conflictingResourceForeground":"#FFEB95CC","editorActiveLineNumber.foreground":"#eeffff","breadcrumb.foreground":"#6c739a","breadcrumb.focusForeground":"#bfc7d5","breadcrumb.activeSelectionForeground":"#eeffff","breadcrumbPicker.background":"#292D3E"},qdt=[{name:"Global settings",settings:{background:"#292D3E",foreground:"#bfc7d5"}},{name:"Comment",scope:"comment",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"String",scope:"string",settings:{foreground:"#C3E88D"}},{name:"String Quoted",scope:"string.quoted",settings:{foreground:"#C3E88D"}},{name:"String Unquoted",scope:"string.unquoted",settings:{foreground:"#bfc7d5"}},{name:"Support Constant Math",scope:"support.constant.math",settings:{foreground:"#ffcb6b"}},{name:"Number",scope:["constant.numeric","constant.character.numeric"],settings:{foreground:"#F78C6C"}},{name:"Built-in constant",scope:["constant.language","punctuation.definition.constant","variable.other.constant"],settings:{foreground:"#82AAFF"}},{name:"User-defined constant",scope:["constant.character","constant.other"],settings:{foreground:"#82AAFF"}},{name:"Constant Character Escape",scope:"constant.character.escape",settings:{foreground:"#F78C6C"}},{name:"RegExp String",scope:["string.regexp","string.regexp keyword.other"],settings:{foreground:"#80CBC4"}},{name:"Comma in functions",scope:"meta.function punctuation.separator.comma",settings:{foreground:"#eeffff"}},{name:"Variable",scope:"variable",settings:{foreground:"#ffcb6b"}},{name:"Keyword",scope:["punctuation.accessor","keyword"],settings:{foreground:"#c792ea"}},{name:"Storage",scope:["storage","storage.type","meta.var.expr storage.type","storage.type.property.js","storage.type.property.ts","storage.type.property.tsx","meta.class meta.method.declaration meta.var.expr storage.type.js"],settings:{foreground:"#c792ea"}},{name:"Class name",scope:["entity.name.class","meta.class entity.name.type.class"],settings:{foreground:"#ffcb6b"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{foreground:"#a9c77d"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Function Parameters",scope:"variable.parameter",settings:{foreground:"#7986E7"}},{name:"Meta Tag",scope:["punctuation.definition.tag","meta.tag"],settings:{foreground:"#89DDFF"}},{name:"HTML Tag names",scope:["entity.name.tag support.class.component","meta.tag.other.html","meta.tag.other.js","meta.tag.other.tsx","entity.name.tag.tsx","entity.name.tag.js","entity.name.tag","meta.tag.js","meta.tag.tsx","meta.tag.html"],settings:{foreground:"#ff5572"}},{name:"Tag attribute",scope:"entity.other.attribute-name",settings:{foreground:"#ffcb6b"}},{name:"Entity Name Tag Custom",scope:"entity.name.tag.custom",settings:{foreground:"#ffcb6b"}},{name:"Library (function & constant)",scope:["support.function","support.constant"],settings:{foreground:"#82AAFF"}},{name:"Support Constant Property Value meta",scope:"support.constant.meta.property-value",settings:{foreground:"#89DDFF"}},{name:"Library class/type",scope:["support.type","support.class"],settings:{foreground:"#ffcb6b"}},{name:"Support Variable DOM",scope:"support.variable.dom",settings:{foreground:"#ffcb6b"}},{name:"Invalid",scope:"invalid",settings:{background:"#ff2c83",foreground:"#ffffff"}},{name:"Invalid deprecated",scope:"invalid.deprecated",settings:{foreground:"#ffffff",background:"#d3423e"}},{name:"Keyword Operator",scope:"keyword.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Relational",scope:"keyword.operator.relational",settings:{foreground:"#c792ea"}},{name:"Keyword Operator Assignment",scope:"keyword.operator.assignment",settings:{foreground:"#c792ea"}},{name:"Double-Slashed Comment",scope:"comment.line.double-slash",settings:{foreground:"#697098"}},{name:"Object",scope:"object",settings:{foreground:"#cdebf7"}},{name:"Null",scope:"constant.language.null",settings:{foreground:"#ff5874"}},{name:"Meta Brace",scope:"meta.brace",settings:{foreground:"#bfc7d5"}},{name:"Meta Delimiter Period",scope:"meta.delimiter.period",settings:{foreground:"#c792ea"}},{name:"Punctuation Definition String",scope:"punctuation.definition.string",settings:{foreground:"#d9f5dd"}},{name:"Boolean",scope:"constant.language.boolean",settings:{foreground:"#ff5874"}},{name:"Object Comma",scope:"object.comma",settings:{foreground:"#ffffff"}},{name:"Variable Parameter Function",scope:"variable.parameter.function",settings:{foreground:"#89DDFF"}},{name:"Support Type Property Name & entity name tags",scope:["support.type.vendored.property-name","support.constant.vendored.property-value","support.type.property-name","meta.property-list entity.name.tag"],settings:{foreground:"#80CBC4"}},{name:"Entity Name tag reference in stylesheets",scope:"meta.property-list entity.name.tag.reference",settings:{foreground:"#ff5572"}},{name:"Constant Other Color RGB Value Punctuation Definition Constant",scope:"constant.other.color.rgb-value punctuation.definition.constant",settings:{foreground:"#F78C6C"}},{name:"Constant Other Color",scope:"constant.other.color",settings:{foreground:"#FFEB95"}},{name:"Keyword Other Unit",scope:"keyword.other.unit",settings:{foreground:"#FFEB95"}},{name:"Meta Selector",scope:"meta.selector",settings:{foreground:"#c792ea"}},{name:"Entity Other Attribute Name Id",scope:"entity.other.attribute-name.id",settings:{foreground:"#FAD430"}},{name:"Meta Property Name",scope:"meta.property-name",settings:{foreground:"#80CBC4"}},{name:"Doctypes",scope:["entity.name.tag.doctype","meta.tag.sgml.doctype"],settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Punctuation Definition Parameters",scope:"punctuation.definition.parameters",settings:{foreground:"#d9f5dd"}},{name:"Keyword Control Operator",scope:"keyword.control.operator",settings:{foreground:"#89DDFF"}},{name:"Keyword Operator Logical",scope:"keyword.operator.logical",settings:{foreground:"#c792ea"}},{name:"Variable Instances",scope:["variable.instance","variable.other.instance","variable.reaedwrite.instance","variable.other.readwrite.instance"],settings:{foreground:"#ff5572"}},{name:"Variable Property Other",scope:["variable.other.property","variable.other.object.property"],settings:{foreground:"#89DDFF"}},{name:"Entity Name Function",scope:"entity.name.function",settings:{foreground:"#82AAFF"}},{name:"Keyword Operator Comparison",scope:"keyword.operator.comparison",settings:{foreground:"#c792ea"}},{name:"Support Constant, `new` keyword, Special Method Keyword",scope:["support.constant","keyword.other.special-method","keyword.other.new"],settings:{foreground:"#89DDFF"}},{name:"Support Function",scope:"support.function",settings:{foreground:"#89DDFF"}},{name:"Invalid Broken",scope:"invalid.broken",settings:{foreground:"#020e14",background:"#F78C6C"}},{name:"Invalid Unimplemented",scope:"invalid.unimplemented",settings:{background:"#8BD649",foreground:"#ffffff"}},{name:"Invalid Illegal",scope:"invalid.illegal",settings:{foreground:"#ffffff",background:"#ec5f67"}},{name:"Language Variable",scope:"variable.language",settings:{foreground:"#ff5572"}},{name:"Support Variable Property",scope:"support.variable.property",settings:{foreground:"#89DDFF"}},{name:"Variable Function",scope:"variable.function",settings:{foreground:"#82AAFF"}},{name:"Variable Interpolation",scope:"variable.interpolation",settings:{foreground:"#ec5f67"}},{name:"Meta Function Call",scope:"meta.function-call",settings:{foreground:"#82AAFF"}},{name:"Punctuation Section Embedded",scope:"punctuation.section.embedded",settings:{foreground:"#d3423e"}},{name:"Punctuation Tweaks",scope:["punctuation.terminator.expression","punctuation.definition.arguments","punctuation.definition.array","punctuation.section.array","meta.array"],settings:{foreground:"#bfc7d5"}},{name:"More Punctuation Tweaks",scope:["punctuation.definition.list.begin","punctuation.definition.list.end","punctuation.separator.arguments","punctuation.definition.list"],settings:{foreground:"#d9f5dd"}},{name:"Template Strings",scope:"string.template meta.template.expression",settings:{foreground:"#d3423e"}},{name:"Backtics(``) in Template Strings",scope:"string.template punctuation.definition.string",settings:{foreground:"#bfc7d5"}},{name:"Italics",scope:"italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Bold",scope:"bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Quote",scope:"quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Raw Code",scope:"raw",settings:{foreground:"#80CBC4"}},{name:"CoffeScript Variable Assignment",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"CoffeScript Parameter Function",scope:"variable.parameter.function.coffee",settings:{foreground:"#bfc7d5"}},{name:"CoffeeScript Assignments",scope:"variable.assignment.coffee",settings:{foreground:"#89DDFF"}},{name:"C# Readwrite Variables",scope:"variable.other.readwrite.cs",settings:{foreground:"#bfc7d5"}},{name:"C# Classes & Storage types",scope:["entity.name.type.class.cs","storage.type.cs"],settings:{foreground:"#82AAFF"}},{name:"C# Namespaces",scope:"entity.name.type.namespace.cs",settings:{foreground:"#B2CCD6"}},{name:"Tag names in Stylesheets",scope:["entity.name.tag.css","entity.name.tag.less","entity.name.tag.custom.css"],settings:{foreground:"#ff5572"}},{name:"Wildcard(*) selector in Stylesheets",scope:["entity.name.tag.wildcard.css","entity.name.tag.wildcard.less","entity.name.tag.wildcard.scss","entity.name.tag.wildcard.sass"],settings:{foreground:"#ff5572"}},{name:"(C|SC|SA|LE)SS property value unit",scope:["keyword.other.unit.css","constant.length.units.css","keyword.other.unit.less","constant.length.units.less","keyword.other.unit.scss","constant.length.units.scss","keyword.other.unit.sass","constant.length.units.sass"],settings:{foreground:"#FFEB95"}},{name:"Attribute Name for CSS",scope:"meta.attribute-selector.css entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"punctuations in styled components",scope:["source.js source.css meta.property-list","source.js source.css punctuation.section","source.js source.css punctuation.terminator.rule","source.js source.css punctuation.definition.entity.end.bracket","source.js source.css punctuation.definition.entity.begin.bracket","source.js source.css punctuation.separator.key-value","source.js source.css punctuation.definition.attribute-selector","source.js source.css meta.property-list","source.js source.css meta.property-list punctuation.separator.comma","source.ts source.css punctuation.section","source.ts source.css punctuation.terminator.rule","source.ts source.css punctuation.definition.entity.end.bracket","source.ts source.css punctuation.definition.entity.begin.bracket","source.ts source.css punctuation.separator.key-value","source.ts source.css punctuation.definition.attribute-selector","source.ts source.css meta.property-list","source.ts source.css meta.property-list punctuation.separator.comma"],settings:{foreground:"#bfc7d5"}},{name:"Elixir Classes",scope:["source.elixir support.type.elixir","source.elixir meta.module.elixir entity.name.class.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir Functions",scope:"source.elixir entity.name.function",settings:{foreground:"#ffcb6b"}},{name:"Elixir Constants",scope:["source.elixir constant.other.symbol.elixir","source.elixir constant.other.keywords.elixir"],settings:{foreground:"#82AAFF"}},{name:"Elixir String Punctuations",scope:"source.elixir punctuation.definition.string",settings:{foreground:"#a9c77d"}},{name:"Elixir",scope:["source.elixir variable.other.readwrite.module.elixir","source.elixir variable.other.readwrite.module.elixir punctuation.definition.variable.elixir"],settings:{foreground:"#ffcb6b"}},{name:"Elixir Binary Punctuations",scope:"source.elixir .punctuation.binary.elixir",settings:{foreground:"#c792ea"}},{name:"Go Function Calls",scope:"source.go meta.function-call.go",settings:{foreground:"#DDDDDD"}},{name:"GraphQL Variables",scope:"variable.qraphql",settings:{foreground:"#bfc7d5"}},{name:"ID Attribute Name in HTML",scope:"entity.other.attribute-name.id.html",settings:{foreground:"#ffcb6b"}},{name:"HTML Punctuation Definition Tag",scope:"punctuation.definition.tag.html",settings:{foreground:"#89DDFF"}},{name:"HTML Doctype",scope:"meta.tag.sgml.doctype.html",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"JavaScript Classes",scope:"meta.class entity.name.type.class.js",settings:{foreground:"#ffcb8b"}},{name:"JavaScript Method Declaration e.g. `constructor`",scope:"meta.method.declaration storage.type.js",settings:{foreground:"#82AAFF",fontStyle:"normal"}},{name:"JavaScript Terminator",scope:"terminator.js",settings:{foreground:"#bfc7d5"}},{name:"JavaScript Meta Punctuation Definition",scope:"meta.js punctuation.definition.js",settings:{foreground:"#bfc7d5"}},{name:"Entity Names in Code Documentations",scope:["entity.name.type.instance.jsdoc","entity.name.type.instance.phpdoc"],settings:{foreground:"#eeffff"}},{name:"Other Variables in Code Documentations",scope:["variable.other.jsdoc","variable.other.phpdoc"],settings:{foreground:"#78ccf0"}},{name:"JavaScript module imports and exports",scope:["variable.other.meta.import.js","meta.import.js variable.other","variable.other.meta.export.js","meta.export.js variable.other"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variable Parameter Function",scope:"variable.parameter.function.js",settings:{foreground:"#7986E7"}},{name:"JavaScript Variable Other ReadWrite",scope:"variable.other.readwrite.js",settings:{foreground:"#bfc7d5"}},{name:"Text nested in React tags",scope:["meta.jsx.children","meta.jsx.children.js","meta.jsx.children.tsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript[React] Variable Other Object",scope:["variable.other.object.js","variable.other.object.jsx","meta.object-literal.key.js","meta.object-literal.key.jsx","variable.object.property.js","variable.object.property.jsx"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Variables",scope:["variable.js","variable.other.js"],settings:{foreground:"#bfc7d5"}},{name:"JavaScript Entity Name Type",scope:["entity.name.type.js","entity.name.type.module.js"],settings:{foreground:"#ffcb8b"}},{name:"JavaScript Support Classes",scope:"support.class.js",settings:{foreground:"#bfc7d5"}},{name:"JSON Property Names",scope:"support.type.property-name.json",settings:{foreground:"#C3E88D",fontStyle:"normal"}},{name:"JSON Support Constants",scope:"support.constant.json",settings:{foreground:"#ffcb6b"}},{name:"JSON Property values (string)",scope:"meta.structure.dictionary.value.json string.quoted.double",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Strings in JSON values",scope:"string.quoted.double.json punctuation.definition.string.json",settings:{foreground:"#80CBC4",fontStyle:"normal"}},{name:"Specific JSON Property values like null",scope:"meta.structure.dictionary.json meta.structure.dictionary.value constant.language",settings:{foreground:"#ff5874"}},{name:"Ruby Variables",scope:"variable.other.ruby",settings:{foreground:"#bfc7d5"}},{name:"Ruby Hashkeys",scope:"constant.language.symbol.hashkey.ruby",settings:{foreground:"#89DDFF"}},{name:"LESS Tag names",scope:"entity.name.tag.less",settings:{foreground:"#ff5572"}},{name:"Attribute Name for LESS",scope:"meta.attribute-selector.less entity.other.attribute-name.attribute",settings:{foreground:"#F78C6C"}},{name:"Markup Headings",scope:"markup.heading",settings:{foreground:"#82b1ff"}},{name:"Markup Italics",scope:"markup.italic",settings:{foreground:"#c792ea",fontStyle:"italic"}},{name:"Markup Bold",scope:"markup.bold",settings:{foreground:"#ffcb6b",fontStyle:"bold"}},{name:"Markup Quote + others",scope:"markup.quote",settings:{foreground:"#697098",fontStyle:"italic"}},{name:"Markup Raw Code + others",scope:"markup.inline.raw",settings:{foreground:"#80CBC4"}},{name:"Markup Links",scope:["markup.underline.link","markup.underline.link.image"],settings:{foreground:"#ff869a"}},{name:"Markup Attributes",scope:["markup.meta.attribute-list"],settings:{foreground:"#a9c77d"}},{name:"Markup Admonitions",scope:"markup.admonition",settings:{fontStyle:"bold"}},{name:"Markup Lists",scope:"markup.list.bullet",settings:{foreground:"#D9F5DD"}},{name:"Markup Superscript and Subscript",scope:["markup.superscript","markup.subscript"],settings:{fontStyle:"italic"}},{name:"Markdown Link Title and Description",scope:["string.other.link.title.markdown","string.other.link.description.markdown"],settings:{foreground:"#bfc7d5"}},{name:"Markdown Punctuation",scope:["punctuation.definition.string.markdown","punctuation.definition.string.begin.markdown","punctuation.definition.string.end.markdown","meta.link.inline.markdown punctuation.definition.string"],settings:{foreground:"#82b1ff"}},{name:"Markdown MetaData Punctuation",scope:["punctuation.definition.metadata.markdown"],settings:{foreground:"#ff5572"}},{name:"Markdown List Punctuation",scope:["beginning.punctuation.definition.list.markdown"],settings:{foreground:"#82b1ff"}},{name:"Asciidoc Function",scope:"entity.name.function.asciidoc",settings:{foreground:"#F78C6C"}},{name:"PHP Variables",scope:"variable.other.php",settings:{foreground:"#bec5d4"}},{name:"Support Classes in PHP",scope:"support.class.php",settings:{foreground:"#ffcb8b"}},{name:"Punctuations in PHP function calls",scope:"meta.function-call.php punctuation",settings:{foreground:"#bfc7d5"}},{name:"PHP Global Variables",scope:"variable.other.global.php",settings:{foreground:"#ffcb6b"}},{name:"Declaration Punctuation in PHP Global Variables",scope:"variable.other.global.php punctuation.definition.variable",settings:{foreground:"#ffcb6b"}},{name:"Language Constants in Python",scope:"constant.language.python",settings:{foreground:"#ff5874"}},{name:"Python Function Parameter and Arguments",scope:["variable.parameter.function.python","meta.function-call.arguments.python"],settings:{foreground:"#7986E7"}},{name:"Python Function Call",scope:["meta.function-call.python","meta.function-call.generic.python"],settings:{foreground:"#B2CCD6"}},{name:"Punctuations in Python",scope:"punctuation.python",settings:{foreground:"#bfc7d5"}},{name:"Decorator Functions in Python",scope:"entity.name.function.decorator.python",settings:{foreground:"#ffcb6b"}},{name:"Python Language Variable",scope:"source.python variable.language.special",settings:{foreground:"#8EACE3"}},{name:"SCSS Variable",scope:["variable.scss","variable.sass","variable.parameter.url.scss","variable.parameter.url.sass"],settings:{foreground:"#DDDDDD"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#82AAFF"}},{name:"Variables in SASS At-Rules",scope:["source.css.scss meta.at-rule variable","source.css.sass meta.at-rule variable"],settings:{foreground:"#bec5d4"}},{name:"Attribute Name for SASS",scope:["meta.attribute-selector.scss entity.other.attribute-name.attribute","meta.attribute-selector.sass entity.other.attribute-name.attribute"],settings:{foreground:"#F78C6C"}},{name:"Tag names in SASS",scope:["entity.name.tag.scss","entity.name.tag.sass"],settings:{foreground:"#ff5572"}},{name:"TypeScript[React] Variables and Object Properties",scope:["variable.other.readwrite.alias.ts","variable.other.readwrite.alias.tsx","variable.other.readwrite.ts","variable.other.readwrite.tsx","variable.other.object.ts","variable.other.object.tsx","variable.object.property.ts","variable.object.property.tsx","variable.other.ts","variable.other.tsx","variable.tsx","variable.ts"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Entity Name Types",scope:["entity.name.type.ts","entity.name.type.tsx"],settings:{foreground:"#78ccf0"}},{name:"TypeScript[React] Node Classes",scope:["support.class.node.ts","support.class.node.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Entity Name Types as Parameters",scope:["meta.type.parameters.ts entity.name.type","meta.type.parameters.tsx entity.name.type"],settings:{foreground:"#eeffff"}},{name:"TypeScript[React] Import/Export Punctuations",scope:["meta.import.ts punctuation.definition.block","meta.import.tsx punctuation.definition.block","meta.export.ts punctuation.definition.block","meta.export.tsx punctuation.definition.block"],settings:{foreground:"#bfc7d5"}},{name:"TypeScript[React] Punctuation Decorators",scope:["meta.decorator punctuation.decorator.ts","meta.decorator punctuation.decorator.tsx"],settings:{foreground:"#82AAFF"}},{name:"TypeScript[React] Punctuation Decorators",scope:"meta.tag.js meta.jsx.children.tsx",settings:{foreground:"#82AAFF"}},{name:"YAML Entity Name Tags",scope:"entity.name.tag.yaml",settings:{foreground:"#89DDFF"}},{name:"handlebars variables",scope:"variable.parameter.handlebars",settings:{foreground:"#bec5d4"}},{name:"handlebars parameters",scope:"entity.other.attribute-name.handlebars variable.parameter.handlebars",settings:{foreground:"#ffcb6b"}},{name:"handlebars enitity attribute names",scope:"entity.other.attribute-name.handlebars",settings:{foreground:"#89DDFF"}},{name:"handlebars enitity attribute values",scope:"entity.other.attribute-value.handlebars variable.parameter.handlebars",settings:{foreground:"#7986E7"}},{name:"normalize font style of certain components",scope:["meta.tag.js meta.embedded.expression.js punctuation.section.embedded.begin.js","meta.tag.js meta.embedded.expression.js punctuation.section.embedded.end.js","meta.property-list.css meta.property-value.css variable.other.less","punctuation.section.embedded.begin.js.jsx","punctuation.section.embedded.end.js.jsx","meta.property-list.scss variable.scss","meta.property-list.sass variable.sass","keyword.operator.logical","keyword.operator.arithmetic","keyword.operator.bitwise","keyword.operator.increment","keyword.operator.ternary","keyword.operator.comparison","keyword.operator.assignment","keyword.operator.operator","keyword.operator.or.regexp","keyword.operator.expression.in","keyword.operator.type","punctuation.section.embedded.js","punctuation.definintion.string","punctuation"],settings:{fontStyle:"normal"}}],Ydt={name:$dt,author:zdt,maintainers:Udt,type:jdt,semanticClass:Kdt,colors:Gdt,tokenColors:qdt};var AW;const ove=Hdt,Zdt=Ydt,sve=((AW=ove.contributes)===null||AW===void 0?void 0:AW.themes)||[],Xdt=sve[0];sve[0]=Object.assign({},Xdt,Zdt);const Qdt="webstorm-intellij-darcula-theme",Jdt="Webstorm IntelliJ Darcula Theme",eht="A Darcula Theme designed by IntelliJ",tht="1.1.1",nht="xr0master",iht="MIT",rht="view.png",oht={url:"https://github.com/xr0master/vscode-intellij-darcula-theme",type:"git"},sht={vscode:"^1.27.0"},aht=["Themes"],lht={themes:[{id:"Webstorm IntelliJ Darcula Theme",label:"Webstorm IntelliJ Darcula Theme",uiTheme:"vs-dark",path:"./themes/darcula-color-theme.json"}]},uht={name:Qdt,displayName:Jdt,description:eht,version:tht,publisher:nht,license:iht,icon:rht,repository:oht,engines:sht,categories:aht,contributes:lht},cht="Webstorm IntelliJ Darcula Theme",dht="dark",hht={"activityBar.background":"#3c3f41","activityBar.border":"#4b4b4b","activityBar.foreground":"#ffffff","activityBarBadge.background":"#cc7832","dropdown.background":"#3c3f41","dropdown.border":"#4b4b4b","dropdown.foreground":"#bababa","editor.background":"#2b2b2b","editor.foreground":"#a9b7c6","editor.inactiveSelectionBackground":"#3a3d41","editor.lineHighlightBackground":"#323232","editor.selectionHighlightBackground":"#415a41","editorIndentGuide.activeBackground":"#606060","editorIndentGuide.background":"#4b4b4b","editorLineNumber.activeForeground":"#999999","editorLineNumber.foreground":"#606366","input.background":"#3c3f41","input.border":"#4b4b4b","input.foreground":"#bababa","input.placeholderForeground":"#a6a6a6","list.dropBackground":"#373a3c","menu.background":"#3c3f41","menu.foreground":"#bababa","panel.background":"#3c3f41","panel.border":"#4b4b4b","panelTitle.activeBorder":"#bababa","panelTitle.activeForeground":"#bababa","panelTitle.inactiveForeground":"#888888","scrollbarSlider.activeBackground":"#707070","scrollbarSlider.background":"#505050","scrollbarSlider.hoverBackground":"#676767","settings.numberInputBackground":"#292929","settings.textInputBackground":"#292929","sideBar.background":"#3c3f41","sideBar.border":"#4b4b4b","sideBar.foreground":"#bababa","sideBarSectionHeader.foreground":"#bababa","sideBarTitle.foreground":"#bababa","statusBar.background":"#3c3f41","statusBar.border":"#4b4b4b","statusBar.foreground":"#bababa","tab.activeBackground":"#515658","tab.activeBorder":"#bababa","tab.activeForeground":"#bababa","tab.border":"#4b4b4b","tab.inactiveBackground":"#3c3e3f","tab.inactiveForeground":"#a1a1a1","terminal.ansiBlack":"#ffffff","terminal.ansiBlue":"#5394ec","terminal.ansiBrightBlue":"#7eaef1","terminal.ansiBrightCyan":"#6cdada","terminal.ansiBrightGreen":"#a8c023","terminal.ansiBrightMagenta":"#ff99ff","terminal.ansiBrightRed":"#ff8785","terminal.ansiBrightYellow":"#ffff00","terminal.ansiCyan":"#299999","terminal.ansiGreen":"#a8c023","terminal.ansiMagenta":"#ae8abe","terminal.ansiRed":"#ff6b68","terminal.ansiWhite":"#1f1f1f","terminal.ansiYellow":"#d6bf55","terminal.background":"#2b2b2b","terminal.border":"#4b4b4b","widget.shadow":"#1a1a1aaa"},fht=[{scope:["meta.embedded","source.groovy.embedded"],settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"header",settings:{foreground:"#000080"}},{scope:"comment",settings:{foreground:"#6A9955"}},{scope:"constant.language",settings:{foreground:"#569cd6"}},{scope:["constant.numeric"],settings:{foreground:"#b5cea8"}},{scope:"constant.regexp",settings:{foreground:"#646695"}},{scope:"entity.name.tag",settings:{foreground:"#569cd6"}},{scope:"entity.name.tag.css",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name",settings:{foreground:"#9cdcfe"}},{scope:["entity.other.attribute-name.class.css","entity.other.attribute-name.class.mixin.css","entity.other.attribute-name.id.css","entity.other.attribute-name.parent-selector.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.pseudo-element.css","source.css.less entity.other.attribute-name.id","entity.other.attribute-name.attribute.scss","entity.other.attribute-name.scss"],settings:{foreground:"#d7ba7d"}},{scope:"invalid",settings:{foreground:"#f44747"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"punctuation.definition.quote.begin.markdown",settings:{foreground:"#6A9955"}},{scope:"punctuation.definition.list.begin.markdown",settings:{foreground:"#6796e6"}},{scope:"markup.inline.raw",settings:{foreground:"#ce9178"}},{name:"brackets of XML/HTML tags",scope:"punctuation.definition.tag",settings:{foreground:"#808080"}},{scope:"meta.preprocessor",settings:{foreground:"#569cd6"}},{scope:"meta.preprocessor.string",settings:{foreground:"#ce9178"}},{scope:"meta.preprocessor.numeric",settings:{foreground:"#b5cea8"}},{scope:"meta.structure.dictionary.key.python",settings:{foreground:"#9cdcfe"}},{scope:"meta.diff.header",settings:{foreground:"#569cd6"}},{scope:"storage",settings:{foreground:"#569cd6"}},{scope:"storage.type",settings:{foreground:"#569cd6"}},{scope:"storage.modifier",settings:{foreground:"#569cd6"}},{scope:"string",settings:{foreground:"#ce9178"}},{scope:"string.tag",settings:{foreground:"#ce9178"}},{scope:"string.value",settings:{foreground:"#ce9178"}},{scope:"string.regexp",settings:{foreground:"#d16969"}},{name:"String interpolation",scope:["punctuation.definition.template-expression.begin","punctuation.definition.template-expression.end","punctuation.section.embedded"],settings:{foreground:"#569cd6"}},{name:"Reset JavaScript string interpolation expression",scope:["meta.template.expression"],settings:{foreground:"#d4d4d4"}},{scope:["support.type.vendored.property-name","support.type.property-name","variable.css","variable.scss","variable.other.less","source.coffee.embedded"],settings:{foreground:"#9cdcfe"}},{scope:"keyword",settings:{foreground:"#569cd6"}},{scope:"keyword.control",settings:{foreground:"#569cd6"}},{scope:"keyword.operator",settings:{foreground:"#d4d4d4"}},{scope:["keyword.operator.new","keyword.operator.expression","keyword.operator.cast","keyword.operator.sizeof","keyword.operator.instanceof","keyword.operator.logical.python"],settings:{foreground:"#569cd6"}},{scope:"keyword.other.unit",settings:{foreground:"#b5cea8"}},{scope:["punctuation.section.embedded.begin.php","punctuation.section.embedded.end.php"],settings:{foreground:"#569cd6"}},{scope:"support.function.git-rebase",settings:{foreground:"#9cdcfe"}},{scope:"constant.sha.git-rebase",settings:{foreground:"#b5cea8"}},{name:"coloring of the Java import and package identifiers",scope:["storage.modifier.import.java","variable.language.wildcard.java","storage.modifier.package.java"],settings:{foreground:"#d4d4d4"}},{name:"this.self",scope:"variable.language",settings:{foreground:"#569cd6"}},{name:"Function declarations",scope:["entity.name.function","support.function","support.constant.handlebars"],settings:{foreground:"#DCDCAA"}},{name:"Types declaration and references",scope:["meta.return-type","support.class","support.type","entity.name.type","entity.name.class","storage.type.numeric.go","storage.type.byte.go","storage.type.boolean.go","storage.type.string.go","storage.type.uintptr.go","storage.type.error.go","storage.type.rune.go","storage.type.cs","storage.type.generic.cs","storage.type.modifier.cs","storage.type.variable.cs","storage.type.annotation.java","storage.type.generic.java","storage.type.java","storage.type.object.array.java","storage.type.primitive.array.java","storage.type.primitive.java","storage.type.token.java","storage.type.groovy","storage.type.annotation.groovy","storage.type.parameters.groovy","storage.type.generic.groovy","storage.type.object.array.groovy","storage.type.primitive.array.groovy","storage.type.primitive.groovy"],settings:{foreground:"#4EC9B0"}},{name:"Types declaration and references, TS grammar specific",scope:["meta.type.cast.expr","meta.type.new.expr","support.constant.math","support.constant.dom","support.constant.json","entity.other.inherited-class"],settings:{foreground:"#4EC9B0"}},{name:"Control flow keywords",scope:"keyword.control",settings:{foreground:"#C586C0"}},{name:"Variable and parameter name",scope:["variable","meta.definition.variable.name","support.variable","entity.name.variable"],settings:{foreground:"#9CDCFE"}},{name:"Object keys, TS grammar specific",scope:["meta.object-literal.key"],settings:{foreground:"#9CDCFE"}},{name:"CSS property value",scope:["support.constant.property-value","support.constant.font-name","support.constant.media-type","support.constant.media","constant.other.color.rgb-value","constant.other.rgb-value","support.constant.color"],settings:{foreground:"#CE9178"}},{name:"Regular expression groups",scope:["punctuation.definition.group.regexp","punctuation.definition.group.assertion.regexp","punctuation.definition.character-class.regexp","punctuation.character.set.begin.regexp","punctuation.character.set.end.regexp","keyword.operator.negation.regexp","support.other.parenthesis.regexp"],settings:{foreground:"#CE9178"}},{scope:["constant.character.character-class.regexp","constant.other.character-class.set.regexp","constant.other.character-class.regexp","constant.character.set.regexp"],settings:{foreground:"#d16969"}},{scope:["keyword.operator.or.regexp","keyword.control.anchor.regexp"],settings:{foreground:"#DCDCAA"}},{scope:"keyword.operator.quantifier.regexp",settings:{foreground:"#d7ba7d"}},{scope:"constant.character",settings:{foreground:"#569cd6"}},{scope:"constant.character.escape",settings:{foreground:"#d7ba7d"}},{scope:"token.info-token",settings:{foreground:"#6796e6"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:"token.error-token",settings:{foreground:"#f44747"}},{scope:"token.debug-token",settings:{foreground:"#b267e6"}},{scope:"string",settings:{foreground:"#6A8759"}},{scope:"keyword - keyword.operator",settings:{foreground:"#CC7832"}},{scope:"keyword.control",settings:{foreground:"#CC7832"}},{scope:"storage",settings:{foreground:"#CC7832"}},{scope:"storage.type",settings:{foreground:"#CC7832"}},{scope:"constant.numeric",settings:{foreground:"#6897BB"}},{scope:"entity.name.type",settings:{foreground:"#CC7832"}},{scope:"entity.name.class",settings:{foreground:"#CC7832"}},{scope:"support.type",settings:{foreground:"#CC7832"}},{scope:"support.class",settings:{foreground:"#CC7832"}},{scope:"entity.name.function",settings:{foreground:"#FFC66D"}},{scope:"support.function",settings:{foreground:"#FFC66D"}},{scope:"variable",settings:{foreground:"#9876AA"}},{scope:"entity.name.variable",settings:{foreground:"#9876AA"}},{name:"Comments",scope:["comment","comment.block","comment.line"],settings:{foreground:"#808080",fontStyle:"italic"}},{scope:["punctuation.terminator.statement","punctuation.separator.comma","punctuation.separator.parameter","punctuation.separator.dictionary.key-value.json","punctuation.separator.dictionary.key-value.json.comments","punctuation.separator.dictionary.pair.json","punctuation.separator.dictionary.pair.json.comments","punctuation.separator.array.json","punctuation.separator.array.json.comments","constant.character.escape","keyword.control.anchor.regexp"],settings:{foreground:"#CC7832"}},{name:"Global keywords",scope:["constant.language","keyword.control","keyword.operator.expression","keyword.operator.new","keyword.other.debugger","support.type","storage.type","storage.modifier","variable.language.super","variable.language.this"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"String",scope:["punctuation.definition.string","string.regexp","constant.other.character-class"],settings:{foreground:"#6A8759"}},{name:"Comment Documentation",scope:["comment.block.documentation","entity.name.type.instance.jsdoc","variable.other.jsdoc"],settings:{foreground:"#6A8759"}},{name:"JsDocs",scope:"storage.type.class.jsdoc",settings:{foreground:"#6A8759",fontStyle:"italic bold underline"}},{name:"Main Text Color",scope:["punctuation.accessor","punctuation.separator.key-value","punctuation.definition.block","variable.other.readwrite","variable.other.constant","variable.parameter","variable.other.object","variable.language.arguments","support.variable","support.variable.object","support.class","keyword","keyword.operator.logical","keyword.operator.optional","keyword.operator.type.annotation","entity.name.type","entity.other.inherited-class","constant.language.import-export-all","storage.type.function.arrow","meta.function.expression","meta.object.member","meta.brace.round","meta.brace.square"],settings:{foreground:"#A9B7C6"}},{name:"Veriables",scope:["meta.function-call","meta.object.member","variable.other.property","variable.other.object.property","meta.object-literal.key","support.variable.property"],settings:{foreground:"#9876AA"}},{name:"Constants",scope:["variable.other.constant.property","variable.other.constant.object.property"],settings:{foreground:"#9876AA",fontStyle:"italic"}},{name:"JSON",scope:["support.type.property-name","support.type.property-name.json.comments","punctuation.support.type.property-name.end.json.comments","punctuation.support.type.property-name.begin.json.comments"],settings:{foreground:"#9876AA",fontStyle:""}},{name:"Regexp Blocks",scope:["punctuation.definition.group.regexp","punctuation.definition.character-class.regexp","punctuation.definition.group.no-capture.regexp","punctuation.definition.group.assertion.regexp","constant.other.character-class.regexp"],settings:{foreground:"#FFC66D"}},{name:"Regex set and etc",scope:["constant.regexp","keyword.operator.quantifier.regexp"],settings:{foreground:"#6897BB"}},{name:"XML/HTML tags",scope:["keyword.other.doctype.xml","entity.name.tag","support.class","punctuation.definition.tag"],settings:{foreground:"#E8BF6A"}},{name:"XML/HTML attribute name",scope:["variable.language.documentroot.xml","entity.other.attribute-name","support.variable.dom.js"],settings:{foreground:"#BABABA"}},{name:"XML/HTML embedded section",scope:["punctuation.section.embedded"],settings:{foreground:"#a9b7c6"}},{name:"HTML attribute value",scope:"text.html.basic string",settings:{foreground:"#A5C261"}},{name:"Constant characters",scope:"constant.character.entity",settings:{foreground:"#6D9CBE"}},{name:"YAML comments",scope:"comment.line.number-sign.yaml",settings:{foreground:"#629755",fontStyle:"italic"}},{name:"YAML key",scope:"entity.name.tag.yaml",settings:{foreground:"#CC7832"}},{name:"YAML block/text",scope:["source.yaml keyword.control","source.yaml constant.language","source.yaml storage.modifier.chomping-indicator","string.unquoted.plain.out.yaml","constant.numeric.integer.yaml"],settings:{foreground:"#A9B7C6",fontStyle:""}},{name:"YAML Anchor/Alias",scope:["entity.name.type.anchor.yaml","variable.other.alias.yaml"],settings:{foreground:"#E8BF6A"}},{name:"CSS/SCSS global key",scope:["keyword.other.important","keyword.other.default"],settings:{foreground:"#CC7832",fontStyle:""}},{name:"CSS atribute/selector",scope:["entity.other.attribute-name.css","entity.other.attribute-name.id.css","entity.other.attribute-name.class.css","entity.other.attribute-name.pseudo-element.css","entity.other.attribute-name.pseudo-class.css","entity.other.attribute-name.class.mixin.css","support.function.url.css","constant.other.unicode-range.css","support.constant.language-range.css","punctuation.definition.entity.css"],settings:{foreground:"#E8BF6A"}},{name:"CSS URL",scope:"variable.parameter.url.css",settings:{foreground:"#287BDE"}},{name:"CSS property name",scope:["support.type.property-name.css","support.type.vendored.property-name"],settings:{foreground:"#BABABA",fontStyle:""}},{name:"CSS tag name",scope:["entity.name.tag.css"],settings:{foreground:"#CC7832"}},{name:"CSS terminator",scope:["punctuation.terminator.rule.css"],settings:{foreground:"#CC7832"}},{name:"CSS colon/braces and etc",scope:["keyword.other.unit.percentage.css","punctuation.section.function.end.bracket.round.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.property-list.begin.bracket.curly.css","punctuation.section.property-list.end.bracket.curly.css","punctuation.definition.entity.begin.bracket.square.css","punctuation.definition.entity.end.bracket.square.css"],settings:{foreground:"#A9B7C6"}},{name:"CSS property value",scope:["support.constant.font-name.css","support.constant.color.w3c-standard-color-name.css","support.constant.property-value.css","keyword.other.unit.px.css","keyword.other.unit.em.css"],settings:{foreground:"#A5C261"}},{name:"CSS hex color",scope:"constant.other.color.rgb-value.hex.css",settings:{foreground:"#6897BB"}},{name:"CSS comma",scope:"punctuation.separator.list.comma.css",settings:{foreground:"#CC7832"}},{name:"Sass/SCSS variable",scope:"variable.scss",settings:{foreground:"#6D9CBE"}},{name:"Markdown",scope:["entity.name.section.markdown","punctuation.definition.heading"],settings:{foreground:"#CC7832",fontStyle:"bold"}},{name:"Markdown link",scope:"markup.underline.link",settings:{foreground:"#6D9CBE",fontStyle:"italic"}}],ght={name:cht,type:dht,colors:hht,tokenColors:fht};var OW;const ave=uht,pht=ght,lve=((OW=ave.contributes)===null||OW===void 0?void 0:OW.themes)||[],mht=lve[0];lve[0]=Object.assign({},mht,pht);const _ht="github-plus-theme",vht="GitHub Plus Theme",bht="A GitHub inspired color theme for VSCode code and interface!",Cht="1.4.2",wht="thenikso",yht="icon.png",Sht={type:"git",url:"https://github.com/thenikso/github-plus-theme"},Lht={url:"https://github.com/thenikso/github-plus-theme/issues"},Eht={vscode:"^1.16.0"},xht=["Themes"],Dht={themes:[{id:"GitHub Plus",label:"GitHub Plus",uiTheme:"vs",path:"./themes/github-plus-theme.json"}]},Iht={publish:"vsce publish"},kht={id:"d0db9e58-8cdf-49c5-87bf-02f037e10bb0",publisherDisplayName:"thenikso",publisherId:"e748af4a-d17d-4c3b-a7e1-2592de9a7e09"},Tht={name:_ht,displayName:vht,description:bht,version:Cht,publisher:wht,icon:yht,repository:Sht,bugs:Lht,engines:Eht,categories:xht,contributes:Dht,scripts:Iht,__metadata:kht},Nht="light",Aht={focusBorder:"#fafbfc","inputOption.activeBorder":"#e36209","editor.background":"#ffffff","editor.foreground":"#24292e","editor.lineHighlightBackground":"#fffbdd","editorIndentGuide.background":"#eeeeee","editorLineNumber.foreground":"#cccccc","editorBracketMatch.background":"#f1f8ff","editorBracketMatch.border":"#c8e1ff","titleBar.activeBackground":"#fafbfc","titleBar.border":"#e1e4e8","statusBar.foreground":"#24292e","statusBar.noFolderForeground":"#24292e","statusBar.background":"#fafbfc","statusBar.noFolderBackground":"#fafbfc","statusBar.border":"#e1e4e8","statusBar.debuggingBackground":"#fafbfc","statusBar.debuggingForeground":"#24292e","activityBar.background":"#24292e","activityBar.foreground":"#fafbfc","activityBarBadge.background":"#54a3ff","sideBar.background":"#fafbfc","sideBar.foreground":"#586069","sideBar.border":"#e1e4e8","sideBarTitle.foreground":"#24292e","sideBarSectionHeader.background":"#F1F2F3","sideBarSectionHeader.foreground":"#24292e","notification.background":"#54a3ff","editorGroupHeader.tabsBackground":"#fafbfc","editorGroupHeader.tabsBorder":"#e1e4e8","tab.activeBackground":"#ffffff","tab.activeBorder":"#e36209","tab.inactiveBackground":"#fafbfc","tab.border":"#e1e4e8","tab.inactiveForeground":"#586069","scrollbar.shadow":"#00000000","quickInputList.focusBackground":"#e7e6e5","quickInputList.focusForeground":"#24292e","list.focusOutline":"#ffffff","list.highlightForeground":"#0066BF","list.focusHighlightForeground":"#0066BF","terminal.background":"#ffffff","terminal.foreground":"#333333","terminal.ansiBlack":"#414141","terminal.ansiRed":"#D73A49","terminal.ansiGreen":"#90D259","terminal.ansiYellow":"#F7C400","terminal.ansiBlue":"#005CC5","terminal.ansiMagenta":"#FF73FD","terminal.ansiCyan":"#0BC7D7","terminal.ansiWhite":"#BFBFBF","terminal.ansiBrightBlack":"#989898","terminal.ansiBrightRed":"#FA6F71","terminal.ansiBrightGreen":"#35D61C","terminal.ansiBrightYellow":"#FFCA39","terminal.ansiBrightBlue":"#1C23D6","terminal.ansiBrightMagenta":"#FF00FF","terminal.ansiBrightCyan":"#3CD7E7","terminal.ansiBrightWhite":"#E0E0E0","terminalCursor.foreground":"#363636"},Oht=[{settings:{foreground:"#24292eff",background:"#ffffffff"}},{scope:["keyword.operator.accessor","meta.group.braces.round.function.arguments","meta.template.expression","markup.fenced_code meta.embedded.block"],settings:{foreground:"#24292eff"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:["strong","markup.heading.markdown","markup.bold.markdown"],settings:{fontStyle:"bold"}},{scope:["markup.italic.markdown"],settings:{fontStyle:"italic"}},{scope:"meta.link.inline.markdown",settings:{fontStyle:"underline",foreground:"#005cc5"}},{scope:["comment","markup.fenced_code","markup.inline"],settings:{foreground:"#6a737d"}},{scope:"string",settings:{foreground:"#032f62"}},{scope:["constant.numeric","constant.language","variable.language.this","variable.other.class","variable.other.constant","meta.property-name","meta.property-value","support"],settings:{foreground:"#005cc5"}},{scope:["keyword","storage.modifier","storage.type","storage.control.clojure","entity.name.function.clojure","support.function.node","support.type.property-name.json","punctuation.separator.key-value","punctuation.definition.template-expression","support.constant.property-value.css"],settings:{foreground:"#d73a49"}},{scope:"variable.parameter.function",settings:{foreground:"#E27F2D"}},{scope:["entity.name.type","entity.other.inherited-class","meta.function-call","meta.instance.constructor","entity.other.attribute-name","entity.name.function","constant.keyword.clojure"],settings:{foreground:"#6f42c1"}},{scope:["entity.name.tag","string.quoted","string.regexp","string.interpolated","string.template","keyword.other.template"],settings:{foreground:"#22863a"}},{scope:"token.info-token",settings:{foreground:"#316bcd"}},{scope:"token.warn-token",settings:{foreground:"#cd9731"}},{scope:["token.error-token","invalid"],settings:{foreground:"#cd3131"}},{scope:"token.debug-token",settings:{foreground:"#800080"}},{scope:"markup.inserted",settings:{foreground:"#22863a"}},{scope:"markup.deleted",settings:{foreground:"#d73a49"}},{scope:"markup.changed",settings:{foreground:"#005cc5"}},{scope:"meta.diff.header",settings:{foreground:"#6a737d"}},{scope:["constant.numeric.css","support.function.misc.css","constant.other.color.rgb-value.hex.css","punctuation.section.function.begin.bracket.round.css","punctuation.section.function.end.bracket.round.css"],settings:{foreground:"#353535"}}],Mht={type:Nht,colors:Aht,tokenColors:Oht};var MW;const uve=Tht,Rht=Mht,cve=((MW=uve.contributes)===null||MW===void 0?void 0:MW.themes)||[],Pht=cve[0];cve[0]=Object.assign({},Pht,Rht);const Fht={id:"ExtendsEditor",name:"Extends Editor",dispose(){},activate(){on.editor.onCloseTab((i,e)=>{i!==void 0&&e!==void 0&&on.editor.closeTab(i,e)}),on.editor.onCloseAll(i=>{i!==void 0&&on.editor.closeAll(i)}),on.editor.onCloseOther((i,e)=>{i&&e!==void 0&&on.editor.closeOther(i,e)}),on.editor.onCloseToLeft((i,e)=>{i&&e!==void 0&&on.editor.closeToLeft(i,e)}),on.editor.onCloseToRight((i,e)=>{i&&e!==void 0&&on.editor.closeToRight(i,e)})}},Bht=[Jut,Fht,Qut,tct,nct,lUe,Y_e,ive,ove,ave,uve,Xut];var Kw;(function(i){i.beforeInit="before.init",i.beforeLoad="before.load"})(Kw||(Kw={}));class Wht extends TS{constructor(e){super(),this._config={extensions:Bht.concat(),defaultLocale:"en"},this.rendered=!1,this.initialLocaleService=t=>{const n=t.reduce((r,o)=>{var s;const a=((s=o.contributes)===null||s===void 0?void 0:s.languages)||[];return r.concat(a)},[]);on.i18n.initialize(n,localStorage.getItem(Gz)||this._config.defaultLocale)},this.getConfig=()=>Object.assign({},this._config),this.render=t=>{if(!this.rendered){this.emit(Kw.beforeInit);const[n,r]=on.extension.splitLanguagesExts(this._config.extensions);this.initialLocaleService(n);const o=[C5,w5,v5,_j,vj,wj,xS,L5,ES,gj,bj,y5,pj,Cj,mj,b5,S5];on.layout.onWorkbenchDidMount(()=>{this.rendered||(on.monacoService.initWorkspace(on.layout.container),Object.keys(o).forEach(s=>{var a;const u=o[s],d=Ue.resolve(u);(a=d.initView)===null||a===void 0||a.call(d)}),this.emit(Kw.beforeLoad),on.extension.load(r),this.rendered=!0)})}return t},this.onBeforeInit=t=>{this.subscribe(Kw.beforeInit,t)},this.onBeforeLoad=t=>{this.subscribe(Kw.beforeLoad,t)},e.defaultLocale&&(this._config.defaultLocale=e.defaultLocale),Array.isArray(e.extensions)&&this._config.extensions.push(...e.extensions)}}var yj;(function(i){let e=null;function t(r){return e||(e=new Wht(r),e)}i.create=t;function n(){e=null}i.clearInstance=n})(yj||(yj={}));function Vht(i){return yj.create(i)}function Ire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dve={exports:{}},M4={exports:{}};const Hht={},$ht=Object.freeze(Object.defineProperty({__proto__:null,default:Hht},Symbol.toStringTag,{value:"Module"})),hve=wve($ht);M4.exports;var kre;function zht(){return kre||(kre=1,function(i){(function(e,t){function n($,D){if(!$)throw new Error(D||"Assertion failed")}function r($,D){$.super_=D;var T=function(){};T.prototype=D.prototype,$.prototype=new T,$.prototype.constructor=$}function o($,D,T){if(o.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((D==="le"||D==="be")&&(T=D,D=10),this._init($||0,D||10,T||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=hve.Buffer}catch{}o.isBN=function(D){return D instanceof o?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===o.wordSize&&Array.isArray(D.words)},o.max=function(D,T){return D.cmp(T)>0?D:T},o.min=function(D,T){return D.cmp(T)<0?D:T},o.prototype._init=function(D,T,F){if(typeof D=="number")return this._initNumber(D,T,F);if(typeof D=="object")return this._initArray(D,T,F);T==="hex"&&(T=16),n(T===(T|0)&&T>=2&&T<=36),D=D.toString().replace(/\s+/g,"");var B=0;D[0]==="-"&&(B++,this.negative=1),B<D.length&&(T===16?this._parseHex(D,B,F):(this._parseBase(D,T,B),F==="le"&&this._initArray(this.toArray(),T,F)))},o.prototype._initNumber=function(D,T,F){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),T,F)},o.prototype._initArray=function(D,T,F){if(n(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var U,G,Z=0;if(F==="be")for(B=D.length-1,U=0;B>=0;B-=3)G=D[B]|D[B-1]<<8|D[B-2]<<16,this.words[U]|=G<<Z&67108863,this.words[U+1]=G>>>26-Z&67108863,Z+=24,Z>=26&&(Z-=26,U++);else if(F==="le")for(B=0,U=0;B<D.length;B+=3)G=D[B]|D[B+1]<<8|D[B+2]<<16,this.words[U]|=G<<Z&67108863,this.words[U+1]=G>>>26-Z&67108863,Z+=24,Z>=26&&(Z-=26,U++);return this.strip()};function a($,D){var T=$.charCodeAt(D);return T>=65&&T<=70?T-55:T>=97&&T<=102?T-87:T-48&15}function u($,D,T){var F=a($,T);return T-1>=D&&(F|=a($,T-1)<<4),F}o.prototype._parseHex=function(D,T,F){this.length=Math.ceil((D.length-T)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var U=0,G=0,Z;if(F==="be")for(B=D.length-1;B>=T;B-=2)Z=u(D,T,B)<<U,this.words[G]|=Z&67108863,U>=18?(U-=18,G+=1,this.words[G]|=Z>>>26):U+=8;else{var z=D.length-T;for(B=z%2===0?T+1:T;B<D.length;B+=2)Z=u(D,T,B)<<U,this.words[G]|=Z&67108863,U>=18?(U-=18,G+=1,this.words[G]|=Z>>>26):U+=8}this.strip()};function d($,D,T,F){for(var B=0,U=Math.min($.length,T),G=D;G<U;G++){var Z=$.charCodeAt(G)-48;B*=F,Z>=49?B+=Z-49+10:Z>=17?B+=Z-17+10:B+=Z}return B}o.prototype._parseBase=function(D,T,F){this.words=[0],this.length=1;for(var B=0,U=1;U<=67108863;U*=T)B++;B--,U=U/T|0;for(var G=D.length-F,Z=G%B,z=Math.min(G,G-Z)+F,O=0,Y=F;Y<z;Y+=B)O=d(D,Y,Y+B,T),this.imuln(U),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O);if(Z!==0){var fe=1;for(O=d(D,Y,D.length,T),Y=0;Y<Z;Y++)fe*=T;this.imuln(fe),this.words[0]+O<67108864?this.words[0]+=O:this._iaddn(O)}this.strip()},o.prototype.copy=function(D){D.words=new Array(this.length);for(var T=0;T<this.length;T++)D.words[T]=this.words[T];D.length=this.length,D.negative=this.negative,D.red=this.red},o.prototype.clone=function(){var D=new o(null);return this.copy(D),D},o.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(D,T){D=D||10,T=T|0||1;var F;if(D===16||D==="hex"){F="";for(var B=0,U=0,G=0;G<this.length;G++){var Z=this.words[G],z=((Z<<B|U)&16777215).toString(16);U=Z>>>24-B&16777215,U!==0||G!==this.length-1?F=h[6-z.length]+z+F:F=z+F,B+=2,B>=26&&(B-=26,G--)}for(U!==0&&(F=U.toString(16)+F);F.length%T!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(D===(D|0)&&D>=2&&D<=36){var O=f[D],Y=p[D];F="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var ne=fe.modn(Y).toString(D);fe=fe.idivn(Y),fe.isZero()?F=ne+F:F=h[O-ne.length]+ne+F}for(this.isZero()&&(F="0"+F);F.length%T!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(D,T){return n(typeof s<"u"),this.toArrayLike(s,D,T)},o.prototype.toArray=function(D,T){return this.toArrayLike(Array,D,T)},o.prototype.toArrayLike=function(D,T,F){var B=this.byteLength(),U=F||Math.max(1,B);n(B<=U,"byte array longer than desired length"),n(U>0,"Requested array length <= 0"),this.strip();var G=T==="le",Z=new D(U),z,O,Y=this.clone();if(G){for(O=0;!Y.isZero();O++)z=Y.andln(255),Y.iushrn(8),Z[O]=z;for(;O<U;O++)Z[O]=0}else{for(O=0;O<U-B;O++)Z[O]=0;for(O=0;!Y.isZero();O++)z=Y.andln(255),Y.iushrn(8),Z[U-O-1]=z}return Z},Math.clz32?o.prototype._countBits=function(D){return 32-Math.clz32(D)}:o.prototype._countBits=function(D){var T=D,F=0;return T>=4096&&(F+=13,T>>>=13),T>=64&&(F+=7,T>>>=7),T>=8&&(F+=4,T>>>=4),T>=2&&(F+=2,T>>>=2),F+T},o.prototype._zeroBits=function(D){if(D===0)return 26;var T=D,F=0;return T&8191||(F+=13,T>>>=13),T&127||(F+=7,T>>>=7),T&15||(F+=4,T>>>=4),T&3||(F+=2,T>>>=2),T&1||F++,F},o.prototype.bitLength=function(){var D=this.words[this.length-1],T=this._countBits(D);return(this.length-1)*26+T};function m($){for(var D=new Array($.bitLength()),T=0;T<D.length;T++){var F=T/26|0,B=T%26;D[T]=($.words[F]&1<<B)>>>B}return D}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,T=0;T<this.length;T++){var F=this._zeroBits(this.words[T]);if(D+=F,F!==26)break}return D},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},o.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var T=0;T<D.length;T++)this.words[T]=this.words[T]|D.words[T];return this.strip()},o.prototype.ior=function(D){return n((this.negative|D.negative)===0),this.iuor(D)},o.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},o.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},o.prototype.iuand=function(D){var T;this.length>D.length?T=D:T=this;for(var F=0;F<T.length;F++)this.words[F]=this.words[F]&D.words[F];return this.length=T.length,this.strip()},o.prototype.iand=function(D){return n((this.negative|D.negative)===0),this.iuand(D)},o.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},o.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},o.prototype.iuxor=function(D){var T,F;this.length>D.length?(T=this,F=D):(T=D,F=this);for(var B=0;B<F.length;B++)this.words[B]=T.words[B]^F.words[B];if(this!==T)for(;B<T.length;B++)this.words[B]=T.words[B];return this.length=T.length,this.strip()},o.prototype.ixor=function(D){return n((this.negative|D.negative)===0),this.iuxor(D)},o.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},o.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},o.prototype.inotn=function(D){n(typeof D=="number"&&D>=0);var T=Math.ceil(D/26)|0,F=D%26;this._expand(T),F>0&&T--;for(var B=0;B<T;B++)this.words[B]=~this.words[B]&67108863;return F>0&&(this.words[B]=~this.words[B]&67108863>>26-F),this.strip()},o.prototype.notn=function(D){return this.clone().inotn(D)},o.prototype.setn=function(D,T){n(typeof D=="number"&&D>=0);var F=D/26|0,B=D%26;return this._expand(F+1),T?this.words[F]=this.words[F]|1<<B:this.words[F]=this.words[F]&~(1<<B),this.strip()},o.prototype.iadd=function(D){var T;if(this.negative!==0&&D.negative===0)return this.negative=0,T=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,T=this.isub(D),D.negative=1,T._normSign();var F,B;this.length>D.length?(F=this,B=D):(F=D,B=this);for(var U=0,G=0;G<B.length;G++)T=(F.words[G]|0)+(B.words[G]|0)+U,this.words[G]=T&67108863,U=T>>>26;for(;U!==0&&G<F.length;G++)T=(F.words[G]|0)+U,this.words[G]=T&67108863,U=T>>>26;if(this.length=F.length,U!==0)this.words[this.length]=U,this.length++;else if(F!==this)for(;G<F.length;G++)this.words[G]=F.words[G];return this},o.prototype.add=function(D){var T;return D.negative!==0&&this.negative===0?(D.negative=0,T=this.sub(D),D.negative^=1,T):D.negative===0&&this.negative!==0?(this.negative=0,T=D.sub(this),this.negative=1,T):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},o.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var T=this.iadd(D);return D.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var F=this.cmp(D);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,U;F>0?(B=this,U=D):(B=D,U=this);for(var G=0,Z=0;Z<U.length;Z++)T=(B.words[Z]|0)-(U.words[Z]|0)+G,G=T>>26,this.words[Z]=T&67108863;for(;G!==0&&Z<B.length;Z++)T=(B.words[Z]|0)+G,G=T>>26,this.words[Z]=T&67108863;if(G===0&&Z<B.length&&B!==this)for(;Z<B.length;Z++)this.words[Z]=B.words[Z];return this.length=Math.max(this.length,Z),B!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(D){return this.clone().isub(D)};function v($,D,T){T.negative=D.negative^$.negative;var F=$.length+D.length|0;T.length=F,F=F-1|0;var B=$.words[0]|0,U=D.words[0]|0,G=B*U,Z=G&67108863,z=G/67108864|0;T.words[0]=Z;for(var O=1;O<F;O++){for(var Y=z>>>26,fe=z&67108863,ne=Math.min(O,D.length-1),we=Math.max(0,O-$.length+1);we<=ne;we++){var Ie=O-we|0;B=$.words[Ie]|0,U=D.words[we]|0,G=B*U+fe,Y+=G/67108864|0,fe=G&67108863}T.words[O]=fe|0,z=Y|0}return z!==0?T.words[O]=z|0:T.length--,T.strip()}var b=function(D,T,F){var B=D.words,U=T.words,G=F.words,Z=0,z,O,Y,fe=B[0]|0,ne=fe&8191,we=fe>>>13,Ie=B[1]|0,je=Ie&8191,dt=Ie>>>13,At=B[2]|0,Me=At&8191,st=At>>>13,bt=B[3]|0,tt=bt&8191,tn=bt>>>13,Zt=B[4]|0,nn=Zt&8191,On=Zt>>>13,Tn=B[5]|0,ei=Tn&8191,Ln=Tn>>>13,Mn=B[6]|0,Pt=Mn&8191,pn=Mn>>>13,mi=B[7]|0,Te=mi&8191,Fe=mi>>>13,pt=B[8]|0,at=pt&8191,Ct=pt>>>13,wi=B[9]|0,Vt=wi&8191,kt=wi>>>13,Kt=U[0]|0,Gt=Kt&8191,Bt=Kt>>>13,fr=U[1]|0,ti=fr&8191,Ve=fr>>>13,Pa=U[2]|0,$n=Pa&8191,ni=Pa>>>13,Gs=U[3]|0,vn=Gs&8191,ir=Gs>>>13,ol=U[4]|0,Ki=ol&8191,Ye=ol>>>13,is=U[5]|0,ke=is&8191,Ee=is>>>13,Ae=U[6]|0,se=Ae&8191,ae=Ae>>>13,pe=U[7]|0,J=pe&8191,ve=pe>>>13,He=U[8]|0,Re=He&8191,ct=He>>>13,qt=U[9]|0,k=qt&8191,W=qt>>>13;F.negative=D.negative^T.negative,F.length=19,z=Math.imul(ne,Gt),O=Math.imul(ne,Bt),O=O+Math.imul(we,Gt)|0,Y=Math.imul(we,Bt);var te=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(te>>>26)|0,te&=67108863,z=Math.imul(je,Gt),O=Math.imul(je,Bt),O=O+Math.imul(dt,Gt)|0,Y=Math.imul(dt,Bt),z=z+Math.imul(ne,ti)|0,O=O+Math.imul(ne,Ve)|0,O=O+Math.imul(we,ti)|0,Y=Y+Math.imul(we,Ve)|0;var ie=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(ie>>>26)|0,ie&=67108863,z=Math.imul(Me,Gt),O=Math.imul(Me,Bt),O=O+Math.imul(st,Gt)|0,Y=Math.imul(st,Bt),z=z+Math.imul(je,ti)|0,O=O+Math.imul(je,Ve)|0,O=O+Math.imul(dt,ti)|0,Y=Y+Math.imul(dt,Ve)|0,z=z+Math.imul(ne,$n)|0,O=O+Math.imul(ne,ni)|0,O=O+Math.imul(we,$n)|0,Y=Y+Math.imul(we,ni)|0;var me=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(me>>>26)|0,me&=67108863,z=Math.imul(tt,Gt),O=Math.imul(tt,Bt),O=O+Math.imul(tn,Gt)|0,Y=Math.imul(tn,Bt),z=z+Math.imul(Me,ti)|0,O=O+Math.imul(Me,Ve)|0,O=O+Math.imul(st,ti)|0,Y=Y+Math.imul(st,Ve)|0,z=z+Math.imul(je,$n)|0,O=O+Math.imul(je,ni)|0,O=O+Math.imul(dt,$n)|0,Y=Y+Math.imul(dt,ni)|0,z=z+Math.imul(ne,vn)|0,O=O+Math.imul(ne,ir)|0,O=O+Math.imul(we,vn)|0,Y=Y+Math.imul(we,ir)|0;var le=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(le>>>26)|0,le&=67108863,z=Math.imul(nn,Gt),O=Math.imul(nn,Bt),O=O+Math.imul(On,Gt)|0,Y=Math.imul(On,Bt),z=z+Math.imul(tt,ti)|0,O=O+Math.imul(tt,Ve)|0,O=O+Math.imul(tn,ti)|0,Y=Y+Math.imul(tn,Ve)|0,z=z+Math.imul(Me,$n)|0,O=O+Math.imul(Me,ni)|0,O=O+Math.imul(st,$n)|0,Y=Y+Math.imul(st,ni)|0,z=z+Math.imul(je,vn)|0,O=O+Math.imul(je,ir)|0,O=O+Math.imul(dt,vn)|0,Y=Y+Math.imul(dt,ir)|0,z=z+Math.imul(ne,Ki)|0,O=O+Math.imul(ne,Ye)|0,O=O+Math.imul(we,Ki)|0,Y=Y+Math.imul(we,Ye)|0;var De=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(De>>>26)|0,De&=67108863,z=Math.imul(ei,Gt),O=Math.imul(ei,Bt),O=O+Math.imul(Ln,Gt)|0,Y=Math.imul(Ln,Bt),z=z+Math.imul(nn,ti)|0,O=O+Math.imul(nn,Ve)|0,O=O+Math.imul(On,ti)|0,Y=Y+Math.imul(On,Ve)|0,z=z+Math.imul(tt,$n)|0,O=O+Math.imul(tt,ni)|0,O=O+Math.imul(tn,$n)|0,Y=Y+Math.imul(tn,ni)|0,z=z+Math.imul(Me,vn)|0,O=O+Math.imul(Me,ir)|0,O=O+Math.imul(st,vn)|0,Y=Y+Math.imul(st,ir)|0,z=z+Math.imul(je,Ki)|0,O=O+Math.imul(je,Ye)|0,O=O+Math.imul(dt,Ki)|0,Y=Y+Math.imul(dt,Ye)|0,z=z+Math.imul(ne,ke)|0,O=O+Math.imul(ne,Ee)|0,O=O+Math.imul(we,ke)|0,Y=Y+Math.imul(we,Ee)|0;var Pe=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,z=Math.imul(Pt,Gt),O=Math.imul(Pt,Bt),O=O+Math.imul(pn,Gt)|0,Y=Math.imul(pn,Bt),z=z+Math.imul(ei,ti)|0,O=O+Math.imul(ei,Ve)|0,O=O+Math.imul(Ln,ti)|0,Y=Y+Math.imul(Ln,Ve)|0,z=z+Math.imul(nn,$n)|0,O=O+Math.imul(nn,ni)|0,O=O+Math.imul(On,$n)|0,Y=Y+Math.imul(On,ni)|0,z=z+Math.imul(tt,vn)|0,O=O+Math.imul(tt,ir)|0,O=O+Math.imul(tn,vn)|0,Y=Y+Math.imul(tn,ir)|0,z=z+Math.imul(Me,Ki)|0,O=O+Math.imul(Me,Ye)|0,O=O+Math.imul(st,Ki)|0,Y=Y+Math.imul(st,Ye)|0,z=z+Math.imul(je,ke)|0,O=O+Math.imul(je,Ee)|0,O=O+Math.imul(dt,ke)|0,Y=Y+Math.imul(dt,Ee)|0,z=z+Math.imul(ne,se)|0,O=O+Math.imul(ne,ae)|0,O=O+Math.imul(we,se)|0,Y=Y+Math.imul(we,ae)|0;var Ze=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,z=Math.imul(Te,Gt),O=Math.imul(Te,Bt),O=O+Math.imul(Fe,Gt)|0,Y=Math.imul(Fe,Bt),z=z+Math.imul(Pt,ti)|0,O=O+Math.imul(Pt,Ve)|0,O=O+Math.imul(pn,ti)|0,Y=Y+Math.imul(pn,Ve)|0,z=z+Math.imul(ei,$n)|0,O=O+Math.imul(ei,ni)|0,O=O+Math.imul(Ln,$n)|0,Y=Y+Math.imul(Ln,ni)|0,z=z+Math.imul(nn,vn)|0,O=O+Math.imul(nn,ir)|0,O=O+Math.imul(On,vn)|0,Y=Y+Math.imul(On,ir)|0,z=z+Math.imul(tt,Ki)|0,O=O+Math.imul(tt,Ye)|0,O=O+Math.imul(tn,Ki)|0,Y=Y+Math.imul(tn,Ye)|0,z=z+Math.imul(Me,ke)|0,O=O+Math.imul(Me,Ee)|0,O=O+Math.imul(st,ke)|0,Y=Y+Math.imul(st,Ee)|0,z=z+Math.imul(je,se)|0,O=O+Math.imul(je,ae)|0,O=O+Math.imul(dt,se)|0,Y=Y+Math.imul(dt,ae)|0,z=z+Math.imul(ne,J)|0,O=O+Math.imul(ne,ve)|0,O=O+Math.imul(we,J)|0,Y=Y+Math.imul(we,ve)|0;var ot=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(ot>>>26)|0,ot&=67108863,z=Math.imul(at,Gt),O=Math.imul(at,Bt),O=O+Math.imul(Ct,Gt)|0,Y=Math.imul(Ct,Bt),z=z+Math.imul(Te,ti)|0,O=O+Math.imul(Te,Ve)|0,O=O+Math.imul(Fe,ti)|0,Y=Y+Math.imul(Fe,Ve)|0,z=z+Math.imul(Pt,$n)|0,O=O+Math.imul(Pt,ni)|0,O=O+Math.imul(pn,$n)|0,Y=Y+Math.imul(pn,ni)|0,z=z+Math.imul(ei,vn)|0,O=O+Math.imul(ei,ir)|0,O=O+Math.imul(Ln,vn)|0,Y=Y+Math.imul(Ln,ir)|0,z=z+Math.imul(nn,Ki)|0,O=O+Math.imul(nn,Ye)|0,O=O+Math.imul(On,Ki)|0,Y=Y+Math.imul(On,Ye)|0,z=z+Math.imul(tt,ke)|0,O=O+Math.imul(tt,Ee)|0,O=O+Math.imul(tn,ke)|0,Y=Y+Math.imul(tn,Ee)|0,z=z+Math.imul(Me,se)|0,O=O+Math.imul(Me,ae)|0,O=O+Math.imul(st,se)|0,Y=Y+Math.imul(st,ae)|0,z=z+Math.imul(je,J)|0,O=O+Math.imul(je,ve)|0,O=O+Math.imul(dt,J)|0,Y=Y+Math.imul(dt,ve)|0,z=z+Math.imul(ne,Re)|0,O=O+Math.imul(ne,ct)|0,O=O+Math.imul(we,Re)|0,Y=Y+Math.imul(we,ct)|0;var Tt=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,z=Math.imul(Vt,Gt),O=Math.imul(Vt,Bt),O=O+Math.imul(kt,Gt)|0,Y=Math.imul(kt,Bt),z=z+Math.imul(at,ti)|0,O=O+Math.imul(at,Ve)|0,O=O+Math.imul(Ct,ti)|0,Y=Y+Math.imul(Ct,Ve)|0,z=z+Math.imul(Te,$n)|0,O=O+Math.imul(Te,ni)|0,O=O+Math.imul(Fe,$n)|0,Y=Y+Math.imul(Fe,ni)|0,z=z+Math.imul(Pt,vn)|0,O=O+Math.imul(Pt,ir)|0,O=O+Math.imul(pn,vn)|0,Y=Y+Math.imul(pn,ir)|0,z=z+Math.imul(ei,Ki)|0,O=O+Math.imul(ei,Ye)|0,O=O+Math.imul(Ln,Ki)|0,Y=Y+Math.imul(Ln,Ye)|0,z=z+Math.imul(nn,ke)|0,O=O+Math.imul(nn,Ee)|0,O=O+Math.imul(On,ke)|0,Y=Y+Math.imul(On,Ee)|0,z=z+Math.imul(tt,se)|0,O=O+Math.imul(tt,ae)|0,O=O+Math.imul(tn,se)|0,Y=Y+Math.imul(tn,ae)|0,z=z+Math.imul(Me,J)|0,O=O+Math.imul(Me,ve)|0,O=O+Math.imul(st,J)|0,Y=Y+Math.imul(st,ve)|0,z=z+Math.imul(je,Re)|0,O=O+Math.imul(je,ct)|0,O=O+Math.imul(dt,Re)|0,Y=Y+Math.imul(dt,ct)|0,z=z+Math.imul(ne,k)|0,O=O+Math.imul(ne,W)|0,O=O+Math.imul(we,k)|0,Y=Y+Math.imul(we,W)|0;var Ft=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,z=Math.imul(Vt,ti),O=Math.imul(Vt,Ve),O=O+Math.imul(kt,ti)|0,Y=Math.imul(kt,Ve),z=z+Math.imul(at,$n)|0,O=O+Math.imul(at,ni)|0,O=O+Math.imul(Ct,$n)|0,Y=Y+Math.imul(Ct,ni)|0,z=z+Math.imul(Te,vn)|0,O=O+Math.imul(Te,ir)|0,O=O+Math.imul(Fe,vn)|0,Y=Y+Math.imul(Fe,ir)|0,z=z+Math.imul(Pt,Ki)|0,O=O+Math.imul(Pt,Ye)|0,O=O+Math.imul(pn,Ki)|0,Y=Y+Math.imul(pn,Ye)|0,z=z+Math.imul(ei,ke)|0,O=O+Math.imul(ei,Ee)|0,O=O+Math.imul(Ln,ke)|0,Y=Y+Math.imul(Ln,Ee)|0,z=z+Math.imul(nn,se)|0,O=O+Math.imul(nn,ae)|0,O=O+Math.imul(On,se)|0,Y=Y+Math.imul(On,ae)|0,z=z+Math.imul(tt,J)|0,O=O+Math.imul(tt,ve)|0,O=O+Math.imul(tn,J)|0,Y=Y+Math.imul(tn,ve)|0,z=z+Math.imul(Me,Re)|0,O=O+Math.imul(Me,ct)|0,O=O+Math.imul(st,Re)|0,Y=Y+Math.imul(st,ct)|0,z=z+Math.imul(je,k)|0,O=O+Math.imul(je,W)|0,O=O+Math.imul(dt,k)|0,Y=Y+Math.imul(dt,W)|0;var Ot=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,z=Math.imul(Vt,$n),O=Math.imul(Vt,ni),O=O+Math.imul(kt,$n)|0,Y=Math.imul(kt,ni),z=z+Math.imul(at,vn)|0,O=O+Math.imul(at,ir)|0,O=O+Math.imul(Ct,vn)|0,Y=Y+Math.imul(Ct,ir)|0,z=z+Math.imul(Te,Ki)|0,O=O+Math.imul(Te,Ye)|0,O=O+Math.imul(Fe,Ki)|0,Y=Y+Math.imul(Fe,Ye)|0,z=z+Math.imul(Pt,ke)|0,O=O+Math.imul(Pt,Ee)|0,O=O+Math.imul(pn,ke)|0,Y=Y+Math.imul(pn,Ee)|0,z=z+Math.imul(ei,se)|0,O=O+Math.imul(ei,ae)|0,O=O+Math.imul(Ln,se)|0,Y=Y+Math.imul(Ln,ae)|0,z=z+Math.imul(nn,J)|0,O=O+Math.imul(nn,ve)|0,O=O+Math.imul(On,J)|0,Y=Y+Math.imul(On,ve)|0,z=z+Math.imul(tt,Re)|0,O=O+Math.imul(tt,ct)|0,O=O+Math.imul(tn,Re)|0,Y=Y+Math.imul(tn,ct)|0,z=z+Math.imul(Me,k)|0,O=O+Math.imul(Me,W)|0,O=O+Math.imul(st,k)|0,Y=Y+Math.imul(st,W)|0;var wt=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(wt>>>26)|0,wt&=67108863,z=Math.imul(Vt,vn),O=Math.imul(Vt,ir),O=O+Math.imul(kt,vn)|0,Y=Math.imul(kt,ir),z=z+Math.imul(at,Ki)|0,O=O+Math.imul(at,Ye)|0,O=O+Math.imul(Ct,Ki)|0,Y=Y+Math.imul(Ct,Ye)|0,z=z+Math.imul(Te,ke)|0,O=O+Math.imul(Te,Ee)|0,O=O+Math.imul(Fe,ke)|0,Y=Y+Math.imul(Fe,Ee)|0,z=z+Math.imul(Pt,se)|0,O=O+Math.imul(Pt,ae)|0,O=O+Math.imul(pn,se)|0,Y=Y+Math.imul(pn,ae)|0,z=z+Math.imul(ei,J)|0,O=O+Math.imul(ei,ve)|0,O=O+Math.imul(Ln,J)|0,Y=Y+Math.imul(Ln,ve)|0,z=z+Math.imul(nn,Re)|0,O=O+Math.imul(nn,ct)|0,O=O+Math.imul(On,Re)|0,Y=Y+Math.imul(On,ct)|0,z=z+Math.imul(tt,k)|0,O=O+Math.imul(tt,W)|0,O=O+Math.imul(tn,k)|0,Y=Y+Math.imul(tn,W)|0;var si=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(si>>>26)|0,si&=67108863,z=Math.imul(Vt,Ki),O=Math.imul(Vt,Ye),O=O+Math.imul(kt,Ki)|0,Y=Math.imul(kt,Ye),z=z+Math.imul(at,ke)|0,O=O+Math.imul(at,Ee)|0,O=O+Math.imul(Ct,ke)|0,Y=Y+Math.imul(Ct,Ee)|0,z=z+Math.imul(Te,se)|0,O=O+Math.imul(Te,ae)|0,O=O+Math.imul(Fe,se)|0,Y=Y+Math.imul(Fe,ae)|0,z=z+Math.imul(Pt,J)|0,O=O+Math.imul(Pt,ve)|0,O=O+Math.imul(pn,J)|0,Y=Y+Math.imul(pn,ve)|0,z=z+Math.imul(ei,Re)|0,O=O+Math.imul(ei,ct)|0,O=O+Math.imul(Ln,Re)|0,Y=Y+Math.imul(Ln,ct)|0,z=z+Math.imul(nn,k)|0,O=O+Math.imul(nn,W)|0,O=O+Math.imul(On,k)|0,Y=Y+Math.imul(On,W)|0;var zn=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(zn>>>26)|0,zn&=67108863,z=Math.imul(Vt,ke),O=Math.imul(Vt,Ee),O=O+Math.imul(kt,ke)|0,Y=Math.imul(kt,Ee),z=z+Math.imul(at,se)|0,O=O+Math.imul(at,ae)|0,O=O+Math.imul(Ct,se)|0,Y=Y+Math.imul(Ct,ae)|0,z=z+Math.imul(Te,J)|0,O=O+Math.imul(Te,ve)|0,O=O+Math.imul(Fe,J)|0,Y=Y+Math.imul(Fe,ve)|0,z=z+Math.imul(Pt,Re)|0,O=O+Math.imul(Pt,ct)|0,O=O+Math.imul(pn,Re)|0,Y=Y+Math.imul(pn,ct)|0,z=z+Math.imul(ei,k)|0,O=O+Math.imul(ei,W)|0,O=O+Math.imul(Ln,k)|0,Y=Y+Math.imul(Ln,W)|0;var rr=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(rr>>>26)|0,rr&=67108863,z=Math.imul(Vt,se),O=Math.imul(Vt,ae),O=O+Math.imul(kt,se)|0,Y=Math.imul(kt,ae),z=z+Math.imul(at,J)|0,O=O+Math.imul(at,ve)|0,O=O+Math.imul(Ct,J)|0,Y=Y+Math.imul(Ct,ve)|0,z=z+Math.imul(Te,Re)|0,O=O+Math.imul(Te,ct)|0,O=O+Math.imul(Fe,Re)|0,Y=Y+Math.imul(Fe,ct)|0,z=z+Math.imul(Pt,k)|0,O=O+Math.imul(Pt,W)|0,O=O+Math.imul(pn,k)|0,Y=Y+Math.imul(pn,W)|0;var $i=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+($i>>>26)|0,$i&=67108863,z=Math.imul(Vt,J),O=Math.imul(Vt,ve),O=O+Math.imul(kt,J)|0,Y=Math.imul(kt,ve),z=z+Math.imul(at,Re)|0,O=O+Math.imul(at,ct)|0,O=O+Math.imul(Ct,Re)|0,Y=Y+Math.imul(Ct,ct)|0,z=z+Math.imul(Te,k)|0,O=O+Math.imul(Te,W)|0,O=O+Math.imul(Fe,k)|0,Y=Y+Math.imul(Fe,W)|0;var Fa=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,z=Math.imul(Vt,Re),O=Math.imul(Vt,ct),O=O+Math.imul(kt,Re)|0,Y=Math.imul(kt,ct),z=z+Math.imul(at,k)|0,O=O+Math.imul(at,W)|0,O=O+Math.imul(Ct,k)|0,Y=Y+Math.imul(Ct,W)|0;var sl=(Z+z|0)+((O&8191)<<13)|0;Z=(Y+(O>>>13)|0)+(sl>>>26)|0,sl&=67108863,z=Math.imul(Vt,k),O=Math.imul(Vt,W),O=O+Math.imul(kt,k)|0,Y=Math.imul(kt,W);var Og=(Z+z|0)+((O&8191)<<13)|0;return Z=(Y+(O>>>13)|0)+(Og>>>26)|0,Og&=67108863,G[0]=te,G[1]=ie,G[2]=me,G[3]=le,G[4]=De,G[5]=Pe,G[6]=Ze,G[7]=ot,G[8]=Tt,G[9]=Ft,G[10]=Ot,G[11]=wt,G[12]=si,G[13]=zn,G[14]=rr,G[15]=$i,G[16]=Fa,G[17]=sl,G[18]=Og,Z!==0&&(G[19]=Z,F.length++),F};Math.imul||(b=v);function L($,D,T){T.negative=D.negative^$.negative,T.length=$.length+D.length;for(var F=0,B=0,U=0;U<T.length-1;U++){var G=B;B=0;for(var Z=F&67108863,z=Math.min(U,D.length-1),O=Math.max(0,U-$.length+1);O<=z;O++){var Y=U-O,fe=$.words[Y]|0,ne=D.words[O]|0,we=fe*ne,Ie=we&67108863;G=G+(we/67108864|0)|0,Ie=Ie+Z|0,Z=Ie&67108863,G=G+(Ie>>>26)|0,B+=G>>>26,G&=67108863}T.words[U]=Z,F=G,G=B}return F!==0?T.words[U]=F:T.length--,T.strip()}function S($,D,T){var F=new y;return F.mulp($,D,T)}o.prototype.mulTo=function(D,T){var F,B=this.length+D.length;return this.length===10&&D.length===10?F=b(this,D,T):B<63?F=v(this,D,T):B<1024?F=L(this,D,T):F=S(this,D,T),F};function y($,D){this.x=$,this.y=D}y.prototype.makeRBT=function(D){for(var T=new Array(D),F=o.prototype._countBits(D)-1,B=0;B<D;B++)T[B]=this.revBin(B,F,D);return T},y.prototype.revBin=function(D,T,F){if(D===0||D===F-1)return D;for(var B=0,U=0;U<T;U++)B|=(D&1)<<T-U-1,D>>=1;return B},y.prototype.permute=function(D,T,F,B,U,G){for(var Z=0;Z<G;Z++)B[Z]=T[D[Z]],U[Z]=F[D[Z]]},y.prototype.transform=function(D,T,F,B,U,G){this.permute(G,D,T,F,B,U);for(var Z=1;Z<U;Z<<=1)for(var z=Z<<1,O=Math.cos(2*Math.PI/z),Y=Math.sin(2*Math.PI/z),fe=0;fe<U;fe+=z)for(var ne=O,we=Y,Ie=0;Ie<Z;Ie++){var je=F[fe+Ie],dt=B[fe+Ie],At=F[fe+Ie+Z],Me=B[fe+Ie+Z],st=ne*At-we*Me;Me=ne*Me+we*At,At=st,F[fe+Ie]=je+At,B[fe+Ie]=dt+Me,F[fe+Ie+Z]=je-At,B[fe+Ie+Z]=dt-Me,Ie!==z&&(st=O*ne-Y*we,we=O*we+Y*ne,ne=st)}},y.prototype.guessLen13b=function(D,T){var F=Math.max(T,D)|1,B=F&1,U=0;for(F=F/2|0;F;F=F>>>1)U++;return 1<<U+1+B},y.prototype.conjugate=function(D,T,F){if(!(F<=1))for(var B=0;B<F/2;B++){var U=D[B];D[B]=D[F-B-1],D[F-B-1]=U,U=T[B],T[B]=-T[F-B-1],T[F-B-1]=-U}},y.prototype.normalize13b=function(D,T){for(var F=0,B=0;B<T/2;B++){var U=Math.round(D[2*B+1]/T)*8192+Math.round(D[2*B]/T)+F;D[B]=U&67108863,U<67108864?F=0:F=U/67108864|0}return D},y.prototype.convert13b=function(D,T,F,B){for(var U=0,G=0;G<T;G++)U=U+(D[G]|0),F[2*G]=U&8191,U=U>>>13,F[2*G+1]=U&8191,U=U>>>13;for(G=2*T;G<B;++G)F[G]=0;n(U===0),n((U&-8192)===0)},y.prototype.stub=function(D){for(var T=new Array(D),F=0;F<D;F++)T[F]=0;return T},y.prototype.mulp=function(D,T,F){var B=2*this.guessLen13b(D.length,T.length),U=this.makeRBT(B),G=this.stub(B),Z=new Array(B),z=new Array(B),O=new Array(B),Y=new Array(B),fe=new Array(B),ne=new Array(B),we=F.words;we.length=B,this.convert13b(D.words,D.length,Z,B),this.convert13b(T.words,T.length,Y,B),this.transform(Z,G,z,O,B,U),this.transform(Y,G,fe,ne,B,U);for(var Ie=0;Ie<B;Ie++){var je=z[Ie]*fe[Ie]-O[Ie]*ne[Ie];O[Ie]=z[Ie]*ne[Ie]+O[Ie]*fe[Ie],z[Ie]=je}return this.conjugate(z,O,B),this.transform(z,O,we,G,B,U),this.conjugate(we,G,B),this.normalize13b(we,B),F.negative=D.negative^T.negative,F.length=D.length+T.length,F.strip()},o.prototype.mul=function(D){var T=new o(null);return T.words=new Array(this.length+D.length),this.mulTo(D,T)},o.prototype.mulf=function(D){var T=new o(null);return T.words=new Array(this.length+D.length),S(this,D,T)},o.prototype.imul=function(D){return this.clone().mulTo(D,this)},o.prototype.imuln=function(D){n(typeof D=="number"),n(D<67108864);for(var T=0,F=0;F<this.length;F++){var B=(this.words[F]|0)*D,U=(B&67108863)+(T&67108863);T>>=26,T+=B/67108864|0,T+=U>>>26,this.words[F]=U&67108863}return T!==0&&(this.words[F]=T,this.length++),this},o.prototype.muln=function(D){return this.clone().imuln(D)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(D){var T=m(D);if(T.length===0)return new o(1);for(var F=this,B=0;B<T.length&&T[B]===0;B++,F=F.sqr());if(++B<T.length)for(var U=F.sqr();B<T.length;B++,U=U.sqr())T[B]!==0&&(F=F.mul(U));return F},o.prototype.iushln=function(D){n(typeof D=="number"&&D>=0);var T=D%26,F=(D-T)/26,B=67108863>>>26-T<<26-T,U;if(T!==0){var G=0;for(U=0;U<this.length;U++){var Z=this.words[U]&B,z=(this.words[U]|0)-Z<<T;this.words[U]=z|G,G=Z>>>26-T}G&&(this.words[U]=G,this.length++)}if(F!==0){for(U=this.length-1;U>=0;U--)this.words[U+F]=this.words[U];for(U=0;U<F;U++)this.words[U]=0;this.length+=F}return this.strip()},o.prototype.ishln=function(D){return n(this.negative===0),this.iushln(D)},o.prototype.iushrn=function(D,T,F){n(typeof D=="number"&&D>=0);var B;T?B=(T-T%26)/26:B=0;var U=D%26,G=Math.min((D-U)/26,this.length),Z=67108863^67108863>>>U<<U,z=F;if(B-=G,B=Math.max(0,B),z){for(var O=0;O<G;O++)z.words[O]=this.words[O];z.length=G}if(G!==0)if(this.length>G)for(this.length-=G,O=0;O<this.length;O++)this.words[O]=this.words[O+G];else this.words[0]=0,this.length=1;var Y=0;for(O=this.length-1;O>=0&&(Y!==0||O>=B);O--){var fe=this.words[O]|0;this.words[O]=Y<<26-U|fe>>>U,Y=fe&Z}return z&&Y!==0&&(z.words[z.length++]=Y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(D,T,F){return n(this.negative===0),this.iushrn(D,T,F)},o.prototype.shln=function(D){return this.clone().ishln(D)},o.prototype.ushln=function(D){return this.clone().iushln(D)},o.prototype.shrn=function(D){return this.clone().ishrn(D)},o.prototype.ushrn=function(D){return this.clone().iushrn(D)},o.prototype.testn=function(D){n(typeof D=="number"&&D>=0);var T=D%26,F=(D-T)/26,B=1<<T;if(this.length<=F)return!1;var U=this.words[F];return!!(U&B)},o.prototype.imaskn=function(D){n(typeof D=="number"&&D>=0);var T=D%26,F=(D-T)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(T!==0&&F++,this.length=Math.min(F,this.length),T!==0){var B=67108863^67108863>>>T<<T;this.words[this.length-1]&=B}return this.strip()},o.prototype.maskn=function(D){return this.clone().imaskn(D)},o.prototype.iaddn=function(D){return n(typeof D=="number"),n(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},o.prototype._iaddn=function(D){this.words[0]+=D;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},o.prototype.isubn=function(D){if(n(typeof D=="number"),n(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this.strip()},o.prototype.addn=function(D){return this.clone().iaddn(D)},o.prototype.subn=function(D){return this.clone().isubn(D)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(D,T,F){var B=D.length+F,U;this._expand(B);var G,Z=0;for(U=0;U<D.length;U++){G=(this.words[U+F]|0)+Z;var z=(D.words[U]|0)*T;G-=z&67108863,Z=(G>>26)-(z/67108864|0),this.words[U+F]=G&67108863}for(;U<this.length-F;U++)G=(this.words[U+F]|0)+Z,Z=G>>26,this.words[U+F]=G&67108863;if(Z===0)return this.strip();for(n(Z===-1),Z=0,U=0;U<this.length;U++)G=-(this.words[U]|0)+Z,Z=G>>26,this.words[U]=G&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(D,T){var F=this.length-D.length,B=this.clone(),U=D,G=U.words[U.length-1]|0,Z=this._countBits(G);F=26-Z,F!==0&&(U=U.ushln(F),B.iushln(F),G=U.words[U.length-1]|0);var z=B.length-U.length,O;if(T!=="mod"){O=new o(null),O.length=z+1,O.words=new Array(O.length);for(var Y=0;Y<O.length;Y++)O.words[Y]=0}var fe=B.clone()._ishlnsubmul(U,1,z);fe.negative===0&&(B=fe,O&&(O.words[z]=1));for(var ne=z-1;ne>=0;ne--){var we=(B.words[U.length+ne]|0)*67108864+(B.words[U.length+ne-1]|0);for(we=Math.min(we/G|0,67108863),B._ishlnsubmul(U,we,ne);B.negative!==0;)we--,B.negative=0,B._ishlnsubmul(U,1,ne),B.isZero()||(B.negative^=1);O&&(O.words[ne]=we)}return O&&O.strip(),B.strip(),T!=="div"&&F!==0&&B.iushrn(F),{div:O||null,mod:B}},o.prototype.divmod=function(D,T,F){if(n(!D.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var B,U,G;return this.negative!==0&&D.negative===0?(G=this.neg().divmod(D,T),T!=="mod"&&(B=G.div.neg()),T!=="div"&&(U=G.mod.neg(),F&&U.negative!==0&&U.iadd(D)),{div:B,mod:U}):this.negative===0&&D.negative!==0?(G=this.divmod(D.neg(),T),T!=="mod"&&(B=G.div.neg()),{div:B,mod:G.mod}):this.negative&D.negative?(G=this.neg().divmod(D.neg(),T),T!=="div"&&(U=G.mod.neg(),F&&U.negative!==0&&U.isub(D)),{div:G.div,mod:U}):D.length>this.length||this.cmp(D)<0?{div:new o(0),mod:this}:D.length===1?T==="div"?{div:this.divn(D.words[0]),mod:null}:T==="mod"?{div:null,mod:new o(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new o(this.modn(D.words[0]))}:this._wordDiv(D,T)},o.prototype.div=function(D){return this.divmod(D,"div",!1).div},o.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},o.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},o.prototype.divRound=function(D){var T=this.divmod(D);if(T.mod.isZero())return T.div;var F=T.div.negative!==0?T.mod.isub(D):T.mod,B=D.ushrn(1),U=D.andln(1),G=F.cmp(B);return G<0||U===1&&G===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},o.prototype.modn=function(D){n(D<=67108863);for(var T=(1<<26)%D,F=0,B=this.length-1;B>=0;B--)F=(T*F+(this.words[B]|0))%D;return F},o.prototype.idivn=function(D){n(D<=67108863);for(var T=0,F=this.length-1;F>=0;F--){var B=(this.words[F]|0)+T*67108864;this.words[F]=B/D|0,T=B%D}return this.strip()},o.prototype.divn=function(D){return this.clone().idivn(D)},o.prototype.egcd=function(D){n(D.negative===0),n(!D.isZero());var T=this,F=D.clone();T.negative!==0?T=T.umod(D):T=T.clone();for(var B=new o(1),U=new o(0),G=new o(0),Z=new o(1),z=0;T.isEven()&&F.isEven();)T.iushrn(1),F.iushrn(1),++z;for(var O=F.clone(),Y=T.clone();!T.isZero();){for(var fe=0,ne=1;!(T.words[0]&ne)&&fe<26;++fe,ne<<=1);if(fe>0)for(T.iushrn(fe);fe-- >0;)(B.isOdd()||U.isOdd())&&(B.iadd(O),U.isub(Y)),B.iushrn(1),U.iushrn(1);for(var we=0,Ie=1;!(F.words[0]&Ie)&&we<26;++we,Ie<<=1);if(we>0)for(F.iushrn(we);we-- >0;)(G.isOdd()||Z.isOdd())&&(G.iadd(O),Z.isub(Y)),G.iushrn(1),Z.iushrn(1);T.cmp(F)>=0?(T.isub(F),B.isub(G),U.isub(Z)):(F.isub(T),G.isub(B),Z.isub(U))}return{a:G,b:Z,gcd:F.iushln(z)}},o.prototype._invmp=function(D){n(D.negative===0),n(!D.isZero());var T=this,F=D.clone();T.negative!==0?T=T.umod(D):T=T.clone();for(var B=new o(1),U=new o(0),G=F.clone();T.cmpn(1)>0&&F.cmpn(1)>0;){for(var Z=0,z=1;!(T.words[0]&z)&&Z<26;++Z,z<<=1);if(Z>0)for(T.iushrn(Z);Z-- >0;)B.isOdd()&&B.iadd(G),B.iushrn(1);for(var O=0,Y=1;!(F.words[0]&Y)&&O<26;++O,Y<<=1);if(O>0)for(F.iushrn(O);O-- >0;)U.isOdd()&&U.iadd(G),U.iushrn(1);T.cmp(F)>=0?(T.isub(F),B.isub(U)):(F.isub(T),U.isub(B))}var fe;return T.cmpn(1)===0?fe=B:fe=U,fe.cmpn(0)<0&&fe.iadd(D),fe},o.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var T=this.clone(),F=D.clone();T.negative=0,F.negative=0;for(var B=0;T.isEven()&&F.isEven();B++)T.iushrn(1),F.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;F.isEven();)F.iushrn(1);var U=T.cmp(F);if(U<0){var G=T;T=F,F=G}else if(U===0||F.cmpn(1)===0)break;T.isub(F)}while(!0);return F.iushln(B)},o.prototype.invm=function(D){return this.egcd(D).a.umod(D)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(D){return this.words[0]&D},o.prototype.bincn=function(D){n(typeof D=="number");var T=D%26,F=(D-T)/26,B=1<<T;if(this.length<=F)return this._expand(F+1),this.words[F]|=B,this;for(var U=B,G=F;U!==0&&G<this.length;G++){var Z=this.words[G]|0;Z+=U,U=Z>>>26,Z&=67108863,this.words[G]=Z}return U!==0&&(this.words[G]=U,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(D){var T=D<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this.strip();var F;if(this.length>1)F=1;else{T&&(D=-D),n(D<=67108863,"Number is too big");var B=this.words[0]|0;F=B===D?0:B<D?-1:1}return this.negative!==0?-F|0:F},o.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var T=this.ucmp(D);return this.negative!==0?-T|0:T},o.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var T=0,F=this.length-1;F>=0;F--){var B=this.words[F]|0,U=D.words[F]|0;if(B!==U){B<U?T=-1:B>U&&(T=1);break}}return T},o.prototype.gtn=function(D){return this.cmpn(D)===1},o.prototype.gt=function(D){return this.cmp(D)===1},o.prototype.gten=function(D){return this.cmpn(D)>=0},o.prototype.gte=function(D){return this.cmp(D)>=0},o.prototype.ltn=function(D){return this.cmpn(D)===-1},o.prototype.lt=function(D){return this.cmp(D)===-1},o.prototype.lten=function(D){return this.cmpn(D)<=0},o.prototype.lte=function(D){return this.cmp(D)<=0},o.prototype.eqn=function(D){return this.cmpn(D)===0},o.prototype.eq=function(D){return this.cmp(D)===0},o.red=function(D){return new K(D)},o.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(D){return this.red=D,this},o.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},o.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},o.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},o.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},o.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},o.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},o.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},o.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var E={k256:null,p224:null,p192:null,p25519:null};function A($,D){this.name=$,this.p=new o(D,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}A.prototype._tmp=function(){var D=new o(null);return D.words=new Array(Math.ceil(this.n/13)),D},A.prototype.ireduce=function(D){var T=D,F;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),F=T.bitLength();while(F>this.n);var B=F<this.n?-1:T.ucmp(this.p);return B===0?(T.words[0]=0,T.length=1):B>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},A.prototype.split=function(D,T){D.iushrn(this.n,0,T)},A.prototype.imulK=function(D){return D.imul(this.k)};function N(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(N,A),N.prototype.split=function(D,T){for(var F=4194303,B=Math.min(D.length,9),U=0;U<B;U++)T.words[U]=D.words[U];if(T.length=B,D.length<=9){D.words[0]=0,D.length=1;return}var G=D.words[9];for(T.words[T.length++]=G&F,U=10;U<D.length;U++){var Z=D.words[U]|0;D.words[U-10]=(Z&F)<<4|G>>>22,G=Z}G>>>=22,D.words[U-10]=G,G===0&&D.length>10?D.length-=10:D.length-=9},N.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var T=0,F=0;F<D.length;F++){var B=D.words[F]|0;T+=B*977,D.words[F]=T&67108863,T=B*64+(T/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function V(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(V,A);function R(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(R,A);function M(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(M,A),M.prototype.imulK=function(D){for(var T=0,F=0;F<D.length;F++){var B=(D.words[F]|0)*19+T,U=B&67108863;B>>>=26,D.words[F]=U,T=B}return T!==0&&(D.words[D.length++]=T),D},o._prime=function(D){if(E[D])return E[D];var T;if(D==="k256")T=new N;else if(D==="p224")T=new V;else if(D==="p192")T=new R;else if(D==="p25519")T=new M;else throw new Error("Unknown prime "+D);return E[D]=T,T};function K($){if(typeof $=="string"){var D=o._prime($);this.m=D.p,this.prime=D}else n($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}K.prototype._verify1=function(D){n(D.negative===0,"red works only with positives"),n(D.red,"red works only with red numbers")},K.prototype._verify2=function(D,T){n((D.negative|T.negative)===0,"red works only with positives"),n(D.red&&D.red===T.red,"red works only with red numbers")},K.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},K.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},K.prototype.add=function(D,T){this._verify2(D,T);var F=D.add(T);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},K.prototype.iadd=function(D,T){this._verify2(D,T);var F=D.iadd(T);return F.cmp(this.m)>=0&&F.isub(this.m),F},K.prototype.sub=function(D,T){this._verify2(D,T);var F=D.sub(T);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},K.prototype.isub=function(D,T){this._verify2(D,T);var F=D.isub(T);return F.cmpn(0)<0&&F.iadd(this.m),F},K.prototype.shl=function(D,T){return this._verify1(D),this.imod(D.ushln(T))},K.prototype.imul=function(D,T){return this._verify2(D,T),this.imod(D.imul(T))},K.prototype.mul=function(D,T){return this._verify2(D,T),this.imod(D.mul(T))},K.prototype.isqr=function(D){return this.imul(D,D.clone())},K.prototype.sqr=function(D){return this.mul(D,D)},K.prototype.sqrt=function(D){if(D.isZero())return D.clone();var T=this.m.andln(3);if(n(T%2===1),T===3){var F=this.m.add(new o(1)).iushrn(2);return this.pow(D,F)}for(var B=this.m.subn(1),U=0;!B.isZero()&&B.andln(1)===0;)U++,B.iushrn(1);n(!B.isZero());var G=new o(1).toRed(this),Z=G.redNeg(),z=this.m.subn(1).iushrn(1),O=this.m.bitLength();for(O=new o(2*O*O).toRed(this);this.pow(O,z).cmp(Z)!==0;)O.redIAdd(Z);for(var Y=this.pow(O,B),fe=this.pow(D,B.addn(1).iushrn(1)),ne=this.pow(D,B),we=U;ne.cmp(G)!==0;){for(var Ie=ne,je=0;Ie.cmp(G)!==0;je++)Ie=Ie.redSqr();n(je<we);var dt=this.pow(Y,new o(1).iushln(we-je-1));fe=fe.redMul(dt),Y=dt.redSqr(),ne=ne.redMul(Y),we=je}return fe},K.prototype.invm=function(D){var T=D._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},K.prototype.pow=function(D,T){if(T.isZero())return new o(1).toRed(this);if(T.cmpn(1)===0)return D.clone();var F=4,B=new Array(1<<F);B[0]=new o(1).toRed(this),B[1]=D;for(var U=2;U<B.length;U++)B[U]=this.mul(B[U-1],D);var G=B[0],Z=0,z=0,O=T.bitLength()%26;for(O===0&&(O=26),U=T.length-1;U>=0;U--){for(var Y=T.words[U],fe=O-1;fe>=0;fe--){var ne=Y>>fe&1;if(G!==B[0]&&(G=this.sqr(G)),ne===0&&Z===0){z=0;continue}Z<<=1,Z|=ne,z++,!(z!==F&&(U!==0||fe!==0))&&(G=this.mul(G,B[Z]),z=0,Z=0)}O=26}return G},K.prototype.convertTo=function(D){var T=D.umod(this.m);return T===D?T.clone():T},K.prototype.convertFrom=function(D){var T=D.clone();return T.red=null,T},o.mont=function(D){return new X(D)};function X($){K.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(X,K),X.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},X.prototype.convertFrom=function(D){var T=this.imod(D.mul(this.rinv));return T.red=null,T},X.prototype.imul=function(D,T){if(D.isZero()||T.isZero())return D.words[0]=0,D.length=1,D;var F=D.imul(T),B=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=F.isub(B).iushrn(this.shift),G=U;return U.cmp(this.m)>=0?G=U.isub(this.m):U.cmpn(0)<0&&(G=U.iadd(this.m)),G._forceRed(this)},X.prototype.mul=function(D,T){if(D.isZero()||T.isZero())return new o(0)._forceRed(this);var F=D.mul(T),B=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=F.isub(B).iushrn(this.shift),G=U;return U.cmp(this.m)>=0?G=U.isub(this.m):U.cmpn(0)<0&&(G=U.iadd(this.m)),G._forceRed(this)},X.prototype.invm=function(D){var T=this.imod(D._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(i,ea)}(M4)),M4.exports}/**@license
 * LIPS is Pretty Simple - simple scheme like lisp in JavaScript
 *
 * Copyright (c) 2018-2019 Jakub T. Jankiewicz <https://jcubic.pl/me>
 * Released under the MIT license
 *
 * includes:
 *
 * unfetch by Jason Miller (@developit) MIT License
 *
 * includes:
 * contentloaded.js
 *
 * Author: Diego Perini (diego.perini at gmail.com)
 * Summary: cross-browser wrapper for DOMContentLoaded
 * Updated: 20101020
 * License: MIT
 * Version: 1.2
 *
 * URL:
 * http://javascript.nwbox.com/ContentLoaded/
 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
 */(function(i){(function(e,t){i.exports?i.exports=t(e,zht()):e.lips=t(e,e.BN)})(typeof ea<"u"?ea:window,function(e,t,n){function r(k,W){var te=!1,ie=!0,me=k.document,le=me.documentElement,De=me.addEventListener,Pe=De?"addEventListener":"attachEvent",Ze=De?"removeEventListener":"detachEvent",ot=De?"":"on",Tt=function(Ot){Ot.type=="readystatechange"&&me.readyState!="complete"||((Ot.type=="load"?k:me)[Ze](ot+Ot.type,Tt,!1),!te&&(te=!0)&&W.call(k,Ot.type||Ot))},Ft=function(){try{le.doScroll("left")}catch{setTimeout(Ft,50);return}Tt("poll")};if(me.readyState=="complete")W.call(k,"lazy");else{if(!De&&le.doScroll){try{ie=!k.frameElement}catch{}ie&&Ft()}me[Pe](ot+"DOMContentLoaded",Tt,!1),me[Pe](ot+"readystatechange",Tt,!1),k[Pe](ot+"load",Tt,!1)}}e.fetch||(e.fetch=function(k,W){return W=W||{},new Promise((te,ie)=>{let me=new XMLHttpRequest;me.open(W.method||"get",k,!0);for(let De in W.headers)me.setRequestHeader(De,W.headers[De]);me.withCredentials=W.credentials=="include",me.onload=()=>{te(le())},me.onerror=ie,me.send(W.body||null);function le(){let De=[],Pe=[],Ze={},ot;return me.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(Tt,Ft,Ot)=>{De.push(Ft=Ft.toLowerCase()),Pe.push([Ft,Ot]),ot=Ze[Ft],Ze[Ft]=ot?`${ot},${Ot}`:Ot}),{ok:(me.status/100|0)==2,status:me.status,statusText:me.statusText,url:me.responseURL,clone:le,text:()=>Promise.resolve(me.responseText),json:()=>Promise.resolve(me.responseText).then(JSON.parse),blob:()=>Promise.resolve(new Blob([me.response])),headers:{keys:()=>De,entries:()=>Pe,get:Tt=>Ze[Tt.toLowerCase()],has:Tt=>Tt.toLowerCase()in Ze}}}})});var o=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimy]*)$/,s=/^[-+]?[0-9]+([eE][-+]?[0-9]+)?$/,a=/^([-+]?((\.[0-9]+|[0-9]+\.[0-9]+)([eE][-+]?[0-9]+)?)|[0-9]+\.)$/;function u(k){function W(ie){if(ie.match(/^['"]/)){if(ie==='""'||ie==="''")return"";var me=ie[0],le=new RegExp("((^|[^\\\\])(?:\\\\\\\\)*)"+me,"g");ie=ie.replace(le,"$1")}return JSON.parse('"'+ie.replace(/\n/g,"\\n")+'"')}var te=k.match(o);return te?new RegExp(te[1],te[2]):k.match(/['"]/)?W(k):k.match(s)?Ve(parseFloat(k)):k.match(a)?Ve(parseFloat(k),!0):k==="nil"?fe:k==="true"?!0:k==="false"?!1:new O(k)}function d(k){return!(["(",")"].includes(k)||k.match(o)||k.match(/['"]/)||k.match(s)||k.match(a)||["nil","true","false"].includes(k))}var h=/("(?:\\[\S\s]|[^"])*"|\/(?! )[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimy]*(?=\s|\(|\)|$)|;.*)/g,f=/"(?:\\[\S\s]|[^"])*"/g;function p(){var k=Object.keys(S).map(v).join("|");return new RegExp(`("(?:\\\\[\\S\\s]|[^"])*"|\\/(?! )[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimy]*(?=\\s|\\(|\\)|$)|\\(|\\)|'|"(?:\\\\[\\S\\s]|[^"])+|\\n|(?:\\\\[\\S\\s]|[^"])*"|;.*|(?:[-+]?(?:(?:\\.[0-9]+|[0-9]+\\.[0-9]+)(?:[eE][-+]?[0-9]+)?)|[0-9]+\\.)[0-9]|\\.{2,}|${k}|[^(\\s)]+)`,"gim")}function m(k,W=1){return k[k.length-W]}function v(k){if(typeof k=="string"){var W=/([-\\^$[\]()+{}?*.|])/g;return k.replace(W,"\\$1")}}function b(k){var W=p();k=k.replace(/\n\r|\r/g,`
`);var te=0,ie=0,me=[],le=[],De=0;return k.split(h).filter(Boolean).forEach(function(Pe){if(Pe.match(h)){if(De=0,le.length){var Ze=m(le);if(Ze.token.match(/\n/)){var ot=Ze.token.split(`
`).pop();De+=ot.length}else De+=Ze.token.length;De+=Ze.col}var Tt={col:De,line:ie,token:Pe,offset:te};me.push(Tt),le.push(Tt),te+=Pe.length,De+=Pe.length,ie+=(Pe.match(`
`)||[]).length;return}Pe.split(W).filter(Boolean).forEach(function(Ft){var Ot={col:De,line:ie,token:Ft,offset:te};De+=Ft.length,te+=Ft.length,me.push(Ot),le.push(Ot),Ft===`
`&&(++ie,le=[],De=0)})}),me}function L(k,W){return W?b(k):b(k).map(function(te){return te.token.trim()}).filter(function(te){return te&&!te.match(/^;/)})}var S={"'":new O("quote"),"`":new O("quasiquote"),",@":new O("unquote-splicing"),",":new O("unquote")};function y(k){typeof k=="string"&&(k=L(k));var W=[],te=[],ie=null,me=Object.keys(S),le=me.map(Ot=>S[Ot].name),De=0,Pe=!1,Ze=[],ot=[],Tt=0;function Ft(){var Ot=W[W.length-1];Ot instanceof Array&&Ot[0]instanceof O&&le.includes(Ot[0].name)&&W.length>1&&!Ot[0].literal&&(W.pop(),W[W.length-1].length===1&&W[W.length-1][0]instanceof O?W[W.length-1].push(Ot):W[W.length-1]instanceof ne?W[W.length-1].cdr instanceof ne?W[W.length-1]=new ne(W[W.length-1],ne.fromArray(Ot)):W[W.length-1].cdr=ne.fromArray(Ot):W[W.length-1].push(Ot))}if(k.forEach(function(Ot){var wt=W[W.length-1];if(me.indexOf(Ot)!==-1)Tt++,ie=Ot,W.push([S[ie]]),ie||(ot=[]),ot.push(ie);else if(ie&&(Ze.push(ot),ot=[]),Ot==="(")Pe=!0,De++,W.push([]),ie=null,Tt=0;else if(Ot==="."&&!Pe)W[W.length-1]=ne.fromArray(wt);else if(Ot===")"){if(De--,!W.length)throw new Error("Unbalanced parenthesis");if(W.length===1)te.push(W.pop());else if(W.length>1){var si=W.pop();if(wt=W[W.length-1],wt instanceof Array?wt.push(si):wt instanceof ne&&wt.append(ne.fromArray(si)),Ze.length)for(ot=Ze.pop();ot.length;)Ft(),ot.pop();else Ft()}De===0&&W.length&&te.push(W.pop())}else{Pe=!1;var zn=u(Ot);if(ie){for(;Tt--;)W[W.length-1].push(zn),zn=W.pop();Ze.pop(),Tt=0,ie=!1}else zn instanceof O&&le.includes(zn.name)&&(zn.literal=!0);if(wt=W[W.length-1],wt instanceof ne)for(var rr=wt;;)if(rr.cdr===fe){zn instanceof Array?rr.cdr=ne.fromArray(zn):rr.cdr=zn;break}else rr=rr.cdr;else W.length?wt.push(zn):te.push(zn)}}),!k.filter(Ot=>Ot.match(/^[()]$/)).length&&W.length&&(te=te.concat(W),W=[]),W.length)throw new Error("Unbalanced parenthesis 2");return te.map(Ot=>Ot instanceof Array?ne.fromArray(Ot):Ot)}function E(k,W=ie=>ie,te=null){if(Zt(k)){var ie=k.then(W);return te===null?ie:ie.catch(te)}return W(k)}function A(k,W){if(W instanceof RegExp)return te=>String(te).match(W);if(typeof W!="function")throw new Error(`${k} argument need to be a function or RegExp`);return W}function N(k,W,te){return W&&(te?k.__doc__=W:k.__doc__=V(W)),k}function V(k){return k.split(`
`).map(W=>W.trim()).join(`
`)}function R(k,W=1){var te=k.length;if(W<=0)throw Error(`previousSexp: Invlaid argument sexp = ${W}`);e:for(;W--&&te>=0;){for(var ie=1;ie>0;){var me=k[--te];if(!me)break e;me==="("||me.token==="("?ie--:(me===")"||me.token===")")&&ie++}te--}return k.slice(te+1)}function M(k){if(!k||!k.length)return 0;var W=k.length;if(k[W-1].token===`
`)return 0;for(;--W;)if(k[W].token===`
`){var te=(k[W+1]||{}).token;if(te)return te.length}return 0}function K(k,W){return te(k,W)===W.length;function te(ie,me){function le(){return Pe>0&&ot>0&&ie[Pe-1]===me[ot-1]&&ie[Pe+1]===me[ot]}function De(){return ie[Pe]===Symbol.for("symbol")&&!d(me[ot])}for(var Pe=0,Ze={},ot=0;ot<me.length;++ot){if(typeof ie[Pe]>"u")return ot;if(me[ot].trim()){if(ie[Pe]instanceof D){if(ie[Pe].flag==="+"){for(var Tt;ot<me.length&&(Tt=te(ie[Pe].pattern,me.slice(ot)),Tt!==-1);)ot+=Tt;if(Tt===-1&&me[ot]&&!ie[Pe+1])return-1;Pe++,ot-=1;continue}else if(ie[Pe].flag==="?"){Tt=te(ie[Pe].pattern,me.slice(ot)),Tt===-1?ot-=2:Pe++;continue}}if(ie[Pe]instanceof RegExp){if(!me[ot].match(ie[Pe]))return-1}else if(typeof ie[Pe]=="string"){if(ie[Pe]!==me[ot])return-1}else if(typeof ie[Pe]=="symbol"){if(ie[Pe]===Symbol.for("*")){if(Ze[Pe]=Ze[Pe]||0,me[ot]==="("?Ze[Pe]++:me[ot]===")"&&Ze[Pe]--,le())ot-=1;else if(typeof ie[Pe+1]<"u"&&Ze[Pe]===0&&ie[Pe+1]!==me[ot+1]||Ze[Pe]>0)continue}else if(De())return-1}else if(ie[Pe]instanceof Array){var Ft=te(ie[Pe],me.slice(ot));if(Ft===-1||Ft+ot>me.length)return-1;ot+=Ft-1,Pe++;continue}else return-1;Pe++}}return ie.length!==Pe?-1:me.length}}function X(k){this._code=k.replace(/\r/g,"")}X.defaults={offset:0,indent:2,specials:[/^define/,"lambda","let","let*"]},X.match=K,X.prototype._options=function(W){var te=X.defaults;if(typeof W>"u")return Object.assign({},te);var ie=W&&W.specials||[];return Object.assign({},te,W,{specials:te.specials.concat(ie)})},X.prototype.indent=function(W){var te=L(this._code,!0);return this._indent(te,W)},X.matchSpecial=function(k,W){var te=W.specials;if(te.indexOf(k)!==-1)return!0;var ie=te.filter(me=>me instanceof RegExp);for(let me of ie)if(k.match(me))return!0;return!1},X.prototype._indent=function(W,te){var ie=this._options(te),me=M(W),le=R(W);if(le&&le.length){if(le[0].line>0&&(ie.offset=0),le.toString()===W.toString()&&He(le))return ie.offset+le[0].col;if(le.length===1)return ie.offset+le[0].col+1;if(X.matchSpecial(le[1].token,ie))return ie.offset+le[0].col+ie.indent;if(le[0].line<le[1].line)return ie.offset+le[0].col+1;if(le.length>3&&le[1].line===le[3].line)return le[1].token==="("?ie.offset+le[1].col:ie.offset+le[3].col;if(le[0].line===le[1].line)return ie.offset+ie.indent+le[0].col;for(var De=le.slice(2),Pe=0;Pe<De.length;++Pe){var Ze=De[Pe];if(Ze.token.trim())return Ze.col}}else return 0;return me+ie.indent};function $(k){this.pattern=k}$.prototype.match=function(k){return k.match(this.pattern)};function D(k,W){this.pattern=k,this.flag=W}X.Pattern=D,X.Ahead=$;const T=new $(/[^)]/),F=Symbol.for("*"),B=new D(["(",F,")"],"+"),U=new D([Symbol.for("symbol")],"?"),G=new D(["(",Symbol.for("symbol"),F,")"],"+");X.rules=[[["(","begin"],1],[["(","begin",B],1,T],[["(",/^let\*?$/,U,"(",G,")"],1],[["(",/^let\*?$/,U,"(",G],2,T],[["(",/^let\*?$/,U,["(",G,")"],B],1,T],[[/(?!lambda)/,"(",F,")"],1,T],[["(","if",/[^()]/],1],[["(","if",/[^()]/,F],1],[["(","if",["(",F,")"]],1],[["(","if",["(",F,")"],/[^()]/],1],[["(","if",["(",F,")"],["(",F,")"]],1,T],[["(",/^(define|lambda)/,["(",F,")"],f],1],[["(",/^(define|lambda)/,"(",F,")"],1],[["(",/^(define|lambda)/,["(",F,")"],f,B],1,T],[["(",/^(define|lambda)/,["(",F,")"],B],1,T]],X.prototype.break=function(){var k=this._code.replace(/\n[ \t]*/g,`
 `);const W=Ze=>Ze.token.match(f)?Ze.token:Ze.token.replace(/\s+/," ");var te=L(k,!0).map(W).filter(Ze=>Ze!==`
`);const{rules:ie}=X;for(let Ze=0;Ze<te.length;++Ze)if(te[Ze].trim()){var me=te.slice(0,Ze),le={};ie.map(ot=>ot[1]).forEach(ot=>{le[ot]||(le[ot]=R(me,ot))});for(let[ot,Tt,Ft]of ie){var De=K(ot,le[Tt].filter(Ot=>Ot.trim())),Pe=te.slice(Ze).find(Ot=>Ot.trim());if(De&&(Ft instanceof $&&Ft.match(Pe)||!Ft)){te.splice(Ze,0,`
`),Ze++;continue}}}return this._code=te.join(""),this},X.prototype._spaces=function(k){return new Array(k+1).join(" ")},X.prototype.format=function(W){for(var te=this._code.replace(/[ \t]*\n[ \t]*/g,`
 `),ie=L(te,!0),me=this._options(W),le=0,De=0,Pe=0;Pe<ie.length;++Pe){var Ze=ie[Pe];if(Ze.token===`
`&&(le=this._indent(ie.slice(0,Pe),me),De+=le,ie[Pe+1])){ie[Pe+1].token=this._spaces(le),le--,De--;for(var ot=Pe+2;ot<ie.length;++ot)if(ie[ot].offset+=De,ie[ot].col+=le,ie[ot].token===`
`){Pe=ot-1;break}}}return ie.map(Tt=>{if(Tt.token.match(f)&&Tt.token.match(/\n/)){var Ft=new Array(Tt.col+1).join(" "),Ot=Tt.token.split(`
`);Tt.token=[Ot[0]].concat(Ot.slice(1).map(wt=>Ft+wt)).join(`
`)}return Tt.token}).join("")};function Z(k,W){var te=Object.prototype.toString,ie="[object Array]",me=[],le=W&&k||k.slice(),De;if(!k.length)return me;De=le.pop();do te.call(De)===ie?le.push.apply(le,De):me.push(De);while(le.length&&(De=le.pop())!==n);return me.reverse(),me}function z(k){return typeof k=="symbol"||typeof k=="object"&&Object.prototype.toString.call(k)==="[object Symbol]"}function O(k){if(typeof this<"u"&&this.constructor!==O||typeof this>"u")return new O(k);this.name=k}O.is=function(k,W){return k instanceof O&&(typeof W=="string"&&k.name===W||W instanceof RegExp&&W.test(k.name))},O.prototype.toJSON=O.prototype.toString=function(){return z(this.name)?this.name.toString().replace(/^Symbol\(([^)]+)\)/,"$1"):this.name};function Y(){}Y.prototype.toString=function(){return"()"};var fe=new Y;function ne(k,W){if(typeof this<"u"&&this.constructor!==ne||typeof this>"u")return new ne(k,W);this.car=k,this.cdr=W}function we(){return new ne(n,fe)}function Ie(k,W){return function(ie){if(Ye(k,ie,["pair","nil"]),ie instanceof ne&&ie.isEmptyList())return[];for(var me=[],le=ie;le instanceof ne;){if(le.haveCycles("cdr"))break;var De=le.car;W&&De instanceof ne&&(De=this.get(k).call(this,De)),me.push(De),le=le.cdr}return me}}ne.prototype.flatten=function(){return ne.fromArray(Z(this.toArray()))},ne.prototype.length=function(){if(Me(this))return 0;for(var k=0,W=this;!(!W||W===fe||!(W instanceof ne)||W.haveCycles("cdr"));)k++,W=W.cdr;return k},ne.prototype.clone=function(){var k=new Map;function W(te){if(te instanceof ne){if(k.has(te))return k.get(te);var ie=new ne;return k.set(te,ie),ie.car=W(te.car),ie.cdr=W(te.cdr),ie.cycles=te.cycles,ie}return te}return W(this)},ne.prototype.toArray=function(){if(this.isEmptyList())return[];var k=[];return this.car instanceof ne?k.push(this.car.toArray()):k.push(this.car),this.cdr instanceof ne&&(k=k.concat(this.cdr.toArray())),k},ne.prototype.isEmptyList=function(){return typeof this.car>"u"&&this.cdr===fe},ne.fromArray=function(k){if(k instanceof ne)return k;if(k.length&&!(k instanceof Array)&&(k=[...k]),k.length===0)return we();var W;return k[0]instanceof Array?W=ne.fromArray(k[0]):W=k[0],k.length===1?new ne(W,fe):new ne(W,ne.fromArray(k.slice(1)))},ne.prototype.toObject=function(){for(var k=this,W={};k instanceof ne&&k.car instanceof ne;){var te=k.car,ie=te.car;ie instanceof O&&(ie=ie.name);var me=te.cdr;me instanceof ne&&(me=me.toObject()),me instanceof Ve&&(me=me.valueOf()),W[ie]=me,k=k.cdr}return W},ne.fromPairs=function(k){return k.reduce((W,te)=>new ne(new ne(new O(te[0]),te[1]),W),fe)},ne.fromObject=function(k){var W=Object.keys(k).map(te=>[te,k[te]]);return ne.fromPairs(W)},ne.prototype.reduce=function(k){for(var W=this,te=fe;W!==fe;)te=k(te,W.car),W=W.cdr;return te},ne.prototype.reverse=function(){if(this.haveCycles())throw new Error("You can't reverse list that have cycles");for(var k=this,W=fe;k!==fe;){var te=k.cdr;k.cdr=W,W=k,k=te}return W},ne.prototype.transform=function(k){function W(te){if(te instanceof ne){if(te.replace)return delete te.replace,te;var ie=k(te.car);ie instanceof ne&&(ie=W(ie));var me=k(te.cdr);return me instanceof ne&&(me=W(me)),new ne(ie,me)}return te}return W(this)},ne.prototype.map=function(k){return typeof this.car<"u"?new ne(k(this.car),Me(this.cdr)?fe:this.cdr.map(k)):fe};function je(k){if(typeof k=="function")return"<#function "+(k.name||"anonymous")+">";if(typeof k=="string")return JSON.stringify(k).replace(/\\n/g,`
`);if(Zt(k))return"<#Promise>";if(k instanceof O||k instanceof Ve||k instanceof RegExp||k instanceof ne||k===fe)return k.toString();if(k instanceof Array)return k.map(je);if(typeof k=="object"){if(k===null)return"null";var W=k.constructor.name;return W==="Object"?JSON.stringify(k):"<#object("+k.constructor.name+")>"}else if(typeof k<"u")return k}ne.prototype.markCycles=function(){return dt(this),this},ne.prototype.haveCycles=function(k=null){return k?!!(this.cycles&&this.cycles[k]):this.haveCycles("car")||this.haveCycles("cdr")};function dt(k){var W=[],te=[];function ie(le){if(le instanceof ne&&W.includes(le))return te.includes(le)||te.push(le),`#${te.length-1}#`}function me(le){if(le instanceof ne){W.push(le);var De={},Pe=ie(le.car),Ze=ie(le.cdr);Pe?De.car=Pe:me(le.car),Ze?De.cdr=Ze:me(le.cdr),Pe||Ze?le.cycles=De:le.cycles&&delete le.cycles}}me(k)}ne.prototype.toString=function(){var k=["("];if(this.car!==n){var W;if(this.cycles&&this.cycles.car?W=this.cycles.car:W=je(this.car),W!==n&&k.push(W),this.cdr instanceof ne)if(this.cycles&&this.cycles.cdr)k.push(" . "),k.push(this.cycles.cdr);else{var te;this.cycles&&this.cycles.cdr&&(te=this.cycles.cdr);var ie=this.cdr.toString(te).replace(/^\(|\)$/g,"");k.push(" "),k.push(ie)}else typeof this.cdr<"u"&&this.cdr!==fe&&(k=k.concat([" . ",je(this.cdr)]))}return k.push(")"),k.join("")},ne.prototype.set=function(k,W){this[k]=W,W instanceof ne&&this.markCycles()},ne.prototype.append=function(k){if(k instanceof Array)return this.append(ne.fromArray(k));var W=this;if(W.car===n)k instanceof ne?(this.car=k.car,this.cdr=k.cdr):this.car=k;else if(k!==fe){for(;W instanceof ne&&W.cdr!==fe;)W=W.cdr;W.cdr=k}return this};function At(k,W){return k instanceof Ve&&W instanceof Ve?k.cmp(W)===0:typeof k=="number"||typeof W=="number"?Ve(k).cmp(Ve(W)):k instanceof O&&W instanceof O?k.name===W.name:k===W}function Me(k){return k instanceof ne&&k.isEmptyList()||k===fe}function st(k,W,te){if(typeof this<"u"&&this.constructor!==st||typeof this>"u")return new st(k,W);Ye("Macro",k,"string",1),Ye("Macro",W,"function",2),te&&(this.__doc__=V(te)),this.name=k,this.fn=W}st.defmacro=function(k,W,te){var ie=new st(k,W,te);return ie.defmacro=!0,ie},st.prototype.invoke=function(k,{env:W,dynamic_scope:te,error:ie},me){var le={dynamic_scope:te,error:ie,macro_expand:me},De=this.fn.call(W,k,le,this.name);return me?ni(De):De},st.prototype.toString=function(){return"#<Macro "+this.name+">"};var bt="define-macro";function tt(k){return async function(W,te){var ie=te.env=this;async function me(De){if(De instanceof ne&&De.car instanceof O)try{var Pe=ie.get(De.car);if(Pe instanceof st&&Pe.defmacro){var Ze=await Pe.invoke(De.cdr,te,!0);if(Ze instanceof ne)return Ze}}catch{}var ot=De.car;ot instanceof ne&&(ot=await me(ot));var Tt=De.cdr;Tt instanceof ne&&(Tt=await me(Tt));var Ft=new ne(ot,Tt);return Ft}var le=W;if(k)return ni((await me(W)).car);for(;le=await me(W),W.toString()!==le.toString();)W=le;return ni(le.car)}}function tn(k){return typeof k>"u"||k===fe||k===null}function Zt(k){return k instanceof Promise||k&&typeof k<"u"&&typeof k.then=="function"}function nn(k,W,...te){let ie=function(...me){const le=[...ie.__bind.args,...me];return ie.__bind.fn.apply(W,le)};return Ln(ie,"name",k.name),Ln(ie,"__bound__",!0),k.__doc__&&(ie.__doc__=k.__doc__),k.__code__&&(ie.__code__=k.__code__),ie.__bind={args:k.__bind?k.__bind.args.concat(te):te,fn:k.__bind?k.__bind.fn:k},ie.toString=function(){return ie.__bind.fn.toString()},ie.apply=function(me,le){return ie.__bind.fn.apply(me,le)},ie.call=function(me,...le){return ie.__bind.fn.call(me,...le)},ie.bind=function(me,...le){return nn(ie,me,...le)},pn(ie,ie.__bind.fn.length)}function On(k){return typeof k=="function"&&k.__bind?k.__bind.fn:k}var Tn=["name","length","caller","callee","arguments","prototype"];function ei(k){return!Tn.includes(k)}function Ln(k,W,te){Object.defineProperty(k,Symbol.for(W),{get:()=>te,set:()=>{},configurable:!1,enumerable:!1})}function Mn(k,W){const te=k.bind(W);return Object.getOwnPropertyNames(k).filter(ei).forEach(me=>{te[me]=k[me]}),Ln(te,"__bound__",!0),mi(k)&&Ln(te,"__native__",!0),te}function Pt(k){if(typeof k=="fuction")return k.__bound__=!1,k.__bound__===!0}function pn(k,W){try{return Object.defineProperty(k,"length",{get:function(){return W}}),k}catch{var te=new Array(W).fill(0).map((le,De)=>"a"+De).join(","),ie=new Function("f",`return function(${te}) {
                return f.apply(this, arguments);
            };`);return ie(k)}}function mi(k){var W=Symbol.for("__native__");return typeof k=="function"&&k.toString().match(/\{\s*\[native code\]\s*\}/)&&(k.name.match(/^bound /)&&k[W]===!0||!k.name.match(/^bound /)&&!k[W])}function Te(k){var W="let"+(k?"*":"");return st.defmacro(W,function(te,ie){var{dynamic_scope:me,error:le,macro_expand:De}=ie,Pe;if(te.car instanceof O){if(!(te.cdr.car instanceof ne))throw new Error("let require list of pairs");var Ze=te.cdr.car.map(Ot=>Ot.car);return Pe=te.cdr.car.map(Ot=>Ot.cdr.car),ne.fromArray([O("let*"),[[te.car,ne(O("lambda"),ne(Ze,te.cdr.cdr))]],ne(te.car,Pe)])}else if(De)return;var ot=this;Pe=this.get("list->array")(te.car);var Tt=ot.inherit("let"),Ft=0;return function Ot(){var wt=Pe[Ft++];function si($i){if(Zt($i))return $i.then(si);typeof $i>"u"?Tt.set(wt.car,fe):Tt.set(wt.car,$i)}if(me&&(me=k?Tt:ot),wt){var rr=ae(wt.cdr.car,{env:k?Tt:ot,dynamic_scope:me,error:le});return E(si(rr),Ot)}else{var zn=new ne(new O("begin"),te.cdr);return ae(zn,{env:Tt,dynamic_scope:me,error:le})}}()})}function Fe(k,W){return new st(k,function(te,{dynamic_scope:ie,error:me}={}){var le=this;ie&&(ie=this);for(var De=te,Pe=[];De instanceof ne&&!Me(De);)Pe.push(ae(De.car,{env:le,dynamic_scope:ie,error:me})),De=De.cdr;var Ze=Pe.filter(Zt).length;return Ze?Promise.all(Pe).then(W.bind(this)):W.call(this,Pe)})}function pt(k,...W){return W.forEach(te=>{Ye("",te,"number")}),k(...W)}function at(...k){return k.forEach((W,te)=>{Ye("pipe",W,"function",te+1)}),function(...W){return k.reduce((te,ie)=>[ie(...te)],W)[0]}}function Ct(...k){return k.forEach((W,te)=>{Ye("compose",W,"function",te+1)}),at(...k.reverse())}function wi(k,W){var te=this;return function ie(me,le,...De){return Ye(k,me,"function"),De.some(Pe=>Me(Pe)||tn(Pe))?typeof le=="number"?Ve(le):le:W.call(te,ie,me,le,...De)}}function Vt(k,W){return fr(k+1,Bt(pt,W))}var kt=Bt(Vt,1),Kt=Bt(Vt,2);function Gt(k){return function(...W){if(W.length)return W.reduce(Kt(k))}}function Bt(k,...W){Ye("curry",k,"function");var te=k.length;return function(){var ie=W.slice();function me(...le){return ie=ie.concat(le),ie.length>=te?k.apply(this,ie):me}return me.apply(this,arguments)}}function fr(k,W){return Ye("limit",W,"function",2),function(...te){return W(...te.slice(0,k))}}var ti=N(function(W,...te){typeof W=="function"&&W.__bind&&(W=W.__bind.fn);for(let le of te){var ie=le instanceof O?le.name:le,me=W[ie];typeof me=="function"&&(me=Mn(me,W)),W=me}return me},`(. obj . args)
        (get obj . args)

        Function use object as based and keep using arguments to get the
        property of JavaScript object. Arguments need to be a strings.
        e.g. \`(. console "log")\` if you use any function inside LIPS is
        will be weakly bind (can be rebind), so you can call this log function
        without problem unlike in JavaScript when you use
       \`var log = console.log\`.
       \`get\` is an alias because . don't work in every place, you can't
        pass it as argument`);function Ve(k,W){if(typeof this<"u"&&this.constructor!==Ve||typeof this>"u")return new Ve(k,W===!0?!0:n);if(k instanceof Ve)return Ve(k.value,k.float);if(!Ve.isNumber(k))throw new Error(`You can't create LNumber from ${ke(k)}`);k===null&&(k=0),Ve.isFloat(k)?this.value=k:W?(this.value=k,this.float=!0):typeof BigInt<"u"?typeof k!="bigint"?this.value=BigInt(k):this.value=k:typeof t<"u"&&!(k instanceof t)?this.value=new t(k):this.value=k}Ve.isFloat=function(W){return Number(W)===W&&W%1!==0},Ve.isNumber=function(k){return k instanceof Ve||!Number.isNaN(k)&&Ve.isNative(k)||Ve.isBN(k)},Ve.isNative=function(k){return typeof k=="bigint"||typeof k=="number"},Ve.isBN=function(k){return typeof t<"u"&&k instanceof t},Ve.prototype.toString=Ve.prototype.toJSON=function(){return this.value.toString()},Ve.prototype.isBigNumber=function(){return typeof this.value=="bigint"||typeof t<"u"&&!(this.value instanceof t)},["floor","ceil","round"].forEach(k=>{Ve.prototype[k]=function(){return this.float||Ve.isFloat(this.value)?Ve(Math[k](this.value)):Ve(this.value)}}),Ve.prototype.valueOf=function(){if(Ve.isNative(this.value))return Number(this.value);if(Ve.isBN(this.value))return this.value.toNumber()},Ve.prototype.coerce=function(k){k===null&&(k=0);var W;return k instanceof Ve?W=k.value:W=k,Ve.isFloat(W)||(typeof this.value=="bigint"&&typeof W!="bigint"?W=BigInt(W):typeof t<"u"&&this.value instanceof t&&!W instanceof t&&(W=new t(W))),Ve(W)},Ve.prototype.isFloat=function(){return!!(Ve.isFloat(this.value)||this.float)},Ve.prototype.op=function(k,W){var te={"*":function(le,De){return le*De},"+":function(le,De){return le+De},"-":function(le,De){return le-De},"/":function(le,De){return le/De},"%":function(le,De){return le%De},"|":function(le,De){return le|De},"&":function(le,De){return le&De},"~":function(le){return~le},">>":function(le,De){return le>>De},"<<":function(le,De){return le<<De}};if(Ve.isFloat(W)||W instanceof Ve&&W.isFloat()||this.isFloat()){var ie=W instanceof Ve?W.valueOf():W;return Ve(te[k](this.valueOf(),ie),!0)}if(W=this.coerce(W),Ve.isNative(W.value)&&Ve.isNative(this.value))return Ve(te[k](this.value,W.value));if(Ve.isBN(this.value)&&Ve.isBN(W.value)){var me={"+":"iadd","-":"isub","*":"imul","/":"idiv","%":"imod","|":"ior","&":"iand","~":"inot","<<":"ishrn",">>":"ishln"};return k=me[k],Ve(this.value.clone()[k](W,ie))}};var Pa={"+":"add","-":"sub","*":"mul","/":"div","%":"mod","|":"or","&":"and","~":"neg","<<":"shl",">>":"shr"};Object.keys(Pa).forEach(k=>{Ve.prototype[Pa[k]]=function(W){return this.op(k,W)}}),Ve.prototype.sqrt=function(){var k;return Ve.isNative(this.value)?k=Math.sqrt(this.value):Ve.isBN(this.value)&&(k=this.value.sqrt()),new Ve(k)},Ve.prototype.pow=function(k){if(k=this.coerce(k),Ve.isNative(this.value))try{var W=new Function("a,b","return a**b;");k.value=W(this.value,k.value)}catch{throw new Error("Power operator not supported")}else Ve.isBN(this.value)?k.value=this.value.pow(k.value):k.value=Math.pow(this.value,k.value);return k},Ve.prototype.neg=function(){var k=this.value;return Ve.isNative(k)?k=-k:Ve.isBN(k)&&(k=k.neg()),new Ve(k)},Ve.prototype.abs=function(){var k=this.value;return Ve.isNative(this.value)?k<0&&(k=-k):Ve.isBN(k)&&k.iabs(),new Ve(k)},Ve.prototype.isOdd=function(){if(Ve.isNative(this.value))return this.isBigNumber()?this.value%BigInt(2)===BigInt(1):this.value%2===1;if(Ve.isBN(this.value))return this.value.isOdd()},Ve.prototype.isEven=function(){return!this.isOdd()},Ve.prototype.cmp=function(k){if(k=this.coerce(k),Ve.isNative(this.value))return this.value<k.value?-1:this.value===k.value?0:1;if(Ve.isBN(this.value))return this.value.cmp(k.value)};function $n(k,W,te){arguments.length===1&&(typeof arguments[0]=="object"?(k=arguments[0],this.parent=null):typeof arguments[0]=="string"&&(k={},W={},te=arguments[0])),this.env=k,this.parent=W,this.name=te||"anonymous"}$n.prototype.inherit=function(k,W={}){return typeof k=="object"&&(W=k),(!k||typeof k=="object")&&(k="child of "+(this.name||"unknown")),new $n(W||{},this,k)},$n.prototype.get=function(k,W={}){const{weak:te,context:ie=this,throwError:me=!0}=W;var le,De=!1;if(k instanceof O?k.name in this.env&&(le=this.env[k.name],De=!0):typeof k=="string"&&typeof this.env[k]<"u"&&(le=this.env[k],De=!0),De)return Ve.isNumber(le)?Ve(le):le instanceof ne?le.markCycles():typeof le=="function"&&Pt(le)?te?nn(le,ie):Mn(le,ie):le;if(this.parent instanceof $n)return this.parent.get(k,{weak:te,context:ie,throwError:me});var Pe;if(k instanceof O?Pe=k.name:typeof k=="string"&&(Pe=k),Pe){var Ze=typeof e[Pe];if(Ze==="function")return mi(e[Pe])?Mn(e[Pe],e):e[Pe];if(Ze!=="undefined")return e[Pe]}if(me)throw Pe=(Pe.name||Pe).toString(),new Error("Unbound variable `"+Pe+"'")},$n.prototype.set=function(k,W){Ve.isNumber(W)&&(W=Ve(W)),k instanceof O&&(k=k.name),this.env[k]=W},$n.prototype.has=function(k){return typeof this.env[k]<"u"},$n.prototype.ref=function(k){for(var W=this;W;){if(W.has(k))return W;W=W.parent}},$n.prototype.parents=function(){for(var k=this,W=[];k;)W.unshift(k),k=k.parent;return W};function ni(k){return Zt(k)?k.then(ni):((k instanceof ne||k instanceof O)&&(k.data=!0),k)}var Gs=function(){var k=0;return function(W=null){return W!==null?new O(Symbol(`#:${W}`)):(k++,new O(Symbol(`#:g${k}`)))}}(),vn=new $n({nil:fe,undefined:n,true:!0,false:!1,NaN:NaN,stdout:{write:function(...k){console.log(...k)}},stdin:{read:function(){return new Promise(k=>{k(prompt(""))})}},help:N(new st("help",function(k,{dynamic_scope:W,error:te}){var ie;if(k.car instanceof O)ie=k.car;else if(k.car instanceof ne&&k.car.car instanceof O)ie=k.car.car;else{var me=this;W&&(W=this);var le=ae(k.car,{env:me,error:te,dynamic_scope:W});if(le&&le.__doc__)return le.__doc__}return this.get(ie).__doc__}),`(help object)

             Macro returns documentation for function or macros including parser
             macros but only if called with parser macro symbol like (help \`).
             For normal functions and macros you can save the function in variable.`),cons:N(function(k,W){return Me(W)&&(W=fe),new ne(k,W)},`(cons left right)

            Function return new Pair out of two arguments.`),car:N(function(k){return k===fe||(Ye("car",k,"pair"),Me(k))?fe:k.car},`(car pair)

            Function returns car (head) of the list/pair.`),cdr:N(function(k){return k===fe||(Ye("cdr",k,"pair"),Me(k))?fe:k.cdr},`(cdr pair)

            Function returns cdr (tail) of the list/pair.`),"set!":N(new st("set!",function(k,{dynamic_scope:W,error:te}={}){W&&(W=this);var ie=ae(k.cdr.car,{env:this,dynamic_scope:W,error:te});ie=Ee(ie);var me;function le(Tt,Ft){return Zt(Tt)?Tt.then(Ot=>le(Ot,Ft)):Zt(Ft)?Ft.then(Ot=>le(Tt,Ot)):(Ze[Tt]=Ft,Ft)}if(k.car instanceof ne&&O.is(k.car.car,".")){var De=k.car.cdr.car,Pe=k.car.cdr.cdr.car,Ze=ae(De,{env:this,dynamic_scope:W,error:te}),ot=ae(Pe,{env:this,dynamic_scope:W,error:te});return le(ot,ie)}if(!(k.car instanceof O))throw new Error("set! first argument need to be a symbol or dot accessor that evaluate to object.");return me=this.ref(k.car.name),me||(me=this),E(ie,Tt=>{me.set(k.car,Tt)})}),`(set! name value)

            Macro that can be used to set the value of the variable (mutate)
            it search the scope chain until it finds first non emtpy slot and set it.`),"set-car!":N(function(k,W){Ye("set-car!",k,"pair"),k.car=W},`(set-car! obj value)

            Function that set car (head) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"set-cdr!":N(function(k,W){Ye("set-cdr!",k,"pair"),k.cdr=W},`(set-cdr! obj value)

            Function that set cdr (tail) of the list/pair to specified value.
            It can destroy the list. Old value is lost.`),"empty?":N(function(k){return typeof k>"u"||Me(k)},`(empty? object)

            Function return true if value is undfined empty list.`),assoc:N(function(k,W){if(k instanceof ne&&!(W instanceof ne))throw new Error("First argument to assoc ned to be a key");Ye("assoc",W,"pair");for(var te=W;!(!(te instanceof ne)||this.get("empty?")(te));){var ie=te.car.car;if(At(ie,k))return te.car;te.haveCycles("cdr")||(te=te.cdr)}return fe},`(assoc key alist)

            Function search Alist (list of pairs) until it find the one that
            have head set equal to key, and return found pair.`),gensym:N(Gs,`(gensym)

             Function generate unique symbol, to use with macros as meta name.`),"require.resolve":N(function(k){var W=require.resolve(k);return W},`(require.resolve path)

           Return path relative the current module.`),require:N(function(k){return Ire(k)},`(require module)

            Function to be used inside Node.js to import the module.`),load:N(function(k){Ye("load",k,"string");var W=this;return W.name==="__frame__"&&(W=W.parent),typeof this.get("global",{throwError:!1})<"u"?new Promise((te,ie)=>{hve.readFile(k,function(me,le){me?ie(me):pe(le.toString(),W).then(()=>{te()})})}):e.fetch(k).then(te=>te.text()).then(te=>pe(te,W)).then(()=>{})},`(load filename)

            Function fetch the file and evaluate its content as LIPS code.`),while:N(new st("while",function(k,{dynamic_scope:W,error:te}){var ie=this,me=new ne(new O("begin"),k.cdr),le;return W&&(W=ie),function De(){var Pe=ae(k.car,{env:ie,dynamic_scope:W,error:te});function Ze(ot){return ot&&!tn(ot)&&!Me(ot)?(le=ae(me,{env:ie,dynamic_scope:W,error:te}),Zt(le)?le.then(Tt=>(le=Tt,De())):De()):le}return E(Pe,Ze)}()}),`(while cond . body)

            Macro that create a loop, it exectue body untill cond expression is false`),if:N(new st("if",function(k,{dynamic_scope:W,error:te}){W&&(W=this);var ie=this,me=De=>(Ye("if",De,"boolean"),De?ae(k.cdr.car,{env:ie,dynamic_scope:W,error:te}):ae(k.cdr.cdr.car,{env:ie,dynamic_scope:W,error:te})),le=ae(k.car,{env:ie,dynamic_scope:W,error:te});return E(le,me)}),`(if cond true-expr false-expr)

            Macro evaluate condition expression and if the value is true, it
            evaluate and return true expression if not it evaluate and return
            false expression`),"let*":N(Te(!0),`(let* ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy and next value can access to
             previous values/names.`),let:N(Te(!1),`(let ((a value-a) (b value-b)) body)

             Macro that creates new environment, then evaluate and assign values to
             names and then evaluate the body in context of that environment.
             Values are evaluated sequentialy but you can't access
             previous values/names when next are evaluated. You can only get them
             from body of let expression.`),"begin*":N(Fe("begin*",function(k){return k.pop()}),`(begin* . expr)

             This macro is parallel version of begin. It evaluate each expression and
             if it's a promise it will evaluate it in parallel and return value
             of last expression.`),begin:N(new st("begin",function(k,W){var te=Object.assign({},W),ie=this.get("list->array")(k);te.dynamic_scope&&(te.dynamic_scope=this),te.env=this;var me;return function le(){if(ie.length){var De=ie.shift(),Pe=ae(De,te);return E(Pe,Ze=>(me=Ze,le()))}else return me}()}),`(begin . args)

             Macro runs list of expression and return valuate of the list one.
             It can be used in place where you can only have single exression,
             like if expression.`),ignore:new st("ignore",function(k,{dynamic_scope:W,error:te}){var ie={env:this,error:te};W&&(ie.dynamic_scope=this),ae(new ne(new O("begin"),k),ie)},`(ignore expression)

            Macro that will evaluate expression and swallow any promises that may
            be created. It wil run and ignore any value that may be returned by
            expression. The code should have side effects and/or when it's promise
            it should resolve to undefined.`),define:N(st.defmacro("define",function(k,W){var te=this;if(k.car instanceof ne&&k.car.car instanceof O){var ie=new ne(new O("define"),new ne(k.car.car,new ne(new ne(new O("lambda"),new ne(k.car.cdr,k.cdr)))));return ie}else if(W.macro_expand)return;W.dynamic_scope&&(W.dynamic_scope=this),W.env=te;var me=k.cdr.car;me instanceof ne?me=ae(me,W):me instanceof O&&(me=te.get(me)),k.car instanceof O&&E(me,le=>{te.set(k.car,le)})}),`(define name expression)
             (define (function-name . args) body)

             Macro for defining values. It can be used to define variables,
             or function. If first argument is list it will create function
             with name beeing first element of the list. The macro evalute
             code \`(define function (lambda args body))\``),"set-obj!":N(function(k,W,te){var ie=typeof k;if(tn(k)||ie!=="object"&&ie!=="function"){var me=Ki("set-obj!",ke(k),["object","function"]);throw new Error(me)}On(k)[W]=te},`(set-obj! obj key value)

            Function set property of JavaScript object`),"current-environment":N(function(){return this},`(current-environment)

            Function return current environement.`),eval:N(function(k,W){if(Ye("eval",k,["symbol","pair","array"]),W=W||this,k instanceof O)return W.get(k);if(k instanceof ne)return ae(k,{env:W,error:ie=>{if(this.get("error")(ie.message),ie.code){var me=ie.code.map((le,De)=>`[${De+1}]: ${le}`).join(`
`);this.get("error")(me)}}});if(k instanceof Array){var te=this.get("eval");return k.reduce((ie,me)=>te(me,W))}},`(eval list)

            Function evalute LIPS code as list structure.`),lambda:new st("lambda",function(k,{dynamic_scope:W,error:te}={}){var ie=this,me;k.cdr instanceof ne&&typeof k.cdr.car=="string"&&k.cdr.cdr!==fe&&(me=V(k.cdr.car));function le(...Pe){var Ze;W&&this instanceof $n?Ze=this:Ze=ie,Ze=Ze.inherit("lambda");var ot=k.car,Tt=0,Ft;if(typeof this<"u"&&Ze.set("this",this),this instanceof $n)Ze.set("arguments",this.get("arguments")),Ze.set("parent.frame",this.get("parent.frame"));else{var Ot=Pe.slice();Ot.callee=le,Ot.env=Ze,Ze.set("parent.frame",function(){return fe}),Ze.set("arguments",Ot)}if(ot instanceof O||!Me(ot))for(;;){if(ot.car!==fe)if(ot instanceof O){Ft=ne.fromArray(Pe.slice(Tt)),Ze.env[ot.name]=Ft;break}else typeof Pe[Tt]>"u"?Ft=fe:Ft=Pe[Tt],Ze.env[ot.car.name]=Ft;if(ot.cdr===fe)break;Tt++,ot=ot.cdr}W&&(W=Ze);var wt=me?k.cdr.cdr:k.cdr,si=new ne(new O("begin"),wt);return ae(si,{env:Ze,dynamic_scope:W,error:te})}var De=k.car instanceof ne?k.car.length():null;return le.__code__=new ne(new O("lambda"),k),k.car instanceof ne?N(pn(le,De),me,!0):N(le,me,!0)},`(lambda (a b) body)
            (lambda args body)
            (lambda (a b . rest) body)

            Macro lambda create new anonymous function, if first element of the body
            is string and there is more elements it will be documentation, that can
            be read using (help fn)`),macroexpand:new st("macroexpand",tt()),"macroexpand-1":new st("macroexpand-1",tt(!0)),"define-macro":N(new st(bt,function(k,{dynamic_scope:W,error:te}){if(k.car instanceof ne&&k.car.car instanceof O){var ie=k.car.car.name,me;typeof k.cdr.car=="string"&&k.cdr.cdr!==fe&&(me=k.cdr.car),this.env[ie]=st.defmacro(ie,function(le){for(var De=new $n({},this,"defmacro"),Pe=k.car.cdr,Ze=le;Pe!==fe;){if(Pe instanceof O){De.env[Pe.name]=Ze;break}else Pe.car!==fe&&(Ze===fe?De.env[Pe.car.name]=fe:(Ze.car instanceof ne&&(Ze.car.data=!0),De.env[Pe.car.name]=Ze.car));if(Pe.cdr===fe)break;Ze!==fe&&(Ze=Ze.cdr),Pe=Pe.cdr}W&&(W=De);var ot={env:De,dynamic_scope:W,error:te};if(k.cdr instanceof ne){var Tt=me?k.cdr.cdr:k.cdr,Ft=Tt.reduce(function(Ot,wt){return ae(wt,ot)});return E(Ft,function(Ot){return typeof Ot=="object"&&delete Ot.data,Ot})}},me),this.env[ie].__code__=new ne(new O("define-macro"),k)}}),`(define-macro (name . args) body)

             Meta macro, macro that create new macros, if return value is list structure
             it will be evaluated when macro is invoked. You can use quasiquote \` and
             unquote , and unquote-splicing ,@ inside to create expression that will be
             evaluated on runtime. Macros works like this: if you pass any expression to
             macro the arguments will not be evaluated unless macro itself evaluate it.
             Because of this macro can manipulate expression (arguments) as lists.`),quote:N(new st("quote",function(k){return ni(k.car)}),`(quote expression)

             Macro that return single lips expression as data (it don't evaluate its
             argument). It will return list of pairs if put in front of lips code.
             And if put in fron of symbol it will return that symbol not value
             associated with that name.`),"unquote-splicing":N(function(){throw new Error("You can't call `unquote-splicing` outside of quasiquote")},`(unquote-splicing code)

            Special form to be used in quasiquote macro, parser is processing special
            characters ,@ and create call to this pseudo function. It can be used
            to evalute expression inside and return the value without parenthesis.
            the value will be joined to the output list structure.`),unquote:N(function(){throw new Error("You can't call `unquote` outside of quasiquote")},`(unquote code)

            Special form to be used in quasiquote macro, parser is processing special
            characters , and create call to this pseudo function. It can be used
            to evalute expression inside and return the value, the output is inserted
            into list structure created by queasiquote.`),quasiquote:st.defmacro("quasiquote",function(k,W){var{dynamic_scope:te,error:ie}=W,me=this;te&&(te=me);function le(wt){return wt instanceof ne}function De(wt,si,zn=le){if(wt instanceof ne&&!Me(wt)){var rr=wt.car,$i=wt.cdr;return zn(rr)&&(rr=si(rr)),zn($i)&&($i=si($i)),Zt(rr)||Zt($i)?Promise.all([rr,$i]).then(([Fa,sl])=>new ne(Fa,sl)):new ne(rr,$i)}return wt}function Pe(wt,si){if(wt instanceof ne){if(Me(wt)&&si===fe)return fe;wt.append(si)}else wt=new ne(wt,si);return wt}function Ze(wt,si,zn){if(si<zn)return new ne(new ne(wt.car.car,Tt(wt.car.cdr,si,zn)),fe);var rr=ae(wt.car.cdr.car,{env:me,dynamic_scope:te,error:ie});return E(rr,function($i){if(!($i instanceof ne)){if(wt.cdr!==fe){const sl="You can't splice atom inside list";throw new Error(sl)}return $i}ot.has($i)?$i=$i.clone():ot.add($i);const Fa=Tt(wt.cdr,0,1);return Fa===fe&&$i===fe?n:E(Fa,sl=>Pe($i,sl))})}var ot=new Set;function Tt(wt,si,zn){if(wt instanceof ne&&!Me(wt)){if(O.is(wt.car.car,"unquote-splicing"))return Ze(wt,si+1,zn);if(O.is(wt.car,"quasiquote")){var rr=Tt(wt.cdr,si,zn+1);return new ne(wt.car,rr)}if(O.is(wt.car.car,"unquote")){if(si+2===zn&&wt.car.cdr instanceof ne&&wt.car.cdr.car instanceof ne&&O.is(wt.car.cdr.car.car,"unquote-splicing"))return new ne(new O("unquote"),Ze(wt.car.cdr,si+2,zn));if(wt.car.cdr instanceof ne&&wt.car.cdr.cdr!==fe&&!(wt.car.cdr.car instanceof ne))return wt.car.cdr}if(O.is(wt.car,"quote"))return new ne(wt.car,Tt(wt.cdr,si,zn));if(O.is(wt.car,"unquote")){if(si++,si<zn)return new ne(new O("unquote"),Tt(wt.cdr,si,zn));if(si>zn)throw new Error("You can't call `unquote` outside of quasiquote");return wt.cdr instanceof ne?wt.cdr.cdr!==fe?wt.cdr.car instanceof ne?E(Tt(wt.cdr.cdr,si,zn),function($i){var Fa=ae(wt.cdr.car,{env:me,dynamic_scope:te,error:ie});return new ne(Fa,$i)}):wt.cdr:ae(wt.cdr.car,{env:me,dynamic_scope:te,error:ie}):wt.cdr}return De(wt,$i=>Tt($i,si,zn))}return wt}function Ft(wt){wt instanceof ne&&(delete wt.data,wt.haveCycles("car")||Ft(wt.car),wt.haveCycles("cdr")||Ft(wt.cdr))}var Ot=Tt(k.car,0,1);return E(Ot,wt=>(Ft(wt),ni(wt)))},`(quasiquote list ,value ,@value)

            Similar macro to \`quote\` but inside it you can use special
            expressions unquote abbreviated to , that will evaluate expresion inside
            and return its value or unquote-splicing abbreviated to ,@ that will
            evaluate expression but return value without parenthesis (it will join)
            the list with its value. Best used with macros but it can be used outside`),clone:N(function(k){return Ye("clone",k,"pair"),k.clone()},`(clone list)

            Function return clone of the list.`),append:N(function(k,W){return Ye("append",k,"pair"),this.get("append!")(k.clone(),W)},`(append list item)

            Function will create new list with value appended to the end. It return
            New list.`),"append!":N(function(k,W){return Ye("append!",k,"pair"),tn(W)||Me(W)?k:k.append(W)},`(append! name expression)

             Destructive version of append, it modify the list in place. It return
             original list.`),reverse:N(function(k){if(Ye("reverse",k,["array","pair"]),k instanceof ne){var W=this.get("list->array")(k).reverse();return this.get("array->list")(W)}else{if(k instanceof Array)return k.reverse();throw new Error(Ki("reverse",ke(k),"array or pair"))}},`(reverse list)

            Function will reverse the list or array. If value is not a list
            or array it will throw exception.`),nth:N(function(k,W){if(Ye("nth",k,"number"),Ye("nth",W,["array","pair"]),W instanceof ne){for(var te=W,ie=0;ie<k;){if(!te.cdr||te.cdr===fe||te.haveCycles("cdr"))return fe;te=te.cdr,ie++}return te.car}else{if(W instanceof Array)return W[k];throw new Error(Ki("nth",ke(W),"array or pair",2))}},`(nth index obj)

            Function return nth element of the list or array. If used with different
            value it will throw exception`),list:N(function(...k){return ne.fromArray(k)},`(list . args)

            Function create new list out of its arguments.`),substring:N(function(k,W,te){return Ye("substring",k,"string"),Ye("substring",W,"number"),Ye("substring",te,["number","undefined"]),k.substring(W.valueOf(),te&&te.valueOf())},`(substring string start end)

            Function return part of the string starting at start ending with end.`),concat:N(function(...k){return k.forEach((W,te)=>Ye("concat",W,"string",te+1)),k.join("")},`(concat . strings)

            Function create new string by joining its arguments`),join:N(function(k,W){return Ye("join",k,"string"),Ye("join",W,"pair"),this.get("list->array")(W).join(k)},`(join separator list)

            Function return string by joining elements of the list`),split:N(function(k,W){return Ye("split",k,["regex","string"]),Ye("split",W,"string"),this.get("array->list")(W.split(k))},`(split separator string)

            Function create list by splitting string by separatar that can
            be a string or regular expression.`),replace:N(function(k,W,te){return Ye("replace",k,["regex","string"]),Ye("replace",W,["string","function"]),Ye("replace",te,"string"),te.replace(k,W)},`(replace pattern replacement string)

            Function change pattern to replacement inside string. Pattern can be string
            or regex and replacement can be function or string.`),match:N(function(k,W){Ye("match",k,["regex","string"]),Ye("match",W,"string");var te=W.match(k);return te?this.get("array->list")(te):fe},`(match pattern string)

            function return match object from JavaScript as list.`),search:N(function(k,W){return Ye("search",k,["regex","string"]),Ye("search",W,"string"),W.search(k)},`(search pattern string)

            Function return first found index of the pattern inside a string`),string:N(function k(W,te){if(typeof jQuery<"u"&&W instanceof jQuery.fn.init)return"<#jQuery("+W.length+")>";if(W instanceof Ve)return W.value.toString();if(typeof W>"u")return"<#undefined>";if(typeof W=="function")return mi(W)?"<#function(native)>":"<#function>";if(W instanceof RegExp)return W.toString();if(W===fe)return"nil";if(W instanceof Array)return"["+W.map(le=>k(le,!0)).join(", ")+"]";if(W===null||typeof W=="string"&&te)return JSON.stringify(W).replace(/\\n/g,`
`);if(W instanceof ne||W instanceof O)return W.toString();if(e.HTMLElement&&W instanceof e.HTMLElement)return`<#HTMLElement(${W.tagName.toLowerCase()})>`;if(typeof W=="object"){var ie=W.constructor,me;return typeof ie.__className=="string"?me=ie.__className:ke(W)==="instance"?me="instance":me=ie.name,me!==""?"<#"+me+">":"<#Object>"}return typeof W!="string"?W.toString():W},`(string obj)

            Function return string LIPS representation of an object as string.`),env:N(function(k){k=k||this;var W=Object.keys(k.env),te;return W.length?te=ne.fromArray(W):te=fe,k.parent!==n?this.get("env").call(this,k.parent).append(te):te},`(env obj)

            Function return list values (functions and variables) inside environment.`),new:N(function(k,...W){var te=new(On(k))(...W);return Object.defineProperty(te,"__instance__",{enumerable:!1,get:()=>!0,set:()=>{},configurable:!1}),te},`(new obj . args)

            Function create new JavaScript instance of an object.`),"unset!":N(function(k){Ye("unset!",k,"symbol"),delete this.env[k.name]},`(unset! name)

            Function delete specified name from environment.`),"remove-special!":N(function(k){Ye("remove-special!",k,"string"),delete S[k]},"(remove-special! symbol)\n\n            Function remove special symbol from parser. Added by `add-special!`"),"add-special!":N(function(k,W){Ye("remove-special!",k,"string",1),Ye("remove-special!",W,"symbol",2),qt.specials[k]=W},"(add-special! symbol name)\n\n            Add special symbol to the list of transforming operators by the parser.\n            e.g.: `(add-special! '#)` will allow to use `#(1 2 3)` and it will be\n            transformed into (# (1 2 3)) so you can write # macro that will process\n            the list. It's main purpose to to allow to use `define-symbol-macro`"),get:ti,".":ti,unbind:N(On,`(unbind fn)

             Function remove bidning from function so you can get props from it.`),type:N(ke,`(type object)

             Function return type of an object as string.`),instanceof:N(function(k,W){return W instanceof k},`(instanceof type obj)

            Function check of object is instance of object.`),"macro?":N(function(k){return k instanceof st},`(macro? expression)

            Function check if value is a macro.`),"function?":N(function(k){return typeof k=="function"},`(function? expression)

            Function check if value is a function.`),"real?":N(function(k){return ke(k)!=="number"?!1:k instanceof Ve?k.isFloat():Ve.isFloat(k)},`(real? number)

            Function check if value is real number.`),"number?":N(Ve.isNumber,`(number? expression)

             Function check if value is a number`),"string?":N(function(k){return typeof k=="string"},`(string? expression)

            Function check if value is a string.`),"pair?":N(function(k){return k instanceof ne},`(pair? expression)

            Function check if value is a pair or list structure.`),"regex?":N(function(k){return k instanceof RegExp},`(regex? expression)

            Function check if value is regular expression.`),"null?":N(function(k){return tn(k)||k instanceof ne&&k.isEmptyList()},`(null? expression)

            Function check if value is nulish.`),"boolean?":N(function(k){return typeof k=="boolean"},`(boolean? expression)

            Function check if value is boolean.`),"symbol?":N(function(k){return k instanceof O},`(symbol? expression)

            Function check if value is LIPS symbol`),"array?":N(function(k){return k instanceof Array},`(array? expression)

            Function check if value is an arrray.`),"object?":N(function(k){return k!==fe&&k!==null&&!(k instanceof Ve)&&typeof k=="object"&&!(k instanceof Array)},`(object? expression)

            Function check if value is an object.`),read:N(function k(W){return typeof W=="string"?y(L(W))[0]:this.get("stdin").read().then(te=>k.call(this,te))},`(read [string])

            Function if used with string will parse the string and return
            list structure of LIPS code. If called without an argument it
            will read string from standard input (using browser prompt or
            user defined way) and call itself with that string (parse is)
            function can be used together with eval to evaluate code from
            string`),pprint:N(function(k){k instanceof ne?(k=new qt.Formatter(k.toString()).break().format(),this.get("stdout").write(k)):this.get("display").call(this,k)},`(pprint expression)

           Pretty print list expression, if called with non-pair it just call
           print function with passed argument.`),print:N(function(){throw new Error("Function print was removed in version 0.20.0 use display insided")},`(print . args)

            defunct function, we keep it to show proper error when used.`),display:N(function(...k){this.get("stdout").write(...k.map(W=>this.get("string")(W,typeof W=="string")))},`(display . args)

            Function convert each argument to string and print the result to
            standard output (by default it's console but it can be defined
            it user code)`),error:N(function(...k){this.get("display").apply(this,k)},`(error . args)

            Display error message.`),flatten:N(function(k){return Ye("flatten",k,"pair"),k.flatten()},`(flatten list)

            Return shallow list from tree structure (pairs).`),"array->list":N(function(k){return Ye("array->list",k,"array"),ne.fromArray(k)},`(array->list array)

            Function convert JavaScript array to LIPS list.`),"tree->array":N(Ie("tree->array",!0),`(tree->array list)

             Function convert LIPS list structure into JavaScript array.`),"list->array":N(Ie("list->array"),`(list->array list)

             Function convert LIPS list into JavaScript array.`),apply:N(function(k,W){return Ye("call",k,"function",1),Ye("call",W,"pair",2),k(...this.get("list->array")(W))},`(apply fn list)

            Function that call function with list of arguments.`),length:N(function(k){if(!k)return Ve(0);if(k instanceof ne)return Ve(k.length());if("length"in k)return Ve(k.length)},`(length expression)

            Function return length of the object, the object can be list
            or any object that have length property.`),try:N(new st("try",function(k,{dynamic_scope:W,error:te}){return new Promise(ie=>{var me={env:this,error:De=>{var Pe=this.inherit("try");Pe.set(k.cdr.car.cdr.car.car,De);var Ze={env:Pe,error:te};W&&(Ze.dynamic_scope=this),E(ae(new ne(new O("begin"),k.cdr.car.cdr.cdr),Ze),function(ot){ie(ot)})}};W&&(me.dynamic_scope=this);var le=ae(k.car,me);Zt(le)?le.catch(me.error).then(ie):ie(le)})}),"(try expr (catch (e) code)"),find:N(function k(W,te){if(Ye("find",W,["regex","function"]),Ye("find",te,"pair"),tn(te))return fe;var ie=A("find",W);return E(ie(te.car),function(me){return me&&me!==fe?te.car:k(W,te.cdr)})},`(find fn list)
            (find regex list)

            Higher order Function find first value for which function return true.
            If called with regex it will create matcher function.`),"for-each":N(function(k,...W){Ye("for-each",k,"function"),W.forEach((ie,me)=>{Ye("for-each",ie,["pair","nil"],me+1)});var te=this.get("map").call(this,k,...W);if(Zt(te))return te.then(()=>{})},`(for-each fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments.`),map:N(function k(W,...te){if(Ye("map",W,"function"),te.forEach((le,De)=>{Ye("map",le,["pair","nil"],De+1)}),te.some(le=>le===fe))return fe;if(te.some(Me))return we();var ie=te.map(le=>le.car),me=this;return ie.callee=W,me.set("arguments",ie),E(W.call(me,...ie),le=>E(k.call(this,W,...te.map(De=>De.cdr)),De=>new ne(le,De)))},`(map fn . lists)

            Higher order function that call function \`fn\` by for each
            value of the argument. If you provide more then one list as argument
            it will take each value from each list and call \`fn\` function
            with that many argument as number of list arguments. The return
            values of the function call is acumulated in result list and
            returned by the call to map.`),some:N(function k(W,te){return Ye("some",W,"function"),Ye("some",te,["pair","nil"]),tn(te)?!1:E(W(te.car),ie=>ie||k(W,te.cdr))},`(some fn list)

            Higher order function that call argument on each element of the list.
            It stops when function fn return true for a value if so it will
            return true. If it don't find the value it will return false`),fold:N(wi("fold",function(k,W,te,...ie){if(Ye("fold",W,"function"),ie.forEach((le,De)=>{Ye("fold",le,["pair","nil"],De+1)}),ie.some(Me))return te;const me=k.call(this,W,te,...ie.map(le=>le.cdr));return E(me,le=>W(...ie.map(De=>De.car),le))}),`(fold fn init . lists)

             Function fold is reverse of the reduce. it call function \`fn\`
             on each elements on the list and return single value.
             e.g. it call (fn a1 b1 (fn a2 b2 (fn a3 b3 '())))
             for: (fold fn '() alist blist`),pluck:N(function(...k){return function(W){if(k=k.map(ie=>ie instanceof O?ie.name:ie),k.length===0)return fe;if(k.length===1){const[ie]=k;return W[ie]}var te={};return k.forEach(ie=>{te[ie]=W[ie]}),te}},`(pluck . string)

            If called with single string it will return function that will return
            key from object. If called with more then one argument function will
            return new object by taking all properties from given object.`),reduce:N(wi("reduce",function(k,W,te,...ie){return Ye("reduce",W,"function"),ie.forEach((me,le)=>{Ye("reduce",me,["pair","nil"],le+1)}),ie.some(Me)?te:E(W(...ie.map(me=>me.car),te),me=>k.call(this,W,me,...ie.map(le=>le.cdr)))}),`(reduce fn init list . lists)

             Higher order function take each element of the list and call
             the function with result of previous call or init and next element
             on the list until each element is processed and return single value
             as result of last call to \`fn\` function.
             e.g. it call (fn a3 b3 (fn a2 b2 (fn a1 b1 init)))
             for (reduce fn init alist blist`),filter:N(function(k,W){Ye("filter",k,["regex","function"]),Ye("filter",W,["pair","nil"]);var te=this.get("list->array")(W),ie=[],me=A("filter",k);return function le(De){function Pe(ot){return ot&&ot!==fe&&ie.push(Ze),le(++De)}if(De===te.length)return ne.fromArray(ie);var Ze=te[De];return E(me(Ze,De),Pe)}(0)},`(filter fn list)
            (filter regex list)

            Higher order function that call \`fn\` for each element of the list
            and return list for only those elements for which funtion return
            true value. If called with regex it will create matcher function.`),range:N(function(k){return Ye("range",k,"number"),k instanceof Ve&&(k=k.valueOf()),ne.fromArray(new Array(k).fill(0).map((W,te)=>Ve(te)))},`(range n)

            Function return list of n numbers from 0 to n - 1`),compose:N(Ct,`(compose . fns)

             Higher order function and create new function that apply all functions
             From right to left and return it's value. Reverse of compose.
             e.g.:
             ((compose (curry + 2) (curry * 3)) 3)
             11
            `),pipe:N(at,`(pipe . fns)

             Higher order function and create new function that apply all functions
             From left to right and return it's value. Reverse of compose.
             e.g.:
             ((pipe (curry + 2) (curry * 3)) 3)
             15`),curry:N(Bt,`(curry fn . args)

             Higher order function that create curried version of the function.
             The result function will have parially applied arguments and it
             will keep returning functions until all arguments are added

             e.g.:
             (define (add a b c d) (+ a b c d))
             (define add1 (curry add 1))
             (define add12 (add 2))
             (display (add12 3 4))`),odd:N(kt(function(k){return Ve(k).isOdd()}),`(odd number)
             Function check if number os odd.`),even:N(kt(function(k){return Ve(k).isEvent()}),`(even number)

             Function check if number is even.`),"*":N(Gt(function(k,W){return Ve(k).mul(W)}),`(* . numbers)

             Multiplicate all numbers passed as arguments. If single value is passed
              it will return that value.`),"+":N(Gt(function(k,W){return Ve(k).add(W)}),`(+ . numbers)

             Sum all numbers passed as arguments. If single value is passed it will
             return that value.`),"-":N(function(...k){if(k.length===1)return Ve(k[0]).neg();if(k.length)return k.reduce(Kt(function(W,te){return Ve(W).sub(te)}))},`(- . numbers)
            (- number)

            Substract number passed as argument. If only one argument is passed
            it will negate the value.`),"/":N(Gt(function(k,W){return Ve(k).div(W)}),`(/ . numbers)

             Divide number passed as arguments one by one. If single argument
             is passed it will return that value.`),abs:N(kt(function(k){return Ve(k).abs()}),`(abs number)

             Function create absolute value from number.`),sqrt:N(kt(function(k){return Math.sqrt(k)}),`(sqrt number)

             Function return square root of the number.`),"**":N(Kt(function(k,W){return Ve(k).pow(W)}),`(** a b)

            Function calculate number a to to the power of b. It can throw
            exception when ** native operator is not supported.`),"1+":N(kt(function(k){return Ve(k).add(1)}),`(1+ number)

             Function add 1 to the number and return result.`),"1-":N(kt(function(k){return Ve(k).sub(1)}),`(1- number)

             Function substract 1 from the number and return result.`),"++":N(new st("++",function(k){Ye("++",k.car,"symbol");var W=this.get(k.car),te=Ve(W).add(1);return this.set(k.car,te),te}),`(++ variable)

             Macro that work only on variables and increment the value by one.`),"--":N(new st("--",function(k){Ye("--",k.car,"symbol");var W=this.get(k.car),te=Ve(W).sub(1);return this.set(k.car,te),te}),`(-- variable)

             Macro that decrement the value it work only on symbols`),"%":N(Gt(function(k,W){return Ve(k).mod(W)}),`(% . numbers)

             Function use modulo operation on each of the numbers. It return
             single number.`),"==":N(function(k,W){return Ve(k).cmp(W)===0},`(== a b)

            Function compare two numbers and check if they are equal.`),">":N(function(k,W){return Ve(k).cmp(W)===1},`(> a b)

            Function compare two numbers and check if first argument is greater
            than the second one`),"<":N(function(k,W){return Ve(k).cmp(W)===-1},`(< a b)

            Function compare two numbers and check if first argument is less
            than the second one`),"<=":N(function(k,W){return[0,-1].includes(Ve(k).cmp(W))},`(<= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),">=":N(function(k,W){return[0,1].includes(Ve(k).cmp(W))},`(>= a b)

            Function compare two numbers and check if first argument is less or
            equal to the second one`),"eq?":N(At,`(eq? a b)

             Function compare two values if they are identical.`),or:N(new st("or",function(k,{dynamic_scope:W,error:te}){var ie=this.get("list->array")(k),me=this;W&&(W=me);var le;return function De(){function Pe(Tt){return le=Tt,le||De()}var Ze=ie.shift();if(typeof Ze>"u")return le||!1;var ot=ae(Ze,{env:me,dynamic_scope:W,error:te});return E(ot,Pe)}()}),`(or . expressions)

             Macro execute the values one by one and return the one that is truthy value.
             If there are no expression that evaluate to true it return false.`),and:N(new st("and",function(k,{dynamic_scope:W,error:te}={}){var ie=this.get("list->array")(k),me=this;if(W&&(W=me),!ie.length)return!0;var le;return function De(){function Pe(Tt){return le=Tt,le?De():!1}var Ze=ie.shift();if(typeof Ze>"u")return le||!1;var ot=ae(Ze,{env:me,dynamic_scope:W,error:te});return E(ot,Pe)}()}),`(and . expressions)

             Macro evalute each expression in sequence if any value return false it will
             return false. If each value return true it will return the last value.
             If it's called without arguments it will return true.`),"|":N(function(k,W){return Ve(k).or(W)},`(& a b)

            Function calculate or bit operation.`),"&":N(function(k,W){return Ve(k).and(W)},`(& a b)

            Function calculate and bit operation.`),"~":N(function(k){return Ve(k).neg()},`(~ number)

            Function negate the value.`),">>":N(function(k,W){return Ve(k).shr(W)},`(>> a b)

            Function right shit the value a by value b.`),"<<":N(function(k,W){return Ve(k).shl(W)},`(<< a b)

            Function left shit the value a by value b.`),not:N(function(k){return Me(k)?!0:!k},`(not object)

            Function return negation of the argument.`),"->":N(function(k,W,...te){return k[W](...te)},`(-> obj name . args)

            Function get function from object and call it with arguments.`)},n,"global");["floor","round","ceil"].forEach(k=>{vn.set(k,N(function(W){if(Ye(k,W,"number"),W instanceof Ve)return W[k]()},`(${k} number)

            Function calculate ${k} of a number.`))});function ir(k){if(k.length===1)return k[0];for(var W=[],te=ir(k.slice(1)),ie=0;ie<te.length;ie++)for(var me=0;me<k[0].length;me++)W.push(k[0][me]+te[ie]);return W}function ol(k,W,te){for(var ie=[],me=W;me<=te;++me){for(var le=[],De=0;De<me;++De)le.push(k);ie=ie.concat(ir(le))}return ie}ol(["d","a"],2,5).forEach(k=>{const W=k.split(""),te=W.slice().reverse(),ie=W.map(le=>`(c${le}r`).join(" ")+" arg"+")".repeat(W.length),me="c"+k+"r";vn.set(me,N(function(le){return te.reduce(function(De,Pe){return De===fe?fe:(Ye(me,De,"pair"),Pe==="a"?De.car:De.cdr)},le)},`(${me} arg)

            Function calculate ${ie}`))}),typeof ea<"u"?(vn.set("global",ea),vn.set("require.resolve",N(function(k){return require.resolve(k)},`(require.resolve path)

           Return path relative the current module.`)),vn.set("require",N(function(k){return Ire(k)},`(require module)

            Function to be used inside Node.js to import the module.`))):typeof window<"u"&&vn.set("window",window);function Ki(k,W,te,ie=null){let me=k?` in function \`${k}\``:"";if(ie!==null&&(me+=` argument ${ie}`),te instanceof Array){const le=te[te.length-1];te=te.slice(0,-1).join(", ")+" or "+le}return`Expecting ${te} got ${W}${me}`}function Ye(k,W,te,ie=null){const me=ke(W);var le=!1;if(te instanceof Array&&te.includes(me)&&(le=!0),!le&&me!==te)throw new Error(Ki(k,me,te,ie))}function is(k){var W=typeof k;return["string","function"].includes(W)||k instanceof Ve||k instanceof RegExp}function ke(k){var W={pair:ne,symbol:O,macro:st,array:Array,native_symbol:Symbol};if(k===fe)return"nil";if(k===null)return"null";for(let[te,ie]of Object.entries(W))if(k instanceof ie)return te;return k instanceof Ve?"number":k instanceof RegExp?"regex":typeof k=="object"?k.__instance__&&(k.__instance__=!1,k.__instance__)?"instance":k.constructor.name:typeof k}function Ee(k){var W=[];if(te(k),W.length)return me(k);return k;function te(le){Zt(le)?W.push(le):le instanceof ne?(le.haveCycles("car")||te(le.car),le.haveCycles("cdr")||te(le.cdr)):le instanceof Array&&le.forEach(te)}async function ie(le){var De=new ne(le.haveCycles("car")?le.car:await me(le.car),le.haveCycles("cdr")?le.cdr:await me(le.cdr));return le.data&&(De.data=!0),De}function me(le){return le instanceof Array?Promise.all(le.map(me)):le instanceof ne&&W.length?ie(le):le}}function Ae(k,{env:W,dynamic_scope:te,error:ie}){var me=[],le=k;for(dt(le);le instanceof ne&&!Me(le);){var De=ae(le.car,{env:W,dynamic_scope:te,error:ie});if(te&&(De=E(De,Pe=>typeof Pe=="function"&&mi(Pe)?Pe.bind(te):Pe)),me.push(De),le.haveCycles("cdr"))break;le=le.cdr}return Ee(me)}function se(k,W,te){var ie=k.invoke(W,te);return E(Ee(ie),function(le){return le&&le.data||!le||is(le)?le:ni(ae(le,te))})}function ae(k,{env:W,dynamic_scope:te,error:ie=()=>{}}={}){try{te===!0?W=te=W||vn:W===!0?W=te=vn:W=W||vn;var me={env:W,dynamic_scope:te,error:ie},le;if(tn(k))return k;if(Me(k))return we();if(k instanceof O)return W.get(k,{weak:!0});var De=k.car,Pe=k.cdr;if(De instanceof ne){if(le=Ee(ae(De,me)),Zt(le))return le.then(Ft=>ae(new ne(Ft,k.cdr),me));if(typeof le!="function")throw new Error(ke(le)+" "+W.get("string")(le)+" is not a function while evaluating "+k.toString())}if(De instanceof O){if(le=W.get(De,{weak:!0}),le instanceof st){var Ze=se(le,Pe,me);return E(Ze,Ft=>Ft instanceof ne?Ft.markCycles():Ft)}else if(typeof le!="function"){if(le){var ot=`${ke(le)} \`${le}' is not a function`;throw new Error(ot)}throw new Error(`Unknown function \`${De.name}'`)}}else typeof De=="function"&&(le=De);if(typeof le=="function"){var Tt=Ae(Pe,me);return E(Tt,function(Ft){var Ot=(te||W).inherit("__frame__");Ot.set("parent.frame",function(zn=1){if(zn===0)return Ot;if(!(Ot.parent instanceof $n))return fe;var rr=Ot.parent.get("parent.frame",{throwError:!1});return typeof rr=="function"?rr(zn-1):fe});var wt=Ft.slice();wt.callee=le,Ot.set("arguments",wt);var si=Ee(le.apply(Ot,Ft));return E(si,zn=>zn instanceof ne?ni(zn.markCycles()):zn,ie)})}else if(k instanceof O){if(le=W.get(k),le==="undefined")throw new Error("Unbound variable `"+k.name+"'");return le}else{if(k instanceof ne)throw le=De&&De.toString(),new Error(`${ke(De)} ${le} is not a function`);return k}}catch(Ft){ie&&ie(Ft,k)}}async function pe(k,W,te){te===!0?W=te=W||vn:W===!0?W=te=vn:W=W||vn;for(var ie=y(k),me=[];;){var le=ie.shift();if(le){var De=await ae(le,{env:W,dynamic_scope:te,error:(Pe,Ze)=>{throw Ze&&(Pe.code instanceof Array||(Pe.code=[]),Pe.code.push(Ze.toString())),Pe}});me.push(De)}else return me}}function J(k){return function(W){return W?(W.token||W).match(k):!1}}var ve=J(/[()]/);function He(k){var W=typeof k=="string"?L(k):k,te=W.filter(ve),ie=te.filter(le=>(le.token||le)===")"),me=te.filter(le=>(le.token||le)==="(");return ie.length===me.length}ne.unDry=function(k){return new ne(k.car,k.cdr)},ne.prototype.toDry=function(){return{value:{car:this.car,cdr:this.cdr}}},Y.prototype.toDry=function(){return{value:null}},Y.unDry=function(){return fe},O.prototype.toDry=function(){return{value:{name:this.name}}},O.unDry=function(k){return new O(k.name)};function Re(k){console.error(k.message||k),k.code&&console.error(k.code.map((W,te)=>`[${te+1}]: ${W}`))}function ct(){var k="text/x-lips";if(window.document){var W=Array.from(document.querySelectorAll("script"));return function te(){var ie=W.shift();if(ie){var me=ie.getAttribute("type");if(me===k){var le=ie.getAttribute("src");return le?e.fetch(le).then(De=>De.text()).then(pe).then(te).catch(De=>{Re(De),te()}):pe(ie.innerHTML).then(te).catch(De=>{Re(De),te()})}else me&&me.match(/lips|lisp/)&&console.warn("Expecting "+k+" found "+me);return te()}}()}}typeof window<"u"&&r(window,ct),$.__className="Ahead",D.__className="Pattern",X.__className="Formatter",st.__className="Macro",$n.__className="Environment";var qt={version:"{{VER}}",exec:pe,parse:y,tokenize:L,evaluate:ae,Environment:$n,global_environment:vn,globalEnvironment:vn,env:vn,balanced_parenthesis:He,balancedParenthesis:He,Macro:st,quote:ni,Pair:ne,Formatter:X,specials:S,nil:fe,resolvePromises:Ee,LSymbol:O,LNumber:Ve};return vn.set("lips",qt),qt})})(dve);var Uht=dve.exports;const jht=Vp(Uht),fve=["FlinkSQL","SparkSQL","HiveSQL","MySQL","PGSQL","TrinoSQL","ImpalaSQL"],x5=fve[0],gve={id:"fixedTab",name:x5,data:{value:"",language:x5.toLowerCase()}},pve={id:"fixedStatusItem",name:x5,sortIndex:3};class mve{constructor(e,t,n){this._onDidChange=new nge,this._languageId=e,this.setModeConfiguration(t),this._preprocessCode=n??null}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get completionService(){return this._modeConfiguration.completionItems.completionService}get inlineCompletionService(){return this._modeConfiguration.inlineCompletionItems.completionService}get completionSnippets(){return this._modeConfiguration.completionItems.snippets}get inlineCompletionSnippets(){return this._modeConfiguration.inlineCompletionItems.inlineSnippets}get triggerCharacters(){return this._modeConfiguration.completionItems.triggerCharacters}get preprocessCode(){return this._preprocessCode}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}}const Tre=function(i,e,t,n){if(!n)return Promise.resolve([]);const{keywords:r}=n,o=r.map(s=>({label:s,kind:nc.CompletionItemKind.Keyword,detail:"keyword"}));return Promise.resolve(o)},m1={completionItems:{enable:!0,completionService:Tre,triggerCharacters:["."," "],snippets:[]},inlineCompletionItems:{enable:!0,completionService:Tre,triggerCharacters:["."," "]},diagnostics:!0},Kht=2*60*1e3;class Ght{constructor(e){this._defaults=e,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>Kht&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=Cl.createWebWorker({moduleId:this._defaults.languageId,label:this._defaults.languageId,createData:{languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...e){const t=e==null?void 0:e.filter(Boolean);return this._getClient().then(n=>(t&&(t!=null&&t.length)&&this._worker&&this._worker.withSyncedResources(t),n))}}class qht{constructor(){this.workerClients=new Map}valid(e,t){const n=typeof t=="string"?t:t.getValue(),r=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,r).then(s=>s.doValidation(n))}parserTreeToString(e,t){const n=typeof t=="string"?t:t.getValue(),r=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,r).then(s=>s.parserTreeToString(n))}getAllEntities(e,t,n){const r=typeof t=="string"?t:t.getValue(),o=typeof t=="string"?void 0:t.uri;return this.getClientWorker(e,o).then(a=>a.getAllEntities(r,n))}dispose(e){var t;e?this.workerClients.has(e)&&((t=this.workerClients.get(e))===null||t===void 0||t.dispose(),this.workerClients.delete(e)):(this.workerClients.forEach(n=>{n.dispose()}),this.workerClients.clear())}getClientWorker(e,...t){let n=this.workerClients.get(e);if(!n){const r=new Ght(this.getLanguageServiceDefault(e));return this.workerClients.set(e,r),r.getLanguageServiceWorker(...t)}return n.getLanguageServiceWorker(...t)}getLanguageServiceDefault(e){return new mve(e,m1)}}function Yht(i,e,t){let n=null;return(...r)=>{if(n&&clearTimeout(n),t&&!n)return i==null?void 0:i(...r);n=setTimeout(()=>{n&&clearTimeout(n),n=null,i==null||i(...r)},e)}}class Zht extends re.Component{constructor(t){super(t);fv(this,"_language",x5);fv(this,"languageService");fv(this,"onClick",(t,n)=>{console.log("onClick:",t,n)});fv(this,"onChangeLanguage",(t,n)=>{n&&n.value&&(this._language=n.value,this.updateLanguage(n.value))});fv(this,"analyseProblems",Yht(t=>{const n=t.data.value;this.languageService.valid(this.language,n).then(r=>{on.problems.reset();const o=this.convertMsgToProblemItem(t,n,r);on.problems.add(o)})},200));fv(this,"convertMsgToProblemItem",(t,n,r=[])=>{const o=t.id,s=`${t.name||""}`,a={id:o,name:s,isLeaf:!1,value:{code:s,message:"",startLineNumber:0,startColumn:1,endLineNumber:0,endColumn:1,status:Jh.Hint},children:[]};return a.children=r.map((u,d)=>({id:`${o}-${d}`,name:u.code||"",isLeaf:!0,value:{code:u.code,message:u.message,startLineNumber:Number(u.startLine),startColumn:Number(u.startCol),endLineNumber:Number(u.endLine),endColumn:Number(u.endCol),status:Jh.Error},children:[]})),a});fv(this,"parse",()=>{this.setupOutputLanguage();const t=on.editor.editorInstance.getValue();on.panel.cleanOutput(),this.languageService.parserTreeToString(this.language,t).then(n=>{const r=n==null?void 0:n.replace(/(\(|\))/g,`$1
`),s=new jht.Formatter(r).format({indent:2,offset:2}),a=on.panel.getPanel(on.builtin.getConstants().PANEL_OUTPUT??"")??{};on.panel.update({...a,data:s}),on.panel.appendOutput("")})});this.languageService=new qht}componentDidMount(){on.editor.onUpdateTab(this.analyseProblems),Cl.setTheme("sql-dark")}get language(){return this._language.toLowerCase()}updateLanguage(t){var u;const n=this.language,r=Object.assign(gve,{name:t,data:{language:n,value:""}}),o=((u=on.editor.getState().current)==null?void 0:u.id)||-1;on.editor.updateTab(r,o);const s=on.editor.editorInstance.getModel();s&&Cl.setModelLanguage(s,n);const a=Object.assign(pve,{name:t,sortIndex:3});this.analyseProblems(r),on.statusBar.update(a)}async setupOutputLanguage(){var n;const t=await((n=on.panel.outputEditorInstance)==null?void 0:n.getModel());t&&Cl.setModelLanguage(t,"clojure")}renderColorThemes(){const t=fve.map(n=>Fc.jsx(efe,{value:n,children:n},n));return Fc.jsx(gO,{style:{margin:"10px 4px 20px 4px"},defaultValue:this._language,onSelect:this.onChangeLanguage,children:t})}render(){return Fc.jsx("div",{children:Fc.jsxs("div",{style:{margin:"20px 20px"},children:[Fc.jsxs("h1",{style:{fontSize:20,textTransform:"uppercase"},children:["Select a language:"," "]}),this.renderColorThemes(),Fc.jsx(vb,{onClick:this.parse,children:"Parse"})]})})}}const Xht={id:"ExtendWorkbench",name:"ExtendWorkbench",activate(){const i={id:"ParserSidebar",title:"Sidebar",render(){return Fc.jsx(Zht,{})}};on.sidebar.add(i),on.sidebar.setState({current:i.id});const e={id:"OnlineParser",icon:"beaker",title:"SQL Languages Online Parse"},t={id:"GotoGithub",icon:"github",title:"Go To Github"};on.activityBar.remove("sidebar.explore.title"),on.activityBar.remove("sidebar.search.title"),on.activityBar.add([e,t]),on.activityBar.setState({selected:e.id}),on.activityBar.onClick(n=>{n===t.id&&(window.location.href="https://github.com/DTStack/monaco-sql-languages")}),on.editor.open(gve),on.statusBar.add(pve,Lp.right)},dispose(){}};var Qht=globalThis&&globalThis.__awaiter||function(i,e,t,n){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function u(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):r(h.value).then(a,u)}d((n=n.apply(i,e||[])).next())})};const _ve={},RW={};class yZ{static getOrCreate(e){return RW[e]||(RW[e]=new yZ(e)),RW[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}whenLoaded(){return this._lazyLoadPromise}load(){return this._loadingTriggered||(this._loadingTriggered=!0,_ve[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}}function BC(i){const e=i.id;_ve[e]=i,nc.register(i);const t=yZ.getOrCreate(e);nc.setMonarchTokensProvider(e,t.whenLoaded().then(n=>n.language)),nc.onLanguage(e,()=>Qht(this,void 0,void 0,function*(){const n=yield t.load();nc.setLanguageConfiguration(e,n.conf)}))}var Jht=globalThis&&globalThis.__rest||function(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t};const Nre=new Map,PW=new Map,FW=new Map,vve=new Map;function Are(i){const e=i.languageId;It(()=>import("./setupLanguageMode-e5d33ac9.js"),[]).then(t=>{var n;PW.has(e)&&((n=PW.get(e))===null||n===void 0||n.dispose()),PW.set(e,t.setupLanguageMode(i))})}function $u(i,e){var t;if(typeof e!="object")return;const{preprocessCode:n}=e,r=Jht(e,["preprocessCode"]),o=eft(i,r),s=new mve(i,o,n);vve.set(i,s),Nre.get(i)?Are(s):(FW.has(i)&&((t=FW.get(i))===null||t===void 0||t.dispose()),FW.set(i,nc.onLanguage(i,()=>{Are(s),Nre.set(i,!0)})))}function eft(i,e){var t,n,r,o,s,a,u,d,h,f,p,m,v,b,L;const S=vve.get(i),y=typeof e.diagnostics=="boolean"?e.diagnostics:(t=S==null?void 0:S.modeConfiguration.diagnostics)!==null&&t!==void 0?t:m1.diagnostics,E=typeof e.completionItems=="boolean"?e.completionItems:(n=S==null?void 0:S.modeConfiguration.completionItems.enable)!==null&&n!==void 0?n:m1.completionItems.enable,A=typeof e.inlineCompletionItems=="boolean"?e.inlineCompletionItems:(r=S==null?void 0:S.modeConfiguration.inlineCompletionItems.enable)!==null&&r!==void 0?r:m1.inlineCompletionItems.enable,N=typeof e.completionItems!="boolean"&&typeof((o=e.completionItems)===null||o===void 0?void 0:o.completionService)=="function"?(s=e.completionItems)===null||s===void 0?void 0:s.completionService:(a=S==null?void 0:S.modeConfiguration.completionItems.completionService)!==null&&a!==void 0?a:m1.completionItems.completionService,V=typeof e.inlineCompletionItems!="boolean"&&typeof((u=e.inlineCompletionItems)===null||u===void 0?void 0:u.completionService)=="function"?(d=e.inlineCompletionItems)===null||d===void 0?void 0:d.completionService:(h=S==null?void 0:S.modeConfiguration.inlineCompletionItems.completionService)!==null&&h!==void 0?h:m1.inlineCompletionItems.completionService,R=typeof e.completionItems!="boolean"&&Array.isArray((f=e.completionItems)===null||f===void 0?void 0:f.triggerCharacters)?e.completionItems.triggerCharacters:(p=S==null?void 0:S.modeConfiguration.completionItems.triggerCharacters)!==null&&p!==void 0?p:m1.completionItems.triggerCharacters,M=typeof e.completionItems!="boolean"?(v=(m=e.completionItems)===null||m===void 0?void 0:m.snippets)!==null&&v!==void 0?v:[]:[],K=typeof e.inlineCompletionItems!="boolean"?(L=(b=e.inlineCompletionItems)===null||b===void 0?void 0:b.inlineSnippets)!==null&&L!==void 0?L:[]:[];return{diagnostics:y,completionItems:{enable:E,completionService:N,triggerCharacters:R,snippets:M},inlineCompletionItems:{enable:A,completionService:V,inlineSnippets:K}}}const Xt={BINARY:"binary",BINARY_ESCAPE:"binary.escape",COMMENT:"comment",COMMENT_QUOTE:"comment.quote",DELIMITER:"delimiter",DELIMITER_CURLY:"delimiter.curly",DELIMITER_PAREN:"delimiter.paren",DELIMITER_SQUARE:"delimiter.square",IDENTIFIER:"identifier",IDENTIFIER_QUOTE:"identifier.quote",KEYWORD:"keyword",KEYWORD_SCOPE:"keyword.scope",NUMBER:"number",NUMBER_FLOAT:"number.float",NUMBER_BINARY:"number.binary",NUMBER_OCTAL:"number.octal",NUMBER_HEX:"number.hex",OPERATOR:"operator",OPERATOR_KEYWORD:"operator.keyword",OPERATOR_SYMBOL:"operator.symbol",PREDEFINED:"predefined",STRING:"string",STRING_DOUBLE:"string.double",STRING_ESCAPE:"string.escape",TYPE:"type",VARIABLE:"variable",WHITE:"white"},Qt=i=>i+".sql";var Dr;(function(i){i.FLINK="flinksql",i.HIVE="hivesql",i.MYSQL="mysql",i.PG="pgsql",i.SPARK="sparksql",i.TRINO="trinosql",i.IMPALA="impalasql"})(Dr||(Dr={}));BC({id:Dr.FLINK,extensions:[".flinksql"],aliases:["FlinkSQL","flink","Flink"],loader:()=>It(()=>import("./flink-6aa74711.js"),[])});$u(Dr.FLINK,{completionItems:!0,diagnostics:!0});BC({id:Dr.SPARK,extensions:[".sparksql"],aliases:["SparkSQL","spark","Spark"],loader:()=>It(()=>import("./spark-6a1b9d55.js"),[])});$u(Dr.SPARK,{completionItems:!0,diagnostics:!0});BC({id:Dr.HIVE,extensions:[".hivesql"],aliases:["HiveSQL","hive","Hive"],loader:()=>It(()=>import("./hive-14ad7a97.js"),[])});$u(Dr.HIVE,{completionItems:!0,diagnostics:!0});BC({id:Dr.TRINO,extensions:[".trinosql"],aliases:["TrinoSQL","trino","Trino","prestosql","PrestoSQL","presto","Presto"],loader:()=>It(()=>import("./trino-09ac0ae9.js"),[])});$u(Dr.TRINO,{completionItems:!0,diagnostics:!0});BC({id:Dr.MYSQL,extensions:[".mysql"],aliases:["MySQL","mysql"],loader:()=>It(()=>import("./mysql-06a23a59.js"),[])});$u(Dr.MYSQL,{completionItems:!0,diagnostics:!0});BC({id:Dr.PG,extensions:[".pgsql"],aliases:["PgSQL","postgresql","PostgreSQL"],loader:()=>It(()=>import("./pgsql-41821bd3.js"),[])});$u(Dr.PG,{completionItems:!0,diagnostics:!0});BC({id:Dr.IMPALA,extensions:[".impalasql"],aliases:["impalaSQL","impala","Impala"],loader:()=>It(()=>import("./impala-a617bd30.js"),[])});$u(Dr.IMPALA,{completionItems:!0,diagnostics:!0});const tft={base:"vs",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"098658"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"098658"},{token:Qt(Xt.COMMENT),foreground:"008000"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"008000"},{token:Qt(Xt.DELIMITER),foreground:"000000"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"319331"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"0431fa"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"0431fa"},{token:Qt(Xt.IDENTIFIER),foreground:"001080"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"001080"},{token:Qt(Xt.KEYWORD),foreground:"0000ff"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"af00db"},{token:Qt(Xt.NUMBER),foreground:"098658"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"098658"},{token:Qt(Xt.NUMBER_BINARY),foreground:"098658"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"098658"},{token:Qt(Xt.NUMBER_HEX),foreground:"098658"},{token:Qt(Xt.OPERATOR),foreground:"000000"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"0000ff"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"000000"},{token:Qt(Xt.PREDEFINED),foreground:"795e26"},{token:Qt(Xt.STRING),foreground:"a31515"},{token:Qt(Xt.STRING_ESCAPE),foreground:"a31515"},{token:Qt(Xt.TYPE),foreground:"267f99"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},nft={base:"vs-dark",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"b5cea8"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"b5cea8"},{token:Qt(Xt.COMMENT),foreground:"6a9955"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"6a9955"},{token:Qt(Xt.DELIMITER),foreground:"d4d4d4"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"da70d6"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"ffd700"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"ffd700"},{token:Qt(Xt.IDENTIFIER),foreground:"9cdcfe"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Qt(Xt.KEYWORD),foreground:"569cd6"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"c586c0"},{token:Qt(Xt.NUMBER),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_BINARY),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_HEX),foreground:"b5cea8"},{token:Qt(Xt.OPERATOR),foreground:"d4d4d4"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"d4d4d4"},{token:Qt(Xt.PREDEFINED),foreground:"dcdcaa"},{token:Qt(Xt.STRING),foreground:"ce9178"},{token:Qt(Xt.STRING_ESCAPE),foreground:"ce9178"},{token:Qt(Xt.TYPE),foreground:"4ec9b0"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},ift={base:"hc-black",inherit:!0,rules:[{token:Qt(Xt.BINARY),foreground:"b5cea8"},{token:Qt(Xt.BINARY_ESCAPE),foreground:"b5cea8"},{token:Qt(Xt.COMMENT),foreground:"7ca668"},{token:Qt(Xt.COMMENT_QUOTE),foreground:"7ca668"},{token:Qt(Xt.DELIMITER),foreground:"ffffff"},{token:Qt(Xt.DELIMITER_CURLY),foreground:"da70d6"},{token:Qt(Xt.DELIMITER_PAREN),foreground:"ffd700"},{token:Qt(Xt.DELIMITER_SQUARE),foreground:"ffd700"},{token:Qt(Xt.IDENTIFIER),foreground:"9cdcfe"},{token:Qt(Xt.IDENTIFIER_QUOTE),foreground:"9cdcfe"},{token:Qt(Xt.KEYWORD),foreground:"569cd6"},{token:Qt(Xt.KEYWORD_SCOPE),foreground:"c586c0"},{token:Qt(Xt.NUMBER),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_FLOAT),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_BINARY),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_OCTAL),foreground:"b5cea8"},{token:Qt(Xt.NUMBER_HEX),foreground:"b5cea8"},{token:Qt(Xt.OPERATOR),foreground:"ffffff"},{token:Qt(Xt.OPERATOR_KEYWORD),foreground:"569cd6"},{token:Qt(Xt.OPERATOR_SYMBOL),foreground:"ffffff"},{token:Qt(Xt.PREDEFINED),foreground:"dcdcaa"},{token:Qt(Xt.STRING),foreground:"ce9178"},{token:Qt(Xt.STRING_ESCAPE),foreground:"ce9178"},{token:Qt(Xt.TYPE),foreground:"4ec9b0"},{token:Qt(Xt.VARIABLE),foreground:"4fc1ff"}],colors:{}},SZ={lightThemeData:tft,darkThemeData:nft,hcBlackThemeData:ift};var Zg;(function(i){i.CATALOG="catalog",i.CATALOG_CREATE="catalogCreate",i.DATABASE="database",i.DATABASE_CREATE="databaseCreate",i.TABLE="table",i.TABLE_CREATE="tableCreate",i.VIEW="view",i.VIEW_CREATE="viewCreate",i.FUNCTION="function",i.FUNCTION_CREATE="functionCreate",i.PROCEDURE="procedure",i.PROCEDURE_CREATE="procedureCreate",i.COLUMN="column",i.COLUMN_CREATE="columnCreate"})(Zg||(Zg={}));function rft(){return new Worker("/monaco-sql-languages/assets/editor.worker-3ee17800.js")}function oft(){return new Worker("/monaco-sql-languages/assets/flink.worker-545e13e8.js")}function sft(){return new Worker("/monaco-sql-languages/assets/spark.worker-43864300.js")}function aft(){return new Worker("/monaco-sql-languages/assets/hive.worker-18952c1b.js")}function lft(){return new Worker("/monaco-sql-languages/assets/pgsql.worker-345156f5.js")}function uft(){return new Worker("/monaco-sql-languages/assets/mysql.worker-c32511b6.js")}function cft(){return new Worker("/monaco-sql-languages/assets/trino.worker-61ef1828.js")}function dft(){return new Worker("/monaco-sql-languages/assets/impala.worker-145bdee1.js")}globalThis.MonacoEnvironment={getWorker(i,e){return e===Dr.FLINK?new oft:e===Dr.HIVE?new aft:e===Dr.SPARK?new sft:e===Dr.PG?new lft:e===Dr.MYSQL?new uft:e===Dr.TRINO?new cft:e===Dr.IMPALA?new dft:new rft}};Cl.defineTheme("sql-dark",SZ.darkThemeData);Cl.defineTheme("sql-light",SZ.lightThemeData);Cl.defineTheme("sql-hc",SZ.hcBlackThemeData);const hft=["mock_catalog_1","mock_catalog_2","mock_catalog_3"],fft=["mock_schema_1","mock_schema_2","mock_schema_3"],gft=["mock_database_1","mock_database_2","mock_database_3"],pft=["mock_table1","mock_table2","mock_table3"],mft=["mock_view1","mock_view2","mock_view3"],_ft=["current_catalog_db1","current_catalog_db2","current_catalog_db3"],vft=["current_catalog_schema1","current_catalog_schema2","current_catalog_schema3"],bft=["current_db_table1","current_db_table2","current_db_table3"],Cft=["current_db_view1","current_db_view2","current_db_view3"],bg=(i,e)=>{const t=i?i.replace(/sql/gi,"").toLocaleLowerCase():"";return t?`${t}_${e}`:e};function DP(i){const e=hft.map(t=>({label:bg(i,t),kind:nc.CompletionItemKind.Field,detail:"catalog",sortText:"1"+bg(i,t)}));return Promise.resolve(e)}function wft(i,e){const n=(e?gft:_ft).map(r=>({label:bg(i,r),kind:nc.CompletionItemKind.Field,detail:"database",sortText:"1"+bg(i,r)}));return Promise.resolve(n)}function yft(i,e){const n=(e?fft:vft).map(r=>({label:bg(i,r),kind:nc.CompletionItemKind.Field,detail:"schema",sortText:"1"+bg(i,r)}));return Promise.resolve(n)}function BW(i,e,t){const r=(e&&t?pft:bft).map(o=>({label:bg(i,o),kind:nc.CompletionItemKind.Field,detail:"table",sortText:"1"+bg(i,o)}));return Promise.resolve(r)}function WW(i,e,t){const r=(e&&t?mft:Cft).map(o=>({label:bg(i,o),kind:nc.CompletionItemKind.Field,detail:"view",sortText:"1"+bg(i,o)}));return Promise.resolve(r)}const Sft=i=>["flinksql","trinosql"].includes(i.toLowerCase()),Lft=i=>["trinosql","hivesql","sparksql"].includes(i),WC=async function(i,e,t,n){if(!n)return Promise.resolve([]);const r=i.getLanguageId(),o=Sft(r),s=Lft(r)?yft:wft,{keywords:a,syntax:u}=n,d=a.map(y=>({label:y,kind:nc.CompletionItemKind.Keyword,detail:"关键字",sortText:"2"+y}));let h=[],f=!1,p=!1,m=!1,v=!1,b=!1,L=!1,S=!1;for(let y=0;y<u.length;y++){const{syntaxContextType:E,wordRanges:A}=u[y],N=A.map(R=>R.text),V=N.length;if((E===Zg.CATALOG||E===Zg.DATABASE_CREATE)&&!f&&V<=1&&(h=h.concat(await DP(r)),f=!0),(E===Zg.DATABASE||E===Zg.TABLE_CREATE||E===Zg.VIEW_CREATE)&&(!f&&o&&V<=1&&(h=h.concat(await DP(r)),f=!0),!p&&V<=1&&(h=h.concat(await s(r)),p=!0),!m&&o&&V>=2&&V<=3&&(h=h.concat(await s(r,N[0])),m=!0)),E===Zg.TABLE)if(V<=1){if(!f&&o){const R=await DP(r);h=h.concat(R),f=!0}p||(h=h.concat(await s(r)),p=!0),v||(h=h.concat(await BW(r)),v=!0)}else V>=2&&V<=3?(!m&&o&&(h=h.concat(await s(r,N[0])),m=!0),b||(h=h.concat(await BW(r,void 0,N[0])),b=!0)):V>=4&&V<=5&&(b||(h=h.concat(await BW(r,N[0],N[2])),b=!0));E===Zg.VIEW&&(V<=1?(!f&&o&&(h=h.concat(await DP(r)),f=!0),p||(h=h.concat(await s(r)),p=!0),L||(h=h.concat(await WW(r)),L=!0)):V>=2&&V<=3?(!m&&o&&(h=h.concat(await s(r,N[0])),m=!0),S||(h=h.concat(await WW(r,void 0,N[0])),S=!0)):V>=4&&V<=5&&(S||(h=h.concat(await WW(r,N[0],N[2])),S=!0)))}return[...h,...d]},hL=i=>{const e=/@@{[A-Za-z0-9._-]*}/g,t=/\${[A-Za-z0-9._-]*}/g;let n=i;return e.test(i)&&(n=n.replace(e,r=>r.replace(/@|{|}|\.|-/g,"_"))),t.test(i)&&(n=n.replace(t,r=>r.replace(/\$|{|}|\.|-/g,"_"))),n},Eft=(i,e)=>{const t=/@@{[A-Za-z0-9._-]*}/g,n=/\${[A-Za-z0-9._-]*}/g;let r=i;return t.test(i)&&(r=r.replace(t,o=>e?o.replace(/@/,e).replace(/}/,e).replace(/@|{|\.|-/g,"_"):o.replace(/@|{|}|\.|-/g,"_"))),n.test(i)&&(r=r.replace(n,o=>e?o.replace(/\$|}/g,e).replace(/{|\.|-/g,"_"):o.replace(/\$|{|}|\.|-/g,"_"))),r};$u(Dr.FLINK,{completionItems:{enable:!0,completionService:WC},preprocessCode:hL});$u(Dr.SPARK,{completionItems:{enable:!0,completionService:WC},preprocessCode:hL});$u(Dr.HIVE,{completionItems:{enable:!0,completionService:WC},preprocessCode:i=>Eft(i,"`")});$u(Dr.MYSQL,{completionItems:{enable:!0,completionService:WC},preprocessCode:hL});$u(Dr.TRINO,{completionItems:{enable:!0,completionService:WC},preprocessCode:hL});$u(Dr.PG,{completionItems:{enable:!0,completionService:WC},preprocessCode:hL});$u(Dr.IMPALA,{completionItems:{enable:!0,completionService:WC},preprocessCode:hL});function xft(){const i=he.useRef(),[e,t]=he.useState();return he.useEffect(()=>{i.current||(i.current=Vht({extensions:[Xht]}),i.current&&t(()=>{var r;return(r=i.current)==null?void 0:r.render(Fc.jsx(Tut,{}))}))},[]),Fc.jsx("div",{children:e})}VW.createRoot(document.getElementById("root")).render(Fc.jsx(re.StrictMode,{children:Fc.jsx(xft,{})}));export{Yje as M,Kje as R,Xt as T,Ght as W,It as _,Yht as d,Cl as e,nc as l,AM as m};
